/*! @Release Version : SBGrid3.23.07.26.0 Copyright© by 2023 Softbowl. Co. Ltd. , All Rights Reserved. */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,(()=>(()=>{var e={2733:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Observer=void 0;const i=r(5087),o=r(3396);t.Observer=class{constructor(e,t){this._publisher=null,this._name=null!=t?t:o.Utils.ensureName(this.constructor.name),this.publisher=e}disconnect(){this.publisher=void 0}get publisher(){return this._publisher}set publisher(e){var t,r;this._publisher!==e&&(null===(t=this._publisher)||void 0===t||t.remove(this),this._publisher=e,null===(r=this._publisher)||void 0===r||r.add(this))}get root(){let e=this.publisher;for(;o.Convert.isValue(e.publisher);)e=e.publisher;return e}get name(){return this._name}doCommand(e,t){return!0}canCommand(e,t){return!0}fireCommand(e,t){const r=this.root;return(i.Command.skipCheck(t)||r.canCommand(e,t))&&r.doCommand(e,t)}fireCommandAsync(e,t){return n(this,void 0,void 0,(function*(){const r=this.root;return(i.Command.skipCheck(t)||r.canCommand(e,t))&&r.doCommand(e,t)}))}}},235:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Publisher=void 0;const n=r(5087),i=r(3396),o=r(2733);class s extends o.Observer{get observers(){var e;return null!==(e=this._observers)&&void 0!==e?e:this._observers=[]}add(e){return e instanceof o.Observer&&0==this.observers.some((t=>t===e))&&(this.observers.push(e),e.publisher!=this&&(e.publisher=this)),this}remove(e){if(e instanceof o.Observer){let t=this.observers.findIndex((t=>t===e));t>=0&&(this.observers.splice(t,1),e.publisher==this&&(e.publisher=void 0))}return this}disconnect(){super.disconnect(),this.observers.forEach((e=>e.disconnect())),this.observers.splice(0)}canCommand(e,t){if(1==n.Command.skipCheck(t))return!0;let r;for(let n of this.observers)if(r=n.canCommand(e,t),!i.Convert.isNull(r)&&!r)return r;return r}doCommand(e,t){for(let r of this.observers)if(0==r.doCommand(e,t))return!1;return!0}}t.Publisher=s},9863:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceManager=t.DefaultResource=void 0;const n=r(3396);class i{constructor(){this.emptyMessage="조회조건에 해당하는 데이터가 없습니다.",this.menu_column="컬럼",this.menu_fiexCol="고정(열)",this.menu_header="좌측",this.menu_body="중앙",this.menu_columnSticky="행고정",this.menu_tail="우측",this.menu_asc="오름차순",this.menu_desc="내림차순",this.menu_reset="정렬 취소",this.menu_copy="복사",this.menu_cut="자르기",this.menu_paste="붙여넣기",this.menu_undo="되돌리기",this.menu_redo="재실행",this.menu_addRow="행 추가(하위)",this.menu_addTop="행 추가(상위)",this.menu_insertRow="행 추가(위)",this.menu_appendRow="행 추가(아래)",this.menu_deleteRow="행 삭제",this.menu_sticky="행 고정",this.menu_sticky_cancel="행 고정(취소)",this.menu_edit="편집",this.menu_cancel="취소",this.tool_copy="복사",this.tool_edit="편집",this.tool_update="수정",this.tool_cancel="취소",this.tool_save="저장",this.tool_refresh="새로고침",this.tool_undo="되돌리기",this.tool_redo="재실행",this.tool_addRow="행 추가(하위)",this.tool_addTop="행 추가(상위)",this.tool_insertRow="행 추가(위)",this.tool_appendRow="행 추가(아래)",this.tool_deleteRow="행 삭제",this.tool_excel="엑셀 다운로드",this.filter_isLessThan="다음 보다 작음",this.filter_isLessThanOrEqualTo="다음 보다 작거나 같음",this.filter_isEqualTo="다음과 같음",this.filter_isNotEqualTo="다음과 같지 않음",this.filter_isGreaterThan="다음 보다 큼",this.filter_isGreaterThanOrEqualTo="다음 보다 크거나 같음",this.filter_in="다음을 포함",this.filter_notIn="다음을 포함하지 않음",this.filter_fromTo="다음 범위에 포함",this.filter_notFromTo="다음 범위에 포함되지 않음",this.filter_startsWith="다음으로 시작",this.filter_notStartsWith="다음으로 시작되지 않음",this.filter_endsWith="다음으로 끝남",this.filter_notEndsWith="다음으로 끝나지 않음",this.filter_contains="문자열에 다음을 포함",this.filter_notContains="문자열에 다음을 포함하지 않음",this.filter_isNull="is Null",this.filter_isNotNull="is Not Null",this.filter_isEmpty="is Empty",this.filter_isNotEmpty="is Not Empty",this.filter_isNullOrEmpty="is Null Or Empty",this.filter_isNotNullOrEmpty="is Not Null or Not Empty",this.group_groupZone="이곳으로 컬럼의 헤더를 드롭하여 그룹핑 하세요"}}t.DefaultResource=i;class o{constructor(){this.language="",this.resources={}}static get default(){return this.defaultResource}static set default(e){this.setDefault(e)}get resource(){var e;return null!==(e=this.resources[this.language])&&void 0!==e?e:this.resources[this.language]=n.Convert.cloneData(o.defaultResource)}set resource(e){this.setResource(this.language,e)}setResource(e,t){var r;return this.language=e,n.Convert.isValue(t)&&(this.resources[e]=n.Convert.mergeData(t,null!==(r=this.resources[e])&&void 0!==r?r:o.default)),this.resources[e]}static setDefault(e){this.defaultResource=n.Convert.mergeData(e,this.defaultResource)}}t.ResourceManager=o,o.defaultResource=new i},5087:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollBarCommand=t.ScrollCommand=t.ChangeCommand=t.Command=void 0;const n=r(1880),i=r(3396),o=r(1290);class s{constructor(e){this.command=e}static canCheck(e){const t="object"==typeof e?e.command:e;return n.canCheckCommand.has(t)}static skipCheck(e){return!this.canCheck(e)}}t.Command=s;class a extends s{constructor(){super(n.Commands.Change)}static create(...e){return o.Validator.validateArg(e,0),new a}}t.ChangeCommand=a;class l extends s{constructor(e,t){super(n.Commands.Scroll),this.scrollX=e,this.scrollY=t}static create(...e){o.Validator.validateArg(e,2);let t=i.Convert.asInt(e[0]),r=i.Convert.asInt(e[1]);return new l(t,r)}}t.ScrollCommand=l;class u extends s{constructor(e,t=void 0){switch(e){case n.Commands.ScrollDown:case n.Commands.ScrollLeft:case n.Commands.ScrollRight:case n.Commands.ScrollUp:case n.Commands.PageDown:case n.Commands.PageLeft:case n.Commands.PageRight:case n.Commands.PageUp:super(e),this.scroll=t;break;default:throw`[${e}] is unknown scroll-bar command`}}static create(e,...t){const r=t.length>0?i.Convert.asInt(t[0]):void 0;return new u(e,r)}}t.ScrollBarCommand=u},1880:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommandFactory=t.canCheckCommand=t.Commands=void 0;const n=r(3396),i=r(5087),o=r(9402),s=r(8154);var a;!function(e){e.Scroll="scroll",e.ScrollUp="scrollUp",e.ScrollDown="scrollDown",e.ScrollLeft="scrollLeft",e.ScrollRight="scrollRight",e.PageUp="pageUp",e.PageDown="pageDown",e.PageLeft="pageLeft",e.PageRight="pageRight",e.Change="change",e.Update="update",e.Delete="delete",e.Insert="insert",e.Import="import",e.Loaded="loaded",e.Refresh="refresh",e.Rebuild="rebuild",e.Reload="reload",e.Loading="loading",e.Save="save",e.AddRow="addRow",e.AddTop="addTop",e.InsertRow="insertRow",e.AppendRow="appendRow",e.DeleteRow="deleteRow",e.ToogleRow="toggleRow",e.OpenRow="openRow",e.CloseRow="closeRow",e.ToogleCheck="toggleCheck",e.Open="open",e.Close="close",e.Pager="pager",e.Cancel="cancel",e.Undo="undo",e.Redo="redo",e.Selected="selected",e.Edit="edit",e.Focused="focused",e.Copy="copy",e.Cut="cut",e.Paste="paste",e.Escape="escape",e.Select="select",e.EditFilter="editFilter",e.TabNextFocusFilter="tabNextFocusFilter",e.MoveFocus="moveFocus",e.SortAsc="asc",e.SortDesc="desc",e.SortReset="reset",e.Sticky="sticky",e.NonePart="none",e.MoveToPart="moveToPart",e.ColumnVisible="columnVisible",e.OperatorChanged="operatorChanged",e.Filter="filter",e.UpdateCellData="updateCellData",e.PopupPosChange="popupPositionChanged",e.FilterCellData="filterCellData",e.ClosePopup="closePopup",e.FocusPopupItem="focusPopupItem"}(a||(t.Commands=a={})),t.canCheckCommand=new Set([a.Focused]);const l=new Map([[a.Scroll,i.ScrollCommand.create],[a.Change,i.ChangeCommand.create],[a.Update,o.UpdateCommand.create],[a.Insert,o.InsertCommand.create],[a.Delete,o.DeleteCommand.create],[a.Loaded,o.LoadedCommand.create],[a.Refresh,s.RefreshCommand.create],[a.Rebuild,s.RebuildCommand.create],[a.Open,s.OpenCommand.create],[a.Close,s.CloseCommand.create],[a.Pager,s.PagerCommand.create],[a.Cancel,o.CancelCommand.create],[a.AddRow,s.AddRowCommand.create],[a.AddTop,s.AddTopCommand.create],[a.DeleteRow,s.DeleteRowCommand.create],[a.Undo,o.UndoCommand.create],[a.Redo,o.RedoCommand.create],[a.Copy,o.CopyCommand.create],[a.Cut,o.CutCommand.create],[a.Paste,o.PasteCommand.create],[a.Select,o.PasteCommand.create],[a.Edit,s.EditCommand.create]]);t.CommandFactory=class{static create(e,...t){if(e=n.Convert.parseEnum(a,e),l.has(e))return l.get(e)(t);throw`'${e}' is unknown command.`}}},9402:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingCommand=t.FilterCellDataCommand=t.UpdateCellDataCommand=t.CutCommand=t.PasteCommand=t.CopyCommand=t.RedoCommand=t.UndoCommand=t.CancelCommand=t.SaveCommand=t.LoadedCommand=t.DeleteCommand=t.ImportCommand=t.InsertCommand=t.UpdateCommand=t.ReloadCommand=void 0;const n=r(1290),i=r(1880),o=r(5087);class s extends o.Command{constructor(){super(i.Commands.Reload)}static create(...e){return n.Validator.validateArg(e,0),new s}}t.ReloadCommand=s;class a extends o.Command{constructor(e){super(i.Commands.Update),this.data=e}static create(...e){return n.Validator.validateArg(e,2),new a(e[1])}}t.UpdateCommand=a;class l extends o.Command{constructor(e){super(i.Commands.Insert),this.data=e}static create(...e){return n.Validator.validateArg(e,1),new l(e[0])}}t.InsertCommand=l;class u extends o.Command{constructor(e){super(i.Commands.Import),this.data=e}static create(...e){return n.Validator.validateArg(e,1),new u(e[0])}}t.ImportCommand=u;class c extends o.Command{constructor(e){super(i.Commands.Delete),this.data=e}static create(...e){return n.Validator.validateArg(e,1),new c(e[0])}}t.DeleteCommand=c;class h extends o.Command{constructor(e){super(i.Commands.Loaded),this.data=e}static create(...e){return n.Validator.validateArg(e,1),new h(e[0])}}t.LoadedCommand=h;class d extends o.Command{constructor(){super(i.Commands.Save)}static create(...e){return n.Validator.validateArg(e,0),new d}}t.SaveCommand=d;class f extends o.Command{constructor(){super(i.Commands.Cancel)}static create(...e){return n.Validator.validateArg(e,0),new f}}t.CancelCommand=f;class p extends o.Command{constructor(){super(i.Commands.Undo)}static create(...e){return n.Validator.validateArg(e,0),new p}}t.UndoCommand=p;class m extends o.Command{constructor(){super(i.Commands.Redo)}static create(...e){return n.Validator.validateArg(e,0),new m}}t.RedoCommand=m;class g extends o.Command{constructor(){super(i.Commands.Copy)}static create(...e){return n.Validator.validateArg(e,0),new g}}t.CopyCommand=g;class v extends o.Command{constructor(){super(i.Commands.Paste)}static create(...e){return n.Validator.validateArg(e,0),new v}}t.PasteCommand=v;class y extends o.Command{constructor(){super(i.Commands.Cut)}static create(...e){return n.Validator.validateArg(e,0),new y}}t.CutCommand=y;class b extends o.Command{constructor(e,t,r){super(i.Commands.UpdateCellData),this.column=e,this.rowItem=t,this.value=r}}t.UpdateCellDataCommand=b;class w extends o.Command{constructor(e,t,r,n){super(i.Commands.FilterCellData),this.column=e,this.rowItem=t,this.items=r,this.cell=n}}t.FilterCellDataCommand=w;class C extends o.Command{constructor(e){super(i.Commands.Loading),this.loading=e}}t.LoadingCommand=C},3905:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.GridAddCommand=t.GridCaptionCheckCommand=t.GridEventCommand=t.GridMenuCommand=t.GridFocusCommand=t.GridSelectCommand=t.GridEditCommand=t.GridValueCommand=t.GridCommand=t.GridCommands=void 0,function(e){e.Value="value",e.Edit="edit",e.Select="select",e.Focus="focus",e.Menu="menu",e.Event="event",e.Add="add",e.CaptionCheck="captionCheck"}(r||(t.GridCommands=r={}));class n{constructor(e){this.command=e}}t.GridCommand=n;t.GridValueCommand=class extends n{constructor(e,t,n){super(r.Value),this.key=e,this.value=t,this.field=n}};t.GridEditCommand=class extends n{constructor(e,t){super(r.Edit),this.key=e,this.column=t}};t.GridSelectCommand=class extends n{constructor(e,t){super(r.Select),this.key=e,this.column=t}};t.GridFocusCommand=class extends n{constructor(e,t){super(r.Focus),this.key=e,this.column=t}};t.GridMenuCommand=class extends n{constructor(e,t,n){super(r.Menu),this.menu=e,this.key=t,this.column=n}};t.GridEventCommand=class extends n{constructor(e,t,n){super(r.Event),this.event=e,this.key=t,this.column=n}};t.GridCaptionCheckCommand=class extends n{constructor(e,t){super(r.CaptionCheck),this.column=e,this.checked=t}};t.GridAddCommand=class extends n{constructor(e,t){super(r.Add),this.key=e,this.data=t}}},8154:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToggleCheckCommand=t.CloseRowCommand=t.OpenRowCommand=t.ToggleRowCommand=t.ColumnVisibleCommand=t.MoveToPartCommand=t.FocusPopupItemCommand=t.ClosePopupCommand=t.PopupPosChangeCommand=t.ColumnCheckCommand=t.StickyCommand=t.FilterCommand=t.OperatorChangedCommand=t.ResetCommand=t.DescCommand=t.AscCommand=t.ColumnCommand=t.MoveFocusCommand=t.EditFilterCommand=t.SelectCommand=t.EscapeCommand=t.FocusedCommand=t.EditCommand=t.SelectedCommand=t.DeleteRowCommand=t.AppendRowCommand=t.InsertRowCommand=t.AddTopCommand=t.AddRowCommand=t.PagerCommand=t.CloseCommand=t.OpenCommand=t.RebuildCommand=t.RefreshCommand=void 0;const n=r(1290),i=r(5087),o=r(1880);class s extends i.Command{constructor(e){var t;super(o.Commands.Refresh),this.rowStart=null==e?void 0:e.rowStart,this.rowEnd=null==e?void 0:e.rowEnd,this.colStart=null==e?void 0:e.colStart,this.colEnd=null==e?void 0:e.colEnd,this.cols=null==e?void 0:e.cols,this.key=s.no++,this.onlyLayout=null!==(t=null==e?void 0:e.onlyLayout)&&void 0!==t&&t}static create(...e){return n.Validator.validateArg(e,0),new s}}t.RefreshCommand=s,s.no=0;class a extends i.Command{constructor(){super(o.Commands.Rebuild)}static create(...e){return n.Validator.validateArg(e,0),new a}}t.RebuildCommand=a;class l extends i.Command{constructor(e){super(o.Commands.Open),this.rowIndex=e}static create(...e){return n.Validator.validateArg(e,1),new l(e[0])}}t.OpenCommand=l;class u extends i.Command{constructor(e){super(o.Commands.Close),this.rowIndex=e}static create(...e){return n.Validator.validateArg(e,1),new u(e[0])}}t.CloseCommand=u;class c extends i.Command{constructor(e){super(o.Commands.Pager),this.pageNo=e}static create(...e){return n.Validator.validateArg(e,1),new c(e[0])}}t.PagerCommand=c;class h extends i.Command{constructor(e,t){super(o.Commands.AddRow),this.key=e,this.rowData=t}static create(...e){return n.Validator.validateArg(e,2),new h(e[0],e[1])}}t.AddRowCommand=h;class d extends i.Command{constructor(e,t){super(o.Commands.AddTop),this.key=e,this.rowData=t}static create(...e){return n.Validator.validateArg(e,2),new d(e[0],e[1])}}t.AddTopCommand=d;class f extends i.Command{constructor(e,t){super(o.Commands.InsertRow),this.key=e,this.rowData=t}static create(...e){return n.Validator.validateArg(e,2),new f(e[0],e[1])}}t.InsertRowCommand=f;class p extends i.Command{constructor(e,t){super(o.Commands.AppendRow),this.key=e,this.rowData=t}static create(...e){return n.Validator.validateArg(e,2),new p(e[0],e[1])}}t.AppendRowCommand=p;class m extends i.Command{constructor(e,t){super(o.Commands.DeleteRow),this.key=e,this.rowData=t}static create(...e){return n.Validator.validateArg(e,2),new m(e[0],e[1])}}t.DeleteRowCommand=m;class g extends i.Command{constructor(){super(o.Commands.Selected)}}t.SelectedCommand=g;class v extends i.Command{constructor(e,t,r){super(o.Commands.Edit),this.type=e,this.rowItem=t,this.column=r}static create(e){return n.Validator.validateArg(e,3),new v(e[0],e[1],e[3])}}t.EditCommand=v;class y extends i.Command{constructor(e,t,r){super(o.Commands.Focused),this.current=e,this.last=t,this.eventType=r}}t.FocusedCommand=y;class b extends i.Command{constructor(){super(o.Commands.Escape)}}t.EscapeCommand=b;class w extends i.Command{constructor(e,t,r){super(o.Commands.Select),this.selectType=e,this.start=t,this.end=r}}t.SelectCommand=w;class C extends i.Command{constructor(e,t){super(o.Commands.EditFilter),this.event=e,this.focus=t}static create(e){return n.Validator.validateArg(e,2),new C(e[0],e[1])}}t.EditFilterCommand=C;class _ extends i.Command{constructor(e){super(o.Commands.MoveFocus),this.focus=e}}t.MoveFocusCommand=_;class S extends i.Command{constructor(e,t){super(e),this.column=t}}t.ColumnCommand=S;t.AscCommand=class extends S{constructor(e){super(o.Commands.SortAsc,e)}};t.DescCommand=class extends S{constructor(e){super(o.Commands.SortDesc,e)}};t.ResetCommand=class extends S{constructor(e){super(o.Commands.SortReset,e)}};class x extends i.Command{constructor(e,t,r){super(o.Commands.OperatorChanged),this.conditionName=t,this.operator=e,this.prevOperator=r}}t.OperatorChangedCommand=x;class k extends i.Command{constructor(e,t,r){super(o.Commands.Filter),this.field=e,this.filter=t,this.isSummit=r}}t.FilterCommand=k;t.StickyCommand=class extends S{constructor(e,t){super(o.Commands.Sticky,e),this.rowItem=t,this.column=e}};t.ColumnCheckCommand=class extends S{constructor(e){super(o.Commands.ColumnVisible,e),this.column=e}};t.PopupPosChangeCommand=class extends S{constructor(e,t){super(o.Commands.PopupPosChange,e),this.column=e,this.jqCell=t}};t.ClosePopupCommand=class extends S{constructor(e,t){super(o.Commands.ClosePopup,e),this.column=e,this.rowItem=t}};t.FocusPopupItemCommand=class extends S{constructor(e,t){super(o.Commands.FocusPopupItem,e),this.column=e,this.rowItem=t}};class T extends i.Command{constructor(e,t,r=void 0,n=void 0){super(o.Commands.MoveToPart),this.column=e,this.part=t,this.parentColumn=r,this.columnIndex=n}}t.MoveToPartCommand=T;class R extends i.Command{constructor(e){super(o.Commands.ColumnVisible),this.visible=e}}t.ColumnVisibleCommand=R;class E extends i.Command{constructor(e){super(o.Commands.ToogleRow),this.key=e}}t.ToggleRowCommand=E;class M extends i.Command{constructor(e){super(o.Commands.OpenRow),this.key=e}}t.OpenRowCommand=M;class P extends i.Command{constructor(e){super(o.Commands.CloseRow),this.key=e}}t.CloseRowCommand=P;class O extends i.Command{constructor(e){super(o.Commands.ToogleCheck),this.key=e}}t.ToggleCheckCommand=O},4683:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Aggregate=t.Sorting=t.Filtering=t.BaseLoader=void 0;const i=r(3396),o=r(109),s=r(6328),a=r(5643),l=r(739),u=r(5643),c=r(1374);class h{constructor(e){this._dataSource=e,this._onMakeRequest=e.onPrepareRequest}get dataSource(){return this._dataSource}get nodes(){var e;return null!==(e=this._nodes)&&void 0!==e?e:this._nodes=[]}set nodes(e){this._nodes=e}get nodeCount(){return this._nodeCount}set nodeCount(e){this._nodeCount=e}get config(){var e;return null===(e=this._dataSource)||void 0===e?void 0:e.config}get request(){return this.dataSource.request}get onPrepareRequest(){return this._onMakeRequest}set onPrepareRequest(e){this._onMakeRequest=e}search(){return n(this,void 0,void 0,(function*(){c.Log.debug((()=>["BaseLoader.search"])),c.Log.debug((()=>["BaseLoader.search","end"]))}))}clearRows(){this.nodes=[],this.nodeCount=0}getRows(e,t,r){var o;return n(this,void 0,void 0,(function*(){let n,s=e instanceof u.ParentNode,a=s?e:void 0,l=i.Convert.isNull(e)||!s?this.nodes[t]:s?this.getItem(a,t):void 0;if(i.Convert.isNull(l)){let o=i.Convert.isNull(e)||!s?this.nodeCount:s?a.nodeCount:0;if(r)n=[];else if(t<o||i.Convert.isNull(o)){let r=this.prepareRequest(e,t);this.doMakeRequest(r);let i=yield this.load(r,e);n=this.loaded(i,r,e)}else n=[]}else n=i.Convert.isNull(e)||!s?this.getRootItems(t):s?this.getNodeItems(a,t):[l];return i.Convert.isEmpty(null===(o=this.config.schema)||void 0===o?void 0:o.fields)&&i.Convert.isValue(n)&&this.rebuildFields(n),n}))}rebuildFields(e){var t,r,n;if(null!==(t=(n=this.config).schema)&&void 0!==t||(n.schema={fields:{}}),!i.Convert.isValue(this.config.schema.fields)&&i.Convert.isValue(e)){const t=null!==(r=this.config.schema.fields)&&void 0!==r?r:this.config.schema.fields={},n=[],s=this.config.fieldsSamples;let a=0;for(const r in e){const l=e[r].box.originData;if(!i.Convert.isNull(l)){for(const e of Object.keys(l)){if(e==o.DataSource._keyName)continue;const r=l[e];t[e]={dataType:i.Convert.isValue(r)?typeof r:"any",nullable:i.Convert.isNull(r)}}if(n.push(l),++a>=s)break}}for(const e in t)for(const r in n){const o=n[r];i.Convert.isNull(o[e])&&(t[e].nullable=!0)}const l=this.dataSource.fieldSet;for(const e of Object.keys(t))l.add(e)}}getItem(e,t){return e.nodeCount>t?e.nodes[t]:t>0&&e.hasFooter&&e.nodeCount==t?e.footer:void 0}getNodeItems(e,t){const r=[];for(let n=t,i=e.nodes.length;n<i;n++)r.push(e.nodes[n]);return e.hasFooter&&(r[e.nodeCount]=e.footer),r}getRootItems(e){const t=[],r=this.config.serverPaging?e+Math.min(this.nodeCount-e,this.config.pageSize):this.nodeCount;for(let n=e;n<r;n++){const e=this.nodes[n];if(i.Convert.isNull(e))break;t.push(e)}return t}prepareRequest(e,t){var r,n,o,a;let l={};i.Convert.isValue(this.onPrepareRequest)&&this.onPrepareRequest(this.config,l);const u="function"==typeof(null===(r=this.config.ajax)||void 0===r?void 0:r.select)||null===(o=null===(n=this.config.ajax)||void 0===n?void 0:n.select)||void 0===o?void 0:o.url;if(l.url=null!=u?u:null===(a=this.config.ajax)||void 0===a?void 0:a.baseUrl,l.rowData=null==e?void 0:e.data,this.config.serverPaging){const e=this.config.pageSize,r=Math.trunc(t/e);l.pageSize=e,l.pageNo=r,l.startRow=t}return i.Convert.isValue(this.config.filters)&&(l.filters=s.DataSourceParser.parseFilters(this.config.filters)),i.Convert.isValue(this.config.orders)&&(l.orders=s.DataSourceParser.parseOrders(this.config.orders)),i.Convert.isValue(this.config.groups)&&(l.groups=s.DataSourceParser.parseGroups(this.config.groups)),i.Convert.isNull(e)&&i.Convert.isValue(this.config.aggregates)&&(l.aggregates=s.DataSourceParser.parseAggregates(this.config.aggregates)),c.Log.debug((()=>({f:"prepareRequest",request:l}))),l}doMakeRequest(e){var t,r,n,o,a,u;let h=null!==(o="function"==typeof(null===(t=this.config.ajax)||void 0===t?void 0:t.select)||null===(n=null===(r=this.config.ajax)||void 0===r?void 0:r.select)||void 0===n?void 0:n.request)&&void 0!==o?o:null===(a=this.config.ajax)||void 0===a?void 0:a.request;if(i.Convert.isValue(h)){const t=null!==(u=h(e,s.AjaxOperation.Select))&&void 0!==u?u:e;c.Log.debug((()=>({f:"doMakeRequest.request",request:e,requestResult:t}))),i.Convert.isValue(t)&&e!==t&&l.RequestBuilder.apply(t,e)}else c.Log.debug((()=>({f:"doMakeRequest",request:e})));c.Log.debug((()=>["call-makeRequest",e]))}load(e,t){return n(this,void 0,void 0,(function*(){try{let t=this.reloadFromServer(e)?yield this.serverLoad(e):yield this.clientLoad(e);return this.dataSource.saveRequest(e),t}finally{}}))}adjustServerResponse(e,t){return 0==this.config.serverFiltering&&i.Convert.isValue(e.filters)&&(t=d.filterList(t,e.filters)),0==this.config.serverSorting&&i.Convert.isValue(e.orders)&&(t=f.sortList(t,e.groups,e.orders)),t}reloadFromServer(e){if(i.Convert.isEmpty(e.url))return!1;const t=this.dataSource.getBoxes(e,e.pageNo);return this.config.cachePaging?i.Convert.isEmpty(t):!(this.nodes.length>0||i.Convert.isValue(t))||(1==this.config.serverPaging||(1==this.config.serverSorting||(1==this.config.serverFiltering||1==this.config.serverGrouping)))}clientLoad(e){return n(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}serverLoad(e){return n(this,void 0,void 0,(function*(){throw new Error("serverLoad method not implemented.")}))}loaded(e,t,r){throw new Error("loaded method not implemented.")}get keyMaker(){return this.dataSource.keyMaker}applyData(e,t){}serverPaging(e,t,r){var n,o,s;if(0==this.config.serverPaging)return e.selected;if(0==this.config.cachePaging&&(this.nodes=[]),0==this.config.serverGrouping&&i.Convert.isValue(this.config.groups)){this.nodes=[];for(const t of e.selected)this.nodes.push(t);return this.nodeCount=this.nodes.length,this.nodes}let a=e.selected,l=[],u=null!==(n=t.pageNo)&&void 0!==n?n:0,c=null!==(o=t.pageSize)&&void 0!==o?o:0,h=null!==(s=null==a?void 0:a.length)&&void 0!==s?s:0,d=u*c;const f=i.Convert.isValue(r)?r.level+1:0,p=0==i.Convert.isNull(r);for(let e=0;e<h;e++){let t=a[e];t.index=d+e,t.level=f,p?r.addNode(t,d+e):this.nodes[d+e]=t}for(let e=(t.startRow-d)%c;e<h;e++)l.push(a[e]);if(this.config.pageSize>h?i.Convert.isNull(r)?this.nodeCount=this.nodes.length:r.nodeCount=r.nodes.length:i.Convert.isNull(r)?this.nodeCount=e.total:r.nodeCount=e.total,i.Convert.isValue(e.aggregated)&&e.aggregated.some((e=>i.Convert.isValue(e.value))))for(const t of e.aggregated)if(i.Convert.isValue(t.value)){const e=this.config.aggregates.find((e=>i.Arrays.arrayEquals(e.require,t.field)&&e.func==t.func&&e.payload==t.payload));if(i.Convert.isNull(e))continue;e.value=t.value}return l}stopLoader(){var e,t,r,n,i,o,s,a;return 0==h.compareGroups(null!==(t=null===(e=this.request)||void 0===e?void 0:e.groups)&&void 0!==t?t:[],null!==(n=null===(r=this.config)||void 0===r?void 0:r.groups)&&void 0!==n?n:[])||0==h.compareFilters(null!==(o=null===(i=this.request)||void 0===i?void 0:i.filters)&&void 0!==o?o:[],null!==(a=null===(s=this.config)||void 0===s?void 0:s.filters)&&void 0!==a?a:[])}static compareFilters(e,t){return!(!i.Convert.isNull(e)||!i.Convert.isNull(t))||i.Convert.arrayEqual(e instanceof Array?e:[e],t instanceof Array?t:[t],((e,t)=>{var r,n;let o=i.Arrays.arrayEquals(null==e?void 0:e.field,null==t?void 0:t.field)&&(null==e?void 0:e.operator)==(null==t?void 0:t.operator)&&i.Arrays.arrayEquals(null==e?void 0:e.values,null==t?void 0:t.values);return o&&(o=(null===(r=null==e?void 0:e.filters)||void 0===r?void 0:r.length)==(null===(n=null==t?void 0:t.filters)||void 0===n?void 0:n.length)&&(o=this.compareFilters(null==e?void 0:e.filters,null==t?void 0:t.filters))),o}))}static compareOrders(e,t){return i.Convert.arrayEqual(e,t,((e,t)=>e.field==t.field&&e.dir==t.dir))}static compareGroups(e,t){return i.Convert.arrayEqual(e,t,((e,t)=>e.field==t.field&&e.dir==t.dir))}insertNode(e,t,r,n,i=!1){throw new Error("Method [addNode] not implemented.")}removeNode(e,t,r,n,i=!1){throw new Error("Method [removeNode] not implemented.")}save(e){return n(this,void 0,void 0,(function*(){throw new Error("Method [save] not implemented.")}))}calcAggregates(){}static calculateRows(e,t){if("function"==typeof e.rows)return e.rows(t);t=[...t];const r=t=>t[e.require[0]];switch(e.rows.func){case s.RankFunctions.Rank:{let n,i;f.sort(t,e.rows.dir,r);for(let o=0,s=t.length;o<s;o++){const s=r(t[o]);n===s||(i=o+1),t[o][e.field]=i,n=s}break}}}static moveToList(e,t,r,n,o){var s,a;o=null!=o?o:[];const l=t.index<r.index?-1:1,u=t.index,h=r.index+(l>0?0:-1)+(n?0:1);if(u==h)return;const d=Math.min(u,h),f=Math.max(u,h),p=[];for(let r=d;r<=f;r++){const n=e[r];i.Convert.isNull(n)||n===t||p.push(n)}for(const t of p){const r=t.box,n=r.originIndex;t.index+=l;const i=null===(s=e[t.index])||void 0===s?void 0:s.box.originIndex;o.push({key:r.key,oldIndex:n,newIndex:i}),e[t.index]=t}return o.push({key:t.key,oldIndex:t.box.originIndex,newIndex:null===(a=e[h])||void 0===a?void 0:a.box.originIndex}),t.index=h,e[h]=t,c.Log.debug((()=>["BaseLoader.moveToList",o])),o}}t.BaseLoader=h,h.symbolKeyMaker=()=>{var e;return i.Convert.isNull(null===(e=window.crypto)||void 0===e?void 0:e.randomUUID)?Symbol():crypto.randomUUID()};class d{static filterList(e,t,r=s.FilterOperators.And){var n;if(0==(null!==(n=null==t?void 0:t.length)&&void 0!==n?n:0))return e;let i=[];for(let n of e){0!=this.filterItem(n,t,r)&&i.push(n)}return i}static filterItem(e,t,r){let n;n=r==s.FilterOperators.And;for(let o of t){if(o.operator==s.FilterOperators.And||o.operator==s.FilterOperators.Or)i.Convert.isValue(o.filters)&&(n=this.filterItem(e,o.filters,o.operator));else if("function"==typeof o.operator)n=o.operator(e.data);else{const t=o.field instanceof Array?o.field:"*"==o.field?Object.keys(e.data):[o.field];for(const r of t){let t=e.data[r];if(n=d.checkFilter(t,o),n)break}}if(r==s.FilterOperators.And){if(0==n)break}else if(1==n)break}return n}static checkFilter(e,t){switch(i.Convert.isValue(t.dataType)&&(e=i.Convert.convertType(e,t.dataType)),"string"==typeof e&&t.ignoreCase&&(e=e.toUpperCase()),t.operator){case s.FilterOperators.IsEmpty:return i.Convert.isEmpty(e);case s.FilterOperators.IsNotEmpty:return 0==i.Convert.isEmpty(e);case s.FilterOperators.IsNull:return i.Convert.isNull(e);case s.FilterOperators.IsNotNull:return 0==i.Convert.isNull(e);case s.FilterOperators.IsNullOrEmpty:return i.Convert.isEmpty(e);case s.FilterOperators.IsNotNullOrEmpty:return 0==i.Convert.isEmpty(e)}let r=this.getValue(t.values,0);switch(i.Convert.isValue(t.dataType)&&(r=i.Convert.convertType(r,t.dataType)),"string"==typeof r&&t.ignoreCase&&(r=r.toUpperCase()),t.operator){case s.FilterOperators.Contains:return d.stringFunc(e,r,(()=>e.includes(r)));case s.FilterOperators.NotContains:return!d.stringFunc(e,r,(()=>e.includes(r)));case s.FilterOperators.StartsWith:return d.stringFunc(e,r,(()=>e.startsWith(r)));case s.FilterOperators.NotStartsWith:return!d.stringFunc(e,r,(()=>e.startsWith(r)));case s.FilterOperators.EndsWith:return d.stringFunc(e,r,(()=>e.endsWith(r)));case s.FilterOperators.NotEndsWith:return!d.stringFunc(e,r,(()=>e.endsWith(r)));case s.FilterOperators.IsEqualTo:case s.FilterOperators.EqualTo:return e==r;case s.FilterOperators.NotEqualTo:case s.FilterOperators.IsNotEqualTo:return e!=r;case s.FilterOperators.GreaterThan:case s.FilterOperators.IsGreaterThan:return e>r;case s.FilterOperators.GreaterThanOrEqualTo:case s.FilterOperators.IsGreaterThanOrEqualTo:return e>=r;case s.FilterOperators.LessThan:case s.FilterOperators.IsLessThan:return e<r;case s.FilterOperators.LessThanOrEqualTo:case s.FilterOperators.IsLessThanOrEqualTo:return e<=r}let n=this.getValue(t.values,1);switch(i.Convert.isValue(t.dataType)&&(n=i.Convert.convertType(n,t.dataType)),"string"==typeof n&&t.ignoreCase&&(n=n.toUpperCase()),t.operator){case s.FilterOperators.FromTo:return(!!i.Convert.isEmpty(r)||r<=e)&&(!!i.Convert.isEmpty(n)||e<=n);case s.FilterOperators.NotFromTo:return!((i.Convert.isEmpty(r)||r<=e)&&(i.Convert.isEmpty(n)||e<=n))}let o=t.values instanceof Array?t.values:[r];switch(i.Convert.isValue(t.dataType)&&(o=o.map((e=>(i.Convert.convertType(e,t.dataType),"string"==typeof e&&t.ignoreCase&&(e=e.toUpperCase()),e)))),t.operator){case s.FilterOperators.In:return o.some((t=>t.toString()==e.toString()));case s.FilterOperators.NotIn:return o.every((t=>t.toString()!=e.toString()));default:throw new Error(`[${t.operator}] is unknown operator!`)}return!1}static getValue(e,t){return"string"==typeof e?e:e instanceof Array&&e.length>t?e[t]:""}static stringFunc(e,t,r){return!!i.Convert.isNull(t)||!i.Convert.isNull(e)&&r()}}t.Filtering=d;class f{static getValue(e,t){const r=(e=e instanceof a.Box?e.data:e)[t.field];if(typeof r==t.dataType)return r;switch(t.dataType){case i.DataType.Boolean:return i.Convert.asBool(r);case i.DataType.Number:return i.Convert.asNumber(r);case i.DataType.String:return i.Convert.asText(r);case i.DataType.Date:return i.Convert.asDate(r)}return r}static sortList(e,t,r,n){var o,a;let l=[],u=[];if((null!==(o=null==t?void 0:t.length)&&void 0!==o?o:0)>0&&(u=u.concat(t)),(null!==(a=null==r?void 0:r.length)&&void 0!==a?a:0)>0)for(const e of r)u.some((t=>t.field==e.field))||u.push(e);return i.Convert.isNull(n)&&(n=this.getValue),0==u.length?e:(l=e.sort(((e,t)=>{for(let r of u){if(i.Convert.isValue(r.sort)){const n=r.sort(e,t,r.dir);if(0===n)continue;return n}let o=n(e,r),a=n(t,r);if(i.Convert.isNull(o)&&(o=""),i.Convert.isNull(a)&&(a=""),o!==a)return o<a?r.dir==s.SortDir.Asc?-1:1:r.dir==s.SortDir.Asc?1:-1}return 0})),l)}static calcOrder(e,t,r,n,i){let o=[].concat(e);return o.indexOf(t)<0&&o.push(t),this.sortList(e,r,n,i),o.indexOf(t)}static sort(e,t,r){e.sort(((e,n)=>{let o=r(e),a=r(n);return i.Convert.isNull(o)&&(o=""),i.Convert.isNull(a)&&(a=""),o==a?0:o<a?t==s.SortDir.Asc?-1:1:t==s.SortDir.Asc?1:-1}))}}t.Sorting=f;class p{static aggregates(e,t,r){let n=[];if(r)for(const e of null!=t?t:[]){const t={require:e.require,func:e.func,nullAs:e.nullAs,payload:e.payload,field:p.getResultName(e),dataType:e.dataType,payloadType:e.payloadType,eval:e.eval};n.push(t)}else n=t;for(const t of null!=n?n:[])i.Convert.isValue(t.func)&&(t.value=this.aggregate(e,t)),i.Convert.isValue(t.eval)&&(t.value=this.aggregateEval(t,n));return n}static aggregate(e,t){var r;if(0==(null!==(r=null==e?void 0:e.length)&&void 0!==r?r:0))return;let n=0;return"function"==typeof t.func?(n=t.func(e),n):p.calcRows(t,e)}static calcFields(e,t){const r=e.eval;if("function"==typeof r)return r(t);const n={require:e.require,func:r,nullAs:e.nullAs,dataType:e.dataType,params:e.params};return p.calcRows(n,[t])}static aggregateEval(e,t){const r=e.eval,n={};for(const e of t)n[e.field]=e.value;if("function"==typeof r)return r(n);const i={require:e.require,func:r,nullAs:e.nullAs,dataType:e.dataType};return p.calcRows(i,[n])}static calcRows(e,t){let r=0;const n=e.payload;switch(e.func){case s.AggregateFunctions.Sum:r=p.makeItems(t,e,(e=>e.reduce(((e,t)=>e+t),0)));break;case s.AggregateFunctions.Average:case s.AggregateFunctions.Avg:r=p.makeItems(t,e,(e=>e.reduce(((e,t)=>i.Convert.asFloat(e)+i.Convert.asFloat(t)))/e.length));break;case s.AggregateFunctions.Total:r=t.length;break;case s.AggregateFunctions.Count:r=i.Convert.isValue(e.params)?p.makeItems(t,e,(t=>t.filter((t=>e.params.some((e=>t==e)))).length)):p.makeItems(t,e,(e=>e.length));break;case s.AggregateFunctions.Min:r=p.makeItems(t,e,(t=>i.Convert.isEmpty(n)?t.reduce(((e,t)=>e<t?e:t),t[0]):i.Convert.convertType(t.reduce(((e,t)=>e[this._field]<t[this._field]?e:t),t[0])[n],e.payloadType)));break;case s.AggregateFunctions.Max:r=p.makeItems(t,e,(t=>i.Convert.isEmpty(n)?t.reduce(((e,t)=>e>t?e:t),t[0]):i.Convert.convertType(t.reduce(((e,t)=>e[this._field]<t[this._field]?t:e),t[0])[n],e.payloadType)));break;case s.AggregateFunctions.First:r=p.makeItems(t,e,(t=>{var r;return i.Convert.isEmpty(n)?t[0]:i.Convert.convertType(null===(r=t[0])||void 0===r?void 0:r[n],e.payloadType)}));break;case s.AggregateFunctions.Last:r=p.makeItems(t,e,(t=>{var r;return i.Convert.isEmpty(n)?t[t.length-1]:i.Convert.convertType(null===(r=t[t.length-1])||void 0===r?void 0:r[n],e.payloadType)}));break;case s.AggregateFunctions.Range:r=p.makeItems(t,e,(t=>this.calcRange(e,t[0])));break;case s.AggregateFunctions.Switch:r=p.makeItems(t,e,(t=>this.calcSwitch(e,t[0])))}return r}static calcSwitch(e,t){return e.params instanceof Map&&e.params.get(t),t}static calcRange(e,t){var r;if(e.params instanceof Map==0)return t;const n=e.params,o=p.ensureRange(n);for(const e of o.range)if(e<=t)return null!==(r=n.get(e))&&void 0!==r?r:n.get(i.Convert.asText(e));return o.default}static ensureRange(e){var t,r;if(this.rangeMap.has(e))return this.rangeMap.get(e);const n=null!==(r=null!==(t=e.get("default"))&&void 0!==t?t:e.get(""))&&void 0!==r?r:e.get(void 0),o=e.keys(),s=[];for(const e of o){const t=i.Convert.asNumber(e);s.indexOf(t)>=0||s.push(t)}s.sort(((e,t)=>t-e));const a={range:s,default:n};return this.rangeMap.set(e,a),a}static makeItems(e,t,r){let n=[];const o=i.Convert.asStringArray(t.require,[]);if(i.Convert.isEmpty(o))return n;t.nullAs;const s=t.payload,a=i.Convert.isEmpty(s)?(e,t)=>n.push(e):(e,t)=>{const r={};r[this._field]=e,r[s]=t[s],n.push(r)};for(let r of e)if(!i.Convert.isNull(r))for(const e of o)this.pushItemFieldValue(t,r,e,a);return i.Convert.isEmpty(n)?void 0:r(n)}static pushItemFieldValue(e,t,r,n){if(i.Convert.isNull(n))return;const o=e.nullAs,a=e.dataType,l="*"==r?Object.keys(t):[r];for(let e of l){let r=i.Convert.convertType(t[e],a);if(i.Convert.isNull(r)||"number"==typeof r&&i.Convert.isEmpty(r)){if(o===s.NullAs.Ignore)continue;r=o}n(r,t)}return!0}static fieldsJoin(e,t){return i.Convert.asStringArray(e,void 0).join(null!=t?t:"_")}static getResultName(e,t,r){var n;return i.Convert.isEmpty(e.require)&&i.Convert.isEmpty(t)&&i.Convert.isEmpty(e.field)?"":i.Convert.isEmpty(e.field)||r?this.fieldsJoin(null!==(n=e.require)&&void 0!==n?n:t,"_")+("string"==typeof e.func?"_"+e.func:"")+(i.Convert.isValue(e.field)?"_"+e.field:"")+(i.Convert.isValue(e.payload)?"_"+e.payload:""):e.field}static aggregateEquals(e,t){return(e.require==t.require||i.Arrays.arrayEquals(e.require,t.require))&&e.field==t.field&&e.func==t.func&&e.payload==t.payload}}t.Aggregate=p,p._field="_field",p.rangeMap=new Map},109:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.InsertTo=t.DataStatus=t.DataSource=void 0;const i=r(3396),o=r(235),s=r(9402),a=r(6328),l=r(4683),u=r(9909),c=r(1374),h=r(4936),d=r(5643),f=r(739),p=r(9863);class m extends o.Publisher{constructor(e){super(),this._originIndex=0,this.keyMaker=e=>{var t,r,n,o,s;const a=null===(t=this.config.schema)||void 0===t?void 0:t.id;let u;switch(typeof a){case"function":u=a(e);break;case"string":u=null!==(r=null==e?void 0:e.hasOwnProperty(a))&&void 0!==r&&r&&null!==(n=e[a])&&void 0!==n?n:"";break;default:if(a instanceof Array){const t=[];for(const r of a)null!==(o=null==e?void 0:e.hasOwnProperty(r))&&void 0!==o&&o&&t.push(null!==(s=e[r])&&void 0!==s?s:"");u=1==t.length?t[0]:t.join(m.keySeperator);break}}return i.Convert.isEmpty(u)&&(u=l.BaseLoader.symbolKeyMaker()),u},this.loaded=e=>{this.loader.loaded(void 0,void 0,e);let t=s.LoadedCommand.create(e);this.fireCommandAsync(this,t)},this._updateIndex=0,this.setConfig(e),this._updateIndex=0}setConfig(e){this._config=a.DataSourceParser.parseConfig(e)}get resourceManager(){var e;return null!==(e=this._resourceManager)&&void 0!==e?e:this._resourceManager=new p.ResourceManager}get resource(){return this.resourceManager.resource}get config(){return this._config}static get defaultConfig(){return m._defaultConfig}static set defaultConfig(e){m._defaultConfig=a.DataSourceParser.parseConfig(e)}get filters(){return this.config.filters instanceof Array?this.config.filters:[this.config.filters]}get fieldSet(){var e;return null!==(e=this._fieldSet)&&void 0!==e?e:this._fieldSet=this.ensureFieldSet()}get pageNo(){var e,t;return null!==(t=null===(e=this.request)||void 0===e?void 0:e.pageNo)&&void 0!==t?t:0}get requestKey(){var e;return null!==(e=this._requestKey)&&void 0!==e?e:this._requestKey=this.getRequestKey()}get boxMap(){var e;return null!==(e=this._boxMap)&&void 0!==e?e:this._boxMap=new Map}get loadedTotal(){var e,t;const r=this.getRequestKey(),n=this.boxMap.get(r);if(i.Convert.isNull(n))return 0;let o=0;for(const r of n.keys())o+=null!==(t=null===(e=n.get(r))||void 0===e?void 0:e.length)&&void 0!==t?t:0;return o}setBoxes(e,t){var r,n;const o=this.getRequestKey(e),s=null!==(r=this.boxMap.get(o))&&void 0!==r?r:new Map,a=[];for(const e in t){const r=t[e];a.push(d.DataBox.create(r,this.keyMaker,i.Convert.asInt(e),this))}s.set(null!==(n=null==e?void 0:e.pageNo)&&void 0!==n?n:0,a),this.boxMap.set(o,s)}getBoxes(e,t){var r,n;null!=e||(e=this.request);const o=this.getRequestKey(e);if(null!=t||(t=e.pageNo),0==this.boxMap.size){const e=this.ensureBoxes();return this.boxMap.set(o,e),e.get(0)}if(i.Convert.isValue(t))return null===(r=this.boxMap.get(o))||void 0===r?void 0:r.get(t);let s=[];const a=null===(n=this.boxMap.get(o))||void 0===n?void 0:n.values();return i.Convert.isNull(a)?[]:(a&&Array.from(a).forEach((e=>s=s.concat(e))),s)}hasPage(e){var t,r;const n=this.getRequestKey();return null!==(r=null===(t=this.boxMap.get(n))||void 0===t?void 0:t.has(e))&&void 0!==r&&r}sortOriginIndex(){var e;const t=this.boxMap.get(this.requestKey);for(const r of null!==(e=null==t?void 0:t.keys())&&void 0!==e?e:[]){t.get(r).sort(((e,t)=>e.originIndex-t.originIndex))}}originIndexChanged(e,t,r){}get keyMap(){var e;return null!==(e=this._keyMap)&&void 0!==e?e:this._keyMap=new Map}get insertMap(){var e;return null!==(e=this._insertMap)&&void 0!==e?e:this._insertMap=new Map}get deleteMap(){var e;return null!==(e=this._deleteMap)&&void 0!==e?e:this._deleteMap=new Map}get updateMap(){var e;return null!==(e=this._updateMap)&&void 0!==e?e:this._updateMap=new Map}get inserted(){return this.getSaveData(!0,!1,!1).inserted}get deleted(){return this.getSaveData(!1,!1,!0).deleted}get updated(){return this.getSaveData(!1,!0,!1).updated}get changed(){return this.updateMap.size>0||this.insertMap.size>0||this.deleteMap.size>0}get request(){var e;return null!==(e=this._request)&&void 0!==e?e:{}}map(e,t){if(i.Convert.isNull(t))return this.keyMap.get(e);this.keyMap.set(e,t)}getStatus(e){const t=e.key;return this.insertMap.has(t)?this.deleteMap.has(t)?g.None:g.Insert:this.deleteMap.has(t)?g.Delete:this.updateMap.has(t)?g.Update:g.Normal}setStatus(e,t){switch(t){case g.Normal:this.updateBox(e,!0);break;case g.Delete:this.deleteBox(e,!1);break;case g.Insert:this.insertBox(e,!1);break;case g.Update:this.updateBox(e,!1)}}get pageSize(){var e;return null!==(e=this.config.pageSize)&&void 0!==e?e:m.defaultConfig.pageSize}get cachePaging(){var e;return null!==(e=this.config.cachePaging)&&void 0!==e&&e}get pageOnly(){var e;return null!==(e=this._pageOnly)&&void 0!==e?e:this._pageOnly=!1}set pageOnly(e){this._pageOnly=e}get total(){return this._total}set total(e){this._total=e}get loader(){var e;return null!==(e=this._loader)&&void 0!==e?e:this._loader=this.ensureLoader()}set loader(e){this._loader=e}get rows(){return this.loader.nodes}get hasCalcRows(){var e;return null!==(e=this._hasCalcRows)&&void 0!==e?e:this._hasCalcRows=this.config.calculations.some((e=>i.Convert.isValue(e.rows)))}get hasCalcFields(){var e;return null!==(e=this._hasCalcFields)&&void 0!==e?e:this._hasCalcFields=this.config.calculations.some((e=>i.Convert.isValue(e.eval)))}get onPrepareRequest(){return this._onPrepareRequest}set onPrepareRequest(e){this._onPrepareRequest=e}get originIndex(){var e;return null!==(e=this._originIndex)&&void 0!==e?e:this._originIndex=0}addOriginIndex(){return this._originIndex++,this._originIndex}adjustOriginIndex(e){return this._originIndex=Math.max(this._originIndex,e)}removeOriginIndex(e){return this._originIndex==e&&this._originIndex--,this._originIndex}adjustFieldSet(e){var t;return n(this,void 0,void 0,(function*(){if(i.Convert.isNull(e))return;if(i.Convert.isValue(null===(t=this.config.schema)||void 0===t?void 0:t.fields))return;e instanceof d.Box&&(e=e.data);const r=this.fieldSet;for(const t of Object.keys(e))t==m._keyName||r.has(t)||r.add(t)}))}changeBox(e,t,r=!1){r?e.delete(t.key):e.set(t.key,t)}insertBox(e,t=!1){this.changeBox(this.insertMap,e instanceof d.Box?e:e.box,t)}deleteBox(e,t=!1){this.changeBox(this.deleteMap,e instanceof d.Box?e:e.box,t)}updateBox(e,t=!1){this.changeBox(this.updateMap,e instanceof d.Box?e:e.box,t)}newBox(e){var t,r,o,s;return n(this,void 0,void 0,(function*(){if(e instanceof d.DataBox)return e.originIndex=null!==(t=e.originIndex)&&void 0!==t?t:this.addOriginIndex(),e;let n=this.keyMaker;const a=n(e=i.Convert.cloneData(e));if(this.keyMap.has(a))if(i.Convert.isValue(null===(r=this.config.schema)||void 0===r?void 0:r.add))(e=this.config.schema.add(e))instanceof Promise&&(e=yield e);else if(i.Convert.isValue(null===(o=this.config.schema)||void 0===o?void 0:o.id)){n=l.BaseLoader.symbolKeyMaker;const t=null===(s=this.config.schema)||void 0===s?void 0:s.id;if("function"==typeof t);else if(t instanceof Array)for(const r of t)e[r]=void 0}return d.DataBox.create(e,n,this.addOriginIndex(),this)}))}createBox(e,t){const r=e instanceof d.DataBox?e:d.DataBox.create(e,this.keyMaker,t,this);return t<this.config.fieldsSamples&&this.adjustFieldSet(e),r}moveToList(e,t,r,n,o){var s;o=null!=o?o:[];const a=t.originIndex<r.originIndex?-1:1,l=e.findIndex((e=>e==t)),u=e.findIndex((e=>e==r))+(a>0?0:-1)+(n?0:1);if(l==u)return;const h=Math.min(l,u),d=Math.max(l,u),f=[];for(let r=h;r<=d;r++){const n=e[r];i.Convert.isNull(n)||n===t||f.push({index:r,box:n})}let p;for(const t of f){const r=t.box.originIndex;p=null!=p?p:r,t.index+=a;const n=null===(s=e[t.index])||void 0===s?void 0:s.originIndex;t.box.originIndex=n,o.push({key:t.box.key,oldIndex:r,newIndex:n}),e[t.index]=t.box}return o.push({key:t.key,oldIndex:t.originIndex,newIndex:p}),t.originIndex=p,e[u]=t,e.sort(((e,t)=>e.originIndex-t.originIndex)),c.Log.debug((()=>["DataSource.moveToList",o])),o}addBox(e,t,r,n){var o;const s=this.deleteMap.has(t.key);return s?this.deleteBox(t,!0):this.insertBox(t),0==s&&(!i.Convert.isValue(r)||n!=v.Before&&n!=v.After?n==v.First&&((e=[].concat(e)).splice(0,0,t),e.sort(((e,t)=>e.originIndex-t.originIndex)),this.moveToList(e,t,e[0],!0,void 0)):((e=[].concat(e)).push(t),e.sort(((e,t)=>e.originIndex-t.originIndex)),this.moveToList(e,t,r,n==v.Before,void 0)),(e=this.getBoxes(this.request,null!==(o=this.request.pageNo)&&void 0!==o?o:0)).push(t)),0==s}removeBox(e,t,r){var n;const i=t.key,o=this.insertMap.has(t.key);if(o?this.insertBox(t,!0):this.deleteBox(t),o){(e=[].concat(e)).sort(((e,t)=>e.originIndex-t.originIndex));let r=e.findIndex((e=>e.key==i));r>=0&&(e.splice(r,1),this.adjustBoxIndex(e,r,t.originIndex)),this.removeOriginIndex(t.originIndex),t.originIndex=void 0,r=(e=this.getBoxes(this.request,null!==(n=this.request.pageNo)&&void 0!==n?n:0)).findIndex((e=>e.key==i)),r>=0&&e.splice(r,1)}return o}adjustBoxIndex(e,t,r){for(let n=e.length;t<n;t++){const n=e[t];[n.originIndex,r]=[r,n.originIndex]}}insertNode(e,t,r,i,o=!1){var s;return n(this,void 0,void 0,(function*(){if(o)return this.removeNode(e,t,r,i);e=null!=e?e:null==t?void 0:t.parent;const n=yield this.newBox(r),a=e instanceof d.ParentNode?e.nodes.map((e=>e.box)):this.getBoxes(this.request,null!==(s=this.request.pageNo)&&void 0!==s?s:0);return this.addBox(a,n,null==t?void 0:t.box,i)&&this.loader.insertNode(e,t,n,i)}))}removeNode(e,t,r,i,o=!1){var s;return n(this,void 0,void 0,(function*(){if(o)return this.insertNode(e,t,r,i);const n=e instanceof d.ParentNode?e.nodes.map((e=>e.box)):this.getBoxes(this.request,null!==(s=this.request.pageNo)&&void 0!==s?s:0);return this.removeBox(n,t.box,i)?this.loader.removeNode(e,t,r,i):t}))}moveToNode(e,t,r){this.loader.moveToNode(e,t,r)}getSaveData(e=!0,t=!0,r=!0){const n=[],i=[],o=[];if(e)for(const e of this.insertMap.keys())this.deleteMap.has(e)||n.push(this.insertMap.get(e).data);if(r)for(const e of this.deleteMap.keys())this.insertMap.has(e)||i.push(this.deleteMap.get(e).data);if(t)for(const e of this.updateMap.keys())this.insertMap.has(e)||this.deleteMap.has(e)||o.push(this.updateMap.get(e).data);const s={inserted:n,deleted:i,updated:o};return c.Log.debug((()=>["DataSource.getSaveData",s])),s}getModifiedKeys(e=!0,t=!0,r=!0){const n=new Set;if(e)for(const e of this.insertMap.keys())this.deleteMap.has(e)||n.add(e);if(r)for(const e of this.deleteMap.keys())this.insertMap.has(e)||n.add(e);if(t)for(const e of this.updateMap.keys())this.insertMap.has(e)||this.deleteMap.has(e)||n.add(e);return n}clearSaveData(e=void 0){this.insertMap.clear(),this.deleteMap.clear(),this.updateMap.clear()}ensureFieldSet(){var e;const t=new Set;if(i.Convert.isEmpty(null===(e=this.config.schema)||void 0===e?void 0:e.fields))return t;for(const e of Object.keys(this.config.schema.fields))e!=m._keyName&&t.add(e);return t}ensureBoxes(){let e=this.config.data;return this.setData(e)}setData(e){const t=new Map,r=[];if(e instanceof Array){for(let t=0,n=e.length;t<n;t++){const n=this.createBox(e[t],t);r.push(n)}this.total=e.length}return t.set(0,r),t}importData(e){const t=this.setData(e);this.boxMap.set("",t)}load(e=0){return n(this,void 0,void 0,(function*(){const t=this.config.pageSize*e;let r=this.loader.prepareRequest(void 0,t);this.loader.doMakeRequest(r),0==this.config.cachePaging&&this.config.serverPaging&&this.boxMap.clear();let n=yield this.loader.load(r,void 0);this.pageOnly&&this.loader.clearRows();return this.loader.loaded(n,r,void 0)}))}search(){return n(this,void 0,void 0,(function*(){c.Log.debug((()=>["DataSource.search"])),this.changeLoader()&&(c.Log.debug((()=>["DataSource.search","changeLoader"])),this.ensureLoader()),yield this.loader.search(),c.Log.debug((()=>["DataSource.search","end"]))}))}clearRows(){this.loader.clearRows(),this.keyMap.clear(),this.boxMap.clear(),this.deleteMap.clear(),this.insertMap.clear(),this.updateMap.clear(),this._originIndex=0,this._request=void 0,this._requestKey=void 0}reload(){c.Log.debug((()=>"dataSource.reload")),this.clearRows(),this._loader=u.LoaderFactory.ensureLoader(this,this.config)}get updateIndex(){return this._updateIndex}beginUpdate(){this._updateIndex++}endUpdate(){this._updateIndex--,this._updateIndex<0&&(this._updateIndex=0),this.loader.calcAggregates()}adjustServerRequest(e){return{aggregates:this.config.serverAggregates?i.Convert.default(e.aggregates,void 0,a.DataSourceParser.parseAggregates):void 0,filters:this.config.serverFiltering?i.Convert.default(e.filters,void 0,(e=>a.DataSourceParser.parseFilters(e))):void 0,groups:this.config.serverGrouping?i.Convert.default(e.groups,void 0,a.DataSourceParser.parseGroups):void 0,orders:this.config.serverSorting?i.Convert.default(e.orders,void 0,a.DataSourceParser.parseOrders):void 0,parentKey:e.parentKey,parentField:e.parentField,pageNo:e.pageNo,pageSize:e.pageSize,startRow:e.startRow,endRow:e.endRow,rowData:e.rowData}}loadFunc(e,t){return n(this,void 0,void 0,(function*(){if("function"==typeof t){let r=t(e);if(void 0===r)return{};if(r instanceof Promise&&(r=yield r),i.Convert.isNull(r))return{};return r instanceof Array?{selected:r}:r}return{selected:[].concat(this.config.data)}}))}selectRequest(e,t=void 0){var r,o,s,l,u,c,h;return n(this,void 0,void 0,(function*(){let n={};i.Convert.isNull(t)&&(t=null===(r=this.config.ajax)||void 0===r?void 0:r.select),this.saveRequest(e);const d=this.getBoxes(e,e.pageNo);if(i.Convert.isValue(d))return n.selected=d,n.total=null!==(o=this.total)&&void 0!==o?o:this.total=d.length,n;if("function"==typeof t)0==d.length||0==this.compareRequest(e)?(n=yield this.loadFunc(e,t),n=this.doResponse(n),this.setBoxes(e,n.selected),n.selected=this.getBoxes(e,e.pageNo)):n.selected=[].concat(d),n.total=null!==(s=n.total)&&void 0!==s?s:n.selected.length;else if(i.Convert.isEmpty(e.url))n.selected=[].concat(d),n.total=d.length;else{let r;switch(null!==(l=null==t?void 0:t.loadType)&&void 0!==l?l:a.MethodType.Post){case a.MethodType.Get:r=yield i.Utils.getData(e.url);case a.MethodType.Post:r=yield i.Utils.postData(e.url,this.adjustServerRequest(e))}if(r=this.doResponse(r),i.Convert.isNull(r))return n;const o=null===(u=this.config.ajax)||void 0===u?void 0:u.selected,s=null===(c=this.config.ajax)||void 0===c?void 0:c.total,d=null===(h=this.config.ajax)||void 0===h?void 0:h.aggregated;n.selected=r instanceof Array?r:r[o],n.total=r instanceof Array?r.length:r[s],n.aggregated=r[d],this.setBoxes(e,n.selected),n.selected=this.getBoxes(e,e.pageNo)}return n}))}doResponse(e){var t,r,n,o,s,l;let u=null!==(o="function"==typeof(null===(t=this.config.ajax)||void 0===t?void 0:t.select)||null===(n=null===(r=this.config.ajax)||void 0===r?void 0:r.select)||void 0===n?void 0:n.response)&&void 0!==o?o:null===(s=this.config.ajax)||void 0===s?void 0:s.response;if(i.Convert.isValue(u)){const t=null!==(l=u(e,a.AjaxOperation.Select))&&void 0!==l?l:e;c.Log.debug((()=>({f:"load.response",response:e,responseResult:t}))),i.Convert.isValue(t)&&e!==t&&f.RequestBuilder.apply(t,e)}return e}updateRequest(e,t=void 0){var r;return n(this,void 0,void 0,(function*(){return i.Convert.isNull(t)&&(t=null===(r=this.config.ajax)||void 0===r?void 0:r.update),"function"==typeof t&&(yield t(e)),{}}))}saveRequest(e){this._request={url:e.url,aggregates:i.Convert.default(e.aggregates,void 0,a.DataSourceParser.parseAggregates),filters:i.Convert.default(e.filters,void 0,(e=>a.DataSourceParser.parseFilters(e))),groups:i.Convert.default(e.groups,void 0,a.DataSourceParser.parseGroups),orders:i.Convert.default(e.orders,void 0,a.DataSourceParser.parseOrders),parentKey:e.parentKey,parentField:e.parentField,pageNo:e.pageNo,pageSize:e.pageSize,startRow:e.startRow,endRow:e.endRow,rowData:e.rowData},this._requestKey=this.getRequestKey(this._request)}getRequestKey(e=void 0){var t;return i.Convert.isNull(e)&&(e=this._request),this.config.lazyLoading&&i.Convert.isValue(null==e?void 0:e.parentKey)?`parent=${null!==(t=e.parentKey)&&void 0!==t?t:""}`:this.config.serverGrouping&&i.Convert.isValue(null==e?void 0:e.groups)?e.groups.map((e=>`${e.field}=${e.value}`)).join(","):""}compareRequest(e){var t,r,n,o,s,a,l,u,c;let h=!0;return h&&(h=(null===(t=this.request)||void 0===t?void 0:t.pageNo)==e.pageNo),h&&(h=(null===(r=this.request)||void 0===r?void 0:r.pageSize)==e.pageSize),h&&(h=(null===(n=this.request)||void 0===n?void 0:n.parentField)==e.parentField),h&&(h=(null===(o=this.request)||void 0===o?void 0:o.parentKey)==e.parentKey),h&&(h=(null===(s=this.request)||void 0===s?void 0:s.parentField)==e.parentField),h&&(h=0==this.config.serverFiltering||i.Convert.arrayEqual(null===(a=this.request)||void 0===a?void 0:a.filters,e.filters,((e,t)=>e.operator==t.operator&&d(e.field,t.field)))),h&&(h=0==this.config.serverGrouping||i.Convert.arrayEqual(null===(l=this.request)||void 0===l?void 0:l.groups,e.groups,((e,t)=>e.dir==t.dir&&d(e.field,t.field)))),h&&(h=0==this.config.serverAggregates||i.Convert.arrayEqual(null===(u=this.request)||void 0===u?void 0:u.aggregates,e.aggregates,((e,t)=>e.func==t.func&&d(e.require,t.require)))),h&&(h=0==this.config.serverSorting||i.Convert.arrayEqual(null===(c=this.request)||void 0===c?void 0:c.orders,e.orders,((e,t)=>e.dir==t.dir&&d(e.field,t.field)))),h;function d(e,t){return i.Convert.asStringArray(e)==i.Convert.asStringArray(t)}}save(e=void 0){return n(this,void 0,void 0,(function*(){e=null!=e?e:this.getSaveData(),c.Log.info((()=>["dataSource.save",e]));const t={inserted:e.inserted,updated:e.updated,deleted:e.deleted},r=yield this.updateRequest(t,this.config.ajax.update);this.clearSaveData(r)}))}doCommand(e,t){return!!super.doCommand(e,t)&&(t.command,!0)}doPreapareRequest(e,t){i.Convert.isValue(this._onPrepareRequest)&&this._onPrepareRequest(e,t)}ensureLoader(){const e=u.LoaderFactory.ensureLoader(this,this.config);return e.onPrepareRequest=(e,t)=>this.doPreapareRequest(e,t),c.Log.debug((()=>["ensureLoader",e.onPrepareRequest])),this.loader=e,e}changeLoader(){return u.LoaderFactory.changeLoader(this.loader,this.config)}getGroupByField(e,t=!0){var r,o,s;return n(this,void 0,void 0,(function*(){const n=[{field:e,dir:a.SortDir.Asc}],u=this.config.filters.filter((r=>1==r.fixed||t&&i.Convert.isValue(r.field)&&r.field!=e)),c=this.getBoxes(this.request);if(i.Convert.isNull(c)){if(this.config.serverGrouping){const t={url:null!==(o="function"==typeof(null===(r=this.config.ajax)||void 0===r?void 0:r.select)?void 0:this.config.ajax.select.url)&&void 0!==o?o:null===(s=this.config.ajax)||void 0===s?void 0:s.baseUrl,groups:n,filters:u};return(yield this.selectRequest(t)).selected.map((t=>t[e]))}{const t=l.Filtering.filterList(this.loader.getAllItems(),u);return h.GroupLoader.clientMakeGroup(t,this.loader.keyMaker,n,[],[],this).selected.map((t=>t[e]))}}{const t=l.Filtering.filterList(c,u);return h.GroupLoader.clientMakeGroup(t,this.loader.keyMaker,n,[],[],this).selected.map((t=>t.data[e]))}}))}}var g,v;t.DataSource=m,m._keyName="_key_",m._defaultConfig={pageSize:20,batch:!1},m.keySeperator="[!_!]",function(e){e.None="none",e.Normal="normal",e.Update="update",e.Insert="insert",e.Delete="delete"}(g||(t.DataStatus=g={})),function(e){e[e.Before=0]="Before",e[e.After=1]="After",e[e.Last=2]="Last",e[e.First=3]="First",e[e.Child=4]="Child"}(v||(t.InsertTo=v={}))},6328:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NullAs=t.FilterOperators=t.AggregateFunctions=t.RankFunctions=t.CalculationRange=t.SortDir=t.AjaxOperation=t.LoadDataType=t.MethodType=t.DataSourceParser=void 0;const n=r(1374),i=r(3396),o=r(109);class s{static parseConfig(e){let t={batch:i.Convert.default(e.batch,!0),pageSize:i.Convert.default(e.pageSize,o.DataSource.defaultConfig.pageSize),schema:s.parseSchema(e.schema),serverPaging:i.Convert.default(e.serverPaging,!1),serverSorting:i.Convert.default(e.serverSorting,!1),serverFiltering:i.Convert.default(e.serverFiltering,!1),serverGrouping:i.Convert.default(e.serverGrouping,!1),serverAggregates:i.Convert.default(e.serverAggregates,!1),calculations:i.Convert.default(e.calculations,[],s.parseCalculations),filters:i.Convert.default(e.filters,[],(e=>s.parseRootFilters(e))),orders:i.Convert.default(e.orders,[],s.parseOrders),aggregates:i.Convert.default(e.aggregates,[],s.parseAggregates),groups:i.Convert.default(e.groups,[],s.parseGroups),tree:i.Convert.default(e.tree,void 0,s.parseTree),lazyLoading:i.Convert.default(e.lazyLoading,!1),cachePaging:i.Convert.default(e.cachePaging,!1),ajax:i.Convert.default(e.ajax,void 0,s.parseAjax),fieldsSamples:i.Convert.default(e.fieldsSamples,10)};return i.Convert.isValue(t.tree)&&s.adjustListMap(t.tree,t.ajax),t.data=s.adjustData(e.data,t.ajax),t}static adjustListMap(e,t){i.Convert.isNull(e.order)&&(e.order=null==t?void 0:t.order)}static parseAjax(e){return{baseUrl:e.baseUrl,request:e.request,response:e.response,total:i.Convert.default(e.total,s._totalName),selected:i.Convert.default(e.selected,s._selectedName),inserted:i.Convert.default(e.inserted,s._insertedName),updated:i.Convert.default(e.updated,s._updatedName),deleted:i.Convert.default(e.deleted,s._deletedName),aggregated:i.Convert.default(e.aggregated,s._aggregateName),select:s.parseAjaxOption(e.select),update:s.parseAjaxOption(e.update)}}static parseCalculations(e,t){const r=[];for(const n of e)r.push(s.parseCalculation(n,t));return s.sortCalcReference(r)}static parseCalculation(e,t){var r,n;return{field:null!==(r=e.field)&&void 0!==r?r:t,require:"string"==typeof e.require?[e.require]:null!==(n=e.require)&&void 0!==n?n:[],eval:s.parseCalculationFunc(e.eval),rows:s.parseRows(e.rows),nullAs:e.nullAs,dataType:s.parseDataType(e.dataType),range:i.Convert.default(e.range,h.TopLevel,(()=>i.Convert.parseEnum(h,e.range))),params:this.parseParams(e.params)}}static parseRows(e){var t;if(i.Convert.isNull(e))return;if("function"==typeof e)return e;return{func:null!==(t=e.func)&&void 0!==t?t:d.Rank,dir:i.Convert.isEmpty(e.dir)?c.Asc:i.Convert.parseEnum(c,e.dir)}}static sortCalcReference(e){const t=new Map,r=new Map;for(const n in e){const o=e[n];i.Convert.isValue(null==o?void 0:o.field)&&(r.set(o.field,o),t.set(o.field,0))}for(const t in e){o(e[t])}function o(e){var s;if(!i.Convert.isEmpty(null==e?void 0:e.eval))try{const n=e.require;if(i.Convert.isValue(n))for(const e of n){if(i.Convert.isWhite(e))continue;const n=(null!==(s=t.get(e))&&void 0!==s?s:0)+1;if(n>50)throw`The calculation field(${e}) is being referenced too much. A circular reference is expected.`;t.set(e,n);const a=r.get(e);i.Convert.isEmpty(a)||o(a)}}catch(e){throw n.Log.error((()=>({error:e,map:t}))),e}}const s=[];for(const e of t.keys()){const n=r.get(e);i.Convert.isNull(n)||s.push({calc:n,order:t.get(e)})}return s.sort(((e,t)=>t.order-e.order)).map((e=>e.calc))}static parseCalculationFunc(e){return"function"==typeof e?e:i.Convert.parseEnum(f,e)}static parseTree(e){return{master:e.master,parent:e.parent,level:e.level,order:e.order,leaf:e.leaf,open:e.open,checkParent:i.Convert.default(e.checkParent,!1),checkChild:i.Convert.default(e.checkChild,!1),aggregates:s.parseAggregates(null==e?void 0:e.aggregates),aggregateFull:i.Convert.default(e.aggregateFull,!1)}}static parseOrders(e){const t=[];for(const r of null!=e?e:[])t.push(s.parseOrder(r));return t}static parseOrder(e){return{field:e.field,dir:i.Convert.default(e.dir,c.Asc,(()=>i.Convert.parseEnum(c,e.dir))),sort:e.sort}}static parseGroups(e){const t=[];for(const r of null!=e?e:[])t.push(s.parseGroup(r));return t}static parseGroup(e){var t,r;return{field:e.field,dir:i.Convert.default(e.dir,c.Asc,(()=>i.Convert.parseEnum(c,e.dir))),groupCount:null!==(t=e.groupCount)&&void 0!==t?t:"___groupCount___",groupField:e.groupField,showFooter:e.showFooter,itemCount:null!==(r=e.itemCount)&&void 0!==r?r:"___itemCount___",aggregates:s.parseAggregates(e.aggregates),isOpen:i.Convert.default(e.isOpen,!1)}}static parseRootFilters(e){const t=s.parseFilters(e),r=[],n=new Map;t.forEach((e=>{const t=i.Convert.asStringArray(e.field).join("_");n.has(t)?n.get(t).push(e):n.set(t,[e])}));for(const e of n.keys()){const t=n.get(e);if(1==t.length)r.push(t[0]);else{const i={operator:p.And,field:t[0].field,filters:n.get(e)};r.push(i)}}return r}static parseFilters(e,t,r){const n=[];for(const i of e instanceof Array?e:[e])n.push(s.parseFilter(i,t,r));return n}static parseFilter(e,t,r){var n;const o=i.Convert.asStringArray(e.field,t),a={field:o,dataType:e.dataType,fixed:i.Convert.default(e.fixed,!1),operator:i.Convert.default(e.operator,void 0,(e=>"function"==typeof e?e:i.Convert.parseEnum(p,e))),values:i.Convert.default(e.values,void 0,s.parseFilterValues),filters:i.Convert.default(e.filters,void 0,(e=>s.parseFilters(e,o))),ignoreCase:null!==(n=e.ignoreCase)&&void 0!==n&&n};return i.Convert.isValue(r)?r(a):a}static parseFilterValues(e){return"string"==typeof e?[e]:[].concat(e)}static parseAggregates(e){const t=[];for(const r of null!=e?e:[])t.push(s.parseAggregate(r));return s.sortCalcReference(t)}static parseAggregate(e){return{func:s.parseAggregateFunc(e.func),require:i.Convert.asStringArray(e.require),nullAs:e.nullAs,payload:e.payload,field:e.field,dataType:s.parseDataType(e.dataType),payloadType:s.parseDataType(e.payloadType),eval:s.parseCalculationFunc(e.eval),params:this.parseParams(e.params)}}static parseParams(e){if(i.Convert.isNull(e))return;if("string"==typeof e)return[e];if(e instanceof Array)return e;if(e instanceof Map)return e;const t=new Map;for(const r in e)t.set(r,e[r]);return t}static parseDataType(e){if(!i.Convert.isNull(e))return"function"==typeof e?e:i.Convert.parseEnum(i.DataType,e)}static parseAggregateFunc(e){return"function"==typeof e?e:i.Convert.parseEnum(f,e)}static adjustData(e,t){if(!i.Convert.isNull(e)){if(e instanceof Array)return[].concat(e);if(i.Convert.isEmpty(t.selected))throw"invalid data (schema.list is empty)";if(0==e.hasOwnProperty(t.selected))throw`invalid data (data has no property schema.list: [${t.selected}])`;return[].concat(e[t.selected])}}static parseAjaxOption(e){if("function"==typeof e)return e;return{url:null==e?void 0:e.url,dataType:i.Convert.default(null==e?void 0:e.dataType,l.Json,(e=>i.Convert.parseEnum(l,e))),loadType:i.Convert.default(null==e?void 0:e.loadType,a.Post,(e=>i.Convert.parseEnum(a,e))),request:null==e?void 0:e.request,response:null==e?void 0:e.response}}static parseSchema(e){let t={id:i.Convert.default(null==e?void 0:e.id,void 0,s.parseModelId),order:i.Convert.default(null==e?void 0:e.order,void 0),add:i.Convert.default(null==e?void 0:e.add,void 0),total:i.Convert.default(null==e?void 0:e.total,void 0)};if((null==e?void 0:e.fields)instanceof Object){t.fields={};for(let r in e.fields){if(i.Convert.isEmpty(r))continue;let n=e.fields[r],o={dataType:i.Convert.default(n.dataType,void 0,(e=>i.Convert.parseEnum(i.DataType,e))),default:i.Convert.default(n.default,void 0),editable:i.Convert.default(n.editable,!0),nullable:i.Convert.default(n.nullable,!0),validation:i.Convert.default(n.validation,void 0,s.parseValidation)};t.fields[r]=o}}return t}static parseData(e,t,r){throw new Error("Method not implemented.")}static parseModelId(e){return"string"==typeof e?[e]:e}static parseValidation(e){return e}}var a,l,u,c,h,d,f,p,m;t.DataSourceParser=s,s._totalName="total",s._aggregateName="aggregated",s._selectedName="selected",s._insertedName="inserted",s._updatedName="updated",s._deletedName="deleted",function(e){e.Post="post",e.Get="get"}(a||(t.MethodType=a={})),function(e){e.Json="json"}(l||(t.LoadDataType=l={})),function(e){e.Select="select",e.Update="update"}(u||(t.AjaxOperation=u={})),function(e){e.Asc="asc",e.Desc="desc"}(c||(t.SortDir=c={})),function(e){e.LastLevel="last",e.TopLevel="top",e.BottomUp="step"}(h||(t.CalculationRange=h={})),function(e){e.Rank="rank"}(d||(t.RankFunctions=d={})),function(e){e.Sum="sum",e.Average="average",e.Avg="avg",e.Total="total",e.Count="count",e.Min="min",e.Max="max",e.First="first",e.Last="last",e.Range="range",e.Switch="switch"}(f||(t.AggregateFunctions=f={})),function(e){e.IsLessThan="IsLessThan",e.LessThan="<",e.IsLessThanOrEqualTo="IsLessThanOrEqualTo",e.LessThanOrEqualTo="<=",e.IsEqualTo="IsEqualTo",e.EqualTo="==",e.IsNotEqualTo="IsNotEqualTo",e.NotEqualTo="!=",e.IsGreaterThanOrEqualTo="IsGreaterThanOrEqualTo",e.GreaterThanOrEqualTo=">=",e.IsGreaterThan="IsGreaterThan",e.GreaterThan=">",e.StartsWith="StartsWith",e.NotStartsWith="NotStartsWith",e.EndsWith="EndsWith",e.NotEndsWith="NotEndsWith",e.Contains="Contains",e.NotContains="NotContains",e.In="In",e.NotIn="NotIn",e.IsNull="IsNull",e.IsNotNull="IsNotNull",e.IsEmpty="IsEmpty",e.IsNotEmpty="IsNotEmpty",e.IsNullOrEmpty="IsNullOrEmpty",e.IsNotNullOrEmpty="IsNotNullOrEmpty",e.FromTo="FromTo",e.NotFromTo="NotFromTo",e.And="And",e.Or="Or"}(p||(t.FilterOperators=p={})),function(e){e.Ignore="ignore"}(m||(t.NullAs=m={}))},4936:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GroupLoader=void 0;const i=r(3396),o=r(6328),s=r(5643),a=r(1374),l=r(4683),u=r(109);class c extends l.BaseLoader{get clientMap(){return this._clientMap}prepareRequest(e,t){let r=super.prepareRequest(e,t);if(i.Convert.isNull(e));else for(;0==i.Convert.isNull(e);){for(let t of r.groups)if(t.field==e.igroup.field){t.value=e.groupKey;break}e=e.parent}return r}clientLoad(e){var t,r,o,s,u;return n(this,void 0,void 0,(function*(){a.Log.time("clientLoad");let n=(yield this.dataSource.selectRequest(this.dataSource.pageOnly?e:{})).selected;(0==l.BaseLoader.compareFilters(null===(t=this.request)||void 0===t?void 0:t.filters,e.filters)||0==l.BaseLoader.compareOrders(null===(r=this.request)||void 0===r?void 0:r.orders,e.orders)||0==l.BaseLoader.compareGroups(null===(o=this.request)||void 0===o?void 0:o.groups,e.groups)||i.Convert.isNull(this._clientMap))&&(a.Log.debug((()=>"make map")),n=[].concat(n),n=l.Filtering.filterList(n,e.filters),n=l.Sorting.sortList(n,e.groups,e.orders),this.config.lazyLoading&&this.ensureMap(n),a.Log.debug((()=>"make map end")));let h={};return(null!==(u=null===(s=e.groups)||void 0===s?void 0:s.length)&&void 0!==u?u:0)>0&&(h=this.config.lazyLoading?c.clientFindData(this.clientMap,this.keyMaker,e,this.config.serverPaging,this.dataSource):c.clientMakeGroup(n,this.keyMaker,e.groups,this.config.aggregates,this.config.calculations,this.dataSource)),a.Log.timeLog("clientLoad",n.length),a.Log.timeEnd("clientLoad"),a.Log.debug((()=>({f:"clientLoad",pageNo:e.pageNo,length:h.selected.length}))),h}))}serverLoad(e){var t,r;return n(this,void 0,void 0,(function*(){if((null!==(r=null===(t=this.clientMap)||void 0===t?void 0:t.size)&&void 0!==r?r:0)>0)if(this.config.serverGrouping)this.config.lazyLoading,this.config.serverPaging;else{if(this.config.lazyLoading)return yield this.clientLoad(e);this.config.serverPaging}return yield this._serverLoad(e)}))}_serverLoad(e){return n(this,void 0,void 0,(function*(){const t=e.groups;0==this.config.serverGrouping&&(e.groups=void 0,i.Convert.isNull(e.orders)?e.orders=[].concat(t):e.orders=[].concat(t).concat(e.orders));const r=yield this.dataSource.selectRequest(e),n=r.selected,o=r.total;let l={};if(this.config.serverPaging&&(l.total=o),i.Convert.isValue(e.aggregates)&&this.config.serverAggregates&&(l.aggregated=r.aggregated),1==this.config.serverGrouping){const t=e.groups.some((e=>i.Convert.isEmpty(e.value)));l.selected=t?c.serverMakeGroup(n,this.keyMaker,this.config.calculations,e.groups,this.dataSource):n.map(((e,t)=>new s.ListNode(this.dataSource.createBox(e,t),this.keyMaker,t)))}else 1==this.config.serverPaging?(this.applyData(e,n),this._clientMap=void 0,e.groups=t,l=yield this.clientLoad(e)):(this.config.data=[].concat(n),this.dataSource.setBoxes(e,n),e.groups=t,l=yield this.clientLoad(e));return i.Convert.isValue(o)&&(this.dataSource.total=o),a.Log.debug((()=>["_serverLoad",e,l])),l}))}loaded(e,t,r){let n=[];if(this.config.serverPaging)n=this.serverPaging(e,t,r);else if(n=e.selected,i.Convert.isNull(r)?this.nodeCount=e.selected.length:r.nodeCount=e.selected.length,i.Convert.isValue(r))for(let e of n)r.addNode(e);else for(let e of n)e.index=this.nodes.length,this.nodes.push(e);return n}static clientFindData(e,t,r,n,l){const u=[];let h;const d=r.groups;a.Log.debug((()=>["clientFindData",r]));for(const e of d){if(h=e,i.Convert.isNull(e.value))break;u.push(e.value)}let f={selected:[]};const p=u.join(c.seperator);let m=e.get(p);const g=(""==p?0:u.length)!=d.length;if(i.Convert.isValue(m)){let e=0;f.total=m.length,n&&i.Convert.isValue(r.pageSize)&&(e=r.pageNo*r.pageSize,m=[].concat(m).splice(e,r.pageSize));for(const r in m){const n=m[r],a=n instanceof s.Box?n.data:n;if(g){let r=o.DataSourceParser.parseGroup(h);const n=a[r.field],u=a[r.itemCount],d=a[this.aggregatesField];let p={};for(let e in a)p[e]=a[e];delete p[r.itemCount],delete p[c.aggregatesField];const m=new s.GroupNode(void 0,n,p,t,r,l);m.itemCount=u,m.index=e++,m.igroup.aggregates=d,m.footer=i.Convert.isValue(d)?new s.FooterNode(m,t,d):void 0,f.selected.push(m)}else{const o=new s.ListNode(n,t,i.Convert.asNumber(r));o.index=e++,f.selected.push(o)}}}return f}static clientMakeGroup(e,t,r,n,o,l){let u=new Map;a.Log.time("clientMakeGroup");const h=e.keys();for(const n of h){let o,a=e[n],c=u;const h={};for(let e of r){let r=a.data[e.field];if(h[e.field]=r,i.Convert.isValue(e.value)&&r!=e.value){o=void 0;break}if(0==c.has(r)){let n={};for(let e in h)n[e]=h[e];let a=new s.GroupNode(o,r,n,t,e,l);i.Convert.isNull(o)?c.set(r,a):o.addNode(a),o=a,c=a.map}else o=c.get(r),c=o.map}null==o||o.addNode(new s.GroupItem(a,t,n))}let d=[],f=0;for(let e of u.values())e.index=f++,d.push(e);a.Log.timeLog("clientMakeGroup");const p=c.makeGroupTotal(d,o,t);return this.makeTotal(p,n,e),a.Log.timeEnd("clientMakeGroup"),{selected:d,total:d.length,aggregated:n}}calcAggregates(){if(this.dataSource.updateIndex>0)return;let e=c.makeGroupTotal(this.nodes,this.config.calculations,this.keyMaker);c.makeTotal(e,this.config.aggregates,this.dataSource.getBoxes().map((e=>e.data)))}static makeTotal(e,t,r){if(i.Convert.isValue(t)){const r=e.map((e=>e.data));i.Convert.isValue(t)&&l.Aggregate.aggregates(r,t,!1)}}static groupKeyMaker(e,t,r){const n=[];for(const i of e)if(n.push(`${i.field}_${r}`),i.field==t)break;return"_group_"+n.join("/")}static serverMakeGroup(e,t,r,n,a){let l=new Map;for(let r of e){let e,u=l;const c={};for(let l of n){l=o.DataSourceParser.parseGroup(l);let n=r[l.field];if(i.Convert.isNull(n))break;if(c[l.field]=n,i.Convert.isValue(l.value)){if(n!=l.value)break}else if(0==u.has(n)){let o={};for(let e in c)o[e]=c[e];let h=new s.GroupNode(e,n,o,t,l,a);if(i.Convert.isValue(r.aggregates)&&r.aggregates instanceof Array){const e=r.aggregates;for(const t of h.igroup.aggregates){const r=e.find((e=>e.field==t.field));i.Convert.isValue(r)&&(t.value=r.value)}}i.Convert.isValue(l.groupCount)&&i.Convert.isValue(r[l.groupCount])&&(h.nodeCount=r[l.groupCount]),i.Convert.isValue(l.itemCount)&&i.Convert.isValue(r[l.itemCount])&&(h.itemCount=r[l.itemCount]),i.Convert.isNull(e)?u.set(n,h):e.addNode(h),e=h,u=h.map}else e=u.get(n),u=e.map}}const u=[];let h=0;for(const e of l.values())e.index=h++,u.push(e);return c.makeGroupTotal(u,r,t),u}ensureMap(e){const t=new Map;this._clientMap=new Map;for(const r of e){if(i.Convert.isNull(r))continue;const e=r.data,n=[],o=[],s={};for(const r of this.config.groups){r.field;const i=e[r.field];n.push(i);const a=o.join(c.seperator),l=t.has(a)?t.get(a):new Map;s[r.field]=i;let u={};for(let e in s)u[e]=s[e];0==l.has(i)&&l.set(i,u),t.set(a,l),o.push(i)}const a=n.join(c.seperator);this._clientMap.has(a)?this._clientMap.get(a).push(r):this._clientMap.set(a,[r])}for(const e of this._clientMap.keys()){const r=e.split(c.seperator);for(;r.length>0;){r.join(c.seperator);const n=r.pop(),o=r.join(c.seperator);if(t.has(o)){const s=t.get(o);if(s.has(n)){const t=s.get(n),o=""==e?this.config.groups[0]:this.config.groups[r.length];i.Convert.isNull(t[o.itemCount])&&(t[o.itemCount]=0);const a=this._clientMap.get(e);t[o.itemCount]+=a.length,i.Convert.isValue(null==o?void 0:o.aggregates)&&(null==o?void 0:o.aggregates.length)>0&&(i.Convert.isNull(t[c.itemsField])&&(t[c.itemsField]=[]),t[c.itemsField]=t[c.itemsField].concat(a))}}}}for(const e of t.keys()){const r=[],n=this.config.groups[""==e?0:e.split(c.seperator).length];for(const o of t.get(e)){const e=o[1];r.push(e),i.Convert.isValue(null==n?void 0:n.aggregates)&&(null==n?void 0:n.aggregates.length)>0&&(e[c.aggregatesField]=l.Aggregate.aggregates(e[c.itemsField],n.aggregates,!0),delete e[c.itemsField])}this._clientMap.set(e,r)}return i.Convert.isValue(this.config.aggregates)&&(this.config.aggregates=l.Aggregate.aggregates(e,this.config.aggregates,!0)),this._clientMap}static makeGroupTotal(e,t,r){let n=[],a=!1,u=!1;const h=t.some((e=>i.Convert.isValue(e.eval))),d=t.some((e=>i.Convert.isValue(e.rows)));for(const c of e)if(c instanceof s.GroupNode){const e=this.makeGroupTotal(c.nodes,t,r);c.nodes.length>0&&(c.nodeCount=c.nodes.length),e.length>0&&(c.itemCount=e.length),c.igroup=o.DataSourceParser.parseGroup(c.igroup),i.Convert.isValue(c.igroup.aggregates)&&(e.length>0&&(c.igroup.aggregates=l.Aggregate.aggregates(e.map((e=>e.data)),c.igroup.aggregates,!0)),i.Convert.isNull(c.footer)?c.footer=new s.FooterNode(c,r,c.igroup.aggregates):c.footer.aggregates=c.igroup.aggregates),n=n.concat(e),u=0==c.level}else h&&this.calcFields(c,t),n.push(c),a=!0;return d&&c.calcRows(n,t,a,u),n}static calcFields(e,t){for(const r of t)if(i.Convert.isValue(r.eval)){const t=l.Aggregate.calcFields(r,e.data);e.setData(t,r.field)}}static calcRows(e,t,r,n){if(t.some((e=>i.Convert.isValue(e.rows)))){const s=e.map((e=>e.cloneData()));for(const e of t)i.Convert.isValue(e.rows)&&(e.range==o.CalculationRange.BottomUp||e.range==o.CalculationRange.LastLevel&&r||e.range==o.CalculationRange.TopLevel&&n)&&l.BaseLoader.calculateRows(e,s)}}search(){return n(this,void 0,void 0,(function*(){a.Log.debug((()=>["GroupLoader.search"])),i.Convert.isValue(this.clientMap&&this.clientMap.size>0)&&c.reorderClientMap(this.clientMap,this.config.groups,this.config.orders),c.reorderNodes(this.nodes,this.nodeCount,this.config.groups,this.config.orders),a.Log.debug((()=>["Loader.search","end"]))}))}static reorderNodes(e,t,r,n){var i;if(e.length===t){const t=e[0];if(t instanceof s.GroupNode){const s=null===(i=r.find((e=>e.field==t.igroup.field)))||void 0===i?void 0:i.dir;t.igroup.dir=s,e.sort(((e,t)=>e.groupKey<t.groupKey?s==o.SortDir.Asc?-1:1:s==o.SortDir.Asc?1:-1));for(const t of e)this.reorderNodes(t.nodes,t.nodeCount,r,n)}else{const t={field:"originIndex",dir:o.SortDir.Asc};l.Sorting.sortList(e,r,n.concat(t),((e,r)=>r.field!=t.field?e.value(r.field):e.box.originIndex))}for(let t=0;t<e.length;t++)e[t].index=t}else e.splice(0)}static reorderClientMap(e,t,r){for(const n of e.keys()){const i=e.get(n);l.Sorting.sortList(i,t,r)}}insertNode(e,t,r,n,o=!1){if(o)return this.removeNode(e,t,r,n);if(0==this.dataSource.insertMap.has(r.key))return t;const a=n==u.InsertTo.Last||n==u.InsertTo.Child?e.nodes.length:n==u.InsertTo.First?0:t.index+(n==u.InsertTo.After?1:0),c=new s.GroupItem(r,l.BaseLoader.symbolKeyMaker,a);return i.Convert.isValue(e)?e.addNode(c,a):i.Convert.isValue(t.parent)&&t.parent.addNode(c,a),this.calcAggregates(),c}removeNode(e,t,r,n,o=!1){var s;if(o)return this.insertNode(e,t,r,n);if(this.dataSource.deleteMap.has(r.key))return t;const a=t,l=null!==(s=t.parent)&&void 0!==s?s:e;return i.Convert.isValue(l)&&l.removeNode(a),a.parent=l,this.calcAggregates(),a}makeAllItemsData(e){let t=[];for(const r of e)r instanceof s.GroupNode?t=t.concat(this.makeAllItemsData(r.nodes)):r instanceof s.GroupItem&&t.push(r.data);return t}getAllItems(){return this.makeAllItemsData(this.nodes)}moveToNode(e,t,r){const n=this.dataSource.orderMap;i.Convert.isNull(e.parent)&&i.Convert.isNull(t.parent)?l.BaseLoader.moveToList(this.nodes,e,t,r,n):t instanceof s.GroupNode?(r&&t.index>0&&(t=i.Convert.isNull(t.parent)?this.nodes[t.index-1]:t.parent.nodes[t.index-1]),t instanceof s.GroupNode&&(e.parent.removeNode(e),t.addNode(e,void 0,n),t.isOpen=!0)):i.Convert.isValue(e.parent)&&i.Convert.isValue(t.parent)&&(e.moveTo(t,r,n),t.parent.isOpen=!0);c.makeGroupTotal(this.nodes,this.config.calculations,this.keyMaker)}}t.GroupLoader=c,c.seperator="[_!!_]",c.aggregatesField="___aggregates___",c.itemsField="___items___"},4072:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ListLoader=void 0;const i=r(3396),o=r(4683),s=r(5643),a=r(1374),l=r(109),u=r(6328);class c extends o.BaseLoader{constructor(e){super(e),this._clientRows=[]}get clientRows(){var e;return null!==(e=this._clientRows)&&void 0!==e?e:this._clientRows=[]}search(){return n(this,void 0,void 0,(function*(){a.Log.debug((()=>["ListLoader.search"])),i.Convert.isEmpty(this.nodes)?this.dataSource.sortOriginIndex():c.reorderNodes(this.nodes,this.nodeCount,this.config.orders),a.Log.debug((()=>["ListLoader.search",[].concat(this.nodes)]))}))}static reorderNodes(e,t,r){if(e.length<t)return void e.splice(0);const n={field:"__originIndex__",dir:u.SortDir.Asc};r=[].concat(r).concat(n),o.Sorting.sortList(e,[],r,((e,t)=>t.field!=n.field?e.value(t.field):e.box.originIndex));for(let t=0;t<e.length;t++)e[t].index=t}prepareRequest(e,t){return super.prepareRequest(e,t)}loaded(e,t,r){let n=[];if(i.Convert.isNull(e))return n;if(0==this.config.serverPaging){let t=e.selected;this.nodes.splice(0);let r=0;for(const e of t)e.index=r,this.nodes.push(e),n.push(e),r++;this.makeTotal(this.nodes,this.config.aggregates),this.nodeCount=t.length}else this.nodeCount=e.total,n=this.serverPaging(e,t,void 0);return n}clientLoad(e){return n(this,void 0,void 0,(function*(){let t=yield this.dataSource.selectRequest(e);i.Convert.isNull(this.dataSource.total)&&(this.dataSource.total=t.total);let r=t.selected;return(i.Convert.isNull(this.nodeCount)||0==this.nodeCount)&&(this.nodeCount=t.total),r=o.Filtering.filterList(r,e.filters),r=o.Sorting.sortList(r,e.groups,e.orders),t.selected=this.clientSelect(r,e),a.Log.debug((()=>({f:"clientLoad",pageNo:e.pageNo,lenth:t.selected.length,nodeCount:this.nodeCount}))),t}))}clientSelect(e,t){let r=[];const n=e.keys();for(const t of n){const n=e[t];r.push(new s.ListNode(n,this.keyMaker,t))}return r}serverLoad(e){return n(this,void 0,void 0,(function*(){const t=yield this.dataSource.selectRequest(e),r=t.selected,n=t.total,o={};return this.config.serverPaging?(o.total=n,this.dataSource.total=o.total,this.applyData(e,r)):(this.dataSource.setBoxes(e,r),this.dataSource.total=r.length),i.Convert.isValue(e.aggregates)&&this.config.serverAggregates&&(o.aggregated=t.aggregated),o.selected=this.serverSelect(r,e),a.Log.debug((()=>["serverLoad",e,o])),o}))}serverSelect(e,t){const r=[];e=this.adjustServerResponse(t,e);for(const t in e){const n=e[t],o=i.Convert.asNumber(t);r.push(new s.ListNode(n,this.keyMaker,o))}return r}makeTotal(e,t){if(i.Convert.isValue(this.config.aggregates)||i.Convert.isValue(this.config.calculations)){if(this.dataSource.hasCalcFields)for(const t of e)for(const e of this.config.calculations){if(i.Convert.isNull(e.eval))continue;const r=o.Aggregate.calcFields(e,t.data);t.data[e.field]!=r&&t.setData(r,e.field)}const t=this.dataSource.hasCalcRows?e.map((e=>e.cloneData())):i.Convert.isValue(this.config.aggregates)?this.nodes.map((e=>e.data)):[];if(this.dataSource.hasCalcRows)for(const e of this.config.calculations)i.Convert.isNull(e.rows)||o.BaseLoader.calculateRows(e,t);i.Convert.isValue(this.config.aggregates)&&o.Aggregate.aggregates(t,this.config.aggregates,!1)}}calcAggregates(){this.dataSource.updateIndex>0||(a.Log.debug((()=>"ListLoader.calcAggregates")),this.makeTotal(this.nodes,this.config.aggregates))}adjustIndex(e){this.nodeCount=this.nodes.length;for(let t=e,r=this.nodes.length;t<r;t++)this.nodes[t].index=t}insertNode(e,t,r,n,i=!1){if(i)return this.removeNode(e,t,r,n);if(0==this.dataSource.insertMap.has(r.key))return t;let a;const u=n==l.InsertTo.Last?this.nodes.length:n==l.InsertTo.First?0:t.index+(n==l.InsertTo.After?1:0);return a=new s.ListNode(r,o.BaseLoader.symbolKeyMaker,u),a.index=u,this.nodes.splice(u,0,a),this.adjustIndex(u),this.calcAggregates(),a}removeNode(e,t,r,n,i=!1){if(i)return this.insertNode(e,t,r,n);if(this.dataSource.deleteMap.has(r.key))return t;const o=t.index;return this.nodes.splice(o,1),this.adjustIndex(o),this.calcAggregates(),this.nodes[o]}getAllItems(){return this.nodes.map((e=>e.data))}moveToNode(e,t,r){o.BaseLoader.moveToList(this.nodes,e,t,r,this.dataSource.orderMap)}}t.ListLoader=c},9909:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoaderFactory=void 0;const n=r(3396),i=r(4072),o=r(2542),s=r(4936),a=r(1374);t.LoaderFactory=class{static ensureLoader(e,t){var r,l,u;return a.Log.debug((()=>({f:"ensureLoader",dataSource:e,config:t}))),n.Convert.isValue(t.groups)?new s.GroupLoader(e):n.Convert.isValue(null===(r=t.tree)||void 0===r?void 0:r.level)||n.Convert.isValue(null===(l=t.tree)||void 0===l?void 0:l.master)&&n.Convert.isValue(null===(u=t.tree)||void 0===u?void 0:u.parent)?new o.TreeLoader(e):new i.ListLoader(e)}static changeLoader(e,t){const r=e.stopLoader();return a.Log.debug((()=>["changeLoader",r])),r}}},5643:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PivotNode=t.GroupNode=t.TreeNode=t.TreeCheck=t.ParentNode=t.FooterNode=t.GroupItem=t.ListNode=t.ItemNode=t.DataBox=t.Box=void 0;const n=r(1374),i=r(3396),o=r(4683);class s{constructor(e,t,r){this._data=e,this._originData=e,this._originIndex=r,i.Convert.isEmpty(e)&&n.Log.error((()=>"data is null")),this._key=t(this._data,r),this._data._key_=this._key}static create(e,t,r){return new s(e,t,r)}get key(){return this._key}get data(){return this._data}set data(e){this._data!==e&&(this._data=e)}get originData(){return this._originData}get originIndex(){return this._originIndex}set originIndex(e){this._originIndex=e}get modified(){return this.data!==this.originData}getValue(e){var t;return null===(t=this.data)||void 0===t?void 0:t[e]}setValue(e,t){return this.getValue(e)!==t&&(this.data[e]=t,!0)}cloneData(){if(this.modified)return this.data;const e={};for(const t in this.data)e[t]=this.data[t];return this.data=e,e}setData(e,t){if(i.Convert.isEmpty(t)){if(e===this.data)return!1;this.data=e}else{if(e===this.getValue(t))return!1;0==this.modified&&this.cloneData(),this.data[t]=e}return!i.Convert.isSame(this.originData,this.data)}}t.Box=s;class a extends s{get dataSource(){return this._dataSource}set dataSource(e){this._dataSource=e}constructor(e,t,r,n){super(t,r,n),this._dataSource=e,e.keyMap.set(this.key,this),e.adjustOriginIndex(n)}static create(e,t,r,n=void 0){return e instanceof a?e:new a(n,e,t,r)}get originIndex(){return super.originIndex}set originIndex(e){if(super.originIndex==e)return;const t=super.originIndex,r=e;super.originIndex=r,this.dataSource.originIndexChanged(this,t,r)}setData_old(e,t){const r=super.setData(e,t);if(r)this.dataSource.updateBox(this);else{let e=this.isSameSchema();this.dataSource.updateBox(this,e)}return r}setData(e,t){const r=super.setData(e,t);let n=this.isSameSchema();return this.dataSource.updateBox(this,n),r}isSameSchema(){let e=!1;for(const t of this.dataSource.fieldSet.keys())if(e=i.Convert.isSameValue(this.originData[t],this.data[t]),0==e)break;return e}}t.DataBox=a;class l{constructor(e,t,r){this._box=e instanceof s?e:new s(e,t,r),this._gIndex=l._maxIndex++}get box(){return this._box}get key(){return this.box.key}get data(){return this.box.data}set data(e){this.box.data=e,this._calc=void 0}get modified(){return this.box.modified}get calcFields(){return!0}get calc(){var e;return null!==(e=this._calc)&&void 0!==e?e:this._calc={}}set calc(e){this._calc!==e&&(this._calc=e)}get originData(){return this.box.originData}get originIndex(){return this.box.originIndex}get parent(){return this._parent}set parent(e){this.parent!==e&&(this._parent=e,this._treeIndex=void 0)}get level(){var e;return this.parent instanceof h?(null!==(e=this.parent.level)&&void 0!==e?e:-1)+1:0}set level(e){}get index(){return this._index}set index(e){if(this._index===e)return;const t=this._index;this._index=e,this._treeIndex=void 0,this.box,this.setOrder(t,e)}get treeIndex(){var e;return null!==(e=this._treeIndex)&&void 0!==e?e:this._treeIndex=(this.parent instanceof h?this.parent.treeIndex+".":"")+i.Convert.lpad(this.index+"",l.TreeIndexLength,"0")}getOrderFunc(){var e,t;return this.box instanceof a?null===(t=null===(e=this.box.dataSource)||void 0===e?void 0:e.config.schema)||void 0===t?void 0:t.order:void 0}setOrder(e,t){const r=this.getOrderFunc();if(i.Convert.isValue(r))if("function"==typeof r){if(t!=r(this.data)){const e=i.Convert.cloneData(this.data);r(e,t),this.setData(e,void 0)}}else this.setData(t,r)}setData(e,t){return this.box.setData(e,t)}cloneData(){return this.box.cloneData()}value(e){return this.box.getValue(e)}}t.ItemNode=l,l._maxIndex=0,l.TreeIndexLength=5;t.ListNode=class extends l{};class u extends l{static getGroupKeys(e,t=void 0){if(!i.Convert.isNull(e))return t=null!=t?t:new Map,e instanceof f&&t.set(e.igroup.field,e.groupKey),this.getGroupKeys(e.parent,t),t}moveTo(e,t,r){var s;if(i.Convert.isNull(e))return;if(i.Convert.isValue(this.parent)&&this.parent==e.parent)return void o.BaseLoader.moveToList(this.parent.nodes,this,e,t,r);const a=e.index+(t?0:1);null===(s=this.parent)||void 0===s||s.removeNode(this),e instanceof f?(n.Log.debug((()=>["target is GroupNode",e.key])),e.addNode(this,void 0,r)):e.parent.addNode(this,a,r),n.Log.debug((()=>["moveTo",e.parent.data,this.data]))}}t.GroupItem=u;class c extends l{get calcFields(){return!1}constructor(e,t,r){super(e,(t=>c.footerKeyMaker(e,t.data)),0),this.parent=e,this._aggregates=r}static footerKeyMaker(e,t){const r=[];for(const e in t)r.push(`${e}:${t[e]}`);return"__footer__ "+e.key}get aggregates(){return this._aggregates}set aggregates(e){this._aggregates=e}get index(){return this.data instanceof h?this.data.nodeCount:0}value(e){return this.data instanceof h?this.data.value(e):void 0}get level(){return this.data instanceof h?this.data.level+1:0}set level(e){}}t.FooterNode=c;class h extends l{constructor(e,t,r,n,i){super(t,r,n),this.parent=e}get parent(){return this._parent}set parent(e){this._parent!==e&&(this._parent=e)}get nodes(){var e;return null!==(e=this._nodes)&&void 0!==e?e:this._nodes=[]}get nodeCount(){return this._nodeCount}set nodeCount(e){this._nodeCount=e}get isLeaf(){return this._isLeaf}set isLeaf(e){this._isLeaf=e}get isOpen(){return this._isOpen}set isOpen(e){this._isOpen=e}get level(){var e;return null!==(e=this._level)&&void 0!==e?e:0}set level(e){this._level!=e&&(this._level=e)}get hasFooter(){return i.Convert.isValue(this._footer)}get footer(){return this._footer}set footer(e){var t;i.Convert.isValue(this.footer)&&(null===(t=this.footer)||void 0===t?void 0:t.parent)==(null==e?void 0:e.parent)?this._footer.aggregates=e.aggregates:this._footer=e}get openCount(){let e=this.isOpen?this.nodeCount+(this.hasFooter?1:0):0;for(const t of this.nodes)t instanceof h&&(e+=t.openCount);return e}moveTo(e,t,r){var n,s;if(i.Convert.isNull(e))return;let a=e;for(;i.Convert.isValue(a=a.parent);)if(a==this)return;if(i.Convert.isValue(this.parent)&&this.parent==e.parent)return void o.BaseLoader.moveToList(this.parent.nodes,this,e,t,r);const l=e.index+(t?0:1);null===(n=this.parent)||void 0===n||n.removeNode(this),null===(s=e.parent)||void 0===s||s.addNode(this,l)}addNode(e,t,r=void 0){let n=i.Convert.isNull(r)?-1:this.nodes.findIndex((t=>t.key==e.key));if(n>=0&&(this.nodes.splice(n,1),h.adjustIndex(this.nodes,n)),i.Convert.isNull(t)?(this.nodes.push(e),e.index=this.nodes.length-1):(this.nodes.splice(t,0,e),e.index=t,h.adjustIndex(this.nodes,t)),0==i.Convert.isNull(r)){const e=this.nodes.map((e=>e.box.originIndex)).sort();this.nodes.forEach(((t,n)=>{const i=t.box.originIndex,o=e[n];i!=o&&r.push({key:t.key,oldIndex:i,newIndex:o})}))}this.nodeCount=this.nodes.length,n<0&&(e.level=this.level+1,e.parent=this)}removeNode(e){let t=this.nodes.findIndex((t=>t.key==e.key));t>=0&&(this.nodes.splice(t,1),this.nodeCount=this.nodes.length,h.adjustIndex(this.nodes,t),e.parent=void 0,n.Log.debug((()=>({f:"removeNode",nodes:this.nodes}))))}static adjustIndex(e,t=0){for(let r of e.keys()){if(r<t)continue;let n=e[r];i.Convert.isNull(n)||(n.index=r)}}bfsSearch_old(e){if(!i.Convert.isNull(e)){var t=new i.Queue;for(t.push(this);t.any();){var r=t.pop();if(e(r))return r;if(r instanceof h)for(let e of r.nodes)t.push(e)}}}bfsSearch(e){let t=[this];return i.Arrays.bfsSearch(t,(t=>!0===e(t)||(t instanceof h?t.nodes:[])))}dfsSearch(e){let t=[this];return i.Arrays.dfsSearch(t,(t=>!0===e(t)||(t instanceof h?t.nodes:[])))}*bfsIterator(){var e=new i.Queue;for(e.push(this);e.any();){var t=e.pop();if(yield t,t instanceof h)for(let r of t.nodes)e.push(r)}}bfsAction(e){let t=[this];i.Arrays.bfsAction(t,(t=>!1===e(t)?[]:t instanceof h?t.nodes:[]))}dfsAction(e){let t=[this];i.Arrays.dfsAction(t,(t=>!1===e(t)?[]:t instanceof h?t.nodes:[]))}dfsSearch_old(e){if(!i.Convert.isNull(e)){var t=new i.Stack;for(t.push(this);t.any();){var r=t.pop();if(e(r))return r;if(r instanceof h)for(let e of r.nodes.reverse())t.push(e)}}}}var d;t.ParentNode=h,function(e){e[e.None=0]="None",e[e.Check=1]="Check",e[e.Half=2]="Half"}(d||(t.TreeCheck=d={}));t.TreeNode=class extends h{constructor(e,t,r,n,o,s){if(super(e,t,r,n,s),this._treeMap=o,i.Convert.isNull(o))throw"treeMap is null"}get treeMap(){return this._treeMap}get checked(){var e;return null!==(e=this._checked)&&void 0!==e?e:this._checked=d.None}set checked(e){this._checked!==e&&(this._checked=e)}toggleCheck(){let e;switch(this.checked){case d.Check:e=d.None;break;case d.Half:case d.None:e=d.Check}if(this._checked=e,this.treeMap.checkParent&&i.Convert.isValue(this.parent)){let e=this;for(;i.Convert.isValue(e=e.parent);){const t=e.nodes,r=t.filter((e=>e.checked==d.Check)).length;0==r?e._checked=d.None:r==t.length?e._checked=d.Check:e._checked=d.Half}}this.treeMap.checkChild&&i.Convert.isValue(this.nodes)&&i.Arrays.bfsAction([this],(e=>(e.nodes.forEach((t=>t._checked=e._checked)),e.nodes)))}get nodes(){return super.nodes}get parent(){return super.parent}get master(){var e;if(i.Convert.isValue(null===(e=this.treeMap)||void 0===e?void 0:e.master)){const e=this.treeMap.master;return"function"==typeof e?e(this.data):this.data[e]}}set parent(e){var t,r;if(super.parent!=e&&(super.parent=e,i.Convert.isValue(null===(t=this.treeMap)||void 0===t?void 0:t.parent))){const t=this.treeMap.parent;"function"==typeof t?t(this.data)==(null==e?void 0:e.master)||t(this.cloneData(),null!==(r=null==e?void 0:e.master)&&void 0!==r?r:""):this.setData(null==e?void 0:e.master,t)}}get level(){return super.level}set level(e){var t;if(super.level!=e&&(super.level=e,i.Convert.isValue(null===(t=this.treeMap)||void 0===t?void 0:t.level))){const t=this.treeMap.level;"function"==typeof t?t(this.data)===e||t(this.cloneData(),e):this.setData(e,t)}}getOrderFunc(){var e,t,r,n;return null!==(t=null===(e=this.treeMap)||void 0===e?void 0:e.order)&&void 0!==t?t:this.box instanceof a?null===(n=null===(r=this.box.dataSource)||void 0===r?void 0:r.config.schema)||void 0===n?void 0:n.order:void 0}addNode(e,t){super.addNode(e,t),e.adjustLevel(e.level)}adjustLevel(e){this.level=e;for(const t of this.nodes)t.adjustLevel(e+1)}};class f extends h{get itemCount(){return this._itemCount}set itemCount(e){this._itemCount=e}get groupKey(){return this._groupKey}set groupKey(e){this._groupKey=e}get map(){var e;return null!==(e=this._map)&&void 0!==e?e:this._map=new Map}get igroup(){return this._igroup}set igroup(e){this._igroup=e}get hasFooter(){return this.igroup.showFooter&&super.hasFooter}get calcFields(){return!1}static groupKeyMake2r(e,t,r){const n=[`${t}:${r[t]}`];for(;i.Convert.isValue(e);)n.splice(0,0,`${e.igroup.field}:${e.groupKey}`),e=e.parent;return"group {"+n.join(",")+"}"}static groupKeyMaker(e,t,r){const n=[];for(const t in e)n.push(`${t}:${e[t]}`);return"__group__ {"+n.join(",")+"}"}constructor(e,t,r,n,i,o){var s;super(e,r,(t=>f.groupKeyMaker(r,i,e)),0,o),this.igroup=i,this.level=(null!==(s=null==e?void 0:e.level)&&void 0!==s?s:-1)+1,this._groupKey=t,this.isOpen=i.isOpen}addNode(e,t,r=void 0){super.addNode(e,t,r),e instanceof f&&(e.level=this.level+1,this.map.set(e.groupKey,e));const n=u.getGroupKeys(e);for(const t of n.keys())e.setData(n.get(t),t)}get groupKeys(){const e=new Map;return u.getGroupKeys(this,e),e}}t.GroupNode=f;t.PivotNode=class extends h{get calcFields(){return!1}}},739:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestBuilder=void 0;t.RequestBuilder=class{static apply(e,t){t.url=e.url,t.orders=e.orders,t.groups=e.groups,t.filters=e.filters,t.aggregates=e.aggregates,t.pageNo=e.pageNo,t.pageSize=e.pageSize,t.parentKey=e.parentKey,t.parentField=e.parentField}}},2542:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TreeLoader=void 0;const i=r(3396),o=r(5643),s=r(1374),a=r(4683),l=r(109);class u extends a.BaseLoader{get clientMap(){var e;return null!==(e=this._clientMap)&&void 0!==e?e:this._clientMap=new Map}search(){return n(this,void 0,void 0,(function*(){s.Log.debug((()=>["TreeLoader.search"])),i.Convert.isValue(this.clientMap&&this.clientMap.size>0)&&u.reorderClientMap(this.clientMap,this.config.groups,this.config.orders),u.reorderNodes(this.nodes,this.nodeCount,this.config.orders),s.Log.debug((()=>["TreeLoader.search","end"]))}))}static reorderNodes(e,t,r){if(e.length===t){a.Sorting.sortList(e,[],r,((e,t)=>e.value(t.field)));for(let t=0;t<e.length;t++)e[t].index=t;for(const t of e)this.reorderNodes(t.nodes,t.nodeCount,r)}else e.splice(0)}static reorderClientMap(e,t,r){for(const t of e.keys()){const n=e.get(t);a.Sorting.sortList(n,[],r)}}ensureMap(e,t){var r;const n=null===(r=this.config.tree)||void 0===r?void 0:r.parent,o=t?this.clientMap:new Map;if(i.Convert.isNull(n))return o;for(let t of e){let e=u.getTreeData(t.data,n);o.has(e)?o.get(e).push(t):o.set(e,[t])}return this._clientMap=o,this._clientMap}prepareRequest(e,t){let r=super.prepareRequest(e,t);return r.parentKey=u.getTreeData(null==e?void 0:e.data,this.config.tree.master),r}clientLoad(e){var t,r,o,l,c,h;return n(this,void 0,void 0,(function*(){let n={},d=this.clientMap.has(e.parentKey)?this.clientMap.get(e.parentKey):(yield this.dataSource.selectRequest(e)).selected.map(((e,t)=>this.dataSource.createBox(e,t)));if(0==a.BaseLoader.compareFilters(null===(t=this.request)||void 0===t?void 0:t.filters,e.filters)||0==a.BaseLoader.compareOrders(null===(r=this.request)||void 0===r?void 0:r.orders,e.orders)||i.Convert.isEmpty(this.clientMap))d=a.Filtering.filterList(d,e.filters),d=a.Sorting.sortList(d,[],e.orders),this.ensureMap(d,!1);else if(this.config.lazyLoading&&0==this.clientMap.has(e.parentKey)&&(this.clientMap.set(e.parentKey,d),i.Convert.isValue(this.config.tree.leaf))){const e=this.config.tree.leaf,t=this.config.tree.master;for(const r of d){const n=null==r?void 0:r.data;"function"==typeof e?e(n)&&this.clientMap.set(u.getTreeData(n,t),[]):null!==(o=null==n?void 0:n.hasOwnProperty(e))&&void 0!==o&&o&&n[e]&&this.clientMap.set(u.getTreeData(n,t),[])}}return i.Convert.isValue(null===(l=this.config.tree)||void 0===l?void 0:l.parent)&&i.Convert.isValue(null===(c=this.config.tree)||void 0===c?void 0:c.master)?n=this.config.lazyLoading?u.clientFindData(this.clientMap,this.config.tree,this.keyMaker,e,this.config.serverPaging,this.dataSource):u.clientFindTree(this.clientMap,this.config.tree,this.keyMaker,e.parentKey,void 0,this.dataSource):i.Convert.isValue(null===(h=this.config.tree)||void 0===h?void 0:h.level)&&(n=u.clientLevelTree(d,this.config.tree,this.keyMaker,e.parentKey,this.dataSource)),0==this.config.serverPaging&&this.makeTotal(n.selected),s.Log.debug((()=>({f:"clientLoad",pageNo:e.pageNo,lenth:n.selected.length}))),n}))}serverLoad(e){var t,r,o;return n(this,void 0,void 0,(function*(){let n=yield this.dataSource.selectRequest(e),l={},c=n.selected;return 0==this.config.serverFiltering&&(c=a.Filtering.filterList(c,e.filters)),0==this.config.serverSorting&&(c=a.Sorting.sortList(c,[],e.orders)),this.applyData(e,c),this.ensureMap(c,!0),i.Convert.isValue(null===(t=this.config.tree)||void 0===t?void 0:t.parent)&&i.Convert.isValue(null===(r=this.config.tree)||void 0===r?void 0:r.master)?l=this.config.lazyLoading?u.clientFindData(this.clientMap,this.config.tree,this.keyMaker,e,this.config.serverPaging,this.dataSource):u.clientFindTree(this.clientMap,this.config.tree,this.keyMaker,e.parentKey,void 0,this.dataSource):i.Convert.isValue(null===(o=this.config.tree)||void 0===o?void 0:o.level)&&(l=u.clientLevelTree(c,this.config.tree,this.keyMaker,e.parentKey,this.dataSource)),0==this.config.serverPaging&&this.makeTotal(l.selected),s.Log.debug((()=>({f:"clientLoad",pageNo:e.pageNo,lenth:l.selected.length}))),l}))}loaded(e,t,r){let n=[],o=e.selected;if(this.config.serverPaging)n=this.serverPaging(e,t,r);else if(i.Convert.isNull(r)?this.nodeCount=e.selected.length:r.nodeCount=e.selected.length,i.Convert.isValue(r)){if(0==r.nodes.length)for(let e of o)r.addNode(e);n=r.nodes}else{for(let e of o)e.index=this.nodes.length,e.level=0,this.nodes.push(e);n=this.nodes}return this.config.lazyLoading&&i.Convert.isValue(r)&&this.makeTotalNode(r),n}static clientFindData(e,t,r,n,s,a){var l,u,c;if(i.Convert.isEmpty(null==t?void 0:t.master)||i.Convert.isEmpty(null==t?void 0:t.parent))throw"Can not build tree.";const h={selected:[]};let d=e.get(n.parentKey);h.total=null!==(l=null==d?void 0:d.length)&&void 0!==l?l:0;let f=0;s&&i.Convert.isValue(n.pageSize)&&(f=n.pageNo*n.pageSize,d=[].concat(d).splice(f,n.pageSize));for(const n in d){const s=d[n],l=new o.TreeNode(void 0,s,r,i.Convert.asNumber(n),t,a);l.index=f++;const p=this.getTreeData(l.data,t.master);e.has(p)&&(l.nodeCount=null!==(c=null===(u=e.get(p))||void 0===u?void 0:u.length)&&void 0!==c?c:0,l.isLeaf=0==l.nodeCount),h.selected.push(l)}return h}static calcOpen(e,t){var r;const n=null==t?void 0:t.open,o=e.data;switch(typeof n){case"number":return n>e.level;case"string":return null!==(r=null==o?void 0:o.hasOwnProperty(n))&&void 0!==r&&r&&i.Convert.asBool(o[n]);case"function":return n(o,e);default:return!1}}static clientFindTree(e,t,r,n,s,a){var l;const c={selected:[]};if(0==e.has(n))return c;let h=[],d=e.get(n);const f=t.master,p=d.length;if(i.Convert.isValue(s)){for(const e in d){const n=d[e],l=new o.TreeNode(s,n,r,i.Convert.asNumber(e),t,a);s.addNode(l),l.isOpen=this.calcOpen(l,t)}s.nodeCount=s.nodes.length,h=s.nodes}else{let e=0;for(const n in d){const l=d[n],u=new o.TreeNode(s,l,r,i.Convert.asNumber(n),t,a);u.level=0,u.isOpen=this.calcOpen(u,t),u.index=e,h.push(u),e++}}for(const n of h)u.clientFindTree(e,t,r,this.getTreeData(n.data,f),n,a),n.isLeaf=0==(null!==(l=n.nodeCount)&&void 0!==l?l:n.nodeCount=0);return c.selected=h,c.total=p,c}static clientLevelTree(e,t,r,n,s){const a=[];let l,u,c,h;for(const n in e){const d=e[n],f=i.Convert.asNumber(n),p=this.getTreeData(d.data,t.level),m=i.Convert.asInt(p);if(m==c||i.Convert.isNull(l))c=m,l=new o.TreeNode(void 0,d,r,f,t,s),a.push(l),l.level=m-c;else if(h==m){const e=new o.TreeNode(l.parent,d,r,f,t,s);i.Convert.isValue(l.parent)?l.parent.addNode(e):a.push(e),l=e}else if(h<m){const e=new o.TreeNode(l,d,r,f,t,s);l.addNode(e),l=e}else if(h>m){for(let e=m;e<=h&&(l=l.parent,!i.Convert.isNull(l));e++);const e=new o.TreeNode(l,d,r,f,t,s);l.addNode(e),l=e}h=m,u=l}i.Arrays.bfsAction(a,(e=>(e.nodeCount=e.nodes.length,e.isLeaf=0==e.nodeCount,e.isLeaf?[]:e.nodes)));return{total:a.length,selected:a}}static getTreeData(e,t){if(!i.Convert.isNull(e))return"function"==typeof t?t(e):e[t]}static setTreeData(e,t,r){if(!i.Convert.isNull(e))return"function"==typeof t?t(e,r):e[t]=r}makeTotal(e){let t=[];for(const r of e)t.push(r.data),i.Convert.isValue(this.config.tree.aggregates)&&(t=t.concat(this.makeTotalNode(r)));i.Convert.isValue(this.config.aggregates)&&(this.config.aggregates=a.Aggregate.aggregates(t,this.config.aggregates,!0))}calcAggregates(){this.dataSource.updateIndex>0||this.makeTotal(this.nodes)}makeTotalNode(e){var t,r;let n=[];if(i.Convert.isNull(e)||i.Convert.isEmpty(e.nodes))return n;for(const t of e.nodes)n.push(t.data),0!=t.nodeCount&&(n=n.concat(this.makeTotalNode(t)));return i.Convert.isValue(null===(t=this.config.tree)||void 0===t?void 0:t.aggregates)&&this.config.tree.aggregates.length>0&&(i.Convert.isNull(e.footer)?e.footer=new o.FooterNode(e,a.BaseLoader.symbolKeyMaker,a.Aggregate.aggregates(n,this.config.tree.aggregates,!0)):e.footer.aggregates=a.Aggregate.aggregates(n,this.config.tree.aggregates,!0)),(null===(r=this.config.tree)||void 0===r?void 0:r.aggregateFull)?n:[]}insertNode(e,t,r,n,s=!1){if(s)return this.removeNode(e,t,r,n);if(0==this.dataSource.insertMap.has(r.key))return t;i.Convert.isNull(e)&&(e=null==t?void 0:t.parent);const u=new o.TreeNode(null!=e?e:null==t?void 0:t.parent,r,a.BaseLoader.symbolKeyMaker,null==t?void 0:t.index,this.config.tree,this.dataSource),c=n==l.InsertTo.Last||i.Convert.isNull(t)?e.nodes.length:n==l.InsertTo.First||i.Convert.isNull(t)?0:t.index+(n==l.InsertTo.After?1:0);return e.addNode(u,c),u}removeNode(e,t,r,n,s=!1){if(s)return this.insertNode(e,t,r,n);if(this.dataSource.deleteMap.has(r.key))return t;const a=t,l=t.index;return i.Convert.isNull(t.parent)?(this.nodes.splice(l,1),this.nodeCount-=1,o.ParentNode.adjustIndex(this.nodes,l)):(t.parent.removeNode(a),a.parent=t.parent),a}makeAllItemsData(e){let t=[];for(const r of e)t.push(r.data),t=t.concat(this.makeAllItemsData(r.nodes));return t}getAllItems(){return this.makeAllItemsData(this.nodes)}moveToNode(e,t,r){const n=this.dataSource.orderMap;if(i.Convert.isNull(e.parent)&&i.Convert.isNull(t.parent))a.BaseLoader.moveToList(this.nodes,e,t,r,n);else if(i.Convert.isValue(e.parent)&&i.Convert.isValue(t.parent))null==e||e.moveTo(t,r,n);else{let n=e.index,s=t.index;i.Convert.isNull(e.parent)?(this.nodes.splice(n,1),o.ParentNode.adjustIndex(this.nodes,n),this.nodeCount-=1,t.parent.addNode(e,s)):i.Convert.isNull(t.parent)&&(e.parent.removeNode(e),s+=r?0:1,this.nodes.splice(s,0,e),e.level=0,o.ParentNode.adjustIndex(this.nodes,s),this.nodeCount+=1)}this.calcAggregates(),this.dataSource.setBoxes(void 0,this.nodes.map((e=>e.box)))}}t.TreeLoader=u},1290:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Validator=void 0;t.Validator=class{static validateArg(e,t){var r;if((null!==(r=null==e?void 0:e.length)&&void 0!==r?r:0)!=t)throw`parameter must have ${t} items`}}},510:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataView=void 0;const n=r(1880),i=r(235),o=r(109);class s extends i.Publisher{get dataSource(){return this.publisher instanceof o.DataSource?this.publisher:void 0}doCommand(e,t){return!!super.doCommand(e,t)&&(t.command,n.Commands.Loaded,!0)}}t.DataView=s},4462:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CsvImport=void 0,r(6610);const i=r(6522),o=r(1374),s=r(3988);var a=r(6610);class l extends i.ExcelImport{constructor(e,t){super(e,t)}readFile(e,t){return n(this,void 0,void 0,(function*(){a.parse(e,{delimiter:this.config.delimiter,error:function(e,r,n,i){t()},complete:e=>{var r,n,i,a,l,u;const c=e.data,h=(null!==(i=null===(n=null===(r=this.config)||void 0===r?void 0:r.row)||void 0===n?void 0:n.from)&&void 0!==i?i:1)-1,d=null!==(u=null===(l=null===(a=this.config)||void 0===a?void 0:a.row)||void 0===l?void 0:l.to)&&void 0!==u?u:e.data.length-1,f=this.columns,p=f.length,m=c.slice(h,d).map((e=>{var t,r,n,i,o,s;const a=(null!==(n=null===(r=null===(t=this.config)||void 0===t?void 0:t.col)||void 0===r?void 0:r.from)&&void 0!==n?n:1)-1,l=null!==(s=null===(o=null===(i=this.config)||void 0===i?void 0:i.col)||void 0===o?void 0:o.to)&&void 0!==s?s:void 0;e=e.slice(a,l);const u={};for(let t=0;t<p&&!(t>=e.length);t++){u[f[t].field]=e[t]}return{key:void 0,value:u}}));o.Log.debug(["Import Excel",m]),s.SBGrid3.fireCommand(this.grid,{command:"import",data:m}),t()}})}))}}t.CsvImport=l},7270:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ExcelExport=void 0,r(6663);const i=r(6328),o=r(5643),s=r(1919),a=r(7134),l=r(1623),u=r(1700),c=r(3396),h=r(5548),d=r(4772),f=r(1374),p=r(7074);var m=r(6663);class g extends h.GridExport{get workSheet(){var e;return null!==(e=this._workSheet)&&void 0!==e?e:this._workSheet=this.getWorksheet(this._workBook,"sheet1")}getWorksheet(e,t){const r=e.getWorksheet(t);return r.properties.outlineProperties={summaryBelow:!1,summaryRight:!1},r}get config(){return this._config}constructor(e,t){var r,n;super(e),this.defaultRowStyleFunc=e=>{let t,r,n;return(e.has(p.SbCss.header)||e.has(p.SbCss.footer))&&(t=null!=t?t:{},t.bgColor="fffcfcfc",r=null!=r?r:{},r.color="ffe5e5e5",r.style="thin"),e.has(p.SbCss.area)&&e.has(p.SbCss.thead)&&(t=null!=t?t:{},t.bgColor="fff8f8f8",r=null!=r?r:{},r.color="ffe5e5e5",r.style="thin",n=null!=n?n:{},n.bold=!0),e.has(p.SbCss.alternate)&&(t=null!=t?t:{},t.bgColor="fffcfcfc"),e.has("sbgrid-level-0")&&(t=null!=t?t:{},t.bgColor="ffF0F8FF"),e.has("sbgrid-level-1")&&(t=null!=t?t:{},t.bgColor="FFF5F5DC"),e.has(p.SbCss.sticky)&&(t=null!=t?t:{},t.bgColor="FFF9FBFF"),{fill:t,border:r,font:n}},this.defaultCellStyleFunc=e=>{let t,r;return e.has("sbgrid-level-0")&&(t=null!=t?t:{},t.bgColor="ffF0F8FF"),e.has("sbgrid-level-1")&&(t=null!=t?t:{},t.bgColor="FFF5F5DC"),e.has(p.SbCss.left)?r=this.getAlign(p.SbCss.left):e.has(p.SbCss.right)?r=this.getAlign(p.SbCss.right):e.has(p.SbCss.center)&&(r=this.getAlign(p.SbCss.center)),{fill:t,border:{color:"ffe5e5e5",style:"thin"},font:void 0,alignment:null!=r?r:{vertical:"middle",horizontal:"center"}}},this._config=this.parseExcelExportConfig(null!=t?t:null===(r=this.grid.config)||void 0===r?void 0:r.excelExport),this.fileName=null===(n=this.config)||void 0===n?void 0:n.fileName,this._workBook=new m.Workbook,this._workBook.addWorksheet("sheet1")}exportCancelled(e){f.Log.warn((()=>["excel export canceled",e]));const t=this.config.cancelFunc;c.Convert.isValue(t)&&"function"==typeof t&&t()}parseExcelExportConfig(e){const t={fileName:c.Convert.default(null==e?void 0:e.fileName,"grid.xlsx"),cellStyle:c.Convert.default(null==e?void 0:e.cellStyle,void 0,(()=>this.parseCellStyle(null==e?void 0:e.cellStyle))),rowStyle:c.Convert.default(null==e?void 0:e.rowStyle,void 0,(()=>this.parseCellStyle(null==e?void 0:e.rowStyle))),cancelFunc:c.Convert.default(null==e?void 0:e.cancelFunc,void 0),defaultStyle:!0,includeFormula:c.Convert.default(null==e?void 0:e.includeFormula,!1),includeHeader:c.Convert.default(null==e?void 0:e.includeHeader,!1),includeFooter:c.Convert.default(null==e?void 0:e.includeFooter,!1)};return t.keepMerge=c.Convert.default(null==e?void 0:e.keepMerge,!t.includeFormula),t}parseCellStyle(e,t){return"function"==typeof e?e:!1===e?void 0:!0===e||{font:c.Convert.default(null==e?void 0:e.font,null==t?void 0:t.font,(()=>this.parseFont(null==e?void 0:e.font,null==t?void 0:t.font))),border:c.Convert.default(null==e?void 0:e.border,null==t?void 0:t.border,(()=>this.parseBorder(null==e?void 0:e.border,null==t?void 0:t.border))),fill:c.Convert.default(null==e?void 0:e.fill,null==t?void 0:t.fill,(e=>this.parseFill(e,null==t?void 0:t.fill))),alignment:c.Convert.default(null==e?void 0:e.alignment,null==t?void 0:t.alignment,(e=>this.parseAlign(e,null==t?void 0:t.alignment)))}}convertStyle(e){return{font:this.convertFont(null==e?void 0:e.font),fill:this.convertFill(null==e?void 0:e.fill),border:this.convertBorder(null==e?void 0:e.border),alignment:this.convertAlignment(null==e?void 0:e.alignment)}}convertAlignment(e){if(!c.Convert.isEmpty(e))return{vertical:c.Convert.default(null==e?void 0:e.vertical,void 0),horizontal:c.Convert.default(null==e?void 0:e.horizontal,void 0)}}convertFont(e){if(!c.Convert.isEmpty(e))return{name:c.Convert.default(null==e?void 0:e.name,void 0),size:c.Convert.default(null==e?void 0:e.size,void 0),color:c.Convert.isNull(e.color)?void 0:{argb:e.color},bold:c.Convert.default(e.bold,void 0)}}convertFill(e){if(!c.Convert.isEmpty(e))return{type:"pattern",pattern:"solid",fgColor:c.Convert.isNull(e.bgColor)?void 0:{argb:e.bgColor}}}convertBorder(e){if(!c.Convert.isEmpty(e))return{top:{color:{argb:e.color},style:e.style},bottom:{color:{argb:e.color},style:e.style},right:{color:{argb:e.color},style:e.style},left:{color:{argb:e.color},style:e.style}}}exportCaption(e,t,r){return n(this,void 0,void 0,(function*(){this.makeColumn(e);const n=this.getRowStyle((()=>[p.SbCss.area,p.SbCss.thead].join(" ")),void 0,!0===this.config.rowStyle?()=>this.makeElement(!1,d.PanelType.Caption):void 0);for(const i of e.rows){for(const e of i.cells){if(c.Convert.isNull(e))continue;const i=e.column,o=e.col+1,s=i instanceof u.GroupColumn?"":e.column.caption;this.writeValue(o,t,s),e.rowSpan>1&&this.workSheet.mergeCells(t,o,t+e.rowSpan-1,o),e.colSpan>1&&this.workSheet.mergeCells(t,o,t,o+e.colSpan-1);const a=this.getStyle(r,e,void 0,n,{isCol:!0,panelType:d.PanelType.Caption});this.applyStyle(a,t,o)}this.workSheet.getRow(t).getCell("category").value="cagegory",t++}return t}))}applyStyle(e,t,r){if(c.Convert.isNull(r)){const r=this.workSheet.getRow(t);c.Convert.isValue(null==e?void 0:e.font)&&(r.font=null==e?void 0:e.font),c.Convert.isValue(null==e?void 0:e.fill)&&(r.fill=null==e?void 0:e.fill),c.Convert.isValue(null==e?void 0:e.border)&&(r.border=null==e?void 0:e.border)}else{const n=this.workSheet.getRow(t).getCell(r);c.Convert.isValue(null==e?void 0:e.font)&&(n.font=null==e?void 0:e.font),c.Convert.isValue(null==e?void 0:e.fill)&&(n.fill=null==e?void 0:e.fill),c.Convert.isValue(null==e?void 0:e.border)&&(n.border=null==e?void 0:e.border),c.Convert.isValue(null==e?void 0:e.alignment)&&(n.alignment=null==e?void 0:e.alignment)}}applyMergeStyle(e,t,r,n,i){const o=t+n,s=r+i;for(let n=t;n<o;n++)for(let t=r;t<s;t++)this.applyStyle(e,n,t)}getStyle(e,t,r,n,i){const o=this.config.cellStyle,s=e(t.column,t,r);let a;if(!0===o)a=this.autoStyle((()=>this.getElementStyle(s,t.column,(()=>this.makeElement(i.isCol,i.panelType)))),n);else if(c.Convert.isNull(o)||"function"==typeof o){const e=new Set(s.split(" "));a=this.manualStyle((()=>"function"==typeof o?o(e):void 0),(()=>this.defaultCellStyleFunc(e)),n)}return this.convertStyle(a)}manualStyle(e,t,r){let n=t();const i=this.parseCellStyle(n,r);return c.Convert.isNull(typeof this.config.cellStyle)?i:this.parseCellStyle(e(),i)}autoStyle(e,t){const r=e();return this.parseCellStyle(r,t)}getRowStyle(e,t,r){var n;const i=this.config.rowStyle,o=c.Convert.isValue(e)?e(t):void 0,s=new Set(null==o?void 0:o.split(" ")),a="function"==typeof i?i(s):!0===i?this.getElementStyle(o,t,r):void 0,l=(null===(n=this.config)||void 0===n?void 0:n.defaultStyle)?this.defaultRowStyleFunc(s):void 0;return this.parseCellStyle(a,l)}getElementStyle(e,t,r){const n=this.grid.container.find(`.${p.SbCss.panel}.${p.SbCss.hidden}`);if((null==n?void 0:n.length)<1)return;const i=r();if(c.Convert.isValue(i)){const t=null==e?void 0:e.split(" ");i.addClass(t);const r=window.getComputedStyle(i[0]);return{font:{name:r.fontFamily.replace(/\"/g,""),color:this.convertArgb(r.color),size:parseInt(r.fontSize),bold:this.isBold(r.fontWeight)},fill:"00000000"===this.convertArgb(r.backgroundColor)?void 0:{bgColor:this.convertArgb(r.backgroundColor)},border:"none"===r.outlineStyle?void 0:{color:this.convertArgb(r.outlineColor),style:this.getBorderStyle(r.outlineStyle)},alignment:this.convertCellAlign(r.textAlign)}}}makeElement(e,t){const r=this.grid.container.find(`.${p.SbCss.panel}.${p.SbCss.hidden}`),n=c.JqUtils.adjustElement(r,`.${p.SbCss.scroll_body}`,`<div class='${p.SbCss.scroll_body}'></div>`);let i;switch(t){case d.PanelType.Caption:{const t=c.JqUtils.adjustElement(n,`>.${p.SbCss.panel}.${p.SbCss.caption}`,`<div class='${p.SbCss.panel} ${p.SbCss.caption}'></div>`),r=c.JqUtils.adjustElement(t,`>div.${p.SbCss.area}.${p.SbCss.thead}`,`<div class = '${p.SbCss.area} ${p.SbCss.thead}'></div>`);if(!e)return r;const o=c.JqUtils.adjustElement(r,`>.${p.SbCss.part}.${p.SbCss.tbody}`,`<div class='${p.SbCss.part} ${p.SbCss.tbody}'></div>`);i=c.JqUtils.adjustElement(o,`>.${p.SbCss.row}`,`<div class='${p.SbCss.row}'></div>`);break}case d.PanelType.Header:{const t=c.JqUtils.adjustElement(n,`>div.${p.SbCss.panel}.${p.SbCss.header}`,`<div class='${p.SbCss.panel} ${p.SbCss.header}'></div>`);if(!e)return t;const r=c.JqUtils.adjustElement(t,`>.${p.SbCss.area}.${p.SbCss.thead}`,`<div class='${p.SbCss.area} ${p.SbCss.thead}'></div>`);i=c.JqUtils.adjustElement(r,`>.${p.SbCss.row}`,`<div class='${p.SbCss.row}'></div>`);break}case d.PanelType.Body:{const e=c.JqUtils.adjustElement(n,`>.${p.SbCss.panel}.${p.SbCss.body}`,`<div class='${p.SbCss.panel} ${p.SbCss.body}'></div>`);i=c.JqUtils.adjustElement(e,`>div.${p.SbCss.row}`,`<div class='${p.SbCss.row}'></div>`);const t=[...i[0].classList].filter((e=>!1===[p.SbCss.row].includes(e.trim())));i.removeClass(t);break}case d.PanelType.Footer:{const t=c.JqUtils.adjustElement(n,`>.${p.SbCss.panel}.${p.SbCss.footer}`,`<div class='${p.SbCss.panel} ${p.SbCss.footer}'></div>`);if(!e)return t;const r=c.JqUtils.adjustElement(t,`>.${p.SbCss.area}.${p.SbCss.tfoot}`,`<div class='${p.SbCss.area} ${p.SbCss.tfoot}'></div>`);i=c.JqUtils.adjustElement(r,`>.${p.SbCss.row}`,`<div class='${p.SbCss.row}'></div>`);break}}if(e){const e=c.JqUtils.adjustElement(i,`>span.${p.SbCss.col}`,`<span class='${p.SbCss.col}'></span>`),t=[...e[0].classList].filter((e=>!1===[p.SbCss.col].includes(e.trim())));return e.removeClass(t),e}return i}convertCellAlign(e){switch(e){case"start":case"left":return{vertical:"middle",horizontal:"left"};case"end":case"right":return{vertical:"middle",horizontal:"right"};case"center":return{vertical:"middle",horizontal:"center"};case"justify":return{vertical:"justify",horizontal:"justify"}}}convertArgb(e){let t=e.substring(e.indexOf("(")+1,e.indexOf(")")).split(",");return t=t.length>3?t.slice(3,t.length).concat(t.slice(0,3)):["255"].concat(t),t.map((e=>parseInt(e).toString(16).length>1?parseInt(e).toString(16):"0"+parseInt(e).toString(16))).join("")}isBold(e){return parseInt(e)>400}getBorderStyle(e){return"thin"}makeColumn(e){var t;let r=(null===(t=s.GridMatrix.toMatrix(e))||void 0===t?void 0:t.matrix)[0].map(((e,t)=>(null==e?void 0:e.column.type)===a.ColumnTypes.Frozen?{key:t+"",width:0}:{key:t+"",width:e.width/8}));r=r.concat({key:"category",width:0}),this.workSheet.columns=r}exportHeader(e,t,r){var i;return n(this,void 0,void 0,(function*(){if(c.Convert.isNull(this.workSheet.columns)&&this.makeColumn(e),c.Convert.isEmpty(e))return t;if(!1===this.config.includeHeader)return t;const n=t,o=this.getRowStyle((()=>[p.SbCss.panel,p.SbCss.header].join(" ")),void 0,(()=>this.makeElement(!1,d.PanelType.Header)));for(const n of e.rows){for(const e in n.cells){const s=n.cells[e],a=(s.column,this.makeTotalData(s.column)),l=this.makeHeaders(s.column),u=null===(i=l[s.row])||void 0===i?void 0:i.render(a);this.writeValue(s.col+1,t,u);const c=s.col+1;this.merge(t,c,s.rowSpan,s.colSpan);const h=this.getStyle(r,s,void 0,o,{isCol:!0,panelType:d.PanelType.Header});this.applyStyle(h,t,c)}this.workSheet.getRow(t).getCell("category").value="",t++}if(!0===this.config.includeFormula){const r=this.getHeaderRange(t-1);this.exportAggregatesFormula(e,r,n,void 0,!0)}return t}))}getAlign(e){switch(e){case p.SbCss.right:return this.convertCellAlign("right");case p.SbCss.left:return this.convertCellAlign("left");case p.SbCss.center:return this.convertCellAlign("center")}}makeHeaders(e){return e.headers}makeFooters(e){return e.footers}exportFooter(e,t,r){var i;return n(this,void 0,void 0,(function*(){if(!1===this.config.includeFooter)return t;if(c.Convert.isEmpty(e))return t;const n=t,o=this.getRowStyle((()=>[p.SbCss.panel,p.SbCss.footer].join(" ")),void 0,(()=>this.makeElement(!1,d.PanelType.Footer)));for(const n of e.rows){for(const e in n.cells){const s=n.cells[e],a=this.makeTotalData(s.column),l=this.makeFooters(s.column),u=null===(i=l[s.row])||void 0===i?void 0:i.render(a),c=s.col+1;this.writeValue(c,t,u),this.merge(t,c,s.rowSpan,s.colSpan);let h=this.getStyle(r,s,void 0,o,{isCol:!0,panelType:d.PanelType.Footer});this.applyStyle(h,t,c)}this.workSheet.getRow(t).getCell("category").value="",t++}if(!0===this.config.includeFormula){const t=this.getFooterRange(n);this.exportAggregatesFormula(e,t,n,void 0,!1)}return t}))}exportRow(e,t,r,i,o,s){return n(this,void 0,void 0,(function*(){const n=this.getRowStyle(i,o,(()=>this.makeElement(!1,d.PanelType.Body))),a=new Map,l=t;for(const i of e.rows){let e=i.cells;const l=this.grid.mergeColumn||this.grid.mergeRow?this.grid.viewport.makeMerge(e,o,s):e;for(const e of l){if(c.Convert.isNull(e))continue;const i=e.col+1;if(e.merged&&this.config.keepMerge)continue;if(e.column instanceof u.GroupColumn==0){const r=e.column.getValue(o,e);this.writeValue(i,t,r,null==e?void 0:e.column),!0===this.config.keepMerge&&this.merge(t,i,e.mergeRow,e.mergeCol),this.merge(t,i,e.rowSpan,e.colSpan),0==a.has(e.column.field)&&a.set(e.column.field,{col:i,row:t})}const s=this.getStyle(r,e,o,n,{isCol:!0,panelType:d.PanelType.Body});this.applyStyle(s,t,i)}const h=this.workSheet.getRow(t);h.getCell("category").value=1,o.level>0&&(h.outlineLevel=o.level),t+=1}return!0===this.config.includeFormula&&this.exportRow_calc(e,a,l),t}))}getHeaderRange(e,t){let r=this.calcRows(t);if(0==r)return;return{from:e+1,to:e+r}}getFooterRange(e,t){return{from:e-this.calcRows(null==t?void 0:t.parent,t),to:e-1}}calcRows(e,t){var r,n,i,s;let a=0;if(c.Convert.isNull(e)){let e,t=0,i=this.rowLayout;for(;c.Convert.isValue(e=this.grid.rows[t]);)a+=null!==(n=null===(r=this.getLayout(i,e))||void 0===r?void 0:r.layout.rows.length)&&void 0!==n?n:1,t++}else if(e.node instanceof o.ParentNode){const r=e.level;let n,l=e.rowIndex+1,u=this.rowLayout;for(;c.Convert.isValue(n=this.grid.rows[l])&&!(n.level<=r)&&n!=t&&!(n.node instanceof o.FooterNode&&n.parent==e);)a+=null!==(s=null===(i=this.getLayout(u,n))||void 0===i?void 0:i.layout.rows.length)&&void 0!==s?s:1,l++}return a}exportRow_calc(e,t,r){var n;for(const i of e.rows){let e=i.cells;for(const i of e){if(c.Convert.isNull(i))continue;if(i.merged)continue;if(i.column instanceof u.GroupColumn)continue;const e=i.col+1,o=null===(n=i.column)||void 0===n?void 0:n.config.calc;if(c.Convert.isNull(o)||"function"==typeof(null==o?void 0:o.rows))continue;let s;const a=()=>("string"==typeof o.require?[o.require]:o.require).map((e=>t.get(e)));if(c.Convert.isValue(null==o?void 0:o.eval)){if("string"!=typeof o.eval)continue;const e=a();if(c.Convert.isEmpty(e))continue;s=this.makeFormula(o.eval,e,o)}else if(c.Convert.isValue(null==o?void 0:o.rows)&&"function"!=typeof(null==o?void 0:o.rows)){const e=a();s=this.calcRowsFormula(o,e,r)}const l=this.calcTemplate(i.column.cellTemplate,s,o.field);this.writeFormula(e,r,l)}r+=1}return r}calcRowsFormula(e,t,r){const n=e.rows;if("function"!=typeof n&&n.func==i.RankFunctions.Rank)return this.rank(e.rows,c.Convert.parseEnum(i.CalculationRange,e.range),t,r)}rank(e,t,r,n){var o,s,a;let l;t==i.CalculationRange.TopLevel?l=null!==(o=this.totalRange)&&void 0!==o?o:this.totalRange={from:n,to:n+this.calcRows()}:t==i.CalculationRange.LastLevel&&(l=null!==(a=null!==(s=this.headerRange)&&void 0!==s?s:this.totalRange)&&void 0!==a?a:this.totalRange={from:n,to:n+this.calcRows()});const u=e.dir==i.SortDir.Desc?">":"<";if(c.Convert.isValue(l))return`_xlfn.COUNTIFS(${this.getRange({col:r[0].col,startRow:l.from,endRow:l.to})}\n            ,"${u}"&${this.getSeperateRange(r)},${this.categoryRange(l.from,l.to)})+1`}exportAggregatesFormula(e,t,r,n,i){for(const o in e.rows){const s=e.rows[o];for(const o in s.cells){const a=s.cells[o];a.col;if(a.column instanceof u.GroupColumn)continue;const l=this.getTemplate(n,a.column,i),h=this.getAggregates(n,a.column);if(c.Convert.isEmpty(l)||c.Convert.isNull(h))continue;const d=this.makeFormulaObj(e,h,t);if(c.Convert.isEmpty(d))continue;const f=this.makeString(d,l[a.row]);c.Convert.isValue(f)&&this.writeFormula(a.col+1,a.row+r,f)}}}getTemplate(e,t,r){return c.Convert.isNull(e)&&r?this.makeHeaders(t):c.Convert.isNull(e)&&!r?this.makeFooters(t):c.Convert.isValue(e)&&r?this.makeGroupHeaders(e,t):c.Convert.isValue(e)&&!r?this.makeGroupFooters(e,t):void 0}getAggregates(e,t){var r;if(c.Convert.isNull(e))return null===(r=t.config.total)||void 0===r?void 0:r.aggregates;{const e=t.groups;if(c.Convert.isEmpty(e))return null;return e[0].aggregates}}makeFormulaObj(e,t,r){const n={};return t.forEach((t=>{var o,s,a,l;const u="function"==typeof t.require?[t.require]:t.require,h=c.Convert.parseEnum(i.AggregateFunctions,null===(o=t.func)||void 0===o?void 0:o.toString());let d;if(u.length>1)d=this.makeMultiRangeAggregateFormula(t,r,e,n);else{const n=null===(s=this.findCoordinate(u[0],e))||void 0===s?void 0:s.col;d=this.makeAggregateFormula(n,h,r,t.params)}if(c.Convert.isValue(d)){if(c.Convert.isValue(t.payload)){const n=null===(a=this.findCoordinate(u[0],e))||void 0===a?void 0:a.col;d=this.payload(null===(l=this.findCoordinate(t.payload,e))||void 0===l?void 0:l.col,d,n,r)}const i=this.findCell(u[0],e);c.Convert.isValue(i)&&(d=this.formatFormula(null==i?void 0:i.column,h,d)),n[t.field]=d,c.Convert.isValue(h)&&!Object.keys(n).includes(h)&&(n[h]=d)}})),n}formatFormula(e,t,r){var n;let i=null===(n=null==e?void 0:e.config)||void 0===n?void 0:n.format;const o=this.getDataType(e);return c.Convert.isValue(i)&&"string"==typeof i||o==c.DataType.Date?(i=o==c.DataType.Date&&c.Convert.isEmpty(i)?"yyyy-mm-dd":i,this.textFormatFormula(t,r,i.toString())):r}textFormatFormula(e,t,r){if(c.Convert.isNull(r))return t;switch(r=`"${r}"`,e){case i.AggregateFunctions.Average:case i.AggregateFunctions.Avg:case i.AggregateFunctions.Max:case i.AggregateFunctions.Min:case i.AggregateFunctions.Sum:t=`IF(${t}>0,TEXT(${t},${r}),"")`}return t}payload(e,t,r,n){if(c.Convert.isNull(e))return t;return`_xlfn.INDEX(${this.getRange({col:e+1,startRow:n.from,endRow:n.to})},${`MATCH(${t},${this.getRange({col:r+1,startRow:n.from,endRow:n.to})},0)`})`}makeString(e,t){if(c.Convert.isNull(t))return;if("none"==t.field)return;let r=t.originalTemplate;c.Convert.isValue(null==t?void 0:t.template)&&(r=this.template(e,t.originalTemplate));let n=new v({prefix:t.prefix,suffix:t.suffix,field:t.field,format:t.format,cssClass:t.cssClass,template:r,dataType:t.dataType}).render(e);return n.includes("&quot;")&&(n=n.replace(/&quot;/g,'"')),n.includes("&gt;")&&(n=n.replace(/&gt;/g,">")),n}template(e,t){let r="",n=!1,i="",o=0;for(let e=0;e<t.length;e++){const s=t[e];if(i+=s,"{"==s){if(!n){n=!0;continue}if(n){const n=t.substring(o,e-1);c.Convert.isValue(n)&&(r+=this.joinQuotation(n)),o=e-1;continue}}else if("}"==s){if(!n){n=!0;continue}r+=t.substring(o,e+1),o=e+1}n&&r.length>0&&o<t.length&&(r+="&"),n=!1}return o<t.length&&(r+=this.joinQuotation(t.substring(o,t.length))),r}joinQuotation(e){return`"${e}"`}joinAndString(e,t){return`${e}&${t}`}calcTemplate(e,t,r){return t}exportTreeFooter(e,t,r,i,o){var s,a;return n(this,void 0,void 0,(function*(){const n=t,l=this.getRowStyle(i,o,(()=>this.makeElement(!1,d.PanelType.Body)));for(const n of e.rows){for(const e of n.cells){const n=this.makeTreeFooters(e.column),i=this.makeTreeData(o,e.column),u=null!==(a=null===(s=n[e.row])||void 0===s?void 0:s.render(i))&&void 0!==a?a:"",c=e.col+1;this.writeValue(c,t,u),this.merge(t,c,e.rowSpan,e.colSpan);const h=this.getStyle(r,e,o,l,{isCol:!0,panelType:d.PanelType.Body});this.applyStyle(h,t,c)}this.workSheet.getRow(t).getCell("category").value="",t+=1}const u=this.getFooterRange(n,o);return this.writeValue(1,t-1,u),t}))}exportGroupFooter(e,t,r,i,o){var s,a;return n(this,void 0,void 0,(function*(){const n=t,l=this.getRowStyle(i,o,(()=>this.makeElement(!1,d.PanelType.Body)));for(const n of e.rows){for(const e in n.cells){const i=n.cells[e],u=this.makeGroupFooters(o,i.column),h=this.makeGroupData(o,i.column),f=i.col+1;if(c.Convert.isValue(u)){const e=null!==(a=null===(s=u[i.row])||void 0===s?void 0:s.render(h))&&void 0!==a?a:"";this.writeValue(i.col+1,t,e),this.merge(t,f,i.rowSpan,i.colSpan)}let p=this.getStyle(r,i,o,l,{isCol:!0,panelType:d.PanelType.Body});this.applyMergeStyle(p,t,f,i.rowSpan,i.colSpan)}this.workSheet.getRow(t).outlineLevel=o.level,t+=1}if(!0===this.config.includeFormula){const t=this.getFooterRange(n,o);this.exportAggregatesFormula(e,t,n,o,!0)}return t}))}exportGroupHeader(e,t,r,i,s){var a,l,h;return n(this,void 0,void 0,(function*(){const n=this.getRowStyle(i,s,(()=>this.makeElement(!1,d.PanelType.Body)));if(s.node instanceof o.GroupNode){const i=s.node.igroup,f=t;for(const f of e.rows){for(const e of f.cells)if(!c.Convert.isNull(e))if(e.column instanceof u.GroupColumn){const o=e.col+1;if(i.field==e.column.field){const r=c.Convert.isValue(e.column.config.groupTitle)?e.column.getGroupTitle(s):null===(a=s.node)||void 0===a?void 0:a.groupKey;this.writeValue(o,t,r),this.merge(t,o,e.rowSpan,e.colSpan)}const l=this.getStyle(r,e,s,n,{isCol:!0,panelType:d.PanelType.Body});this.applyMergeStyle(l,t,o,e.rowSpan,e.colSpan)}else{if(s.items[0]instanceof o.GroupNode)continue;const i=this.makeGroupHeaders(s,e.column),a=this.makeGroupData(s,e.column),u=e.col+1;if(c.Convert.isValue(i)){const r=null!==(h=null===(l=i[e.row])||void 0===l?void 0:l.render(a))&&void 0!==h?h:"";this.writeValue(u,t,r),this.merge(t,u,e.rowSpan,e.colSpan)}let f=this.getStyle(r,e,s,n,{isCol:!0,panelType:d.PanelType.Body});this.applyMergeStyle(f,t,u,e.rowSpan,e.colSpan)}this.workSheet.getRow(t).outlineLevel=s.level,t+=1}!0===this.config.includeFormula&&(this.headerRange=this.getHeaderRange(t-1,s),this.exportAggregatesFormula(e,this.headerRange,f,s,!0))}return t}))}merge(e,t,r,n){r>1&&n>1?this.workSheet.mergeCells(e,t,e+r-1,t+n-1):r>1?this.workSheet.mergeCells(e,t,e+r-1,t):n>1&&this.workSheet.mergeCells(e,t,e,t+n-1)}writeValue(e,t,r,n){const i=this.workSheet.getRow(t).getCell(e);r=this.convertValue(this.getDataType(n),r),i.value=r,this.format(n,i)}format(e,t){var r;const n=null===(r=null==e?void 0:e.config)||void 0===r?void 0:r.format;c.Convert.isValue(n)&&"string"==typeof n&&(t.numFmt=n)}getDataType(e){var t,r,n;if(!c.Convert.isNull(e))return null!==(t=e.dataType)&&void 0!==t?t:null===(n=null===(r=this.grid.dataConfig.schema)||void 0===r?void 0:r.fields[e.field])||void 0===n?void 0:n.dataType}convertValue(e,t){return c.Convert.isValue(e)?c.Convert.convertType(t,e):t}writeFormula(e,t,r){const n=this.workSheet.getRow(t).getCell(e);n.value;n.value={formula:r,date1904:!0}}getAddress(e,t){var r,n;return null===(n=null===(r=this.workSheet.getRow(t))||void 0===r?void 0:r.getCell(e))||void 0===n?void 0:n.address}getSeperateRange(e){const t=[];for(const r of e)c.Convert.isNull(r)||t.push(this.getAddress(r.col,r.row));return t.join(",")}getRange(e){return this.getAddress(e.col,e.startRow)+":"+this.getAddress(e.col,e.endRow)}categoryRange(e,t){const r=this.workSheet.getColumn("category").number;return`${this.getAddress(r,e)}:${this.getAddress(r,t)},1`}categoryCellAddress(e){const t=this.workSheet.getColumn("category").number;return`${this.getAddress(t,e)}`}makeFormula(e,t,r){switch(e){case i.AggregateFunctions.Max:return`MAX(${this.getSeperateRange(t)})`;case i.AggregateFunctions.Min:return`MIN(${this.getSeperateRange(t)})`;case i.AggregateFunctions.Sum:return`SUM(${this.getSeperateRange(t)})`;case i.AggregateFunctions.Avg:case i.AggregateFunctions.Average:return`AVERAGE(${this.getSeperateRange(t)})`;case i.AggregateFunctions.Count:return`ROWS(${this.getSeperateRange(t)})`;case i.AggregateFunctions.Range:return`_xlfn.IFS(${this.ifsLogic(t,r,">=")})`;case i.AggregateFunctions.Switch:return`_xlfn.IFS(${this.ifsLogic(t,r,"=")})`}return""}ifsLogic(e,t,r){let n=t.params;if(n instanceof Map){const t=n,i=[...t.keys()].filter((e=>"default"!==e)).map((e=>parseFloat(e))).sort(((e,t)=>t-e)).map((n=>`${this.getSeperateRange(e)}${r}${n},"${t.get(n.toString())}"`));return i.push("TRUE"),i.push(`"${t.get("default")}"`),i}}makeAggregateFormula(e,t,r,n){let o,s={col:e+1,startRow:r.from,endRow:r.to};switch(t){case i.AggregateFunctions.Max:o=`_xlfn.MAXIFS(${this.getRange(s)},${this.categoryRange(s.startRow,s.endRow)})`;break;case i.AggregateFunctions.Min:o=`_xlfn.MINIFS(${this.getRange(s)},${this.categoryRange(s.startRow,s.endRow)})`;break;case i.AggregateFunctions.Count:o=`_xlfn.COUNTIFS(${this.getRange(s)},"${n[0]}",${this.categoryRange(s.startRow,s.endRow)})`;break;case i.AggregateFunctions.Avg:case i.AggregateFunctions.Average:o=`_xlfn.AVERAGEIFS(${this.getRange(s)},${this.categoryRange(s.startRow,s.endRow)})`;break;case i.AggregateFunctions.Total:o=`_xlfn.COUNTIFS(${this.categoryRange(s.startRow,s.endRow)})`;break;case i.AggregateFunctions.Sum:o=`_xlfn.SUMIFS(${this.getRange(s)},${this.categoryRange(s.startRow,s.endRow)})`;break;case i.AggregateFunctions.First:o=`${this.getSeperateRange([{col:s.col,row:s.startRow}])}`;break;case i.AggregateFunctions.Last:o=`${this.getSeperateRange([{col:s.col,row:s.endRow}])}`}return o}makeMultiRangeAggregateFormula(e,t,r,n){var o;const s=e.require,a=(i,o)=>o.map((o=>{var s;const a=null===(s=this.findCoordinate(o,r))||void 0===s?void 0:s.col;return c.Convert.isNull(a)?Object.keys(n).includes(o)?n[o]:void 0:this.makeAggregateFormula(a,i,t,e.params)}));switch(null!==(o=e.func)&&void 0!==o?o:e.eval){case i.AggregateFunctions.Sum:return`SUM(${a(i.AggregateFunctions.Sum,s)})`;case i.AggregateFunctions.Max:return`MAX(${a(i.AggregateFunctions.Max,s)})`;case i.AggregateFunctions.Min:return`MIN(${a(i.AggregateFunctions.Min,s)})`;case i.AggregateFunctions.Average:case i.AggregateFunctions.Avg:return`SUM(${a(i.AggregateFunctions.Sum,s)})/SUM(${a(i.AggregateFunctions.Total,s)})`;case i.AggregateFunctions.Total:return`SUM(${a(i.AggregateFunctions.Total,s)})`}}findCoordinate(e,t){let r;for(const n in t.rows)if(r=t.rows[n].cells.find((t=>{var r;return!((null==t?void 0:t.column)instanceof u.GroupColumn)&&(null===(r=null==t?void 0:t.column)||void 0===r?void 0:r.field)===e})),c.Convert.isValue(r))break;return{col:null==r?void 0:r.col,row:null==r?void 0:r.row}}findCell(e,t){let r;for(const n in t.rows)if(r=t.rows[n].cells.find((t=>{var r;return!((null==t?void 0:t.column)instanceof u.GroupColumn)&&(null===(r=null==t?void 0:t.column)||void 0===r?void 0:r.field)===e})),c.Convert.isValue(r))break;return r}static createWorkbook(){}canceled(){const e=this.config.cancelFunc;c.Convert.isValue(e)&&e()}writeFile(){return n(this,void 0,void 0,(function*(){f.Log.time("ExcelExport.write"),this._workBook.xlsx.writeBuffer({}).then((e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),r=window.URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download=this.fileName,n.click(),window.URL.revokeObjectURL(r),this.grid.container.find(`.${p.SbCss.hidden}.${p.SbCss.panel}`).empty(),f.Log.timeEnd("ExcelExport.write")}))}))}parseFont(e,t){var r,n,i,o;return{name:c.Convert.default(null==e?void 0:e.name,null!==(r=null==t?void 0:t.name)&&void 0!==r?r:void 0),color:c.Convert.default(null==e?void 0:e.color,null!==(n=null==t?void 0:t.color)&&void 0!==n?n:void 0),bold:c.Convert.default(null==e?void 0:e.bold,null!==(i=null==t?void 0:t.bold)&&void 0!==i?i:void 0),size:c.Convert.default(null==e?void 0:e.size,null!==(o=null==t?void 0:t.size)&&void 0!==o?o:void 0)}}parseBorder(e,t){var r,n;return{color:c.Convert.default(e.color,null!==(r=null==t?void 0:t.color)&&void 0!==r?r:void 0),style:c.Convert.default(e.style,null!==(n=null==t?void 0:t.style)&&void 0!==n?n:"thin")}}parseFill(e,t){var r;return{bgColor:c.Convert.default(e.bgColor,null!==(r=null==t?void 0:t.bgColor)&&void 0!==r?r:void 0)}}parseAlign(e,t){var r,n;return{vertical:c.Convert.default(e.vertical,null!==(r=null==t?void 0:t.vertical)&&void 0!==r?r:void 0),horizontal:c.Convert.default(e.horizontal,null!==(n=null==t?void 0:t.horizontal)&&void 0!==n?n:void 0)}}}t.ExcelExport=g;class v extends l.ColumnRender{renderText(e){let t=c.Convert.convertType(e[this.field],this.dataType);return t=c.Convert.formatValue(t,void 0,this.format),`${this.prefix?this.joinQuotation(this.prefix)+"&":""}${null!=t?t:""}${this.suffix?"&"+this.joinQuotation(this.suffix):""}`}joinQuotation(e){return`"${e}"`}}},6522:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ExcelImport=void 0,r(6663);var i=r(6663);const o=r(3988),s=r(1374),a=r(5997),l=r(3396);class u extends a.GridImport{constructor(e,t){super(e),l.Convert.isValue(t)&&(this.config=t)}get config(){var e,t;return null!==(e=this._config)&&void 0!==e?e:this._config=this.parseExcelImportConfig(null===(t=this.grid.config)||void 0===t?void 0:t.excelImport)}set config(e){this._config=this.parseExcelImportConfig(e)}readFile(e,t){var r,a,l,u,c,h;return n(this,void 0,void 0,(function*(){try{const t=new i.Workbook,n=yield e.arrayBuffer();yield t.xlsx.load(n);const d=t.worksheets[0],f=[],p=null!==(l=null===(a=null===(r=this.config)||void 0===r?void 0:r.row)||void 0===a?void 0:a.from)&&void 0!==l?l:0,m=(null!==(h=null===(c=null===(u=this.config)||void 0===u?void 0:u.row)||void 0===c?void 0:c.to)&&void 0!==h?h:d.rowCount)+1;for(let e=p;e<m;e++){const t=this.makeEditData(d.getRow(e));f.push(t)}s.Log.debug(["Import Excel",f]),o.SBGrid3.fireCommand(this.grid,{command:"import",data:f})}catch(e){}finally{t()}}))}makeEditData(e){var t,r,n,i,o,s;const a=this.columns,l={},u=e.cellCount,c=null!==(n=null===(r=null===(t=this.config)||void 0===t?void 0:t.col)||void 0===r?void 0:r.from)&&void 0!==n?n:1,h=null!==(s=null===(o=null===(i=this.config)||void 0===i?void 0:i.col)||void 0===o?void 0:o.to)&&void 0!==s?s:u;e.splice(1,c-1),e.splice(h-1,u-h);const d=a.length;for(let t=0;t<d&&!(t>=e.cellCount);t++){l[a[t].field]=e.getCell(t+1).text}return{key:void 0,value:l}}parseExcelImportConfig(e){var t,r,n,i;return{row:{from:l.Convert.default(null===(t=null==e?void 0:e.row)||void 0===t?void 0:t.from,1),to:l.Convert.default(null===(r=null==e?void 0:e.row)||void 0===r?void 0:r.to,void 0)},col:{from:l.Convert.default(null===(n=null==e?void 0:e.col)||void 0===n?void 0:n.from,1),to:l.Convert.default(null===(i=null==e?void 0:e.col)||void 0===i?void 0:i.to,void 0)},delimiter:l.Convert.default(null==e?void 0:e.delimiter,",")}}}t.ExcelImport=u},5548:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GridExport=void 0;const i=r(5643),o=r(1919),s=r(6231),a=r(7134),l=r(1623),u=r(1374),c=r(3396);t.GridExport=class{constructor(e){this._grid=e}get grid(){return this._grid}get view(){return this.grid.view}get cancelled(){var e,t;return null!==(t=null===(e=this._token)||void 0===e?void 0:e.cancelled)&&void 0!==t&&t}exportCancelled(e){}export(e){return n(this,void 0,void 0,(function*(){try{this.grid.showLoading(!0),this.grid.exporting=!0,this._token=e;let t=1;t=yield this.exportCaption(this.captionLayout,t,((e,t)=>this.grid.scrollPanel.captionPanel.makeColClass(e,t).colClass)),this.grid.hasHeader&&(t=yield this.exportHeader(this.headerLayout,t,((e,t)=>this.grid.scrollPanel.headerPanel.makeColClass(e,t).colClass))),t=yield this.exportBody(this.rowLayout,t,((e,t,r)=>this.grid.scrollPanel.bodyPanel.tbody.makeColClass(r,e,t).colClass),(e=>this.grid.scrollPanel.bodyPanel.tbody.makeRowClass(e).rowClass)),this.grid.hasFooter&&(t=yield this.exportFooter(this.footerLayout,t,((e,t)=>this.grid.scrollPanel.footerPanel.makeColClass(e,t).colClass))),yield this.writeFile()}catch(e){if(!this.cancelled)throw e;this.exportCancelled(e)}finally{this.grid.showLoading(!1),this.grid.exporting=!1}}))}writeFile(){return n(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}exportCaption(e,t,r){return n(this,void 0,void 0,(function*(){throw new Error("[exportCaption] Method not implemented.")}))}exportHeader(e,t,r){return n(this,void 0,void 0,(function*(){throw new Error("[exportHeader] Method not implemented.")}))}exportFooter(e,t,r){return n(this,void 0,void 0,(function*(){throw new Error("[exportFooter] Method not implemented.")}))}exportBody(e,t,r,o){return n(this,void 0,void 0,(function*(){let a,l=0;const h=[];try{for(u.Log.time("exportBody");a=this.view.getRow(l++);){if(this.cancelled)throw"export canceled";const e=yield a;if(c.Convert.isNull(e))break;e.node instanceof i.GroupNode&&!e.isOpen&&(yield this.grid.view.openRow(e.rowIndex)),h.push({rowItem:e})}u.Log.timeLog("exportBody","getRow after",h.length),(this.grid.config.mergeRow||this.grid.config.mergeColumn)&&s.Viewport.makeMergeRow(h,this.defaultLayout.rows[0].cells.map((e=>e.column))),u.Log.timeLog("exportBody","merge after"),yield c.Arrays.intervalAction(h,((i,s,a)=>n(this,void 0,void 0,(function*(){const n=i.rowItem,a=i.merge,l=this.getLayout(e,n);let u;if(u=l.isGroupHeader?this.exportGroupHeader(l.layout,t,r,o,n):l.isGroupFooter?this.exportGroupFooter(l.layout,t,r,o,n):l.isTreeFooter?this.exportTreeFooter(l.layout,t,r,o,n):this.exportRow(l.layout,t,r,o,n,a),this.cancelled)throw"export canceled";return t=yield u,(s+1)%1e3==0}))))}finally{u.Log.timeEnd("exportBody")}return t}))}exportRow(e,t,r,i,o,s){return n(this,void 0,void 0,(function*(){throw new Error("[exportRow] Method not implemented.")}))}exportTreeFooter(e,t,r,i,o){return n(this,void 0,void 0,(function*(){throw new Error("[exportTreeFooter] Method not implemented.")}))}exportGroupFooter(e,t,r,i,o){return n(this,void 0,void 0,(function*(){throw new Error("[exportGroupFooter] Method not implemented.")}))}exportGroupHeader(e,t,r,i,o){return n(this,void 0,void 0,(function*(){throw new Error("[exportGroupHeader] Method not implemented.")}))}writeValue(e,t,r){throw new Error("[writeValue] Method not implemented.")}canceled(){}get columns(){if(c.Convert.isEmpty(this._columns)){const e=[].concat(this._grid.headColumns.filter((e=>e.type!=a.ColumnTypes.Frozen))).concat(this._grid.scrollColumns).concat(this._grid.tailColumns.filter((e=>e.type!=a.ColumnTypes.Frozen)));this._columns=e.filter((e=>e.visible))}return this._columns}makeTreeFooters(e){var t;return l.ColumnRender.parseColumnTemplate(null===(t=e.config.tree)||void 0===t?void 0:t.footer)}makeTotalData(e){var t;return l.GridColumn.makeAggregateData(this.grid.dataConfig.aggregates,null===(t=e.config.total)||void 0===t?void 0:t.aggregates)}makeTreeData(e,t){var r;if(e.node instanceof i.FooterNode&&e.node.parent instanceof i.TreeNode&&c.Convert.isValue(null===(r=this.grid.dataConfig.tree)||void 0===r?void 0:r.aggregates)&&c.Convert.isValue(e.node.aggregates)){return l.GridColumn.makeTreeData(e.node.aggregates,t.config.tree,e.parent)}}makeGroupFooters(e,t){const r=e.node instanceof i.FooterNode?e.node.parent:e.node;if(r instanceof i.GroupNode){const e=r.igroup;return t.getGroup(e.field).footers}}makeGroupHeaders(e,t){const r=e.node instanceof i.FooterNode?e.node.parent:e.node;if(r instanceof i.GroupNode){const e=r.igroup;return t.getGroup(e.field).headers}}makeGroupData(e,t){var r;const n=e.node instanceof i.FooterNode?e.node.parent:e.node;if(n instanceof i.GroupNode){const i=n.igroup,{groups:o}=t.getGroup(i.field);if(c.Convert.isValue(o)){return l.GridColumn.makeGroupData(i.aggregates,o,null!==(r=e.parent)&&void 0!==r?r:e)}}}groupLayout(e){var t;const r=null!==(t=this._groupLayoutMap)&&void 0!==t?t:this._groupLayoutMap=new Map;if(r.has(e))return r.get(e);const{header:n,footer:i}=o.GridLayout.makeGroupLayout(this.grid,this.columns,e);return r.set(e,{header:n,footer:i}),{header:n,footer:i}}get defaultLayout(){var e;return null!==(e=this._defaultLayout)&&void 0!==e?e:this._defaultLayout=o.GridLayout.makeDefaultLayout(this.grid,this.columns)}get captionLayout(){var e;return null!==(e=this._captionLayout)&&void 0!==e?e:this._captionLayout=o.GridLayout.makeCaptionLayout(this.grid,this.columns)}get captionMatrix(){var e;return null!==(e=this._captionMatrix)&&void 0!==e?e:this._captionMatrix=o.GridMatrix.toMatrix(this.captionLayout)}get filterLayout(){var e;return null!==(e=this._filterLayout)&&void 0!==e?e:this._filterLayout=o.GridLayout.makeFilterLayout(this.grid,this.columns)}get headerLayout(){var e;return null!==(e=this._headerLayout)&&void 0!==e?e:this._headerLayout=o.GridLayout.makeHeaderLayout(this.grid,this.columns)}get headerDepth(){return this.headerLayout.rows.length}get footerLayout(){var e;return null!==(e=this._footerLayout)&&void 0!==e?e:this._footerLayout=o.GridLayout.makeFooterLayout(this.grid,this.columns)}get footerDepth(){return this.footerLayout.rows.length}get rowLayout(){var e;return null!==(e=this._rowLayout)&&void 0!==e?e:this._rowLayout=o.GridLayout.makeRowLayout(this.grid,this.columns)}get rowDepth(){return this.rowLayout.rows.length}get treeFooterLayout(){var e;return null!==(e=this._treeFooterLayout)&&void 0!==e?e:this._treeFooterLayout=o.GridLayout.makeTreeFooterLayout(this.grid,this.columns)}get treeFooterDepth(){return this.treeFooterLayout.rows.length}getLayout(e,t){var r;let n=!1,o=!1,s=!1;const a=null==t?void 0:t.node.constructor.name;i.GroupNode.constructor.name;switch(a){case"ListNode":case"TreeNode":break;case"GroupNode":{const r=t.node.igroup.field,i=this.groupLayout(r).header;c.Convert.isValue(i.rows)&&(e=i,n=!0);break}case"FooterNode":switch(null===(r=t.node.parent)||void 0===r?void 0:r.constructor.name){case"GroupNode":{const r=t.node.parent.igroup.field,n=this.groupLayout(r).footer;c.Convert.isValue(n.rows)&&(e=n,o=!0);break}case"TreeNode":{const t=this.treeFooterLayout;c.Convert.isValue(t.rows)&&(e=t,s=!0);break}}break}return{layout:e,isGroupHeader:n,isGroupFooter:o,isTreeFooter:s}}}},5997:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GridImport=void 0;const i=r(7134),o=r(3396);t.GridImport=class{constructor(e){this._grid=e}get grid(){return this._grid}get columns(){if(o.Convert.isEmpty(this._columns)){const e=[].concat(this._grid.headColumns.filter((e=>e.type!=i.ColumnTypes.Frozen))).concat(this._grid.scrollColumns).concat(this._grid.tailColumns.filter((e=>e.type!=i.ColumnTypes.Frozen)));this._columns=e.filter((e=>e.visible))}return this._columns}excelImport(e){return n(this,void 0,void 0,(function*(){this._grid.exporting=!0,this._grid.showLoading(!0),yield this.readFile(e,(()=>{this._grid.exporting=!1,this._grid.showLoading(!1)}))}))}}},4920:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonColumn=void 0;const i=r(3396),o=r(1623),s=r(7392),a=r(3988),l=r(7074),u=r(5360);class c extends o.GridColumn{editable(){var e;return(null===(e=this.grid.editConfig)||void 0===e?void 0:e.mode)===s.EditMode.inline}get mergeColumn(){return!1}get mergeRow(){return!1}get commands(){if(i.Convert.isNull(this._commands)){const e=this.config.command;if(this._commands=[],i.Convert.isValue(e))for(const t of e){const e=u.RowCommandFactory.createTool(this.grid,t);i.Convert.isValue(e)&&this._commands.push(e)}}return this._commands}get editCommands(){if(i.Convert.isNull(this._editCommands)){const e=this.commands.find((e=>e.command===u.RowCommands.Edit)),t=[u.RowCommands.Update,u.RowCommands.Cancel];if(i.Convert.isNull(e))return this._editCommands=this.commands,this._editCommands;this._editCommands=[];for(const e of t){const t=u.RowCommandFactory.createTool(this.grid,e);i.Convert.isValue(t)&&this._editCommands.push(t)}for(const e of this.commands)e.command===u.RowCommands.Custom&&this._editCommands.push(e)}return this._editCommands}constructor(e,t){super(e,t)}static create(e,t){return new c(e,t)}get config(){return super.config}parseConfig(e,t){return super.parseConfig(e,t)}renderCell(e,t,r){var o;return n(this,void 0,void 0,(function*(){this.removeElement(e);const n=this.makeCell(e,t,r);for(const e of n.children())a.SBGrid3.$(e).hasClass(l.SbCss.edit)&&e.remove();for(const e of this.commands){const s=e instanceof u.RowButton?l.SbCss.command:l.SbCss.custom,a=i.JqUtils.adjustElement(n,`> span#${e.name}`,`<span id='${e.name}' class='${s} ${l.SbCss.button}'/>`);e.render(a,t,null!==(o=null==r?void 0:r.column)&&void 0!==o?o:this)}}))}renderEdit(e,t,r){return n(this,void 0,void 0,(function*(){if(0==this.editable())return;const n=this.makeCell(e,t,r);for(const e of n.children())a.SBGrid3.$(e).hasClass(l.SbCss.edit)||e.remove();for(const e of this.editCommands){const r=e instanceof u.RowButton?l.SbCss.command:l.SbCss.custom,o=i.JqUtils.adjustElement(n,`> span#${e.name}`,`<span id='${e.name}' class='${r} ${l.SbCss.button} ${l.SbCss.edit}'/>`);e.render(o,t,this)}}))}removeElement(e){const t=`.${l.SbCss.toClass(this.config.type)}`,r=e.children().not(t);r.length<1||r.remove()}makeCellClass(e,t){let{cellSelector:r,cellClass:n}=super.makeCellClass(e,t);return n+=` ${l.SbCss.text}`,{cellSelector:r,cellClass:n}}}t.ButtonColumn=c},3648:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CheckColumn=t.CheckEditMode=t.CheckViewMode=void 0;const i=r(3396),o=r(1623),s=r(3988),a=r(7074),l=r(9402),u=r(2033),c=r(4772),h=r(7392),d=r(1880);var f,p;!function(e){e.Check="check",e.Label="label",e.CheckLabel="checkLabel"}(f||(t.CheckViewMode=f={})),function(e){e.Cell="cell",e.Checkbox="checkbox"}(p||(t.CheckEditMode=p={}));class m extends o.GridColumn{constructor(e,t){super(e,t)}static create(e,t){return new m(e,t)}get config(){return super.config}get mergeColumn(){return!1}get mergeRow(){return!1}parseConfig(e,t){var r,n,o,s,a,l,u;let c=super.parseConfig(e,t);if(c.checkValue=i.Convert.default(e.checkValue,null!==(r=null==t?void 0:t.checkValue)&&void 0!==r?r:void 0),c.checkLabel=i.Convert.default(e.checkLabel,null!==(n=null==t?void 0:t.checkLabel)&&void 0!==n?n:void 0),c.unCheckValue=i.Convert.default(e.unCheckValue,null!==(o=null==t?void 0:t.unCheckValue)&&void 0!==o&&o),c.unCheckLabel=i.Convert.default(e.unCheckLabel,null!==(s=null==t?void 0:t.unCheckLabel)&&void 0!==s?s:void 0),c.viewMode=i.Convert.default(e.viewMode,null!==(a=null==t?void 0:t.viewMode)&&void 0!==a?a:f.Label),c.checkMode=i.Convert.default(e.checkMode,null!==(l=null==t?void 0:t.checkMode)&&void 0!==l?l:p.Cell),c.showOriginValue=i.Convert.default(e.showOriginValue,null!==(u=null==t?void 0:t.showOriginValue)&&void 0!==u&&u),i.Convert.isEmpty(c.checkValue))throw"checkValue is empty";return c}renderCell(e,t,r){return n(this,void 0,void 0,(function*(){yield this._renderCell(e,t,r)}))}renderEdit(e,t){return n(this,void 0,void 0,(function*(){0!=this.editable(t)&&(yield this._renderCell(e,t,void 0,!0))}))}editMode(e,t,r){return n(this,void 0,void 0,(function*(){const n=i.JqUtils.adjustElement(t,`span.${a.SbCss.checkbox}`,`<span class=${a.SbCss.checkbox}></span>`),o=this.config.checkMode===p.Checkbox?n:t;this.isFocused(r,c.PanelType.Body)&&document.activeElement.id===this.grid.name&&n.get(0).focus({preventScroll:!0}),this.grid.setEvent("check","mousedown",`${this._name}_${r.rowIndex}`,(n=>{if(1!==n.which)return!1;this.toggle(e,t,r)}),o),this.grid.setEvent("check","keydown",`${this._name}_${r.rowIndex}`,(n=>this.onKeyDown(n,e,t,r)),n)}))}makeCellClass(e,t){let{cellSelector:r,cellClass:n}=super.makeCellClass(e,t);return n+=e.isCheck?` ${a.SbCss.checked}`:"",n+=` ${a.SbCss.text}`,{cellSelector:r,cellClass:n}}_renderCell(e,t,r,o=!1){return n(this,void 0,void 0,(function*(){const n=this.makeCell(e,t,r),l=i.JqUtils.adjustElement(n,`div.${a.SbCss.checkboxGroup}`,`<div class=${a.SbCss.checkboxGroup}>`);if(o=!!this.config.directApplyEdit||o,n.contents().filter(((e,t)=>3===t.nodeType)).remove(),!o){if(i.Convert.isValue(this.cellTemplate)){const e=this.cellTemplate(t.data);return n.html()!=e&&n.html(e),n}this.grid.setEvent("check","mousedown",`${this._name}_${t.rowIndex}`,void 0,n)}const u=o&&this.config.viewMode===f.Label?f.CheckLabel:this.config.viewMode;switch(this.removeElement(n),u){case f.Label:this.renderLabel(l,t),s.SBGrid3.$(`span.${a.SbCss.checkbox}`,l).remove();break;case f.Check:this.renderCheckbox(l,t),s.SBGrid3.$(`span.${a.SbCss.text}`,l).remove();break;case f.CheckLabel:this.renderCheckbox(l,t),this.renderLabel(l,t)}return o&&(this.editMode(e,n,t),i.JqUtils.addClass(n,a.SbCss.edit)),n}))}renderLabel(e,t){const r=this.getItemData(t),n=i.JqUtils.adjustElement(e,`span.${a.SbCss.text}`,`<span class=${a.SbCss.text}></span>`),o=n.text(),s=this.config.showOriginValue?i.Convert.asText(r):this.getCheckLabel(r);s!==o&&n.text(s)}renderCheckbox(e,t){const r=this.getItemData(t),n=i.JqUtils.adjustElement(e,`span.${a.SbCss.checkbox}`,`<span class="${a.SbCss.checkbox}"></span>`,(e=>e.hasClass(a.SbCss.text))).attr("tabindex",0);this.getCheckState(r)?i.JqUtils.addClass(n,a.SbCss.checked):i.JqUtils.removeClass(n,a.SbCss.checked)}getEditValue(e){var t;const r=e.find(` .${a.SbCss.cell}.${a.SbCss.edit}`);if(r.length<1)return null;const n=null!==(t=r.find(` .${a.SbCss.checkbox}`).hasClass(a.SbCss.checked))&&void 0!==t&&t;return this.getCheckValue(n)}getCheckValue(e){const{checkValue:t,unCheckValue:r}=this.config;return e?t:r}getCheckLabel(e){const{checkLabel:t,unCheckLabel:r}=this.config;return this.getCheckState(e)?null!=t?t:i.Convert.asText(e):null!=r?r:i.Convert.asText(e)}getCheckState(e){const t=this.config.checkValue;return"function"==typeof t?t(e):e===t}getItemData(e){var t;return this.config.directApplyEdit?this.getLabelData(e,void 0):null!==(t=this.getTemp(e))&&void 0!==t?t:this.getLabelData(e,void 0)}toggle(e,t,r){var o;return n(this,void 0,void 0,(function*(){const n=i.JqUtils.adjustElement(t,`span.${a.SbCss.checkbox}`,`<span class=${a.SbCss.checkbox}></span>`),s=null===(o=this.grid.editConfig)||void 0===o?void 0:o.mode;if(n.is(`.${a.SbCss.checkbox}`)&&n.toggleClass(`${a.SbCss.checked}`),this.config.directApplyEdit){const t=this.getEditValue(e);s===h.EditMode.inline?this.setTemp(r,e):this.grid.view.clearEdit(),this.setValueDirect(r,t,this.field)}else this.grid.view.isEdit(r)&&(this.setTemp(r,e),!this.config.directApplyValue&&this.renderLabel(t,r))}))}onKeyDown(e,t,r,i){return n(this,void 0,void 0,(function*(){switch(e.preventDefault(),e.key){case u.KeyboardShortCut.Space:yield this.toggle(t,r,i);break;case u.KeyboardShortCut.Escape:case u.KeyboardShortCut.Enter:case u.KeyboardShortCut.Tap:return!0}return!1}))}removeElement(e){if(!(e.children().length<1))for(const t of e.children()){const e=t.classList.contains(a.SbCss.checkboxGroup),r=t.classList.contains(a.SbCss.text);e||r||t.remove()}}toggleCaptionCheck(){super.toggleCaptionCheck();const e=[];for(const t of this.grid.rows){if(i.Convert.isNull(t))continue;const r=t.data[this.field],n=this.getCheckValue(this.captionChecked);r!==n&&e.push({value:n,key:t.key,field:this.field})}this.fireCommandAsync(this,new l.UpdateCommand(e))}doFocus(e){const{current:{column:t,rowItem:r}}=e;if(this===t&&i.Convert.isValue(r)){const e=this.grid.getContainer(r,this),t=s.SBGrid3.$(`span.${a.SbCss.checkbox}`,e).length>0?s.SBGrid3.$(`span.${a.SbCss.checkbox}`,e):this.grid.container;null==t||t.trigger("focus")}}doCommand(e,t){return t.command===d.Commands.Focused&&this.doFocus(t),super.doCommand(e,t)}isEditColumn(){return!0}}t.CheckColumn=m},3341:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnFactory=void 0;const n=r(3396),i=r(3648),o=r(7134),s=r(6411),a=r(2867),l=r(270),u=r(1623),c=r(1700),h=r(8141),d=r(7367),f=r(1207),p=r(7333),m=r(4920),g=r(5077),v=r(9114);t.ColumnFactory=class{static create(e,t){let r=n.Convert.parseEnum(o.ColumnTypes,t.type);switch(t.type){case o.ColumnTypes.RowNo:return new v.RowNoColumn(e,t);case o.ColumnTypes.Sticky:return new v.StickyColumn(e,t);case o.ColumnTypes.Detail:return new v.DetailClickColumn(e,t);case o.ColumnTypes.RowCheck:return new v.RowCheckColumn(e,t);case o.ColumnTypes.RowReorder:return new v.RowReorderColumn(e,t);case o.ColumnTypes.Frozen:return new v.FrozenColumn(e,t);case o.ColumnTypes.Status:return new v.StatusColumn(e,t);case o.ColumnTypes.Group:return new c.GroupColumn(e,t);case o.ColumnTypes.Tree:return new p.TreeColumn(e,t);case o.ColumnTypes.Dropdown:return new l.DropDownColumn(e,t);case o.ColumnTypes.Check:return new i.CheckColumn(e,t);case o.ColumnTypes.Date:return new a.DateColumn(e,t);case o.ColumnTypes.Number:return new d.NumberColumn(e,t);case o.ColumnTypes.Radio:return new g.RadioColumn(e,t);case o.ColumnTypes.MultiText:return new h.MultiTextColumn(e,t);case o.ColumnTypes.Button:return new m.ButtonColumn(e,t);case o.ColumnTypes.Combo:return new s.ComboColumn(e,t);case o.ColumnTypes.Text:return new f.TextColumn(e,t);case o.ColumnTypes.Html:case o.ColumnTypes.Image:default:return new u.GridColumn(e,t)}throw`'${r}' is unknown column type.`}}},7641:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ValueDisplayType=t.FilterMode=t.defaultSearchFilterFunc=t.PopupPosition=t.Position=t.JoinCondition=t.Condition=t.FilterRenderer=void 0;const i=r(2733),o=r(235),s=r(3211),a=r(3396),l=r(3988),u=r(7074),c=r(8154),h=r(1880),d=r(6328),f=r(4772),p=r(1374);class m extends i.Observer{get isMenuOpen(){return this._isMenuOpen}set isMenuOpen(e){this._isMenuOpen=e}get condition(){var e;return null!==(e=this._condition)&&void 0!==e?e:this._condition=new w(this.column,this.config)}set condition(e){this._condition=e}get rowFilter(){var e,t,r,n;if(this.config.rowFilter)this._rowFilter=null!==(e=this._rowFilter)&&void 0!==e?e:new v(this.condition);else{const e=this.condition.conditions[0];if(a.Convert.isNull(e))return;const i=(null===(t=this.condition)||void 0===t?void 0:t.conditions.length)>1||(null===(r=e.operator)||void 0===r?void 0:r.operator)===d.FilterOperators.In||(null===(n=e.operator)||void 0===n?void 0:n.operator)===d.FilterOperators.NotIn;i&&(a.Convert.isNull(this._rowFilter)||this._rowFilter instanceof y==!1)?this._rowFilter=new y(this.condition):!i&&(a.Convert.isNull(this._rowFilter)||this._rowFilter instanceof y)&&(this._rowFilter=new g(this.condition))}return this._rowFilter}constructor(e,t){super(t),this._isMenuOpen=!1,this.config=e,this.column=t,this.grid=t.grid}renderMenu(e){const t=a.JqUtils.adjustElement(this.grid.container,`.${this.condition._column.cellSelector}.${u.SbCss.filter}.${u.SbCss.menu}`,`<div class=' ${this.condition._column.cellSelector} ${u.SbCss.filter} ${u.SbCss.menu}'></div>`);t.removeClass(u.SbCss.hidden),this.condition.render(t);const r=a.JqUtils.adjustElement(t,`>div.${u.SbCss.confirm}`,`<div class = ${u.SbCss.confirm}></div>`),n=a.JqUtils.adjustElement(r,`>.${u.SbCss.summit}`,`<button class ='${u.SbCss.summit}'>summit</button>`);this.grid.setEvent("filter","click",this.condition._column.name+"_filter",(()=>{this.condition.updateValues(),this.isMenuOpen=!1;const e=new c.FilterCommand(this.condition._column.field,void 0,!0);this.condition.fireCommandAsync(this.condition,e),this.grid.container.trigger("focus")}),n);const i=a.JqUtils.adjustElement(r,`>.${u.SbCss.cancel}`,`<button class ='${u.SbCss.cancel}'>clear</button>`);this.grid.setEvent("filter","click",this.condition._column.name+"_clear",(()=>{this.condition.doClear(),this.isMenuOpen=!1,this.grid.container.trigger("focus")}),i);return new O(this.grid.container).move(t,e,P.Right),t}closeMenu(){this.grid.container.find(`.${this.condition._column.cellSelector}.${u.SbCss.filter}.${u.SbCss.menu}`).addClass(u.SbCss.hidden),this.isMenuOpen=!1}hasChildFilter(){return a.Convert.isValue(this.condition.conditions)}renderCaptionFilter(e,t,r,n){if(!1===this.hasChildFilter())return;const i=a.Convert.isValue(r)?a.JqUtils.adjustElement(e,`>button.${u.SbCss.filter}`,`<button class='${u.SbCss.filter}'></button>`,{data:"index",index:r},n):a.JqUtils.adjustElement(e,`>button.${u.SbCss.filter}`,`<button class='${u.SbCss.filter}'></button>`),o=a.JqUtils.adjustElement(i,`>.${u.SbCss.filter}.${u.SbCss.icon}`,`<span class = '${u.SbCss.filter} ${u.SbCss.icon}'></span>`),s=b.findFilter(this.grid.dataSource.filters,(e=>(e.field instanceof Array?e.field[0]===t.field:e.field===t.field)&&!1===e.fixed));a.Convert.isValue(s)?a.JqUtils.addClass(o,u.SbCss.filled):a.JqUtils.removeClass(o,u.SbCss.filled),this.isMenuOpen?this.openMenu(e):this.closeMenu(),this.grid.setEvent("filter","mousedown",this.condition.name+"_PopupMenu",(()=>{this.grid.scrollPanel.removeMenu(),this.isMenuOpen=!this.isMenuOpen,this.fireCommand(this,new c.RefreshCommand)}),o)}renderFilterColumn(e,t){var r;this.doFocus();const n=a.JqUtils.adjustElement(e,`>span.${t.cellSelector}`,`<span class='${u.SbCss.filter} ${u.SbCss.column} ${t.cellSelector}'></span>`),i=a.JqUtils.adjustElement(n,`>span.${u.SbCss.summary}`,`<span class = ${u.SbCss.summary}></span>`);null===(r=this.rowFilter)||void 0===r||r.render(i),this.renderCaptionFilter(n,t)}doCommand(e,t){switch(p.Log.debug((()=>"grid.doCommand")),t.command){case h.Commands.EditFilter:return this.doEnter(t);case h.Commands.Escape:return this.doEscape(t),!0;default:return super.doCommand(e,t)}}isFocus(e){a.Convert.isNull(e)&&(e=this.grid.focusManager.focus);const t=this.condition._column;return(null==e?void 0:e.panelType)==f.PanelType.Filter&&(null==e?void 0:e.column)==t}isEdit(){return this.grid.scrollPanel.filterPanel.isEdit}canCommand(e,t){if(t.command===h.Commands.Focused)return this.canMoveFocus(t)}canMoveFocus(e){if("mousedown"==e.eventType)return;if(!this.isEdit())return;if(e.current.panelType!==f.PanelType.Filter)return;if(!1===this.isFocus(e.last))return;if(this.isMenuOpen)return!1;const t=this.grid.getContainer(void 0,this._condition._column,f.PanelType.Filter).find("input,select,button"),r=document.activeElement,n=t.get(),i=n.findIndex((e=>e===r));return i!=n.length-1&&i>-1?(l.SBGrid3.$(t[i+1]).trigger("focus"),!1):void 0}doFocus(){if(this.isFocus()){const e=this.grid.getContainer(void 0,this._condition._column,f.PanelType.Filter);if(!this.isEdit()){const t=document.activeElement;e.find(t).length>0&&(this.grid.scrollPanel.filterPanel.isEdit=!0)}}else this.isMenuOpen&&this.closeMenu()}doEscape(e){const t=this.grid.focusManager.focus,r=this.grid.config.filterable;t.panelType==(r==I.Row?f.PanelType.Filter:f.PanelType.Caption)&&t.column==this.condition._column&&(this.isMenuOpen?(this.isMenuOpen=!1,r==I.Menu&&this.grid.container.trigger("focus"),this.fireCommandAsync(this,new c.RefreshCommand)):this.grid.scrollPanel.filterPanel.isEdit=!1,this.grid.container.trigger("focus"))}doEnter(e){if(e.focus.column==this.condition._column&&e.focus.panelType==f.PanelType.Filter){const e=this.grid.getContainer(void 0,this.condition._column,f.PanelType.Filter),t=this.isEdit(),r=l.SBGrid3.$(document.activeElement);return t&&!this.isMenuOpen?r.is(`button.${u.SbCss.filter}`)?this.openMenu(e):this.fireFilterCommand():this.focusFilter(e),!1}return!0}openMenu(e){this.grid.scrollPanel.filterPanel.isEdit=!0,this.isMenuOpen=!0;this.renderMenu(e)}focusFilter(e){this.grid.scrollPanel.filterPanel.isEdit=!0,this.fireCommandAsync(this,new c.RefreshCommand)}fireFilterCommand(){a.Convert.isValue(this.rowFilter.valueGetter)&&this.rowFilter.valueGetter(),this.condition._doFilter()}}t.FilterRenderer=m;class g extends i.Observer{get condition(){return this._condition}set condition(e){this._condition=e}get valueGetter(){return this._valueGetter}set valueGetter(e){this._valueGetter=e}constructor(e){super(e),this.condition=e,this.grid=e._grid}render(e){const t=this.condition.conditions[0],r=(t.operator,t.valueRenderer);this.valueGetter=r.renderRowFilter(e),this.removeTrashValues(e),this.focus(e)}focus(e){if(!this.grid.scrollPanel.filterPanel.isEdit)return;const t=this.grid.focusManager.focus;if(t.panelType!==f.PanelType.Filter)return;if(t.column==this.condition._column){const t=document.activeElement,r=e.parent();if(r.find(t).length<=0){r.find("input,select,button").each(((e,t)=>{const r=l.SBGrid3.$(t);if(!1===r.prop("disabled"))return r.trigger("focus"),!1}))}}}removeTrashValues(e){e.find(`>:not(.${u.SbCss.values})`).remove()}fireFilterCommand(){a.Convert.isValue(this.valueGetter)&&this.valueGetter();const e=new c.FilterCommand(this.condition._column.field);this.fireCommandAsync(this,e)}clear(){}}class v extends g{get renderFunc(){var e;return null!==(e=this._renderFunc)&&void 0!==e?e:this.column.config.filter.rowFilter}set renderFunc(e){this._renderFunc=e}constructor(e){super(e),this.column=e._column}get filter(){return this._filter}set filter(e){this._filter=e}render(e){return n(this,void 0,void 0,(function*(){if(this.column.grid.scrollPanel.filterPanel.isEdit)return;e.html("");const t=this.column.field,r=yield this.column.grid.getGroupByField(t,!0);this.renderFunc(e,this.column.field,this.filter,r,(e=>{a.Convert.isValue(e)?(this.filter=s.GridColumnParser.parseFilter(e),this.fireCommandAsync(this,new c.FilterCommand(this.column.field,this.filter))):this.condition.doClear()}))}))}clear(){this._filter=void 0}}class y extends g{render(e){this.renderDefaultFloatingFilterFunc(e)}renderDefaultFloatingFilterFunc(e){let t="";this.condition.conditions.forEach(((e,r)=>{e.operator;const n=e.valueRenderer.getMessage();a.Convert.isValue(n)&&(t+=`[ ${n} ] ${r<this.condition.conditions.length-1?this.condition.operator.operator:""}`)}));const r=a.JqUtils.adjustElement(e,`>.${u.SbCss.values}`,`<span class='${u.SbCss.values}'></span>`),n=a.JqUtils.adjustElement(r,`>span.${u.SbCss.value}.${u.SbCss.value}_1`,`<span class = '${u.SbCss.value} ${u.SbCss.value}_1' '></span>`);n.attr("role-display")!=A.Text&&n.html(""),n.attr("role-display",A.Text);const i=R.createTextElement(n);i.val(t),i.prop("disabled",!0),r.find(`.${u.SbCss.value}_2`).remove(),this.removeTrashValues(e),this.focus(e)}}class b extends o.Publisher{get conditions(){var e;return null!==(e=this._conditions)&&void 0!==e?e:this._conditions=[]}set conditions(e){this._conditions=e}get config(){return this._config}set config(e){this._config=e}constructor(e,t){super(e),this._grid=e.grid,this._column=e,this.config=t}get operator(){var e;return null!==(e=this._operator)&&void 0!==e?e:this._operator=C.createOerator(this,this.config)}set operator(e){this._operator=e}get valueRenderer(){var e;return null!==(e=this._valueRenderer)&&void 0!==e?e:this._valueRenderer=this.operator instanceof _==!1?S.createValueRenderer(this.operator.operator,this):void 0}set valueRenderer(e){this._valueRenderer=e}get dataType(){return this._dataType}getFilter(){var e;const t=this.config;return t.operator=this.operator.operator,t.values=null===(e=this.valueRenderer)||void 0===e?void 0:e.values,t.filters=this.conditions.map((e=>e.getFilter())),t}render(e){var t,r;const n=a.JqUtils.adjustElement(e,`>#${this.name}.${u.SbCss.condition}`,`<div id='${this.name}' class ='${u.SbCss.condition}'></div>`);this.operator.render(n),null===(t=this.valueRenderer)||void 0===t||t.renderValues(n),null===(r=this.config.filters)||void 0===r||r.forEach((e=>{const t=new b(this._column,e);t.render(n),this.conditions.push(t)}))}doCommand(e,t){return t.command===h.Commands.OperatorChanged?this.doOperatorChanged(t):super.doCommand(e,t)}doOperatorChanged(e){if(e.conditionName===this.name){this.valueRenderer.remove(),this.valueRenderer=void 0;const e=this._grid.container.find(`#${this.name}.${u.SbCss.condition}`);return this.valueRenderer.renderValues(e),!1}return!0}clear(){var e,t;null===(e=this.valueRenderer)||void 0===e||e.remove(),this.valueRenderer=void 0,null===(t=this.operator)||void 0===t||t.remove(),this.operator=void 0}static findFilter(e,t,r){return a.Arrays.bfsSearch(e,(e=>!!t(e)||e.filters))}updateDataFilterOperator(e,t){const r=b.findFilter(this._grid.dataSource.filters,(e=>e.field[0]===this._column.field));if(a.Convert.isNull(r))return;r.filters.find((t=>t.operator===e&&!1===t.fixed)).operator=t}updateValues(){var e,t;a.Convert.isValue(null===(e=this.valueRenderer)||void 0===e?void 0:e.valueGetter)&&(null===(t=this.valueRenderer)||void 0===t||t.valueGetter()),this.conditions.forEach((e=>e.updateValues()))}}t.Condition=b;class w extends b{get configFilter(){return this._configFilter}set configFilter(e){this._configFilter=e}constructor(e,t){super(e,t),this.configFilter=this.mergeFilter(t),this.config=this.adjustConfig(s.GridColumnParser.parseFilter(this.configFilter)),this.initConditions()}adjustConfig(e){var t;return e.dataType=this.adjustDataType(e.dataType,this._column),null===(t=e.filters)||void 0===t||t.forEach((e=>{this.adjustConfig(e)})),e}doOperatorChanged(e){if(e.conditionName===this.name){const t=e.operator,r=this.conditions.length;if(a.Convert.isValue(t)&&r<=1){const e=this.configFilter.filters[0],t=this.adjustConfig(s.GridColumnParser.parseColumnFilter(e));this.config.filters.push(t);const n=new b(this._column,t);this.conditions[r]=n}else if(a.Convert.isEmpty(t)&&r>=2){this.conditions.pop().clear()}const n=this._grid.container.find(`.${this._column.cellSelector}.${u.SbCss.filter}.${u.SbCss.menu}`);return this.render(n),!1}return!0}render(e){return n(this,void 0,void 0,(function*(){const t=a.JqUtils.adjustElement(e,`>#${this.name}.${u.SbCss.condition}`,`<div id='${this.name}' class ='${u.SbCss.condition}'></div>`);this.conditions.forEach((e=>{e.render(t),this.operator.render(t)})),this.sliceConditionElements(t)}))}sliceConditionElements(e){const t=e.find(`.${u.SbCss.condition}`);t.length>this.conditions.length&&t.slice(this.conditions.length).remove()}doCommand(e,t){switch(t.command){case h.Commands.Filter:this.doFilter(t);return!0;case h.Commands.OperatorChanged:return this.doOperatorChanged(t);default:return super.doCommand(e,t)}}doFilter(e){if(e.field==this._column.field){p.Log.debug(this._column.field+"................do Filter");let t=a.Convert.isNull(e.filter)?this.getFilter():e.filter;return this._doFilter(t),!1}return!0}_doFilter(e){const t=null!=e?e:this.getFilter();w.filter(t,this._grid)}adjustDataType(e,t){var r,n,i,o,s,l;return null!==(r=null!=e?e:t.dataType)&&void 0!==r?r:a.Convert.parseEnum(a.DataType,(null===(o=null===(i=null===(n=t.grid.dataConfig)||void 0===n?void 0:n.schema)||void 0===i?void 0:i.fields)||void 0===o?void 0:o.hasOwnProperty(t.field))?null===(l=null===(s=t.grid.dataConfig)||void 0===s?void 0:s.schema)||void 0===l?void 0:l.fields[t.field].dataType:a.DataType.String)}mergeFilter(e){var t,r;const n=null===(t=(e=s.GridColumnParser.parseFilter(e)).filters)||void 0===t?void 0:t.filter((e=>1==e.fixed));e.filters=null===(r=e.filters)||void 0===r?void 0:r.filter((e=>0==e.fixed));let i=b.findFilter(this._grid.dataSource.filters,(e=>e.field[0]===this._column.field&&0==e.fixed));if(a.Convert.isNull(i)&&a.Convert.isValue(n)&&this._grid.dataSource.filters.concat(n),a.Convert.isNull(i))return this.adjustConfig(e);i=s.GridColumnParser.parseFilter(i);const o=i.filters;return e.filters.forEach((e=>{const t=o.find((t=>t.operator===e.operator));a.Convert.isValue(t)&&(e.values=t.values)})),this.adjustConfig(i),i}static filter(e,t){var r;const n=null!==(r=t.view.dataConfig.filters)&&void 0!==r?r:t.view.dataConfig.filters=[],i=n.findIndex((t=>t.field[0]==e.field[0]&&!1===t.fixed));i>-1?n[i]=e:n.push(e),t.view.search()}doClear(){this._grid.dataConfig.filters=this._grid.dataConfig.filters.filter((e=>e.field!=this._column.field||e.fixed)),this.config=this.adjustConfig(s.GridColumnParser.parseFilter(this.configFilter)),this.initConditions(),this.initRowFilter(),this._grid.view.search()}initConditions(){var e,t,r;if(null===(e=this.config.filters)||void 0===e||e.forEach(((e,t)=>{if(e.fixed)return!1;let r;a.Convert.isValue(this.conditions[t])?(r=this.conditions[t],r.config=e,r.clear()):r=new b(this._column,e),this.conditions[t]=r})),(null===(t=this.conditions)||void 0===t?void 0:t.length)>(null===(r=this.config.filters)||void 0===r?void 0:r.length)){const e=this.conditions.splice(0,this.config.filters.length);this.conditions.forEach((e=>{e.clear(),this._column.remove(e)})),this.conditions=e}}initRowFilter(){}}t.JoinCondition=w;class C extends i.Observer{get operator(){return this._operator}set operator(e){this._operator=e}get renderOperators(){return this._renderOperators}set renderOperators(e){this._renderOperators=e}get renderFunc(){return this._renderFunc}set renderFunc(e){this._renderFunc=e}constructor(e,t){var r;super(e),this.renderOperators=null!==(r=t.operators)&&void 0!==r?r:this.renderOperators=M[t.dataType],this.conditionName=e.name,this.filterFunc="function"==typeof t.operator?t.operator:void 0,this.operator="function"!=typeof t.operator?t.operator:void 0,this.grid=e._grid}render(e,t){a.Convert.isValue(this.renderFunc)?this.renderFunc(e,this.name,this.renderOperators,this.operator,(e=>this.changeCommand(e))):this.renderOperator(e)}renderOperator(e){this.conditionName,this.name;const t=a.JqUtils.adjustElement(e,`>select.${u.SbCss.operator}`,`<select class='${u.SbCss.operator}'></select>`);this.renderOperators.forEach((e=>{const r=this.getResource(e),n=a.JqUtils.adjustElement(t,`>option[value=${e}]`,`<option value='${e}'>${r}</option>`);e==this.operator?n.prop("selected",!0):n.prop("selected",!1)})),this.grid.setEvent("filter","change",this.name,(e=>{var r;const n=a.Convert.parseEnum(d.FilterOperators,null===(r=t.find(">option:selected").val())||void 0===r?void 0:r.toString());this.changeCommand(n)}),t)}getResource(e){const t=this.grid.resource;switch(e){case d.FilterOperators.IsLessThan:return t.filter_isLessThan;case d.FilterOperators.IsLessThanOrEqualTo:return t.filter_isLessThanOrEqualTo;case d.FilterOperators.IsEqualTo:return t.filter_isEqualTo;case d.FilterOperators.IsNotEqualTo:return t.filter_isNotEqualTo;case d.FilterOperators.IsGreaterThan:return t.filter_isGreaterThan;case d.FilterOperators.IsGreaterThanOrEqualTo:return t.filter_isGreaterThanOrEqualTo;case d.FilterOperators.IsNull:return t.filter_isNull;case d.FilterOperators.IsNotNull:return t.filter_isNotNull;case d.FilterOperators.IsEmpty:return t.filter_isEmpty;case d.FilterOperators.IsNotEmpty:return t.filter_isNotEmpty;case d.FilterOperators.In:return t.filter_in;case d.FilterOperators.NotIn:return t.filter_notIn;case d.FilterOperators.IsNullOrEmpty:return t.filter_isNullOrEmpty;case d.FilterOperators.IsNotNullOrEmpty:return t.filter_isNotNullOrEmpty;case d.FilterOperators.FromTo:return t.filter_fromTo;case d.FilterOperators.NotFromTo:return t.filter_notFromTo;case d.FilterOperators.StartsWith:return t.filter_startsWith;case d.FilterOperators.NotStartsWith:return t.filter_notStartsWith;case d.FilterOperators.EndsWith:return t.filter_endsWith;case d.FilterOperators.NotEndsWith:return t.filter_notEndsWith;case d.FilterOperators.Contains:return t.filter_contains;case d.FilterOperators.NotContains:return t.filter_notContains}}changeCommand(e){if(a.Convert.isNull(this.publisher))return;const t=this.operator;a.Convert.isValue(e)&&(this.operator=e);const r=new c.OperatorChangedCommand(e,this.conditionName,t);this.fireCommandAsync(this,r)}static createOerator(e,t){return a.Convert.isValue(t.filters)?new _(e,t):new C(e,t)}remove(){this.publisher.remove(this),this.grid.setEvent("filter","change",this.name)}}class _ extends C{constructor(e,t){super(e,t),this._condition=e}renderOperator(e,t){var r;const n=a.JqUtils.adjustElement(e,`>div.${u.SbCss.operator}.${u.SbCss.join}`,`<div class= '${u.SbCss.operator} ${u.SbCss.join}'>`),i=(null===(r=this._condition.conditions)||void 0===r?void 0:r.length)>1,o=i&&this.operator===d.FilterOperators.And?d.FilterOperators.And:i&&this.operator===d.FilterOperators.Or?d.FilterOperators.Or:"none";["none",d.FilterOperators.And,d.FilterOperators.Or].forEach((e=>{const t=e===o;this.renderOperation(n,e,t)})),this.grid.setEvent("filter","change",this.name,(e=>{const t=l.SBGrid3.$(e.target);if(t.is("input[type='radio'")){let e,r=a.Convert.asText(t.val());try{e=a.Convert.parseEnum(d.FilterOperators,r)}catch(e){}this.operator=a.Convert.isNull(e)?d.FilterOperators.And:e,this.changeCommand(e)}}),n)}renderOperation(e,t,r){const n=a.JqUtils.adjustElement(e,`>div.${u.SbCss.join}.${t}`,`<div class= '${u.SbCss.join} ${t}'></div>`),i=a.JqUtils.adjustElement(n,`>input[type='radio'].${u.SbCss.operator}.${t}`,`<input type='radio' name='${u.SbCss.operator}' value= '${t}' class='${u.SbCss.operator} ${t}'></input>`);a.JqUtils.adjustElement(n,`>label[for='${t}']`,`<label for = '${t}'>${t}</label>`);return r?i.prop("checked",!0):i.prop("checked",!1),i}}class S extends i.Observer{constructor(e,t,r,n=1){super(e),this.condition=e,this.index=n}get grid(){var e;return null!==(e=this._grid)&&void 0!==e?e:this._grid=this.condition._grid}set grid(e){this._grid=e}get index(){return this._index}set index(e){this._index=e}get conditionName(){var e;return null!==(e=this._conditionName)&&void 0!==e?e:this._conditionName=this.condition.name}set conditionName(e){this._conditionName=e}get displayType(){var e;return null!==(e=this._displayType)&&void 0!==e?e:S.getValueRenderType(this.condition)}set displayType(e){this._displayType=e}get values(){return a.Convert.isNull(this._values)&&a.Convert.isValue(this.condition.config.values)&&(this._values=this._values="string"==typeof this.condition.config.values?[this.condition.config.values]:[this.condition.config.values[this.index-1]]),this._values}set values(e){this._values=e}get field(){var e;return null!==(e=this._field)&&void 0!==e?e:this._field=this.condition._column.field}set field(e){this._field=e}get condition(){return this._condition}set condition(e){this._condition=e}get valueGetter(){return this._valueGetter}set valueGetter(e){this._valueGetter=e}static getValueRenderType(e){var t,r,n,i;const o=e._column;let s=null!==(t=e.config.dataType)&&void 0!==t?t:o.dataType;if(a.Convert.isNull(s)){const e=null===(i=null===(n=null===(r=o.grid.dataSource)||void 0===r?void 0:r.config)||void 0===n?void 0:n.schema)||void 0===i?void 0:i.fields;if(a.Convert.isValue(e)){const t=e[o.field];s=a.Convert.parseEnum(a.DataType,t.dataType)}}switch(s=null!=s?s:a.DataType.String,s){case a.DataType.Date:return A.Date;case a.DataType.Number:return A.Number;default:return A.Text}}renderValues(e,t){const r=a.JqUtils.adjustElement(e,`>.${u.SbCss.values}`,`<span class='${u.SbCss.values}'></span>`),n=this.renderValue(r,t);return r.find(`.${u.SbCss.value}_2`).remove(),n}renderValue(e,t){const r=a.JqUtils.adjustElement(e,`>span.${u.SbCss.value}.${u.SbCss.value}_${this.index}`,`<span class = '${u.SbCss.value} ${u.SbCss.value}_${this.index} '></span>`);this.checkRoleDisplay(r,this.displayType,(()=>{r.html("")}));const n=R.createValueElement(r,this.displayType);a.Convert.isValue(this.values)?this.values instanceof Array?n.val(this.values[0]):n.val(this.values):n.val(""),n.prop("disabled",!1),n.removeAttr("placeholder"),a.Convert.isValue(t)?t(n,(()=>this.values=[n.val()])):this.valueGetter=()=>this.values=[n.val()]}focus(e){if(!1===this.grid.scrollPanel.filterPanel.isEdit)return;const t=this.grid.focusManager.focus;(null==t?void 0:t.column)===this.condition._column&&t.panelType===f.PanelType.Filter&&e.trigger("focus")}checkRoleDisplay(e,t,r){t!==e.attr("role-display")&&r(),e.attr("role-display",t)}getInnerValueRenderer(){}getMessage(){var e;return a.Convert.isValue(this.values)?null===(e=this.values)||void 0===e?void 0:e.toString():""}renderRowFilter(e){let t;return this.renderValues(e,((e,r)=>{t=r})),t}remove(){var e;this.publisher.remove(this),null===(e=this.getInnerValueRenderer())||void 0===e||e.forEach((e=>{e.remove(),e=void 0}))}static createValueRenderer(e,t){const r=S.getValueRenderType(t),n=t.config.field;switch(e){case d.FilterOperators.IsNull:case d.FilterOperators.IsNotNull:case d.FilterOperators.IsEmpty:case d.FilterOperators.IsNotEmpty:case d.FilterOperators.IsNullOrEmpty:case d.FilterOperators.IsNotNullOrEmpty:case d.FilterOperators.And:case d.FilterOperators.Or:return new k(t,r,n);case d.FilterOperators.IsLessThan:case d.FilterOperators.IsLessThanOrEqualTo:case d.FilterOperators.IsEqualTo:case d.FilterOperators.IsNotEqualTo:case d.FilterOperators.IsGreaterThanOrEqualTo:case d.FilterOperators.IsGreaterThan:case d.FilterOperators.IsGreaterThan:case d.FilterOperators.StartsWith:case d.FilterOperators.NotStartsWith:case d.FilterOperators.EndsWith:case d.FilterOperators.NotEndsWith:case d.FilterOperators.NotContains:case d.FilterOperators.Contains:return new S(t,r,n);case d.FilterOperators.FromTo:case d.FilterOperators.NotFromTo:return new x(t,r,n);case d.FilterOperators.In:case d.FilterOperators.NotIn:return new T(t,r,n)}}}class x extends S{constructor(e,t,r){super(e,t,r),this.value1=new S(e,t,r,1),this.value2=new S(e,t,r,2)}renderValues(e,t){const r=a.JqUtils.adjustElement(e,`>.${u.SbCss.values}`,`<span class='${u.SbCss.values}'></span>`);return this.renderValue(r,t)}renderValue(e,t){return n(this,void 0,void 0,(function*(){let r,n,i;this.value1.renderValue(e,((e,t)=>{r=t,i=e})),this.value2.renderValue(e,((e,t)=>{n=t}));const o=()=>this.values=[...r(),...n()];a.Convert.isValue(t)?t(i,o):this.valueGetter=o}))}getInnerValueRenderer(){return[this.value1,this.value2]}getMessage(){return this.value1.getMessage()+" ~ "+this.value2.getMessage()}get values(){var e;return null!==(e=this._values)&&void 0!==e?e:this._values="string"==typeof this.condition.config.values?[this.condition.config.values]:this.condition.config.values}set values(e){this._values=e}}class k extends S{constructor(e,t,r){super(e,t,r),this.value1=new S(e,t,r)}renderValue(e,t){this.value1.renderValue(e,t),this.valueGetter=()=>{}}getInnerValueRenderer(){return[this.value1]}getMessage(){return""}}class T extends S{get filterFunc(){var e;return null!==(e=this._filterFunc)&&void 0!==e?e:this._filterFunc=t.defaultSearchFilterFunc}constructor(e,t,r){super(e,t,r),this._tempValues=void 0,this.searchBarValue="",this.values=void 0}renderValues(e,t){const r=a.JqUtils.adjustElement(e,`>.${u.SbCss.values}`,`<span class='${u.SbCss.values}'></span>`),n=this.renderValue(r,t);return r.find(`.${u.SbCss.value}_2`).remove(),n}get tempValues(){return this._tempValues}set tempValues(e){this._tempValues=null==e?void 0:e.map((e=>e))}renderValue(e,t){var r;return n(this,void 0,void 0,(function*(){const t=a.JqUtils.adjustElement(e,`>span.${u.SbCss.value}.${u.SbCss.value}_1`,`<span class = '${u.SbCss.value} ${u.SbCss.value}_1'></span>`);this.checkRoleDisplay(t,A.Check,(()=>{t.empty(),t.attr("role-display",A.Check)}));const n=yield this.grid.getGroupByField(this.field,!0);a.Convert.isNull(this.values)&&(this.values=n),this.renderSearchBar(t,n);const i=null===(r=this.filterCheckBoxes(t,n))||void 0===r?void 0:r.sort();this.renderCheckboxes(t,i)}))}renderSearchBar(e,t,r){const n=a.JqUtils.adjustElement(e,`>span.${u.SbCss.filter}.${u.SbCss.search}`,`<span class = '${u.SbCss.filter} ${u.SbCss.search}'></div>`),i=R.createTextElement(n);this.searchBarValue!=i.val()&&i.val(this.searchBarValue),this.grid.setEvent("filter","keyup",this.conditionName+"_"+u.SbCss.search,(r=>{this.searchBarValue=i.val().toString();const n=this.filterCheckBoxes(e,t);this.renderCheckboxes(e,n);const o=e.find("ul>li>input[type=checkbox]:not([value='all'])").map(((e,t)=>a.Convert.asText(l.SBGrid3.$(t).val()))).get();this.values=o}),i)}filterCheckBoxes(e,t){return this.filterFunc(this.searchBarValue,t)}renderCheckboxes(e,t){return n(this,void 0,void 0,(function*(){const r=a.JqUtils.adjustElement(e,">ul","<ul></ul>"),n=a.JqUtils.adjustElement(r,">li[value='all']","<li value='all'></li>"),i=a.JqUtils.adjustElement(n,">input[type=checkbox]","<input type='checkbox' value='all'></input>");a.JqUtils.adjustElement(n,">label","<label>all</label>");t.forEach(((e,t)=>{var n;const i=a.JqUtils.adjustElement(r,`>li[value='${t+1}']`,`<li value='${t+1}'></li>`),o=a.JqUtils.adjustElement(i,">input[type=checkbox]",`<input type='checkbox' value=${e}></input>`);o.val()!=e&&o.val(e);const s=a.JqUtils.adjustElement(i,">label",`<label>${e}</label>`);s.text()!=e&&s.text(e),(null===(n=this.values)||void 0===n?void 0:n.includes(e))?o.prop("checked",!0):o.prop("checked",!1)}));r.find("li").slice(t.length+1).remove(),this.addEvent(r),this.renderTotalAndAll(e,i)}))}renderTotalAndAll(e,t){const r=a.JqUtils.adjustElement(e,">span.count","<span class ='count'><span>"),n=e.find(`ul>li:not(.${u.SbCss.hidden})>input[type=checkbox]:not([value='all'])`),i=n.length,o=n.filter(((e,t)=>!0===l.SBGrid3.$(t).prop("checked"))).length;r.text(`all : ${i}, checked: ${o}`),i>0&&i===o?t.prop("checked",!0):t.prop("checked",!1)}addEvent(e,t){this.grid.setEvent("filter","click",this.conditionName+"_"+A.Check,(t=>{const r=l.SBGrid3.$(t.target),n=r.prop("checked");if(r.is("input:checkbox")){let t;if("all"===r.val()){const r=e.find(`>li:not(.${u.SbCss.hidden})>input[type=checkbox]:not([value='all'])`);n?r.prop("checked",!0):r.prop("checked",!1),t=e.find(">li>input[type=checkbox]:not([value='all'])").map(((e,t)=>a.Convert.asText(l.SBGrid3.$(t).val()))).get()}else t=[a.Convert.asText(r.val())];this.updateValues(t,n);const i=new c.FilterCommand(this.field);this.fireCommandAsync(this,i)}}),e)}updateValues(e,t){a.Convert.isNull(this.tempValues)&&(this.tempValues=this.values),e.forEach((e=>{var r,n;return t?0==(null===(r=this.values)||void 0===r?void 0:r.includes(e))&&this.values.push(e):(null===(n=this.values)||void 0===n?void 0:n.includes(e))&&this.values.splice(this.values.findIndex((t=>t==e)),1)}))}getMessage(){return a.Convert.isValue(this.values)?`${this.values[0]}외 ${this.values.length}개 선택`:""}get values(){return this._values}set values(e){this._values=e}doCommand(e,t){switch(t.command){case h.Commands.Focused:case h.Commands.Escape:this.cancel();break;case h.Commands.Filter:this.summit(t);default:return super.doCommand(e,t)}return!0}summit(e){e.isSummit&&e.field===this.condition._column.field&&(this.tempValues=void 0)}cancel(){if(a.Convert.isNull(this.tempValues))return;this._values=this.tempValues,this.tempValues=void 0;const e=new c.FilterCommand(this.field);this.fireCommandAsync(this,e)}}class R{static createValueElement(e,t){let r;switch(t){case A.Text:r=R.createTextElement(e);break;case A.Dropdown:r=R.createDrowDownElement(e);break;case A.Number:r=R.createNumberElement(e);break;case A.Date:r=R.createDateElement(e)}return r}static createTextElement(e){return a.JqUtils.adjustElement(e,">input[type=text]","<input type='text'>")}static createNumberElement(e){return a.JqUtils.adjustElement(e,">input[type=number]","<input type='number'>")}static createDrowDownElement(e){return a.JqUtils.adjustElement(e,">select","<select></select>")}static createDateElement(e){return a.JqUtils.adjustElement(e,">input[type=date]","<input type='date'>")}static appendOptions(e,t,r){t.forEach((t=>{const n=a.JqUtils.adjustElement(e,`>option[value='${t}']`,`<option value='${t}'>${t}</option>`);t===r?n.prop("selected",!0):n.prop("selected",!1)}))}}const E=[d.FilterOperators.IsLessThan,d.FilterOperators.IsLessThanOrEqualTo,d.FilterOperators.IsEqualTo,d.FilterOperators.IsNotEqualTo,d.FilterOperators.IsGreaterThan,d.FilterOperators.IsGreaterThanOrEqualTo,d.FilterOperators.In,d.FilterOperators.NotIn,d.FilterOperators.FromTo,d.FilterOperators.NotFromTo,d.FilterOperators.IsNull,d.FilterOperators.IsNotNull,d.FilterOperators.IsEmpty,d.FilterOperators.IsNotEmpty,d.FilterOperators.IsNullOrEmpty,d.FilterOperators.IsNotNullOrEmpty],M={string:[d.FilterOperators.StartsWith,d.FilterOperators.NotStartsWith,d.FilterOperators.EndsWith,d.FilterOperators.NotEndsWith,d.FilterOperators.Contains,d.FilterOperators.NotContains,...E],number:[...E],date:[...E]};var P;({})[d.FilterOperators.StartsWith]=e=>e.filter_startsWith,function(e){e.Top="top",e.Bottom="bottom",e.Left="left",e.Right="right"}(P||(t.Position=P={}));class O{constructor(e){this.gridOffset=e.offset()}move(e,t,r){switch(r){case P.Top:this.positionTop(e,t);break;case P.Left:this.positionLeft(e,t);break;case P.Right:this.positionRight(e,t);break;case P.Bottom:this.positionBottom(e,t)}}positionLeft(e,t){const r=t.offset(),n=r.left-e.outerWidth();n<0?this.positionRight(e,t):e.css({top:r.top-this.gridOffset.top,left:n-this.gridOffset.left})}positionRight(e,t){const r=t.offset();window.innerWidth-r.left-t.outerWidth()<e.outerWidth()?this.positionBottom(e,t):e.css({top:r.top-this.gridOffset.top,left:r.left+t.outerWidth()-this.gridOffset.left})}positionBottom(e,t){const r=t.offset();e.css({top:r.top+t.outerHeight()-this.gridOffset.top,left:r.left-this.gridOffset.left+t.outerWidth()/2-e.outerWidth()/2})}positionTop(e,t){const r=t.offset(),n=r.top-e.outerHeight();r.left;n<0?this.positionBottom(e,t):e.css({top:n-this.gridOffset.top,left:r.left-this.gridOffset.left+t.outerWidth()/2-e.width()/2})}}t.PopupPosition=O;var I,A;t.defaultSearchFilterFunc=(e,t)=>{const r=a.FuzzyMatcher.createFuzzyMatcher(e);return t.filter((e=>r.test(e)))},function(e){e.Row="row",e.Menu="menu"}(I||(t.FilterMode=I={})),function(e){e.Text="text",e.Date="date",e.Number="number",e.Dropdown="dropdown",e.Check="check"}(A||(t.ValueDisplayType=A={}))},4249:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResizeOptionParser=t.AutoFitMode=t.ResizeMode=t.ColumnResize=void 0;const n=r(1374),i=r(3396),o=r(7134),s=r(3211),a=r(3988),l=r(7074),u=r(4772);class c{get option(){var e;return null!==(e=this._option)&&void 0!==e?e:this._grid.config.resizable}set option(e){this._option=e}constructor(e){this.dragging=!1,this.lastMouseX=0,this.isRight=!1,this._grid=e}renderIndecator(e){const t=i.JqUtils.adjustElement(e,`>div.${l.SbCss.resize_indicator}`,`<div class='${l.SbCss.resize_indicator}'></div>`);t.draggable({axis:"x",start:(e,t)=>{this.dragging=!0,this.lastMouseX=e.pageX},stop:(e,r)=>{let n=e.pageX;const i=e.ctrlKey;this.option.mode===h.GuideLine&&this.resizeWithPosition(this.lastMouseX,n,i),t.css({left:"",top:""}),this.dragging=!1},drag:(e,t)=>{if(this.dragging){let t=e.pageX;const r=e.ctrlKey;if(this.option.mode===h.Column)try{this.resizeWithPosition(this.lastMouseX,t,r),this.lastMouseX=t}catch(e){n.Log.warn((()=>e))}}}});const r=this.option.autoFit;i.Convert.isValue(r)&&this._grid.setEvent("columnResize","dblclick",c,(e=>{if(i.Convert.isNull(this.resizableCol))return;const t=this._grid.getColumn(this.resizableCol);i.Convert.isValue(t)&&this.autoFit(t)}),t);const o=e.find(`.${l.SbCss.thead}`);this._grid.setEvent("columnResize","mousemove",c,(t=>{this.mouseMove(t,e)}),o),this.option.mode===h.GuideLine&&t.draggable("option","helper",((t,r)=>{const n=i.JqUtils.adjustElement(e,`>div.${l.SbCss.resize_helper}`,`<div class='${l.SbCss.resize_helper}'></div>`),o=this._grid.container.find(`.${l.SbCss.scroll_body}`);return n.height(o.height()),n}))}mouseMove(e,t){if(!1===this.dragging){const r=this.getJqCol(a.SBGrid3.$(e.target));if(i.Convert.isNull(r))return;let n=e.pageX-r.offset().left;this.resizableCol=this.findResizableCol(r,n);let o=t.find(`>.${l.SbCss.resize_indicator}`);this.moveIndicator(o,r,n)}}getJqCol(e){if(e.is(`.${l.SbCss.indicator}`))return;let t=e.closest(`.${l.SbCss.col}`);return t.length<=0?void 0:t}findResizableCol(e,t){let r=this._grid.getColumn(e);if(i.Convert.isNull(r))return;if(r.part===s.PartType.Fixed)return;let n=this.getDirection(e,t),o=this.findCell(r,n);if(i.Convert.isNull(o))return;return this._grid.getContainer(void 0,o.column,u.PanelType.Caption)}tailDirection(e){const t=this.findCell(e,-1);return 0===this.getBetweenLength(e,t.column)?-1:1}moveIndicator(e,t,r){var n;if(i.Convert.isNull(this.resizableCol))return;const o=this._grid.container.find(`.${l.SbCss.panel}.${l.SbCss.caption}`).offset(),s=this.resizableCol.offset();e.height(this.resizableCol.height());let a=null!==(n=null==s?void 0:s.top)&&void 0!==n?n:0,u=t.offset(),c=t.outerWidth(),h=c/2,d=u.left;d+=r<=h?-2:c,e.css({transform:`translate(${d-o.left}px, ${a-o.top}px)`})}getDirection(e,t){var r;this.isRight=!1;const n=this._grid.getColumn(e);if(i.Convert.isNull(n))return;let a,l=e.width()/2;switch(n.part){case s.PartType.Head:a=(null===(r=n.config)||void 0===r?void 0:r.type)===o.ColumnTypes.Frozen?-1:l<t?0:-1;break;case s.PartType.Tail:const e=this.getBetweenBodyAndTail();this.isRight=e>5,a=this.isRight?l<t?1:0:l<t?0:-1;break;case s.PartType.Body:a=t>l?0:-1;break;case s.PartType.Fixed:return}return a}isLastColumn(e,t){return!!i.Convert.isValue(i.Arrays.dfsSearch([t],(t=>t===e||(i.Convert.isValue(t.columns)?[t.columns.at(-1)]:void 0))))}isTailFirst(e){const t=this._grid.captionLayout,r=i.Utils.findCellFromColumn(t,e);return this._grid.captionMatrix.getCell(r.row,r.col-1).column.config.type===o.ColumnTypes.Frozen}getBetweenLength(e,t){const r=this.getSelector(i.Utils.findCellFromColumn(this._grid.captionLayout,e)),n=this._grid.container.find(`.${l.SbCss.caption}.${l.SbCss.panel}`),o=n.find(r),s=o.position(),a=i.Utils.findCellFromColumn(this._grid.captionLayout,t);if(i.Convert.isNull(a))return;const u=this.getSelector(a),c=n.find(u),h=c.position();return s.left<h.left?h.left-(s.left+o.width()):s.left-(h.left+c.width())}getBetweenBodyAndTail(){if(i.Convert.isEmpty(this._grid.tailColumns))return 0;const e=this._grid.scrollColumns.filter((e=>e.visible)),t=e[e.length-1],r=this._grid.getContainer(void 0,t,u.PanelType.Caption),n=r.offset(),o=this._grid.tailColumns[0],s=this._grid.getContainer(void 0,o,u.PanelType.Caption).offset();return n.left+r.outerWidth()<=s.left?s.left-(n.left+r.outerWidth()):n.left+r.outerWidth()-s.left}findCell(e,t){var r;let n=i.Utils.findCellFromColumn(this._grid.captionLayout,e);if(0===t)return n;const a=this._grid.captionMatrix;let l;try{l=a.getCell(n.row,n.col+t)}catch(e){}finally{if((null===(r=null==l?void 0:l.column)||void 0===r?void 0:r.config.type)===o.ColumnTypes.Frozen&&(l=this.findCell(l.column,t)),(null==l?void 0:l.part)===s.PartType.Fixed)return;return i.Convert.isNull(l)&&this.isLastColumn(e,this._grid.tailColumns[this._grid.tailColumns.length-1])&&(l=n),l}}getSelector(e){return` .${l.SbCss.col}.${l.SbCss.col}-${e.row+1}-${e.col}`}resizeWithPosition(e,t,r){if(i.Convert.isNull(this.resizableCol))return;const n=this._grid.getColumn(this.resizableCol);if(i.Convert.isNull(n))return;let o=n.part==s.PartType.Tail&&this.isRight?e-t:t-e;if(0==o)return;let a=n.width+o;this.resize(n,a,r)}adjustBodyLastColumnWidth(e,t){const r=this.getBetweenBodyAndTail(),n=e.width+r;return n<t?n:t}resize(e,t,r){const{minWidth:i,maxWidth:o}=this.option;t>o&&(t=o),t<i&&(t=i);const a=this.getBetweenBodyAndTail(),l=e.part===s.PartType.Body&&this.isLastColumn(e,this._grid.scrollColumns[this._grid.scrollColumns.length-1])&&a>1?this.adjustBodyLastColumnWidth(e,t):t;n.Log.debug(["------------\x3e",e.config.caption,l,r]),this._grid.setColumnSize(e,l,r)}autoFit(e){const t=e.grid;let r=i.Convert.isValue(e.columns)?e.columns.reduce(((e,t)=>e+this.autoFit(t)),0):0;const o=this.makeSelector(e);if(i.Convert.isNull(o))return;const s=t.container.find(o),u=a.SBGrid3.$(`div.${l.SbCss.panel}.${l.SbCss.hidden}`,t.container);let c=0;return s.each(((e,t)=>{let r=t.cloneNode(!0);this.copyStyle(t,r),u.append(r);const n=u.find(r).outerWidth()+2;c=Math.max(n,c),r.remove()})),c++,r<c?(n.Log.debug((()=>{var t;return["resize ==> ",null===(t=null==e?void 0:e.config)||void 0===t?void 0:t.caption,c]})),this.resize(e,c,!1)):c=r,c}copyStyle(e,t){const r=window.getComputedStyle(e),n=a.SBGrid3.$(t);["padding","margin"].forEach((e=>{["top","bottom","left","right"].forEach((t=>{const i=`${e}-${t}`;n.css(i,r.getPropertyValue(i))}))}));for(var i=e.children,o=t.children,s=0;s<i.length;s++)this.copyStyle(i[s],o[s])}makeSelector(e,t){if((t=null!=t?t:this.option.autoFit).includes(d.Caption)&&t.includes(d.Data)){const t=this.makeSelector(e,[d.Data]),r=this.makeSelector(e,[d.Caption]);return i.Convert.isNull(t)||i.Convert.isNull(r)?void 0:`${t}, ${r}`}if(t.includes(d.Caption)){const t=i.Utils.findCellFromColumn(this._grid.captionLayout,e);return i.Convert.isNull(t)?void 0:`.${l.SbCss.panel}.${l.SbCss.scroll} .${l.SbCss.panel}.${l.SbCss.caption} .${l.SbCss.col}.${l.SbCss.col}-${t.row+1}-${t.col}`}if(t.includes(d.Data)){const t=i.Utils.findCellFromColumn(this._grid.rowLayout,e);return i.Convert.isNull(t)?void 0:`.${l.SbCss.panel}.${l.SbCss.scroll} .${l.SbCss.panel}.${l.SbCss.body} .${l.SbCss.col}.${l.SbCss.col}-${t.row+1}-${t.col}`}}}var h,d;t.ColumnResize=c,function(e){e.GuideLine="guideLine",e.Column="column"}(h||(t.ResizeMode=h={})),function(e){e.Caption="caption",e.Data="data"}(d||(t.AutoFitMode=d={}));class f{static parseResizeOption(e){let t;if(!0===e)t=f.parseResizeOption({mode:h.GuideLine});else{if(!1===e)return;t="string"==typeof e?f.parseResizeOption({mode:i.Convert.parseEnum(h,e)}):{mode:i.Convert.parseEnum(h,e.mode),maxWidth:i.Convert.default(e.maxWidth,void 0),minWidth:i.Convert.default(e.minWidth,10),autoFit:i.Convert.default(e.autoFit,[d.Caption,d.Data],(e=>f.parseAutoFit(e)))}}return t}static parseAutoFit(e){if(!0===e)return[d.Caption,d.Data];if(!1!==e){if("string"==typeof e)return this.parseAutoFit([e]);if(e instanceof Array)return e.map((e=>i.Convert.parseEnum(d,e)));throw`not supported autofit option ${e}`}}}t.ResizeOptionParser=f},7134:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnTypes=void 0,function(e){e.Text="text",e.Number="number",e.Date="date",e.Check="check",e.Radio="radio",e.Dropdown="dropdown",e.MultiText="multitext",e.Html="html",e.Image="image",e.Group="group",e.Tree="tree",e.Calc="calc",e.Hidden="hidden",e.Button="button",e.Combo="combo",e.RowNo="rowno",e.Sticky="sticky",e.Frozen="frozen",e.Detail="detail",e.RowCheck="rowcheck",e.RowReorder="rowreorder",e.Status="status"}(r||(t.ColumnTypes=r={}))},6411:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ComboColumn=t.PopupColumn=t.ItemsColumn=t.defaultFilterRegExp=t.AutoCompleteType=t.ComboViewMode=t.PopupPositionType=void 0;const i=r(3396),o=r(1623),s=r(1880),a=r(3988),l=r(7074),u=r(8154),c=r(9402),h=r(4772),d=r(7392),f=r(2033),p=r(7641);var m,g,v;!function(e){e.Top="top",e.Bottom="bottom",e.Auto="auto"}(m||(t.PopupPositionType=m={})),function(e){e.Value="value",e.Label="label",e.Both="both"}(g||(t.ComboViewMode=g={})),function(e){e.Contains="contains",e.StartsWith="startsWith",e.EndsWith="endsWith"}(v||(t.AutoCompleteType=v={})),t.defaultFilterRegExp=new Map([[v.Contains,e=>new RegExp(i.FuzzyMatcher.createFuzzyMatcher(null==e?void 0:e.trim()).source,"i")],[v.StartsWith,e=>new RegExp("^"+i.FuzzyMatcher.createFuzzyMatcher(null==e?void 0:e.trim()).source,"i")],[v.EndsWith,e=>new RegExp(i.FuzzyMatcher.createFuzzyMatcher(null==e?void 0:e.trim()).source+"$","i")]]);class y extends o.GridColumn{get useFilter(){return this.config.master?this._useFilter=this.config.useFilter:this._useFilter=!1,this._useFilter}get cache(){return this.config.useCache&&i.Convert.isEmpty(this._cache)&&(this._cache=new Map),this._cache}get checkedItems(){return i.Convert.isEmpty(this._checkedItems)&&(this._checkedItems=new Map),this._checkedItems}setCache(e,t){this.cache.set(e,t)}getCache(e){return this.cache.get(e)}hasCache(e){return this.cache.has(e)}get autoComplete(){if(i.Convert.isNull(this._autoComplete))if("boolean"==typeof this.config.autoComplete)this._autoComplete=!0===this.config.autoComplete?new C(this.grid,this,v.Contains):void 0;else switch(this.config.autoComplete){case v.Contains:case v.StartsWith:case v.EndsWith:this._autoComplete=new C(this.grid,this,this.config.autoComplete)}return this._autoComplete}get items(){return i.Convert.isEmpty(this._items)&&(this._items=new Map),this._items}get itemsTemplate(){var e;return null!==(e=this._itemsTemplate)&&void 0!==e?e:this._itemsTemplate=i.Utils.createTemplate(this.config.itemsTemplate)}get itemTemplate(){var e;return null!==(e=this._itemTemplate)&&void 0!==e?e:this._itemTemplate=i.Utils.createTemplate(this.config.itemTemplate)}get noDataTemplate(){var e;return null!==(e=this._noDataTemplate)&&void 0!==e?e:this._noDataTemplate=i.Utils.createTemplate(this.config.noDataTemplate)}get prevFocus(){return this._prevFocus}set prevFocus(e){this._prevFocus!=e&&(this._prevFocus=e)}get parseCheckedItem(){return i.Convert.isEmpty(this._parseCheckedItem)&&(this._parseCheckedItem=this.config.useMultiSelect?this.config.parseCheckedItem:void 0),this._parseCheckedItem}get afterCheckedItem(){return i.Convert.isEmpty(this._afterCheckedItem)&&(this._afterCheckedItem=this.config.useMultiSelect?this.config.afterCheckedItem:void 0),this._afterCheckedItem}get config(){return super.config}constructor(e,t){super(e,t),this.selectItem=(e,t)=>{var r,n;const i="LI"===e.tagName?a.SBGrid3.$(e):a.SBGrid3.$(e).closest(`li.${l.SbCss.comboPopupItem}`),o=i.data("value");if(this.config.useMultiSelect){"INPUT"!==e.tagName&&this.toggle(i);const s=i.find("input[type='checkbox']").prop("checked")?this.checkItem(i,o,t):this.unCheckItem(i,o,t),a=null!==(n=null===(r=this.afterCheckedItem)||void 0===r?void 0:r.call(this,s))&&void 0!==n?n:s;this.fireCommandAsync(this,new c.UpdateCellDataCommand(this,t,null!=a?a:"")),this.checkedItems.set(t.rowIndex,s)}else this.fireCommandAsync(this,new c.UpdateCellDataCommand(this,t,o)),this.fireCommandAsync(this,new u.ClosePopupCommand(this,t))}}parseConfig(e,t){var r,n,o,s,a,l,u=super.parseConfig(e,t);return u.items=i.Convert.default(e.items,null!==(r=null==t?void 0:t.items)&&void 0!==r?r:void 0),u.itemTemplate=i.Convert.default(e.itemTemplate,null!==(n=null==t?void 0:t.itemTemplate)&&void 0!==n?n:void 0),u.itemsTemplate=i.Convert.default(e.itemsTemplate,null!==(o=null==t?void 0:t.itemsTemplate)&&void 0!==o?o:void 0),u.noDataTemplate=i.Convert.default(e.noDataTemplate,null!==(s=null==t?void 0:t.noDataTemplate)&&void 0!==s?s:void 0),u.autoComplete=i.Convert.default(e.autoComplete,null!==(a=null==t?void 0:t.autoComplete)&&void 0!==a?a:void 0),u.itemContent=i.Convert.default(e.itemContent,null!==(l=null==t?void 0:t.itemContent)&&void 0!==l?l:void 0),u}render(e,t){var r;return n(this,void 0,void 0,(function*(){const n=this.items.get(t.rowIndex);if(i.Convert.isValue(this.itemsTemplate)){const t=this.itemsTemplate({items:n});return void(e.html()!=t&&e.html(t))}this.config.useMultiSelect&&(null===(r=this.autoComplete)||void 0===r||r.render(e,t));const o=i.JqUtils.adjustElement(e,`>div.${l.SbCss.wrapPopup}`,`<div class='${l.SbCss.wrapPopup}'></div>`);this.renderItems(o,t,n),this.scrollPosition(o,t)}))}renderItems(e,t,r){const n=i.JqUtils.adjustElement(e,`>ul.${l.SbCss.comboPopupItems}`,`<ul class='${l.SbCss.comboPopupItems}'></ul>`);n.empty(),i.Convert.isValue(r)?this.renderItem(n,t,r):this.renderEmptyMessage(n),this.grid.setEvent("comboItemClick","click",`${this._name}`,(e=>this.selectItem(e.target,t)),n),this.grid.setEvent("comboItemKeydown","keydown",`${this._name}`,(e=>{switch(e.preventDefault(),e.key){case f.KeyboardShortCut.Enter:this.selectItem(e.target,t);break;case f.KeyboardShortCut.Tap:case f.KeyboardShortCut.Escape:this.fireCommandAsync(this,new u.ClosePopupCommand(this,t));break;case f.KeyboardShortCut.ArrowUp:this.fireAboveFocusItem();break;case f.KeyboardShortCut.ArrowDown:this.fireBelowFocusItem()}return!1}),n)}getItemData(e){var t,r,n,o,s;const{comboValue:a,comboLabel:l}=this.config,u=e.isEdit?this.getTemp(e):this.getValue(e);let c;if(this.config.useMultiSelect){const n=i.Convert.isValue(this.parseCheckedItem)?this.parseCheckedItem(u):u instanceof Array?u:[u];this.checkedItems.set(e.rowIndex,null!=n?n:[]),c=null!==(r=null===(t=this.items.get(e.rowIndex))||void 0===t?void 0:t.filter((e=>n.find((t=>t===e[a])))).map((e=>e[l])).join(","))&&void 0!==r?r:""}else c=null!==(s=null===(o=null===(n=this.items.get(e.rowIndex))||void 0===n?void 0:n.find((e=>e[a]===u)))||void 0===o?void 0:o[l])&&void 0!==s?s:"";return{[a]:u,[l]:c}}checkItem(e,t,r){return i.JqUtils.addClass(e,l.SbCss.comboItemSelected),[...this.checkedItems.get(r.rowIndex),t]}unCheckItem(e,t,r){return i.JqUtils.removeClass(e,l.SbCss.comboItemSelected),this.checkedItems.get(r.rowIndex).filter((e=>e!==t))}toggle(e){const t=e.find("input[type='checkbox']").prop("checked");e.find("input[type='checkbox']").prop("checked",!t)}scrollPosition(e,t){var r,n,i,o,s,u,c,h;const d=null!==(o=null!==(i=null===(n=null===(r=this.checkedItems)||void 0===r?void 0:r.get(t.rowIndex))||void 0===n?void 0:n.at(-1))&&void 0!==i?i:this.getTemp(t))&&void 0!==o?o:this.getValue(t),f=a.SBGrid3.$(`li.${l.SbCss.comboPopupItem}`,e).filter(((e,t)=>a.SBGrid3.$(t).data("value")===d)),p=e.siblings(`span.${l.SbCss.comboInner}`);e.get(0).scrollTop=null!==(h=(null!==(u=null===(s=f.get(0))||void 0===s?void 0:s.offsetTop)&&void 0!==u?u:0)-(null===(c=p.get(0))||void 0===c?void 0:c.clientHeight))&&void 0!==h?h:0}renderItem(e,t,r){var n,o,s,a;const u=this.config.comboValue,c=null!==(o=null===(n=this.checkedItems)||void 0===n?void 0:n.get(t.rowIndex))&&void 0!==o?o:this.getTemp(t)instanceof Array?null!==(s=this.getTemp(t))&&void 0!==s?s:this.getValue(t):[null!==(a=this.getTemp(t))&&void 0!==a?a:this.getValue(t)];for(const t in r){const n=i.JqUtils.adjustElement(e,`>li#${l.SbCss.comboPopupItem}-${t}`,`<li id='${l.SbCss.comboPopupItem}-${t}' class='${l.SbCss.comboPopupItem}'></li>`).attr("tabindex",0),o=i.JqUtils.adjustElement(n,`>span.${l.SbCss.text}`,`<span class='${l.SbCss.text}'></span>`),s=r[t];(null==c?void 0:c.find((e=>e===s[u])))?i.JqUtils.addClass(n,l.SbCss.comboItemSelected):i.JqUtils.removeClass(n,l.SbCss.comboItemSelected),n.data("value",s[u]),this.renderCheckbox(o,s,c),i.Convert.isValue(this.itemTemplate)?this.renderItemTemplate(o,s):this.renderItemLabel(o,s)}}renderCheckbox(e,t,r){if(this.config.useMultiSelect){const n=t[this.config.comboValue],o=i.JqUtils.adjustElement(e,`input.${l.SbCss.checkbox}>`,`<input type='checkbox' id='${this._name}_item_${n}' class='${l.SbCss.checkbox}' value='${n}'>`);(null==r?void 0:r.find((e=>e===n)))&&o.attr("checked","checked")}}renderItemLabel(e,t){const{comboLabel:r,comboValue:n,itemContent:o}=this.config;i.Convert.isValue(o)?e.append(o(t[r],t[n])):e.append(t[r])}renderItemTemplate(e,t){if(this.config.useMultiSelect){i.JqUtils.adjustElement(e,`span.${l.SbCss.text}>`,`<span class='${l.SbCss.text}'>`).append(this.itemTemplate(t))}else e.html(this.itemTemplate(t))}renderEmptyMessage(e){const t=i.JqUtils.adjustElement(e,`>li#${l.SbCss.comboItemEmpty}`,`<li class='${l.SbCss.comboItemEmpty}'></li>`);i.Convert.isValue(this.noDataTemplate)&&t.html(this.noDataTemplate(void 0))}doFilterItems(e){const{column:t,items:r,rowItem:n}=e;if(t===this){const e=a.SBGrid3.$(`#${t._name}_popup`,t.grid.container),o=i.JqUtils.adjustElement(e,`>div.${l.SbCss.wrapPopup}`,`<div class='${l.SbCss.wrapPopup}'></div>`);this.renderItems(o,n,r)}}getItems(e){var t,r,i;return n(this,void 0,void 0,(function*(){const{master:n,items:o}=this.config,s=n?null!==(r=null===(t=e.temp)||void 0===t?void 0:t[n])&&void 0!==r?r:null===(i=e.data)||void 0===i?void 0:i[n]:void 0;o instanceof Array?this.getStaticItems(e,o,s):o instanceof Function&&(yield this.getDynamicItems(e,o,s))}))}getStaticItems(e,t,r){const n=[];for(const e of t)this.getFilter(e,this.useFilter,r)&&n.push(e);this.items.set(e.rowIndex,n)}getFilter(e,t,r){if(t){const t=this.config.masterField;return(null==e?void 0:e[t])===r}return!0}getDynamicItems(e,t,r=""){return n(this,void 0,void 0,(function*(){let n;this.config.useCache?(!this.hasCache(r)&&this.setCache(r,yield this.loadItems(t,r)),n=this.getCache(r)):n=yield this.loadItems(t,r),this.getStaticItems(e,n,r)}))}loadItems(e,t){return n(this,void 0,void 0,(function*(){let r=e(this,t);return r instanceof Promise?yield r:r}))}fireBelowFocusItem(){a.SBGrid3.$(document.activeElement).next().trigger("focus")}fireAboveFocusItem(){a.SBGrid3.$(document.activeElement).prev().trigger("focus")}fireInitFocusItem(){const e=a.SBGrid3.$(`div#${this._name}_popup.${l.SbCss.comboPopup}`),t=a.SBGrid3.$(`ul.${l.SbCss.comboPopupItems}`,e),r=a.SBGrid3.$(`li.${l.SbCss.comboItemSelected}`,t);let n;if(e.hasClass(l.SbCss.hidden))n=this.prevFocus;else if(r.length>0)n=r;else switch(e.data("position")){case m.Top:n=t.children().last();break;case m.Bottom:n=t.children().first()}return n}focusItem(e,t){setTimeout((()=>{var r,n,i,o,s;const l=null!==(o=null!==(i=null===(n=null===(r=this.checkedItems)||void 0===r?void 0:r.get(t.rowIndex))||void 0===n?void 0:n.at(-1))&&void 0!==i?i:this.getTemp(t))&&void 0!==o?o:this.getValue(t),u=l instanceof Array?e.filter(((e,t)=>a.SBGrid3.$(t).data("value")===l)).get(0):null===(s=[...e])||void 0===s?void 0:s.at(-1);null==u||u.focus({preventScroll:!0})}),0)}doFocusPopupItem(e){const{column:t,rowItem:r}=e;if(this===t){const e=this.fireInitFocusItem();this.focusItem(e,r)}}doCommand(e,t){switch(t.command){case s.Commands.FocusPopupItem:this.doFocusPopupItem(t);break;case s.Commands.FilterCellData:this.doFilterItems(t);break;default:return super.doCommand(e,t)}return!0}}t.ItemsColumn=y;class b extends y{set popup(e){i.Convert.isEmpty(this._popup)&&(this._popup=e)}get popup(){return this._popup}constructor(e,t){super(e,t)}parseConfig(e,t){var r;let n=super.parseConfig(e,t);return n.popupPosition=i.Convert.default(e.popupPosition,null!==(r=null==t?void 0:t.popupPosition)&&void 0!==r?r:m.Auto),n}render(e,t){return n(this,void 0,void 0,(function*(){this.renderPopup(e,t)}))}renderPopup(e,t){const r=Object.create(null,{render:{get:()=>super.render}});return n(this,void 0,void 0,(function*(){this.popup=i.JqUtils.adjustElement(this.grid.container,`>div#${this._name}_popup`,`<div id='${this._name}_popup' class='${l.SbCss.comboPopup}'></div>`),r.render.call(this,this.popup,t),this.setPosition(e,this.popup)}))}setPosition(e,t){const r=new p.PopupPosition(this.grid.container),n=this.grid.container.offset(),{width:i,bottom:o,left:s}=e.get(0).getBoundingClientRect();let a=this.config.popupPosition;switch(this.config.popupPosition){case m.Top:r.positionTop(t,e);break;case m.Bottom:r.positionBottom(t,e);break;case m.Auto:o+t.height()-n.top<this.grid.height?(a=m.Bottom,r.positionBottom(t,e)):(a=m.Top,r.positionTop(t,e))}t.css({width:i,left:s-n.left}).data("position",a)}doCommand(e,t){switch(t.command){case s.Commands.Focused:case s.Commands.Escape:case s.Commands.ClosePopup:return this.doEscape(t),super.doCommand(e,t);case s.Commands.PopupPosChange:return this.doPopupPosChange(t);case s.Commands.FilterCellData:this.doShowFilterUI(t);default:return super.doCommand(e,t)}}isPopup(){return!!i.Convert.isValue(this.popup)&&!this.popup.hasClass(l.SbCss.hidden)}togglePopup(){this.isPopup()?this.hidePopup():this.showPopup()}hidePopup(){i.Convert.isValue(this.popup)&&(a.SBGrid3.$(`input.${l.SbCss.comboValueText}`,this.popup).val(""),i.JqUtils.addClass(this.popup,l.SbCss.hidden))}showPopup(){i.Convert.isValue(this.popup)&&i.JqUtils.removeClass(this.popup,l.SbCss.hidden)}doShowFilterUI(e){const{column:t,rowItem:r,cell:n}=e;t===this&&(i.Convert.isEmpty(this.popup)?this.renderPopup(n,r):!this.isPopup()&&this.showPopup())}doPopupPosChange(e){const{jqCell:t,column:r}=e;return this===r&&this.setPosition(t,this.popup),!0}doEscape(e){const{column:t,rowItem:r}=e;if(this.isPopup()&&this.hidePopup(),this===t){const e=this.grid.getContainer(r,this,h.PanelType.Body);(a.SBGrid3.$(`span.${l.SbCss.combobox}`,e).length>0?a.SBGrid3.$(`span.${l.SbCss.combobox}`,e):a.SBGrid3.$(this.grid.container)).trigger("focus")}return!0}}t.PopupColumn=b;class w extends b{constructor(e,t){super(e,t)}static create(e,t){return new w(e,t)}parseConfig(e,t){var r,n,o,s,a,l,u,c,h,d;let f=super.parseConfig(e,t);return f.viewMode=i.Convert.default(e.viewMode,null!==(r=null==t?void 0:t.viewMode)&&void 0!==r?r:g.Label),f.useMultiSelect=i.Convert.default(e.useMultiSelect,null!==(n=null==t?void 0:t.useMultiSelect)&&void 0!==n&&n),f.afterCheckedItem=i.Convert.default(e.afterCheckedItem,null!==(o=null==t?void 0:t.afterCheckedItem)&&void 0!==o?o:void 0),f.parseCheckedItem=i.Convert.default(e.parseCheckedItem,null!==(s=null==t?void 0:t.parseCheckedItem)&&void 0!==s?s:void 0),f.master=i.Convert.default(e.master,null!==(a=null==t?void 0:t.master)&&void 0!==a?a:void 0),f.masterField=i.Convert.default(e.masterField,null!==(l=null==t?void 0:t.masterField)&&void 0!==l?l:void 0),f.useFilter=i.Convert.default(e.useFilter,null!==(u=null==t?void 0:t.useFilter)&&void 0!==u?u:void 0),f.useCache=i.Convert.default(e.useCache,null!==(c=null==t?void 0:t.useCache)&&void 0!==c?c:void 0),f.comboLabel=i.Convert.default(e.comboLabel,null!==(h=null==t?void 0:t.comboLabel)&&void 0!==h?h:"label"),f.comboValue=i.Convert.default(e.comboValue,null!==(d=null==t?void 0:t.comboValue)&&void 0!==d?d:"value"),f}renderCell(e,t,r){return n(this,void 0,void 0,(function*(){this.isEdit(t)||(yield this._renderCell(e,t,r))}))}renderEdit(e,t){return n(this,void 0,void 0,(function*(){if(0==this.editable(t))return;const r=yield this._renderCell(e,t,void 0,!0);i.JqUtils.addClass(r,l.SbCss.edit),this.render(r,t),r.contents().filter(((e,t)=>3===t.nodeType)).remove()}))}_renderCell(e,t,r=void 0,o=!1){return n(this,void 0,void 0,(function*(){const n=this.makeCell(e,t,r);if(o=!!this.config.directApplyEdit||o,null==r?void 0:r.merged)return i.Convert.isValue(r)&&n.html(""),n;o&&(n.contents().filter(((e,t)=>3===t.nodeType)).remove(),this.removeElement(n));return n.data("value")!==this.getLabelData(t,r)?this.getItems(t).then((()=>o?this.render(n,t):this.renderContent(n,t))):o?this.render(n,t):this.renderContent(n,t),n}))}renderContent(e,t){var r,n;0!=(null!==(n=null===(r=e[0])||void 0===r?void 0:r.isConnected)&&void 0!==n&&n)&&(i.Convert.isValue(this.cellTemplate)?this.renderTemplate(e,t):this.renderLabel(e,t))}onKeyDown(e,t,r){switch(e.key){case f.KeyboardShortCut.Tap:this.fireCommandAsync(this,new u.ClosePopupCommand(this,r));break;case f.KeyboardShortCut.Space:this.renderCombo(t,r),this.fireCommandAsync(this,new u.FocusPopupItemCommand(this,r));break;case f.KeyboardShortCut.ArrowDown:case f.KeyboardShortCut.ArrowUp:this.fireCommandAsync(this,new u.FocusPopupItemCommand(this,r));case f.KeyboardShortCut.End:case f.KeyboardShortCut.Home:case f.KeyboardShortCut.ArrowLeft:case f.KeyboardShortCut.ArrowRight:case f.KeyboardShortCut.PageUp:case f.KeyboardShortCut.PageDown:return!1}return!0}render(e,t){var r,o,s,a;return n(this,void 0,void 0,(function*(){const n=i.JqUtils.adjustElement(e,`span.${l.SbCss.combobox}`,`<span class=${l.SbCss.combobox}></span>`).attr("tabindex",0),u=this.config.useMultiSelect?this.renderText(n,t):null!==(o=null===(r=this.autoComplete)||void 0===r?void 0:r.render(n,t))&&void 0!==o?o:this.renderText(n,t);((null!==(a=null===(s=this.popup)||void 0===s?void 0:s.length)&&void 0!==a?a:0)<1||!this.isPopup())&&(this.isFocused(t,h.PanelType.Body)&&u.trigger("focus"),this.prevFocus=u),this.renderButton(n),this.grid.setEvent("comboOpenPopup","click",`${this._name}_${t.rowIndex}`,(()=>this.renderCombo(e,t)),n),this.grid.setEvent("comboKeyDown","keydown",`${this._name}_${t.rowIndex}`,(r=>this.onKeyDown(r,e,t)),n)}))}renderText(e,t){const r=i.JqUtils.adjustElement(e,`>span.${l.SbCss.comboInner}`,`<span class='${l.SbCss.comboInner}'></span>`),n=i.JqUtils.adjustElement(r,`>span.${l.SbCss.comboValueText}`,`<span class='${l.SbCss.comboValueText}'></span>`);return this.renderLabel(n,t),e}renderButton(e){const t=i.JqUtils.adjustElement(e,`>span.${l.SbCss.comboButton}`,`<span class='${l.SbCss.comboButton}'></span>`);i.JqUtils.adjustElement(t,`>span.${l.SbCss.comboButton}.${l.SbCss.icon}`,`<span class='${l.SbCss.comboButton} ${l.SbCss.icon} ${l.SbCss.angleBottom}'></span>`)}renderCombo(e,t){return 1===a.SBGrid3.$(`span.${l.SbCss.loading}`,e).length||(this.togglePopup(),super.render(e,t)),!1}renderLabel(e,t){const r=this.getItemData(t),n=r[this.config.comboValue],i=r[this.config.comboLabel];switch(this.config.viewMode){case g.Label:e.html()!=i&&e.html(i);break;case g.Value:e.html()!=n&&e.html(n);break;case g.Both:e.html()!=`${i}[${n}]`&&e.html(`${i}[${n}]`)}e.data("value",n)}renderTemplate(e,t){const r=this.getItemData(t),n=this.cellTemplate(r);e.html()!=n&&e.html(n)}doUpdate(e){var t;const{value:r,rowItem:n,column:o}=e,s=this.grid.getContainer(n,this,h.PanelType.Body),f=a.SBGrid3.$(`.${l.SbCss.cell}`,s),p=null===(t=this.grid.editConfig)||void 0===t?void 0:t.mode;if(this===o){if(f.data("value",r),this.config.directApplyEdit){const e=this.getEditValue(s);p===d.EditMode.inline?this.setTemp(n,s):this.grid.view.clearEdit(),this.setValueDirect(n,e,this.field)}else this.grid.view.isEdit(n)&&this.setTemp(n,s);this.config.directApplyValue||(p===d.EditMode.incell?this.fireCommandAsync(this,new c.UpdateCommand([{key:n.key,value:Object.assign(Object.assign({},n.data),{[this.field]:r})}])):this.fireCommandAsync(this,new u.RefreshCommand({rowStart:null==n?void 0:n.rowIndex,rowEnd:null==n?void 0:n.rowIndex})))}if(this.config.master===o.field){if(o.config.useMultiSelect)return;const e=o.getTemp(n),t=i.Convert.isValue(this.items.get(n.rowIndex).find((t=>this.getFilter(t,!0,e))));this.renderLoading(f,!0),this.getItems(n).then((()=>{this.renderLoading(f,!1)})),this.fireCommandAsync(this,new c.UpdateCellDataCommand(this,n,t?this.getTemp(n):""))}}renderLoading(e,t){const r=a.SBGrid3.$(`.${l.SbCss.comboButton}.${l.SbCss.icon}`,e),n=a.SBGrid3.$(`>.${l.SbCss.combobox}`,e);i.JqUtils.changeClass(r,`${l.SbCss.comboButton} ${l.SbCss.icon} ${t?l.SbCss.loading:l.SbCss.angleBottom}`),n.css("pointer-events",t?"none":"")}removeElement(e){e.children().length<1||e.children().remove()}makeCellClass(e,t){let{cellSelector:r,cellClass:n}=super.makeCellClass(e,t);return n+=` ${l.SbCss.text}`,{cellSelector:r,cellClass:n}}doFocus(e){const{column:t,rowItem:r}=e.current;if(t==this&&i.Convert.isValue(r)){const e=this.grid.getContainer(r,this),t=a.SBGrid3.$(`input#${this._name}_input`,e),n=i.Convert.isValue([...t])?t:a.SBGrid3.$(`span.${l.SbCss.combobox}`,e);null==n||n.trigger("focus"),this.prevFocus=n}}doCommand(e,t){switch(t.command){case s.Commands.UpdateCellData:this.doUpdate(t);break;case s.Commands.Focused:this.doFocus(t);default:return super.doCommand(e,t)}return!0}getEditValue(e){const t=e.find(`>.${l.SbCss.cell}`);return t.length<1?null:t.data("value")}isEditColumn(){return!0}}t.ComboColumn=w;class C{get filter(){return i.Convert.isNull(this._filter)&&(this._filter=t.defaultFilterRegExp.get(this._type)),this._filter}constructor(e,t,r){this._grid=e,this._column=t,this._type=r}get type(){return this._type}filterItems(e,t,r,n){const i=n(r);this._column.fireCommandAsync(this._column,new c.FilterCellDataCommand(this._column,t,i,e)),this._column.fireCommandAsync(this._column,new u.PopupPosChangeCommand(this._column,e))}search(e,t){var r,n,i,o;const{comboValue:s,comboLabel:a,useMultiSelect:l}=this._column.config;if(!l){const l=this._column.items.get(t.rowIndex),h=null!==(o=null!==(n=null===(r=l.find((t=>this.filter(e).test(t[a]))))||void 0===r?void 0:r[s])&&void 0!==n?n:null===(i=l.find((t=>this.filter(e).test(t[s]))))||void 0===i?void 0:i[s])&&void 0!==o?o:void 0;this._column.fireCommandAsync(this._column,new u.ClosePopupCommand(this._column,t)),this._column.fireCommandAsync(this._column,new c.UpdateCellDataCommand(this._column,t,h))}return!0}onKeyDown(e,t){const r=e.target;switch(e.key){case f.KeyboardShortCut.Tap:case f.KeyboardShortCut.Enter:this.search(r.value,t)}return!0}onKeyUp(e,t,r){const{comboValue:n,comboLabel:i}=this._column.config,o=e.target.value;this.filterItems(t,r,o,(e=>{const t=this.filter(e);return this._column.items.get(r.rowIndex).filter((e=>t.test(e[i])||t.test(e[n])))}))}render(e,t){const{comboValue:r,comboLabel:n,useMultiSelect:o}=this._column.config,s=this._column.getItemData(t),u=i.JqUtils.adjustElement(e,`>span.${l.SbCss.comboInner}`,`<span class='${l.SbCss.comboInner}'></span>`),c=i.JqUtils.adjustElement(u,`>input.${l.SbCss.comboValueText}#${this._column._name}_input`,`<input class='${l.SbCss.comboValueText}' id='${this._column._name}_input'></input>`),d=a.SBGrid3.$(`> span.${l.SbCss.cell}`,this._grid.getContainer(t,this._column,h.PanelType.Body));return o?c.val(""):c.val(s[n]).data("value",s[r]),this._grid.setEvent("filterComboData","keyup",`${this._column._name}_${t.rowIndex}`,(e=>this.onKeyUp(e,d,t)),c),this._grid.setEvent("filterComboDataKeydown","keydown",`${this._column._name}_${t.rowIndex}`,(e=>this.onKeyDown(e,t)),c),c.get(0).addEventListener("keydown",(e=>{switch(e.key){case f.KeyboardShortCut.End:case f.KeyboardShortCut.Home:case f.KeyboardShortCut.ArrowLeft:case f.KeyboardShortCut.ArrowRight:e.stopPropagation()}})),c}}},2867:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DateColumn=t.CalendarType=void 0;const i=r(8461),o=r(3396),s=r(1623),a=r(3988),l=r(7074),u=r(2033),c=r(4772),h=r(1880);var d;!function(e){e.Year="year",e.Month="month",e.Date="date",e.YearMonth="yearMonth"}(d||(t.CalendarType=d={}));class f extends s.GridColumn{get format(){return this._format}set format(e){this._format=e}constructor(e,t){super(e,t)}static create(e,t){return new f(e,t)}get config(){return super.config}parseConfig(e,t){var r,n,i,s,a=super.parseConfig(e,t);return a.min=o.Convert.default(e.min,null!==(r=null==t?void 0:t.min)&&void 0!==r?r:void 0),a.max=o.Convert.default(e.max,null!==(n=null==t?void 0:t.max)&&void 0!==n?n:void 0),a.step=o.Convert.default(e.step,null!==(i=null==t?void 0:t.step)&&void 0!==i?i:void 0),a.calendarType=o.Convert.default(e.calendarType,null!==(s=null==t?void 0:t.calendarType)&&void 0!==s?s:d.Date),a}renderCell(e,t,r=void 0){return n(this,void 0,void 0,(function*(){yield this._renderCell(e,t,r)}))}_renderCell(e,t,r=void 0,i=!1){return n(this,void 0,void 0,(function*(){const n=this.makeCell(e,t,r);if(!i){if(null==r?void 0:r.merged)return""!=n.html()&&n.html(""),n;if(o.Convert.isValue(this.cellTemplate)){const e=this.cellTemplate(t.data);n.html()!=e&&n.html(e)}else{const e=this.config.format;let i=this.getLabelData(t,r),s=i;switch(typeof e){case"function":s=e(i);break;case"string":s=o.Convert.formatValue(i,void 0,this.format)}n.text(null!=s?s:"")}}return n}))}renderEdit(e,t){return n(this,void 0,void 0,(function*(){const r=yield this._renderCell(e,t,void 0,!0);let n;o.JqUtils.addClass(r,l.SbCss.edit);let{max:i,min:s,step:h,calendarType:f}=this.config;if(!(a.SBGrid3.$(`input#${this._name}_date`,r).length>0)){switch(f){case d.Date:n=o.JqUtils.adjustElement(r,"input[type=date]",`<input type='date' id='${this._name}_date'/>`),i=null!=i?i:"9999-12-31",this.format="yyyy-MM-dd";break;case d.YearMonth:n=o.JqUtils.adjustElement(r,"input[type=month]",`<input type='month' id='${this._name}_date'/>`),i=null!=i?i:"9999-12",this.format="yyyy-MM";case d.Year:case d.Month:}if(this.grid.setEvent("DateColumnKeyup","keyup",t.index+"_"+this._name,(()=>{this.setTemp(t,e)}),n),this.grid.setEvent("DateColumnChange","change",t.index+"_"+this._name,(()=>{this.setTemp(t,e)}),n),this.grid.setEvent("DateColumnKeyDown","keydown",this._name,(e=>{const t=e.target;switch(e.key){case u.KeyboardShortCut.Home:t.setSelectionRange(0,0);case u.KeyboardShortCut.PageUp:case u.KeyboardShortCut.PageDown:return!1;case u.KeyboardShortCut.End:const e=t.value.length;return t.setSelectionRange(e,e),!1;case u.KeyboardShortCut.ArrowLeft:case u.KeyboardShortCut.ArrowRight:return!1}return!0}),n),n.get(0).addEventListener("keydown",(e=>{switch(e.key){case u.KeyboardShortCut.ArrowUp:case u.KeyboardShortCut.ArrowLeft:case u.KeyboardShortCut.ArrowLeft:case u.KeyboardShortCut.ArrowRight:e.stopPropagation()}return!0})),o.Convert.isEmpty(n.val())){const e=this.getTemp(t);n.val(e)}n.attr({step:h,min:s,max:i})}if(this.isFocused(t,c.PanelType.Body)&&document.activeElement.id===this.grid.name){let e=a.SBGrid3.$(document.activeElement).is("input")?a.SBGrid3.$(document.activeElement):n;setTimeout((()=>{e.get(0).focus({preventScroll:!0})}),0)}r.contents().filter(((e,t)=>3===t.nodeType)).remove()}))}getEditValue(e){return e.find(`>.${l.SbCss.cell}.${l.SbCss.edit}>input`).val()}makeCellClass(e,t){let{cellSelector:r,cellClass:n}=super.makeCellClass(e,t);return n+=` ${l.SbCss.text}`,{cellSelector:r,cellClass:n}}doFocus(e){const{current:{column:t,rowItem:r}}=e;if(this===t&&o.Convert.isValue(r)){const e=this.grid.getContainer(r,this,c.PanelType.Body),t=a.SBGrid3.$("input",e).length>0?a.SBGrid3.$("input",e):this.grid.container;null==t||t.trigger("focus")}}doCommand(e,t){return t.command===h.Commands.Focused&&this.doFocus(t),super.doCommand(e,t)}getTemp(e){return i.DateUtil.dateFormat(super.getTemp(e),this.format,!1)}isEditColumn(){return!0}}t.DateColumn=f},270:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DropDownColumn=void 0;const i=r(3396),o=r(1623),s=r(3988),a=r(7074);class l extends o.GridColumn{constructor(e,t){super(e,t)}static create(e,t){return new l(e,t)}renderEdit(e,t,r){return n(this,void 0,void 0,(function*(){if(!1===this.config.editable)return;yield this.renderCell(e,t,r);const n=s.SBGrid3.$(`>.${a.SbCss.cell}`,e);if(n.hasClass(a.SbCss.edit))return;n.addClass(a.SbCss.edit),n.text("");const o=i.JqUtils.adjustElement(n,">select","<select></select>");(yield this.grid.getGroupByField(this.field)).forEach((e=>i.JqUtils.adjustElement(o,`>option[value='${e}']`,`<option value='${e}'>${e}</option>`)));let l=this.getValue(t);o.find(`>option[value='${l}']`).prop("selected",!0)}))}getEditValue(e){return e.find(`>.${a.SbCss.cell}.${a.SbCss.edit}>select>option:selected`).val()}}t.DropDownColumn=l},3225:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DropDownList=void 0;const i=r(5643),o=r(3396),s=r(3988),a=r(7074);class l{constructor(e,t,r){this._config=e,this._masterElement=r,this._container=t,this.init()}init(){var e;this.addEventListenr();let t=[];null===(e=this._masterElement)||void 0===e||e.trigger("querySelectedItem",(()=>t)),this.updateFilter(t)}render(){return n(this,void 0,void 0,(function*(){this._container.empty(),yield this._config.dataSource.load();let e=yield this._config.dataSource.rows;this._config.groupView?yield this.groupView(e):yield this.flatView(e),this._container.trigger("change")}))}groupView(e){return n(this,void 0,void 0,(function*(){for(let t in e){let r=e[t];r instanceof i.GroupNode?yield this.findChild(r):this.renderLeaf(r,t)}}))}flatView(e){return n(this,void 0,void 0,(function*(){for(let t in e)this.renderLeaf(e[t],t)}))}findChild(e){return n(this,void 0,void 0,(function*(){this.renderGroup(e);let t=yield this._config.dataSource.loader.getRows(e,0,!1);for(let e in t){let r=t[e];r instanceof i.GroupNode?yield this.findChild(r):this.renderLeaf(r,e)}}))}renderGroup(e){let t=e.groupKey,r=l.GROUP_ID++,n=o.JqUtils.adjustElement(this._container,`>option.${a.SbCss.group}.${a.SbCss.group}-${r}`,`<option class='${a.SbCss.group} ${a.SbCss.group}-${r} ${a.SbCss.level}-${e.level}'></option>`);n.text(t),n.prop("disabled")}renderLeaf(e,t){let r=e.data,n=r[this._config.valueField],i=r[this._config.textField];o.JqUtils.adjustElement(this._container,`>option.${a.SbCss.option}-${t}[value='${n}']`,`<option class='${a.SbCss.option}-${t}' value='${n}'></option>`).text(i)}updateFilter(e){let t=(null==e?void 0:e.length)>0?e[0]:void 0;this._config.dataSource.filters.forEach((e=>{const r=e.field instanceof Array?e.field[0]:e.field;null==t||t.hasOwnProperty(r);(null==t?void 0:t.hasOwnProperty(e.field))&&(e.values=t[r])})),this._config.dataSource.reload()}addEventListenr(){var e,t;this._container.off("querySelectedItem"),this._container.on("querySelectedItem",((e,t)=>{this.querySelectedItem(s.SBGrid3.$(e.target),t())})),null===(e=this._masterElement)||void 0===e||e.off("change"),null===(t=this._masterElement)||void 0===t||t.on("change",(e=>{this.masterChaged(this._container)}))}querySelectedItem(e,t){let r=s.SBGrid3.$(">option:selected",e).index(),n=this._config.dataSource.rows[r];t.push(null==n?void 0:n.data)}masterChaged(e){var t;let r=[];null===(t=this._masterElement)||void 0===t||t.trigger("querySelectedItem",(()=>r)),this.updateFilter(r),this.render()}}t.DropDownList=l,l.GROUP_ID=0},9114:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RowReorderColumn=t.RowCheckColumn=t.FrozenColumn=t.DetailColumn=t.DetailClickColumn=t.StickyColumn=t.CustomColumn=t.StatusColumn=t.RowNoColumn=t.FixedColumn=void 0;const i=r(8154),o=r(5643),s=r(1374),a=r(3396),l=r(7134),u=r(1623),c=r(7392),h=r(3988),d=r(7074),f=r(4772),p=r(109);class m extends u.GridColumn{editable(){return!1}get sortable(){return c.SortMode.None}get visible(){return!0}makeCell(e,t,r){const{cellSelector:n,cellClass:i}=this.makeCellClass(t,r),o=new Set,s=a.JqUtils.adjustElement(e,`>span.${n}`,`<span class='${i}'></span>`,void 0,o);return a.JqUtils.movetoTrash(this.grid.trashCan,e,o),a.JqUtils.changeClass(s,i),s}renderCell(e,t,r){return n(this,void 0,void 0,(function*(){const n=this.makeCell(e,t,r);if(a.Convert.isValue(this.cellTemplate)){const e=this.cellTemplate(t.data);n.html()!=e&&n.html(e)}else{const e=this.getValue(t);a.JqUtils.adjustHtml(n,e)}}))}renderEmpty(e,t){return n(this,void 0,void 0,(function*(){const r=`${this.cellSelector} ${t}`,n=a.JqUtils.adjustElement(e,`>span.${this.cellSelector}`,`<span class='${r}'></span>`);a.JqUtils.changeClass(n,r),a.JqUtils.adjustHtml(n,"")}))}renderCaption(e){return n(this,void 0,void 0,(function*(){yield this.renderEmpty(e,d.SbCss.caption)}))}renderHeader(e,t){return n(this,void 0,void 0,(function*(){yield this.renderEmpty(e,d.SbCss.header)}))}renderGroupFooter(e,t,r){return n(this,void 0,void 0,(function*(){yield this.renderEmpty(e,d.SbCss.group)}))}renderGroupHeader(e,t,r){return n(this,void 0,void 0,(function*(){yield this.renderEmpty(e,d.SbCss.group)}))}renderTreeFooter(e,t,r){return n(this,void 0,void 0,(function*(){yield this.renderEmpty(e,d.SbCss.footer)}))}}t.FixedColumn=m;class g extends m{renderCell(e,t){return n(this,void 0,void 0,(function*(){let r=a.JqUtils.adjustElement(e,`>span.${this.cellSelector}`,`<span class='${d.SbCss.cell} ${this.cellSelector}'></span>`),n="";n=this.grid.virtualRow?a.Convert.isNull(t)?"":(t.rowIndex+1).toString():a.Convert.isEmpty(this.grid.dataConfig.groups)?(t.rowIndex+1+this.grid.pageNo*this.grid.pageSize).toString():this.grid.pageNo+1+"-"+(t.rowIndex+1),r.html(n),a.JqUtils.addClass(r,d.SbCss.rowno)}))}getValue(e){return a.Convert.isNull(e)?"":(e.rowIndex+1).toString()}renderCaption(e){return n(this,void 0,void 0,(function*(){const t=`${this.cellSelector} ${d.SbCss.caption} ${d.SbCss.center}`,r=a.JqUtils.adjustElement(e,`>span.${this.cellSelector}`,`<span class='${t}'></span>`);a.JqUtils.changeClass(r,t);a.JqUtils.adjustElement(r,`>.${d.SbCss.center}`,`<div class='${d.SbCss.tools} ${d.SbCss.align} ${d.SbCss.center}'></div>`);const n=a.JqUtils.adjustElement(r,`>.${d.SbCss.center}`,`<span class='${d.SbCss.title}'></span>`);a.JqUtils.adjustHtml(n,"#"),this.grid.config.copyable&&this.grid.setEvent("rowNoColumn","click","rowNoClick",(()=>this.selectAll()),e)}))}renderGroupHeader(e,t,r){return n(this,void 0,void 0,(function*(){return yield this.renderCell(e,t)}))}renderGroupFooter(e,t,r){return n(this,void 0,void 0,(function*(){return yield this.renderCell(e,t)}))}renderTreeFooter(e,t,r){return n(this,void 0,void 0,(function*(){return yield this.renderCell(e,t)}))}selectAll(){const e=this.grid.focusManager.focus;e.panelType===f.PanelType.Caption&&e.column==this&&this.fireCommandAsync(this,new i.SelectCommand)}}t.RowNoColumn=g;t.StatusColumn=class extends g{renderCell(e,t){return n(this,void 0,void 0,(function*(){let r=`${d.SbCss.cell} ${this.cellSelector} ${d.SbCss.icon} ${d.SbCss.toClass(t.status)}`,n=a.JqUtils.adjustElement(e,`>span.${this.cellSelector}`,`<span class='${r}'></span>`);a.JqUtils.changeClass(n,r);let i=a.Convert.isNull(t)?"":this.getValue(t);a.JqUtils.adjustHtml(n,i)}))}renderCaption(e){return n(this,void 0,void 0,(function*(){this.renderEmpty(e,`${d.SbCss.caption} ${d.SbCss.icon} ${d.SbCss.update}`)}))}getValue(e){return""}makeColClass(e,t){return d.SbCss.status}};t.CustomColumn=class extends g{constructor(e,t,r){super(e,t),this._render=r}renderCell(e,t){return n(this,void 0,void 0,(function*(){let r=a.JqUtils.adjustElement(e,`>span.${this.cellSelector}`,`<span class='${d.SbCss.cell} ${this.cellSelector}'></span>`);r.remove(),this._render(r.get(0),t,this)}))}getValue(e){let t="";switch(e.status){case p.DataStatus.Delete:t+=" -";break;case p.DataStatus.Insert:t+=" +";break;case p.DataStatus.Update:t+=" *"}return t}};t.StickyColumn=class extends m{constructor(){super(...arguments),this.onStickyMousedown=e=>n(this,void 0,void 0,(function*(){if(0!=e.button)return;let t=h.SBGrid3.$(e.target),r=yield this.grid.getRowItem(t);this.grid.toggleStickyRow(null==r?void 0:r.key)}))}selectable(){return!1}renderCell(e,t,r){const i=Object.create(null,{makeCell:{get:()=>super.makeCell}});return n(this,void 0,void 0,(function*(){let n=i.makeCell.call(this,e,t,r);(t.node instanceof o.GroupNode||t.node instanceof o.FooterNode)&&n.html(""),a.JqUtils.addClass(n.parent(),d.SbCss.sticky),this.grid.eventManager.setHandler("stickyColumnMousedown","mousedown",this.constructor.name,this.onStickyMousedown,e.toArray())}))}makeCellClass(e,t){const r=super.makeCellClass(e,t);return e.node instanceof o.GroupNode||e.node instanceof o.FooterNode?r.cellClass+=" ":r.cellClass+=` ${d.SbCss.icon} ${d.SbCss.sticky} ${e.isSticky?d.SbCss.pined:""}`,r}makeColClass(e,t){return d.SbCss.sticky}renderCaption(e){return n(this,void 0,void 0,(function*(){this.renderEmpty(e,`${d.SbCss.caption} ${d.SbCss.cell} ${d.SbCss.icon} ${d.SbCss.sticky}`)}))}renderEdit(e,t,r){return n(this,void 0,void 0,(function*(){yield this.renderCell(e,t,r)}))}};t.DetailClickColumn=class extends m{constructor(){super(...arguments),this.onDetailClick=e=>n(this,void 0,void 0,(function*(){if(0!=e.button)return;let t=h.SBGrid3.$(e.target),r=yield this.grid.getRowItem(t);s.Log.debug((()=>["detail",r])),a.Convert.isValue(r)&&(r.isDetail=!(1==r.isDetail),this.fireCommandAsync(this,new i.RefreshCommand(this.grid.mergeRow?{}:{rowStart:r.rowIndex})))}))}selectable(){return!1}renderCell(e,t){return n(this,void 0,void 0,(function*(){const r=`${d.SbCss.cell} ${this.cellSelector} ${d.SbCss.detail} ${d.SbCss.icon} ${t.isDetail?d.SbCss.open:d.SbCss.close}`;let n=a.JqUtils.adjustElement(e,`>span.${this.cellSelector}`,`<span class='${r}'></span>`);a.JqUtils.changeClass(n,r),this.grid.eventManager.setHandler("detailColumnClick","mousedown",this.constructor.name,this.onDetailClick,e.toArray())}))}renderCaption(e){return n(this,void 0,void 0,(function*(){a.JqUtils.adjustElement(e,`>span.${this.cellSelector}`,`<span class='${d.SbCss.caption} ${d.SbCss.header} ${this.cellSelector}'></span>`).html("")}))}};t.DetailColumn=class extends m{selectable(){return!1}constructor(e,t){t.type=l.ColumnTypes.Detail,super(e,t)}renderDetail(e,t,r){var i,o,s,l,u,h,d,f,p,m;return n(this,void 0,void 0,(function*(){let n;if(null!==(l=null===(s=null===(o=null===(i=t.detailContext)||void 0===i?void 0:i.container)||void 0===o?void 0:o.get(0))||void 0===s?void 0:s.isConnected)&&void 0!==l&&l)n=t.detailContext.container,e.append(n);else if((null!==(d=null===(h=null===(u=t.detailContext)||void 0===u?void 0:u.container)||void 0===h?void 0:h.get(0).children.length)&&void 0!==d?d:0)>0)n=t.detailContext.container,e.append(n);else{n=this.makeCell(e,t,r),a.Convert.isValue(this.grid.config.detailOverflow)&&n.css("overflow",this.grid.config.detailOverflow);const i=(null!==(f=t.detailTemplate)&&void 0!==f?f:this.grid.detailTemplate)(t.data);a.JqUtils.adjustHtml(n,i);const o=null!==(p=t.detailInit)&&void 0!==p?p:this.grid.detailInit;if(a.Convert.isValue(o)){const e=null!==(m=t.detailContext)&&void 0!==m?m:t.detailContext=new c.DetailContext(this.grid,t,n,new Map);e.container=n,o(e)}}return n}))}};class v extends u.GridColumn{renderCell(e,t){return n(this,void 0,void 0,(function*(){a.JqUtils.adjustElement(e,`>span.${this.cellSelector}`,`<span class='${d.SbCss.cell} ${this.cellSelector}'></span>`).html("")}))}renderCaption(e){return n(this,void 0,void 0,(function*(){a.JqUtils.adjustElement(e,`>span.${this.cellSelector}`,`<span class='${d.SbCss.caption} ${d.SbCss.header} ${this.cellSelector}'></span>`).html("")}))}}t.FrozenColumn=v;class y extends m{constructor(){super(...arguments),this.onClick=e=>n(this,void 0,void 0,(function*(){if(0!=e.button)return;let t=h.SBGrid3.$(e.target),r=yield this.grid.getRowItem(t);a.Convert.isNull(r)||(r.isCheck=!r.isCheck,this.fireCommandAsync(this,new i.RefreshCommand({rowStart:r.rowIndex,rowEnd:r.rowIndex})))}))}static create(e,t){return new y(e,t)}getValue(e){return e.isCheck}makeCell(e,t,r){const{cellSelector:n,cellClass:i}=this.makeCellClass(t,r),o=a.JqUtils.adjustElement(e,`>span.${n}`,`<span class='${i}'></span>`);return a.JqUtils.changeClass(o,i),o}renderCell(e,t,r){return n(this,void 0,void 0,(function*(){const n=this.makeCell(e,t,r);if(a.Convert.isValue(this.cellTemplate)){const e=this.cellTemplate(t.data);n.html()!=e&&n.html(e)}this.grid.eventManager.setHandler("checkColumnClick","mousedown",this.constructor.name,this.onClick,e.toArray())}))}makeCellClass(e,t){let{cellSelector:r,cellClass:n}=super.makeCellClass(e,t);return n+=" "+d.SbCss.icon,n+=e.isCheck?" "+d.SbCss.checked:"",{cellSelector:r,cellClass:n}}renderEdit(e,t,r){return n(this,void 0,void 0,(function*(){this.renderCell(e,t,r)}))}renderCaption(e){return n(this,void 0,void 0,(function*(){this.renderCaptionCheck(e,void 0,void 0)}))}toggleCaptionCheck(){super.toggleCaptionCheck();for(const e of this.grid.rows)a.Convert.isNull(e)||(e.isCheck=this.captionChecked);this.fireCommandAsync(this,new i.RefreshCommand)}}t.RowCheckColumn=y;class b extends m{constructor(e,t){t.selectable=!1,super(e,t)}static create(e,t){return new b(e,t)}renderCell(e,t,r){return n(this,void 0,void 0,(function*(){const n=this.makeCell(e,t,r);if(a.Convert.isValue(this.cellTemplate)){const e=this.cellTemplate(t.data);n.html()!=e&&n.html(e)}t.reorderable?this.grid.rowReorder.addDraggableRow(e):a.Convert.isValue(e.data("ui-draggable"))&&e.draggable("destroy")}))}makeCellClass(e,t){let{cellSelector:r,cellClass:n}=super.makeCellClass(e,t);return e.reorderable&&(n+=" "+d.SbCss.icon),{cellSelector:r,cellClass:n}}renderCaption(e){return n(this,void 0,void 0,(function*(){this.renderEmpty(e,`${d.SbCss.caption} ${d.SbCss.icon} ${d.SbCss.rowreorder}`)}))}}t.RowReorderColumn=b},1623:function(e,t,r){"use strict";var n=r(9755),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnRender=t.GridColumn=void 0;const o=r(235),s=r(4683),a=r(6328),l=r(5643),u=r(3396),c=r(3211),h=r(3988),d=r(7074),f=r(2519),p=r(4772),m=r(7392),g=r(249),v=r(7641),y=r(8154),b=r(9402),w=r(3905),C=r(1880);class _ extends o.Publisher{get captionChecked(){var e;return null!==(e=this._captionChecked)&&void 0!==e?e:this._captionChecked=!1}set captionChecked(e){this._captionChecked=e}get filterRenderer(){var e;return null!==(e=this._filterRenderer)&&void 0!==e?e:this._filterRenderer=u.Convert.isValue(this.config.filter)?new v.FilterRenderer(this.config.filter,this):void 0}set filterRenderer(e){this._filterRenderer=e}get align(){return this.config.align}get valign(){return this.config.valign}constructor(e,t){var r,o,s,l;super(e),this._level=0,this._colSpan=1,this._getGroupMap=new Map,this.onCaptionMenuClick=e=>i(this,void 0,void 0,(function*(){const t=this.getCol(h.SBGrid3.$(e.target)),r=this.grid.getColumn(t),i=yield this.grid.getRowItem(t);if(null!=r&&(this.grid.container.find(`.${d.SbCss.menu_group}`).not(`.${d.SbCss.menu_group}.${d.SbCss.col}-${r.index}`).remove(),this.grid.container.find(`.${d.SbCss.context_menu}`).remove()),this.grid.container.find(`.${d.SbCss.menu_group}.${d.SbCss.col}-${r.index}`).length>0)this.grid.container.find(`.${d.SbCss.menu_group}.${d.SbCss.col}-${r.index}`).remove();else{const o=h.SBGrid3.$(e.target).closest(`.${d.SbCss.panel}.${d.SbCss.caption}`),s=u.JqUtils.adjustElement(o,`>div.${d.SbCss.menu_group}.${d.SbCss.col}-${r.index}`,`<div class='${d.SbCss.menu_group} ${d.SbCss.col}-${r.index}'></span>`),a=new g.GridMenu(this._grid,g.GridMenuParser.parse(this.config.captionMenu),r,i);null==r.parent?a.render(h.SBGrid3.$(s),g.MenuType.CaptionMenu,void 0):a.render(h.SBGrid3.$(s),g.MenuType.CaptionMenu,r.parent);const l=h.SBGrid3.$(`.${d.SbCss.panel}.${d.SbCss.group}`);let c=0;null!=l.height()&&(c=l.height());const f=h.SBGrid3.$(e.target).closest(`.${d.SbCss.grid}`);this.grid.container.height()<this.grid.container.find(s).children().height()&&(s.children().css("height",this.grid.container.height()/2),s.children().css("overflow-y","scroll")),this.grid.container.find(s).css("top",t.offset().top-f.offset().top+t.height()),this.grid.container.find(s).css("left",t.offset().left-f.offset().left+t.width()-n(e.target).width()),f.width()+this.grid.container.offset().left<h.SBGrid3.$(e.target).offset().left+h.SBGrid3.$(s).width()&&this.grid.container.find(s).css("left",this.grid.container.width()-this.grid.container.find(s).width()-this.grid.container.find(`.${d.SbCss.scrollv}`).width()-4)}})),this.onCaptionSortClick=e=>{var t;if(e.preventDefault(),this.grid.config.sortable==m.SortMode.None||this.config.sortable==m.SortMode.None)return;e.offsetX;const r=e.offsetY,n=h.SBGrid3.$(e.target).height(),i=(null!==(t=this.grid.dataConfig.orders)&&void 0!==t?t:[]).find((e=>e.field==this.field));let o=a.SortDir.Asc,s=u.Convert.isNull(i)||i.dir==a.SortDir.Desc;this.config.sortable==m.SortMode.Toggle&&(o=r<n/2?a.SortDir.Asc:a.SortDir.Desc,s=u.Convert.isNull(i)||(null==i?void 0:i.dir)==o),this.grid.toggleSort(this.config.field,s,o)},this.onCaptionCheckClick=e=>{if(e.preventDefault(),!0!==this.config.captionCheck)return;e.offsetX,e.offsetY,h.SBGrid3.$(e.target).height();this.toggleCaptionCheck()},this._config=this.parseConfig(t,e.config.defaultColumn),u.Convert.isNull(this._config.dataType)&&u.Convert.isValue(null===(o=null===(r=e.dataConfig.schema)||void 0===r?void 0:r.fields)||void 0===o?void 0:o[t.field])&&(this._config.dataType=u.Convert.parseEnum(u.DataType,null===(l=null===(s=e.dataConfig.schema)||void 0===s?void 0:s.fields[t.field])||void 0===l?void 0:l.dataType)),this._grid=e}get type(){return this.config.type}get name(){var e,t;return u.Convert.isEmpty(this.config.caption)&&u.Convert.isEmpty(this.config.field)?super.name:(null!==(e=this.config.caption)&&void 0!==e?e:"")+"_"+(null!==(t=this.config.field)&&void 0!==t?t:"")}get visible(){var e;return null!==(e=this.grid.exporting?this.config.exportVisible:void 0)&&void 0!==e?e:this.config.visible}get sortable(){return this.config.sortable}get dataType(){return this.config.dataType}get captionRender(){var e;return null!==(e=this._captionRender)&&void 0!==e?e:this._captionRender=new p.CaptionRender(this.grid,this.captionLayout)}static create(e,t){return new _(e,t)}get config(){return this._config}get tooltip(){return this.config.tooltip}parseConfig(e,t){return c.GridColumnParser.parseColumn(e,t,!1)}get columns(){var e;return null!==(e=this._columns)&&void 0!==e?e:this._columns=new Array}get grid(){return this._grid}set grid(e){this._grid=e,super.publisher=e}get field(){return this.config.field}get index(){var e;return null!==(e=this._index)&&void 0!==e?e:0}set index(e){this._index=e}get colIndex(){var e;return null!==(e=this._colIndex)&&void 0!==e?e:0}set colIndex(e){this._colIndex=e}get level(){return this._level}set level(e){this._level=e}get parent(){return this._parent}set parent(e){this._parent=e}get colSpan(){return this._colSpan}set colSpan(e){this._colSpan=e}get width(){return this.config.width}set width(e){this.config.width=e}get minWidth(){return this.config.minWidth}get maxWidth(){return this.config.maxWidth}get unit(){return this.config.unit}get groups(){return this.config.groups}selectable(e){return 0!=this.grid.canGridCommand(new w.GridSelectCommand(null==e?void 0:e.key,this))&&0!=this.evalBoolean(this.config.selectable,e)}editable(e){var t;return!u.Convert.isValue(null===(t=this.config.calc)||void 0===t?void 0:t.eval)&&(0!=this.grid.canGridCommand(new w.GridEditCommand(null==e?void 0:e.key,this))&&0!=this.evalBoolean(this.config.editable,e))}get part(){return this.config.part}get isSticky(){return this.part==c.PartType.Sticky}get cellSelector(){return d.SbCss.col+"-"+this.index}get headers(){var e,t;return null!==(e=this._headers)&&void 0!==e?e:this._headers=S.parseColumnTemplate(null===(t=this.config.total)||void 0===t?void 0:t.header)}get footers(){var e,t;return null!==(e=this._footers)&&void 0!==e?e:this._footers=S.parseColumnTemplate(null===(t=this.config.total)||void 0===t?void 0:t.footer)}get treeFooters(){var e,t;return null!==(e=this._treeFooters)&&void 0!==e?e:this._treeFooters=S.parseColumnTemplate(null===(t=this.config.tree)||void 0===t?void 0:t.footer)}get groupMap(){var e;return null!==(e=this._groupMap)&&void 0!==e?e:this._groupMap=this.makeGroupMap()}get groupFootersMap(){var e;return null!==(e=this._groupFootersMap)&&void 0!==e?e:this._groupFootersMap=this.makeRenderMap((e=>e.footer))}get groupHeadersMap(){var e;return null!==(e=this._groupHeadersMap)&&void 0!==e?e:this._groupHeadersMap=this.makeRenderMap((e=>e.header))}get hasHeader(){return u.Convert.isValue(this.headers)}get hasFooter(){return u.Convert.isValue(this.footers)}get mergeRow(){return this.config.mergeRow}get mergeColumn(){return this.config.mergeColumn}get captionLayout(){return this.config.captionLayout}get caption(){return this.config.caption}get isSorted(){var e;return(null!==(e=this.grid.dataConfig.orders)&&void 0!==e?e:[]).some((e=>e.field==this.field))}get contextMenu(){return u.Convert.isEmpty(this.config.contextMenu)?this.grid.contextMenu:this.config.contextMenu}hasGroupHeader(e){return 0!=this.groupMap.size&&!u.Convert.isEmpty(this.getGroup(e).headers)}hasGroupFooter(e){return 0!=this.groupMap.size&&!u.Convert.isEmpty(this.getGroup(e).footers)}makeGroupMap(){const e=new Map;if(this.config.groups instanceof Array)for(const t of this.config.groups){const r=t.group.split(",");for(let n of r)u.Convert.isWhite(n)||(n=n.trim(),e.has(n)?e.get(n).push(t):e.set(n,[t]))}return e}makeRenderMap(e){const t=new Map;for(const r of this.groupMap.keys()){const n=this.groupMap.get(r),i=S.parseAggregateGroup(n,e);t.set(r,i)}return t}getGroup(e){var t,r,n;if(this._getGroupMap.has(e))return this._getGroupMap.get(e);const i={groups:null!==(t=this.groupMap.get(e))&&void 0!==t?t:[],footers:null!==(r=this.groupFootersMap.get(e))&&void 0!==r?r:[],headers:null!==(n=this.groupHeadersMap.get(e))&&void 0!==n?n:[],titles:this.groupTitles};return this.groupMap.has("*")&&(i.groups=i.groups.concat(this.groupMap.get("*"))),this.groupFootersMap.has("*")&&(i.footers=i.footers.concat(this.groupFootersMap.get("*"))),this.groupHeadersMap.has("*")&&(i.headers=i.headers.concat(this.groupHeadersMap.get("*"))),this._getGroupMap.set(e,i),i}toArray(e){return e instanceof Array?e:u.Convert.isNull(e)?[]:[e]}get cellTemplate(){var e;return null!==(e=this._cellTemplate)&&void 0!==e?e:this._cellTemplate=u.Utils.createTemplate(this.config.cellTemplate)}get captionTemplate(){var e;return null!==(e=this._captionTemplate)&&void 0!==e?e:this._captionTemplate=u.Utils.createTemplate(this.config.captionTemplate)}get groupTitles(){var e,t;return null!==(e=this._groupTitles)&&void 0!==e?e:this._groupTitles=S.parseColumnTemplate(null===(t=this.config.groupTitle)||void 0===t?void 0:t.title)}getFieldValue(e,t){const{field:r,format:n,default:i}=this.config;let o=e.hasOwnProperty(r)?e[r]:void 0;return t&&(o=u.Convert.isNull(o)?i:o),u.Convert.isValue(n)?(o=u.Convert.isValue(this.dataType)?u.Convert.convertType(o,this.dataType):o,u.Convert.formatValue(o,void 0,n)):o}getValue(e,t=void 0){var r;let n="";if(e.node instanceof l.FooterNode||e.node instanceof l.GroupNode)n=this.getGroupValue(e);else if(u.Convert.isValue(t)&&t.merge&&"function"==typeof this.mergeColumn)n=this.mergeColumn(e.data,e);else{const t=e.data;n=u.Convert.isNull(t)?"":null!==(r=this.getFieldValue(t,e.isEdit))&&void 0!==r?r:""}return n}getTemp(e){const t=e.temp;return u.Convert.isNull(t)?"":this.getFieldValue(t,e.isEdit)}setValueDirect(e,t,r){const n=new w.GridValueCommand(e.key,t,this.field);this.grid.canGridCommand(n)&&this.fireCommand(this,new b.UpdateCommand([{value:t,key:e.key,field:r}]))}setTemp(e,t){var r;const n=this.getEditValue(t);if(e.setTemp(this.field,n),u.Convert.isValue(this.config.validators)){if(0==(null===(r=this.grid.editConfig)||void 0===r?void 0:r.immediateValidationCheck)&&!this.config.directApplyValue)return;const t=this.isValid(e);this.grid.config.editable.immediateValidationCheck&&this.fireCommandAsync(this,new y.RefreshCommand({rowStart:e.rowIndex,rowEnd:e.rowIndex,colStart:this.index,colEnd:this.index})),t.state===f.ValidationState.Valid&&this.config.directApplyValue&&(this.setValueDirect(e,n,this.field),this.fireCommandAsync(this,new y.RefreshCommand({rowStart:e.rowIndex,rowEnd:e.rowIndex})))}else this.config.directApplyValue&&(this.setValueDirect(e,n,this.field),this.fireCommandAsync(this,new y.RefreshCommand({rowStart:e.rowIndex,rowEnd:e.rowIndex})))}getLabelData(e,t){var r;return null!==(r=this.getValue(e,t))&&void 0!==r?r:""}renderCell(e,t,r){return i(this,void 0,void 0,(function*(){const n=this.makeCell(e,t,r);if(null==r?void 0:r.merged)u.JqUtils.adjustHtml(n,"");else if(u.Convert.isValue(this.cellTemplate)){const e=this.cellTemplate(t.data);n.html()!=e&&n.html(e)}else{let i=this.getValue(t,r);u.Convert.isEmpty(i)&&(i=this.renderPlaceHolder(i,t,e)),u.JqUtils.adjustHtml(n,i)}}))}renderPlaceHolder(e,t,r){const n=this.config.placeHolder;return u.Convert.isEmpty(e)&&u.Convert.isValue(n)?(e="function"==typeof n?n(t.data):n,u.JqUtils.addClass(r,d.SbCss.place_holder)):u.JqUtils.removeClass(r,d.SbCss.place_holder),e}makeCell(e,t,r){(null==t?void 0:t.node)instanceof l.GroupNode?u.JqUtils.addClass(e,d.SbCss.hidden):u.JqUtils.removeClass(e,d.SbCss.hidden);const{cellSelector:n,cellClass:i}=this.makeCellClass(t,r),o=new Set,s=u.JqUtils.adjustElement(e,`>span.${n}`,`<span class='${i}'></span>`,void 0,o);return u.JqUtils.changeClass(s,i),e.hasClass(d.SbCss.invalid)&&u.JqUtils.adjustElement(e,`>span.${d.SbCss.invalid}.${d.SbCss.indicator}`,`<span class='${d.SbCss.invalid} ${d.SbCss.indicator}'></span>`,void 0,o),u.JqUtils.movetoTrash(this.grid.trashCan,e,o),s}makeColClass(e,t){return""}makeCellClass(e,t){const r=this.cellSelector;let n=`${d.SbCss.cell} ${this.cellSelector} ${d.SbCss.toClass(this.config.type)}`;return u.Convert.isEmpty(this.getValue(e))&&u.Convert.isValue(this.config.placeHolderCss)&&(n+=" "+("function"==typeof this.config.placeHolderCss?this.config.placeHolderCss(e.data):this.config.placeHolderCss)),{cellSelector:r,cellClass:n}}renderEdit(e,t,r){return i(this,void 0,void 0,(function*(){let n=this.getValue(t,r);const i=this.makeCell(e,t,r);u.JqUtils.adjustHtml(i,n)}))}renderDetail(e,t,r){return i(this,void 0,void 0,(function*(){const n=this.makeCell(e,t,r);return""!=n.html()&&n.html(""),n}))}renderCaption(e){var t;return i(this,void 0,void 0,(function*(){const r=null!==(t=this.config.caption)&&void 0!==t?t:"",n=this.cellSelector,i=new Set,o=u.JqUtils.adjustElement(e,`>.${n}`,`<span class='${d.SbCss.caption} ${d.SbCss.column} ${n}'></span>`,void 0,i);u.JqUtils.movetoTrash(this.grid.trashCan,e,i);u.Convert.isEmpty(this.config.captionTemplate)?this.captionRender.render(o,((e,t,n,i)=>{if(!u.Convert.isEmpty(t))switch(t.toLowerCase()){case"caption":this.renderCaptionTitle(e,r,n,i);break;case"sort":this.renderCaptionSort(e,n,i);break;case"filter":this.renderCaptionFilter(e,n,i);break;case"menu":this.renderCaptionMenu(e,n,i);break;case"check":this.renderCaptionCheck(e,n,i);break;default:this.renderCaptionTemplate(e,t,n,i)}})):u.JqUtils.adjustHtml(o,this.captionTemplate(this))}))}get captionTemplateMap(){var e;return null!==(e=this._captionTemplateMap)&&void 0!==e?e:this._captionTemplateMap=new Map}renderCaptionTemplate(e,t,r,n){if(u.Convert.isEmpty(t))return;let i=this.captionTemplateMap.get(t);if(u.Convert.isNull(i)&&(i=u.Utils.createTemplate(t),this.captionTemplateMap.set(t,i)),u.Convert.isValue(i)){const o=u.JqUtils.adjustElement(e,`>span[name='${t}']`,`<span name='${t}' class='${d.SbCss.template}'></span>`,{data:"index",index:r},n),s=i(this);u.JqUtils.adjustHtml(o,s)}}renderCaptionMenu(e,t,r){if(u.Convert.isNull(this.config.captionMenu)||0==this.config.captionMenu)return;const n=u.JqUtils.adjustElement(e,`>span.${d.SbCss.icon}.${d.SbCss.menu}`,`<span class='${d.SbCss.icon} ${d.SbCss.menu}'></span>`,{data:"index",index:t},r);this.grid.setEvent("columnCaptionMenuClick","click",this.name,this.onCaptionMenuClick,n)}renderCaptionCheck(e,t,r){if(!0!==this.config.captionCheck)return;const n=u.JqUtils.adjustElement(e,`>span.${d.SbCss.check}`,`<span class='${d.SbCss.check}'><span class='${d.SbCss.checkbox}'></span></span>`,{data:"index",index:t},r),i=u.JqUtils.adjustElement(n,`>span.${d.SbCss.checkbox}`,`<span class='${d.SbCss.checkbox}'></span>`);this.captionChecked?u.JqUtils.addClass(i,d.SbCss.checked):u.JqUtils.removeClass(i,d.SbCss.checked),this.grid.setEvent("columnCaptionCheckClick","click",this.name,this.onCaptionCheckClick,n)}getCol(e){var t;if(0!=(null!==(t=null==e?void 0:e.length)&&void 0!==t?t:0))return e.closest(`.${d.SbCss.col}`)}renderCaptionSort(e,t,r){var n,i;if(this.grid.config.sortable==m.SortMode.None||this.config.sortable==m.SortMode.None||u.Convert.isEmpty(this.config.field))return;const o=u.JqUtils.adjustElement(e,`>span.${d.SbCss.order}`,`<span class='${d.SbCss.order}'></span>`,{data:"index",index:t},r),s=u.JqUtils.adjustElement(o,`>span.${d.SbCss.icon}.${d.SbCss.sort}`,`<span class='${d.SbCss.icon} ${d.SbCss.sort}'></span>`),l=[].concat(null!==(n=this.grid.dataConfig.groups)&&void 0!==n?n:[]);null===(i=this.grid.dataConfig.orders)||void 0===i||i.forEach((e=>l.findIndex((t=>t.field==e.field))<0&&l.push(e)));const c=l.findIndex((e=>e.field==this.config.field));if(c>=0){const e=l[c].dir==a.SortDir.Asc?d.SbCss.asc:d.SbCss.desc;if(u.JqUtils.changeClass(s,`${d.SbCss.icon} ${d.SbCss.sort} ${e}`),this.grid.config.multiSort||u.Convert.isValue(this.grid.dataConfig.groups)){const e=u.JqUtils.adjustElement(o,`>span.${d.SbCss.icon}.${d.SbCss.no}`,`<span class='${d.SbCss.icon} ${d.SbCss.no}'></span>`);u.JqUtils.adjustHtml(e,c+1)}}else{u.JqUtils.changeClass(s,`${d.SbCss.icon} ${d.SbCss.sort}`);const e=u.JqUtils.adjustElement(o,`>span.${d.SbCss.icon}.${d.SbCss.no}`,`<span class='${d.SbCss.icon} ${d.SbCss.no}'></span>`);u.JqUtils.adjustHtml(e,"")}this.grid.setEvent("columnCaptionSortClick","click",this.config,this.onCaptionSortClick,s)}renderCaptionTitle(e,t,r,n){const i=u.JqUtils.adjustElement(e,`>span.${d.SbCss.title}`,`<span class='${d.SbCss.title}'></span>`,{data:"index",index:r},n);u.Convert.isEmpty(this.config.captionTemplate)?u.JqUtils.adjustHtml(i,t):u.JqUtils.adjustHtml(i,this.captionTemplate(this))}renderCaptionFilter(e,t,r){this.grid.config.filterable==v.FilterMode.Menu&&u.Convert.isValue(this.filterRenderer)&&this.filterRenderer.renderCaptionFilter(e,this,t,r)}renderFilterColumn(e){var t;u.Convert.isValue(this.filterRenderer)&&(null===(t=this.filterRenderer)||void 0===t||t.renderFilterColumn(e,this))}toggleCaptionCheck(){const e=new w.GridCaptionCheckCommand(this,this.captionChecked);1==this.grid.canGridCommand(e)&&(e.checked=1!=this.captionChecked,this.grid.doGridCommand(e),this.captionChecked=e.checked,this.fireCommandAsync(this,new y.RefreshCommand))}getHeaderValue(e=void 0){return this.getHeaderFooterValue(this.headers,e)}getFooterValue(e=void 0){return this.getHeaderFooterValue(this.footers,e)}getHeaderFooterValue(e,t){var r,n;const i=_.makeAggregateData(this.grid.dataConfig.aggregates,null===(r=this.config.total)||void 0===r?void 0:r.aggregates);let o;if(u.Convert.isNull(t)){o=[];for(const t of e)o.push(t.render(i))}else{const r=null===(n=e.find(((e,r)=>t==r)))||void 0===n?void 0:n.render;u.Convert.isValue(r)&&(o=r(i))}return o}getGroupValue(e){let t,r;if(e.node instanceof l.GroupNode)t=e.node.igroup,r=e.node.data;else{if(!(e.node instanceof l.FooterNode))return"";t=e.node.parent.igroup,r=e.node.parent.data}const{groups:n,headers:i,footers:o}=this.getGroup(t.field);if(u.Convert.isValue(n)){const s=u.Convert.mergeData(r,_.makeGroupData(t.aggregates,n,e)),a=e.node instanceof l.GroupNode?i:o,c=[];for(const e of a)c.push(e.render(s));return c}}renderHeader(e,t){var r;return i(this,void 0,void 0,(function*(){const n=u.JqUtils.adjustElement(e,`>span.${this.cellSelector}`,`<span class='${d.SbCss.header} ${d.SbCss.text} ${this.cellSelector}'></span>`);let i="";if(u.Convert.isValue(this.headers)){const n=null===(r=this.headers[t.row])||void 0===r?void 0:r.align;u.Convert.isValue(n)&&u.JqUtils.addClass(e,d.SbCss.toClass(n)),i=this.getHeaderValue(t.row)}n.html(i)}))}renderFooter(e,t){var r;return i(this,void 0,void 0,(function*(){const n=u.JqUtils.adjustElement(e,`>span.${this.cellSelector}`,`<span class='${d.SbCss.footer} ${d.SbCss.text} ${this.cellSelector}'></span>`);let i="";if(u.Convert.isValue(this.footers)){const e=null===(r=this.footers[t.row])||void 0===r?void 0:r.align;u.Convert.isValue(e)&&u.JqUtils.addClass(n,d.SbCss.toClass(e)),i=this.getFooterValue(t.row)}n.html(i)}))}static getAggregateMap(e){var t;const r=new Map;for(const n of null!=e?e:[]){const e=null!==(t=n.require)&&void 0!==t?t:[],i=s.Aggregate.getResultName(n,e,!0);r.set(i,n)}return r}renderGroupFooter(e,t,r){var n;return i(this,void 0,void 0,(function*(){const i=u.JqUtils.adjustElement(e,`>span.${this.cellSelector}`,`<span class='${d.SbCss.group} ${d.SbCss.footer} ${d.SbCss.cell} ${this.cellSelector}'></span>`);let o="";if(t.node instanceof l.FooterNode&&t.node.parent instanceof l.GroupNode){const e=t.node.parent.igroup,{groups:s,footers:a}=this.getGroup(e.field);if(u.Convert.isValue(s)){const l=_.makeGroupData(e.aggregates,s,t.parent),c=a[r.row];u.Convert.isValue(c)&&(u.Convert.isValue(c.align)&&u.JqUtils.addClass(i,d.SbCss.toClass(c.align)),o=null!==(n=c.render(l))&&void 0!==n?n:"")}}i.html()!=o&&i.html(o)}))}renderGroupHeader(e,t,r){var n;return i(this,void 0,void 0,(function*(){const i=u.JqUtils.adjustElement(e,`>span.${this.cellSelector}`,`<span class='${d.SbCss.group} ${d.SbCss.header} ${d.SbCss.cell} ${this.cellSelector}'></span>`);let o="";if(t.node instanceof l.GroupNode){const e=t.node.igroup,{groups:s,headers:a}=this.getGroup(e.field);if(u.Convert.isValue(s)){const l=_.makeGroupData(e.aggregates,s,t),c=a[r.row];u.Convert.isValue(c)&&(u.Convert.isValue(c.align)&&u.JqUtils.addClass(i,d.SbCss.toClass(c.align)),o=null!==(n=c.render(l))&&void 0!==n?n:"")}u.JqUtils.removeClass(i,d.SbCss.invalid)}i.html()!=o&&i.html(o)}))}getGroupTitle(e,t=0){var r,n;let i="";if(e.node instanceof l.GroupNode){const o=e.node.igroup,{groups:s,titles:a}=this.getGroup(o.field);if(u.Convert.isValue(a)){const s=this.makeGroupTitle(o.aggregates,this.config.groupTitle,e);i=null!==(n=null===(r=a[t])||void 0===r?void 0:r.render(s))&&void 0!==n?n:""}}return i}renderGroupTitle(e,t,r){return i(this,void 0,void 0,(function*(){const n=u.JqUtils.adjustElement(e,`>span.${this.cellSelector}`,`<span class='${d.SbCss.group} ${d.SbCss.header} ${d.SbCss.cell} ${this.cellSelector}'></span>`),i=this.getGroupTitle(t,r.row);n.html()!=i&&n.html(i)}))}renderTreeFooter(e,t,r){var n,o;return i(this,void 0,void 0,(function*(){const i=u.JqUtils.adjustElement(e,`>span.${this.cellSelector}`,`<span class='${d.SbCss.tree} ${d.SbCss.footer} ${d.SbCss.cell} ${this.cellSelector}'></span>`);let s="";if(t.node instanceof l.FooterNode&&t.node.parent instanceof l.TreeNode&&u.Convert.isValue(null===(n=this.config.tree)||void 0===n?void 0:n.aggregates)&&u.Convert.isValue(t.node.aggregates)){const e=_.makeTreeData(t.node.aggregates,this.config.tree,t.parent),n=this.treeFooters[r.row];u.Convert.isValue(n)&&(u.Convert.isValue(n.align)&&u.JqUtils.addClass(i,d.SbCss.toClass(n.align)),s=null!==(o=n.render(e))&&void 0!==o?o:"")}i.html()!=s&&i.html(s)}))}static makeAggregateData(e,t){const r=_.getAggregateMap(e),n=_.getAggregateMap(t),i={};for(const e of n.keys())if(r.has(e)){const t=n.get(e);t.value="function"==typeof t.eval?t.eval(i):r.get(e).value,i[t.field]=t.value,"string"==typeof t.func?u.Convert.isValue(t.payload)?i[t.func+"_"+t.payload]=t.value:i[t.func]=t.value:"string"==typeof t.eval&&(u.Convert.isValue(t.payload)?i[t.eval+"_"+t.payload]=t.value:i[t.eval]=t.value)}return i}static makeGroupData(e,t,r){var n;let i={_rowItem:r,_data:r.data};if(i=u.Convert.mergeData(i,null==r?void 0:r.data),u.Convert.isEmpty(e)||u.Convert.isEmpty(t))return i;for(const r of e)for(const e of t)for(const t of null!==(n=e.aggregates)&&void 0!==n?n:[])0!=s.Aggregate.aggregateEquals(t,r)&&_.makeAggregateValue(t,i,r.value);return i}static makeAggregateValue(e,t,r){u.Convert.isValue(e.field)&&(t[e.field]=r);const n=s.Aggregate.fieldsJoin(e.require,"_"),i="string"==typeof e.func?e.func:"func",o=e.payload;"string"==typeof e.func&&(t[i]=r),t[n+"_"+i]=r,u.Convert.isValue(e.payload)&&(t[n+"_"+i+"_"+o]=r,t[i+"_"+o]=r)}makeGroupTitle(e,t,r){var n;let i={_rowItem:r,_data:r.data};if(i=u.Convert.mergeData(i,null==r?void 0:r.data),r.node instanceof l.GroupNode){const e=r.node;i._groupKey=e.groupKey,i._groupField=e.igroup.field,i._groupNode=e,i._aggregates=e.igroup.aggregates}if(u.Convert.isEmpty(e)||u.Convert.isEmpty(t))return i;for(const r of e)for(const e of null!==(n=t.aggregates)&&void 0!==n?n:[])0!=s.Aggregate.aggregateEquals(e,r)&&_.makeAggregateValue(e,i,r.value);return i}static makeTreeData(e,t,r){let n={_rowItem:r,_data:r.data};if(n=u.Convert.mergeData(n,null==r?void 0:r.data),u.Convert.isEmpty(e)||u.Convert.isEmpty(t))return n;for(const r of e)for(const e of t.aggregates)0!=s.Aggregate.aggregateEquals(e,r)&&_.makeAggregateValue(e,n,r.value);return n}getEditValue(e){}isValid(e){if(u.Convert.isNull(this.config.validators))return{state:f.ValidationState.Valid};let t=this.getValue(e);return this.isEdit(e)&&(t=this.getTemp(e)),f.ColumnValidator.isValid(this.config.validators,t)}mergeEditData(e,t){if(!this.editable(t))return;const r=this.getTemp(t),n=new w.GridValueCommand(t.key,r,this.field);this.grid.canGridCommand(n)&&(e[this.field]=r)}isFocused(e,t){return this.grid.focusManager.isFocused(e,this,t)}isEdit(e){var t,r,n,i,o;const s=null===(t=this.grid.editConfig)||void 0===t?void 0:t.mode;if(u.Convert.isNull(s))return!1;if(s==m.EditMode.incell&&(null===(r=this.grid.focusManager.focus)||void 0===r?void 0:r.column)!=this)return!1;if(1!=this.editable(e))return!1;if(e.node instanceof l.GroupItem){if(l.GroupItem.getGroupKeys(e.node).get(this.field))return!1}else if(e.node instanceof l.TreeNode){const e=null===(n=this.grid.dataConfig.tree)||void 0===n?void 0:n.parent;if(u.Convert.isValue(e)&&"string"==typeof e&&this.field===e)return!1}if(e.isEdit)switch(s){case m.EditMode.none:case m.EditMode.popup:return!1;case m.EditMode.inline:return this.evalBoolean(this.config.editable,e);case m.EditMode.incell:{const t=this.grid.focusManager.focus;return!(null===(o=this.evalBoolean(null===(i=null==t?void 0:t.column)||void 0===i?void 0:i.config.editable,e))||void 0===o||!o)&&(this==(null==t?void 0:t.column)&&e==(null==t?void 0:t.rowItem)&&(null==t?void 0:t.panelType)==p.PanelType.Body)}}return!1}evalBoolean(e,t){if(!u.Convert.isNull(e))return"function"==typeof e?e(t.data):e}focus(e){const{current:{column:t,rowItem:r}}=e;if(this===t&&u.Convert.isValue(r)){if(this.isEditColumn())return;this.grid.container.trigger("focus")}}doCommand(e,t){return t.command===C.Commands.Focused&&this.focus(t),super.doCommand(e,t)}isEditColumn(){return!1}}t.GridColumn=_;class S{constructor(e,t=""){var r,n,i,o,s;this.render=e=>u.Convert.isValue(this.template)?this.renderTemplate(e):this.renderText(e),this._field=null!==(r=e.field)&&void 0!==r?r:"",this._group=null!=t?t:"",this._suffix=null!==(n=e.suffix)&&void 0!==n?n:"",this._prefix=null!==(i=e.prefix)&&void 0!==i?i:"",this._cssClass=null!==(o=e.cssClass)&&void 0!==o?o:"",this._template=null!==(s=e.template)&&void 0!==s?s:"",this._format=e.format,this._dataType=e.dataType,this._align=e.align}get template(){var e;return null!==(e=this._templateFunc)&&void 0!==e?e:this._templateFunc=u.Utils.createTemplate(this._template)}get originalTemplate(){return this._template}get cssClass(){return this._cssClass}get group(){return this._group}get prefix(){return this._prefix}get suffix(){return this._suffix}get field(){return this._field}get dataType(){return this._dataType}get format(){return this._format}get align(){return this._align}renderTemplate(e){if(u.Convert.isValue(this._format))for(const t in e){let r=e[t];r=u.Convert.convertType(r,this._dataType),e[t]=u.Convert.formatValue(r,void 0,this._format)}return this.template(e)}renderText(e){var t,r;let n=u.Convert.convertType(e[this._field],this._dataType);return n=u.Convert.formatValue(n,void 0,this._format),`${null!==(t=this._prefix)&&void 0!==t?t:""}${null!=n?n:""}${null!==(r=this._suffix)&&void 0!==r?r:""}`}static convertType(e,t,r){return u.Convert.isValue(r)&&(u.Convert.isEmpty(t)?e=u.Convert.convertType(e,r):e[t]=u.Convert.convertType(e[t],r)),e}static parseColumnTemplate(e,t=""){return u.Convert.isNull(e)?[]:e instanceof Array?e.map((e=>new S(e,t))):[new S(e,t)]}static parseAggregateGroup(e,t){let r=[];return(e instanceof Array?e:[e]).forEach((e=>{const n=t(e);u.Convert.isEmpty(n)||(r=r.concat(this.parseColumnTemplate(n,e.group)))})),r}}var x;t.ColumnRender=S,function(e){e.Caption="caption",e.Sort="sort",e.Filter="filter"}(x||(x={}))},3211:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GridColumnParser=t.SelectedStatus=t.VertAlign=t.TextAlign=t.Unit=t.PartType=void 0;const n=r(4683),i=r(6328),o=r(3396),s=r(7134),a=r(7392),l=r(2519),u=r(249),c=r(9172),h=r(3988);var d,f,p,m,g;!function(e){e.Fixed="fixed",e.Head="head",e.Body="body",e.Sticky="sticky",e.Tail="tail"}(d||(t.PartType=d={})),function(e){e.Pixel="px",e.Percent="%",e.Fraction="fr"}(f||(t.Unit=f={})),function(e){e.Left="left",e.Center="center",e.Right="right"}(p||(t.TextAlign=p={})),function(e){e.Top="top",e.Center="center",e.Bottom="bottom"}(m||(t.VertAlign=m={})),function(e){e[e.RowSelected=0]="RowSelected",e[e.RowUnSelected=1]="RowUnSelected",e[e.CellUnSelected=2]="CellUnSelected",e[e.CellSelected=3]="CellSelected"}(g||(t.SelectedStatus=g={}));class v{static parseColumn(e,t,r){var n,l,c,g,y,b,w,C,_,S,x,k,T,R,E,M,P,O,I,A,j,D,N,F,$,L,B,V,H,z,U,q,G,W,K,J,X,Y,Z,Q,ee,te,re,ne,ie,oe,se,ae,le,ue,ce,he,de,fe,pe,me,ge,ve,ye,be,we,Ce,_e,Se,xe,ke,Te,Re,Ee,Me,Pe,Oe,Ie,Ae,je,De,Ne,Fe,$e,Le,Be,Ve,He,ze,Ue,qe,Ge,We,Ke,Je,Xe,Ye,Ze,Qe,et;const tt=r?{}:e;tt.field=e.field,tt.dataType=o.Convert.default(e.dataType,null!==(n=null==t?void 0:t.dataType)&&void 0!==n?n:void 0,(e=>o.Convert.parseEnum(o.DataType,e))),tt.default=o.Convert.default(e.default,void 0),tt.caption=o.Convert.default(e.caption,e.field),tt.cellTemplate=e.cellTemplate,tt.editTemplate=e.editTemplate,tt.captionTemplate=e.captionTemplate,tt.captionLayout=o.Convert.default(e.captionLayout,null!==(l=null==t?void 0:t.captionLayout)&&void 0!==l?l:a.GridParser.parsePanelLayout(null===(g=null===(c=h.SBGrid3.default)||void 0===c?void 0:c.defaultColumn)||void 0===g?void 0:g.captionLayout),v.parseCaptionLayout),tt.placeHolder=o.Convert.default(e.placeHolder,null==t?void 0:t.placeHolder),tt.placeHolderCss=o.Convert.default(e.placeHolderCss,null==t?void 0:t.placeHolderCss),tt.captionCss=o.Convert.default(e.captionCss,null!==(y=null==t?void 0:t.captionCss)&&void 0!==y?y:""),tt.colCss=o.Convert.default(e.colCss,null!==(b=null==t?void 0:t.colCss)&&void 0!==b?b:""),tt.columns=o.Convert.default(e.columns,void 0,(e=>v.parseColumns(e,t,!0))),tt.command=o.Convert.default(e.command,void 0,v.parseCommand),tt.format=o.Convert.default(e.format,null!==(w=null==t?void 0:t.format)&&void 0!==w?w:"",v.parseFormat),tt.part=o.Convert.default(e.part,null!==(C=null==t?void 0:t.part)&&void 0!==C?C:d.Body,(e=>o.Convert.parseEnum(d,e))),tt.type=o.Convert.default(e.type,null!==(_=null==t?void 0:t.type)&&void 0!==_?_:s.ColumnTypes.Text,(e=>o.Convert.parseEnum(s.ColumnTypes,e))),tt.width=o.Convert.default(e.width,null!==(S=null==t?void 0:t.width)&&void 0!==S?S:null===(k=null===(x=h.SBGrid3.default)||void 0===x?void 0:x.defaultColumn)||void 0===k?void 0:k.width,v.parseWidth),tt.unit=o.Convert.default(e.unit,null!==(T=null==t?void 0:t.unit)&&void 0!==T?T:f.Pixel,(e=>o.Convert.parseEnum(f,e))),tt.minWidth=o.Convert.default(e.minWidth,null!==(R=null==t?void 0:t.minWidth)&&void 0!==R?R:null===(M=null===(E=h.SBGrid3.default)||void 0===E?void 0:E.defaultColumn)||void 0===M?void 0:M.minWidth,v.parseWidth),tt.maxWidth=o.Convert.default(e.maxWidth,null!==(P=null==t?void 0:t.maxWidth)&&void 0!==P?P:null===(I=null===(O=h.SBGrid3.default)||void 0===O?void 0:O.defaultColumn)||void 0===I?void 0:I.maxWidth,v.parseWidth),tt.editable=o.Convert.default(e.editable,null!==(A=null==t?void 0:t.editable)&&void 0!==A?A:null===(D=null===(j=h.SBGrid3.default)||void 0===j?void 0:j.defaultColumn)||void 0===D?void 0:D.editable),tt.selectable=o.Convert.default(e.selectable,null!==(N=null==t?void 0:t.selectable)&&void 0!==N?N:null===($=null===(F=h.SBGrid3.default)||void 0===F?void 0:F.defaultColumn)||void 0===$?void 0:$.selectable),tt.sortable=o.Convert.default(e.sortable,null!==(L=null==t?void 0:t.sortable)&&void 0!==L?L:null===(V=null===(B=h.SBGrid3.default)||void 0===B?void 0:B.defaultColumn)||void 0===V?void 0:V.sortable,a.GridParser.parseSortable),tt.groupable=o.Convert.default(e.groupable,null!==(H=null==t?void 0:t.groupable)&&void 0!==H?H:null===(U=null===(z=h.SBGrid3.default)||void 0===z?void 0:z.defaultColumn)||void 0===U?void 0:U.groupable),tt.captionCheck=o.Convert.default(e.captionCheck,null!==(q=null==t?void 0:t.captionCheck)&&void 0!==q?q:null===(W=null===(G=h.SBGrid3.default)||void 0===G?void 0:G.defaultColumn)||void 0===W?void 0:W.captionCheck),tt.align=o.Convert.default(e.align,null!==(K=null==t?void 0:t.align)&&void 0!==K?K:null===(X=null===(J=h.SBGrid3.default)||void 0===J?void 0:J.defaultColumn)||void 0===X?void 0:X.align,(e=>o.Convert.parseEnum(p,e))),tt.valign=o.Convert.default(e.valign,null!==(ee=null!==(Y=null==t?void 0:t.valign)&&void 0!==Y?Y:null===(Q=null===(Z=h.SBGrid3.default)||void 0===Z?void 0:Z.defaultColumn)||void 0===Q?void 0:Q.valign)&&void 0!==ee?ee:m.Bottom,(e=>o.Convert.parseEnum(m,e))),tt.visible=o.Convert.default(e.visible,null!==(te=null==t?void 0:t.visible)&&void 0!==te?te:null===(ne=null===(re=h.SBGrid3.default)||void 0===re?void 0:re.defaultColumn)||void 0===ne?void 0:ne.visible),tt.exportVisible=o.Convert.default(e.exportVisible,void 0),tt.captionVisible=o.Convert.default(e.captionVisible,null!==(ie=null==t?void 0:t.captionVisible)&&void 0!==ie?ie:null===(se=null===(oe=h.SBGrid3.default)||void 0===oe?void 0:oe.defaultColumn)||void 0===se?void 0:se.captionVisible),tt.groupTitle=o.Convert.default(e.groupTitle,null!==(ae=null==t?void 0:t.groupTitle)&&void 0!==ae?ae:null===(ue=null===(le=h.SBGrid3.default)||void 0===le?void 0:le.defaultColumn)||void 0===ue?void 0:ue.groupTitle,(()=>v.parseAggregateTtitle(e.field,e.groupTitle,null==t?void 0:t.groupTitle))),tt.total=o.Convert.default(e.total,o.Convert.isValue(null==t?void 0:t.total)?v.parseAggregateTotal(e.field,null==t?void 0:t.total):void 0,(()=>v.parseAggregateTotal(e.field,e.total))),tt.groups=o.Convert.default(e.groups,null!==(ce=null==t?void 0:t.groups)&&void 0!==ce?ce:null===(de=null===(he=h.SBGrid3.default)||void 0===he?void 0:he.defaultColumn)||void 0===de?void 0:de.groups,(()=>v.parseAggregateGroups(e.field,e.groups))),tt.tree=o.Convert.default(e.tree,null!==(fe=null==t?void 0:t.tree)&&void 0!==fe?fe:null===(me=null===(pe=h.SBGrid3.default)||void 0===pe?void 0:pe.defaultColumn)||void 0===me?void 0:me.tree,(()=>v.parseAggregateTree(e.field,e.tree))),tt.calc=o.Convert.default(e.calc,null!==(ge=null==t?void 0:t.calc)&&void 0!==ge?ge:null===(ye=null===(ve=h.SBGrid3.default)||void 0===ve?void 0:ve.defaultColumn)||void 0===ye?void 0:ye.calc,(()=>i.DataSourceParser.parseCalculation(e.calc,e.field))),tt.dropDownConfig=o.Convert.default(e.dropDownConfig,null===(we=null===(be=h.SBGrid3.default)||void 0===be?void 0:be.defaultColumn)||void 0===we?void 0:we.dropDownConfig),tt.validators=o.Convert.default(e.validators,null!==(Ce=null==t?void 0:t.validators)&&void 0!==Ce?Ce:null===(Se=null===(_e=h.SBGrid3.default)||void 0===_e?void 0:_e.defaultColumn)||void 0===Se?void 0:Se.validators,(()=>v.parseValidation(e.validators))),tt.mergeRow=o.Convert.default(e.mergeRow,null!==(xe=null==t?void 0:t.mergeRow)&&void 0!==xe?xe:null===(Te=null===(ke=h.SBGrid3.default)||void 0===ke?void 0:ke.defaultColumn)||void 0===Te?void 0:Te.mergeRow),tt.mergeColumn=o.Convert.default(e.mergeColumn,null!==(Re=null==t?void 0:t.mergeColumn)&&void 0!==Re?Re:null===(Me=null===(Ee=h.SBGrid3.default)||void 0===Ee?void 0:Ee.defaultColumn)||void 0===Me?void 0:Me.mergeColumn),tt.filter=o.Convert.default(e.filter,null!==(Pe=null==t?void 0:t.filter)&&void 0!==Pe?Pe:null===(Ie=null===(Oe=h.SBGrid3.default)||void 0===Oe?void 0:Oe.defaultColumn)||void 0===Ie?void 0:Ie.filter,(()=>v.parseFilter(e.filter,e.field))),tt.skipPaste=o.Convert.default(e.skipPaste,null!==(Ae=null==t?void 0:t.skipPaste)&&void 0!==Ae?Ae:null===(De=null===(je=h.SBGrid3.default)||void 0===je?void 0:je.defaultColumn)||void 0===De?void 0:De.skipPaste),tt.tooltip=o.Convert.default(e.tooltip,null!==(Ne=null==t?void 0:t.tooltip)&&void 0!==Ne?Ne:e.validators?v.parseColumnTooltip({validation:!0},e.validators):void 0,(t=>v.parseColumnTooltip(t,e.validators))),tt.captionMenu=o.Convert.default(e.captionMenu,null!==(Fe=null==t?void 0:t.captionMenu)&&void 0!==Fe?Fe:null===(Le=null===($e=h.SBGrid3.default)||void 0===$e?void 0:$e.defaultColumn)||void 0===Le?void 0:Le.captionMenu,(e=>{var r,n,i;return u.GridMenuParser.parse(e,null!==(r=null==t?void 0:t.captionMenu)&&void 0!==r?r:null===(i=null===(n=h.SBGrid3.default)||void 0===n?void 0:n.defaultColumn)||void 0===i?void 0:i.defaultCaptionMenu)})),tt.contextMenu=o.Convert.default(e.contextMenu,null!==(Be=null==t?void 0:t.contextMenu)&&void 0!==Be?Be:null===(He=null===(Ve=h.SBGrid3.default)||void 0===Ve?void 0:Ve.defaultColumn)||void 0===He?void 0:He.contextMenu,(e=>{var r,n,i;return u.GridMenuParser.parse(e,null!==(r=null==t?void 0:t.contextMenu)&&void 0!==r?r:null===(i=null===(n=h.SBGrid3.default)||void 0===n?void 0:n.defaultColumn)||void 0===i?void 0:i.defaultContextMenu)})),tt.defaultCaptionMenu=o.Convert.default(e.defaultCaptionMenu,null!==(ze=null==t?void 0:t.defaultCaptionMenu)&&void 0!==ze?ze:null===(qe=null===(Ue=h.SBGrid3.default)||void 0===Ue?void 0:Ue.defaultColumn)||void 0===qe?void 0:qe.defaultCaptionMenu,(e=>{var r,n,i;return u.GridMenuParser.parse(e,null!==(r=null==t?void 0:t.defaultCaptionMenu)&&void 0!==r?r:null===(i=null===(n=h.SBGrid3.default)||void 0===n?void 0:n.defaultColumn)||void 0===i?void 0:i.defaultCaptionMenu)})),tt.defaultContextMenu=o.Convert.default(e.defaultContextMenu,null!==(Ge=null==t?void 0:t.defaultContextMenu)&&void 0!==Ge?Ge:null===(Ke=null===(We=h.SBGrid3.default)||void 0===We?void 0:We.defaultColumn)||void 0===Ke?void 0:Ke.defaultContextMenu,(e=>{var r,n,i;return u.GridMenuParser.parse(e,null!==(r=null==t?void 0:t.defaultContextMenu)&&void 0!==r?r:null===(i=null===(n=h.SBGrid3.default)||void 0===n?void 0:n.defaultColumn)||void 0===i?void 0:i.defaultContextMenu)})),tt.directApplyValue=o.Convert.default(e.directApplyValue,null!==(Je=null==t?void 0:t.directApplyValue)&&void 0!==Je?Je:null===(Ye=null===(Xe=h.SBGrid3.default)||void 0===Xe?void 0:Xe.defaultColumn)||void 0===Ye?void 0:Ye.directApplyValue),tt.directApplyEdit=o.Convert.default(e.directApplyEdit,null!==(Ze=null==t?void 0:t.directApplyEdit)&&void 0!==Ze?Ze:null===(et=null===(Qe=h.SBGrid3.default)||void 0===Qe?void 0:Qe.defaultColumn)||void 0===et?void 0:et.directApplyEdit);for(const t in e)tt.hasOwnProperty(t)||(tt[t]=e[t]);return tt}static parseCaptionLayout(e){return e instanceof Array||"string"==typeof e?{center:a.GridParser.parseStringArray(e)}:a.GridParser.parsePanelLayout(e)}static parseAggregateTotal(e,t){const r={field:e=o.Convert.isEmpty(t.field)?e:t.field,header:o.Convert.default(t.header,void 0,(t=>v.parseColumnTemplates(e,t))),footer:o.Convert.default(t.footer,o.Convert.isNull(t.header)?{}:void 0,(t=>v.parseColumnTemplates(e,t))),aggregates:o.Convert.default(t.aggregates,void 0,(t=>v.parseAggregates(e,t))),headerCss:t.headerCss,footerCss:t.footerCss};if(o.Convert.isValue(r.aggregates)){for(const t of r.aggregates)o.Convert.isEmpty(t.field)&&(t.field=n.Aggregate.getResultName(t,e));const t=r.aggregates[0].field;if(r.header instanceof Array)for(const n of r.header.filter((t=>o.Convert.isEmpty(t.field)||t.field==e)))n.field=t;if(r.footer instanceof Array)for(const n of r.footer.filter((t=>o.Convert.isEmpty(t.field)||t.field==e)))n.field=t}return r}static parseAggregateGroup(e,t){const r=v.parseAggregateTotal(e,t);return r.group=o.Convert.isWhite(t.group)?e:t.group,r}static parseAggregateTtitle(e,t,r){var i,s;const a={field:e,aggregates:v.parseAggregates(e,t.aggregates),title:o.Convert.default(t.title,void 0,(t=>v.parseColumnTemplate(e,t))),colSpan:null!==(s=null!==(i=null==t?void 0:t.colSpan)&&void 0!==i?i:null==r?void 0:r.colSpan)&&void 0!==s?s:1};if(o.Convert.isValue(a.aggregates))for(const e of a.aggregates)o.Convert.isEmpty(e.field)&&(e.field=n.Aggregate.getResultName(e,e.require,!1));return a}static parseAggregateTree(e,t){const r={field:e,aggregates:v.parseAggregates(e,t.aggregates),footer:o.Convert.default(t.footer,void 0,(t=>v.parseColumnTemplates(e,t))),footerCss:t.footerCss};if(o.Convert.isValue(r.aggregates)){const t=r.aggregates[0].field;if(r.footer instanceof Array)for(const n of r.footer.filter((t=>o.Convert.isEmpty(t.field)||t.field==e)))n.field=t}return r}static parseAggregateGroups(e,t){const r=[];if(t instanceof Array)for(const n of t)r.push(v.parseAggregateGroup(e,n));else o.Convert.isWhite(t.group)&&(t.group="*"),r.push(v.parseAggregateTotal(e,t));return r}static parseAggregates(e,t){const r=[];if(o.Convert.isValue(t))for(const n of t)r.push(v.parseAggregate(e,n));return i.DataSourceParser.sortCalcReference(r)}static parseAggregate(e,t){const r=i.DataSourceParser.parseAggregate(t);return r.require=o.Convert.asStringArray(t.require,e),r.field=o.Convert.isValue(t.field)?t.field:o.Convert.isEmpty(e)&&o.Convert.isEmpty(t.require)?"":n.Aggregate.getResultName(t,e),r}static parseColumnTemplates(e,t){const r=new Array;if(t instanceof Array)for(let n of t)r.push(v.parseColumnTemplate(e,n));else r.push(v.parseColumnTemplate(e,t));return r}static parseColumnTemplate(e,t){var r;return{prefix:t.prefix,suffix:t.suffix,field:null!==(r=t.field)&&void 0!==r?r:e,cssClass:t.cssClass,template:t.template,format:t.format,dataType:i.DataSourceParser.parseDataType(t.dataType),align:o.Convert.parseEnum(p,t.align)}}static parseWidth(e){var t,r;return"number"==typeof e?e:o.Convert.isValue(e)?o.Convert.asNumber(e):null===(r=null===(t=h.SBGrid3.default)||void 0===t?void 0:t.defaultColumn)||void 0===r?void 0:r.width}static parseFormat(e){return e}static parseCommand(e){return[].concat(e)}static parseColumns(e,t,r){let n=r?new Array:e;for(let i of e)n.push(v.parseColumn(i,t,r));return n}static parseValidation(e){let t;return e instanceof Array?e.forEach((e=>{let r={rule:o.Convert.default(e.rule,l.Rules.None,"string"==typeof e.rule?e=>o.Convert.parseEnum(l.Rules,e.toString()):"function"==typeof e.rule?e=>e:void 0),value:o.Convert.default(e.value,void 0),message:o.Convert.default(e.message,void 0),dataType:o.Convert.default(e.dataType,void 0,(e=>o.Convert.parseEnum(o.DataType,e)))};t=null!=t?t:[],t.push(r)})):!0===e&&(t=[]),t}static parseFilter(e,t){if(0!=e){if(!0===e)return v.parseFilter({operator:i.FilterOperators.IsEqualTo},t);if(e.operator){const r=v.parseColumnFilter(e,t);return r.operator==i.FilterOperators.And||r.operator==i.FilterOperators.Or||(r.operator=i.FilterOperators.And,r.filters=e instanceof Array?e:[e]),r}}}static parseColumnFilter(e,t){return i.DataSourceParser.parseFilter(e,[t],(t=>{var r;const n=t;return v._parseColumnFilter(e,n),null===(r=e.filters)||void 0===r||r.forEach(((e,r)=>v._parseColumnFilter(e,t.filters[r]))),n}))}static _parseColumnFilter(e,t){var r;t.operators=null===(r=null==e?void 0:e.operators)||void 0===r?void 0:r.map((e=>o.Convert.default(e,i.FilterOperators.Contains,(()=>o.Convert.parseEnum(i.FilterOperators,e))))),t.rowFilter=o.Convert.default(null==e?void 0:e.rowFilter,void 0)}static parseTooltip(e,t){var r,n;let i;return i=0==t?void 0:!0===t?v.parseTooltip(e,{title:c.Tooltip.getTitleFunc(e),target:c.Tooltip.getTooltipSelector(e)}):{title:null!==(r=t.title)&&void 0!==r?r:c.Tooltip.getTitleFunc(e),target:null!==(n=t.target)&&void 0!==n?n:c.Tooltip.getTooltipSelector(e),template:o.Convert.default(t.template,void 0),placement:o.Convert.default(t.placement,c.Placement.Bottom,(e=>o.Convert.parseEnum(c.Placement,e))),delay:o.Convert.default(t.delay,{show:0,hide:0},(()=>({show:o.Convert.default(t.delay.show,0),hide:o.Convert.default(t.delay.hide,0)})))},i}static parseColumnTooltip(e,t){let r;return r=!0===e?v.parseColumnTooltip({cell:!0,caption:!0,validation:!0},t):!1===e?void 0:{cell:o.Convert.default(e.cell,void 0,(()=>v.parseTooltip(c.TooltipCategory.Cell,null==e?void 0:e.cell))),caption:o.Convert.default(e.caption,void 0,(()=>v.parseTooltip(c.TooltipCategory.Caption,null==e?void 0:e.caption))),validation:o.Convert.default(e.validation,t?v.parseTooltip(c.TooltipCategory.Validation,!0):void 0,(()=>v.parseTooltip(c.TooltipCategory.Validation,null==e?void 0:e.validation)))},r}}t.GridColumnParser=v},1700:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GroupColumn=void 0;const i=r(5643),o=r(1374),s=r(3396),a=r(1623),l=r(3211),u=r(3988),c=r(7074),h=r(8154);class d extends a.GridColumn{constructor(e,t){super(e,t),this.onGroupMousedown=e=>{var t,r;if(0==e.button){let n=u.SBGrid3.$(e.target);const i=this.grid.getRowItem(n),s=i.rowIndex;return o.Log.debug((()=>["GroupColumn.mousedown",e,s,i])),(null===(r=null===(t=this.grid.rowsView)||void 0===t?void 0:t.headers)||void 0===r?void 0:r.findIndex((e=>e.rowItem.key==(null==i?void 0:i.key))))>=0?this.grid.topRow=i.rowIndex:this.toggleRow(n,i),!0}return!0},this.config.align=l.TextAlign.Left}get groupLevel(){return this._groupLevel}set groupLevel(e){this._groupLevel=e}get groupColumn(){return this._groupColumn}set groupColumn(e){this._groupColumn=e}selectable(){return!1}get mergeRow(){return!1}get mergeColumn(){return!1}static create(e,t){return new d(e,t)}makeColClass(e,t){var r,n;if((null==e?void 0:e.node)instanceof i.GroupNode){let n=(null==e?void 0:e.node)instanceof i.GroupNode?e.node:void 0;const o=null!==(r=(null==n?void 0:n.igroup.field)==this.config.field)&&void 0!==r&&r;return super.makeColClass(e,t)+` ${c.SbCss.group} ${o?c.SbCss.title:c.SbCss.indicator} ${c.SbCss.level}-${this.groupLevel} ${(null==n?void 0:n.level)<this.groupLevel?c.SbCss.hidden:""}`}if((null==e?void 0:e.node)instanceof i.FooterNode){let r=(null==e?void 0:e.node)instanceof i.FooterNode?null==e?void 0:e.node:void 0,o=null==r?void 0:r.parent;n=(null==o?void 0:o.igroup.field)==this.config.field;const s=(null==o?void 0:o.level)==this.groupLevel,a=(null==o?void 0:o.level)<this.groupLevel,l=a?null==o?void 0:o.level:this.groupLevel;return super.makeColClass(e,t)+` ${c.SbCss.group} ${c.SbCss.footer} ${c.SbCss.indicator} ${c.SbCss.level}-${l} ${s?c.SbCss.level_first:a?c.SbCss.level_next:""}`}return super.makeColClass(e,t)+` ${c.SbCss.group} ${c.SbCss.indicator} ${c.SbCss.level}-${this.groupLevel}`}getCellHtml(e,t,r){var n,i,o,a,l;let u="";if(r){u=(r?`<span class='${c.SbCss.icon} ${e.loading?c.SbCss.loading:e.isOpen?c.SbCss.open:c.SbCss.close}'></span>`:"")+(s.Convert.isValue(null===(n=this.groupColumn)||void 0===n?void 0:n.config.groupTitle)?null===(i=this.groupColumn)||void 0===i?void 0:i.getGroupTitle(e):`<span class='${c.SbCss.title}'>${null==t?void 0:t.groupKey} [${null!==(o=null==t?void 0:t.itemCount)&&void 0!==o?o:""}][${null!==(a=e.itemCount)&&void 0!==a?a:""}][${null!==(l=null==e?void 0:e.openCount)&&void 0!==l?l:""}]</span>`)}return u}renderCell(e,t,r){var o;return n(this,void 0,void 0,(function*(){let n=(null==t?void 0:t.node)instanceof i.GroupNode?t.node:void 0;const a=null!==(o=(null==n?void 0:n.igroup.field)==this.config.field)&&void 0!==o&&o;(null==n?void 0:n.level)<this.groupLevel&&e.addClass(c.SbCss.hidden);const l=this.cellSelector+` ${c.SbCss.cell} ${c.SbCss.group} ${a?c.SbCss.title:c.SbCss.indicator} ${c.SbCss.level}-${this.groupLevel}`,u=s.JqUtils.adjustElement(e,`>span.${this.cellSelector}`,`<span class='${l}'></span>`);if(s.JqUtils.changeClass(u,l),(null==r?void 0:r.merge)||(null==r?void 0:r.merged))s.JqUtils.adjustHtml(u,"");else{let r=this.getCellHtml(t,n,a);u.html(r),this.grid.setEvent("groupTitleMousedown","mousedown",this.config.field,this.onGroupMousedown,e)}a&&this.checkOpen(e,t)}))}checkOpen(e,t){t.isOpen||t.node instanceof i.GroupNode&&t.isOpen!=t.node.isOpen&&this.toggleRow(e,t)}toggleRow(e,t){const r=t.node;if(r instanceof i.GroupNode){const t=u.SBGrid3.$(`>.${c.SbCss.cell}`,e),n=u.SBGrid3.$(`>.${c.SbCss.icon}`,t);s.JqUtils.changeClass(n,`${c.SbCss.icon} ${c.SbCss.loading}`),this.fireCommandAsync(this,new h.ToggleRowCommand(r.key))}}renderGroupHeader(e,t){return n(this,void 0,void 0,(function*(){this.renderCell(e,t,void 0)}))}renderGroupFooter(e,t){return n(this,void 0,void 0,(function*(){let r=(null==t?void 0:t.node)instanceof i.FooterNode?null==t?void 0:t.node:void 0,n=null==r?void 0:r.parent;(null==n?void 0:n.igroup.field)==this.config.field;const o=(null==n?void 0:n.level)==this.groupLevel,a=(null==n?void 0:n.level)<this.groupLevel,l=a?null==n?void 0:n.level:this.groupLevel,u=this.cellSelector+` ${c.SbCss.group} ${c.SbCss.footer} ${c.SbCss.indicator} ${c.SbCss.level}-${l} ${o?c.SbCss.level_first:a?c.SbCss.level_next:""}`,h=s.JqUtils.adjustElement(e,`>span.${this.cellSelector}`,`<span class='${u}'></span>`);h.html("&nbsp"),s.JqUtils.changeClass(h,u)}))}renderCaption(e){return n(this,void 0,void 0,(function*(){s.JqUtils.adjustElement(e,`>span.${this.cellSelector}`,`<span class='${c.SbCss.caption} ${c.SbCss.indicator} ${this.cellSelector}'></span>`).html("")}))}renderHeader(e){return n(this,void 0,void 0,(function*(){s.JqUtils.adjustElement(e,`>span.${this.cellSelector}`,`<span class='${c.SbCss.header} ${c.SbCss.indicator} ${this.cellSelector}'></span>`).html("")}))}renderFooter(e){return n(this,void 0,void 0,(function*(){s.JqUtils.adjustElement(e,`>span.${this.cellSelector}`,`<span class='${c.SbCss.footer} ${c.SbCss.indicator} ${this.cellSelector}'></span>`).html("")}))}renderDetail(e,t){var r;return n(this,void 0,void 0,(function*(){let n=(null==t?void 0:t.node)instanceof i.GroupNode?t.node:void 0;const o=null!==(r=(null==n?void 0:n.igroup.field)==this.config.field)&&void 0!==r&&r;(null==n?void 0:n.level)<this.groupLevel&&e.addClass(c.SbCss.hidden);const a=this.cellSelector+` ${c.SbCss.group} ${o?c.SbCss.title:c.SbCss.indicator} ${c.SbCss.level}-${this.groupLevel}`,l=s.JqUtils.adjustElement(e,`>span.${this.cellSelector}`,`<span class='${a}'></span>`);return s.JqUtils.changeClass(l,a),l.html(""),e.children().length>1&&u.SBGrid3.$(`> :not(.${this.cellSelector})`,e).empty(),l}))}}t.GroupColumn=d},8141:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MultiTextColumn=void 0;const i=r(3396),o=r(1623),s=r(3988),a=r(7074),l=r(1880),u=r(4772),c=r(2033);class h extends o.GridColumn{constructor(e,t){super(e,t)}static create(e,t){return new h(e,t)}get config(){return super.config}parseConfig(e,t){var r,n,o;let s=super.parseConfig(e,t);return s.maxLength=i.Convert.default(e.maxLength,null!==(r=null==t?void 0:t.maxLength)&&void 0!==r?r:void 0),s.showPreLine=i.Convert.default(e.showPreLine,null!==(n=null==t?void 0:t.showPreLine)&&void 0!==n&&n),s.autoResize=i.Convert.default(e.autoResize,null!==(o=null==t?void 0:t.autoResize)&&void 0!==o&&o),s}renderCell(e,t,r){return n(this,void 0,void 0,(function*(){if(!this.isEdit(t)){const e=s.SBGrid3.$(`div#${this._name}`,this.grid.container);i.Convert.asNumber(e.attr("row"))===t.rowIndex&&i.JqUtils.removeElement(this.grid.container,`div#${this._name}`)}yield this._renderCell(e,t,r)}))}renderEdit(e,t,r){return n(this,void 0,void 0,(function*(){const n=yield this._renderCell(e,t,void 0,!0);this.renderMultiText(e,t,r),n.css({"overflow-y":""}),i.JqUtils.addClass(n,a.SbCss.edit),n.contents().filter(((e,t)=>3===t.nodeType)).remove()}))}_renderCell(e,t,r,o=!1){return n(this,void 0,void 0,(function*(){const n=this.makeCell(e,t,r);if(!o){if(null==r?void 0:r.merged)return""!=n.html()&&n.html(""),n;if(i.Convert.isValue(this.cellTemplate)){const e=this.cellTemplate(t.data);n.html()!=e&&n.html(e)}else{const e=this.getLabelData(t,r);i.JqUtils.adjustHtml(n,e)}this.setShowPreLine(n,t)}return n}))}onWheel(e,t){e.stopPropagation();const r=e.target,n=t.match(/\s/g).length+1,i=r.scrollHeight/n;if(r.scrollHeight>r.offsetHeight)return e.originalEvent.deltaY>1?r.scrollTop+=i:r.scrollTop-=i,!1}onInput(e,t,r){const n=t.originalEvent.inputType;this.setTemp(r,e),this.resize(r,t.target,n)}resize(e,t,r){if(this.config.autoResize){const n=(t=t instanceof HTMLElement?t:t.get(0)).closest(`div.${a.SbCss.floatingEditBox}`),o=this.grid.scrollPanel.getPanelLayout(e),l=t.getBoundingClientRect();t.style.height="auto",t.style.height=`${t.scrollHeight+this._offset}px`;const c=s.SBGrid3.$(`div#${o}`,this.grid.container).get(0),h=this.grid.getContainer(e,this,u.PanelType.Body),d=t.getBoundingClientRect(),f=c.getBoundingClientRect();if(i.Convert.isValue(r)){if(d.bottom>f.bottom)n.style.top="deleteContentBackward"!==r?n.offsetTop-16+"px":`${n.offsetTop}px`;else if(Math.trunc(d.top)!==Math.trunc(h.offset().top)){const e=d.height!==l.height?n.offsetTop+16:n.offsetTop;n.style.top=`${e}px`}}else{n.getBoundingClientRect().bottom>f.bottom&&(n.style.top=`${h.offset().top-n.clientHeight-f.top+h.height()}px`)}}}checkKeydownEvent(e){return i.Convert.isValue(e.key)}onKeydown(e){if(this.checkKeydownEvent(e))return this.checkKeyboardShortCut(e.key)&&e.stopPropagation(),!0}setShowPreLine(e,t){this.config.showPreLine&&(e.css({"white-space":"pre-line","overflow-y":"auto"}),this.grid.setEvent("scrollWheel","wheel",`${this._name}_${t.rowIndex}`,(e=>this.onWheel(e,e.target.innerText)),e,!0))}renderMultiText(e,t,r){var n;const o=this.grid.scrollPanel.getPanelLayout(t),l=this.grid.scrollPanel.getPartLayout(this),c=s.SBGrid3.$(`div#${o}`,this.grid.container),h=s.SBGrid3.$(` > div.${a.SbCss.part}.${a.SbCss.toClass(l)}`,c),d=i.JqUtils.adjustElement(h,`div#${this._name}`,`<div id='${this._name}' class='${a.SbCss.floatingEditBox}'/>`),f=i.JqUtils.adjustElement(d,`textarea#${this._name}`,`<textarea id='${this._name}'/>`);if(c.siblings(`div.${a.SbCss.area}`).find(`.${a.SbCss.floatingEditBox}`).remove(),i.Convert.isValue(this.config.maxLength)&&(null!==(n=i.Convert.isValue(f.attr("maxlength")))&&void 0!==n||f.attr("maxlength",this.config.maxLength)),d.attr("row",t.rowIndex).attr("col",this.index),f.val(this.getTemp(t)).css({width:this.width,minHeight:t.height,maxHeight:h.height()/2}),this._offset=f.get(0).offsetHeight-f.get(0).clientHeight,this.grid.setEvent("scrollWheel","wheel",`${this._name}_${t.rowIndex}`,(e=>this.onWheel(e,e.target.value)),f,!0),this.grid.setEvent("editMultiTextClick","click",`${this._name}`,(()=>this.grid.focusManager.moveFocus({rowItem:t,cell:r,column:this,panelType:u.PanelType.Body})),f),this.grid.setEvent("editMultiTextInput","input",`${this._name}_${t.rowIndex}`,(r=>this.onInput(e,r,t)),f),this.grid.setEvent("TextColumnKeyDown","keydown",`${this._name}_${t.rowIndex}`,(e=>this.onKeydown(e)),f),f.get(0).addEventListener("keydown",(e=>this.onKeydown(e))),this.isFocused(t,u.PanelType.Body)){let e=s.SBGrid3.$(document.activeElement).is("textarea")?s.SBGrid3.$(document.activeElement):f;null==e||e.get(0).focus({preventScroll:!0})}this.resize(t,f)}checkKeyboardShortCut(e){switch(e){case c.KeyboardShortCut.End:case c.KeyboardShortCut.ArrowLeft:case c.KeyboardShortCut.ArrowRight:case c.KeyboardShortCut.ArrowUp:case c.KeyboardShortCut.ArrowDown:case c.KeyboardShortCut.Home:case c.KeyboardShortCut.PageUp:case c.KeyboardShortCut.PageDown:return!0}return!1}getEditValue(e){const t=e.find(`span.${a.SbCss.cell}`);if(t.hasClass(a.SbCss.edit)){const e=this.grid.container.find(`textarea#${this._name}`);return this.escapeString(e.val())}return t.text()}doFocus(e){const{current:{column:t,rowItem:r}}=e;if(this===t&&i.Convert.isValue(r)){const e=s.SBGrid3.$(`textarea#${this._name}`,this.grid.container).length>0?s.SBGrid3.$(`textarea#${this._name}`,this.grid.container):this.grid.container;null==e||e.get(0).focus({preventScroll:!0}),e!==this.grid.container&&this.resize(r,e)}}doCommand(e,t){return t.command===l.Commands.Focused&&this.doFocus(t),super.doCommand(e,t)}makeCellClass(e,t){let{cellSelector:r,cellClass:n}=super.makeCellClass(e,t);return n+=` ${a.SbCss.text}`,{cellSelector:r,cellClass:n}}getTemp(e){const t=super.getTemp(e);return this.unEscapeString(t)}isEditColumn(){return!0}escapeString(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.replace(/[&<>"']/g,(e=>t[e]))}unEscapeString(e){return"string"!=typeof e?e:e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&#39;/g,"'")}}t.MultiTextColumn=h},7367:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.NumberColumn=void 0;const i=r(7565),o=r(3396),s=r(1623),a=r(3988),l=r(7074),u=r(4772),c=r(2033),h=r(1880);class d extends s.GridColumn{constructor(e,t){super(e,t)}static create(e,t){return new d(e,t)}get config(){return super.config}parseConfig(e,t){var r,n,i;let s=super.parseConfig(e,t);return s.min=o.Convert.default(e.min,null!==(r=null==t?void 0:t.min)&&void 0!==r?r:void 0),s.max=o.Convert.default(e.max,null!==(n=null==t?void 0:t.max)&&void 0!==n?n:void 0),s.step=o.Convert.default(e.step,null!==(i=null==t?void 0:t.step)&&void 0!==i?i:void 0),s}renderCell(e,t,r=void 0){return n(this,void 0,void 0,(function*(){yield this._renderCell(e,t,r)}))}_renderCell(e,t,r=void 0,s=!1){return n(this,void 0,void 0,(function*(){const n=this.makeCell(e,t,r);if(!s){if(null==r?void 0:r.merged)return""!=n.html()&&n.html(""),n;if(o.Convert.isValue(this.cellTemplate)){const e=this.cellTemplate(t.data);n.html()!=e&&n.html(e)}else{const e=this.getValue(t),r=this.config.format;let s=e;switch(typeof r){case"function":s=r(e);break;case"string":s=i.NumberUtil.format(e,r)}if(n.text()==o.Convert.asText(s))return;n.text(s)}}return n}))}renderEdit(e,t){return n(this,void 0,void 0,(function*(){if(!1===this.config.editable)return;const r=yield this._renderCell(e,t,void 0,!0),n=()=>this.setTemp(t,e),i=o.JqUtils.adjustElement(r,"input[type=number]",`<input type="number" id="${this._name}_number"/>`),{min:s,max:h,step:d}=this.config;if(i.attr({min:s,max:h,step:d}),o.JqUtils.addClass(r,l.SbCss.edit),o.Convert.isEmpty(i.val())&&i.val(o.Convert.asNumber(this.getTemp(t))),this.grid.setEvent("NumberColumnChange","change",`${this._name}_${t.rowIndex}`,n,r),this.grid.setEvent("NumberColumnKeyUp","keyup",`${this._name}_${t.rowIndex}`,n,r),this.grid.setEvent("NumberColumnKeyDown","keydown",this._name,(e=>{const t=e.target;switch(e.key){case c.KeyboardShortCut.End:const e=t.value.length;return t.setSelectionRange(e,e),!1;case c.KeyboardShortCut.ArrowLeft:return 0===t.selectionStart||t.setSelectionRange(t.selectionStart-1,t.selectionEnd-1),!1;case c.KeyboardShortCut.ArrowRight:return t.setSelectionRange(t.selectionStart+1,t.selectionEnd+1),!1;case c.KeyboardShortCut.Home:t.setSelectionRange(0,0);case c.KeyboardShortCut.ArrowUp:return t.stepUp(),!1;case c.KeyboardShortCut.ArrowDown:return t.stepDown(),!1;case c.KeyboardShortCut.PageUp:case c.KeyboardShortCut.PageDown:return!1}return!0}),r),r.contents().filter(((e,t)=>3===t.nodeType)).remove(),this.isFocused(t,u.PanelType.Body)&&document.activeElement.id===this.grid.name){(a.SBGrid3.$(document.activeElement).is("input")?a.SBGrid3.$(document.activeElement):i).get(0).focus({preventScroll:!0})}}))}getEditValue(e){const t=e.find(`>.${l.SbCss.cell}.${l.SbCss.edit}`);if(t.length<1)return null;const r=t.find(">input");return o.Convert.asNumber(r.val())}getTemp(e){return o.Convert.asNumber(super.getTemp(e).replace(/[^\d\.\-]+/g,""))}makeCellClass(e,t){let{cellSelector:r,cellClass:n}=super.makeCellClass(e,t);return n+=` ${l.SbCss.text}`,{cellSelector:r,cellClass:n}}doFocus(e){const{current:{column:t,rowItem:r}}=e;if(this===t&&o.Convert.isValue(r)){const e=this.grid.getContainer(r,this,u.PanelType.Body),t=a.SBGrid3.$("input",e).length>0?a.SBGrid3.$("input",e):this.grid.container;null==t||t.trigger("focus")}}doCommand(e,t){return t.command===h.Commands.Focused&&this.doFocus(t),super.doCommand(e,t)}isEditColumn(){return!0}}t.NumberColumn=d},5077:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RadioColumn=t.RadioEditMode=void 0;const i=r(3396),o=r(1623),s=r(3988),a=r(7074),l=r(2033),u=r(4772),c=r(7392),h=r(1880);var d;!function(e){e.Radio="radio",e.RadioLabel="radioLabel"}(d||(t.RadioEditMode=d={}));class f extends o.GridColumn{get mergeColumn(){return!1}get mergeRow(){return!1}get radioItems(){if(i.Convert.isNull(this._radioItems)){let e=this.config.radioItems;this._radioItems=[],e instanceof Array||(e=[].concat(e));let t=[];for(const r in e){const n=e[r];i.Convert.isEmpty(n.value)||i.Convert.isEmpty(n.label)||(!0===n.default&&t.push(Number(r)),this._radioItems.push(n))}for(let e=0;e<t.length-1;e++){const r=t[e];delete this._radioItems[r].default}}return this._radioItems}constructor(e,t){super(e,t)}static create(e,t){return new f(e,t)}get config(){return super.config}parseConfig(e,t){var r,n;let o=super.parseConfig(e,t);if(o.radioItems=i.Convert.default(e.radioItems,null!==(r=null==t?void 0:t.radioItems)&&void 0!==r?r:void 0),o.checkMode=i.Convert.default(e.checkMode,null!==(n=null==t?void 0:t.checkMode)&&void 0!==n?n:d.RadioLabel),i.Convert.isEmpty(o.radioItems))throw"radioItems is empty";return o}renderCell(e,t,r){return n(this,void 0,void 0,(function*(){yield this._renderCell(e,t,r)}))}_renderCell(e,t,r,o=!1){return n(this,void 0,void 0,(function*(){const n=this.makeCell(e,t,r);if(o=!!this.config.directApplyEdit||o)i.JqUtils.addClass(n,a.SbCss.edit);else{if(i.Convert.isValue(this.cellTemplate)){const e=this.cellTemplate(t.data);return n.html()!=e&&n.html(e),n}this.grid.setEvent("radioKeyDown","keydown",`${this._name}_${t.rowIndex}`,void 0,n),this.grid.setEvent("radioMouseDown","mousedown",`${this._name}_${t.rowIndex}`,void 0,n)}this.removeElement(n);const s=i.JqUtils.adjustElement(n,`> div.${a.SbCss.radioGroup}`,`<div class='${a.SbCss.radioGroup}'>`);for(const e of this.radioItems){const r=`${this._name}_${t.rowIndex}_${e.value}`,n=i.JqUtils.adjustElement(s,`> span#${r}`,`<span id='${r}' class='${a.SbCss.wrap_radio}'>`);this.renderRadio(n,t,e),this.renderLabel(n,e)}return o&&(this.isFocused(t,u.PanelType.Body)&&document.activeElement.id===this.grid.name&&this.toggle(n),this.grid.setEvent("radioColumnKeyDown","keydown",`${this._name}_${t.rowIndex}`,(r=>this.onKeyDown(r,e,t)),n),this.grid.setEvent("radioMouseDown","mousedown",`${this._name}_${t.rowIndex}`,(r=>this.onMouseDown(e,r.target,t)),n)),n.contents().filter(((e,t)=>3===t.nodeType)).remove(),s}))}renderEdit(e,t){return n(this,void 0,void 0,(function*(){0!=this.editable(t)&&(yield this._renderCell(e,t,void 0,!0))}))}update(e,t){var r;const n=null===(r=this.grid.editConfig)||void 0===r?void 0:r.mode;if(this.config.directApplyEdit){const r=this.getEditValue(e);n===c.EditMode.inline?this.setTemp(t,e):this.grid.view.clearEdit(),this.setValueDirect(t,r,this.field)}else this.grid.view.isEdit(t)&&this.setTemp(t,e)}onKeyDown(e,t,r){e.preventDefault();const n=s.SBGrid3.$(`span.${a.SbCss.cell}`,t);switch(e.key){case l.KeyboardShortCut.Tap:case l.KeyboardShortCut.Enter:this.update(t,r);case l.KeyboardShortCut.Escape:return!0;case l.KeyboardShortCut.ArrowLeft:this.toggle(n,"prev");break;case l.KeyboardShortCut.ArrowRight:this.toggle(n,"next")}return!1}onMouseDown(e,t,r){const n=s.SBGrid3.$(`span.${a.SbCss.cell}`,e);this.checkRadio(n.find(`span.${a.SbCss.checked}`),s.SBGrid3.$(t))&&this.update(e,r)}makeCellClass(e,t){let{cellSelector:r,cellClass:n}=super.makeCellClass(e,t);return n+=` ${a.SbCss.text}`,{cellSelector:r,cellClass:n}}getEditValue(e){const t=s.SBGrid3.$(`.${a.SbCss.cell}.${a.SbCss.radio}`,e);return i.Convert.isEmpty(t)?null:s.SBGrid3.$(`span.${a.SbCss.checked}`,t).data("value")}renderRadio(e,t,r){const n=i.JqUtils.adjustElement(e,`> span.${a.SbCss.radio}.${a.SbCss.radio_icon}`,`<span class='${a.SbCss.radio} ${a.SbCss.radio_icon}'>`).attr("tabindex",0);i.Convert.isEmpty(n.data("value"))&&n.data("value",r.value),this.getCheckState(t,r)?i.JqUtils.addClass(n,a.SbCss.checked):i.JqUtils.removeClass(n,a.SbCss.checked)}renderLabel(e,t){const r=i.JqUtils.adjustElement(e,`>span.${a.SbCss.text}`,`<span class='${a.SbCss.text}'></span>`);r.text()!==t.label&&r.text(t.label)}getItemData(e){return e.isEdit?this.getTemp(e):this.getLabelData(e,void 0)}removeElement(e){if(!i.Convert.isEmpty([...e.children()]))for(const t of e.children()){t.classList.contains(a.SbCss.radioGroup)||t.remove()}}getCheckState(e,t){const r=this.getItemData(e);return i.Convert.isValue(r)?r===t.value:!0===t.default?t.default:r===t.value}checkRadio(e,t){if(t.hasClass(a.SbCss.checked))return!1;switch(this.config.checkMode){case d.Radio:if(!t.hasClass(a.SbCss.radio_icon))return!1;break;case d.RadioLabel:t=t.hasClass(a.SbCss.wrap_radio)?t.find(`.${a.SbCss.radio}`):t.hasClass(a.SbCss.text)?t.siblings(`.${a.SbCss.radio}`):t}return i.JqUtils.removeClass(e,a.SbCss.checked),i.JqUtils.addClass(t,a.SbCss.checked),!0}toggle(e,t){var r;const n=s.SBGrid3.$(`span.${a.SbCss.checked}`,e),i=n.closest(`span.${a.SbCss.wrap_radio}`);let o;switch(t){case"next":if(o=s.SBGrid3.$(`> span.${a.SbCss.radio}`,i.next()),o.length<1)return;break;case"prev":if(o=s.SBGrid3.$(`> span.${a.SbCss.radio}`,i.prev()),o.length<1)return;break;default:o=n}null===(r=o.get(0))||void 0===r||r.focus({preventScroll:!0}),this.checkRadio(n,o)}doFocus(e){const{current:{column:t,rowItem:r}}=e;if(this===t&&i.Convert.isValue(r)){const e=this.grid.getContainer(r,this),t=s.SBGrid3.$(`span.${a.SbCss.checked}`,e).length>0?s.SBGrid3.$(`span.${a.SbCss.checked}`,e):this.grid.container;null==t||t.trigger("focus")}}doCommand(e,t){return t.command===h.Commands.Focused&&this.doFocus(t),super.doCommand(e,t)}isEditColumn(){return!0}}t.RadioColumn=f},1207:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TextColumn=void 0;const i=r(3396),o=r(3988),s=r(7074),a=r(6411),l=r(8154),u=r(1880),c=r(4772),h=r(2033),d=r(9019);class f extends a.PopupColumn{get inputmask(){return i.Convert.isEmpty(this._inputmask)&&(this._inputmask=d.Mask.create(this)),this._inputmask}constructor(e,t){super(e,t)}static create(e,t){return new f(e,t)}get config(){return super.config}parseConfig(e,t){var r,n,o;let s=super.parseConfig(e,t);return s.maxLength=i.Convert.default(e.maxLength,null!==(r=null==t?void 0:t.maxLength)&&void 0!==r?r:void 0),s.mask=i.Convert.default(e.mask,null!==(n=null==t?void 0:t.mask)&&void 0!==n?n:void 0),s.autoFillData=i.Convert.default(e.autoFillData,null!==(o=null==t?void 0:t.autoFillData)&&void 0!==o?o:void 0),s}getStaticItems(e,t,r){const n=[];for(const e of t)n.push(e);this.items.set(e.rowIndex,n)}focusItem(e,t){setTimeout((()=>{null==e||e.get(0).focus({preventScroll:!0})}),0)}renderCell(e,t,r){return n(this,void 0,void 0,(function*(){if(this.isPopup()&&"INPUT"!==document.activeElement.tagName){o.SBGrid3.$(`div#${this._name}_popup`,this.grid.container).each(((e,t)=>t.classList.add(s.SbCss.hidden)))}this._renderCell(e,t,r)}))}_renderCell(e,t,r=void 0,o=!1){return n(this,void 0,void 0,(function*(){const n=this.makeCell(e,t,r);if(o)this.removeElement(n);else{if(null==r?void 0:r.merged)return""!=n.html()&&n.html(""),n;if(i.Convert.isValue(this.cellTemplate)){const e=this.cellTemplate(t.data);i.JqUtils.adjustHtml(n,e)}else{const o=this.config.format;let s=this.getLabelData(t,r);if(i.Convert.isEmpty(s))s=this.renderPlaceHolder(s,t,e),i.JqUtils.adjustHtml(n,s);else{let e=s;if("function"==typeof o)e=o(s);if(n.text()==i.Convert.asText(e))return;i.JqUtils.adjustHtml(n,e)}}}return n}))}onKeyup(e,t,r,n){var o;const s=Object.values(h.KeyboardShortCut).includes(e.key),a=e.target.value;if(!0===s)return!1;this.setTemp(n,t);null===(o=this.autoComplete)||void 0===o||o.filterItems(r,n,a,(e=>{var t;return[...null!==(t=this.items.get(n.rowIndex))&&void 0!==t?t:new Set(this.grid.view.rows.map((e=>e.data[this.config.field])))].filter((t=>i.Convert.isValue(t)&&this.autoComplete.filter(e).test(t)))})),a.length>i.Convert.asNumber(e.target.getAttribute("maxlength"))&&(e.target.value=a.slice(0,i.Convert.asNumber(e.target.getAttribute("maxlength"))))}renderEdit(e,t){var r;return n(this,void 0,void 0,(function*(){const n=yield this._renderCell(e,t,void 0,!0);i.JqUtils.addClass(n,s.SbCss.edit),n.contents().filter(((e,t)=>3===t.nodeType)).remove(),yield this.getItems(t);const a=i.JqUtils.adjustElement(n,"input[type=text]",`<input type="text" class="${s.SbCss.input}" id="${this._name}_input"/>`);if(i.Convert.isEmpty(a.val())){let e=this.getTemp(t);a.val(this.unEscapeString(e))}const u=null===(r=this.config)||void 0===r?void 0:r.maxLength;if(i.Convert.isValue(u)&&a.attr("maxlength",u),this.isFocused(t,c.PanelType.Body)&&document.activeElement.id===this.grid.name){let e=o.SBGrid3.$(document.activeElement).is("input")?o.SBGrid3.$(document.activeElement):a;e.get(0).focus({preventScroll:!0}),this.prevFocus=e}this.grid.setEvent("TextColumnKeyUp","keyup",this._name,(r=>this.onKeyup(r,e,n,t)),n),a.get(0).addEventListener("keydown",(e=>(this.checkKeyboardShortCut(e.key)&&e.stopPropagation(),!0))),this.grid.setEvent("TextColumnKeyDown","keydown",this._name,(e=>{const r=e.target;switch(e.key){case h.KeyboardShortCut.Home:r.setSelectionRange(0,0);case h.KeyboardShortCut.PageUp:case h.KeyboardShortCut.PageDown:return!1;case h.KeyboardShortCut.ArrowUp:case h.KeyboardShortCut.ArrowDown:return this.fireCommandAsync(this,new l.FocusPopupItemCommand(this,t)),!1}return!0}),n)}))}getEditValue(e){const t=e.find(`>.${s.SbCss.cell}.${s.SbCss.edit}`);if(t.length<1)return null;const r=t.find(">input"),n=this.inputmask.getEditValue(r);return this.escapeString(n)}removeElement(e){if(!i.Convert.isEmpty([...e.children()]))for(const t of e.children()){const e=t.classList.contains(s.SbCss.text);t.classList.contains(s.SbCss.input)||e||t.remove()}}checkKeyboardShortCut(e){switch(e){case h.KeyboardShortCut.End:case h.KeyboardShortCut.ArrowLeft:case h.KeyboardShortCut.ArrowRight:case h.KeyboardShortCut.Home:case h.KeyboardShortCut.PageUp:case h.KeyboardShortCut.PageDown:return!0}return!1}renderItem(e,t,r){const n=this.getTemp(t);for(const t in r){const o=i.JqUtils.adjustElement(e,`>li#${s.SbCss.comboPopupItem}-${t}`,`<li id='${s.SbCss.comboPopupItem}-${t}' class='${s.SbCss.comboPopupItem}'></li>`).attr("tabindex",0),a=i.JqUtils.adjustElement(o,`>span.${s.SbCss.text}`,`<span class='${s.SbCss.text}'></span>`),l=r[t];n===l?i.JqUtils.addClass(o,s.SbCss.comboItemSelected):i.JqUtils.removeClass(o,s.SbCss.comboItemSelected),o.data("value",l),i.Convert.isValue(this.itemTemplate)?i.JqUtils.adjustHtml(a,this.itemTemplate(l)):i.JqUtils.adjustHtml(a,l)}}update(e){const{value:t,rowItem:r,column:n}=e;if(this===n){const e=this.grid.getContainer(r,this,c.PanelType.Body),n=o.SBGrid3.$(`.${s.SbCss.cell}`,e);o.SBGrid3.$("input",n).val(t),this.setTemp(r,e),this.fireCommandAsync(this,new l.ClosePopupCommand(this,r))}}doFocus(e){const{current:{column:t,rowItem:r}}=e;if(this===t&&i.Convert.isValue(r)){const e=this.grid.getContainer(r,this,c.PanelType.Body),t=o.SBGrid3.$("input",e).length>0?o.SBGrid3.$("input",e):this.grid.container;null==t||t.trigger("focus")}}doCommand(e,t){switch(t.command){case u.Commands.UpdateCellData:this.update(t);break;case u.Commands.Focused:this.doFocus(t);default:return super.doCommand(e,t)}return!0}escapeString(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.replace(/[&<>"']/g,(e=>t[e]))}unEscapeString(e){return"string"!=typeof e?e:e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&#39;/g,"'")}isEditColumn(){return!0}}t.TextColumn=f},7333:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TreeColumn=t.TitleClickAction=void 0;const i=r(5643),o=r(3396),s=r(1623),a=r(3211),l=r(3988),u=r(7074),c=r(2542),h=r(8154),d=r(1374);var f;!function(e){e.None="none",e.Check="check",e.Open="open"}(f||(t.TitleClickAction=f={}));class p extends s.GridColumn{constructor(e,t){super(e,t),this.onTreeClick=e=>n(this,void 0,void 0,(function*(){if(0!=e.button)return;let t=l.SBGrid3.$(e.target),r=yield this.grid.getRowItem(t);return d.Log.debug((()=>["tree",r,t])),t.hasClass(u.SbCss.icon)||this.config.titleClick==f.Open?this.toggleRow(t,r,void 0):(t.hasClass(u.SbCss.check)||t.hasClass(u.SbCss.checkbox)||this.config.titleClick==f.Check)&&this.toggleCheck(r),!0})),this.config.align=a.TextAlign.Left}static create(e,t){return new p(e,t)}get config(){return super.config}renderCell(e,t){var r,s;return n(this,void 0,void 0,(function*(){let n=(null==t?void 0:t.node)instanceof i.TreeNode?null==t?void 0:t.node:void 0;const a=(null===(r=null==n?void 0:n.parent)||void 0===r?void 0:r.nodeCount)==(null==n?void 0:n.index)+1&&t.isClose,l=p.makeTreeSpace(n.level),c=`<span class='${u.SbCss.icon} ${t.loading?u.SbCss.loading:(null==n?void 0:n.isLeaf)?u.SbCss.leaf:t.isOpen?u.SbCss.open:u.SbCss.close}'></span>`,h=n.checked==i.TreeCheck.Check?u.SbCss.checked:n.checked==i.TreeCheck.Half?u.SbCss.halfCheck:"",d=this.config.showCheck?`<span class='${u.SbCss.check}'><span class='${u.SbCss.checkbox} ${h}'></span></span>`:"",f=o.Convert.isNull(this.cellTemplate)?`<span class='${u.SbCss.text}'>${null!==(s=this.getValue(t))&&void 0!==s?s:""}</span>`:`<span class='${u.SbCss.text}'>${this.cellTemplate(t.data)}</span>`,m=this.cellSelector+` ${u.SbCss.cell} ${u.SbCss.tree} ${u.SbCss.header} ${a?u.SbCss.last:""}`,g=`<span class='${u.SbCss.tree} ${u.SbCss.title}'>${c+d+f}</span>`,v=o.JqUtils.adjustElement(e,`>span.${this.cellSelector}`,`<span class='${m}'></span>`);o.JqUtils.adjustHtml(v,l+g),o.JqUtils.changeClass(v,m),o.Convert.isValue(n)&&this.grid.setEvent("treeTitleMousedown","mousedown",this.config.field,this.onTreeClick,e),this.checkOpen(e,t)}))}checkOpen(e,t){t.isOpen||t.node instanceof i.TreeNode&&t.isOpen!=t.node.isOpen&&o.Convert.isValue(this.grid.dataConfig.tree.open)&&c.TreeLoader.calcOpen(t.node,this.grid.dataConfig.tree)&&this.toggleRow(e,t,!0)}static makeTreeSpace(e){return o.Convert.repeat(e,(t=>`<span class='${u.SbCss.tree} ${u.SbCss.space} ${u.SbCss.level}-${t} ${e==t+1?u.SbCss.last:""}'></span>`))}renderTreeFooter(e,t,r){var a,l,c;return n(this,void 0,void 0,(function*(){const n=(null==t?void 0:t.node)instanceof i.FooterNode?null==t?void 0:t.node:void 0,h=null==n?void 0:n.parent;let d="";if(n instanceof i.FooterNode){if(o.Convert.isValue(null===(a=this.config.tree)||void 0===a?void 0:a.aggregates)&&o.Convert.isValue(n.aggregates)){const e=s.GridColumn.makeTreeData(n.aggregates,this.config.tree,t.parent);d=null!==(c=null===(l=this.treeFooters[r.row])||void 0===l?void 0:l.render(e))&&void 0!==c?c:""}}const f=p.makeTreeSpace(h.level+1),m=`<span class='${u.SbCss.tree} ${u.SbCss.title}'><span class='${u.SbCss.title}'>${d}</span></span>`,g=this.cellSelector+` ${u.SbCss.cell} ${u.SbCss.tree} ${u.SbCss.footer}`,v=o.JqUtils.adjustElement(e,`>span.${this.cellSelector}`,`<span class='${g}'></span>`);v.html(f+m),o.JqUtils.changeClass(v,g),o.JqUtils.addClass(v.parent(),g),v.off("click",this.onTreeClick)}))}toggleRow(e,t,r){const n=t.node;if(n instanceof i.TreeNode){if(n.isLeaf)return;if(o.Convert.isNull(n.nodeCount)){e=e.parent(`.${u.SbCss.col}`);const r=l.SBGrid3.$(`>.${u.SbCss.cell}`,e),n=l.SBGrid3.$(`>.${u.SbCss.title}>.${u.SbCss.icon}`,r);if(n.hasClass(u.SbCss.loading))return;if(o.JqUtils.changeClass(n,`${u.SbCss.icon} ${u.SbCss.loading}`),1==t.loading)return}o.Convert.isNull(r)?this.fireCommandAsync(this,new h.ToggleRowCommand(n.key)):r?this.fireCommandAsync(this,new h.OpenRowCommand(n.key)):this.fireCommandAsync(this,new h.CloseRowCommand(n.key))}}toggleCheck(e){const t=e.node;t instanceof i.TreeNode&&(t.toggleCheck(),this.fireCommandAsync(this,new h.RefreshCommand))}parseConfig(e,t){let r=super.parseConfig(e,t);return r.showCheck=o.Convert.default(e.showCheck,!1),r.titleClick=o.Convert.default(e.titleClick,f.None,(e=>o.Convert.parseEnum(f,e))),r}}t.TreeColumn=p},249:function(e,t,r){"use strict";var n=r(9755),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MenuCustom=t.MenuCancel=t.MenuEdit=t.MenuColumn=t.MenuDeleteRow=t.MenuAddTop=t.MenuAddRow=t.MenuAppendRow=t.MenuInsertRow=t.EditableMenuItem=t.MenuFixedTail=t.MenuFixedSticky=t.MenuFixedBody=t.MenuFixedHead=t.MenuFixedCol=t.MenuSticky=t.MenuRedo=t.MenuUndo=t.MenuPaste=t.MenuCut=t.MenuCopy=t.MenuClipboard=t.MenuSortReset=t.MenuSortDesc=t.MenuSortAsc=t.MenuSort=t.MenuSet=t.MenuSeparator=t.MenuItem=t.GridMenu=t.GridMenuParser=t.MenuFactory=t.MenuItems=t.MenuType=void 0;const o=r(2733),s=r(235),a=r(9402),l=r(8154),u=r(6328),c=r(3988),h=r(7074),d=r(3396),f=r(7392),p=r(1880),m=r(3211),g=r(3905);var v,y;!function(e){e.CaptionMenu="captionMenu",e.ContextMenu="contextMenu"}(v||(t.MenuType=v={})),function(e){e.Filter="filter",e.Sort="sort",e.Clipboard="clipboard",e.FixedCol="fixedCol",e.Separator="separator",e.Asc="asc",e.Desc="desc",e.Reset="reset",e.Copy="copy",e.Cut="cut",e.Paste="paste",e.Undo="undo",e.Redo="redo",e.HeadPart="head",e.BodyPart="body",e.BodyStick="stioky",e.TailPart="tail",e.Sticky="sticky",e.InsertRow="insertRow",e.AppendRow="appendrow",e.AddRow="addRow",e.AddTop="addTop",e.DeleteRow="deleteRow",e.Apply="apply",e.Edit="edit",e.Update="update",e.Save="save",e.Delete="delete",e.Column="column",e.Cancel="cancel",e.Custom="custom"}(y||(t.MenuItems=y={}));const b=new Map([[y.Sort,e=>new k(e)],[y.Clipboard,e=>new M(e)],[y.Asc,e=>new T(e)],[y.Desc,e=>new R(e)],[y.Reset,e=>new E(e)],[y.Copy,e=>new P(e)],[y.Paste,e=>new I(e)],[y.Cut,e=>new O(e)],[y.Undo,e=>new A(e)],[y.Redo,e=>new j(e)],[y.Separator,e=>new S(e)],[y.FixedCol,e=>new N(e)],[y.Sticky,e=>new D(e)],[y.InsertRow,e=>new H(e)],[y.AppendRow,e=>new z(e)],[y.AddRow,e=>new U(e)],[y.AddTop,e=>new q(e)],[y.DeleteRow,e=>new G(e)],[y.Column,e=>new W(e)],[y.Edit,e=>new K(e)],[y.Cancel,e=>new J(e)]]);class w{static create(e,t){if("string"!=typeof t)return this.craeteCutomMenu(e,t);if(b.has(t))return b.get(t)(e);throw`unknown menu ${t}`}static craeteCutomMenu(e,t){return new X(e,t)}}t.MenuFactory=w;t.GridMenuParser=class{static parse(e,t){const r=[];if("boolean"==typeof e){if(0==e)return[];for(const e of null!=t?t:[])0!=b.has(e)&&r.push(e)}else for(const t of e){const e="string"==typeof t?d.Convert.parseEnum(y,t):this.parseMenuItem(t);r.push(e)}return r}static parseMenuItem(e){return{enabled:e.enabled,item:e.item,icon:e.icon,label:e.label,click:e.click,subMenus:e.subMenus}}};class C extends s.Publisher{constructor(e,t,r,n){super(e),this.column=r,this.rowItem=n,this._menuItems=t,this._grid=e}get grid(){return this._grid}get menus(){var e;return null!==(e=this._menus)&&void 0!==e?e:this._menus=this.ensureMenus()}ensureMenus(){const e=[];for(const t of this._menuItems){const r=w.create(this,t);e.push(r)}return e}captionMenuClear(){this.grid.container.find(`.${h.SbCss.menu_group}`).remove(),this.grid.container.find(`.${h.SbCss.context_menu}`).remove()}render(e,t,r){let n=d.JqUtils.adjustElement(e,`> span#${this.name}`,`<span class='${h.SbCss.menu}' id='${this.name}'>${this.name}</span>`);n.text("");for(const e of this.menus)e.render(n,t,r)}}t.GridMenu=C;class _ extends o.Observer{constructor(e,t){super(e,t),this._menuItem=t,this.gridMenu=e}get resourceManager(){return this.gridMenu.grid.dataSource.resourceManager}get subMenuItems(){}get enabled(){return!0}get grid(){return this.gridMenu.grid}get menuItem(){return this._menuItem}get column(){return this.gridMenu.column}get rowItem(){return this.gridMenu.rowItem}get icon(){return""}get subIcon(){return""}get label(){return this.menuItem}render(e,t,r){let n,i=this.enabled;const o=this.icon;n=d.JqUtils.adjustElement(e,`> span#${this.name}`,`<span class='${h.SbCss.item} ${h.SbCss.toClass(this.menuItem)} ${i?"":h.SbCss.disabled}' id='${this.name}'></span>`);const s=d.Convert.isEmpty(o)?"":`<span class='${h.SbCss.icon} ${o}'></span>`,a=d.Convert.isEmpty(this.label)?"":`<span class='${h.SbCss.title}'>${this.label}</span>`,l=d.Convert.isEmpty(this.label)?"":`<span class='${h.SbCss.icon} ${this.subIcon}'></span>`;n.html(s+a+l),i&&(this.grid.config.popupType==f.PopupType.Hover?this.name==y.Column||this.name==y.FixedCol?n.on("mouseenter",(e=>{this.onItemClick(e,t,r)})):this.grid.setEvent("ItemClick","click",this.name,(e=>this.onItemClick(e,t,r)),n):this.grid.config.popupType==f.PopupType.Click&&this.grid.setEvent("ItemClick","click",this.name,(e=>this.onItemClick(e,t,r)),n))}onItemClick(e,t,r){var n;return i(this,void 0,void 0,(function*(){switch(this.command.command!=p.Commands.MoveToPart&&this.command.command!=p.Commands.ColumnVisible&&this.gridMenu.captionMenuClear(),this.command.command){case p.Commands.SortAsc:case p.Commands.SortDesc:case p.Commands.SortReset:this.captionSort();break;case p.Commands.ColumnVisible:this.popColumn(e,t,r);break;case p.Commands.MoveToPart:this.popChildren(e,t);break;case p.Commands.Sticky:this.stickyRowSet();break;default:yield this.fireCommandAsync(this,this.command)}const i=new g.GridMenuCommand(this.menuItem,null===(n=this.rowItem)||void 0===n?void 0:n.key,this.column);this.grid.doGridCommand(i)}))}onSubItemClick(e,t){var r;return i(this,void 0,void 0,(function*(){if(t.command.command===p.Commands.MoveToPart)this.fireCommandAsync(this,t.command);else yield this.fireCommandAsync(void 0,t.command);this.gridMenu.captionMenuClear();const e=new g.GridMenuCommand(this.menuItem,null===(r=this.rowItem)||void 0===r?void 0:r.key,this.column);return this.grid.doGridCommand(e),!1}))}stickyRowSet(){var e;this.grid.toggleStickyRow(null===(e=this.rowItem)||void 0===e?void 0:e.key)}columnPartSet(e){const t=this.grid.topRow;this.column.config.part=e,this.grid.reload(new a.ReloadCommand),setTimeout((()=>{this.grid.topRow=t}),1)}captionSort(){var e;let t=(null!==(e=this.grid.dataConfig.orders)&&void 0!==e?e:[]).find((e=>e.field==this.column.field));const r=this.name==y.Asc?u.SortDir.Asc:u.SortDir.Desc;this.name==y.Asc||this.name==y.Desc?null==t?this.grid.toggleSort(this.column.field,!0,r):t.dir!=r&&this.grid.toggleSort(this.column.field,!1,r):this.name==y.Reset&&null!=t&&this.grid.toggleSort(this.column.field,!0,void 0)}popChildren(e,t){let r="";t==v.CaptionMenu?r=h.SbCss.menu_group:t==v.ContextMenu&&(r=h.SbCss.context_menu),this.grid.container.find(`.${r}.${h.SbCss.col}-1-${this.column.index}.popup`).remove();const n=this.grid.container.find(`.${r}`),i=d.JqUtils.adjustElement(n,`>div.${r}.${h.SbCss.col}-1-${this.column.index} popup`,`<div class='${r} ${h.SbCss.col}-1-${this.column.index} popup'></span>`),o=d.JqUtils.adjustElement(i,`> span#${this.name}`,`<span class='${h.SbCss.menu} popup' id='${this.name}'></span>`),s=n.children().css("overflow-y");this.grid.container.width()<this.grid.container.find(n).offset().left+n.width()+this.grid.container.find(i).width()?this.grid.container.find(i).css("left",-this.grid.container.find(i).width()):"scroll"==s?this.grid.container.find(i).css("left",this.grid.container.find(n).width()+20):this.grid.container.find(i).css("left",this.grid.container.find(n).width()),this.grid.container.find(i).css("top",c.SBGrid3.$(e.target).offset().top-n.offset().top);for(const e of this.subMenuItems){const t=e.enabled,r=d.JqUtils.adjustElement(i,`> span#${e.name}`,`<span class='${h.SbCss.item} ${h.SbCss.toClass(e.menuItem)} ${t?"":h.SbCss.disabled}' id='${e.name}'></span>`),n=d.Convert.isEmpty(e.icon)?"":`<span class='${h.SbCss.icon} ${e.icon}'></span>`,s=d.Convert.isEmpty(e.label)?"":`<span class='${h.SbCss.title}'>${e.label}</span>`;r.html(n+s),t&&this.grid.setEvent("SubItemClick","click",e.name,(t=>this.onSubItemClick(t,e)),r),this.grid.container.find(o).append(r)}this.grid.container.find(i).append(o)}findColumn(e){d.Arrays.dfsAction(e,(e=>(undefined.push(e),e.columns)))}treeColumns(){let e=[];const t=this.grid.columns;return d.Arrays.dfsAction(t,(t=>(e.push(t),t.columns))),e}popColumn(e,t,r){let n="";t==v.CaptionMenu?n=h.SbCss.menu_group:t==v.ContextMenu&&(n=h.SbCss.context_menu),this.grid.container.find(`.${n}.${h.SbCss.col}-1-${this.column.index}.popup`).remove();const i=this.grid.container.find(`.${n}`),o=d.JqUtils.adjustElement(i,`>div.${n}.${h.SbCss.col}-1-${this.column.index} popup`,`<div class='${n} ${h.SbCss.col}-1-${this.column.index} popup'></span>`),s=d.JqUtils.adjustElement(o,`> span#${this.name}`,`<span class='${h.SbCss.column} ${h.SbCss.menu} popup' id='${this.name}' ></span>`),a=d.JqUtils.adjustElement(s,`>.${h.SbCss.values}`,`<span class='${h.SbCss.values}'></span>`),l=d.JqUtils.adjustElement(a,`>span.${h.SbCss.value}.${h.SbCss.value}_1`,`<span class = '${h.SbCss.value} ${h.SbCss.value}_1'></span>`),u=d.JqUtils.adjustElement(s,`>.${h.SbCss.confirm}`,`<div class='${h.SbCss.confirm}'></div>`),c=d.JqUtils.adjustElement(u,`>.${h.SbCss.summit}`,`<button class='${h.SbCss.summit}'>submit</button><button class='${h.SbCss.cancel}'>clear</button>`),f=i.children().css("overflow-y");this.grid.container.width()<this.grid.container.find(o).offset().left+i.width()+this.grid.container.find(o).width()?this.grid.container.find(o).css("left",-this.grid.container.find(o).width()):"scroll"==f?this.grid.container.find(o).css("left",this.grid.container.find(i).width()+21):this.grid.container.find(o).css("left",this.grid.container.find(i).width()),this.grid.container.find(o).css("top",this.grid.container.find(o).offset().top-o.offset().top);const p=d.JqUtils.adjustElement(l,">ul","<ul></ul)");let m=this.treeColumns();for(const e of m){const t=null!=e.config.field,r=e.config.visible?"checked":"",n=d.JqUtils.adjustElement(p,`>li[value='${e.field}']`,`<li value='${e.index}' class='${t?"":h.SbCss.disabled}'></li>`);if(e.level>0){let i="";for(let t=0;t<e.level;t++)i+="<span class='empty-space'></span>";d.JqUtils.adjustElement(n,">input[type=checkbox]",`${i}<input type='checkbox'  name='${e.config.caption}' value='${e.field}' ${t?"":"disabled"} ${r}></input>`),d.JqUtils.adjustElement(n,">label",`<label>${e.config.caption}</label>`)}else d.JqUtils.adjustElement(n,">input[type=checkbox]",`<input type='checkbox'  name="${e.config.caption}" value='${e.field}' ${t?"":"disabled"} ${r}></input>`),d.JqUtils.adjustElement(n,">label",`<label>${e.config.caption}</label>`)}this.grid.setEvent("columnButton","click","columnButton",(e=>this.setColumnVisible(p,e,r)),c)}setColumnVisible(e,t,r){const n=this.grid.topRow,i=c.SBGrid3.$(t.target),o=[];if(i.hasClass(h.SbCss.summit)){const t=[];e.find("input").each((function(){let e={caption:this.name,field:this.value,value:this.checked};t.push(e)}));const r=this.treeColumns();for(let e=0;e<r.length;e++)o.push({column:r[e],visible:t[e].value})}else if(i.hasClass(h.SbCss.cancel)){const e=this.treeColumns();for(let t=0;t<this.treeColumns().length;t++)o.push({column:e[t],visible:!0})}if(this.gridMenu.captionMenuClear(),this.fireCommandAsync(this,new l.ColumnVisibleCommand(o)),this.grid.config.virtualRow){const e=(this.grid.serverPaging,1);setTimeout((()=>{this.grid.topRow=n}),e)}}}t.MenuItem=_;class S extends _{constructor(e){super(e,y.Separator)}render(e){e.append(`<span class='${h.SbCss.item} ${h.SbCss.menu_seperator}' ></span>`)}get enabled(){return!0}get command(){}}t.MenuSeparator=S;class x extends _{get command(){}constructor(e,t){super(e,t)}get menus(){var e;return null!==(e=this._menus)&&void 0!==e?e:this._menus=this.ensureMenus()}render(e,t,r){for(const n of this.menus)n.render(e,t,r)}ensureMenus(){return[]}}t.MenuSet=x;class k extends x{constructor(e){super(e,y.Sort)}get command(){}ensureMenus(){const e=[];return e.push(new T(this.gridMenu)),e.push(new R(this.gridMenu)),e.push(new E(this.gridMenu)),e}}t.MenuSort=k;class T extends _{constructor(e){super(e,y.Asc)}get icon(){return h.SbCss.toClass("arrow-up")}get enabled(){var e;const t=this.grid.config.sortable!=f.SortMode.None&&this.column.sortable!=f.SortMode.None,r=new g.GridMenuCommand(this.menuItem,null===(e=this.rowItem)||void 0===e?void 0:e.key,this.column);return t&&this.grid.canGridCommand(r)}get command(){return new l.AscCommand(this.column)}get label(){return this.resourceManager.resource.menu_asc}}t.MenuSortAsc=T;class R extends _{constructor(e){super(e,y.Desc)}get icon(){return h.SbCss.toClass("arrow-down")}get enabled(){var e;const t=this.grid.config.sortable!=f.SortMode.None&&this.column.sortable!=f.SortMode.None,r=new g.GridMenuCommand(this.menuItem,null===(e=this.rowItem)||void 0===e?void 0:e.key,this.column);return t&&this.grid.canGridCommand(r)}get command(){return new l.DescCommand(this.column)}get label(){return this.resourceManager.resource.menu_desc}}t.MenuSortDesc=R;class E extends _{constructor(e){super(e,y.Reset)}get icon(){return h.SbCss.toClass("reset")}get enabled(){var e;const t=this.grid.config.sortable!=f.SortMode.None&&this.column.sortable!=f.SortMode.None,r=new g.GridMenuCommand(this.menuItem,null===(e=this.rowItem)||void 0===e?void 0:e.key,this.column);return t&&this.grid.canGridCommand(r)}get command(){return new l.ResetCommand(this.column)}get label(){return this.resourceManager.resource.menu_reset}}t.MenuSortReset=E;class M extends x{constructor(e){super(e,y.Clipboard)}ensureMenus(){const e=[];return e.push(new P(this.gridMenu)),e.push(new O(this.gridMenu)),e.push(new I(this.gridMenu)),e}}t.MenuClipboard=M;class P extends _{constructor(e){super(e,y.Copy)}get enabled(){var e;let t=this.grid.canCommand(this,new a.CopyCommand)&&d.Convert.isValue(this.rowItem);const r=new g.GridMenuCommand(this.menuItem,null===(e=this.rowItem)||void 0===e?void 0:e.key,this.column);return t&&this.grid.canGridCommand(r)}get icon(){return h.SbCss.toClass("copy")}get command(){return new a.CopyCommand}get label(){return this.resourceManager.resource.menu_copy}}t.MenuCopy=P;class O extends _{constructor(e){super(e,y.Cut)}get enabled(){var e;const t=this.grid.canCommand(this,new a.CopyCommand)&&d.Convert.isValue(this.rowItem),r=new g.GridMenuCommand(this.menuItem,null===(e=this.rowItem)||void 0===e?void 0:e.key,this.column);return t&&this.grid.canGridCommand(r)}get icon(){return h.SbCss.toClass("cut")}get command(){return new a.CutCommand}get label(){return this.resourceManager.resource.menu_cut}}t.MenuCut=O;class I extends _{constructor(e){super(e,y.Paste)}get enabled(){var e;const t=!!d.Convert.isValue(this.rowItem),r=new g.GridMenuCommand(this.menuItem,null===(e=this.rowItem)||void 0===e?void 0:e.key,this.column);return t&&this.grid.canGridCommand(r)}get icon(){return h.SbCss.toClass("paste")}get command(){return new a.PasteCommand}get label(){return this.resourceManager.resource.menu_paste}}t.MenuPaste=I;class A extends _{constructor(e){super(e,y.Undo)}get icon(){return h.SbCss.toClass("undo")}get enabled(){var e;const t=this.grid.canCommand(this,new a.UndoCommand),r=new g.GridMenuCommand(this.menuItem,null===(e=this.rowItem)||void 0===e?void 0:e.key,this.column);return t&&this.grid.canGridCommand(r)}get command(){return new a.UndoCommand}get label(){return this.resourceManager.resource.menu_undo}}t.MenuUndo=A;class j extends _{constructor(e){super(e,y.Redo)}get enabled(){var e;const t=this.grid.canCommand(this,new a.RedoCommand),r=new g.GridMenuCommand(this.menuItem,null===(e=this.rowItem)||void 0===e?void 0:e.key,this.column);return t&&this.grid.canGridCommand(r)}get icon(){return h.SbCss.toClass("redo")}get command(){return new a.RedoCommand}get label(){return this.resourceManager.resource.menu_redo}}t.MenuRedo=j;class D extends _{constructor(e){super(e,y.Sticky)}get enabled(){var e;const t=!(!this.grid.config.stickyRow||!d.Convert.isValue(this.rowItem)),r=new g.GridMenuCommand(this.menuItem,null===(e=this.rowItem)||void 0===e?void 0:e.key,this.column);return t&&this.grid.canGridCommand(r)}get icon(){return d.Convert.isValue(this.rowItem)&&this.rowItem.isSticky?h.SbCss.toClass("sticky")+" "+h.SbCss.toClass("pined"):h.SbCss.toClass("sticky")}get command(){return new l.StickyCommand(this.column,this.rowItem)}get label(){return d.Convert.isValue(this.rowItem)&&this.rowItem.isSticky?this.resourceManager.resource.menu_sticky_cancel:this.resourceManager.resource.menu_sticky}}t.MenuSticky=D;class N extends _{constructor(e){super(e,y.FixedCol)}get subMenuItems(){const e=[];return e.push(new F(this.gridMenu)),e.push(new $(this.gridMenu)),e.push(new L(this.gridMenu)),e.push(new B(this.gridMenu)),e}get enabled(){var e;const t=this.column.config.part!=m.PartType.Fixed,r=new g.GridMenuCommand(this.menuItem,null===(e=this.rowItem)||void 0===e?void 0:e.key,this.column);return t&&this.grid.canGridCommand(r)}get icon(){return h.SbCss.toClass("fixedCol")}get subIcon(){return d.Convert.isValue(this.subMenuItems)?h.SbCss.toClass("subIcon"):void 0}get command(){return new l.MoveToPartCommand(this.column,m.PartType.Fixed)}get label(){return this.resourceManager.resource.menu_fiexCol}}t.MenuFixedCol=N;class F extends _{constructor(e){super(e,y.HeadPart)}get enabled(){var e;const t=this.column.config.part!=y.HeadPart,r=new g.GridMenuCommand(this.menuItem,null===(e=this.rowItem)||void 0===e?void 0:e.key,this.column);return t&&this.grid.canGridCommand(r)}get icon(){return h.SbCss.toClass("sticky-head")}get command(){return new l.MoveToPartCommand(this.column,m.PartType.Head)}get label(){return this.resourceManager.resource.menu_header}}t.MenuFixedHead=F;class $ extends _{constructor(e){super(e,y.BodyPart)}get enabled(){var e;const t=this.column.config.part!=y.BodyPart,r=new g.GridMenuCommand(this.menuItem,null===(e=this.rowItem)||void 0===e?void 0:e.key,this.column);return t&&this.grid.canGridCommand(r)}get icon(){return h.SbCss.toClass("sticky-body")}get command(){return new l.MoveToPartCommand(this.column,m.PartType.Body)}get label(){return this.resourceManager.resource.menu_body}}t.MenuFixedBody=$;class L extends _{constructor(e){super(e,y.Sticky)}get enabled(){var e;const t=this.column.config.part!=y.Sticky,r=new g.GridMenuCommand(this.menuItem,null===(e=this.rowItem)||void 0===e?void 0:e.key,this.column);return t&&this.grid.canGridCommand(r)}get icon(){return h.SbCss.toClass("sticky")}get command(){return new l.MoveToPartCommand(this.column,m.PartType.Sticky)}get label(){return this.resourceManager.resource.menu_columnSticky}}t.MenuFixedSticky=L;class B extends _{constructor(e){super(e,y.TailPart)}get enabled(){var e;const t=this.column.config.part!=y.TailPart,r=new g.GridMenuCommand(this.menuItem,null===(e=this.rowItem)||void 0===e?void 0:e.key,this.column);return t&&this.grid.canGridCommand(r)}get icon(){return h.SbCss.toClass("sticky-tail")}get command(){return new l.MoveToPartCommand(this.column,m.PartType.Tail)}get label(){return this.resourceManager.resource.menu_tail}}t.MenuFixedTail=B;class V extends _{get enabled(){var e;let t;return t=d.Convert.isValue(this.rowItem)?new g.GridMenuCommand(this.menuItem,null===(e=this.rowItem)||void 0===e?void 0:e.key,this.column):new g.GridMenuCommand(this.menuItem,void 0,void 0),this.grid.canGridCommand(t)}}t.EditableMenuItem=V;class H extends V{constructor(e){super(e,y.InsertRow)}get enabled(){if(d.Convert.isValue(this.rowItem))return!0}get icon(){return h.SbCss.toClass("InsertRow")}get command(){var e,t;return new l.InsertRowCommand(null===(e=this.rowItem)||void 0===e?void 0:e.key,this.grid.copyInsert?null===(t=this.rowItem)||void 0===t?void 0:t.data:{})}get label(){return this.resourceManager.resource.menu_insertRow}}t.MenuInsertRow=H;class z extends V{constructor(e){super(e,y.AppendRow)}get enabled(){if(d.Convert.isValue(this.rowItem))return!0}get icon(){return h.SbCss.toClass("AppendRow")}get command(){var e,t;return new l.AppendRowCommand(null===(e=this.rowItem)||void 0===e?void 0:e.key,this.grid.copyInsert?null===(t=this.rowItem)||void 0===t?void 0:t.data:{})}get label(){return this.resourceManager.resource.menu_appendRow}}t.MenuAppendRow=z;class U extends V{constructor(e){super(e,y.AddRow)}get icon(){return h.SbCss.toClass("addRow")}get enabled(){return!0}get command(){var e,t;return new l.AddRowCommand(null===(e=this.rowItem)||void 0===e?void 0:e.key,this.grid.copyInsert?null===(t=this.rowItem)||void 0===t?void 0:t.data:{})}get label(){return this.resourceManager.resource.menu_addRow}}t.MenuAddRow=U;class q extends V{constructor(e){super(e,y.AddTop)}get icon(){return h.SbCss.toClass("addRow")}get enabled(){return!0}get command(){var e,t;return new l.AddTopCommand(null===(e=this.rowItem)||void 0===e?void 0:e.key,this.grid.copyInsert?null===(t=this.rowItem)||void 0===t?void 0:t.data:{})}get label(){return this.resourceManager.resource.menu_addTop}}t.MenuAddTop=q;class G extends V{constructor(e){super(e,y.DeleteRow)}get enabled(){if(d.Convert.isValue(this.rowItem))return!0}get icon(){return h.SbCss.toClass("deleteRow")}get command(){var e,t;return new l.DeleteRowCommand(null===(e=this.rowItem)||void 0===e?void 0:e.key,this.grid.copyInsert?null===(t=this.rowItem)||void 0===t?void 0:t.data:{})}get label(){return this.resourceManager.resource.menu_deleteRow}}t.MenuDeleteRow=G;class W extends _{constructor(e){super(e,y.Column)}get icon(){return h.SbCss.toClass("column")}get enabled(){var e;const t=new g.GridMenuCommand(this.menuItem,null===(e=this.rowItem)||void 0===e?void 0:e.key,this.column);return this.grid.canGridCommand(t)}get subIcon(){return h.SbCss.toClass("subIcon")}get command(){return new l.ColumnCheckCommand(this.column)}get label(){return this.resourceManager.resource.menu_column}}t.MenuColumn=W;class K extends _{constructor(e){super(e,y.Edit)}get icon(){return h.SbCss.toClass("edit")}get enabled(){var e;let t;d.Convert.isValue(this.column)&&(t=!(!(this.grid.config.editable&&this.column.editable(this.rowItem)&&d.Convert.isValue(this.rowItem))||this.column.isEdit(this.rowItem)));const r=new g.GridMenuCommand(this.menuItem,null===(e=this.rowItem)||void 0===e?void 0:e.key,this.column);return t&&this.grid.canGridCommand(r)}get command(){return new l.EditCommand(f.EditMode.inline,this.rowItem,this.column)}get label(){return this.resourceManager.resource.menu_edit}}t.MenuEdit=K;class J extends _{constructor(e){super(e,y.Cancel)}get icon(){return h.SbCss.toClass("escape")}get enabled(){var e;if(d.Convert.isValue(this.rowItem)){const t=!!(d.Convert.isValue(this.rowItem)&&this.column.editable(this.rowItem)&&this.column.isEdit(this.rowItem)),r=new g.GridMenuCommand(this.menuItem,null===(e=this.rowItem)||void 0===e?void 0:e.key,this.column);return t&&this.grid.canGridCommand(r)}}get command(){return new l.EscapeCommand}get label(){return this.resourceManager.resource.menu_cancel}}t.MenuCancel=J;class X extends _{get command(){}get customMenuItem(){return this._customMenuItem}get enabled(){var e;let t=!0;if(d.Convert.isValue(this.customMenuItem.enabled))return"boolean"==typeof this.customMenuItem.enabled?t=this.customMenuItem.enabled:"function"==typeof this.customMenuItem.enabled&&(t=this.customMenuItem.enabled(this.grid,this.column,this.rowItem)),t;const r=new g.GridMenuCommand(this.menuItem,null===(e=this.rowItem)||void 0===e?void 0:e.key,this.column);return t&&this.grid.canGridCommand(r)}get icon(){return h.SbCss.toClass(this.customMenuItem.icon)}get subIcon(){return d.Convert.isValue(this.customMenuItem.subMenus)?h.SbCss.toClass("subIcon"):""}get label(){return this.customMenuItem.label}constructor(e,t){super(e,y.Custom),this._customMenuItem=t,this._menuItem=y.Custom}render(e,t,r){let i="";t==v.CaptionMenu?i=h.SbCss.menu_group:t==v.ContextMenu&&(i=h.SbCss.context_menu);const o=this.enabled,s=d.JqUtils.adjustElement(e,`> span#${this.customMenuItem.label}`,`<span class='${h.SbCss.item} ${h.SbCss.toClass(this.customMenuItem.label)} ${o?"":h.SbCss.disabled}' id='${this.customMenuItem.label}' ></span>`),a=d.Convert.isEmpty(this.icon)?`<span class='${h.SbCss.icon} ${h.SbCss.none}'></span>`:`<span class='${h.SbCss.icon} ${h.SbCss.toClass(this.customMenuItem.icon)}'></span>`,l=d.Convert.isEmpty(this.label)?"":`<span class='${h.SbCss.title}'>${this.label}</span>`,u=d.Convert.isEmpty(this.subIcon)?"":`<span class='${h.SbCss.icon} ${this.subIcon}'></span>`;s.html(a+l+u),o&&(d.Convert.isValue(this.customMenuItem.click)?this.grid.setEvent("ItemClick","click",this.customMenuItem.item,(()=>{var n;d.Convert.isValue(this.customMenuItem.click)&&this.customMenuItem.click(this.grid,this.column,null!==(n=this.rowItem)&&void 0!==n?n:void 0),d.Convert.isValue(this.customMenuItem.subMenus)?this.renderChild(e,t,r,this.customMenuItem.item,this.customMenuItem.subMenus,1):this.gridMenu.captionMenuClear()}),s):this.grid.config.popupType==f.PopupType.Hover?n(s).on("mouseenter",(()=>{d.Convert.isValue(this.customMenuItem.subMenus)&&this.renderChild(e,t,r,this.customMenuItem.item,this.customMenuItem.subMenus,1)})):this.grid.config.popupType==f.PopupType.Click&&this.grid.setEvent("CustomItemClick","click",this.customMenuItem.item,(()=>{d.Convert.isValue(this.customMenuItem.subMenus)?this.renderChild(e,t,r,this.customMenuItem.item,this.customMenuItem.subMenus,1):this.gridMenu.captionMenuClear()}),s))}renderChild(e,t,r,i,o,s){let a="";t==v.CaptionMenu?a=h.SbCss.menu_group:t==v.ContextMenu&&(a=h.SbCss.context_menu),this.grid.container.find(`.${a}.${h.SbCss.col}-1-${this.column.index}.popup.level${s}`).not(`.${a}.${h.SbCss.col}-1-${this.column.index}.popup.level${s}.${i}`).remove();const l=this.grid.container.find(`.${a}`),u=d.JqUtils.adjustElement(l,`>div.${a}.${h.SbCss.col}-1-${this.column.index}.popup.level${s}.${i}`,`<div class='${a} ${h.SbCss.col}-1-${this.column.index} popup level${s} ${i}'></span>`),p=d.JqUtils.adjustElement(u,`> span#${this.name}`,`<span class='${h.SbCss.menu} popup' id='${this.name}'></span>`);this.grid.container.width()<c.SBGrid3.$(l).offset().left+l.width()+this.grid.container.find(u).width()?this.grid.container.find(u).css("left",-this.grid.container.find(u).width()):this.grid.container.find(u).css("left",l.width()),this.grid.container.find(u).css("top",c.SBGrid3.$(event.target).offset().top-u.offset().top),s++;for(const i of o){const o=d.JqUtils.adjustElement(e,`> span#${i.label}`,`<span class='${h.SbCss.item} ${h.SbCss.toClass(i.label)}' id='${i.label}' ></span>`),a=d.Convert.isEmpty(i.icon)?`<span class='${h.SbCss.icon} ${h.SbCss.none}'></span>`:`<span class='${h.SbCss.icon} ${h.SbCss.toClass(i.icon)}'></span>`,l=d.Convert.isEmpty(i.label)?"":`<span class='${h.SbCss.title}'>${i.label}</span>`,u=d.Convert.isValue(i.subMenus)?`<span class='${h.SbCss.icon} ${this.subIcon}'></span>`:"";o.html(a+l+u),i.enabled&&(d.Convert.isValue(i.click)?this.grid.setEvent("ItemChildClick","click",i.item,(()=>{var n;d.Convert.isValue(this.customMenuItem.click)&&this.customMenuItem.click(this.grid,this.column,null!==(n=this.rowItem)&&void 0!==n?n:void 0),d.Convert.isValue(i.subMenus)?this.renderChild(e,t,r,i.item,i.subMenus,s):this.gridMenu.captionMenuClear()}),o):this.grid.config.popupType==f.PopupType.Hover?n(o).on("mouseenter",(()=>{d.Convert.isValue(i.subMenus)&&this.renderChild(e,t,r,i.item,i.subMenus,s)})):this.grid.config.popupType==f.PopupType.Click&&this.grid.setEvent("CustomItemClick","click",i.item,(()=>{d.Convert.isValue(i.subMenus)?this.renderChild(e,t,r,i.item,i.subMenus,s):this.gridMenu.captionMenuClear()}),o)),c.SBGrid3.$(p).append(o)}c.SBGrid3.$(u).append(p)}}t.MenuCustom=X},2271:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ToolExcelImport=t.ToolExcelExport=t.ToolRefresh=t.ToolStatus=t.ToolRedo=t.ToolUndo=t.ToolGroup=t.ToolDelete=t.ToolCancel=t.ToolAppendRow=t.ToolInsertRow=t.ToolAddTop=t.ToolAddRow=t.ToolSave=t.ToolPager=t.PagerMode=t.ToolTitle=t.ToolCustom=t.GridTool=void 0;const i=r(2733),o=r(1880),s=r(9402),a=r(8154),l=r(6328),u=r(1623),c=r(3211),h=r(1700),d=r(3988),f=r(7074),p=r(1374),m=r(3396),g=r(4202),v=r(7270),y=r(6522),b=r(4462);class w extends i.Observer{get clazz(){var e;return null!==(e=this._clazz)&&void 0!==e?e:this._clazz=""}get grid(){return this._grid}get resourceManager(){return this.grid.dataSource.resourceManager}get resource(){return this.grid.resource}get template(){return m.Convert.isValue(this._template)?this._template:this.clazz.startsWith("#")?(this._template=m.Utils.createTemplate(this.clazz),this._template):void 0}constructor(e,t){super(e),this._clazz=t,this._grid=e}render(e){return n(this,void 0,void 0,(function*(){if(m.Convert.isValue(this.template))return void e.html(this.template(this.grid));m.JqUtils.adjustElement(e,`> span#${this.name}`,`<span class='${this.clazz}' id='${this.name}'></span>`).text(this.label())}))}label(){switch(this.clazz){case g.GridTools.Save:return this.resource.tool_save;case g.GridTools.Add:return this.resource.tool_addRow;case g.GridTools.AddTop:return this.resource.tool_addTop;case g.GridTools.Insert:return this.resource.tool_insertRow;case g.GridTools.Append:return this.resource.tool_appendRow;case g.GridTools.Cancel:return this.resource.tool_cancel;case g.GridTools.Undo:return this.resource.tool_undo;case g.GridTools.Redo:return this.resource.tool_redo;case g.GridTools.Delete:return this.resource.tool_deleteRow;case g.GridTools.Refresh:return this.resource.tool_refresh;case g.GridTools.Excel:return this.resource.tool_excel;default:return`${this.clazz} : ${(new Date).getTime()}`}}}t.GridTool=w;t.ToolCustom=class extends w{constructor(e,t){super(e,f.SbCss.custom),this._render=t}render(e){return n(this,void 0,void 0,(function*(){e.empty(),this._render(e.get(0))}))}};var C;t.ToolTitle=class extends w{constructor(e){super(e,f.SbCss.title)}},function(e){e.Row="row",e.Page="page"}(C||(t.PagerMode=C={}));t.ToolPager=class extends w{get PAGES(){var e,t;return null!==(e=this._PAGES)&&void 0!==e?e:null===(t=this.grid.pageable)||void 0===t?void 0:t.buttonCount}get pageSize(){var e;return null!==(e=this.grid.pageSize)&&void 0!==e?e:20}constructor(e){super(e,f.SbCss.pager)}render(e){var t,r,i,o,s,a;return n(this,void 0,void 0,(function*(){yield this.grid.view.prepareRows(),this._total=1==this.grid.virtualRow||this.grid.listMode?this.grid.total:0,this._lastPage=Math.ceil(this._total/this.pageSize);let n=m.JqUtils.adjustElement(e,`> div.${f.SbCss.tool}.${this.clazz}`,`<div class='${f.SbCss.tool} ${this.clazz}'></div>`),l=this.getPageNum();if(null!==(r=null===(t=this.grid.pageable)||void 0===t?void 0:t.previousNext)&&void 0!==r&&r){let e=m.JqUtils.adjustElement(n,`> span.${f.SbCss.first}`,`<span class='${f.SbCss.first} ${f.SbCss.icon}'></span>`),t=m.JqUtils.adjustElement(n,`> span.${f.SbCss.prev}`,`<span class='${f.SbCss.prev} ${f.SbCss.icon}'></span>`);this.grid.setEvent(this.name,"click","prev",(()=>l>1&&this.paging(l-1)),t),this.grid.setEvent(this.name,"click","first",(()=>this.paging(1)),e)}if((null===(i=this.grid.pageable)||void 0===i?void 0:i.numeric)&&(null===(o=this.grid.pageable)||void 0===o?void 0:o.buttonCount)>1){let e=m.JqUtils.adjustElement(n,">div","<div></div>");const t=this.getPageNum();this.renderPages(e,this.range(t)),this.changeCss(e)}if(null!==(a=null===(s=this.grid.pageable)||void 0===s?void 0:s.previousNext)&&void 0!==a&&a){let e=m.JqUtils.adjustElement(n,`> span.${f.SbCss.next}`,`<span class='${f.SbCss.next} ${f.SbCss.icon}'></span>`),t=m.JqUtils.adjustElement(n,`> span.${f.SbCss.last}`,`<span class='${f.SbCss.last} ${f.SbCss.icon}'></span>`);this.grid.setEvent(this.name,"click","next",(()=>l<this._lastPage&&this.paging(l+1)),e),this.grid.setEvent(this.name,"click","last",(()=>this.paging(this._lastPage)),t)}this.checkDisabled(n)}))}renderPages(e,t){t.forEach(((t,r)=>{let n=m.JqUtils.adjustElement(e,`> span.${f.SbCss.page}.${f.SbCss.page}-${r}`,`<span class='${f.SbCss.page} ${f.SbCss.page}-${r}'></span>`);m.JqUtils.adjustElement(n,"> a","<a></a>").text(t),this.grid.setEvent(this.name,"click","page"+r,(()=>this.paging(t)),n)})),e.find(`.${f.SbCss.page}>a`).each(((e,r)=>{0==t.includes(Number.parseInt(r.textContent))&&d.SBGrid3.$(r).parent().remove()}))}changeCss(e){let t=this.getPageNum();e.find(`span.${f.SbCss.page}.${f.SbCss.current}`).removeClass(f.SbCss.current),e.find(`span.${f.SbCss.page}.${f.SbCss.page}-${(t-1)%this.PAGES}`).addClass(f.SbCss.current)}checkDisabled(e){let t=this.getPageNum();t-1<1?d.SBGrid3.$(`>span.${f.SbCss.prev}`,e).addClass(f.SbCss.disabled):d.SBGrid3.$(`>span.${f.SbCss.prev}`,e).removeClass(f.SbCss.disabled),t+1>this._lastPage?d.SBGrid3.$(`>span.${f.SbCss.next}`,e).addClass(f.SbCss.disabled):d.SBGrid3.$(`>span.${f.SbCss.next}`,e).removeClass(f.SbCss.disabled),t<=1?d.SBGrid3.$(`>span.${f.SbCss.first}`,e).addClass(f.SbCss.disabled):d.SBGrid3.$(`>span.${f.SbCss.first}`,e).removeClass(f.SbCss.disabled),t>=this._lastPage?d.SBGrid3.$(`>span.${f.SbCss.last}`,e).addClass(f.SbCss.disabled):d.SBGrid3.$(`>span.${f.SbCss.last}`,e).removeClass(f.SbCss.disabled)}paging(e){switch(this.grid.pagerMode){case C.Page:p.Log.debug((()=>["pageNo:",e])),this.fireCommandAsync(this,new a.PagerCommand(e-1));break;case C.Row:{const t=(e-1)*this.pageSize;p.Log.debug((()=>["topRow:",t])),this.grid.topRow=t;break}}}range(e){let t=Math.ceil(e/this.PAGES);return Array.from({length:this.PAGES},((e,t)=>t+1)).map((e=>e+10*(t-1))).filter((e=>e<=this._lastPage))}getPageNum(){switch(this.grid.pagerMode){case C.Page:return this.grid.view.pageNo+1;case C.Row:return Math.ceil((this.grid.view.topRow+1)/this.pageSize)}}};t.ToolSave=class extends w{constructor(e){super(e,g.GridTools.Save),this.onClickButton=()=>{p.Log.debug((()=>"fire save command")),this.fireCommandAsync(this,new s.SaveCommand)}}render(e){return n(this,void 0,void 0,(function*(){let t=m.JqUtils.adjustElement(e,`>input[type='button'].${f.SbCss.tool}.${f.SbCss.save}`,`<input type='button' class='${f.SbCss.tool} ${f.SbCss.save}'>`);t.val(this.label()),this.grid.setEvent("ToolSaveClick","click",this.name,this.onClickButton,t)}))}};t.ToolAddRow=class extends w{constructor(e){super(e,g.GridTools.Add),this.onClickButton=()=>{var e;p.Log.debug((()=>"add row command"));const t=null===(e=this.grid.focusManager.focus)||void 0===e?void 0:e.rowItem,r=null==t?void 0:t.key,n=this.grid.copyInsert?m.Convert.cloneData(null==t?void 0:t.data):{};this.grid.fireCommandAsync(this,new a.AddRowCommand(r,n))}}render(e){return n(this,void 0,void 0,(function*(){let t=m.JqUtils.adjustElement(e,`>input[type='button'].${f.SbCss.tool}.${f.SbCss.add}`,`<input type='button' class='${f.SbCss.tool} ${f.SbCss.add}'>`);t.val(this.label()),this.grid.setEvent("ToolAddRowClick","click",this.name,this.onClickButton,t)}))}};t.ToolAddTop=class extends w{constructor(e){super(e,g.GridTools.AddTop),this.onClickButton=()=>{var e;p.Log.debug((()=>"add row at top command"));const t=null===(e=this.grid.focusManager.focus)||void 0===e?void 0:e.rowItem,r=null==t?void 0:t.key,n=this.grid.copyInsert?m.Convert.cloneData(null==t?void 0:t.data):{};this.grid.fireCommandAsync(this,new a.AddTopCommand(r,n))}}render(e){return n(this,void 0,void 0,(function*(){let t=m.JqUtils.adjustElement(e,`>input[type='button'].${f.SbCss.tool}.${f.SbCss.addTop}`,`<input type='button' class='${f.SbCss.tool} ${f.SbCss.addTop}'>`);t.val(this.label()),this.grid.setEvent("ToolAddTopClick","click",this.name,this.onClickButton,t)}))}};t.ToolInsertRow=class extends w{constructor(e){super(e,g.GridTools.Insert),this.onClickButton=()=>{var e,t;const r=null!==(t=null===(e=this.grid.focusManager.focus)||void 0===e?void 0:e.rowItem)&&void 0!==t?t:this.grid.rows[0],n=null==r?void 0:r.parent,i=(null==n||n.key,null==r?void 0:r.key),o=this.grid.copyInsert?m.Convert.cloneData(null==r?void 0:r.data):{};p.Log.debug((()=>"insert row command")),this.grid.fireCommandAsync(this,new a.InsertRowCommand(i,o))}}render(e){return n(this,void 0,void 0,(function*(){let t=m.JqUtils.adjustElement(e,`>input[type='button'].${f.SbCss.tool}.${f.SbCss.insert}`,`<input type='button' class='${f.SbCss.tool} ${f.SbCss.insert}'>`);t.val(this.label()),this.grid.setEvent("ToolInsertRowClick","click",this.name,this.onClickButton,t)}))}};t.ToolAppendRow=class extends w{constructor(e){super(e,g.GridTools.Append),this.onClickButton=()=>{var e,t;const r=null!==(t=null===(e=this.grid.focusManager.focus)||void 0===e?void 0:e.rowItem)&&void 0!==t?t:this.grid.rows[this.grid.rows.length-1],n=null==r?void 0:r.parent,i=(null==n||n.key,null==r?void 0:r.key),o=this.grid.copyInsert?m.Convert.cloneData(null==r?void 0:r.data):{};p.Log.debug((()=>"append row command")),this.grid.fireCommandAsync(this,new a.AppendRowCommand(i,o))}}render(e){return n(this,void 0,void 0,(function*(){let t=m.JqUtils.adjustElement(e,`>input[type='button'].${f.SbCss.tool}.${f.SbCss.append}`,`<input type='button' class='${f.SbCss.tool} ${f.SbCss.append}'>`);t.val(this.label()),this.grid.setEvent("ToolAppendRowClick","click",this.name,this.onClickButton,t)}))}};t.ToolCancel=class extends w{constructor(e){super(e,g.GridTools.Cancel),this.onCancelClick=()=>{this.fireCommandAsync(this,new s.CancelCommand)}}render(e){return n(this,void 0,void 0,(function*(){let t=m.JqUtils.adjustElement(e,`>input[type='button'].${f.SbCss.tool}.${f.SbCss.cancel}`,`<input type='button' class='${f.SbCss.tool} ${f.SbCss.cancel}'>`);t.val(this.label()),this.grid.setEvent("ToolCancelClick","click",this.name,this.onCancelClick,t)}))}};t.ToolDelete=class extends w{constructor(e){super(e,g.GridTools.Delete),this.onCeleteClick=()=>{var e;let t=this.grid.selectManager.getSelectedRows();m.Convert.isEmpty(t)&&(t=[null===(e=this.grid.focusManager.focus)||void 0===e?void 0:e.rowItem.key]);let r=t.map((e=>{let t=this.grid.view.keyMap.get(e);return{rowIndex:t.index,key:t.key}}));r.length>0&&this.fireCommandAsync(this,new s.DeleteCommand(r))}}render(e){return n(this,void 0,void 0,(function*(){let t=m.JqUtils.adjustElement(e,`>input[type='button'].${f.SbCss.tool}.${f.SbCss.delete}`,`<input type='button' class='${f.SbCss.tool} ${f.SbCss.delete}'>`);t.val(this.label()),this.grid.setEvent("ToolDeleteClick","click",this.name,this.onCeleteClick,t)}))}};t.ToolGroup=class extends w{constructor(e){super(e,f.SbCss.group),this.groupingMap=new Map}render(e){return n(this,void 0,void 0,(function*(){let t=m.JqUtils.adjustElement(e,`>div.${f.SbCss.tool}.${this.clazz}`,`<div class='${f.SbCss.tool} ${this.clazz}'></div>`);this.addDroppableHandler(t),this.renderGroupElements(t)}))}static addDraggableHandler(e,t){const r=t.getColumn(e);m.Convert.isNull(r)||r.part===c.PartType.Fixed||r instanceof h.GroupColumn||e.draggable({helper:(e,r)=>{let n=d.SBGrid3.$(e.target).closest(`.${f.SbCss.col}`);if(n.length<=0)return;const i=m.JqUtils.adjustElement(n.closest(`div.${f.SbCss.panel}.${f.SbCss.caption}`),`>span.${f.SbCss.draggable_helper}.${f.SbCss.col}`,`<span class='${f.SbCss.draggable_helper} ${f.SbCss.col}'>${n.text()}</span>`);m.JqUtils.adjustElement(i,`>span.${f.SbCss.icon}`,`<span class='${f.SbCss.icon}'></span>`);const o=t.getColumn(n);return i.data("column",o),i},cursorAt:{top:15,left:25}})}renderGroupElements(e){let t=this.grid.dataConfig.groups;if(m.Convert.isValue(t)){const r=Array.from(this.groupingMap.keys());t.forEach((t=>{let n=this.grid.getColumnByField(t.field);this.createSortable(e,t.dir,n),r.splice(r.indexOf(n.name),1)})),m.Convert.isValue(r)&&r.forEach((e=>{this.groupingMap.get(e).remove(),this.groupingMap.delete(e)})),e.find(`>span.${f.SbCss.caption}`).remove()}else e.empty(),this.groupingMap.clear(),m.JqUtils.adjustElement(e,`>span.${f.SbCss.caption}`,`<span class = '${f.SbCss.caption}'>${this.grid.resource.group_groupZone}</span>`)}addDroppableHandler(e){e.sortable({connectWith:`span.${f.SbCss.grouping}`,axis:"x",opacity:.5,distance:10,update:()=>{this.changeOrder()}}).disableSelection(),e.droppable({drop:(e,t)=>{let r=d.SBGrid3.$(e.target),n=t.helper.data("column");if(void 0!==n){if(this.groupingMap.has(n.name))return;let e=t.helper.find(`.${f.SbCss.icon}`);if(null==e?void 0:e.hasClass(f.SbCss.cancel_red))return;this.createSortable(r,l.SortDir.Asc,n),this.grid.addGroupColumn(n)}},over:(e,t)=>{let r=t.helper.data("column");if(r&&(0==r.config.groupable||m.Convert.isEmpty(r.field)||this.groupingMap.has(r.name))){t.helper.find(`.${f.SbCss.icon}`).addClass(f.SbCss.cancel_red)}},out:(e,t)=>{t.helper.find(`.${f.SbCss.icon}`).removeClass(f.SbCss.cancel_red)}}),this.grid.setEvent("cancelCaptionDrag","keydown","cancelCaptionDrag",(e=>n(this,void 0,void 0,(function*(){switch(e.key){case"Escape":case"Esc":const e=this.grid.container.find(`.${f.SbCss.panel}.${f.SbCss.caption}`).find(`>span.${f.SbCss.draggable_helper}`);if(e.length<1)return;e.remove()}}))),this.grid.container[0])}createSortable(e,t,r,n){let i=m.JqUtils.adjustElement(e,`>.${f.SbCss.grouping}.${r.field}`,`<span class='${f.SbCss.grouping} ${r.field}'></span>`);const o=f.SbCss.toClass(t);let s=i.find(`span.${f.SbCss.icon}.${o}`);s.length<=0&&(s=i.find(`span.${f.SbCss.icon}.${f.SbCss.sort}.${o==f.SbCss.asc?f.SbCss.desc:f.SbCss.asc}`),s.length>0&&m.JqUtils.changeClass(s,`${f.SbCss.icon} ${f.SbCss.sort} ${o}`)),s.length<=0&&(s=m.JqUtils.adjustElement(i,`span.${f.SbCss.icon}.${o}`,`<span class='${f.SbCss.icon} ${f.SbCss.sort} ${o}'></span>`)),m.JqUtils.adjustElement(i,`>span.${f.SbCss.caption}`,`<span class=${f.SbCss.caption}>${r.config.caption}</span>`);let a=m.JqUtils.adjustElement(i,`span.${f.SbCss.icon}.${f.SbCss.delete}`,`<span class='${f.SbCss.icon} ${f.SbCss.delete}'></span>`);0==this.groupingMap.has(r.name)&&this.groupingMap.set(r.name,i),i.data("info",r),this.grid.setEvent("grouping","click",r._name+"_dir",(e=>this.dirClick(e)),s),this.grid.setEvent("grouping","click",r._name+"_delete",(e=>this.deleteClick(e)),a)}dirClick(e){var t;let r=d.SBGrid3.$(e.target),n=null===(t=r.parent().data("info"))||void 0===t?void 0:t.config.field,i=this.grid.dataConfig.groups.find((e=>e.field===n)),o=i.dir;this.grid.toggleSort(n,!1),r.removeClass(o).addClass(i.dir)}deleteClick(e){let t=d.SBGrid3.$(e.target).parent(),r=t.data("info"),n=r.name;t.remove(),this.groupingMap.delete(n),this.grid.removeGroupColumn(r)}changeOrder(){let e=this.grid.container.find(`.${f.SbCss.tool}.${f.SbCss.group}>span.${f.SbCss.grouping}:not(.ui-sortable-placeholder)`),t=[];e.each(((e,r)=>{let n=d.SBGrid3.$(r).data("info");t.push(n)})),this.grid.setGroupColumns(t)}};t.ToolUndo=class extends w{constructor(e){super(e,g.GridTools.Undo),this.onClick=()=>{this.fireCommandAsync(this,new s.UndoCommand)}}render(e){var t;return n(this,void 0,void 0,(function*(){const r=this.grid.canCommand(this,o.Commands.Undo),n=`${f.SbCss.tool} ${f.SbCss.undo} ${r?"":f.SbCss.disabled}`;let i=m.JqUtils.adjustElement(e,`>input[type='button'].${f.SbCss.tool}.${f.SbCss.undo}`,`<input type='button' class='${n}'>`);i.val(this.label()),i.attr("title",null===(t=this.grid.undoManager.undoStack.peek())||void 0===t?void 0:t.constructor.name),m.JqUtils.changeClass(i,n),i.prop("disabled",!r),this.grid.setEvent("UndoClick","click",this.name,this.onClick,i)}))}};t.ToolRedo=class extends w{constructor(e){super(e,g.GridTools.Redo),this.onClick=()=>{this.fireCommandAsync(this,new s.RedoCommand)}}render(e){var t;return n(this,void 0,void 0,(function*(){const r=this.grid.canCommand(this,o.Commands.Redo),n=`${f.SbCss.tool} ${f.SbCss.redo} ${r?"":f.SbCss.disabled}`;let i=m.JqUtils.adjustElement(e,`>input[type='button'].${f.SbCss.tool}.${f.SbCss.redo}`,`<input type='button' class='${n}'>`);i.val(this.label()),i.attr("title",null===(t=this.grid.undoManager.redoStack.peek())||void 0===t?void 0:t.constructor.name),m.JqUtils.changeClass(i,n),i.prop("disabled",!r),this.grid.setEvent("RedoClick","click",this.name,this.onClick,i)}))}};t.ToolStatus=class extends w{get columnRenderer(){var e;return null!==(e=this._columnRenderer)&&void 0!==e?e:this._columnRenderer=new u.ColumnRender(this.columnTemplate)}constructor(e,t){super(e,g.GridTools.Status),this.columnTemplate=t}render(e){return n(this,void 0,void 0,(function*(){m.JqUtils.adjustElement(e,`>#${this.name}.${f.SbCss.tool}.${f.SbCss.status}`,`<span id='${this.name}' class= '${f.SbCss.tool} ${f.SbCss.status}' ></span>`)}))}makeAggregateData(e){let t=this.columnTemplate.aggregates instanceof Array?this.columnTemplate.aggregates:[this.columnTemplate.aggregates];t=t.filter((e=>m.Convert.isValue(e)));const r=u.GridColumn.getAggregateMap(e),n=u.GridColumn.getAggregateMap(t),i={};for(const e of n.keys())if(r.has(e)){const t=n.get(e);t.value=r.get(e).value,m.Convert.isValue(t.field)&&(i[t.field]=t.value),m.Convert.isValue(t.payload)?i[t.func+"_"+t.payload]=t.value:"string"==typeof t.func&&(i[t.func]=t.value)}return i}updateStatus(e){const t=this.makeAggregateData(e),r=this.grid.container.find(`span#${this.name}.${f.SbCss.tool}.${f.SbCss.status}`);if(r.length<1)return;const n=Object.values(t).every((e=>m.Convert.isNull(e)))?"":this.columnRenderer.render(t);r.text(n);const i=this.columnTemplate.cssClass,o="function"==typeof i?i(t):i;null==o||o.split(" ").forEach((e=>m.JqUtils.addClass(r,e)))}};t.ToolRefresh=class extends w{constructor(e){super(e,g.GridTools.Refresh),this.onRefreshClick=()=>{this.fireCommandAsync(this,new a.RefreshCommand)}}render(e){return n(this,void 0,void 0,(function*(){let t=m.JqUtils.adjustElement(e,`>input[type='button'].${f.SbCss.tool}.${f.SbCss.refresh}`,`<input type='button' class='${f.SbCss.tool} ${f.SbCss.refresh}'>`);t.val(this.label()),t.off("click").on("click",(()=>this.onRefreshClick()))}))}};t.ToolExcelExport=class extends w{constructor(e){super(e,g.GridTools.Excel),this.onExcelExport=()=>n(this,void 0,void 0,(function*(){const e=new v.ExcelExport(this.grid),t=new m.default,r=m.Utils.ensureName("excel");this.grid.setEvent("excel","keydown",r,(e=>{"Escape"===e.key&&t.cancel()}),this.grid.container),yield e.export(t.token),this.grid.setEvent("excel","keydown",r,void 0,this.grid.container)}))}render(e){return n(this,void 0,void 0,(function*(){let t=m.JqUtils.adjustElement(e,`>input[type='button'].${f.SbCss.tool}.${f.SbCss.excel}`,`<input type='button' class='${f.SbCss.tool} ${f.SbCss.excel}'>`);t.val(this.label()),t.off("click").on("click",(()=>this.onExcelExport()))}))}};t.ToolExcelImport=class extends w{constructor(e){super(e,g.GridTools.ExcelImport),this.onExcelImport=e=>n(this,void 0,void 0,(function*(){if(m.Convert.isNull(e))return;let t;switch(e.name.split(".").at(-1)){case"csv":t=new b.CsvImport(this.grid);break;case"xlsx":t=new y.ExcelImport(this.grid)}if(!m.Convert.isValue(t))throw"not supported file "+e.name;t.excelImport(e)}))}render(e){return n(this,void 0,void 0,(function*(){m.JqUtils.adjustElement(e,`>input[type='file'].${f.SbCss.tool}.${f.SbCss.excel}`,`<input type='file' class='${f.SbCss.tool} ${f.SbCss.excel}'>`).off("change").on("change",(e=>this.onExcelImport(e.target.files[0])))}))}}},5421:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PersonalStorage=void 0;const n=r(1374),i=r(3396);class o{constructor(e=(()=>window.localStorage)){this.storage=e()}getOriginKey(e){return`${e}`}get(e){return this.storage.getItem(this.getOriginKey(e))}set(e,t){this.storage.setItem(this.getOriginKey(e),t)}clearItem(e){this.storage.removeItem(this.getOriginKey(e))}clearItems(e){e.forEach((e=>this.clearItem(this.getOriginKey(e))))}}t.default=o;t.PersonalStorage=class extends o{get grid(){return this._grid}get key(){return this._key}set key(e){this._key=e}constructor(e){super(),this._grid=e,this.key=e.config.personalizationKey+"_"+e.config.personalizationVersion}getPersonalizationData(){const e=this.get(this.key);if(this.hasPersonlizationKey(this.grid))return e?JSON.parse(e):null}listPersonalization(){const e=[];if(this.hasPersonlizationKey(this.grid)){for(let t=0;t<localStorage.length;t++)-1!=localStorage.key(t).indexOf(this.key)&&e.push(localStorage.key(t));return e}}savePersonalizationByAll(e){if(this.hasPersonlizationKey(this.grid)){const t={columns:this.grid.columns.map((e=>{let t=e.config;return t.columns=[],this.getChildColumn(e.columns,t.columns),t})),groups:this.grid.dataSource.config.groups,orders:this.grid.dataSource.config.orders,filters:this.grid.dataSource.config.filters};i.Convert.isValue(e)?this.set(this.key+"_"+e,JSON.stringify(t)):this.set(this.key,JSON.stringify(t))}}savePersonalization(e){if(this.hasPersonlizationKey(this.grid)){const t=this.grid.columns.map((e=>{const t={caption:i.Convert.isValue(e.config.caption)?e.config.caption:"",field:i.Convert.isValue(e.config.field)?e.config.field:"",width:i.Convert.isValue(e.config.width)?e.config.width:"",visible:i.Convert.isValue(e.config.visible)?e.config.visible:"",part:i.Convert.isValue(e.config.part)?e.config.part:"",columns:[]=[]};return this.getChildColumn(e.columns,t.columns),t})),{groups:r,orders:n,filters:o}=this.grid.dataSource.config,s={columns:t,groups:r,orders:n,filters:o};i.Convert.isValue(e)?this.set(this.key+"_"+e,JSON.stringify(s)):this.set(this.key,JSON.stringify(s))}}getChildColumn(e,t){for(const r of e){const e={caption:i.Convert.isValue(r.config.caption)?r.config.caption:"",field:i.Convert.isValue(r.config.field)?r.config.field:"",width:i.Convert.isValue(r.config.width)?r.config.width:"",visible:i.Convert.isValue(r.config.visible)?r.config.visible:"",part:i.Convert.isValue(r.config.part)?r.config.part:"",columns:[]=[]};this.getChildColumn(r.columns,e.columns),t.push(e)}return t}stringifyWithFunctions(e){return JSON.stringify(e,(function(e,t){return"function"==typeof t?"function"+t.toString():t}))}jsonParseWithFunctions(e){this.grid;return JSON.parse(e,(function(e,t){if("string"==typeof e&&/^function\s*\(/.test(t)){t.replace(/^function\s*\(/,"(")}return t}))}removePersonalization(e){this.hasPersonlizationKey(this.grid)&&(this.clearItem(e),this.grid.rebuild(),this.grid.reload())}setPersonalization(e){if(this.hasPersonlizationKey(this.grid)){const t=localStorage.getItem(e);this.set(this.key,t)}}hasPersonlizationKey(e){let t=!0;return 0==i.Convert.isValue(e.config.personalizationKey)&&(n.Log.error((()=>["grid.config.personalizationKey",e.config.personalizationKey])),t=!1),0==i.Convert.isValue(e.config.personalizationVersion)&&(n.Log.error((()=>["grid.config.personalizationVersion",e.config.personalizationVersion])),t=!1),t}}},4202:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToolFactory=t.GridTools=void 0;const n=r(2271);var i;!function(e){e.Title="title",e.Save="save",e.Cancel="cancel",e.Search="search",e.Pager="pager",e.Refresh="refresh",e.Excel="excel",e.ExcelImport="excelImport",e.Pdf="pdf",e.ScrollBar="scrollbar",e.ScrollVert="scrollvert",e.ScrollHorz="scrollhorz",e.Add="add",e.AddRow="addRow",e.AddTop="addTop",e.Insert="insert",e.Append="append",e.Delete="delete",e.Group="group",e.Undo="undo",e.Redo="redo",e.Status="status"}(i||(t.GridTools=i={}));t.ToolFactory=class{static create(e,t){switch(t){case i.Title:return new n.ToolTitle(e);case i.Save:return new n.ToolSave(e);case i.Pager:return new n.ToolPager(e);case i.Cancel:return new n.ToolCancel(e);case i.Add:case i.AddRow:return new n.ToolAddRow(e);case i.AddTop:return new n.ToolAddTop(e);case i.Insert:return new n.ToolInsertRow(e);case i.Append:return new n.ToolAppendRow(e);case i.Delete:return new n.ToolDelete(e);case i.Group:return new n.ToolGroup(e);case i.Undo:return new n.ToolUndo(e);case i.Redo:return new n.ToolRedo(e);case i.Refresh:return new n.ToolRefresh(e);case i.Excel:return new n.ToolExcelExport(e);case i.ExcelImport:return new n.ToolExcelImport(e);default:return new n.GridTool(e,t)}}}},168:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Clipboard=void 0;const i=r(9402),o=r(3396),s=r(4772),a=r(696),l=r(7134),u=r(9114);t.Clipboard=class{constructor(e){this.grid=e}copy(e){const t=this.unionRanges(e),r=this.parseArray(t),n=this.makeString(r);this.setClipboard(n)}paste(e){return n(this,void 0,void 0,(function*(){const t=yield this.getClipboard(),r=this.parseArray(t);o.Convert.isValue(e)&&1===e.length&&e[0].rowStart===e[0].rowEnd&&e[0].colStart===e[0].colEnd&&(e=yield this.spreadRange(e[0],r));const n=yield this.makeEditDatas(r,e);this.grid.selectManager.fireCommandAsync(this.grid.selectManager,new i.UpdateCommand(n))}))}fillCells(e,t){return n(this,void 0,void 0,(function*(){const r=yield this._makeEditData(e,t);this.grid.selectManager.fireCommandAsync(this.grid.selectManager,new i.UpdateCommand(r))}))}unionRanges(e){let t;for(const r of e)if(o.Convert.isNull(t))t={type:r.type,cellMap:new Map(r.cellMap)};else{const e=r.cellMap,n=t.cellMap;e.forEach(((e,t)=>{if(n.has(t)){const r=n.get(t);n.set(t,new Set([...r,...e]))}else n.set(t,e)}))}return t}getColumns(e=void 0){let t=[];const r=this.grid;if(void 0===e){e=[];const n=[].concat(r.headColumns).concat(r.viewportColumns).concat(r.tailColumns);o.Arrays.dfsAction(n,(e=>(t.push(e),e.columns)))}else e.forEach((e=>t.push(o.Arrays.dfsSearch(this.grid.visibleColumns,(t=>t.name===e||t.columns)))));return t}makeString(e){return e.map((e=>e.join("\t"))).join("\n")}setClipboard(e){return n(this,void 0,void 0,(function*(){yield navigator.clipboard.writeText(e)}))}getClipboard(){return n(this,void 0,void 0,(function*(){if("denied"===(yield navigator.permissions.query({name:"clipboard-read"})).state)throw new Error("Not allowed to read clipboard.");return yield navigator.clipboard.readText()}))}parseArray(e){return"string"==typeof e?this.parseTextToArray(e):this.parseRangeToArray(e)}parseTextToArray(e){return e.split("\r\n").filter((e=>o.Convert.isValue(e))).map((e=>{if(!o.Convert.isEmpty(e))return e.split("\t")}))}parseRangeToArray(e){const t=e.cellMap,r=[...e.cellMap.keys()];let n=a.CopyRange.sortRows(r,this.grid);return n.every((e=>o.Convert.isNull(e)))&&(n=r),n.map((r=>{const n="string"==typeof r,i=n?r:r.key,o=t.get(i);return(e.type===a.SelectType.Row?this.getColumns():a.CopyRange.sortColumns([...o],this.grid)).filter((e=>e.config.type!==l.ColumnTypes.Frozen)).map((e=>{var t,o,a;return n?i===s.PanelType.Header?null===(t=e.getHeaderValue(void 0))||void 0===t?void 0:t.toString():i===s.PanelType.Footer?null===(o=e.getFooterValue(void 0))||void 0===o?void 0:o.toString():void 0:null===(a=e.getValue(r))||void 0===a?void 0:a.toString()}))}))}makeEditDatas(e,t){var r,i,s;return n(this,void 0,void 0,(function*(){let n=[];const u=new Map;for(const s of t){let t=a.CopyRange.sortRows([...s.cellMap.keys()],this.grid),c=e.slice();for(let h=0;h<t.length;h++){const d=t[h],f=s.cellMap.get(d.key);let p=o.Convert.isNull(f)?this.getColumns():a.CopyRange.sortColumns([...f],this.grid);p=p.filter((e=>e.config.type!==l.ColumnTypes.Frozen));let m=c[h>e.length-1?h%e.length:h];for(let e=0;e<p.length;e++){const t=p[e];if(!1===(null===(r=t.config)||void 0===r?void 0:r.skipPaste)&&!0===t.config.editable){const r=m[e>m.length-1?e%m.length:e];yield this.mergeEditData(n,d,t,r);const o=null!==(i=u.get(d.key))&&void 0!==i?i:new Set;o.add(t.name),u.set(d.key,o)}}}}return this.grid.selectManager.clear(),null===(s=this.grid.selectManager)||void 0===s||s.selectCells(u,!0),n}))}spreadRange(e,t){var r,i,s;return n(this,void 0,void 0,(function*(){const n=e.rowStart;let u=this.grid.view.keyMap.get(n);const c=e.colStart,h=o.Arrays.dfsSearch(this.grid.columns,(e=>e.name===c||e.columns)),d=this.getColumns();let f,p=u.rowIndex,m=p+t.length,g=d.findIndex((e=>e===h)),v=0;const y=new Map;for(let e=p;e<m&&(u=yield this.grid.view.getRow(e),!o.Convert.isNull(u));e++){const e=null!==(i=null===(r=null==f?void 0:f.cellMap)||void 0===r?void 0:r.get(u.key))&&void 0!==i?i:new Set;let n=g+t[v++].length;for(let t=g;t<n;t++){const r=d[t];if(o.Convert.isNull(r))break;(null==r?void 0:r.config.type)!==l.ColumnTypes.Frozen?e.add(r.name):n++}const c=null!==(s=null==f?void 0:f.cellMap)&&void 0!==s?s:new Map;c.set(u.key,e),f={cellMap:c,type:a.SelectType.Cell},y.set(u.key,new Set(e))}return[f]}))}makeEditData(e,t){var r,i;return n(this,void 0,void 0,(function*(){const n=[],s=this.intersectRange(e,t),u=this.grid.view.keyMap,c=this.subtractRange(t,e),h=e.rowStart!=t.rowStart,d=e.colStart!=t.colStart;let f=a.CopyRange.sortRows([...c.keys()],this.grid),p=a.CopyRange.sortRows([...e.cellMap.keys()],this.grid);h&&(f.reverse(),p.reverse());for(let t in f){const u=Number.parseInt(t),h=f[t],m=p[u>p.length-1?u%p.length:u],g=o.Convert.isNull(c.get(h.key))?this.getColumns():a.CopyRange.sortColumns([...c.get(h.key)],this.grid).filter((e=>e.config.type!==l.ColumnTypes.Frozen)),v=o.Convert.isNull(e.cellMap.get(m.key))?this.getColumns():a.CopyRange.sortColumns([...e.cellMap.get(m.key)],this.grid).filter((e=>e.config.type!==l.ColumnTypes.Frozen));d&&(g.reverse(),v.reverse());const y=null!==(r=s.get(h.key))&&void 0!==r?r:new Set;for(let e in g){const t=g[e],r=Number.parseInt(e);if(!1===(null===(i=t.config)||void 0===i?void 0:i.skipPaste)){const e=v[r>v.length-1?r%v.length:r].getValue(m);yield this.mergeEditData(n,h,t,e)}y.add(t.name)}s.set(h.key,y)}const m=this.subtractRange(e,t);for(const[e,t]of m){const r=u.get(e),i=o.Convert.isNull(t)?this.getColumns():this.getColumns([...t]);for(const e in i){const t=i[e];!1===t.config.skipPaste&&(yield this.mergeEditData(n,r,t,""))}}return this.grid.selectManager.clear(),t.type===a.SelectType.Row?this.grid.selectManager.selectRows(new Set(s.keys()),!0):this.grid.selectManager.selectCells(s,!0),n}))}intersectRange(e,t){const r=new Map;return e.cellMap.forEach(((n,i)=>{if(t.cellMap.has(i))if(e.type===a.SelectType.Row)r.set(i,void 0);else{const e=t.cellMap.get(i),o=[...n].filter((t=>e.has(t)));o.length>0&&r.set(i,new Set(o))}})),r}subtractRange(e,t){const r=new Map;return e.cellMap.forEach(((n,i)=>{if(t.cellMap.has(i)){if(e.type===a.SelectType.Row)return!1;const o=t.cellMap.get(i),s=[...n].filter((e=>!o.has(e)));s.length>0&&r.set(i,new Set(s))}else r.set(i,n)})),r}mergeEditData(e,t,r,i){return n(this,void 0,void 0,(function*(){const n=t.key;let s=e.find((e=>e.key===n&&e.field==r.field));o.Convert.isNull(s)?e.push({key:null==t?void 0:t.key,field:r.field,value:i}):s.value=i}))}_makeEditData(e,t){return n(this,void 0,void 0,(function*(){const r={row:e.rowStart!=t.rowStart,col:e.colStart!=t.colStart};let n=this.toArray(e,r),i=this.toArray(t,r),o=!1;if(this.isNarrowed(n,i)){let e=n;n=i,i=e,i.forEach((e=>e.forEach((e=>e.value="")))),o=!0}return n=n.map((e=>e.filter((e=>e.column instanceof u.FrozenColumn==0)))),yield this.__makeEditData(n,i,o)}))}isNarrowed(e,t){return e.length>t.length||e.length>0&&t.length>0&&e[0].length>t[0].length}__makeEditData(e,t,r=!1){return n(this,void 0,void 0,(function*(){let n=[];const i=this.grid.selectManager;i.clear();for(const s in t){const a=t[s],l=Number.parseInt(s);let c=0;for(const t in a){const s=a[t],h=l>e.length-1?l%e.length:l,d=c>e[h].length-1?c%e[h].length:c,f=e[h][d];let p=!0;if(f.rowItem!=s.rowItem||f.column!=s.column)if(s.column instanceof u.FrozenColumn==0){if(!1===s.column.config.skipPaste){const e=o.Convert.isNull(s.value)?f.column.getValue(f.rowItem):s.value;yield this.mergeEditData(n,s.rowItem,s.column,e),p=!r}}else c--,r&&(p=f.rowItem==s.rowItem);p&&i.addSelectedCell(s.rowItem.key,s.column.name),c++}}return n}))}toArray(e,t){const r=e.cellMap,n=[];r.forEach(((e,t)=>{const r=this.grid.view.keyMap.get(t);n.push(r)}));const i=n.sort(((e,t)=>{const r=null==e?void 0:e.rowIndex,n=null==t?void 0:t.rowIndex;return r<n?-1:r==n?0:1}));t.row&&i.reverse();const s=[];for(const e in i){const n=i[e],l=r.get(n.key),u=o.Convert.isValue(l)?[...l]:void 0;let c=this.getColumns(u);c=a.CopyRange.sortColumns(c,this.grid),t.col&&c.reverse();const h=c.map(((e,t)=>({rowItem:n,column:e})));s.push(h)}return s}}},4597:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.EventManager=t.EventHandler=void 0;const i=r(3396),o=r(4579),s=r(3988),a=r(7074);class l{constructor(e,t,r,n,i){this._handlerName=e,this._eventType=t,this._eventKey=r,this._eventHander=n,this.addTarget(i)}get handlerName(){return this._handlerName}set handlerName(e){this._handlerName=e}get eventType(){return this._eventType}set eventType(e){this._eventType=e}get eventKey(){return this._eventKey}set eventKey(e){this._eventKey=e}get eventHander(){return this._eventHander}set eventHander(e){this._eventHander=e}get eventTargets(){var e;return null!==(e=this._eventTargets)&&void 0!==e?e:this._eventTargets=new Set}checkTarget(e){return this.eventTargets.has(e)}addTarget(e){if(e instanceof HTMLElement)this.eventTargets.add(e);else for(let t of e)this.eventTargets.add(t);for(let e of this.eventTargets.values())0==e.isConnected&&this.eventTargets.delete(e)}}t.EventHandler=l;t.EventManager=class{constructor(e){this._doing=!1,this.eventHandler=e=>{if("mousemove"!=e.type&&e.type,this.grid.hasDetail){const t=e.composedPath();for(const e of t)if(e instanceof HTMLElement&&e.className.split(" ").indexOf(a.SbCss.grid)>=0){if(e.id==this.grid.name)break;return}}0!=this.handlerMap.has(e.type)&&this.lock.critical((()=>this.processEvent(e,this.handlerMap.get(e.type))))},this._grid=e}get lock(){var e;return null!==(e=this._lock)&&void 0!==e?e:this._lock=new i.Lock}get grid(){return this._grid}get handlerMap(){var e;return null!==(e=this._handlerMap)&&void 0!==e?e:this._handlerMap=new Map}get doing(){return this._doing}setHandler(e,t,r,n=void 0,o=void 0,s=!1){if(i.Convert.isEmpty(t))return;0==this.handlerMap.has(t)&&this.handlerMap.set(t,[]);const a=this.handlerMap.get(t),u=t=>t.handlerName===e&&t.eventKey===r;if(i.Convert.isNull(n)||i.Convert.isEmpty(o)){const e=a.findIndex(u);return void(e>=0&&a.splice(e,1))}const c=a.findIndex(u);let h;c>=0&&(h=a[c],a.splice(c,1),h.eventHander==n?h.addTarget(o):h=void 0),i.Convert.isNull(h)&&(h=new l(e,t,r,n,o)),a.push(h);const d={capture:!1,passive:!1};"wheel"!=t&&"scroll"!=t||(d.passive=!0,d.capture=!0),s?o instanceof Array?o.forEach((e=>{e.removeEventListener(t,this.eventHandler),e.addEventListener(t,this.eventHandler,d)})):(o.removeEventListener(t,this.eventHandler),o.addEventListener(t,this.eventHandler,d)):(this.grid.container[0].removeEventListener(t,this.eventHandler),this.grid.container[0].addEventListener(t,this.eventHandler,d))}cloneEvent(e,t){let r=e;return r.currentTarget=t,r}processEvent(e,t){return n(this,void 0,void 0,(function*(){let r=!1,n=s.SBGrid3.$.event.fix(e);const a=this.grid.wrapper[0],l=e.composedPath();try{this._doing=!0;for(const e of l){if(e==a)break;if(e instanceof HTMLElement==0)continue;const i=e;n=this.cloneEvent(n,i);for(let e of t)if(e.checkTarget(i)){const t=e.eventHander(n);if(r=t instanceof Promise?!1===(yield t):!1===t,r)return}}}finally{if(r&&(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()),this._doing=!1,i.Convert.isValue(this.grid.refreshingCommands)){const e=o.Grid.mergeRefreshCommand(this.grid.refreshingCommands.splice(0));this.grid.fireCommandAsync(this.grid,e)}}}))}clear(){this.handlerMap.clear()}}},2033:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardShortCut=t.KeyboardEventHandler=t.FocusEvent=t.FocusManager=void 0;const i=r(2733),o=r(1880),s=r(9402),a=r(8154),l=r(5643),u=r(1374),c=r(3396),h=r(7392),d=r(1700),f=r(4772),p=r(3988),m=r(7074),g=r(2519),v=r(9114),y=r(3905),b=r(7134);class w extends i.Observer{get grid(){return this._grid}set grid(e){this._grid=e}get focus(){return this._focus}set focus(e){this.moveFocus(e)}get keyboardEventHandler(){var e;return null!==(e=this._keyboardEventHandler)&&void 0!==e?e:this._keyboardEventHandler=new S(this.grid)}get editConfig(){var e;return null!==(e=this._editConfig)&&void 0!==e?e:this._editConfig=c.Convert.isValue(this.grid.config.editable)?this.grid.config.editable:void 0}constructor(e){super(e),this._grid=e}addEventHandler(e){this.grid.setEvent("focuseManager","mousedown",this.constructor.name,(e=>this.mouseDown(e)),e),this.keyboardEventHandler.addEventListner()}initEditEvent(e){let t=this.grid.editConfig;c.Convert.isValue(t)&&this.grid.setEvent("edit",t.eventType,this.name,(e=>this.enableEdit(e)),e)}mouseDown(e){return n(this,void 0,void 0,(function*(){const t=p.SBGrid3.$(e.target).closest(`.${m.SbCss.col}`),r=t.data("cell");if(c.Convert.isNull(r))return;const n={rowItem:yield this.grid.getRowItem(t),column:r.column,cell:r,panelType:this.getPanelType(t),eventType:C.mousedown};this.moveFocus(n)}))}moveFocus(e){var t;return n(this,void 0,void 0,(function*(){const r=null==e?void 0:e.rowItem,n=null==e?void 0:e.column,i=null!==(t=e.cell)&&void 0!==t?t:e.cell=(null==e?void 0:e.panelType)===f.PanelType.Body?c.Utils.findCellFromColumn(this.grid.rowLayout,n):void 0,o=null==e?void 0:e.panelType;if(c.Convert.isEmpty(this.focus)||!1===this.isFocused(r,n,o,i))try{const t=this.canGridCommand(r,n);if(!1===t)return!1;if(!this.editUpdate(r,n))return;(yield this._moveFocus(e))&&t&&this.grid.doGridCommand(new y.GridFocusCommand(null==r?void 0:r.key,n)),this.grid.scrollPanel.removeMenu()}catch(e){u.Log.debug(["focus change fail",e])}}))}_moveFocus(e){var t,r,i,o,s,l,h;return n(this,void 0,void 0,(function*(){const n=this.focus;this._focus=e;const d=new a.FocusedCommand(this.focus,n,this.focus.eventType),f=null===(t=yield this.fireCommandAsync(this,d))||void 0===t||t;return f?(c.Convert.isValue(n)&&this.fireCommandAsync(this,this.makeRefreshCommand(n)),this.fireCommandAsync(this,this.makeRefreshCommand(this.focus)),null===(r=this._keyboardEventHandler)||void 0===r||r.focusMoved(),this.returnFocus(),u.Log.debug(["focus changed",null===(i=null==n?void 0:n.rowItem)||void 0===i?void 0:i.key,null===(o=null==n?void 0:n.column)||void 0===o?void 0:o.config.caption,"--\x3e",null===(s=this.focus.rowItem)||void 0===s?void 0:s.key,null===(h=null===(l=this.focus)||void 0===l?void 0:l.column)||void 0===h?void 0:h.config.caption])):this._focus=n,f}))}canGridCommand(e,t){let r;return!c.Convert.isValue(null==e?void 0:e.key)||(r=new y.GridFocusCommand(null==e?void 0:e.key,t),0!=this.grid.canGridCommand(r))}makeRefreshCommand(e,t=!0){var r,n,i,o;let s;return s={rowStart:null===(r=null==e?void 0:e.rowItem)||void 0===r?void 0:r.rowIndex,rowEnd:null===(n=null==e?void 0:e.rowItem)||void 0===n?void 0:n.rowIndex,colStart:null===(i=null==e?void 0:e.column)||void 0===i?void 0:i.index,colEnd:null===(o=null==e?void 0:e.column)||void 0===o?void 0:o.index,onlyLayout:t},new a.RefreshCommand(s)}editUpdate(e,t){if(c.Convert.isValue(e)){if(!this.canUpdate(e,t))return!0}const r=this.focus,n=this.validationCkeck(null==r?void 0:r.column);if(!n)throw u.Log.debug(["validatation check fail!"]),this.fireCommandAsync(this,new a.RefreshCommand({rowStart:r.rowItem.rowIndex,rowEnd:r.rowItem.rowIndex,colStart:r.column.index,colEnd:r.column.index})),"validatation check fail!";return this.update(null==r?void 0:r.column),n}returnFocus(){const e=document.activeElement;this.grid.container.is(e)||this.grid.container.find(e).length>0||this.grid.container.trigger("focus")}validationCkeck(e){var t;const r=null===(t=this.editConfig)||void 0===t?void 0:t.mode;let n=!0;const i=r===h.EditMode.incell?[e]:this.grid.columns;return[...this.grid.view.editKeyMap.keys()].forEach((e=>{const t=this.grid.view.keyMap.get(e);c.Arrays.bfsAction(i,(e=>{if(!1===e.editable(t)||c.Convert.isNull(e.config.validators))return e.columns;return e.isValid(t).state!==g.ValidationState.Valid&&(n=!1),e.columns}))})),n}update(e){var t;const r=[...this.grid.view.editKeyMap.keys()],n=null===(t=this.editConfig)||void 0===t?void 0:t.mode;r.forEach((t=>{const r=this.grid.view.keyMap.get(t);let i;if(n==h.EditMode.incell)i=[{value:r.temp[e.field],key:r.key,field:e.field}];else{const e=r.temp;i=Object.keys(e).map((t=>({value:e[t],key:r.key,field:t})))}this.grid.view.clearEdit(),c.Convert.isValue(i)&&this.fireCommand(this,new s.UpdateCommand(i))}))}canUpdate(e,t){var r;const n=this.focus,i=null===(r=this.grid.editConfig)||void 0===r?void 0:r.mode;if(c.Convert.isNull(i))return!1;const o=this.grid.view.editKeyMap;let s=!1;switch(i){case h.EditMode.incell:s=(null==o?void 0:o.size)>0&&(n.rowItem!==e||n.column!=t);break;case h.EditMode.inline:s=(null==o?void 0:o.size)>0&&n.rowItem!==e}return s}enableEdit(e){return n(this,void 0,void 0,(function*(){if(1!=e.which)return;let t=p.SBGrid3.$(e.target).closest(`.${m.SbCss.col}`),r=yield this.grid.getRowItem(t),n=this.grid.getColumn(t);c.Convert.isNull(r)||c.Convert.isNull(n)||this._enableEdit(r,n)}))}_enableEdit(e,t){var r;((null===(r=this.editConfig)||void 0===r?void 0:r.mode)!==h.EditMode.incell||t.editable(e))&&(e.node instanceof l.GroupNode||c.Convert.isEmpty(this.grid.view.editKeyMap)&&this.fireCommandAsync(this,new a.EditCommand("",e,t)))}cancelEdit(){c.Convert.isValue(this.grid.view.editKeyMap)&&(this.grid.view.clearEdit(),this.fireCommandAsync(this,new a.RefreshCommand({rowStart:this.focus.rowItem.rowIndex,rowEnd:this.focus.rowItem.rowIndex})))}doCommand(e,t){switch(t.command){case o.Commands.Cancel:case o.Commands.Escape:this.doEscapeCommand(t);break;case o.Commands.Edit:this.doEditCommand(t);break;default:return super.doCommand(e,t)}return!0}getPanelType(e){const t=e.closest(`.${m.SbCss.panel}`);return t.length<1?void 0:t.hasClass(m.SbCss.body)?f.PanelType.Body:t.hasClass(m.SbCss.header)?f.PanelType.Header:t.hasClass(m.SbCss.footer)?f.PanelType.Footer:t.hasClass(m.SbCss.caption)?f.PanelType.Caption:t.hasClass(m.SbCss.filter)?f.PanelType.Filter:void 0}doEscapeCommand(e){var t;if((null===(t=this.focus)||void 0===t?void 0:t.panelType)===f.PanelType.Body)return this.cancelEdit(),void this.grid.container.trigger("focus")}doEditCommand(e){this.focus.column,d.GroupColumn}isFocused(e,t,r,n){var i,o,s,a;const l=this.focus;return c.Convert.isNull(n)&&r==f.PanelType.Body&&(n=c.Utils.findCellFromColumn(this.grid.rowLayout,t)),(null==l?void 0:l.panelType)===r&&(null===(i=null==l?void 0:l.rowItem)||void 0===i?void 0:i.key)===(null==e?void 0:e.key)&&(null===(o=null==l?void 0:l.column)||void 0===o?void 0:o.name)===(null==t?void 0:t.name)&&(null===(s=null==l?void 0:l.cell)||void 0===s?void 0:s.row)==n.row&&(null===(a=null==l?void 0:l.cell)||void 0===a?void 0:a.col)==n.col}doTabNextFocusFilter(){this.keyboardEventHandler.keyboardNavigation.doTabNextFocusFilter()}}var C,_;t.FocusManager=w,function(e){e.keydown="keydown",e.mousedown="mousedown"}(C||(t.FocusEvent=C={}));class S extends i.Observer{get keyboardNavigation(){return this._keyboardNavigation}set keyboardNavigation(e){this._keyboardNavigation=e}constructor(e){super(e),this.grid=e,this.grid.config.navigatable&&(this.keyboardNavigation=new x(this.grid))}getCommand(e,t){var r;const n=null!==(r=this.commands)&&void 0!==r?r:this.commands=new Map;let i;return n.has(e)?i=n.get(e):(i=o.CommandFactory.create(e,...t),this.commands.set(e,i)),i}addEventListner(){this.grid.setEvent(this.name,"keydown",this.name,(e=>(e.ctrlKey?this.ctrlKeyEventOccured(e):e.shiftKey?this.shiftKeyEventOccured(e):this.keyEventOccured(e),!0)),this.grid.container[0])}keyEventOccured(e){var t,r,n,i,s,l,u,h;const d=this.grid.focusManager.focus;let p,m;if(c.Convert.isNull(d))return e.preventDefault(),void(null===(t=this.keyboardNavigation)||void 0===t||t.bodyFirstCell());switch(e.key){case _.ArrowDown:case _.ArrowLeft:case _.ArrowRight:case _.ArrowUp:return m=this.isEdit(d),void(m||(e.preventDefault(),null===(r=this.keyboardNavigation)||void 0===r||r.doNavigateFocusCommand(e.key)));case _.Tap:return e.preventDefault(),void(null===(n=this.keyboardNavigation)||void 0===n||n.doTabNextFocus());case _.Home:return e.preventDefault(),void(null===(i=this.keyboardNavigation)||void 0===i||i.navigateFirstCell(d.rowItem,d.panelType));case _.End:return e.preventDefault(),void(null===(s=this.keyboardNavigation)||void 0===s||s.navigateLastCell(d.rowItem,d.panelType));case _.PageUp:return e.preventDefault(),void(null===(l=this.keyboardNavigation)||void 0===l||l.doPageChange(-1));case _.PageDown:return e.preventDefault(),void(null===(u=this.keyboardNavigation)||void 0===u||u.doPageChange(1));case _.Esc:case _.Escape:p=new a.EscapeCommand;break;case _.Enter:switch(null==d?void 0:d.panelType){case f.PanelType.Filter:p=new a.EditFilterCommand(e,d);break;case f.PanelType.Body:if(d.column.isEdit(d.rowItem))try{this.grid.focusManager.editUpdate()&&this.grid.container.trigger("focus")}catch(e){}else p=o.CommandFactory.create(o.Commands.Edit,null===(h=this.grid.editConfig)||void 0===h?void 0:h.mode,d.rowItem,d.column)}case _.Space:}c.Convert.isValue(p)&&this.fireCommandAsync(this,p)}isEdit(e){return(null==e?void 0:e.panelType)===f.PanelType.Filter&&this.grid.scrollPanel.filterPanel.isEdit}shiftKeyEventOccured(e){var t,r;return n(this,void 0,void 0,(function*(){let n;const i=this.grid.focusManager.focus;switch(e.key){case _.ArrowLeft:case _.ArrowRight:case _.ArrowDown:case _.ArrowUp:n=o.CommandFactory.create(o.Commands.Select,[e,i]);break;case _.Tap:e.preventDefault();!this.isEdit(i)&&(null===(r=null===(t=this.keyboardNavigation)||void 0===t?void 0:t.naviConfig)||void 0===r?void 0:r.tabToNextCell)&&this.keyboardNavigation.doTabPrevFocus()}c.Convert.isValue(n)&&this.fireCommandAsync(this,n)}))}ctrlKeyEventOccured(e){switch(e.key.toLowerCase()){case"z":e.shiftKey?this.fireCommandAsync(this,new s.RedoCommand):this.fireCommandAsync(this,new s.UndoCommand);break;case"y":this.fireCommandAsync(this,new s.RedoCommand);break;case"c":this.fireCommandAsync(this,new s.CopyCommand);break;case"v":this.fireCommandAsync(this,new s.PasteCommand);break;case"a":this.fireCommandAsync(this,new a.SelectCommand);break;default:e.preventDefault()}}focusMoved(){var e;null===(e=this.keyboardNavigation)||void 0===e||e.setCellInfo()}}t.KeyboardEventHandler=S;class x extends i.Observer{get focus(){return this.grid.focusManager.focus}get row(){return this._row}set row(e){this._row=e}get col(){return this._col}set col(e){this._col=e}get naviConfig(){var e;return null!==(e=this._naviConfig)&&void 0!==e?e:this._naviConfig=this.grid.config.navigatable}get tabConfig(){var e,t,r;return null!==(e=this._tabConfig)&&void 0!==e?e:this._tabConfig=c.Convert.isValue(null===(t=this.naviConfig)||void 0===t?void 0:t.tabToNextCell)?null===(r=this.naviConfig)||void 0===r?void 0:r.tabToNextCell:void 0}constructor(e){super(e),this.grid=e}setCellInfo(){var e,t;const r=this.focus;r.eventType===C.mousedown&&(this.row=null===(e=null==r?void 0:r.cell)||void 0===e?void 0:e.row,this.col=null===(t=null==r?void 0:r.cell)||void 0===t?void 0:t.col)}doNavigateFocusCommand(e){return n(this,void 0,void 0,(function*(){const t=this.focus,r={rowItem:null==t?void 0:t.rowItem,column:null==t?void 0:t.column,cell:null==t?void 0:t.cell,panelType:null==t?void 0:t.panelType,eventType:null==t?void 0:t.eventType};this._doMoveFocusCommand(e,r)}))}_doMoveFocusCommand(e,t,r=!1){return n(this,void 0,void 0,(function*(){const{rowItem:n,column:i,cell:o,panelType:s}=t,a=yield this.getNextFocus(e,t,r);if(c.Convert.isNull(a)){if(e==_.ArrowLeft||e==_.ArrowRight)return;const r=e===_.ArrowDown?1:-1,n=this.getNextPanel(s,r);if(c.Convert.isNull(n))return;return t.rowItem=void 0,t.panelType=n,void this._doMoveFocusCommand(e,t,!0)}s==f.PanelType.Body&&(c.Convert.isNull(a.rowItem)||c.Convert.isNull(a.column))||(a.eventType=C.keydown,this.moveFocus(a))}))}moveFocus(e){this.grid.focusManager.focus=e}getNextPanel(e,t){var r;const n=this.grid.scrollPanel.panels,i=n.findIndex((t=>t._class==="sbgrid-"+e));if(-1===i)return;const o=i+t;if(o<0||o>n.length-1)return;let s=null===(r=n[o])||void 0===r?void 0:r._class;return s=s.substring(7,s.length),c.Convert.parseEnum(f.PanelType,s)}getNextFocus(e,t,r=!1){return n(this,void 0,void 0,(function*(){const{rowItem:n,column:i,cell:o,panelType:s}=t,a=this.isGroupHeaderFooter(n)?this.getMatrix(s,n.node):this.getMatrix(s);let l,u=n;switch(e){case _.ArrowRight:l=yield this.getBesideColumn(1,o,a,s);break;case _.ArrowLeft:l=yield this.getBesideColumn(-1,o,a,s);break;case _.ArrowDown:const e=s!==f.PanelType.Body?this.getGroupItem(o,a,1,r):yield this.getBelowCoord(o,u,a,r);u=null==e?void 0:e.rowItem,l=null==e?void 0:e.cell;break;case _.ArrowUp:const t=s!==f.PanelType.Body?this.getGroupItem(o,a,-1,r):yield this.getAboveCoord(o,u,a,r);u=null==t?void 0:t.rowItem,l=null==t?void 0:t.cell}return c.Convert.isNull(l)?void 0:{rowItem:u,column:l.column,cell:l,panelType:s}}))}isGroupHeaderFooter(e){const t=null==e?void 0:e.node;return t instanceof l.GroupNode||t instanceof l.FooterNode}getMatrix(e,t){switch(e){case f.PanelType.Body:return c.Convert.isValue(t)?this.getGroupMatrix(t):this.grid.rowMatrix;case f.PanelType.Caption:return this.grid.captionMatrix;case f.PanelType.Header:return this.grid.headerMatrix;case f.PanelType.Filter:return this.grid.filterMatrix;case f.PanelType.Footer:return this.grid.footerMatrix}}getGroupMatrix(e){const t=e instanceof l.GroupNode,r=e instanceof l.FooterNode;if(t||r){const r=t?e:e.parent,n=this.grid.groupLayout(r.igroup.field);return t?n.header.toMatrix():n.footer.toMatrix()}}findCell(e,t){const r=e.matrix;let n;for(const e of r)if(n=e.find((e=>(null==e?void 0:e.column)==t)),c.Convert.isValue(n))break;return n}getChildIndex(e){for(;c.Convert.isValue(e.columns);)e=e.columns[e.columns.length-1];return null==e?void 0:e.index}getBesideColumn_test(e,t,r,i){var o;return n(this,void 0,void 0,(function*(){let n=this.grid.topCol,s=this.grid.wholeColumns[t.col+e];if(c.Convert.isNull(s))return;s instanceof v.FrozenColumn&&(s=this.grid.wholeColumns[t.col+e+e]);const a=null!==(o=null==s?void 0:s.index)&&void 0!==o?o:-1;if(a<0||a>=this.grid.wholeColumns.length)return;let l,u=yield this.grid.viewport.calcCols(n,!0);if(c.Convert.isNull(l=u.headCells.find((e=>e.col==a)))&&c.Convert.isNull(l=u.tailCells.find((e=>e.col==a))))for(;!(c.Convert.isValue(l=u.bodyCells.find((e=>e.col==a&&0==e.outOfView)))||0==u.bodyCells.length||(n+=e,n<0));)u=yield this.grid.viewport.calcCols(n,!0);this.grid.topCol!=n&&(this.grid.topCol=n,r=this.getMatrix(i));const h=r.matrix;let d,f=this.row;for(;c.Convert.isNull(d)&&f<h.length;){const e=h[f];d=null==e?void 0:e.find((e=>e.column==l.column)),f++}return this.col=null==d?void 0:d.col,d}))}getBesideColumn(e,t,r,i){var o;return n(this,void 0,void 0,(function*(){const n=this.grid.topCol,s=yield this.grid.viewport.calcCols(n,!0),a=c.Convert.isValue(t.column.columns)&&e>0?this.getChildIndex(t.column)+e:(null===(o=t.column)||void 0===o?void 0:o.index)+e;if(a<0||a>s.lastCol)return;let l=yield this.getTopCol(n,e,a);if(c.Convert.isNull(l)&&(t.column.type===b.ColumnTypes.Frozen&&(l=yield this.getTopCol(n,-1*e,a)),c.Convert.isNull(l)))return;const{nextTopCol:h,nextCell:d}=l;n!==h&&(this.grid.topCol=h,u.Log.debug(["FocusManager","naviBeside topCol changed",n,"->",this.grid.topCol]),r=this.getMatrix(i));const f=r.matrix;let p,m=this.row;for(;c.Convert.isNull(p)&&m<f.length;){const e=f[m];p=null==e?void 0:e.find((e=>e.column==d.column)),m++}const g=null==p?void 0:p.col;return t=r.getCell(this.row,g),c.Convert.isNull(t)||((null==t?void 0:t.column)instanceof v.FrozenColumn&&(t=yield this.getBesideColumn(e,t,r,i)),c.Convert.isNull(t))?void 0:(this.col=t.col,t)}))}getTopCol(e,t,r){return n(this,void 0,void 0,(function*(){const n=yield this.grid.viewport.calcCols(e,!0);if(e<0||e>n.lastCol)return;const i=n.fullCells,o=i.findIndex((e=>e.column.index===r)),s=i[o];return c.Convert.isNull(s)||s.outOfView>0?yield this.getTopCol(e+t,t,r):{nextTopCol:e,nextCell:s}}))}getNextTopCol(e,t){return n(this,void 0,void 0,(function*(){const r=yield this.grid.viewport.calcCols(this.grid.topCol,!0),n=r.fullCells.find((e=>e.column.index===t.column.index)),i=this.grid.topCol;let o=i;if(e>0){if(c.Convert.isNull(n)||n.outOfView>0){const t=r.bodyCells;let n=0;for(;t[n].column instanceof d.GroupColumn;)n++;const s=t[n].column;return s.index>=i&&(o=s.index+e),o}}else o=i+e;return o}))}needReloadCol(e){return n(this,void 0,void 0,(function*(){return!1}))}getBelowCoord(e,t,r,i=!1){return n(this,void 0,void 0,(function*(){let n=e.row+e.rowSpan;if(i){t=yield this.grid.view.getRow(this.grid.topRow);const e=this.isGroupHeaderFooter(t)?t.node:void 0;r=this.getMatrix(f.PanelType.Body,e),n=0}if(n>r.matrix.length-1){const e=t.rowIndex+1;if(e>this.grid.rowCount-1)return;t=yield this.grid.view.getRow(e);const i=this.isGroupHeaderFooter(t)?t.node:void 0;r=this.getMatrix(f.PanelType.Body,i),n=0}const o=this.grid.topRow,s=yield this.getTopRow(t,1,o);return o!==s&&(this.grid.topRow=s),e=r.getCell(n,this.col),this.row=e.row,{rowItem:t,cell:e}}))}getGroupItem(e,t,r,n=!1){const i=t.matrix,o=n?1===r?0:i.length-1:1===r?e.row+e.rowSpan:e.row+r,s=o>i.length-1||o<0?void 0:t.getCell(o,this.col);return c.Convert.isValue(s)&&(this.row=o),{rowItem:void 0,cell:s}}getAboveCoord(e,t,r,i=!1){return n(this,void 0,void 0,(function*(){let n=e.row-1;if(i){const e=yield this.grid.viewport.calcRows(this.grid.topRow);t=e.currRows[e.currRows.length-1].rowItem;const i=this.isGroupHeaderFooter(t)?t.node:void 0;n=(r=this.getMatrix(f.PanelType.Body,i)).matrix.length-1}if(n<0){const e=t.rowIndex-1;if(e<0)return;t=yield this.grid.view.getRow(e);const i=this.isGroupHeaderFooter(t)?t.node:void 0;n=(r=this.getMatrix(f.PanelType.Body,i)).matrix.length-1}const o=this.grid.topRow,s=yield this.getTopRow(t,-1,o);return o!==s&&(this.grid.topRow=s),e=r.getCell(n,this.col),this.row=e.row,{rowItem:t,cell:e}}))}reloadBodyPanelMatrix(e){return this.isGroupHeaderFooter(e)?this.getGroupMatrix(e.node):this.getMatrix(f.PanelType.Body)}needReloadRow(e,t,r){var i;return n(this,void 0,void 0,(function*(){const r=yield this.grid.viewport.calcRows(this.grid.topRow),n=r.currRows,o=n.findIndex((t=>{var r;return(null===(r=t.rowItem)||void 0===r?void 0:r.rowIndex)===e.rowIndex}));let s=o<0;const a=n[o],l=n[o+t];if(!s&&1===t){((null===(i=null==l?void 0:l.rowItem)||void 0===i?void 0:i.isSticky)?l.top+l.rowHeight.height>r.scrollHeight:a.top+a.rowHeight.height>r.scrollHeight)&&(s=!0)}return s}))}getTopRow(e,t,r){return n(this,void 0,void 0,(function*(){const n=(yield this.grid.viewport.calcRows(r)).currRows;for(-1===t&&(c.Convert.isEmpty(n)||n[n.length-1].rowIndex<e.rowIndex)&&(t=1);yield this._needReload(e,t,r);)r+=t;return r}))}_needReload(e,t,r){var i;return n(this,void 0,void 0,(function*(){const n=yield this.grid.viewport.calcRows(r),o=n.currRows,s=o.findIndex((t=>{var r;return(null===(r=t.rowItem)||void 0===r?void 0:r.rowIndex)===e.rowIndex}));let a=s<0;if(!a&&1===t){const e=o[s],r=o[s+t];a=(null===(i=null==r?void 0:r.rowItem)||void 0===i?void 0:i.isSticky)||o[o.length-1]==r&&this.isGroupHeaderFooter(r.rowItem)?r.top+r.rowHeight.height>n.scrollHeight:e.top+e.rowHeight.height>n.scrollHeight}return a}))}getBelowItemsGroup(e,t,r,i){return n(this,void 0,void 0,(function*(){}))}getAboveItemsGroup(e,t,r){return n(this,void 0,void 0,(function*(){}))}getPanelType(e){const t=e.closest(`.${m.SbCss.panel}`);return t.length<1?void 0:t.hasClass(m.SbCss.body)?f.PanelType.Body:t.hasClass(m.SbCss.header)?f.PanelType.Header:t.hasClass(m.SbCss.footer)?f.PanelType.Footer:t.hasClass(m.SbCss.caption)?f.PanelType.Caption:t.hasClass(m.SbCss.filter)?f.PanelType.Filter:void 0}getContainer(e,t,r){if(!(c.Convert.isNull(r)||c.Convert.isNull(t)||r===f.PanelType.Body&&(c.Convert.isNull(e)||c.Convert.isNull(t))))return this.grid.getContainer(e,t,r)}doTabNextFocus(){return n(this,void 0,void 0,(function*(){if(yield this._doTabNextFocus(this.focus,_.ArrowRight),this.grid.config.editable&&this.tabConfig.edit){const e=new a.EditCommand("",this.focus.rowItem,this.focus.column);this.fireCommandAsync(this,e)}}))}doTabPrevFocus(){return n(this,void 0,void 0,(function*(){if(yield this._doTabNextFocus(this.focus,_.ArrowLeft),this.grid.config.editable&&this.tabConfig.edit){const e=new a.EditCommand("",this.focus.rowItem,this.focus.column);this.fireCommandAsync(this,e)}}))}doTabNextFocusFilter(){return n(this,void 0,void 0,(function*(){p.SBGrid3.$(document.activeElement);yield this._doTabNextFocus(this.focus,_.ArrowRight)}))}doTabPrevFocusFilter(){return n(this,void 0,void 0,(function*(){}))}_doTabNextFocus(e,t){return n(this,void 0,void 0,(function*(){let r=yield this.getNextFocus(t,{rowItem:e.rowItem,column:e.column,panelType:e.panelType,cell:e.cell});c.Convert.isNull(r)?t==_.ArrowRight?yield this.navigateTabFirstCell(e.rowItem,e.panelType):yield this.navigateTabLastCell(e.rowItem,e.panelType):r.panelType==f.PanelType.Body&&(c.Convert.isNull(r.rowItem)||c.Convert.isNull(r.column))||(r.eventType=C.keydown,this.moveFocus(r))}))}navigateTabFirstCell(e,t){return n(this,void 0,void 0,(function*(){this.grid.topCol=0;const r=(this.isGroupHeaderFooter(e)?this.getMatrix(t,e.node):this.getMatrix(t)).getCell(0,0);this.col=null==r?void 0:r.col;const n=this.row,i={rowItem:e,column:r.column,cell:r,panelType:t};yield this._doMoveFocusCommand(_.ArrowDown,i),this.row=n}))}navigateTabLastCell(e,t){return n(this,void 0,void 0,(function*(){const r=yield this.grid.viewport.calcCols(this.grid.topCol,!0);this.grid.topCol=r.lastCol;const n=(this.isGroupHeaderFooter(e)?this.getMatrix(t,e.node):this.getMatrix(t)).matrix,i=n[n.length-1];let o,s,a=-1;for(;c.Convert.isNull(o)||o instanceof v.FrozenColumn;)s=i[i.length+a],this.col=s.col,o=s.column,a--;const l=this.row,u={rowItem:e,column:o,cell:s,panelType:t};yield this._doMoveFocusCommand(_.ArrowUp,u),this.row=l}))}navigateFirstCell(e,t){var r,i;return n(this,void 0,void 0,(function*(){this.grid.topCol=0;const n=this.getMatrix(t).getCell(null!==(r=this.row)&&void 0!==r?r:0,0);this.col=n.col,this.row=null!==(i=this.row)&&void 0!==i?i:n.row,this.moveFocus({rowItem:e,column:n.column,cell:n,panelType:t})}))}navigateLastCell(e,t){var r,i;return n(this,void 0,void 0,(function*(){const n=this.grid.topCol;let o=(yield this.grid.viewport.calcCols(n,!0)).lastCol,s=yield this.getTopCol(n,1,o);(null===(r=null==s?void 0:s.nextCell)||void 0===r?void 0:r.column)instanceof v.FrozenColumn&&(o+=-1,s=yield this.getTopCol(n,1,o)),n!=(null==s?void 0:s.nextTopCol)&&(this.grid.topCol=null==s?void 0:s.nextTopCol);const a=null===(i=this.getMatrix(t))||void 0===i?void 0:i.matrix,l=a[a.length-1];let u,h,d=-1;for(;c.Convert.isNull(u)||u instanceof v.FrozenColumn;)h=l[l.length+d],this.col=h.col,u=h.column,d--;this.moveFocus({rowItem:e,column:u,cell:h,panelType:t})}))}doPageChange(e){var t,r;return n(this,void 0,void 0,(function*(){if((null===(t=this.focus)||void 0===t?void 0:t.panelType)==f.PanelType.Body){let t=this.grid.topRow,n=t+e*this.grid.dataSource.pageSize;n=n<0?0:n>this.grid.total-1?yield this.getLastTopRow(e,t):n,t!=n&&(this.grid.topRow=n);const i=this.focus.rowItem.rowIndex-t;let o=this.grid.topRow+i;o>this.grid.total-1&&(o=this.grid.total-1);const s=yield this.grid.view.getRow(o),a=this.isGroupHeaderFooter(s)?this.getMatrix(f.PanelType.Body,s.node):this.getMatrix(f.PanelType.Body),l=null===(r=this.focus.cell)||void 0===r?void 0:r.col;this.moveFocus({rowItem:s,column:this.focus.column,cell:a.getCell(0,l),panelType:f.PanelType.Body})}}))}getLastTopRow(e,t){return n(this,void 0,void 0,(function*(){const r=yield this.grid.view.getRow(this.grid.total-1);return yield this.getTopRow(r,e,t)}))}bodyFirstCell(){return n(this,void 0,void 0,(function*(){const e=yield this.grid.view.getRow(this.grid.topRow);this.navigateFirstCell(e,f.PanelType.Body)}))}}!function(e){e.Esc="Esc",e.Escape="Escape",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowUp="ArrowUp",e.Enter="Enter",e.Space=" ",e.Tap="Tab",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown"}(_||(t.KeyboardShortCut=_={}))},4579:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GridStyle=t.Grid=void 0;const i=r(1880),o=r(235),s=r(3455),a=r(7392),l=r(109),u=r(3211),c=r(3341),h=r(3396),d=r(5677),f=r(4772),p=r(1374),m=r(3988),g=r(7074),v=r(6328),y=r(8154),b=r(9114),w=r(1700),C=r(5643),_=r(9114),S=r(696),x=r(1919),k=r(4597),T=r(7134),R=r(5838),E=r(8401),M=r(6231),P=r(2033),O=r(9172),I=r(7755),A=r(4072),j=r(5421),D=r(3905),N=r(4936);class F extends o.Publisher{constructor(e){let t=new s.GridView(e);super(t),this._scrollBarWidth=16,this._columnIndexed=!1,this._refreshCommands=[],this._refreshingCommands=[],this._minStickyLenth=0,this._maxStickyLenth=0,this._pageLoading=!1,this.onResize=e=>{const t=this;h.Convert.isValue(this.resizeTimer)&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout((function(){return n(this,void 0,void 0,(function*(){try{yield t.lock.acquire(),t.clearLayout(),0==this.virtualColumn&&(t.scrollPanel.scrollLeft=t.scrollPanel.scrollLeft),t.fireCommandAsync(this,new y.RefreshCommand),this.resizeTimer=void 0}finally{yield t.lock.release()}}))}),50)},this.refreshing=!1,this._originConfig=e,this._gridView=t,this.personalSetting(),this.createPanels(this.config.panels),this.wrapper.data("grid",this),this.eventManager.setHandler("GridClick","click",this.name,(e=>F.gridEvent(this,e)),this.container.get(0)),this.eventManager.setHandler("GridDblClick","dblclick",this.name,(e=>F.gridEvent(this,e)),this.container.get(0)),this.eventManager.setHandler("GridKeydown","keydown",this.name,(e=>F.gridKeyDown(this,e)),this.container.get(0))}setConfig(e){this.view.setConfig(a.GridParser.parseConfig(e)),this.initControls()}initControls(){this.container.empty(),this.eventManager.clear(),h.Convert.isValue(this._selectManager)&&(this._selectManager.disconnect(),this._selectManager=null),h.Convert.isValue(this._focusManager)&&(this._focusManager.disconnect(),this._focusManager=null),h.Convert.isValue(this._viewport)&&(this._viewport.disconnect(),this._viewport=null),this.createPanels(this.config.panels),this.clearColumns(),this.createColumns(this.columns,this.config.columns),this.setColumnIndex(this.wholeColumns)}get lock(){var e;return null!==(e=this._lock)&&void 0!==e?e:this._lock=new h.Lock}get resourceManager(){return this.dataSource.resourceManager}get resource(){return this.dataSource.resource}get exporting(){var e;return null!==(e=this._exporting)&&void 0!==e?e:this._exporting=!1}set exporting(e){this._exporting=e}get theme(){return this.config.theme}set theme(e){this.setTheme(e)}static gridKeyDown(e,t){var r;const n=e.focusManager.focus;if(h.Convert.isValue(n)){const i=new D.GridEventCommand(t.originalEvent,null===(r=n.rowItem)||void 0===r?void 0:r.key,n.column);e.doGridCommand(i)}return!0}static gridEvent(e,t){const r=m.SBGrid3.$(t.target),n=e.getRowItem(r),i=e.getColumn(r),o=new D.GridEventCommand(t.originalEvent,null==n?void 0:n.key,i);return e.doGridCommand(o),!0}get view(){return this._gridView}get loader(){return this.dataSource.loader}get columns(){return h.Convert.isNull(this._columns)&&(this._columns=new Array,this.createColumns(this._columns,this.config.columns)),this._columns}get panels(){var e;return null!==(e=this._panels)&&void 0!==e?e:this._panels=new Array}get refreshCommands(){return this._refreshCommands}get refreshingCommands(){return this._refreshingCommands}get scrollPanel(){return this._scrollPanel}set scrollPanel(e){this._scrollPanel=e}get hiddenPanel(){return this._hiddenPanel}set hiddenPanel(e){this._hiddenPanel=e}get loadingPanel(){return this._loadingPanel}set loadingPanel(e){this._loadingPanel=e}get config(){return this.view.config}get dataSource(){return this.view.config.dataSource}get dataConfig(){return this.dataSource.config}get wrapper(){return this.config.container}set wrapper(e){this.config.container=e,this._container=void 0,this.refresh()}get rootClass(){const e=h.Convert.isValue(this.theme)?`${g.SbCss.toClass("theme",this.theme)}`:"";return`${g.SbCss.grid} ${e}`}get container(){return h.Convert.isNull(this._container)&&(this._container=h.JqUtils.adjustElement(this.wrapper,`>div#${this.name}`,`<div class='${this.rootClass}' id='${this.name}' role='treegrid' tabindex='0'></div>`),this._container.get(0).focus({preventScroll:!0})),this._container}get trashCan(){var e;return null!==(e=this._trashCan)&&void 0!==e?e:this._trashCan=[]}get selectManager(){var e;return null!==(e=this._selectManager)&&void 0!==e?e:this._selectManager=new S.SelectManager(this)}get eventManager(){var e;return null!==(e=this._eventManager)&&void 0!==e?e:this._eventManager=new k.EventManager(this)}get undoManager(){var e;return null!==(e=this._undoManager)&&void 0!==e?e:this._undoManager=new E.UndoManager(this)}get viewport(){var e;return null!==(e=this._viewport)&&void 0!==e?e:this._viewport=new M.Viewport(this)}get focusManager(){var e;return null!==(e=this._focusManager)&&void 0!==e?e:this._focusManager=new P.FocusManager(this)}get tooltip(){var e;return null!==(e=this._tooltip)&&void 0!==e?e:this._tooltip=h.Convert.isValue(h.Arrays.dfsSearch(this.columns,(e=>!!e.config.tooltip||e.columns)))?new O.Tooltip(this):void 0}get style(){var e;return null!==(e=this._style)&&void 0!==e?e:this._style=new $(this)}get styleScroll(){var e;return null!==(e=this._scrollStyle)&&void 0!==e?e:this._scrollStyle=new $(this)}canGridCommand(e){var t,r;return!h.Convert.isValue(null===(t=this.config)||void 0===t?void 0:t.canCommand)||(null===(r=this.config)||void 0===r?void 0:r.canCommand(this,e.command,e))}doGridCommand(e){var t,r;h.Convert.isValue(null===(t=this.config)||void 0===t?void 0:t.doCommand)&&(null===(r=this.config)||void 0===r||r.doCommand(this,e.command,e))}get rows(){return this.view.rows}get rowCount(){return this.view.rowCount}get total(){return this.view.total}get pagerMode(){return this.view.pagerMode}get listMode(){return this.view.listMode}get rowHeight(){return this.view.config.rowHeight}get groupHeight(){return this.view.config.groupHeight}get fixedRows(){return this.config.fixedRows}get mergeRow(){return this.config.mergeRow}get mergeColumn(){return this.config.mergeColumn}get contextMenu(){return this.config.contextMenu}get alternateCss(){return this.config.alternateCss}get topRow(){return this.view.topRow}set topRow(e){this.setTopRow(e)}get minTopCol(){var e;return this.fixedColumns.length+this.headColumns.length+(null!==(e=this._minStickyLenth)&&void 0!==e?e:0)}get maxTopCol(){var e;return null!==(e=this._maxTopCol)&&void 0!==e?e:this._maxTopCol=this.calcMaxTopCol()}get topCol(){return Math.max(this.view.topCol,this.minTopCol)}set topCol(e){const t=this.topCol;if(this.virtualColumn){if(e<this.minTopCol&&(e=this.minTopCol),t==(e=this.adjustTopColVirtual(e)))return;this.view.topCol=e,this.scrollPanel.setScrollPos(e,void 0),this.refreshColumns(!0),this.fireCommandAsync(this,new y.RefreshCommand)}else{if(this.view.topCol=e,e<=this.minTopCol)return this.scrollPanel.scrollLeft=0,void this.scrollPanel.setScrollPos(0,void 0);{let t=0,r=0;for(const n of this.defaultLayout.rows)for(const i in n.cells){const o=n.cells[i];o.col<e&&o.part!=u.PartType.Sticky&&(r+=o.width),o.part!=u.PartType.Head&&o.part!=u.PartType.Fixed||(t+=o.width)}if(h.Convert.isValue(r>=0)){const e=Math.max(r-t,0);this.scrollPanel.scrollLeft=e,this.scrollPanel.setScrollPos(e,void 0)}}}}calcMaxTopCol(){const e=this.viewportWidth;let t=this.hasStickyColumn?this.stickyColumns.reduce(((e,t)=>e+(t.visible?t.width:0)),0):0;const r=[].concat(this.scrollColumns).reverse();let n;for(const i in r){const o=r[i];if(0!=o.visible){if(o.part==u.PartType.Body&&(t+=o.width),t>e)break;n=Math.min(null!=n?n:o.index,o.index)}}return n}adjustTopColVirtual(e){return this.maxTopCol<e?this.maxTopCol:e<this.minTopCol?this.minTopCol:e}get rowsView(){return this.scrollPanel.rowsView}get width(){return this.container.width()}get height(){return this.container.height()}get editConfig(){var e;return null===(e=this.config)||void 0===e?void 0:e.editable}get pageable(){return this.config.pageable}get virtualRow(){return this.view.virtualRow}set virtualRow(e){this.view.virtualRow=e,this.scrollPanel.scrollTop=0,this.refresh()}get virtualColumn(){return this.config.virtualColumn}get detailInit(){var e;return null!==(e=this._detailInit)&&void 0!==e?e:this._detailInit=this.config.detailInit}set detailInit(e){this._detailInit=e}get pageSize(){return this.view.pageSize}get serverPaging(){return this.view.serverPaging}get pageNo(){return this.view.pageNo}set pageNo(e){this.view.pageNo!=e&&this.view.setPageNo(e).then((()=>{this.virtualRow?this.scrollPanel.setScrollPos(void 0,this.view.topRow):(this.scrollPanel.internalScrollTop=0,this.scrollPanel.setScrollPos(void 0,0)),this.fireCommandAsync(this,new y.RefreshCommand)}))}get refreshCommand(){return F.mergeRefreshCommand(this._refreshCommands)}get reorderable(){var e;return null!==(e=this.config.reorderable)&&void 0!==e?e:{}}get showColMove(){var e;return null!==(e=h.Convert.isValue(this.reorderable.column))&&void 0!==e&&e}get showRowMove(){var e;return null!==(e=h.Convert.isValue(this.reorderable.row))&&void 0!==e&&e}get stickyRow(){var e;return null!==(e=this.config.stickyRow)&&void 0!==e&&e}get stickyFooter(){var e;return null!==(e=this.config.stickyFooter)&&void 0!==e&&e}get stickyHeader(){var e;return null!==(e=this.config.stickyHeader)&&void 0!==e&&e}get stickyInsert(){return this.config.stickyInsert}get stickyUpdate(){return this.config.stickyUpdate}get stickyDelete(){return this.config.stickyDelete}get stickyEdit(){return this.config.stickyEdit}get fixedColumns(){if(h.Convert.isNull(this._fixedColumns)){this._columnIndexed=!1;let e=[];const t=[].concat(this.columns.filter((e=>e.config.part==u.PartType.Fixed)));for(const r of this.config.rowHeaders){if("function"==typeof r){e.push(new b.CustomColumn(this,{width:50,part:u.PartType.Fixed},r));continue}let n;switch(r){case a.RowHeaders.RowNo:n=this.extractFixedColumn(t,e,(e=>e.type==a.RowHeaders.RowNo)),this.config.showRowNo&&e.push(null!=n?n:new b.RowNoColumn(this,{width:50,part:u.PartType.Fixed}));break;case a.RowHeaders.Status:n=this.extractFixedColumn(t,e,(e=>e.type==a.RowHeaders.Status)),this.config.showStatus&&e.push(null!=n?n:new b.StatusColumn(this,{width:25,part:u.PartType.Fixed}));break;case a.RowHeaders.Sticky:n=this.extractFixedColumn(t,e,(e=>e.type==a.RowHeaders.Sticky)),this.config.showSticky&&e.push(null!=n?n:new b.StickyColumn(this,{width:25,part:u.PartType.Fixed}));break;case a.RowHeaders.Check:n=this.extractFixedColumn(t,e,(e=>e.type==a.RowHeaders.Check)),this.config.checkable&&e.push(null!=n?n:new _.RowCheckColumn(this,{width:25,part:u.PartType.Fixed,type:T.ColumnTypes.Check,captionCheck:!0}));break;case a.RowHeaders.Detail:n=this.extractFixedColumn(t,e,(e=>e.type==a.RowHeaders.Detail)),h.Convert.isValue(this.detailTemplate)&&!0===this.config.showDetail&&e.push(null!=n?n:new b.DetailClickColumn(this,{width:25,part:u.PartType.Fixed}));break;case a.RowHeaders.Reorder:n=this.extractFixedColumn(t,e,(e=>e.type==a.RowHeaders.Reorder)),this.showRowMove&&e.push(null!=n?n:new b.RowReorderColumn(this,{width:25,part:u.PartType.Fixed,type:T.ColumnTypes.RowReorder}))}}e=e.concat(t),this._fixedColumns=e}return this._fixedColumns}extractFixedColumn(e,t,r){const n=e.findIndex((e=>r(e)));if(n>=0){const t=e[n];return e.splice(n,1),t}}get groupColumns(){if(h.Convert.isNull(this._groupColumns)||this.dataConfig.groups.length!=this._groupColumns.length){this._columnIndexed=!1;let e=[],t=this.dataConfig.groups;if(0==h.Convert.isNull(t)&&t.length>0){let r=0;for(const n of t){let t=new w.GroupColumn(this,{field:n.field,width:25});t.groupColumn=h.Arrays.bfsSearch(this.columns,(e=>e.config.field==n.field||e.columns)),t.groupLevel=r++,e.push(t)}}this._groupColumns=e}return this._groupColumns}get headColumns(){return h.Convert.isNull(this._headColumns)&&(this._columnIndexed=!1,this._headColumns=[].concat(this.columns.filter((e=>e.config.part==u.PartType.Head))),this._headColumns.length>0&&(0!=this._headColumns.length||!this.showColMove)&&(this.groupColumns.forEach((e=>e.config.part=u.PartType.Head)),this._headColumns=this.groupColumns.concat(this._headColumns)),this.showColMove&&(this._headColumns=this._headColumns.concat(new b.FrozenColumn(this,{width:0,part:u.PartType.Head,type:T.ColumnTypes.Frozen})))),this._headColumns}get scrollColumns(){return h.Convert.isNull(this._scrollColumns)&&(this._columnIndexed=!1,this._scrollColumns=[].concat(this.columns.filter((e=>F._bodyTypes.includes(e.config.part)))),(0==this.headColumns.length||1==this.headColumns.length&&this.showColMove)&&(this.groupColumns.forEach((e=>e.config.part=u.PartType.Body)),this._scrollColumns=this.groupColumns.concat(this._scrollColumns))),this._scrollColumns}get viewportColumns(){var e;if(0==this.virtualColumn)return this.scrollColumns;if(h.Convert.isNull(this._viewportColumns)){this._columnIndexed=!0,this._minStickyLenth=0,this._maxStickyLenth=0;const t=[];let r,n,i=this.hasStickyColumn?this.stickyColumns.reduce(((e,t)=>e+(t.visible?t.width:0)),0):0,o=this.viewportWidth;const s=Math.max(this.topCol-this.fixedColumns.length-this.headColumns.length,0);for(let e=s,a=this.scrollColumns.length;e<a;e++){let s=this.scrollColumns[e];if(t.push(s),h.Convert.isNull(r)&&(r=s.index),n=s.index,s.part==u.PartType.Body&&(i+=s.width),i>o)break}if(this.hasStickyColumn){for(const e in this.stickyColumns){const i=this.stickyColumns[e];i.index<r?(this._minStickyLenth++,t.push(i)):n<i.index&&(this._maxStickyLenth++,t.push(i))}t.sort(((e,t)=>e.index-t.index))}if(i<o){let r,n=s-1;for(;i<o&&n>=0;){if(r=this.scrollColumns[n],r.visible){if(i+=null!==(e=null==r?void 0:r.width)&&void 0!==e?e:0,!(i<o))break;t.push(r)}n--}t.sort(((e,t)=>e.index-t.index))}this._viewportColumns=t}return this._viewportColumns}get tailColumns(){return h.Convert.isNull(this._tailColumns)&&(this._columnIndexed=!1,this._tailColumns=[],this.showColMove&&(this._tailColumns=this._tailColumns.concat(new b.FrozenColumn(this,{width:0,part:u.PartType.Tail,type:T.ColumnTypes.Frozen}))),this._tailColumns=this._tailColumns.concat(this.columns.filter((e=>e.config.part==u.PartType.Tail)))),this._tailColumns}get visibleColumns(){const e=[].concat(this.fixedColumns).concat(this.headColumns).concat(this.viewportColumns).concat(this.tailColumns);return 0==this._columnIndexed&&this.wholeColumns,e}get wholeColumns(){const e=[].concat(this.fixedColumns).concat(this.headColumns).concat(this.scrollColumns).concat(this.tailColumns);return 0==this._columnIndexed&&(this.setColumnIndex(e),this._columnIndexed=!0),e}get stickyColumns(){var e;return null!==(e=this._stickyColumns)&&void 0!==e?e:this._stickyColumns=[]}get hasHeader(){var e;return null!==(e=this._hasHeader)&&void 0!==e?e:this._hasHeader=null!=h.Arrays.bfsSearch(this.columns,(e=>e.hasHeader||e.columns))}get hasFooter(){var e;return null!==(e=this._hasFooter)&&void 0!==e?e:this._hasFooter=null!=h.Arrays.bfsSearch(this.columns,(e=>e.hasFooter||e.columns))}get hasStickyColumn(){return h.Convert.isNull(this._hasStickyColumn)&&(this.adjustColumns(this.columns),h.Convert.isNull(h.Convert.isNull(this._hasStickyColumn))&&(this._hasStickyColumn=!1)),this._hasStickyColumn}get hasFractionColumn(){return h.Convert.isNull(this._hasFractionColumn)&&(this.adjustColumns(this.columns),h.Convert.isNull(h.Convert.isNull(this._hasFractionColumn))&&(this._hasFractionColumn=!1)),this._hasFractionColumn}get hasGroupColumn(){var e;return null!==(e=this._hasGroupColumn)&&void 0!==e?e:this._hasGroupColumn=h.Convert.isValue(this.dataConfig.groups)}getItemHeight(e){return this.viewport.getItemHeight(e)}setRowHeight(e,t,r){this.viewport.setRowHeight(e,t,r)}calcRowHeights(){this.viewport.calcRowHeights()}get scrollBarWidth(){return this._scrollBarWidth}set scrollBarWidth(e){this._scrollBarWidth=e}get fixedWidth(){var e;return null!==(e=this._fixedWidth)&&void 0!==e?e:this._fixedWidth=F.getColumnWidth(this.fixedColumns)}get headWidth(){var e;return null!==(e=this._headWidth)&&void 0!==e?e:this._headWidth=F.getColumnWidth(this.headColumns)}get tailWidth(){var e;return null!==(e=this._tailWidth)&&void 0!==e?e:this._tailWidth=F.getColumnWidth(this.tailColumns)}get scrollWidth(){var e;return null!==(e=this._scrollWidth)&&void 0!==e?e:this._scrollWidth=F.getColumnWidth(this.scrollColumns)}get viewportWidth(){const e=`>.${g.SbCss.scroll}>.${g.SbCss.scroll_body}>.${g.SbCss.body}>.${g.SbCss.tbody}>.${g.SbCss.body}`,t=m.SBGrid3.$(e,this.container).innerWidth();return h.Convert.isValue(t)&&0!=t?t:this.container.width()-(this.fixedWidth+this.headWidth+this.tailWidth+this.scrollBarWidth)}get bodyWidth(){return this.container.width()-this._scrollBarWidth}get captionDepth(){return this.captionLayout.rows.length}get defaultLayout(){var e;return null!==(e=this._defaultLayout)&&void 0!==e?e:this._defaultLayout=x.GridLayout.makeDefaultLayout(this,this.visibleColumns)}get captionLayout(){var e;return null!==(e=this._captionLayout)&&void 0!==e?e:this._captionLayout=x.GridLayout.makeCaptionLayout(this,this.visibleColumns)}get captionMatrix(){var e;return null!==(e=this._captionMatrix)&&void 0!==e?e:this._captionMatrix=x.GridMatrix.toMatrix(this.captionLayout)}get filterLayout(){var e;return null!==(e=this._filterLayout)&&void 0!==e?e:this._filterLayout=x.GridLayout.makeFilterLayout(this,this.visibleColumns)}get headerLayout(){var e;return null!==(e=this._headerLayout)&&void 0!==e?e:this._headerLayout=x.GridLayout.makeHeaderLayout(this,this.visibleColumns)}get headerDepth(){return this.headerLayout.rows.length}get footerLayout(){var e;return null!==(e=this._footerLayout)&&void 0!==e?e:this._footerLayout=x.GridLayout.makeFooterLayout(this,this.visibleColumns)}get footerDepth(){return this.footerLayout.rows.length}get rowLayout(){var e;return null!==(e=this._rowLayout)&&void 0!==e?e:this._rowLayout=x.GridLayout.makeRowLayout(this,this.visibleColumns)}get rowDepth(){return this.rowLayout.rows.length}get treeFooterLayout(){var e;return null!==(e=this._treeFooterLayout)&&void 0!==e?e:this._treeFooterLayout=x.GridLayout.makeTreeFooterLayout(this,this.visibleColumns)}get treeFooterDepth(){return this.treeFooterLayout.rows.length}get detailLayout(){var e;return null!==(e=this._detailLayout)&&void 0!==e?e:this._detailLayout=x.GridLayout.makeDetailLayout(this,this.visibleColumns)}get detailHeight(){return this.config.detailHeight}groupLayout(e){var t;const r=null!==(t=this._groupLayoutMap)&&void 0!==t?t:this._groupLayoutMap=new Map;if(r.has(e))return r.get(e);const{header:n,footer:i}=x.GridLayout.makeGroupLayout(this,this.visibleColumns,e);return r.set(e,{header:n,footer:i}),{header:n,footer:i}}get hasDetail(){return h.Convert.isValue(this.detailTemplate)}get detailTemplate(){var e;return null!==(e=this._detailTemplate)&&void 0!==e?e:h.Convert.isEmpty(this.config.detailTemplate)?void 0:this._detailTemplate=h.Utils.createTemplate(this.config.detailTemplate)}setDetailTemplate(e){e!=this.config.detailTemplate&&(this._detailTemplate=h.Utils.createTemplate(e))}get emptyTemplate(){var e;return h.Convert.isEmpty(this.config.emptyTemplate)?void 0:null!==(e=this._emptyTemplate)&&void 0!==e?e:this._emptyTemplate=h.Utils.createTemplate(this.config.emptyTemplate)}get emptyMessage(){return this.resource.emptyMessage}get rowMatrix(){var e;return null!==(e=this._rowMatrix)&&void 0!==e?e:this._rowMatrix=x.GridMatrix.toMatrix(this.rowLayout)}get headerMatrix(){var e;return null!==(e=this._headerMatrix)&&void 0!==e?e:this._headerMatrix=x.GridMatrix.toMatrix(this.headerLayout)}get footerMatrix(){var e;return null!==(e=this._footerMatrix)&&void 0!==e?e:this._footerMatrix=x.GridMatrix.toMatrix(this.footerLayout)}get filterMatrix(){var e;return null!==(e=this._filterMatrix)&&void 0!==e?e:this._filterMatrix=x.GridMatrix.toMatrix(this._filterLayout)}get copyInsert(){var e;return null!==(e=this.config.copyInsert)&&void 0!==e&&e}get rowReorder(){var e;return null!==(e=this._rowReorder)&&void 0!==e?e:this._rowReorder=new I.RowReorder(this)}get detailContainerMap(){var e;return null!==(e=this._detailContainers)&&void 0!==e?e:this._detailContainers=new Map}detailContainer(e,t){return h.Convert.isNull(t)?this.detailContainerMap.get(e):(this.detailContainerMap.set(e,t),t)}editable(e){this.config.editable=a.GridParser.parseEditConfig(e),this.view.editKeyMap.clear(),this._focusManager=void 0,this.refresh()}get maxTopRow(){var e,t;let r=this.rowCount-1;const n=this.scrollPanel.viewportHeight;let i=0;for(;r>=0;r--){const o=this.rows[r];if(i+=null!==(t=null===(e=this.viewport.getItemHeight(o))||void 0===e?void 0:e.total)&&void 0!==t?t:0,i>=n){r++;break}}return Math.max(r,0)}setTopRow(e){var t,r;return n(this,void 0,void 0,(function*(){try{if(this.virtualRow){if(this.view.topRow==e)return;if(this._pageLoading)return;const n=this.view.topRow;if(p.Log.debug((()=>["topRow",n,e])),1==this.dataConfig.serverPaging&&(h.Convert.isNull(this.dataConfig.groups)||this.dataConfig.serverGrouping))try{if(this._pageLoading=!0,e>this.rowCount-this.pageSize){const t=Math.trunc(this.dataSource.loadedTotal/this.pageSize),r=Math.min(e,this.rowCount);return yield this.view.loadPage(t),this.view.topRow=r,void this.fireCommandAsync(this,new y.RefreshCommand({rowStart:this.view.topRow}))}}finally{this._pageLoading=!1}let i=yield this.viewport.calcRows(e);if(i.rowHeights<i.scrollHeight){let t=e-1;for(;i=yield this.viewport.calcRows(t);){if(i.rowHeights>=i.scrollHeight){t++;break}if(t--,t<0)break}e=Math.max(t,0)}if(this.view.topRow=e,this.mergeRow){const e=[];for(const t of this.visibleColumns)t.mergeRow&&e.push(t.index);this.fireCommandAsync(this,new y.RefreshCommand({cols:e}))}else if(n>e)this.fireCommandAsync(this,new y.RefreshCommand({rowStart:e,rowEnd:n-1}));else{const e=this.scrollPanel.rowsView.currRows,n=null===(r=null===(t=e[e.length-1])||void 0===t?void 0:t.rowItem)||void 0===r?void 0:r.rowIndex;this.fireCommandAsync(this,new y.RefreshCommand({rowStart:n+1}))}this.scrollPanel.setScrollPos(void 0,e),this.scrollPanel.removeComboPopupScrolling()}else{let t=this.viewport.getScrollHeight(e);const r=this.view.topRow,n=e;this.view.topRow=e,this.viewport.calcRows(e).then((i=>{t-=i.headerHeight,this.scrollPanel.scrollTop=t,r-r%this.dataConfig.pageSize!=n-n%this.dataConfig.pageSize&&this.fireCommandAsync(this,new y.RefreshCommand({rowStart:e}))}))}}finally{}}))}clearLayout(){this._defaultLayout=void 0,this._captionLayout=void 0,this._headerLayout=void 0,this._filterLayout=void 0,this._footerLayout=void 0,this._rowLayout=void 0,this._groupLayoutMap=void 0,this._treeFooterLayout=void 0,this._detailLayout=void 0,this._captionMatrix=void 0,this._rowMatrix=void 0,this._headerMatrix=void 0,this._footerMatrix=void 0,this._filterMatrix=void 0,this._fixedWidth=void 0,this._headWidth=void 0,this._tailWidth=void 0,this._scrollWidth=void 0,this._maxTopCol=void 0}clearColumns(){p.Log.debug((()=>"clearColumns")),this._fixedColumns=void 0,this._groupColumns=void 0,this._headColumns=void 0,this._viewportColumns=void 0,this._tailColumns=void 0,this._scrollColumns=void 0,this._stickyColumns=void 0,this.eventManager.clear(),this._selectManager=null,this._hasFractionColumn=void 0,this._hasStickyColumn=void 0,this._hasGroupColumn=void 0,this.clearLayout()}refreshColumns(e){this._viewportColumns=void 0,0==e&&(this._fixedColumns=void 0,this._groupColumns=void 0,this._headColumns=void 0,this._tailColumns=void 0,this._scrollColumns=void 0,this._fixedWidth=void 0,this._headWidth=void 0,this._tailWidth=void 0,this._scrollWidth=void 0,this._maxTopCol=void 0),this.clearLayout()}static getColumnWidth(e){let t=0;return h.Convert.isEmpty(e)||h.Arrays.bfsAction(e,(e=>{var r,n,i,o;return 0==(null!==(n=null===(r=e.columns)||void 0===r?void 0:r.length)&&void 0!==n?n:0)&&(t+=e.config.visible?e.unit==u.Unit.Pixel?null!==(i=e.width)&&void 0!==i?i:0:null!==(o=e.minWidth)&&void 0!==o?o:0:0),e.columns})),t}setColumnIndex(e,t=void 0,r=0,n=0,i=1){for(const o of e)if(o.index=n,o.colIndex=i,o.level=r,o.parent=t,i++,h.Convert.isValue(o.columns)){const e=this.setColumnIndex(o.columns,o,r+1,n,i);n=e.index,i=e.colIndex}else n++;return{index:n,colIndex:i}}doCommand(e,t){switch(t.command){case i.Commands.Refresh:this.refresh(t);break;case i.Commands.Reload:this.reload(t);break;case i.Commands.Import:this.importData(t);break;case i.Commands.Insert:this.insertData(t);break;case i.Commands.Update:this.updateData(t);break;case i.Commands.Delete:this.deleteData(t);break;case i.Commands.Pager:this.updatePager(t);break;case i.Commands.Undo:this.undo();break;case i.Commands.Redo:this.redo();break;case i.Commands.Copy:this.selectManager.copy();break;case i.Commands.Paste:this.selectManager.paste();break;case i.Commands.Rebuild:this.rebuild(t);break;case i.Commands.Edit:this.edit(t);break;case i.Commands.AddRow:this.addRowCommand(t);break;case i.Commands.AddTop:this.addTopCommand(t);break;case i.Commands.InsertRow:this.insertRowCommand(t);break;case i.Commands.AppendRow:this.appendRowCommand(t);break;case i.Commands.DeleteRow:this.deleteRowCommand(t);break;case i.Commands.Save:this.save();break;case i.Commands.Scroll:return this.scrollPanel.doScroll(t),!1;case i.Commands.ColumnVisible:this.columnVisible(t.visible);break;case i.Commands.MoveToPart:this.moveToPartCommand(t);break;case i.Commands.ToogleRow:this.toggleRowCommand(t);break;case i.Commands.OpenRow:this.openRowCommand(t);break;case i.Commands.CloseRow:this.closeRowCommand(t);break;case i.Commands.Loading:this.loadingCommand(t);break;default:return super.doCommand(e,t)}return!0}canCommand(e,t){switch("object"==typeof t?t.command:t){case i.Commands.Refresh:return!0;case i.Commands.Undo:return this.undoManager.undoStack.any();case i.Commands.Redo:return this.undoManager.redoStack.any();case i.Commands.Select:case i.Commands.Selected:case i.Commands.Scroll:return!0;case i.Commands.Copy:return this.selectManager.canCopy()}return super.canCommand(e,t)}updatePager(e){this.pageNo=e.pageNo}rebuild(e){p.Log.warn((()=>[this.name+".rebuild"])),this.setConfig(this._originConfig),this.personalSetting(),this.fireCommandAsync(this,new y.RefreshCommand)}reload(e){return n(this,void 0,void 0,(function*(){p.Log.warn((()=>[this.name+".reload"])),this.personalSetting(),this.refreshColumns(!1),this.eventManager.clear(),this._selectManager=null,yield this.view.reload(e),this.fireCommandAsync(this,new y.RefreshCommand)}))}loadPage(e){return n(this,void 0,void 0,(function*(){yield this.view.loadPage(e),this.fireCommandAsync(this,new y.RefreshCommand)}))}save(){return n(this,void 0,void 0,(function*(){yield this.view.save(),this.undoManager.clear(),this.refresh()}))}clearSaveData(){this.dataSource.clearSaveData(),this.undoManager.clear(),this.refresh()}adjustColumns(e){if(!h.Convert.isNull(e))for(const t of e)t.part==u.PartType.Sticky&&(this.stickyColumns.findIndex((e=>e==t))<0&&this.stickyColumns.push(t),this._hasStickyColumn=!0),t.unit!=u.Unit.Pixel&&(this._hasFractionColumn=!0),h.Convert.isValue(t.columns)&&this.adjustColumns(t.columns)}createColumns(e,t,r){var n,i,o;if(p.Log.debug((()=>({f:"createColumns",columnsConfig:t}))),h.Convert.isNull(t))return;h.Arrays.bfsAction(e,(e=>(e.disconnect(),e.columns))),e.splice(0);let s=0;this.stickyColumns.splice(0);let a=null!==(n=null==r?void 0:r.index)&&void 0!==n?n:0;for(const n of t){const t=c.ColumnFactory.create(this,n);if(t.parent=r,t.index=a,h.Convert.isNull(r)?(t.level=0,t.config.part=n.part):(t.level=r.level+1,t.config.part=r.part),t.part==u.PartType.Sticky&&(this.stickyColumns.findIndex((e=>e==t))<0&&this.stickyColumns.push(t),this._hasStickyColumn=!0),t.unit!=u.Unit.Pixel&&(this._hasFractionColumn=!0),e.push(t),(null!==(o=null===(i=n.columns)||void 0===i?void 0:i.length)&&void 0!==o?o:0)>0){const e=this.createColumns(t.columns,n.columns,t);t.width=t.columns.reduce(((e,t)=>e+t.width),0),t.colSpan=e,s+=e,a+=e}else t.width=t.config.width,s++,a++}return h.Convert.isNull(this._hasStickyColumn)&&(this._hasStickyColumn=!1),h.Convert.isNull(this._hasFractionColumn)&&(this._hasFractionColumn=!1),s}createPanels(e){if(!h.Convert.isNull(e)){this.panels.forEach((e=>e.disconnect())),this.panels.splice(0),this.scrollPanel=void 0,this.hiddenPanel=void 0,this.loadingPanel=void 0;for(const t of e){const e=f.PanelFactory.create(this,t);this.panels.push(e),e instanceof R.ScrollPanel?this.scrollPanel=e:e instanceof d.HiddenPanel?this.hiddenPanel=e:e instanceof d.LoadingPanel&&(this.loadingPanel=e)}h.Convert.isNull(this.hiddenPanel)&&(this.hiddenPanel=f.PanelFactory.create(this,f.PanelType.Hidden),this.panels.splice(0,0,this.hiddenPanel)),h.Convert.isNull(this.loadingPanel)&&(this.loadingPanel=new d.LoadingPanel(this),this.panels.push(this.loadingPanel))}}edit(e){switch(e.type){case a.EditMode.incell:case a.EditMode.inline:break;case a.EditMode.none:return;case a.EditMode.popup:throw"popup mode is not implemented!"}if(h.Convert.isValue(e.rowItem)){if(e.rowItem.isEdit)return;e.rowItem.isEdit=!0,this.refresh(new y.RefreshCommand({rowStart:e.rowItem.rowIndex,rowEnd:e.rowItem.rowIndex}))}}refresh(e){if(this.refreshing||this.eventManager.doing)return void(h.Convert.isValue(e)&&this.refreshingCommands.push(e));h.Convert.isValue(e)&&this.refreshCommands.push(e),h.Convert.isValue(this.refreshTimer)&&clearTimeout(this.refreshTimer);const t=this;this.refreshTimer=window.setTimeout((()=>n(this,void 0,void 0,(function*(){try{t.refreshing=!0,yield t.render(),t.refreshCommands.splice(0),clearTimeout(t.refreshTimer)}finally{if(t.refreshing=!1,h.Convert.isValue(this.refreshingCommands)){const e=F.mergeRefreshCommand(t.refreshingCommands.splice(0));t.fireCommandAsync(t,e)}}}))),1)}rebuildColumns(){return n(this,void 0,void 0,(function*(){h.Convert.isEmpty(this.config.columns)&&(yield this.view.rebuildColumns(),this.initControls())}))}get refreshFull(){return!0}render(){return n(this,void 0,void 0,(function*(){try{p.Log.time(this.name+"_render");const e=this.container;yield this.view.prepareRows(),h.Convert.isEmpty(this.columns)&&(yield this.rebuildColumns()),yield this.createStyle(e);for(const t of this.panels)t.renderable&&(yield t.createStyle(e));if(this.applyStyle(),yield this.createStyle(e),this.refreshFull){for(const t of this.panels)0!=t.renderable&&(t!=this.scrollPanel?yield t.render(e):yield this.scrollPanel.layoutPanel(e),yield t.createStyle(e));yield this.scrollPanel.render(e),yield this.scrollPanel.createStyle(e)}else yield this.scrollPanel.render(e);this.applyStyle(),h.JqUtils.emptyTrash(this.trashCan),this.scrollPanel.rePositionMultiText(),globalThis.window.removeEventListener("resize",this.onResize),globalThis.window.addEventListener("resize",this.onResize)}finally{p.Log.timeEnd(this.name+"_render")}}))}createStyle(e){return n(this,void 0,void 0,(function*(){const e={display:"flex","flex-direction":"column"};h.Convert.isValue(this.config.width)&&(e.width=this.config.width),h.Convert.isValue(this.config.height)&&(e.height=this.config.height),this.style.set("",e)}))}applyStyle(){let e,t=`style_${this.name}`,r=`style_${this.name}_scroll`,n=m.SBGrid3.$(`head > style#${t}`),i=m.SBGrid3.$(`head > style#${r}`);0==n.length?m.SBGrid3.$("head").append(`<style type='text/css' id='${t}'>${this.style}</style>`):n.text()!=(e=this.style.toString())&&n.text(e),0==i.length?m.SBGrid3.$("head").append(`<style type='text/css' id='${r}'>${this.styleScroll}</style>`):i.text()!=(e=this.styleScroll.toString())&&i.text(e)}setTheme(e){this.config.theme=e,h.JqUtils.changeClass(this.container,this.rootClass)}addGroupColumn(e){const t=e.config.field;if(h.Convert.isEmpty(t))return!1;const r=[];for(const e of this.dataConfig.groups){if(e.field==t)return!1;r.push(e)}let n={field:t,dir:v.SortDir.Asc,isOpen:this.config.groupAutoOpen};return r.push(n),this.setGroup(r),!0}removeGroupColumn(e){const t=e.config.field,r=[];for(const e of this.dataConfig.groups)e.field!=t&&r.push(e);return this.dataConfig.groups.length!=r.length&&(this.setGroup(r),!0)}setGroupColumns(e){var t,r,n;const i=[],o=null!==(t=this.dataConfig.groups)&&void 0!==t?t:[];for(const t of e){const e=t.config.field,s=null!==(n=null===(r=o.find((t=>t.field==e)))||void 0===r?void 0:r.dir)&&void 0!==n?n:v.SortDir.Asc,a={field:e,dir:s,isOpen:this.config.groupAutoOpen};i.push(a)}this.setGroup(i)}isGroupColumn(e){const t=e.config.field;return 0==e.config.groupable||this.dataConfig.groups.some((e=>e.field==t))}getColumnByField(e){return h.Arrays.bfsSearch(this.columns,(t=>{let r=t.config.field==e;return!r&&t.columns?t.columns:r}))}setSort(e=[]){this.undoManager.add((()=>new E.UndoSort([].concat(this.dataConfig.groups).concat(this.dataConfig.orders),e)));for(const t of this.dataConfig.groups){const r=e.findIndex((e=>e.field===t.field));r<0||(t.dir=e[r].dir,e.splice(r,1))}this.dataConfig.orders=v.DataSourceParser.parseOrders(e),this.view.search()}toggleStickyRow(e){return n(this,void 0,void 0,(function*(){this.undoManager.add((()=>new E.UndoStickyRow(e)));const t=yield this.view.toggleStickyRow(e);return this.fireCommandAsync(this,new y.RefreshCommand({})),t}))}toggleCheckRow(e){return n(this,void 0,void 0,(function*(){const t=this.view.map(e);if(!h.Convert.isNull(t))return this.undoManager.add((()=>new E.UndoCheckRow(e))),t.isCheck=!t.isCheck,this.fireCommandAsync(this,new y.RefreshCommand({rowStart:t.rowIndex,rowEnd:t.rowIndex})),!0}))}sort(e=[]){let t=[];for(const r of e){let e="string"==typeof r?{field:r,dir:v.SortDir.Asc}:r;t.push(e)}this.setSort(t)}setGroup(e=[]){return n(this,void 0,void 0,(function*(){let t=[];for(const r of e)if("string"==typeof r){let e={field:r,dir:v.SortDir.Asc,isOpen:this.config.groupAutoOpen};t.push(e)}else t.push(r);this.undoManager.add((()=>new E.UndoGroup(this.dataConfig.groups,t))),p.Log.debug((()=>["before Group",this.rows.length])),this._gridView.clearEdit(),this.dataConfig.groups=v.DataSourceParser.parseGroups(t),yield this.view.search(),this.clearColumns(),this.fireCommandAsync(this,new y.RefreshCommand),p.Log.debug((()=>["after Group",this.rows.length]))}))}filter(e=[]){this.dataConfig.filters=e instanceof Array?v.DataSourceParser.parseFilters(e):v.DataSourceParser.parseFilters([v.DataSourceParser.parseFilter(e)]),this.view.search()}sortGroupColumn(e,t){const r=e.config.field;if(h.Convert.isEmpty(r))return!1;let n=!1;for(const e of this.dataConfig.groups)if(e.field==r)if(h.Convert.isNull(t)){switch(e.dir){case v.SortDir.Asc:e.dir=v.SortDir.Desc;break;case v.SortDir.Desc:e.dir=v.SortDir.Asc}n=!0}else n=e.dir!=t,e.dir=t;return n&&this.view.search(),n}toggleSort(e,t,r=void 0){var i;return n(this,void 0,void 0,(function*(){p.Log.debug((()=>["toggleSort",e,t]));let n=!1,o=[];if((null!==(i=this.dataConfig.groups)&&void 0!==i?i:[]).length>0)for(let t of this.dataConfig.groups)if(t=v.DataSourceParser.parseGroup(t),o.push(t),t.field==e){switch(t.dir){case v.SortDir.Asc:t.dir=v.SortDir.Desc;break;case v.SortDir.Desc:t.dir=v.SortDir.Asc}n=!0}if(0==n)if(v.DataSourceParser.parseOrders(this.dataConfig.orders).forEach((e=>o.push(e))),this.config.multiSort)if(t){const t=(null!=o?o:[]).findIndex((t=>t.field==e));if(t>=0)o.splice(t,1);else{const t={field:e,dir:null!=r?r:v.SortDir.Asc};h.Convert.isNull(o)?o=[t]:o.push(t)}}else{let t=(null!=o?o:[]).find((t=>t.field==e));if(!h.Convert.isValue(t))return;switch(t.dir){case v.SortDir.Asc:t.dir=v.SortDir.Desc;break;case v.SortDir.Desc:t.dir=v.SortDir.Asc}}else{let n=(null!=o?o:[]).find((t=>t.field==e));if(t)o=h.Convert.isValue(n)?[]:[{field:e,dir:null!=r?r:v.SortDir.Asc}];else{if(!h.Convert.isValue(n))return;switch(n.dir){case v.SortDir.Asc:n.dir=v.SortDir.Desc;break;case v.SortDir.Desc:n.dir=v.SortDir.Asc}}}this.setSort(o)}))}toggleRowCommand(e){return n(this,void 0,void 0,(function*(){yield this.toggleRow(e.key)}))}openRowCommand(e){return n(this,void 0,void 0,(function*(){yield this.toggleRow(e.key,!0)}))}closeRowCommand(e){return n(this,void 0,void 0,(function*(){yield this.toggleRow(e.key,!1)}))}toggleRow(e,t){return n(this,void 0,void 0,(function*(){return h.Convert.isNull(t)?this.undoManager.add((()=>new E.UndoToggleRow(e))):t?this.undoManager.add((()=>new E.UndoOpenRow(e))):this.undoManager.add((()=>new E.UndoCloseRow(e))),yield this.view.toggleRow(e,t)}))}toggleDetail(e,t){return n(this,void 0,void 0,(function*(){return h.Convert.isNull(t)?this.undoManager.add((()=>new E.UndoToggleDetail(e))):t?this.undoManager.add((()=>new E.UndoOpenDetail(e))):this.undoManager.add((()=>new E.UndoCloseDetail(e))),yield this.view.toggleDetail(e,t)}))}setEvent(e,t,r,n=void 0,i=void 0,o=!1){i instanceof HTMLElement?this.eventManager.setHandler(e,t,r,n,i,o):i&&this.eventManager.setHandler(e,t,r,n,i.toArray(),o)}static getValue(e,t){return h.Convert.isValue(t)?e.node.value(t):e.node.data}_setColumnSize(e,t,r){if(!(h.Convert.isEmpty(t)||t<=0))if(p.Log.debug((()=>["_setColumnSize",e,t,r])),0==r){if(h.Convert.isValue(e.columns)){const r=e.width,n=t/r;let i=0;const o=e.columns[e.columns.length-1];for(const r of e.columns)r===o?this._setColumnSize(r,t-i,!1):this._setColumnSize(r,r.width*n,!1),i+=r.width;t=i}e.width=t}else if(0==h.Convert.isNull(e.parent)){const t=e.parent;let r=0;for(const e of t.columns)r+=e.width;t.width=r,this._setColumnSize(t,r,!0)}}setColumnSize(e,t,r=!1){p.Log.debug((()=>["setColumnSize",e,t]));const n=e.width;if(this._setColumnSize(e,t,!1),this._setColumnSize(e,t,!0),r){const r=F.findRightColumn(e,this.wholeColumns);if(h.Convert.isValue(r)){const e=r.width-(t-n);this._setColumnSize(r,e,!1),this._setColumnSize(r,e,!0)}}this.undoManager.add((()=>new E.UndoColWidth(e,n,t,r))),this.clearLayout(),this.fireCommandAsync(this,new y.RefreshCommand)}static findRightColumn(e,t){const r=h.Convert.isNull(e.parent)?t:e.parent.columns;let n=e.index;return r.find((e=>!(e.index<=n||0==e.visible||e instanceof b.FrozenColumn)))}static findLeftColumn(e,t){const r=h.Convert.isNull(e.parent)?t:e.parent.columns;let n=e.index;return[].concat(r).reverse().find((e=>!(e.index>=n||0==e.visible||e instanceof b.FrozenColumn)))}static _moveToColumn(e,t,r,n){var i,o,s,a;p.Log.debug({f:"_moveToColumn",sourceColumn:e,targetColumn:t});const l=null!==(o=null===(i=e.parent)||void 0===i?void 0:i.columns)&&void 0!==o?o:r,c=null!==(a=null===(s=t.parent)||void 0===s?void 0:s.columns)&&void 0!==a?a:r;if(h.Convert.isNull(n)){const r=l.findIndex((t=>t==e));return r>=0&&l.splice(r,1),void t.columns.push(e)}const d=e instanceof b.FrozenColumn,f=t instanceof b.FrozenColumn;if(d&&f)return;let m=d?-1:l.indexOf(e),g=f?-1:c.indexOf(t);if(d){if(h.Convert.isValue(t.parent))throw"targetColumn은 반드시 top level column 이어야 합니다.";const i=g+(n?0:1);let o=0;if(e.part==u.PartType.Head)for(const e of r){if(o<i)e.part!=u.PartType.Head&&this._setColumnsPart(e,u.PartType.Head);else if(e.part==u.PartType.Head)this._setColumnsPart(e,u.PartType.Body);else if(e.part==u.PartType.Body||e.part==u.PartType.Sticky)break;o++}else if(e.part==u.PartType.Tail)for(const e of r)i<=o?e.part!=u.PartType.Tail&&this._setColumnsPart(e,u.PartType.Tail):e.part==u.PartType.Tail&&this._setColumnsPart(e,u.PartType.Body),o++}else{if(m>=0){if(l.splice(m,1),g=f?-1:c.indexOf(t),g<0)switch(t.part){case u.PartType.Head:c.forEach(((e,t)=>e.part==u.PartType.Head&&(g=t))),n=!1,g<0&&(g=0);break;case u.PartType.Tail:g=c.findIndex((e=>e.part==u.PartType.Tail)),n=!0,g<0&&(g=c.length)}g>=0&&(n?c.splice(g,0,e):c.splice(g+1,0,e))}if(t.part!=e.part)switch(t.part){case u.PartType.Head:F._setColumnsPart(e,u.PartType.Head);break;case u.PartType.Tail:F._setColumnsPart(e,u.PartType.Tail);break;case u.PartType.Body:case u.PartType.Sticky:e.part!=u.PartType.Head&&e.part!=u.PartType.Tail||F._setColumnsPart(e,u.PartType.Body)}}}static _setColumnsPart(e,t){var r;e.config.part=t;for(const n of null!==(r=e.columns)&&void 0!==r?r:[])this._setColumnsPart(n,t)}moveToColumn(e,t,r){return n(this,void 0,void 0,(function*(){if(h.Convert.isNull(e)||h.Convert.isNull(t))throw"moveToColumn : sourceColumn or targetColumn is null";e!==t&&(this.undoManager.add((()=>new E.UndoMoveColumn(this.wholeColumns,e,t,r))),F._moveToColumn(e,t,this.columns,r),this.clearColumns(),this.fireCommandAsync(this,new y.RefreshCommand),this.scrollPanel.removeMenu())}))}moveToRow(e,t,r=!0){return n(this,void 0,void 0,(function*(){if(h.Convert.isNull(e)||h.Convert.isNull(t))throw"moveToRow : sourceRow or targetRow is null";this.undoManager.addScope((()=>new E.UndoMoveRow(e,t,r)),(()=>n(this,void 0,void 0,(function*(){yield this.view.moveToRow(e,t,r),this.fireCommandAsync(this,new y.RefreshCommand)}))))}))}clearRows(){this.dataSource.clearRows(),this.view.clearRows(),this.undoManager.clear()}static mergeRefreshCommand(e){let t;if(h.Convert.isValue(e)){const r=e[0];return t=new y.RefreshCommand(r),t.onlyLayout=e.filter((e=>1==e.onlyLayout)).length==e.length,e.forEach((e=>{h.Convert.isNull(e)||(t.colStart=h.Convert.isNull(t.colStart)?t.colStart:h.Convert.isNull(e.colStart)?e.colStart:Math.min(t.colStart,e.colStart),t.colEnd=h.Convert.isNull(t.colEnd)?t.colEnd:h.Convert.isNull(e.colEnd)?e.colEnd:Math.max(t.colEnd,e.colEnd),t.rowStart=h.Convert.isNull(t.rowStart)?t.rowStart:h.Convert.isNull(e.rowStart)?e.rowStart:Math.min(t.rowStart,e.rowStart),t.rowEnd=h.Convert.isNull(t.rowEnd)?t.rowEnd:h.Convert.isNull(e.rowEnd)?e.rowEnd:Math.max(t.rowEnd,e.rowEnd),t.cols=h.Convert.isNull(t.cols)?t.cols:h.Convert.isNull(e.cols)?e.cols:h.Convert.mergeArray(t.cols,e.cols))})),t}return t=new y.RefreshCommand,t}getValue(e,t=void 0){return this.view.getValue(e,t)}setValue(e,t,r=void 0){const n=this.view.setValue({key:this.rows[e],value:t,field:r});return this.undoManager.add((()=>new E.UndoUpdate([n]))),!!h.Convert.isValue(n)&&(this.fireCommandAsync(this,new y.RefreshCommand),!0)}setValues(e){const t=this.view.setValues(e);return h.Convert.isValue(t)&&(this.undoManager.add((()=>new E.UndoUpdate(t))),t.forEach((e=>{const t=new D.GridValueCommand(e.key,e.redoValue,e.field);this.doGridCommand(t)}))),this.fireCommandAsync(this,new y.RefreshCommand(this.adjustRefreshRange(e))),t.length>0}insertValues(e,t){return n(this,void 0,void 0,(function*(){if(h.Convert.isEmpty(e)&&this.loader instanceof A.ListLoader==0)return void p.Log.warn((()=>"선택된 셀이 없으면, 리스트모드에서만 insert가 가능합니다."));const r=yield this.view.insertValues(e,t);return h.Convert.isValue(r)&&(this.undoManager.add((()=>new E.UndoInsert(e,r))),r.forEach((e=>{const t=new D.GridValueCommand(e.key,e.value,e.field);this.doGridCommand(t)}))),this.fireCommandAsync(this,new y.RefreshCommand(this.adjustRefreshRange(r))),r.length>0}))}importValues(e){const t=e.map((e=>e.value));this.dataSource.importData(t),this.dataSource.clearSaveData(),this.refresh()}adjustRefreshRange(e){let t={};return this.config.mergeRow||this.dataSource.hasCalcRows||(e.forEach((e=>{var r,n;const i=this._gridView.keyMap.get(e.key);t.rowStart=Math.min(null!==(r=t.rowStart)&&void 0!==r?r:i.rowIndex,i.rowIndex),t.rowEnd=Math.max(null!==(n=t.rowEnd)&&void 0!==n?n:i.rowIndex,i.rowIndex)})),t.onlyLayout=!1),t}addRowCommand(e){var t,r;return n(this,void 0,void 0,(function*(){const n=this.view.map(e.key),i=null!==(t=e.rowData)&&void 0!==t?t:{};(null==n?void 0:n.node)instanceof C.ParentNode?this.insertRowItem(e.key,void 0,i,l.InsertTo.Child,!1):this.insertRowItem(null===(r=null==n?void 0:n.parent)||void 0===r?void 0:r.key,e.key,i,l.InsertTo.Last,!1)}))}addTopCommand(e){var t,r;return n(this,void 0,void 0,(function*(){const n=this.view.map(e.key),i=null!==(t=e.rowData)&&void 0!==t?t:{};(null==n?void 0:n.node)instanceof C.ParentNode?this.insertRowItem(e.key,void 0,i,l.InsertTo.Child,!1):this.insertRowItem(null===(r=null==n?void 0:n.parent)||void 0===r?void 0:r.key,e.key,i,l.InsertTo.First,!1)}))}insertRowCommand(e){var t;return n(this,void 0,void 0,(function*(){const r=null!==(t=e.rowData)&&void 0!==t?t:{};this.insertRowItem(void 0,e.key,r,l.InsertTo.Before,!1)}))}appendRowCommand(e){var t;return n(this,void 0,void 0,(function*(){const r=null!==(t=e.rowData)&&void 0!==t?t:{};this.insertRowItem(void 0,e.key,r,l.InsertTo.After,!1)}))}insertRowItem(e,t,r,i,o){return n(this,void 0,void 0,(function*(){const n=new D.GridAddCommand(null!=t?t:e,r);if(0==this.canGridCommand(n))return;const s=yield this.view.insertRowItem(e,t,r,i,o);if(this.undoManager.add((()=>{var n;return new E.UndoInsertRow(null!=e?e:null===(n=null==s?void 0:s.parent)||void 0===n?void 0:n.key,t,r,s.key,s.node.box,i)})),0==o&&r instanceof C.DataBox==0){const e={rowItem:s,column:this.columns[0],panelType:f.PanelType.Body,eventType:void 0};this.focusManager.focus=e}this.doGridCommand(n),this.fireCommandAsync(this,new y.RefreshCommand)}))}removeRowItems(e,t=!1){var r,i;return n(this,void 0,void 0,(function*(){const n=[];for(const o of e){if(this.dataSource.deleteMap.has(o.targetKey))continue;const e=yield this.view.removeRowItem(o.parentKey,o.targetKey,o.data,l.InsertTo.Before,t);n.push({parentKey:null!==(r=o.parentKey)&&void 0!==r?r:null===(i=null==e?void 0:e.parent)||void 0===i?void 0:i.key,targetKey:o.targetKey,undoKey:null==e?void 0:e.key,undoBox:o.data,data:null==e?void 0:e.box})}if(!h.Convert.isEmpty(n))return this.undoManager.add((()=>new E.UndoDelete(n))),n.length>0&&this.fireCommandAsync(this,new y.RefreshCommand),n.length>0}))}undo(){this.undoManager.undo().then((e=>this.fireCommandAsync(this,new y.RefreshCommand)))}redo(){this.undoManager.redo().then((e=>this.fireCommandAsync(this,new y.RefreshCommand)))}updateData(e){return n(this,void 0,void 0,(function*(){if(h.Convert.isValue(e.data)){const t=e.data.map((e=>({key:e.key,value:e.value,field:e.field})));this.setValues(t)}}))}insertData(e){var t,r,i;return n(this,void 0,void 0,(function*(){if(h.Convert.isValue(e.data)){const n=e.data.map((e=>({key:e.key,value:e.value,field:e.field}))),o=this.loader instanceof N.GroupLoader?null===(t=this.focusManager.focus)||void 0===t?void 0:t.rowItem:void 0;this.insertValues(null!==(i=null===(r=null==o?void 0:o.parent)||void 0===r?void 0:r.key)&&void 0!==i?i:null==o?void 0:o.key,n)}}))}importData(e){return n(this,void 0,void 0,(function*(){if(h.Convert.isValue(e.data)){this.clearRows();const t=e.data.map((e=>({key:e.key,value:e.value,field:e.field})));this.importValues(t),this.undoManager.clear()}}))}deleteData(e){return n(this,void 0,void 0,(function*(){if(h.Convert.isValue(e.data)){let t,r;const n=[];e.data.forEach((e=>{var i;const o=this.view.map(e.key);h.Convert.isNull(o)||(t=Math.min(null!=t?t:o.rowIndex,o.rowIndex),r=Math.max(null!=r?r:o.rowIndex,o.rowIndex),n.push({parentKey:null===(i=o.parent)||void 0===i?void 0:i.key,targetKey:o.key,data:o.box,undoBox:void 0,undoKey:void 0}))})),this.removeRowItems(n,!1),this.fireCommandAsync(this,new y.RefreshCommand({rowStart:t,rowEnd:r}))}}))}deleteRowCommand(e){var t;return n(this,void 0,void 0,(function*(){if(h.Convert.isEmpty(e.key))return;let r,n;const i=[],o=this.view.map(e.key);h.Convert.isNull(o)||(r=Math.min(null!=r?r:o.rowIndex,o.rowIndex),n=Math.max(null!=n?n:o.rowIndex,o.rowIndex),i.push({parentKey:null===(t=o.parent)||void 0===t?void 0:t.key,targetKey:o.key,data:o.box,undoBox:void 0,undoKey:void 0}),yield this.removeRowItems(i,!1),this.fireCommandAsync(this,new y.RefreshCommand({rowStart:r,rowEnd:n})))}))}getContainer(e,t,r=f.PanelType.Body){var n;return null===(n=this.scrollPanel)||void 0===n?void 0:n.getContainer(e,t,r)}getGroupByField(e,t=!0){return n(this,void 0,void 0,(function*(){return yield this.dataSource.getGroupByField(e,t)}))}getRangedKeys(){return Array.from(this.selectManager.selectedCells.keys())}getRangedRows(){return this.view.keysToRows(this.selectManager.selectedCells.keys())}getRowItem(e){const t=e.closest(`.${g.SbCss.row}`);if(t.length<0)return;return t.data("rowItem")}getColumn(e){const t=e.closest(`.${g.SbCss.col}`);if(t.length<0)return;const r=t.data("cell");return null==r?void 0:r.column}getRowElement(e){m.SBGrid3.$(`.${g.SbCss.row}-${e.rowIndex}`,this.container)}getColElement(e,t){let r;for(const e of this.rowLayout.rows)if(r=e.cells.find((e=>e.column==t)),h.Convert.isValue(r))break;if(h.Convert.isValue(r)){return m.SBGrid3.$(`.${g.SbCss.row}-${e.rowIndex} > .${g.SbCss.col}-${r.row+1}-${r.col}`,this.container)}}moveToPartCommand(e){this.moveToPart(e.column,e.part,e.parentColumn,e.columnIndex)}loadingCommand(e){h.Convert.isNull(e)||this.showLoading(e.loading)}showLoading(e){h.Convert.isValue(this.loadingPanel)&&(this.loadingPanel.loading=e)}moveToPart(e,t,r,n,i=!1){var o;if(!h.Convert.isNull(e)&&!h.Convert.isNull(t)){if(i){if(h.Convert.isNull(e.parent)&&h.Convert.isValue(r)){const t=this.columns.findIndex((t=>t==e));t>=0&&this.columns.splice(t,1),r.columns.splice(n,0,e)}}else n=null===(o=e.parent)||void 0===o?void 0:o.columns.findIndex((t=>t==e)),this.undoManager.add((()=>new E.UndoMoveToPart(e,e.part,t,e.parent,n))),h.Convert.isValue(e.parent)&&(e.parent.columns.splice(n,1),this.columns.push(e),e.parent=void 0,e.level=0);F._setColumnsPart(e,t),this.clearColumns(),this.fireCommandAsync(this,new y.RefreshCommand)}}columnVisible(e){if(h.Convert.isEmpty(e))return;const t=[];for(const r of e)h.Convert.isNull(r.column)||(t.push({column:r.column,visible:r.column.visible}),r.column.config.visible=r.visible);this.undoManager.add((()=>new E.UndoColumnVisible(t,e))),this.clearColumns(),this.fireCommandAsync(this,new y.RefreshCommand)}personalSetting(){if(h.Convert.isValue(this.config.personalizationKey)){const e=this.personalStorage.getPersonalizationData();if(h.Convert.isValue(e)){this.dataSource.config.groups=e.groups,this.dataSource.config.orders=e.orders,this.dataSource.config.filters=e.filters;this.config.columns=this.cloneColumns(e.columns),this.setConfig(this.config)}}}get personalStorage(){return new j.PersonalStorage(this)}findColumn(e,t){return h.Arrays.bfsSearch(e,(e=>h.Convert.asText(t.field)==h.Convert.asText(e.field)&&h.Convert.asText(t.caption)==h.Convert.asText(e.caption)||e.columns))}existNotColumn(e,t){return h.Arrays.bfsSearch(e,(e=>h.Convert.asText(t.field)!=h.Convert.asText(e.field)&&h.Convert.asText(t.caption)!=h.Convert.asText(e.caption)||e.columns))}cloneColumns(e){let t=[];const r=this._originConfig.columns;for(const n of e){const e=this.findColumn(r,n);h.Convert.isNull(e)||(this.mergeColumnConfig(e,n),n.columns=this.cloneColumns(n.columns),t.push(n))}return t}mergeColumnConfig(e,t){for(const r in e)t.hasOwnProperty(r)||(t[r]=e[r])}}t.Grid=F,F._bodyTypes=[u.PartType.Body,u.PartType.Sticky];class ${constructor(e){this._style={},this._grid=e}get style(){return this._style}clear(){this._style={}}get prefix(){return`#${this._grid.name}.${g.SbCss.grid}`}set(e,t){const r=this.prefix+" "+e;h.Convert.isNull(t)?delete this.style[r]:this.style[r]=t}get(e){return this.style[this.prefix+" "+e]}get keys(){return Object.keys(this.style)}delete(e){delete this.style[e]}toString(){return this.objectToString(this.style,"","{","}")}objectToString(e,t,r,n,i="\n"){let o=[];for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];"string"==typeof s||"number"==typeof s?o.push(`${i} ${t} ${r}${s}${n}`):o.push(`${i} ${t} ${r}${this.objectToString(s,":","",";"," ")}${n}`)}return o.join(i)}}t.GridStyle=$},7392:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditEvent=t.EditMode=t.GridParser=t.RowHeaders=t.PopupType=t.SortMode=t.ScrollMode=t.DetailContext=void 0;const n=r(109),i=r(3396),o=r(4772),s=r(3988),a=r(696),l=r(4249),u=r(6328),c=r(2519),h=r(3211),d=r(4683),f=r(7641),p=r(249),m=r(1374);var g,v,y,b,w,C;t.DetailContext=class{constructor(e,t,r,n){this.grid=e,this.rowItem=t,this.container=r,this.map=n}},function(e){e.Cell="cell",e.Pixel="pixel"}(g||(t.ScrollMode=g={})),function(e){e.None="none",e.Toggle="toggle",e.Rotate="rotate"}(v||(t.SortMode=v={})),function(e){e.Hover="hover",e.Click="click"}(y||(t.PopupType=y={})),function(e){e.RowNo="row",e.Status="status",e.Sticky="sticky",e.Check="check",e.Detail="detail",e.Reorder="reorder"}(b||(t.RowHeaders=b={}));class _{static parseDefaultConfig(e){var t,r,n,o,a,u,c,d;m.Log.debug((()=>["parseDefaultConfig",e]));let f={defaultColumn:i.Convert.default(e.defaultColumn,null===(t=s.SBGrid3.default)||void 0===t?void 0:t.defaultColumn,(e=>h.GridColumnParser.parseColumn(e,void 0,!0))),defaultPageable:i.Convert.default(e.defaultPageable,null===(r=s.SBGrid3.default)||void 0===r?void 0:r.defaultPageable,_.parsePager),defaultSortable:i.Convert.default(e.defaultSortable,null===(n=s.SBGrid3.default)||void 0===n?void 0:n.defaultSortable,(e=>_.parseSortable(e))),defaultNavigatable:i.Convert.default(e.defaultNavigatable,null===(o=s.SBGrid3.default)||void 0===o?void 0:o.defaultNavigatable,(e=>_.parseKeyboardNavitagion(e))),defaultFilterable:i.Convert.default(e.defaultFilterable,null===(a=s.SBGrid3.default)||void 0===a?void 0:a.defaultFilterable,(e=>_.parseFilterOption(e))),defaultReorderable:i.Convert.default(e.defaultReorderable,null===(u=s.SBGrid3.default)||void 0===u?void 0:u.defaultReorderable,(e=>_.parseReorderable(e))),defaultResizable:i.Convert.default(e.defaultResizable,null===(c=s.SBGrid3.default)||void 0===c?void 0:c.defaultResizable,(e=>l.ResizeOptionParser.parseResizeOption(e))),defaultContextMenu:i.Convert.default(e.defaultContextMenu,null===(d=s.SBGrid3.default)||void 0===d?void 0:d.defaultContextMenu,(e=>{var t;return p.GridMenuParser.parse(e,null===(t=s.SBGrid3.default)||void 0===t?void 0:t.defaultContextMenu)}))};return f=i.Convert.mergeData(f,e),this.parseConfig(f)}static parseConfig(e){var t,r,n,o,u,c,d,f,g,v,b,w,C,S,x,k,T,R,E,M,P,O,I,A,j,D,N,F,$,L,B,V,H,z,U,q,G,W,K,J,X,Y,Z,Q,ee,te,re,ne,ie,oe,se,ae,le,ue,ce,he,de,fe,pe,me,ge,ve,ye,be,we;m.Log.debug((()=>["parseConfig",e]));const Ce=i.Convert.default(e.defaultColumn,null===(t=s.SBGrid3.default)||void 0===t?void 0:t.defaultColumn,(e=>h.GridColumnParser.parseColumn(e,void 0,!0)));let _e={personalizationKey:i.Convert.default(e.personalizationKey,void 0),personalizationVersion:i.Convert.default(e.personalizationVersion,void 0),dataSource:i.Convert.default(e.dataSource,void 0,_.parseDataSource),defaultColumn:Ce,columns:i.Convert.default(e.columns,void 0,(e=>h.GridColumnParser.parseColumns(e,Ce,!0))),panels:i.Convert.default(e.panels,null===(r=s.SBGrid3.default)||void 0===r?void 0:r.panels,_.parsePanels),toolBar:i.Convert.default(e.toolBar,null===(n=s.SBGrid3.default)||void 0===n?void 0:n.toolBar,_.parsePanelLayout),titleBar:i.Convert.default(e.titleBar,null===(o=s.SBGrid3.default)||void 0===o?void 0:o.titleBar,_.parsePanelLayout),groupBar:i.Convert.default(e.groupBar,null===(u=s.SBGrid3.default)||void 0===u?void 0:u.groupBar,_.parsePanelLayout),pagerBar:i.Convert.default(e.pagerBar,null===(c=s.SBGrid3.default)||void 0===c?void 0:c.pagerBar,_.parsePanelLayout),emptyTemplate:i.Convert.default(e.emptyTemplate,null===(d=s.SBGrid3.default)||void 0===d?void 0:d.emptyTemplate),detailTemplate:i.Convert.default(e.detailTemplate,null===(f=s.SBGrid3.default)||void 0===f?void 0:f.detailTemplate),detailOverflow:i.Convert.default(e.detailOverflow,null===(g=s.SBGrid3.default)||void 0===g?void 0:g.detailOverflow),container:i.Convert.default(e.container,null===(v=s.SBGrid3.default)||void 0===v?void 0:v.container,_.parseContainer),width:i.Convert.default(e.width,null===(b=s.SBGrid3.default)||void 0===b?void 0:b.width,_.parseUnit),height:i.Convert.default(e.height,null===(w=s.SBGrid3.default)||void 0===w?void 0:w.height,_.parseUnit),editable:i.Convert.default(e.editable,null===(C=s.SBGrid3.default)||void 0===C?void 0:C.editable,_.parseEditConfig),virtualColumn:i.Convert.default(e.virtualColumn,null===(S=s.SBGrid3.default)||void 0===S?void 0:S.virtualColumn),virtualRow:i.Convert.default(e.virtualRow,null===(x=s.SBGrid3.default)||void 0===x?void 0:x.virtualRow),rowCss:i.Convert.default(e.rowCss,null===(k=s.SBGrid3.default)||void 0===k?void 0:k.rowCss),alternateCss:i.Convert.default(e.alternateCss,null===(T=s.SBGrid3.default)||void 0===T?void 0:T.alternateCss,_.parseAlternate),pageable:i.Convert.default(e.pageable,null===(R=s.SBGrid3.default)||void 0===R?void 0:R.pageable,_.parsePager),sortable:i.Convert.default(e.sortable,null===(E=s.SBGrid3.default)||void 0===E?void 0:E.sortable,_.parseSortable),navigatable:i.Convert.default(e.navigatable,null===(M=s.SBGrid3.default)||void 0===M?void 0:M.navigatable,_.parseKeyboardNavitagion),reorderable:i.Convert.default(e.reorderable,null===(P=s.SBGrid3.default)||void 0===P?void 0:P.reorderable,_.parseReorderable),groupable:i.Convert.default(e.groupable,null===(O=s.SBGrid3.default)||void 0===O?void 0:O.groupable),filterable:i.Convert.default(e.filterable,null===(I=s.SBGrid3.default)||void 0===I?void 0:I.filterable,(e=>_.parseFilterOption(e))),resizable:i.Convert.default(e.resizable,null===(A=s.SBGrid3.default)||void 0===A?void 0:A.resizable,l.ResizeOptionParser.parseResizeOption),undoable:i.Convert.default(e.undoable,null===(j=s.SBGrid3.default)||void 0===j?void 0:j.undoable),mergeRow:i.Convert.default(e.mergeRow,null===(D=s.SBGrid3.default)||void 0===D?void 0:D.mergeRow),mergeColumn:i.Convert.default(e.mergeColumn,null===(N=s.SBGrid3.default)||void 0===N?void 0:N.mergeColumn),multiSort:i.Convert.default(e.multiSort,null===(F=s.SBGrid3.default)||void 0===F?void 0:F.multiSort),fixedRows:i.Convert.default(e.fixedRows,null===($=s.SBGrid3.default)||void 0===$?void 0:$.fixedRows),captionHeight:i.Convert.default(e.captionHeight,null===(L=s.SBGrid3.default)||void 0===L?void 0:L.captionHeight),rowHeight:i.Convert.default(e.rowHeight,null===(B=s.SBGrid3.default)||void 0===B?void 0:B.rowHeight),maxRowHeight:i.Convert.default(e.maxRowHeight,null===(V=s.SBGrid3.default)||void 0===V?void 0:V.maxRowHeight),filterHeight:i.Convert.default(e.filterHeight,null===(H=s.SBGrid3.default)||void 0===H?void 0:H.filterHeight),headerHeight:i.Convert.default(e.headerHeight,null===(z=s.SBGrid3.default)||void 0===z?void 0:z.headerHeight),footerHeight:i.Convert.default(e.footerHeight,null===(U=s.SBGrid3.default)||void 0===U?void 0:U.footerHeight),groupHeight:i.Convert.default(e.groupHeight,null===(q=s.SBGrid3.default)||void 0===q?void 0:q.groupHeight),detailHeight:i.Convert.default(e.detailHeight,null===(G=s.SBGrid3.default)||void 0===G?void 0:G.detailHeight),maxDetailHeight:i.Convert.default(e.maxDetailHeight,null===(W=s.SBGrid3.default)||void 0===W?void 0:W.maxDetailHeight),wheelDelta:i.Convert.default(e.wheelDelta,null===(K=s.SBGrid3.default)||void 0===K?void 0:K.wheelDelta),detailInit:e.detailInit,stickyHeader:i.Convert.default(e.stickyHeader,null===(J=s.SBGrid3.default)||void 0===J?void 0:J.stickyHeader),stickyFooter:i.Convert.default(e.stickyFooter,null===(X=s.SBGrid3.default)||void 0===X?void 0:X.stickyFooter),stickyRow:i.Convert.default(e.stickyRow,null===(Y=s.SBGrid3.default)||void 0===Y?void 0:Y.stickyRow),stickyEdit:i.Convert.default(e.stickyEdit,null===(Z=s.SBGrid3.default)||void 0===Z?void 0:Z.stickyEdit),stickyInsert:i.Convert.default(e.stickyInsert,null===(Q=s.SBGrid3.default)||void 0===Q?void 0:Q.stickyInsert),stickyUpdate:i.Convert.default(e.stickyUpdate,null===(ee=s.SBGrid3.default)||void 0===ee?void 0:ee.stickyUpdate),stickyDelete:i.Convert.default(e.stickyDelete,null===(te=s.SBGrid3.default)||void 0===te?void 0:te.stickyDelete),rowHeaders:i.Convert.default(e.rowHeaders,null===(re=s.SBGrid3.default)||void 0===re?void 0:re.rowHeaders,_.parseRowHeader),showRowNo:i.Convert.default(e.showRowNo,null===(ne=s.SBGrid3.default)||void 0===ne?void 0:ne.showRowNo),showSticky:i.Convert.default(e.showSticky,null===(ie=s.SBGrid3.default)||void 0===ie?void 0:ie.showSticky),checkable:i.Convert.default(e.checkable,null===(oe=s.SBGrid3.default)||void 0===oe?void 0:oe.checkable),selectable:i.Convert.default(e.selectable,null===(se=s.SBGrid3.default)||void 0===se?void 0:se.selectable,a.SelectOptionParser.parseSelectOption),groupAutoOpen:i.Convert.default(e.groupAutoOpen,null===(ae=s.SBGrid3.default)||void 0===ae?void 0:ae.groupAutoOpen),detailAutoOpen:i.Convert.default(e.detailAutoOpen,null===(le=s.SBGrid3.default)||void 0===le?void 0:le.detailAutoOpen),showStatus:i.Convert.default(e.showStatus,null===(ue=s.SBGrid3.default)||void 0===ue?void 0:ue.showStatus),showDetail:i.Convert.default(e.showDetail,null===(ce=s.SBGrid3.default)||void 0===ce?void 0:ce.showDetail),hover:i.Convert.default(e.hover,null===(he=s.SBGrid3.default)||void 0===he?void 0:he.hover,(e=>_.parseHover(e))),statusBar:i.Convert.default(e.statusBar,null===(de=s.SBGrid3.default)||void 0===de?void 0:de.statusBar,(()=>_.parseStatusPanelAlign(e.statusBar))),contextMenu:i.Convert.default(e.contextMenu,null===(fe=s.SBGrid3.default)||void 0===fe?void 0:fe.contextMenu,(e=>{var t;return p.GridMenuParser.parse(e,null===(t=s.SBGrid3.default)||void 0===t?void 0:t.defaultContextMenu)})),copyable:i.Convert.default(e.copyable,null===(pe=s.SBGrid3.default)||void 0===pe?void 0:pe.copyable,a.CopyOptionParser.parseCopyOption),popupType:i.Convert.default(e.popupType,y.Click),canCommand:e.canCommand,doCommand:e.doCommand,freezable:i.Convert.default(e.freezable,null!==(ge=null===(me=s.SBGrid3.default)||void 0===me?void 0:me.freezable)&&void 0!==ge&&ge),copyInsert:i.Convert.default(e.copyInsert,null!==(ye=null===(ve=s.SBGrid3.default)||void 0===ve?void 0:ve.copyInsert)&&void 0!==ye&&ye),theme:i.Convert.default(e.theme,null!==(we=null===(be=s.SBGrid3.default)||void 0===be?void 0:be.theme)&&void 0!==we?we:"")};return!0===_e.showSticky&&(_e.stickyRow=!0),i.Convert.isValue(_e.columns)&&(_.applyAggregates(_e.columns,_e.dataSource),_.applyCalculations(_e.columns,_e.dataSource),_.adjustGroups(_e.columns),_.adjustValidator(_e.columns,_e.dataSource)),_e=i.Convert.mergeData(_e,e),_e}static parseAlternate(e){const t=[];if("number"==typeof e)for(let r=0;r<e-1;r++)t.push("");else"string"==typeof e?t.push(e):t.push(...e);return t}static parsePager(e){var t,r,n,o,a;if(i.Convert.isNull(e)||!1===e)return;const l=!0===e?null===(t=s.SBGrid3.default)||void 0===t?void 0:t.defaultPageable:e,u=null===(r=s.SBGrid3.default)||void 0===r?void 0:r.defaultPageable;return{buttonCount:Math.max(null!==(n=l.buttonCount)&&void 0!==n?n:null==u?void 0:u.buttonCount,2),numeric:null!==(o=l.numeric)&&void 0!==o?o:u.numeric,previousNext:null!==(a=l.previousNext)&&void 0!==a?a:u.previousNext}}static parseSortable(e){var t;return"boolean"==typeof e?e?null===(t=s.SBGrid3.default)||void 0===t?void 0:t.defaultSortable:v.None:i.Convert.parseEnum(v,e)}static parseRowHeader(e){const t=[];for(const r of e)"function"==typeof r?t.push(r):t.push(i.Convert.parseEnum(b,r));return t}static applyCalculations(e,t){var r,n;const o=null===(r=i.Arrays.bfsSearchAll((t=>i.Convert.isNull(t)?e:t.columns),(e=>{var t,r;return i.Convert.isValue(null===(t=e.calc)||void 0===t?void 0:t.eval)||i.Convert.isValue(null===(r=e.calc)||void 0===r?void 0:r.rows)})))||void 0===r?void 0:r.map((e=>e.calc));let s=null!==(n=t.config.calculations)&&void 0!==n?n:[];for(const e of o)i.Convert.isValue(s.find((t=>t.field==e.field)))||s.push(e);t.config.calculations=u.DataSourceParser.parseCalculations(s)}static adjustGroups(e){const t=new Map;!function e(t,r){for(const n of t){if(i.Convert.isEmpty(n.field))continue;const t=n.groups instanceof Array?n.groups:i.Convert.isValue(n.groups)?[n.groups]:[];let o=[];for(const e of t)e.field==n.field?o.push(e):i.Convert.isValue(e.field)&&i.Convert.isValue(e.field.trim())&&(r.has(e.field)?r.get(e.field).push(e):r.set(e.field,[e]));n.groups=o,i.Convert.isValue(n.columns)&&e(n.columns,r)}}(e,t),function e(t,r){for(const n of t){if(i.Convert.isEmpty(n.field))continue;const t=n.groups instanceof Array?n.groups:[n.groups];if(r.has(n.field))for(const e of r.get(n.field))t.push(e);i.Convert.isValue(n.columns)&&e(n.columns,r)}}(e,t)}static applyAggregates(e,t){var r,n,o,s,a;if(i.Convert.isEmpty(e))return;const l=null!==(r=t.config.aggregates)&&void 0!==r?r:[],u=null!==(o=null===(n=t.config.tree)||void 0===n?void 0:n.aggregates)&&void 0!==o?o:[],c=null===(a=null===(s=t.config)||void 0===s?void 0:s.schema)||void 0===a?void 0:a.fields;function f(e,t,r){var n,o;for(const s of null!=t?t:[])r.some((e=>d.Aggregate.aggregateEquals(e,s)))||(i.Convert.isValue(e)&&(i.Convert.isEmpty(s.dataType)&&(s.dataType=i.Convert.parseEnum(i.DataType,null===(n=e[i.Convert.asStringArray(s.require,void 0)[0]])||void 0===n?void 0:n.dataType)),i.Convert.isValue(s.payload)&&i.Convert.isEmpty(s.payloadType)&&(s.payloadType=i.Convert.parseEnum(i.DataType,null===(o=e[s.payload])||void 0===o?void 0:o.dataType))),r.push(h.GridColumnParser.parseAggregate(s.require,s)))}i.Arrays.bfsAction(e,(e=>{var t,r;if(i.Convert.isValue(null===(t=e.total)||void 0===t?void 0:t.aggregates)&&f(c,e.total.aggregates,l),i.Convert.isValue(e.groups)&&e.groups instanceof Array)for(const t of e.groups)f(c,t.aggregates,[]);return i.Convert.isValue(null===(r=e.tree)||void 0===r?void 0:r.aggregates)&&f(c,e.tree.aggregates,u),e.columns})),t.config.aggregates=l,i.Convert.isValue(u)&&(i.Convert.isEmpty(t.config.tree)&&(t.config.tree={}),t.config.tree.aggregates=u)}static parseUnit(e){return"number"==typeof e?`${e}px`:e}static parseContainer(e){if("string"==typeof e){const t=s.SBGrid3.$(e);return 0==t.length&&m.Log.error((()=>`[${e}] 를 찾을 수 없습니다.`)),t}return e instanceof HTMLElement?s.SBGrid3.$(e):e}static parsePanelLayout(e){return e instanceof Array||"string"==typeof e?{left:_.parseStringArray(e)}:e instanceof Object?{left:_.parseStringArray(e.left),center:_.parseStringArray(e.center),right:_.parseStringArray(e.right),leftFlex:_.parseAlignFlex(e.leftFlex,h.TextAlign.Left),centerFlex:_.parseAlignFlex(e.centerFlex,h.TextAlign.Center),rightFlex:_.parseAlignFlex(e.rightFlex,h.TextAlign.Right)}:void 0}static parseAlignFlex(e,t){var r;return{flexGrow:null==e?void 0:e.flexGrow,flexShrink:null==e?void 0:e.flexShrink,align:null!==(r=null==e?void 0:e.align)&&void 0!==r?r:t}}static parseStringArray(e){if(i.Convert.isEmpty(e))return[];if(e instanceof Array)return[].concat(e);if("string"==typeof e){return e.split(",").map((e=>e.trim())).filter((e=>0==i.Convert.isWhite(e)))}return e}static parseEnumArray(e,t){if(i.Convert.isEmpty(t))return[];if(t instanceof Array){let r=new Array;for(const n of t){let t=i.Convert.parseEnum(e,n);r.push(t)}return[].concat(t)}if("string"==typeof t){let r=t.split(","),n=new Array;for(const t of r){let r=i.Convert.parseEnum(e,t.trim());n.push(r)}return n}return t}static parsePanels(e){if(e instanceof Array||"string"==typeof e){return _.parseEnumArray(o.PanelType,e)}throw"panels must be array or comma seperated string"}static parseDataSource(e){if(e instanceof n.DataSource)return e;if(e instanceof Array)return new n.DataSource({data:e});if(i.Convert.isValue(e))return new n.DataSource(e);throw"invalid dataSource. dataSource must be DataSource or Array"}static adjustValidator(e,t){var r,n;const o=null===(n=null===(r=null==t?void 0:t.config)||void 0===r?void 0:r.schema)||void 0===n?void 0:n.fields;i.Convert.isNull(o)||e.forEach((e=>{var t;const r=e.validators,n=e.field,s=o[n];if(e.editable&&!i.Convert.isNull(r)&&0===r.length){if(i.Convert.isNull(s))return;if(i.Convert.isNull(e.validators))return;const r=s.dataType,n=s.nullable,o=null!==(t=e.validators)&&void 0!==t?t:[],a=null==o?void 0:o.find((e=>e.rule===c.Rules.Type));if(i.Convert.isNull(a)&&i.Convert.isValue(r)&&(r===i.DataType.Date||r===i.DataType.Number)){const e={rule:c.Rules.Type,value:r};_._adjustValidator(e),o.unshift(e)}const l=null==o?void 0:o.find((e=>e.rule===c.Rules.Required));i.Convert.isNull(l)&&0==n&&o.unshift({rule:c.Rules.Required}),e.validators=o}else null==r||r.forEach((t=>{var r;let n=t.dataType;i.Convert.isNull(n)&&(n=null!==(r=e.dataType)&&void 0!==r?r:null==s?void 0:s.dataType),i.Convert.isNull(n)&&(t.dataType=i.Convert.parseEnum(i.DataType,n)),_._adjustValidator(t)}))}))}static _adjustValidator(e){const t=e.value;switch(e.rule){case c.Rules.Required:break;case c.Rules.Between:if(i.Convert.isEmpty(t)||t instanceof Array==0||t.length<2)throw"validation config error. Between Rule must have array value. The size of the value should be equal to 2  >>>"+e;break;case c.Rules.Custom:if("function"!=typeof t)throw"validation config error. Custom Rule must have function value.";break;case c.Rules.Type:e.value=i.Convert.parseEnum(i.DataType,t.toString());break;case c.Rules.Min:case c.Rules.Max:const r=e.dataType,n=i.Convert.convertType(t,r);if(r===i.DataType.Number&&"number"!=typeof n||r===i.DataType.String&&"string"!=typeof n||r===i.DataType.Date&&isNaN(n))throw"validation config error. The data type of 'value' must be the same as the type of 'dataType'.";break;case c.Rules.Pattern:if(t instanceof RegExp)break;if("string"==typeof t)break;throw"validation config error. Pattern Rule must have string or RegExp value. >>>"+e.value;case c.Rules.MaxLength:case c.Rules.MinLength:"string"!=typeof t&&e.rule}}static parseStatusPanelAlign(e){let t;if("string"==typeof e)t=_.parseStatusPanelAlign({left:e});else if(e instanceof Array)t=_.parseStatusPanelAlign({left:e});else if(e instanceof Object)if(e.hasOwnProperty("left")||e.hasOwnProperty("center")||e.hasOwnProperty("right")){const r=e;t={left:i.Convert.default(r.left,void 0,(e=>_.parseStatusTemplates(e))),center:i.Convert.default(r.center,void 0,(e=>_.parseStatusTemplates(e))),right:i.Convert.default(r.right,void 0,(e=>_.parseStatusTemplates(e))),leftFlex:r.leftFlex,rightFlex:r.rightFlex,centerFlex:r.centerFlex}}else t=_.parseStatusPanelAlign({left:e});return t}static parseStatusTemplates(e){let t=e instanceof Array?e:[e];const r=new Array;for(let e=0;e<t.length;e++){const n=t[e];if("string"==typeof n||"function"==typeof n){r.push(n);continue}const o=h.GridColumnParser.parseColumnTemplate(void 0,n),s=n.aggregates instanceof Array?n.aggregates:[n.aggregates];o.aggregates=i.Convert.default(n.aggregates,void 0,(e=>h.GridColumnParser.parseAggregates(void 0,s))),r.push(o)}return r}static parseFilterOption(e){let t;if(0==e)t=void 0;else if(!0===e)t=f.FilterMode.Menu;else{if("string"!=typeof e)throw"not supported filter option . "+e;t=i.Convert.parseEnum(f.FilterMode,e)}return t}static parseEditConfig(e){let t;return t=!1===e?void 0:!0===e?_.parseEditConfig({mode:i.Convert.parseEnum(w,w.incell)}):"string"==typeof e?_.parseEditConfig({mode:i.Convert.parseEnum(w,e)}):{mode:i.Convert.default(e.mode,w.incell,(e=>i.Convert.parseEnum(w,e))),eventType:i.Convert.default(e.eventType,C.dblclick,(e=>i.Convert.parseEnum(C,e))),immediateValidationCheck:i.Convert.default(e.immediateValidationCheck,!1)},t}static parseKeyboardNavitagion(e){const t=e=>!1===e?void 0:!0===e?{edit:!1}:{edit:i.Convert.default(e.edit,!1)};let r;return r=!1===e?void 0:!0===e?_.parseKeyboardNavitagion({tabToNextCell:!0}):{tabToNextCell:i.Convert.default(e.tabToNextCell,{edit:!1},t)},r}static parseReorderable(e){return!0===e?_.parseReorderable({row:!0,column:!0}):!1===e?_.parseReorderable({row:!1,column:!1}):{column:i.Convert.default(e.column,void 0,(e=>_.parseReorderSlideInterval(e))),row:i.Convert.default(e.row,void 0,(e=>_.parseReorderSlideInterval(e)))}}static parseReorderSlideInterval(e){return!0===e?{scrollInterval:120}:!1===e?void 0:{scrollInterval:e.scrollInterval}}static parseHover(e){return!0===e?_.parseHover(a.HoverType.Cell):!1===e?void 0:i.Convert.parseEnum(a.HoverType,e)}}t.GridParser=_,function(e){e.none="none",e.incell="incell",e.inline="inline",e.popup="popup"}(w||(t.EditMode=w={})),function(e){e.mouseup="mouseup",e.dblclick="dblclick",e.click="click"}(C||(t.EditEvent=C={}))},6659:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GridDefault=void 0;const n=r(7641),i=r(4249),o=r(3211),s=r(7392),a=r(4772),l=r(696);t.GridDefault=class{constructor(){this.editable=!1,this.defaultEditable={mode:s.EditMode.incell,eventType:s.EditEvent.dblclick,immediateValidationCheck:!1},this.pageable=!1,this.defaultPageable={numeric:!0,previousNext:!0,buttonCount:10},this.sortable=s.SortMode.None,this.defaultSortable=s.SortMode.Rotate,this.multiSort=!1,this.navigatable=!1,this.defaultNavigatable={tabToNextCell:{edit:!1}},this.resizable=!1,this.defaultResizable={mode:i.ResizeMode.GuideLine,minWidth:10,autoFit:["caption","data"]},this.reorderable={row:void 0,column:void 0},this.defaultReorderable={row:!0,column:!0},this.groupable=!1,this.filterable=!1,this.defaultFilterable=n.FilterMode.Menu,this.checkable=!1,this.undoable=!0,this.virtualRow=!0,this.virtualColumn=!1,this.fixedRows=!0,this.alternateCss=2,this.panels=a.PanelFactory.getDefaultPanges(),this.groupBar=s.GridParser.parsePanelLayout(["group"]),this.pagerBar=s.GridParser.parsePanelLayout(["pager"]),this.stickyHeader=!1,this.stickyFooter=!1,this.stickyRow=!1,this.stickyEdit=!1,this.stickyInsert=!1,this.stickyUpdate=!1,this.stickyDelete=!1,this.mergeRow=!1,this.mergeColumn=!1,this.selectable=!1,this.defaultSelectable={selectMode:l.SelectMode.Single,rowSelect:!0,columnSelect:!1},this.hover=!1,this.defaultHover=l.HoverType.Cell,this.groupAutoOpen=!1,this.detailAutoOpen=!1,this.rowHeaders=["row","sticky","check","reorder","status","detail"],this.showRowNo=!0,this.showSticky=!1,this.showStatus=!1,this.showDetail=!0,this.wheelDelta=30,this.contextMenu=!1,this.defaultContextMenu=["clipboard","undo","redo","addRow","addTop"],this.copyable=!1,this.defaultCopyable={fill:!1},this.freezable=!1,this.captionHeight=30,this.rowHeight=30,this.maxRowHeight=100,this.headerHeight=30,this.footerHeight=30,this.filterHeight=30,this.groupHeight=30,this.detailHeight=60,this.maxDetailHeight=300,this.copyInsert=!1,this.pagerOption={numeric:!0,previousNext:!0,buttonCount:10},this.defaultColumn={align:o.TextAlign.Center,valign:o.VertAlign.Bottom,width:100,minWidth:10,maxWidth:500,sortable:s.SortMode.Rotate,editable:!0,selectable:!0,groupable:!0,visible:!0,captionVisible:!0,skipPaste:!1,directApplyValue:!1,directApplyEdit:!1,captionLayout:{left:["check"],center:["caption","sort","filter"],right:["menu"],rightFlex:{flexGrow:0},leftFlex:{flexGrow:0}},captionMenu:!1,defaultCaptionMenu:["column","fixedCol","sort"],contextMenu:!1,defaultContextMenu:["clipboard","undo","redo","sticky","insertRow","appendrow","addRow","addTop","deleteRow","edit","cancel"]},this.language=""}get local(){var e;return null===(e=this.localizations)||void 0===e?void 0:e[this.language]}}},1919:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GridMatrix=t.GridCell=t.OutOfView=t.GridRow=t.GridLayout=void 0;const n=r(3396),i=r(1374),o=r(3211),s=r(9114),a=r(1700);class l{constructor(e){this._grid=e}get rows(){var e;return null!==(e=this._rows)&&void 0!==e?e:this._rows=[]}get grid(){return this._grid}get scrollLeft(){var e;return null!==(e=this._scrollLeft)&&void 0!==e?e:this._scrollLeft=this.grid.viewport.marginCol}get partMap(){return this._partMap}get fixedWidth(){var e;return null!==(e=this.partMap.get(o.PartType.Fixed))&&void 0!==e?e:0}get headWidth(){var e;return null!==(e=this.partMap.get(o.PartType.Head))&&void 0!==e?e:0}get tailWidth(){var e;return null!==(e=this.partMap.get(o.PartType.Tail))&&void 0!==e?e:0}get bodyWidth(){var e;return null!==(e=this.partMap.get(o.PartType.Body))&&void 0!==e?e:0}get stickyWidth(){var e;return null!==(e=this.partMap.get(o.PartType.Sticky))&&void 0!==e?e:0}get leftWidth(){return this.fixedWidth+this.headWidth}get rightWidth(){return this.tailWidth}get centerWidth(){return this.grid.bodyWidth-this.leftWidth-this.rightWidth}get scrollWidth(){return this.bodyWidth+this.stickyWidth}toMatrix(){return d.toMatrix(this)}toVisibleMatrix(){return d.toVisibleMatrix(this)}static makeCaptionLayout(e,t){const r=new l(e);return this.createCaptionCell(e,r,t),this.adjustLayout(e,r),r}static adjustLayout(e,t){this.adjustRowSpan(t),e.hasFractionColumn&&this.adjustFractionCells(t),e.hasStickyColumn&&this.adjustStickyCells(t);const r=this.mergeRows(t);t._partMap=this.calcPartWidth(r)}static mergeRows(e){const t=[];for(const r of e.rows)for(const e in r.cells){const n=r.cells[e];t[n.col]=n}return t}static calcPartWidth(e){const t=new Map;for(const r in e){const n=e[r];0==t.has(n.part)?t.set(n.part,n.width):t.set(n.part,t.get(n.part)+n.width)}return t}static makeFilterLayout(e,t){const r=new l(e);return this.createFilterCell(e,r,t),this.adjustLayout(e,r),r}static makeDefaultLayout(e,t){const r=new l(e);return this.createDefaultCell(e,r,t),this.adjustLayout(e,r),r}static makeViewportLayout(e,t,r,n){return this.createColsView(e,t,r,n)}static makeRowLayout(e,t){const r=new l(e);return this.createRowCell(e,r,t,0),this.adjustLayout(e,r),r}static makeHeaderLayout(e,t){const r=new l(e);return this.createHeaderCell(e,r,t,(e=>e.headers)),this.adjustLayout(e,r),r}static makeFooterLayout(e,t){const r=new l(e);return this.createHeaderCell(e,r,t,(e=>e.footers)),this.adjustLayout(e,r),r}static makeTreeFooterLayout(e,t){const r=new l(e);return this.createHeaderCell(e,r,t,(e=>e.treeFooters)),this.adjustLayout(e,r),r}static makeGroupLayout(e,t,r){const i=new l(e),o=new l(e);return n.Convert.isValue(n.Arrays.bfsSearch(t,(e=>e.hasGroupHeader(r)||e.columns)))?this.createGroupCell(e,i,t,r,(e=>e.header)):this.createDefaultCell(e,i,t),this.adjustLayout(e,i),this.adjustGroupCells(i,e.dataConfig.groups,r),n.Convert.isValue(n.Arrays.bfsSearch(t,(e=>e.hasGroupFooter(r)||e.columns)))&&(this.createGroupCell(e,o,t,r,(e=>e.footer)),this.adjustLayout(e,o)),{header:i,footer:o}}static makeDetailLayout(e,t){const r=new l(e);return this.createDetailCell(e,r,t),r}static createCaptionCell(e,t,r,i=0,o=0,s=0){if(n.Convert.isNull(r))return;let a=0;const l=t.getRow(o);for(const u of r){if(0==u.visible)continue;const r=u.columns.length==u.columns.filter((e=>0==e.visible)).length;let c=u.config.captionVisible||r?this.createCell(u,l,i,s,0):void 0;if(n.Convert.isValue(u.columns)&&0==r){const r=this.createCaptionCell(e,t,u.columns,i,n.Convert.isNull(c)?o:o+1,s);a+=r,i+=r,n.Convert.isValue(c)&&(c.colSpan=r)}else a++,i++;s+=u.width}return a}static createFilterCell(e,t,r,i=0,o=0,s=0){if(n.Convert.isNull(r))return;let a=0;const l=t.getRow(o);for(const u of r){if(0==u.visible)continue;const r=u.columns.length==u.columns.filter((e=>0==e.visible)).length;let c=r||u.visible&&(n.Convert.isValue(u.config.filter)&&!1!==u.config.filter&&n.Convert.isValue(u.field)||n.Convert.isEmpty(u.columns))?this.createCell(u,l,i,s,0):void 0;if(n.Convert.isValue(u.columns)&&0==r){const r=this.createFilterCell(e,t,u.columns,i,n.Convert.isNull(c)?o:o+1,s);n.Convert.isValue(c)&&(c.colSpan=r),a+=r,i+=r}else a++,i++;s+=u.width}return a}static createCell(e,t,r,n,i){const o=new h(t,e);return o.col=r,o.left=n,o.width=e.width,o.unit=e.unit,o.part=e.part,t.cells[o.col]=o,o}static adjustStickyCells(e,t=0){if(e.rows.length<=t)return;const r=[].concat(e.rows[t].cells);for(let i=t-1;i>=0;i--){const t=e.rows[i].cells;for(const e in t)n.Convert.isNull(r[e])&&(r[e]=t[e])}let i=0;for(const e in r){const t=r[e];t.column.isSticky&&(t.stickyLeft=i,i+=t.width)}let s=0;const a=[].concat(r).reverse();for(const e in a){const t=a[e];t.column.part==o.PartType.Sticky&&(t.stickyRight=s,s+=t.width)}this.adjustStickyCells(e,t+1)}static adjustGroupCells(e,t,r){const i=[].concat(e.rows[0].cells),o=t.findIndex((e=>e.field==r)),s=t.length;if(!(o<0))for(const t of i.keys()){const a=i[t];if(n.Convert.isNull(a)||n.Convert.isNull(a.column))continue;if(a.column.field==r){a.colSpan=s-o+1;for(let r=t+1;r<t+s-o+1;r++)for(const t of e.rows){const e=t.cells[r];n.Convert.isNull(e)||(e.visible=!1)}break}}}static adjustFractionCells(e){const t=e.rows.reduce(((e,t)=>Math.max(e,t.cells.length)),0),r=e.rows.length;let i=0,s=0;const a=[];for(let l=0;l<t;l++)for(let t=r-1;t>=0;t--){const r=e.rows[t].cells[l];if(!n.Convert.isNull(r)){r.unit==o.Unit.Pixel?i+=r.width:(s+=r.width,a.push(r));break}}if(0==a.length)return;const l=e.grid.bodyWidth-i;if(l>0){const e=l/s;for(const t of a){const r=n.Convert.asInt(t.width*e);t.width=t.minWidth>r?t.minWidth:r,t.column.width=t.width}}else for(const e of a)e.width=e.minWidth>0?e.minWidth:0,e.column.width=e.width;let u=0;for(let i=0;i<t;i++){let t;for(let o=r-1;o>=0;o--){const r=e.rows[o].cells[i];n.Convert.isNull(r)||(n.Convert.isNull(t)&&(t=r),r.left=u,this.calcParentWidth(e,r))}n.Convert.isValue(t)&&(u+=t.width)}}static calcParentWidth(e,t){var r;let i=t.row,o=t.col;if(i>=e.rows.length-1)return;const s=[];for(i++;i<e.rows.length;i++)for(o=t.col;o<t.col+t.colSpan;o++){const t=null===(r=e.rows[i])||void 0===r?void 0:r.cells[o];n.Convert.isNull(t)||(s[o]=t.width)}s.length>0&&(t.width=s.reduce(((e,t)=>e+t),0))}static adjustRowSpan(e,t=!1,r=0){if(e.rows.length<=r)return;const o=e.rows[r].cells,a=[].concat(e.rows).splice(r+1);for(const e in o){const l=o[e];if(l.rowSpan=1,t&&0==r&&l.column instanceof s.FrozenColumn)for(const t of a){const r=l.clone(t,l.column);t.cells[e]=r}else try{for(const t of a){if(!n.Convert.isNull(t.cells[e]))break;l.rowSpan++}}catch(e){i.Log.debug(a)}}this.adjustRowSpan(e,t,r+1)}static createRowCell(e,t,r,i=0,o=0,s=0){if(n.Convert.isEmpty(r))return;let a=0;const l=t.getRow(o);for(const u of r){if(0==u.visible)continue;let r;const c=u.columns.length==u.columns.filter((e=>0==e.visible)).length;if((u.visible||c)&&(n.Convert.isValue(u.config.field)||n.Convert.isValue(u.config.cellTemplate)||n.Convert.isEmpty(u.columns))&&(r=this.createCell(u,l,i,s,0)),u.columns.length>0&&0==c){const l=this.createRowCell(e,t,u.columns,i,n.Convert.isNull(r)?o:o+1,s);n.Convert.isValue(r)&&(r.colSpan=l),a+=l,i+=l}else a++,i++;s+=u.width}return a}getRow(e){return l.getGridRow(this,e)}static getGridRow(e,t){var r;const n=null!==(r=e.rows[t])&&void 0!==r?r:e.rows[t]=new u(e);return n.row=t,n}static createHeaderCell(e,t,r,i,o=0,s=0,a=0){let l=0;if(n.Convert.isNull(r)||0==r.length)return l;const u=t.getRow(s);for(const c of r){if(0==c.visible)continue;let r,h=0;const d=c.columns.length==c.columns.filter((e=>0==e.visible)).length;if(c.visible||d){const e=i(c);if(n.Convert.isValue(e)){for(const i of e){if(n.Convert.isEmpty(i))continue;let e=this.getGridRow(t,s+h);r=this.createCell(c,e,o,a,h),h++}h--}else n.Convert.isEmpty(c.columns)&&(r=this.createCell(c,u,o,a,h))}if(c.columns.length>0&&0==d){const u=this.createHeaderCell(e,t,c.columns,i,o,(n.Convert.isNull(r)?s:s+1)+h,a);n.Convert.isValue(r)&&(r.colSpan=u),l+=u,o+=u}else l++,o++;a+=c.width}return l}static createGroupCell(e,t,r,i,o,s=0,a=0,l=0){if(n.Convert.isNull(r)||0==r.length)return;let u=0;const c=t.getRow(a);for(const h of r){if(0==h.visible)continue;let r,d=0;const f=h.columns.length==h.columns.filter((e=>0==e.visible)).length;if(h.visible||f){const e=h.getGroup(i).groups;let u=[];if((e instanceof Array?e:[e]).forEach((e=>{const t=o(e);n.Convert.isValue(t)&&(u=u.concat(t))})),n.Convert.isValue(u)){for(const e of u){if(n.Convert.isEmpty(e))continue;let i=this.getGridRow(t,a+d);r=this.createCell(h,i,s,l,d),d++}d--}else n.Convert.isEmpty(h.columns)&&(r=this.createCell(h,c,s,l,d))}if(n.Convert.isValue(h.columns)&&0==f){const c=this.createGroupCell(e,t,h.columns,i,o,s,(n.Convert.isNull(r)?a:a+1)+d,l);n.Convert.isValue(r)&&(r.colSpan=c),u+=c,s+=c}else u++,s++;l+=h.width}return u}static createDefaultCell(e,t,r,i=0,o=0){let s=0;const a=t.getRow(0);for(const l of r){if(0==l.visible)continue;const r=l.columns.length==l.columns.filter((e=>0==e.visible)).length;let u=l.visible||r?this.createCell(l,a,i,o,0):void 0;if(n.Convert.isValue(l.columns)&&0==r){const r=this.createDefaultCell(e,t,l.columns,i,o);n.Convert.isValue(u)&&(u.colSpan=r),s+=r,i+=r}else s++,i++;o+=l.width}return s}static createColsView(e,t,r,i){const s=new l(e),a=new u(s),h=new u(s),d=new u(s);let f=0,p=0,m=0,g=0,v=0,y=0;n.Arrays.dfsAction(t,(e=>{if(0==e.visible)return[];if(n.Convert.isValue(e.columns))return e.columns;const t=e.width;switch(e.part){case o.PartType.Fixed:case o.PartType.Head:l.createCell(e,h,y,v,0),p+=t;break;case o.PartType.Tail:l.createCell(e,d,y,v,0),m+=t;break;case o.PartType.Sticky:case o.PartType.Body:r<=y&&f+p+m<=i?(l.createCell(e,a,y,v,0),f+=t,e.part==o.PartType.Sticky&&(g+=t)):e.part==o.PartType.Sticky&&(y<r?(l.createCell(e,h,y,v,0),p+=t):(l.createCell(e,d,y,v,0),m+=t))}v+=t,y++})),f=p;for(const e in a.cells){const t=a.cells[e];i-f-m<0?a.cells[e]=void 0:i-f-m-g<=t.width&&(t.part==o.PartType.Sticky?(a.cells[e]=void 0,d.cells[t.col]=t,m+=t.width,g-=t.width):t.outOfView=c.Half),f+=t.width}const b=h.cells.filter((e=>n.Convert.isValue(e))),w=a.cells.filter((e=>n.Convert.isValue(e))),C=d.cells.filter((e=>n.Convert.isValue(e)));return{headCells:b,bodyCells:w,tailCells:C,fullCells:[].concat(b).concat(w).concat(C),bodyWidth:i,scrollWidth:f,tailWidth:m,headWidth:p}}static createDetailCell(e,t,r,i=0){let l;this.createDefaultCell(e,t,r);for(const r of t.rows){const t=r.cells;for(const r in t){const i=t[r];i.part!=o.PartType.Body&&i.part!=o.PartType.Sticky||i.column instanceof a.GroupColumn||(n.Convert.isEmpty(l)?(l=i,l.column=new s.DetailColumn(e,{part:"body"})):(l.colSpan+=i.colSpan,i.visible=!1))}}}get findMap(){var e;return null!==(e=this._findMap)&&void 0!==e?e:this._findMap=new Map}findCell(e){if(this.findMap.has(e))return this.findMap.get(e);for(const t of this.rows){const r=t.cells;for(const t in r){const n=r[t];if(n.column==e)return this.findMap.set(e,n),n}}}}t.GridLayout=l;class u{constructor(e){this._row=0,this._layout=e}get cells(){var e;return null!==(e=this._cells)&&void 0!==e?e:this._cells=[]}get row(){return this._row}set row(e){this._row=e}get layout(){return this._layout}get grid(){return this.layout.grid}get fixedWidth(){return this.layout.leftWidth}get scrollLeft(){return this.layout.scrollLeft}get bodyWidth(){return this.layout.bodyWidth}get map(){var e;return null!==(e=this._map)&&void 0!==e?e:this._map=new Map}getCells(e){if(0==this.map.has(e)){const t=[];for(const r in this.cells){const n=this.cells[r];(e==o.PartType.Body?n.part==o.PartType.Body||n.part==o.PartType.Sticky:n.part==e)&&(t[r]=n)}return this.map.set(e,t),t}return this.map.get(e)}}var c;t.GridRow=u,function(e){e[e.Visible=0]="Visible",e[e.Half=1]="Half",e[e.Hidden=2]="Hidden"}(c||(t.OutOfView=c={}));class h{constructor(e,t){this._col=0,this._rowSpan=1,this._colSpan=1,this._mergeCol=1,this._mergeRow=1,this._column=t,this._gridRow=e,this._visible=t.visible}clone(e,t){const r=new h(null!=e?e:this.gridRow,null!=t?t:this.column);return r._col=this._col,r._rowSpan=this._rowSpan,r._colSpan=this._colSpan,r._mergeCol=this._mergeCol,r._mergeRow=this._mergeRow,r._width=this._width,r._unit=this._unit,r._left=this._left,r._part=this._part,r._outOfView=this._outOfView,r._stickyLeft=this._stickyLeft,r._stickyRight=this._stickyRight,r._visible=this._visible,r}get gridRow(){return this._gridRow}get column(){return this._column}set column(e){this._column=e}get col(){return this._col}set col(e){this._col=e}get row(){return this._gridRow.row}get rowSpan(){return this._rowSpan}set rowSpan(e){this._rowSpan=e}get colSpan(){return this._colSpan}set colSpan(e){this._colSpan=e}get mergeCol(){return this._mergeCol}set mergeCol(e){this._mergeCol=e}get mergeColumn(){return this._mergeCol}get mergeRow(){return this._mergeRow}set mergeRow(e){this._mergeRow=e}get merge(){return this.mergeRow>1||this.mergeCol>1}get merged(){return 0==this.mergeRow||0==this.mergeCol}get width(){return this._width}get minWidth(){return this.column.minWidth}set width(e){this._width=e}get unit(){return this._unit}set unit(e){this._unit=e}get left(){return this._left}set left(e){this._left=e}get part(){return this._part}set part(e){this._part=e}get isSticky(){var e,t;return null!==(t=null===(e=this.column)||void 0===e?void 0:e.isSticky)&&void 0!==t&&t}get outOfView(){var e;return null!==(e=this._outOfView)&&void 0!==e?e:this._outOfView=c.Visible}set outOfView(e){this._outOfView=e}get visible(){return this._visible}set visible(e){this._visible=e}get stickyLeft(){return this._stickyLeft}set stickyLeft(e){this._stickyLeft=e}get stickyRight(){return this._stickyRight}set stickyRight(e){this._stickyRight=e}}t.GridCell=h;class d{constructor(e){this._matrix=[],this._layout=e}get grid(){return this._layout.grid}get layout(){return this._layout}get fixedWidth(){return this.layout.fixedWidth}get headWidth(){return this.layout.headWidth}get tailWidth(){return this.layout.tailWidth}get bodyWidth(){return this.layout.bodyWidth}get stickyWidth(){return this.layout.stickyWidth}get leftWidth(){return this.layout.leftWidth}get rightWidth(){return this.layout.rightWidth}get centerWidth(){return this.grid.bodyWidth-this.leftWidth-this.rightWidth}get scrollWidth(){return this.bodyWidth+this.stickyWidth}get marginCol(){return this.grid.scrollPanel.scrollLeft}get matrix(){return this._matrix}getCell(e,t){return this._matrix[e][t]}setCell(e,t,r){return this._matrix[e][t]=r,r}static toMatrix(e){const t=new d(e);for(const r of e.rows)for(const e in r.cells){const i=r.cells[e];for(let e=i.row;e<i.row+i.rowSpan;e++)for(let r=i.col;r<i.col+i.colSpan;r++)n.Convert.isNull(t.matrix[e])&&(t.matrix[e]=[]),t.matrix[e][r]=i}return t}static toVisibleMatrix(e){const t=new d(e);new Map;return t}}t.GridMatrix=d},5677:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StatusPanel=t.LoadingPanel=t.HiddenPanel=t.PagerPanel=t.GroupPanel=t.ToolPanel=t.TitlePanel=t.GridPanel=t.ToolAlign=void 0;const i=r(235),o=r(3396),s=r(2271),a=r(4772),l=r(3988),u=r(7074),c=r(1374),h=r(1880),d=r(4683);var f;!function(e){e.Left="left",e.Center="center",e.Right="right"}(f||(t.ToolAlign=f={}));class p extends i.Publisher{get tools(){return o.Convert.isNull(this._panelAlign)&&(this._panelAlign=this.getTools()),this._panelAlign}get grid(){return this._grid}get container(){return this._container}set container(e){this._container=e}getTools(){return new a.PanelLayout(this.grid,{})}get renderable(){return!0}constructor(e,t){super(e),this._grid=e,this._class=t}render(e){return n(this,void 0,void 0,(function*(){let t=o.JqUtils.adjustElement(e,`>div#${this.name}`,`<div class='${u.SbCss.panel} ${this._class}' id='${this.name}'></div>`);this.container=t,o.Convert.isValue(this.tools.left)&&(yield this.renderToolAlign(t,this.tools.left,this.tools.leftFlex,"align-left")),o.Convert.isValue(this.tools.center)&&(yield this.renderToolAlign(t,this.tools.center,this.tools.centerFlex,"align-center")),o.Convert.isValue(this.tools.right)&&(yield this.renderToolAlign(t,this.tools.right,this.tools.rightFlex,"align-right")),this.grid.setEvent("panelClick","click",this.constructor.name,this.onEvent,t),this.grid.setEvent("panelClick","mousedown",this.constructor.name,this.onEvent,t),this.grid.setEvent("panelClick","mouseup",this.constructor.name,this.onEvent,t)}))}onEvent(e){c.Log.debug((()=>e.type))}renderToolAlign(e,t,r,i){return n(this,void 0,void 0,(function*(){let n=o.JqUtils.adjustElement(e,`>div#${i}`,`<div id='${i}' class='${u.SbCss.tools} ${u.SbCss.align} ${u.SbCss.toClass(r.align)}'></div>`);if(o.Convert.isValue(r.flexGrow)||o.Convert.isValue(r.flexShrink)){const e=`${o.Convert.isValue(r.flexGrow)?"flex-grow: "+r.flexGrow+"; ":""} ${o.Convert.isValue(r.flexShrink)?"flex-shrink: "+r.flexShrink+"; ":""}`;o.JqUtils.changeAttr(n,"style",e)}yield this.renderTools(n,t)}))}renderTools(e,t){return n(this,void 0,void 0,(function*(){if(!o.Convert.isEmpty(t))for(let r of t){let t=o.JqUtils.adjustElement(e,`>div#${r.name}`,`<div id='${r.name}' class='${u.SbCss.tool} ${u.SbCss.item} ${r.clazz}'></div>`);yield r.render(t)}}))}createStyle(e){return n(this,void 0,void 0,(function*(){}))}}t.GridPanel=p;t.TitlePanel=class extends p{constructor(e){super(e,u.SbCss.title)}getTools(){return new a.PanelLayout(this.grid,this.grid.config.titleBar)}get renderable(){return!0}};t.ToolPanel=class extends p{constructor(e){super(e,u.SbCss.tool)}getTools(){return new a.PanelLayout(this.grid,this.grid.config.toolBar)}get renderable(){return o.Convert.isValue(this.grid.config.toolBar)}};t.GroupPanel=class extends p{constructor(e){super(e,u.SbCss.group)}getTools(){return new a.PanelLayout(this.grid,this.grid.config.groupBar)}get renderable(){return this.grid.config.groupable}};t.PagerPanel=class extends p{constructor(e){super(e,u.SbCss.pager)}getTools(){return new a.PanelLayout(this.grid,this.grid.config.pagerBar)}get renderable(){return o.Convert.isValue(this.grid.config.pageable)&&o.Convert.isValue(this.grid.config.pagerBar)}};t.HiddenPanel=class extends p{constructor(e){super(e,u.SbCss.hidden)}get renderable(){return!0}};t.LoadingPanel=class extends p{constructor(e){super(e,u.SbCss.loading)}get renderable(){return!0}get loading(){return this._loading}set loading(e){this._loading!=e&&(this._loading=e,o.Convert.isNull(this.wrapper)||setTimeout((()=>{this.loading?o.JqUtils.removeClass(this.wrapper,u.SbCss.hidden):o.JqUtils.addClass(this.wrapper,u.SbCss.hidden)}),10))}render(e){let t=o.JqUtils.adjustElement(e,`>div#${this.name}`,`<div class='${u.SbCss.panel} ${this._class}' id='${this.name}'><div class='loader-wrap'><div class='loader02'></div></div></div>`);this.wrapper=l.SBGrid3.$(">.loader-wrap",t),this.loading?o.JqUtils.removeClass(this.wrapper,u.SbCss.hidden):o.JqUtils.addClass(this.wrapper,u.SbCss.hidden)}};t.StatusPanel=class extends p{constructor(e){super(e,u.SbCss.status),this.mergeToolAggregates=e=>{if(o.Convert.isEmpty(e))return[];if(e instanceof Array){let t=[];for(const r of e){const e=this.mergeToolAggregates(r);o.Convert.isNull(e)||(t=t.concat(e))}return t}if(e instanceof s.ToolStatus){const t=e.columnTemplate.aggregates;if(o.Convert.isEmpty(t))return[];return(t instanceof Array?t:[t]).filter((e=>o.Convert.isValue(e)))}}}get renderable(){return o.Convert.isValue(this.grid.config.statusBar)}getTools(){var e;return this.panelAlign=null!==(e=this.panelAlign)&&void 0!==e?e:new a.StatusPanelAlign(this.grid),this.panelAlign}doCommand(e,t){if(t.command==h.Commands.Selected){if(0==this.renderable)return!0;const e=this.aggregate();if(o.Convert.isNull(e))return;return this.updateToolsStatus(this.panelAlign.left,e),this.updateToolsStatus(this.panelAlign.center,e),this.updateToolsStatus(this.panelAlign.right,e),!0}return super.doCommand(e,t)}updateToolsStatus(e,t){if(!o.Convert.isNull(e)&&!o.Convert.isNull(t))for(const r of e)r instanceof s.ToolStatus&&r.updateStatus(t)}aggregate(){const e=this.makeItem(),t=this.mergeAggregates();return d.Aggregate.aggregates(e,t,!0)}makeItem(){const e=this.grid.selectManager,t=new Map;return e.selectedRows.forEach(((r,n)=>{const i=this.grid.view.keyMap.get(n),s=Object.assign({},i.data);r.forEach((t=>{var r;if(0==e.isSelectedCell(i.key,t)){const e=o.Arrays.bfsSearch(this.grid.columns,(e=>e.name==t));o.Convert.isValue(null===(r=null==e?void 0:e.config)||void 0===r?void 0:r.field)&&delete s[e.config.field]}})),t.set(i.key,s)})),e.selectedCells.forEach(((e,r)=>{var n;const i=this.grid.view.keyMap.get(r).data,s=null!==(n=t.get(r))&&void 0!==n?n:{};e.forEach((e=>{const t=o.Arrays.bfsSearch(this.grid.columns,(t=>e==t.name));s[t.config.field]=i[t.config.field]})),t.set(r,s)})),e.selectedColumns.forEach(((r,n)=>{const i=o.Arrays.bfsSearch(this.grid.columns,(e=>n==e.name));this.grid.rows.forEach((r=>{var s;const a=r.key;if(e.isSelectedCell(a,n)){const e=null!==(s=t.get(a))&&void 0!==s?s:{},n=i.config.field;o.Convert.isValue(n)&&0==e.hasOwnProperty(n)&&(e[n]=i.getValue(r),t.set(a,e))}}))})),Array.from(t.values())}mergeAggregates(){const e=this.mergeToolAggregates(this.panelAlign.left),t=this.mergeToolAggregates(this.panelAlign.center),r=this.mergeToolAggregates(this.panelAlign.right);return[].concat(e,t,r)}}},3455:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RowItem=t.GridView=void 0;const i=r(109),o=r(1880),s=r(510),a=r(3396),l=r(9402),u=r(5643),c=r(8154),h=r(1374),d=r(7392),f=r(4683),p=r(6328),m=r(4072),g=r(2271);class v extends s.DataView{constructor(e){(e=d.GridParser.parseConfig(e)).dataSource instanceof i.DataSource?super(e.dataSource):super(void 0),this._updateIndex=0,this._setConfig(e),this.dataSource.pageOnly=0==this.config.virtualRow}setConfig(e){(e=d.GridParser.parseConfig(e)).dataSource instanceof i.DataSource&&(super.publisher=e.dataSource),this._setConfig(e),this.clearRows(),this.dataSource.pageOnly=0==this.config.virtualRow}_setConfig(e){this._config=e,e.dataSource instanceof i.DataSource?this.dataSource.setConfig(e.dataSource.config):this.dataSource.setConfig(e.dataSource),this.dataSource.onPrepareRequest=(e,t)=>v.prepareRequest(this,this.config,e,t),1==this._config.groupable&&a.Convert.isNull(this.dataConfig.groups)&&(this.dataConfig.groups=[])}get lock(){var e;return null!==(e=this._lock)&&void 0!==e?e:this._lock=new a.Lock}static prepareRequest(e,t,r,n){var i,o;a.Convert.isValue(null==r?void 0:r.groups)&&(r.groups.forEach((e=>{e.showFooter=!1,a.Arrays.bfsAction(t.columns,(t=>{var r,n;let i;if(t.groups instanceof Array&&(i=e.field==t.field?t.groups:t.groups.filter((t=>{var r;return"*"==t.group||(null===(r=t.group)||void 0===r?void 0:r.split(",").indexOf(e.field))>=0}))),(null===(r=t.groupTitle)||void 0===r?void 0:r.aggregates)instanceof Array){const r={group:e.field,field:e.field,aggregates:[].concat(t.groupTitle.aggregates)};i=(null!=i?i:[]).concat(r)}if(a.Convert.isValue(i)){const t=null!==(n=e.aggregates)&&void 0!==n?n:e.aggregates=[];for(const r of i)if(!a.Convert.isEmpty(r.aggregates)){for(const e of r.aggregates)t.some((t=>f.Aggregate.aggregateEquals(t,e)))||t.push(e);a.Convert.isValue(r.footer)&&(e.showFooter=!0)}}return t.columns}))})),h.Log.debug((()=>["GridView.prepareRequest",r.groups]))),0==t.virtualRow&&(n.pageNo=e.pageNo),a.Convert.isValue(null===(i=r.tree)||void 0===i?void 0:i.parent)&&a.Convert.isValue(null===(o=r.tree)||void 0===o?void 0:o.master)&&(n.parentField=r.tree.parent)}get config(){return this._config}get dataConfig(){return this.dataSource.config}get pageSize(){return this.dataSource.pageSize}get topRow(){var e;return null!==(e=this._topRow)&&void 0!==e?e:this._topRow=0}set topRow(e){if(this.config.virtualRow||0==this.dataConfig.serverPaging)e=Math.min(Math.max(e,0),this.rowCount);else{const t=this.pageNo*this.pageSize;e=Math.min(Math.max(e,t),t+this.pageSize-1)}this._topRow=e,this._pageNo=Math.trunc(e/this.dataSource.pageSize)}get topCol(){var e;return null!==(e=this._topCol)&&void 0!==e?e:this._topCol=0}set topCol(e){e=Math.max(e,0),this._topCol=e}get serverPaging(){return this.dataConfig.serverPaging}get virtualColumn(){return!0===this.config.virtualColumn}get virtualRow(){return!0===this.config.virtualRow}get pageRow(){return!1===this.virtualRow}set virtualRow(e){this.config.virtualRow!=e&&(this.config.virtualRow,this.dataSource.loader.clearRows(),this.clearRows(),this.fireCommandAsync(this,new c.RefreshCommand))}get pageNo(){var e;return null!==(e=this._pageNo)&&void 0!==e?e:this._pageNo=0}get loader(){return this.dataSource.loader}get rows(){var e;return null!==(e=this._rows)&&void 0!==e?e:this._rows=[]}get openCount(){var e;return null!==(e=this._openCount)&&void 0!==e?e:this._openCount=0}set openCount(e){this._openCount=e}get rowCount(){var e,t,r;return this.listMode&&0==this.virtualRow&&this.dataConfig.serverPaging?null!==(t=null===(e=this.dataSource.getBoxes(this.dataSource.request,this.pageNo))||void 0===e?void 0:e.length)&&void 0!==t?t:0:(null!==(r=this.openCount)&&void 0!==r?r:0)+this.dataSource.loader.nodeCount}get total(){return this.listMode?this.dataSource.total:this.rowCount}get listMode(){return this.loader instanceof m.ListLoader}get pagerMode(){let e=g.PagerMode.Page;return this.listMode||(e=g.PagerMode.Row),this.virtualRow,e}get stickyKeys(){var e;return null!==(e=this._stickyKeys)&&void 0!==e?e:this._stickyKeys=new Set}get checkKeys(){var e;return null!==(e=this._checkKeys)&&void 0!==e?e:this._checkKeys=new Set}get selectKeys(){var e;return null!==(e=this._selectKeys)&&void 0!==e?e:this._selectKeys=new Set}get stickyRowsMap(){var e;return null!==(e=this._stickyRowsMap)&&void 0!==e?e:this._stickyRowsMap=new Map}get editKeyMap(){var e;return null!==(e=this._editKeyMap)&&void 0!==e?e:this._editKeyMap=new Map}get loadingKeys(){var e;return null!==(e=this._loadingKeys)&&void 0!==e?e:this._loadingKeys=new Set}get stickyRow(){var e;return null!==(e=this.config.stickyRow)&&void 0!==e&&e}get stickyFooter(){var e;return null!==(e=this.config.stickyFooter)&&void 0!==e&&e}get stickyHeader(){var e;return null!==(e=this.config.stickyHeader)&&void 0!==e&&e}get stickyInsert(){var e;return null!==(e=this.config.stickyInsert)&&void 0!==e&&e}get stickyUpdate(){var e;return null!==(e=this.config.stickyUpdate)&&void 0!==e&&e}get stickyDelete(){var e;return null!==(e=this.config.stickyDelete)&&void 0!==e&&e}get stickyModify(){var e;return null!==(e=this._stickyModify)&&void 0!==e?e:this._stickyModify=this.stickyInsert||this.stickyDelete||this.stickyUpdate}isEdit(e,t=void 0){return a.Convert.isNull(e)?(this.editKeyMap.clear(),!1):a.Convert.isNull(t)?this.editKeyMap.has(e.key):(!0===t?this.editKeyMap.set(e.key,a.Convert.cloneData(e.data)):this.editKeyMap.delete(e.key),t)}isLoading(e,t){if(a.Convert.isNull(t))return this.loadingKeys.has(e);const r=this.loadingKeys.size;!0===t?this.loadingKeys.add(e):this.loadingKeys.delete(e),r!=this.loadingKeys.size&&this.fireCommandAsync(this,new l.LoadingCommand(this.loadingKeys.size>0))}clearEdit(){this.editKeyMap.clear()}get detailContextMap(){var e;return null!==(e=this._detailContextMap)&&void 0!==e?e:this._detailContextMap=new Map}get detailTemplateMap(){var e;return null!==(e=this._detailTemplateMap)&&void 0!==e?e:this._detailTemplateMap=new Map}get detailInitMap(){var e;return null!==(e=this._detailInitMap)&&void 0!==e?e:this._detailInitMap=new Map}static getSetMap(e,t,r,n){if(n||a.Convert.isValue(r))a.Convert.isNull(r)?e.delete(t):e.set(t,r);else if(a.Convert.isNull(r))return e.get(t);return r}detailContext(e,t,r){return v.getSetMap(this.detailContextMap,e,t,r)}detailInit(e,t,r){return v.getSetMap(this.detailInitMap,e,t,r)}detailTemplate(e,t,r){const n="string"==typeof t?a.Utils.createTemplate(t):t;return v.getSetMap(this.detailTemplateMap,e,n,r)}setRowStatus(e,t){const r=this.rows[e];if(a.Convert.isNull(r))throw Error(`rowIndex(=${e}) has no value`);r.status=t}getStickyRows(e=!1,t=!1){const r=[];if(e)for(const e of this.editKeyMap.keys()){if(this.stickyKeys.has(e))continue;const t=this.map(e);a.Convert.isNull(t)||r.push(t)}if(t){const e=this.dataSource.getModifiedKeys(this.stickyInsert,this.stickyUpdate,this.stickyDelete);for(const t of e){if(this.stickyKeys.has(t))continue;const e=this.map(t);a.Convert.isNull(e)||r.push(e)}}for(const e of this.stickyKeys){const t=this.map(e);a.Convert.isNull(t)||r.push(t)}return f.Sorting.sort(r,p.SortDir.Asc,(e=>e.node.treeIndex)),r}isEditRow(e){var t;return null!==(t=this.editKeyMap.has(e))&&void 0!==t&&t}keysToRows(e){const t=[];for(const r of e){const e=this.map(r);a.Convert.isNull(e)||t.push(e)}return t}getSelectedKeys(){return Array.from(this.selectKeys.keys())}getSelectedRows(){return this.keysToRows(this.selectKeys.keys())}getCheckedRows(){return this.keysToRows(this.checkKeys.keys())}getCheckedKeys(){return Array.from(this.checkKeys.keys())}isStickyModified(e){if(0==this.stickyModify)return!1;const t=this.dataSource.deleteMap.has(e),r=this.dataSource.insertMap.has(e),n=!!this.stickyUpdate&&this.dataSource.updateMap.has(e);return this.stickyInsert&&r&&!t||this.stickyDelete&&t&&!r||n&&!r&&!t}isStickyRow(e){return this.stickyKeys.has(e)}isCheckRow(e,t=void 0){if(a.Convert.isNull(t))return this.checkKeys.has(e);1==t?this.checkKeys.has(e)||this.checkKeys.add(e):this.checkKeys.has(e)&&this.checkKeys.delete(e)}isSelectRow(e,t=void 0){if(a.Convert.isNull(t))return this.selectKeys.has(e);1==t?this.selectKeys.has(e)||this.selectKeys.add(e):this.selectKeys.has(e)&&this.selectKeys.delete(e)}addStickyRow(e){const t=e.key;this.stickyKeys.has(t)||this.isStickyModified(t)||(this.stickyKeys.add(e.key),this.addStickyRowsMap(e),this.adjustStickyRows(e))}addStickyRowsMap(e){let t=e.parent;for(;a.Convert.isValue(t);){const r=t.key;0==this.stickyRowsMap.has(r)&&this.stickyRowsMap.set(r,[]);const n=this.stickyRowsMap.get(r);0==n.some((t=>t.key==e.key))&&n.push(e),t=t.parent}}adjustStickyRows(e){let t=e.parent;for(;a.Convert.isValue(t);)0==t.isOpen&&(this.rows.splice(t.rowIndex),h.Log.debug((()=>["adjustStickyRows",t,[].concat(this.rows)]))),t=t.parent}removeStickyRow(e){const t=e.key;if(0==this.stickyKeys.has(t))return;this.stickyKeys.delete(t);let r=e.parent;for(;a.Convert.isValue(r);){const t=r.key;if(this.stickyRowsMap.has(t)){const r=this.stickyRowsMap.get(t),n=r.indexOf(e);n>=0&&(r.splice(n,1),a.Convert.isEmpty(r)&&this.stickyRowsMap.delete(t))}r=r.parent}this.adjustStickyRows(e)}get keyMap(){var e;return null!==(e=this._keyMap)&&void 0!==e?e:this._keyMap=new Map}map(e,t){if(!a.Convert.isNull(e))return a.Convert.isNull(t)?this.keyMap.get(e):(this.keyMap.set(e,t),t)}search(){return n(this,void 0,void 0,(function*(){const e=this.dataSource.changeLoader();if(h.Log.debug((()=>["GridView.search.changeLoader",e])),h.Log.time("GridView.search"),yield this.dataSource.search(),e)this.ensureRows(!1);else if(this.openCount=v.reorderRows(this.rows,0,this.rowCount,this.dataConfig.groups,this.dataConfig.orders,!(this.dataSource.loader instanceof m.ListLoader)),0==this.rows.length)for(const e of this._keyMap.values())e.rowIndex=void 0;h.Log.timeEnd("GridView.search"),this.fireCommandAsync(this,new c.RefreshCommand)}))}setPageNo(e){return n(this,void 0,void 0,(function*(){this.dataSource.changed,this.dataSource.clearSaveData(),this.pageNo!=e&&(e*this.pageSize>this.dataSource.total||(this._pageNo=e,this.topRow=e*this.pageSize,yield this.loadPage(e),this.fireCommandAsync(this,new c.RefreshCommand)))}))}loadPage(e){return n(this,void 0,void 0,(function*(){const t=0==this.config.virtualRow||this.dataConfig.serverPaging&&0==this.dataConfig.serverGrouping&&a.Convert.isValue(this.dataConfig.groups),r=this.topRow;try{this.isLoading("",!0);const n=yield this.dataSource.load(e);t?(this.clearRows(!0),this.assignRows(void 0,n,0),this.config.virtualRow?this._topRow=r:this.topRow=0):0==this.config.virtualRow&&(this.topRow=0)}finally{this.isLoading("",!1)}}))}ensureRowsByKeys(e){return n(this,void 0,void 0,(function*(){if(a.Convert.isValue(e)){const t=e[e.length-1].key;let r,n=e[0].index,i=-1;for(;a.Convert.isValue(r=yield this.getRow(n++));)if(r.key==t){if(i=r.node.level,r.node instanceof u.ParentNode==0)break}else if(0<=i&&i<=r.node.level)break}}))}doCommand(e,t){switch(t.command){case o.Commands.Loaded:return this.loaded(t),!0;case o.Commands.Rebuild:this.rebuild(t);default:return super.doCommand(e,t)}return!0}rebuild(e){h.Log.debug((()=>[this.name+".rebuild"]));const t=d.GridParser.parseConfig(this.config);this._setConfig(t),this.fireCommandAsync(this,new c.RefreshCommand)}rebuildColumns(){var e,t;return n(this,void 0,void 0,(function*(){0==this.rowCount&&(yield this.prepareRows()),null!==(e=(t=this.config).columns)&&void 0!==e||(t.columns=[]);let r=0;for(const e in this.rows){const t=this.rows[e],n=null==t?void 0:t.data;for(const e in n){if(e==i.DataSource._keyName)continue;if(this.config.columns.some((t=>t.field==e)))continue;const t=n[e],r={field:e,dataType:typeof t};this.config.columns.push(r)}if(r++>=10)break}}))}save(e){return n(this,void 0,void 0,(function*(){e=null!=e?e:this.dataSource.getSaveData(),a.Convert.isNull(e)||a.Convert.isEmpty(e.inserted)&&a.Convert.isEmpty(e.deleted)&&a.Convert.isEmpty(e.updated)?h.Log.info("저장할 데이터가 없습니다."):(yield this.dataSource.save(e),yield this.reload(),this.fireCommandAsync(this,new c.RefreshCommand))}))}clearRows(e=!1){this.rows.splice(0),this.keyMap.clear(),this.editKeyMap.clear(),this.checkKeys.clear(),this.detailContextMap.clear(),this.detailTemplateMap.clear(),this.detailInitMap.clear(),this.stickyKeys.clear(),this.stickyRowsMap.clear(),this._openCount=0,0==e&&(this._pageNo=0,this._topRow=0)}reload(e){return n(this,void 0,void 0,(function*(){h.Log.debug((()=>"gridView.reload")),this.clearRows(),this.dataSource.reload(),yield this.prepareRows()}))}ensureRows(e=!0){return n(this,void 0,void 0,(function*(){this.clearRows(0==this.config.virtualRow),h.Log.time("ensureRows"),this.openCount=0;let t,r=0;for(;a.Convert.isValue(t=yield this.getRow(r++,e)););h.Log.timeLog("ensureRows","getRow after"),this.stickyRowsMap.clear(),this.stickyKeys.size>0&&(yield this.ensureStickyRows(this.rows)),this.calculateRows(),h.Log.timeLog("ensureRows","calculateRows after"),h.Log.timeEnd("ensureRows")}))}ensureStickyRows(e){var t,r;return n(this,void 0,void 0,(function*(){for(const n in e){const i=e[n];if(!(i.node instanceof u.ParentNode))continue;if((null!==(r=null===(t=i.items)||void 0===t?void 0:t.length)&&void 0!==r?r:0)>0)continue;let o=yield this.dataSource.loader.getRows(i.node,0,!0);if(!a.Convert.isEmpty(o)){for(let e=0,t=o.length;e<t;e++){if(a.Convert.isNull(o[e]))continue;const t=o[e],r=y.create(this,i,t,e);r.isSticky&&this.addStickyRowsMap(r)}yield this.ensureStickyRows(i.items)}}}))}loadItems(e){for(const t in e){const r=e[t];if(a.Convert.isEmpty(r.items)){const e=r.node;if(e instanceof u.ParentNode){const t=[].concat(e.nodes);e.hasFooter&&t.push(e.footer);for(const e of t){const t=y.create(this,r,e,this.rows.length);r.items.push(t)}this.loadItems(r.items)}}}}loaded(e){return n(this,void 0,void 0,(function*(){h.Log.debug((()=>["loaded",e])),yield this.ensureRows()}))}loadNodes(e,t){h.Log.debug((()=>[`loadNodes : ${this.rows.length} + ${e.length}`]));let r=e.length;for(let n=0;n<e.length;n++){const i=e[n],o=y.create(this,t,i,this.rows.length);if(o.rowIndex=this.rows.length,this.rows.push(o),i instanceof u.ParentNode&&i.isOpen){o.isOpen=!0;const e=[].concat(i.nodes);i.hasFooter&&e.push(i.footer);let t=this.loadNodes(e,o);o.internalOpenCount=t,r+=t}}return r}prepareRows(){return n(this,void 0,void 0,(function*(){this.rowCount>0||(yield this.loadPage(this.pageNo),yield this.ensureRows())}))}getRow(e,t=!1){return n(this,void 0,void 0,(function*(){try{if(null!=e||(e=0),a.Convert.isValue(this.rowCount)&&e>=this.rowCount&&0!=this.rowCount)return;let r=this.rows[e];if(a.Convert.isNull(r)){if(a.Convert.isEmpty(this.rows)||e<this.rowCount)try{this.isLoading("",!0),r=yield this.findRow(e,t&&a.Convert.isValue(this.rowCount))}finally{this.isLoading("",!1)}a.Convert.isValue(r)&&(this.rows[e]=r,yield this.adjustParentNode(r,e),this.map(r.key,r))}return r}finally{}}))}adjustParentNode(e,t){return n(this,void 0,void 0,(function*(){if((null==e?void 0:e.node)instanceof u.ParentNode)if(e.level!=e.node.level);else if(e.isParentsOpen&&0==this.dataConfig.lazyLoading&&(e.node.isOpen&&e.isClose||e.isOpen&&0==e.itemCount))e.isOpen=!1,yield this.openRowItem(e);else if(e.isClose&&0==e.openCount){const r=e.stickyRows;r.length>0&&(this.openCount+=r.length,v.insertStickyRows(this.rows,e,r,t+1))}}))}findRow(e,t=!1){var r,i;return n(this,void 0,void 0,(function*(){if(a.Convert.isEmpty(e))return void h.Log.warn((()=>"rowIndex is empty"));let n=this.findPrevRow(e);if(a.Convert.isNull(n)){const r=this.pageOnly?this.pageNo*this.pageSize:0;let n=yield this.dataSource.loader.getRows(void 0,r+e,t);if(a.Convert.isNull(n)||0==n.length)return;return this.assignRows(void 0,n,e)}let o=e-n.rowIndex,s=o-1;for(;a.Convert.isValue(n);){if(n.isOpen){let e=n.itemCount;if(a.Convert.isNull(e))break;if(e>s)break;a.Convert.isValue(n.parent)&&a.Convert.isValue(n.itemCount)&&n.itemCount!=n.items.length&&(o-=n.itemCount-n.items.length)}else if(n.isSticky)n.level==n.node.level?null!==(i=null===(r=n.parent)||void 0===r?void 0:r.isClose)&&void 0!==i&&i&&(n=n.parent):n.level<n.node.level&&(n=n.parent);else{const e=n.stickyRows;if(e.length>s)return e[s]}s=n.node.index+o,n=n.parent}let l=yield this.dataSource.loader.getRows(null==n?void 0:n.node,s,t);return this.assignRows(n,l,e)}))}static insertStickyRows(e,t,r,n){const i=r.length;t.internalOpenCount=i;const o=e.splice(n);for(let o=0;o<i;o++){const i=r[o];i.parent=t,i.rowIndex=o+n,e[o+n]=i}h.Log.debug((()=>{var e;return[`insertStickyRows rowIndex=[${t.rowIndex}] [${t.node instanceof u.GroupNode?t.node.groupKey:null===(e=t.node.key)||void 0===e?void 0:e.toString()}]`,r,o]}));for(const t in o){const r=o[t];r.rowIndex+=i,e[r.rowIndex]=r}}assignRows(e,t,r){h.Log.debug({f:"assignRows",rowIndex:r,parent:e,items:[].concat(t),rows:[].concat(this.rows)}),h.Log.time("assignRows");for(let n=0,i=t.length;n<i;n++){const i=t[n];if(a.Convert.isNull(i))continue;let o=n+r;this.rows[o]=y.create(this,e,i,o)}h.Log.timeEnd("assignRows");return this.rows[r]}findPrevRow(e){var t;let r;const n=this.dataConfig.pageSize;for(let t=1;t<n&&!(e-t<0)&&(r=this._rows[e-t],!a.Convert.isValue(r));t++);if(a.Convert.isNull(r))for(const n of this.rows.keys()){if(e<n)break;r=null!==(t=this.rows[n])&&void 0!==t?t:r}return r}get toggleRowLock(){var e;return null!==(e=this._toggleRowLock)&&void 0!==e?e:this._toggleRowLock=new a.Lock}toggleRow(e,t){return n(this,void 0,void 0,(function*(){let r=this.map(e);if(a.Convert.isNull(r))return!1;try{if(yield this.toggleRowLock.acquire(),r.loading)return!1;r=this.map(e);const n=r.rowIndex;r.loading=!0,null!=t||(t=!r.isOpen);let i=t?yield this.openRowItem(r):yield this.closeRowItem(r);if(r.isOpen&&0==this.virtualRow){let e=n+1,t=e+r.openCount;for(;a.Convert.isValue(yield this.getRow(e++))&&e<t;);}return i}finally{yield this.toggleRowLock.release(),r=this.map(e),a.Convert.isValue(r)&&(r.loading=!1),this.fireCommandAsync(this,new c.RefreshCommand)}}))}toggleDetail(e,t){return n(this,void 0,void 0,(function*(){let r=this.map(e);if(a.Convert.isNull(r))return!1;null!=t||(t=!r.isDetail),r.isDetail=t,this.fireCommandAsync(this,new c.RefreshCommand)}))}toggleStickyRow(e){return n(this,void 0,void 0,(function*(){let t=yield this.map(e);return!a.Convert.isNull(t)&&(t.isSticky=!t.isSticky,!0)}))}openRow(e){return n(this,void 0,void 0,(function*(){let t=yield this.getRow(e);if(a.Convert.isNull(t)||t.isOpen)return!1;let r=yield this.openRowItem(t);return this.fireCommandAsync(this,new c.RefreshCommand({rowStart:e,rowEnd:!0===r?void 0:e})),r}))}get openRowItemLock(){var e;return null!==(e=this._openRowItemLock)&&void 0!==e?e:this._openRowItemLock=new a.Lock}openRowItem(e){return n(this,void 0,void 0,(function*(){try{if(yield this.openRowItemLock.acquire(),a.Convert.isNull(e)||e.isOpen)return!1;if(e.node instanceof u.ParentNode==0)return!1;if(0==e.isParentsOpen)return!1;let t=e.node;if(a.Convert.isNull(t))return!1;e.rowIndex;if(e.isOpen=!0,e.openCount>e.stickyRows.length)return;let r=this.openCount,n=yield this.getOpenCount(e);if(0==n)return t.isLeaf=!0,e.isOpen=!1,t.nodeCount=0,!1;if(e.openCount==n)return!1;const i=e.openCount;e.openCount=n,r+=n-i,this.openCount=r;let o=this.rows.splice(e.rowIndex+1);for(let e in o){let t=o[e];a.Convert.isNull(t)||0<i&&a.Convert.asInt(e)<i||(t.rowIndex+=n-i,this.rows[t.rowIndex]=t)}return!0}finally{this.openRowItemLock.release()}}))}get pageOnly(){return 0==this.config.virtualRow}getOpenCount(e){return n(this,void 0,void 0,(function*(){if(e.node instanceof u.ParentNode){let t=e.itemCount;a.Convert.isNull(t)&&(yield this.dataSource.loader.getRows(e.node,0,!1),t=e.itemCount);for(const r of e.items.keys()){const n=e.items[r];a.Convert.isNull(n)||(t+=n.isOpen?yield this.getOpenCount(n):n.openCount)}return t}return 0}))}getOpenRows(e){return n(this,void 0,void 0,(function*(){e.rowIndex;const t=[];return e.node instanceof u.ParentNode&&a.Arrays.bfsAction(e.items,(e=>(t.push(e),e.isOpen?e.items:e.stickyRows))),t}))}closeRow(e){return n(this,void 0,void 0,(function*(){let t=yield this.getRow(e),r=yield this.closeRowItem(t);return this.fireCommandAsync(this,new c.RefreshCommand({rowStart:e})),r}))}closeRowItem(e){return n(this,void 0,void 0,(function*(){if(a.Convert.isNull(e)||e.isClose)return!1;if(e.node instanceof u.ParentNode==0)return!1;if(0==e.isParentsOpen)return!1;const t=e.rowIndex;e.isOpen=!1;let r=e.openCount;const n=e.stickyRows,i=n.length;if(e.openCount==i)return!1;const o=e.openCount;e.openCount=i;const s=this.rowCount;this.openCount-=r-i;let l=this.rows.splice(e.rowIndex+1);const d=t+r;v.insertStickyRows(this.rows,e,n,e.rowIndex+1);let f=t+i+1;for(let e in l){let t=l[e];a.Convert.isNull(t)||(t.rowIndex<=d?(t.isSticky,t.openCount=0):(t.rowIndex=f+a.Convert.asInt(e)-r,this.rows[t.rowIndex]=t))}return this.fireCommandAsync(this,e.isOpen?new c.OpenCommand(e.rowIndex):new c.CloseCommand(e.rowIndex)),h.Log.debug((()=>`closeRowItem: rowIndex=${e.rowIndex}, [${e.node instanceof u.GroupNode?e.node.groupKey:""}] openCount=[${o}->${r}], rows=[${s}->${this.rows.length}]`)),!0}))}loadRows(){return n(this,void 0,void 0,(function*(){h.Log.time("loadRows");let e=0,t=yield this.getRow(e);for(;a.Convert.isValue(t);)e++,t=yield this.getRow(e);h.Log.debug((()=>"testRows end")),this.fireCommandAsync(this,new c.RefreshCommand),h.Log.timeEnd("loadRows")}))}checkRows(){let e=0;for(const t in this.rows){const r=this.rows[t];a.Convert.asInt(t)!=e&&(h.Log.debug((()=>({key:t,rowNo:e,rows:[].concat(this.rows)}))),e=a.Convert.asInt(t)),r.isOpen,e++}h.Log.debug((()=>["checkRow",this.rowCount]))}static reorderRows(e,t,r,n,i,o){if(a.Convert.isNull(e)||0==e.length)return;if(e.length<r)return e.splice(0),0;h.Log.debug((()=>["reorderRows",[].concat(e)]));const s=e.filter((e=>a.Convert.isValue(e)&&a.Convert.isNull(e.parent)));h.Log.time("reorderItems"),this.reorderItems(s,s.length,n,i),h.Log.timeEnd("reorderItems"),h.Log.debug((()=>["sampLevelItems",s]));let l=-1;e.splice(0);return h.Log.time("reorderRows"),a.Arrays.dfsAction(s,(function(t){if(l++,a.Convert.isNull(t))return e[l]=void 0,[];if(t.rowIndex=l,e[l]=t,t.level==t.node.level&&t.isOpen&&t.itemCount==t.items.length&&t.isParentsOpen)return t.items;if(t.isClose){const r=t.stickyRows;return r.length>0&&(h.Log.debug((()=>["insertStickyRows",r])),v.insertStickyRows(e,t,r,l+1),l+=r.length),[]}return t.items.splice(0),t.internalOpenCount=0,[]})),h.Log.debug((()=>["reorderRows.after",[].concat(e)])),h.Log.timeEnd("reorderRows"),o?this.calcOpenCount(s)-s.length:0}static calcOpenCount(e){let t=e.length;for(const r of e)if(!a.Convert.isNull(r))if(r.isClose){const e=r.stickyRows.length;r.internalOpenCount=e,t+=e}else r.internalOpenCount=this.calcOpenCount(r.items),t+=r.openCount;return t}static reorderItems(e,t,r,n){if(!a.Convert.isNull(e)&&0!=e.length)if(e.length<t)e.splice(0);else{e.sort(((e,t)=>e.node.index-t.node.index));for(const t in e){const i=e[t];a.Convert.isNull(i)||this.reorderItems(i.items,i.itemCount,r,n)}}}static getNode(e){return e.node instanceof u.FooterNode?e.node.parent:e.node}static getParentNodes(e){const t=[e];let r=e.parent;for(;a.Convert.isValue(r);)t.push(r),r=r.parent;return t}calculateFields(e,t=!1){if(!a.Convert.isNull(e)&&0!=e.node.calcFields)for(const r of this.dataConfig.calculations){const n=null==r?void 0:r.field,i=null==r?void 0:r.eval;if(a.Convert.isEmpty(n)||a.Convert.isNull(i))continue;if(0==t&&e.calc.hasOwnProperty(n))continue;const o=f.Aggregate.calcFields(r,e.data);e.data[n]!==o&&e.node.setData(o,n),e.calc[n]=o}}calculateRows(){this.dataSource.loader.calcAggregates()}getValue(e,t=void 0){var r;return null===(r=this.rows[e])||void 0===r?void 0:r.getValue(t)}_setValue({key:e,value:t,field:r}){const n=this.map(e);if(a.Convert.isNull(n))return;a.Convert.isEmpty(r)&&(t=a.Convert.mergeData(n.data,t));const i=this.sameValue({key:e,value:t,field:r})?void 0:{key:e,undoValue:this.getValue(n.rowIndex,r),redoValue:t,field:r};return a.Convert.isValue(i)&&n.setValue(t,r)&&this.calculateFields(n,!0),i}sameValue(e){var t;const r=null===(t=this.map(e.key))||void 0===t?void 0:t.getValue(e.field);if(a.Convert.isValue(e.field))return r==e.value;const n=new Set;for(const e in r)n.add(e);for(const t in e.value)n.add(t);for(const t of n.values())if(r[t]!=e.value[t])return!1;return!0}setValue(e){const t=this._setValue(e);return a.Convert.isValue(t)&&this.calculateRows(),t}setValues(e){if(a.Convert.isEmpty(e))return[];const t=[];for(const r in e){const n=e[r],i=this._setValue(n);a.Convert.isValue(i)&&t.push(i)}return a.Convert.isValue(t)&&this.calculateRows(),t}insertValues(e,t,r=!1){return n(this,void 0,void 0,(function*(){if(a.Convert.isEmpty(t))return[];const n=[];this.beginUpdate();for(const o in t){const s=t[o],l=a.Convert.isValue(e)?i.InsertTo.Child:i.InsertTo.Last,u=yield this.insertRowItem(e,s.key,s.value,l,r);r?n.push({key:s.key,value:s.value}):n.push({key:u.key,value:u.box})}return this.endUpdate(),n}))}get updateIndex(){return this._updateIndex}beginUpdate(){this._updateIndex++,this.dataSource.beginUpdate()}endUpdate(){this._updateIndex--,this._updateIndex<0&&(this._updateIndex=0),this.dataSource.endUpdate(),this.calculateRows()}insertRowItem(e,t,r,o,s=!1){var l,c,h;return n(this,void 0,void 0,(function*(){if(s)return this.removeRowItem(e,t,r,o,!1);const n=this.map(t),d=a.Convert.isEmpty(e)?null==n?void 0:n.parent:this.map(e),f=null!==(c=null===(l=null==d?void 0:d.node)||void 0===l?void 0:l.nodeCount)&&void 0!==c?c:this.rows.length;let p=(r=null!=r?r:this.ensureRowData(d,n))instanceof u.DataBox?r:yield this.dataSource.newBox(null!=r?r:null==n?void 0:n.data);const m=yield this.dataSource.insertNode(null==d?void 0:d.node,null==n?void 0:n.node,p,o,s);if(0==this.dataSource.insertMap.has(p.key))return;let g=null==n?void 0:n.rowIndex;switch(o){case i.InsertTo.Before:break;case i.InsertTo.After:g+=1;break;case i.InsertTo.First:g=0;break;case i.InsertTo.Child:case i.InsertTo.Last:g=f+(null!==(h=(null==d?void 0:d.rowIndex)+1)&&void 0!==h?h:0)}a.Convert.isValue(d)&&(d.items.splice(m.index,0,void 0),d.openCount+=1,this.openCount+=1);let v=y.create(this,d,m,g);return this.insertToRowItem(o,v),v.resetLevel(),v}))}insertToRowItem(e,t){switch(e){case i.InsertTo.Before:case i.InsertTo.After:this.rows.splice(t.rowIndex,0,t),this.adjustRowIndex(t.rowIndex+1);break;case i.InsertTo.Last:this.rows.push(t),t.rowIndex=this.rows.length-1;break;case i.InsertTo.First:this.rows.splice(0,0,t),t.rowIndex=0,this.adjustRowIndex(1);break;case i.InsertTo.Child:this.rows.splice(t.rowIndex,0,t),this.adjustRowIndex(t.rowIndex+1)}}adjustRowIndex(e){let t;for(;a.Convert.isValue(t=this.rows[e]);)t.rowIndex=e,e++}ensureRowData(e,t){var r,n;let i;return a.Convert.isValue(t)?i=t.data:(null==e?void 0:e.node)instanceof u.ParentNode?i=e.node.nodes[e.node.nodes.length-1]:null===(r=this.rows[this.rows.length-1])||void 0===r||r.data,i=a.Convert.cloneData(i),(null===(n=this.dataConfig.schema)||void 0===n?void 0:n.add)&&(i=this.dataConfig.schema.add(i)),i}removeRowItem(e,t,r,i,o=!1){var s;return n(this,void 0,void 0,(function*(){if(o)return this.insertRowItem(e,t,null!=r?r:null===(s=this.map(t))||void 0===s?void 0:s.box,i,!1);if(this.dataSource.deleteMap.has(t))return;const n=this.map(t),l=a.Convert.isEmpty(e)?null==n?void 0:n.parent:this.map(e);if(a.Convert.isNull(n)&&a.Convert.isNull(l))return;let u=null!=r?r:null==n?void 0:n.box;const c=n.rowIndex;yield this.dataSource.removeNode(null==l?void 0:l.node,n.node,u,i,o);if(!this.dataSource.deleteMap.has(t)){this.rows.splice(c,1);for(let e=c,t=this.rowCount;e<t;e++)a.Convert.isNull(this.rows[e])||(this.rows[e].rowIndex=e);return this.isStickyModified(t)&&(n.isSticky=!1),this.rows[c]}}))}getGroupByField(e,t=!0){return n(this,void 0,void 0,(function*(){return yield this.dataSource.getGroupByField(e,t)}))}moveToRow(e,t,r){return n(this,void 0,void 0,(function*(){if(e.rowIndex==t.rowIndex+(r?0:1))return;const n=this.topRow;this.clearRows(!0),this.dataSource.moveToNode(e.node,t.node,r);let i=0;for(;i<=n;)yield this.getRow(i),i++}))}}t.GridView=v;class y{constructor(e,t,r,n){if(this._openCount=0,this.toString=()=>this.constructor.name+": "+(this.node instanceof u.GroupNode?this.node.data:this.node instanceof u.FooterNode?this.node.data.data:this.node.data),this._view=e,this._parent=t,this._node=r,this.rowIndex=n,this.isDetail=e.config.detailAutoOpen,1==this.isDetail&&(this._detailHeight=e.config.detailHeight),a.Convert.isEmpty(r.key))throw"key is empty";e.map(r.key,this),a.Convert.isValue(t)&&a.Convert.isValue(r)&&(t.items[r.index]=this)}static create(e,t,r,n){return new y(e,t,r,n)}get view(){return this._view}get status(){return this.view.dataSource.getStatus(this.node.box)}set status(e){this.view.dataSource.setStatus(this.node.box,e)}get isSelect(){var e;return null===(e=this._view)||void 0===e?void 0:e.isSelectRow(this.key)}set isSelect(e){var t;null===(t=this._view)||void 0===t||t.isSelectRow(this.key,e)}get isOpen(){var e;return this.node instanceof u.ParentNode&&(null!==(e=this._isOpen)&&void 0!==e?e:this._isOpen=!1)}set isOpen(e){this._isOpen!=e&&(this._isOpen=e,this.node instanceof u.ParentNode&&(this.node.isOpen=e))}get isParentsOpen(){let e=!0,t=this.parent;for(;e&&a.Convert.isValue(t);)e=t.isOpen,t=t.parent;return e}get detailContext(){return this.view.detailContext(this.key)}set detailContext(e){this.view.detailContext(this.key,e,!0)}get detailTemplate(){return this.view.detailTemplate(this.key)}set detailTemplate(e){this.view.detailTemplate(this.key,e,!0)}get detailInit(){return this.view.detailInit(this.key)}set detailInit(e){this.view.detailInit(this.key,e,!0)}get isClose(){return!this.isOpen}get isEdit(){return this.view.isEdit(this)}set isEdit(e){this.view.isEdit(this,e)}get isDetail(){var e;return null!==(e=this._isDetail)&&void 0!==e?e:this._isDetail=!1}set isDetail(e){this._isDetail=e}get box(){return this.node.box}get data(){var e;return null===(e=this.node)||void 0===e?void 0:e.data}get originData(){var e;return null===(e=this.node)||void 0===e?void 0:e.originData}get calc(){var e;return null===(e=this.node)||void 0===e?void 0:e.calc}get node(){return this._node}get temp(){return this.isEdit?this.view.editKeyMap.get(this.key):{}}get rowIndex(){return this._rowIndex}set rowIndex(e){this._rowIndex=e}get index(){var e;return null===(e=this.node)||void 0===e?void 0:e.index}get key(){var e;return null===(e=this.node)||void 0===e?void 0:e.key}get itemCount(){const e=this.node;return e instanceof u.ParentNode&&a.Convert.isValue(e.nodeCount)?e.nodeCount+(e.nodeCount>0&&e.hasFooter?1:0):void 0}get openCount(){var e;return null!==(e=this._openCount)&&void 0!==e?e:this._openCount=0}set openCount(e){var t,r;if(this._openCount==e)return;let n=this.parent;if(this._openCount=e,a.Convert.isValue(n)){if(n.isClose)return void(n.openCount=n.stickyRows.length);let e=null!==(t=n.itemCount)&&void 0!==t?t:0;for(const t in n.items){e+=null!==(r=n.items[t].openCount)&&void 0!==r?r:0}n.openCount=e}}get internalOpenCount(){return this._openCount}set internalOpenCount(e){this._openCount=e}get parent(){return this._parent}set parent(e){var t;if(this._parent!=e){if(this===e)throw"parent is this";this._level=(null!==(t=null==e?void 0:e.level)&&void 0!==t?t:-1)+1,this._parent=e}}get items(){var e;return null!==(e=this._items)&&void 0!==e?e:this._items=[]}get level(){var e,t,r;return null!==(e=this._level)&&void 0!==e?e:this._level=(null!==(r=null===(t=this.parent)||void 0===t?void 0:t.level)&&void 0!==r?r:-1)+1}get rowHeight(){var e;return null!==(e=this._rowHeight)&&void 0!==e?e:0}get detailHeight(){var e;return null!==(e=this._detailHeight)&&void 0!==e?e:0}get height(){var e,t;return(null!==(e=this._rowHeight)&&void 0!==e?e:0)+(this.isDetail&&null!==(t=this._detailHeight)&&void 0!==t?t:0)}get reorderable(){return 0==(this.node instanceof u.GroupNode||this.node instanceof u.FooterNode)}resetLevel(){this._level=void 0}isDroppable(e){let t=a.Convert.isValue(e)&&e.node instanceof u.FooterNode==0;if(t&&e.node instanceof u.ParentNode){const r=this.node;let n=e.node;for(;a.Convert.isValue(n=n.parent);)if(n==r){t=!1;break}if(t&&e.node instanceof u.GroupNode){const r=[].concat(this.view.dataConfig.groups).reverse()[0];t=e.node.igroup.field==r.field}}return t}setHeight(e,t){let r=!1,n=!1;return a.Convert.isValue(e)&&(r=this._rowHeight!=e,r&&(this._rowHeight=e)),a.Convert.isValue(t)&&(n=this._rowHeight!=e,n&&(this._detailHeight=t)),r||n}get isSticky(){return this._view.isStickyRow(this.key)}set isSticky(e){1==e?this._view.addStickyRow(this):this._view.removeStickyRow(this)}get isCheck(){var e;return null===(e=this._view)||void 0===e?void 0:e.isCheckRow(this.key)}set isCheck(e){var t;null===(t=this._view)||void 0===t||t.isCheckRow(this.key,e)}getValue(e=void 0){var t,r;return a.Convert.isEmpty(e)?this.data:(null===(t=this.data)||void 0===t?void 0:t.hasOwnProperty(e))?this.data[e]:(null===(r=this.calc)||void 0===r?void 0:r.hasOwnProperty(e))?this.calc[e]:void 0}setValue(e,t=void 0){return this.node.setData(e,t)}get stickyRows(){var e;const t=null!==(e=this._view.stickyRowsMap.get(this.key))&&void 0!==e?e:[];for(const e of[].concat(t)){if(this._view.stickyKeys.has(e.key))continue;const r=t.findIndex((t=>t==e));r>=0&&t.splice(r,1)}return f.Sorting.sort(t,p.SortDir.Asc,(e=>e.node.treeIndex)),t}get cssClass(){var e;return null!==(e=this._cssClass)&&void 0!==e?e:this._cssClass=[]}setTemp(e,t){0!=this.isEdit&&(this.temp[e]=t)}get loading(){return this.view.isLoading(this.key)}set loading(e){this.view.isLoading(this.key,e)}}t.RowItem=y,y._gIndex=0},4772:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StatusPanelAlign=t.CaptionRender=t.PanelLayout=t.LayoutFlex=t.PanelFactory=t.getDefaultPanges=t.PanelType=void 0;const i=r(3396),o=r(3211),s=r(5677),a=r(5838),l=r(2271),u=r(4202),c=r(7074);var h;!function(e){e.Title="title",e.Tool="tool",e.Group="group",e.Pager="pager",e.Scroll="scroll",e.Hidden="hidden",e.Loading="loading",e.Status="status",e.Caption="caption",e.Filter="filter",e.Header="header",e.Body="body",e.Footer="footer"}(h||(t.PanelType=h={}));const d=[h.Hidden,h.Title,h.Tool,h.Group,h.Scroll,h.Pager,h.Status,h.Loading];t.getDefaultPanges=function(){return d};t.PanelFactory=class{static getDefaultPanges(){return d}static create(e,t){switch(t){case h.Title:return new s.TitlePanel(e);case h.Tool:return new s.ToolPanel(e);case h.Group:return new s.GroupPanel(e);case h.Scroll:return new a.ScrollPanel(e);case h.Pager:return new s.PagerPanel(e);case h.Hidden:return new s.HiddenPanel(e);case h.Status:return new s.StatusPanel(e);case h.Filter:return new a.FilterPanel(e);case h.Loading:return new s.LoadingPanel(e);default:return new s.GridPanel(e,"")}}};class f{get grid(){return this._grid}get leftFlex(){var e,t,r,n;return i.Convert.isNull(this._leftFlex)&&(this._leftFlex={flexGrow:null===(e=this.config.leftFlex)||void 0===e?void 0:e.flexGrow,flexShrink:null===(t=this.config.leftFlex)||void 0===t?void 0:t.flexShrink,align:null!==(n=null===(r=this.config.leftFlex)||void 0===r?void 0:r.align)&&void 0!==n?n:o.TextAlign.Left}),this._leftFlex}get centerFlex(){var e,t,r,n;return i.Convert.isNull(this._centerFlex)&&(this._centerFlex={flexGrow:null===(e=this.config.centerFlex)||void 0===e?void 0:e.flexGrow,flexShrink:null===(t=this.config.centerFlex)||void 0===t?void 0:t.flexShrink,align:null!==(n=null===(r=this.config.centerFlex)||void 0===r?void 0:r.align)&&void 0!==n?n:o.TextAlign.Center}),this._centerFlex}get rightFlex(){var e,t,r,n;return i.Convert.isNull(this._rightFlex)&&(this._rightFlex={flexGrow:null===(e=this.config.rightFlex)||void 0===e?void 0:e.flexGrow,flexShrink:null===(t=this.config.rightFlex)||void 0===t?void 0:t.flexShrink,align:null!==(n=null===(r=this.config.rightFlex)||void 0===r?void 0:r.align)&&void 0!==n?n:o.TextAlign.Right}),this._rightFlex}get config(){var e;return null!==(e=this._config)&&void 0!==e?e:this._config={}}constructor(e,t){this._grid=e,this._config=t}}t.LayoutFlex=f;class p extends f{constructor(e,t){super(e,t)}get left(){var e;return null!==(e=this._left)&&void 0!==e?e:this._left=p.ensureTools(this.grid,this.config.left)}get center(){var e;return null!==(e=this._center)&&void 0!==e?e:this._center=p.ensureTools(this.grid,this.config.center)}get right(){var e;return null!==(e=this._right)&&void 0!==e?e:this._right=p.ensureTools(this.grid,this.config.right)}static ensureTools(e,t){const r=new Array;if(0==i.Convert.isNull(t))for(let n of t)"function"==typeof n?r.push(new l.ToolCustom(e,n)):r.push(u.ToolFactory.create(e,n));return r}}t.PanelLayout=p;t.CaptionRender=class extends f{constructor(e,t){super(e,t)}render(e,t){return n(this,void 0,void 0,(function*(){yield this.renderToolAlign(e,this.config.left,this.config.leftFlex,"align-left",t),yield this.renderToolAlign(e,this.config.center,this.config.centerFlex,"align-center",t),yield this.renderToolAlign(e,this.config.right,this.config.rightFlex,"align-right",t)}))}renderToolAlign(e,t,r,o,s){return n(this,void 0,void 0,(function*(){if(i.Convert.isEmpty(t))return void i.JqUtils.removeElement(e,`>div#${o}`);let n=i.JqUtils.adjustElement(e,`>div#${o}`,`<div id='${o}' class='${c.SbCss.tools} ${c.SbCss.align} ${c.SbCss.toClass(r.align)}'></div>`);if(i.Convert.isValue(r.flexGrow)||i.Convert.isValue(r.flexShrink)){const e=`${i.Convert.isValue(r.flexGrow)?"flex-grow: "+r.flexGrow+"; ":""} ${i.Convert.isValue(r.flexShrink)?"flex-shrink: "+r.flexShrink+"; ":""}`;i.JqUtils.changeAttr(n,"style",e)}const a=new Set;for(const e of t.keys()){const r=t[e];s(n,r,e,a)}i.JqUtils.movetoTrash(this.grid.trashCan,n,a)}))}};t.StatusPanelAlign=class extends p{constructor(e){super(e,void 0),this.__config=this.grid.config.statusBar}get left(){if(i.Convert.isNull(this._left)&&(this._left=new Array,0==i.Convert.isNull(this.__config.left)&&this.__config.left instanceof Array))for(let e of this.__config.left)"string"==typeof e?this._left.push(u.ToolFactory.create(this._grid,e)):this._left.push(new l.ToolStatus(this._grid,e));return this._left}get center(){if(i.Convert.isNull(this._center)&&(this._center=new Array,0==i.Convert.isNull(this.__config.center)&&this.__config.center instanceof Array))for(let e of this.__config.center)"string"==typeof e?this._center.push(u.ToolFactory.create(this._grid,e)):this._center.push(new l.ToolStatus(this._grid,e));return this._center}get right(){if(i.Convert.isNull(this._right)&&(this._right=new Array,0==i.Convert.isNull(this.__config.right)&&this.__config.right instanceof Array))for(let e of this.__config.right)"string"==typeof e?this._right.push(u.ToolFactory.create(this._grid,e)):this._right.push(new l.ToolStatus(this._grid,e));return this._right}}},7755:function(e,t,r){"use strict";var n=r(9755),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RowReorder=t.ColumnReorder=void 0;const o=r(7134),s=r(3211),a=r(1700),l=r(1374),u=r(3396),c=r(4772),h=r(3988),d=r(7074);t.ColumnReorder=class{get grid(){return this._grid}get jqTargetCol(){return this._jqTargetCol}set jqTargetCol(e){this._jqTargetCol=e}get jqFromCol(){return this._jqFromCol}set jqFromCol(e){this._jqFromCol=e}get isBefore(){return this._isBefore}set isBefore(e){this._isBefore=e}constructor(e){this._grid=e}get option(){var e;return null!==(e=this._option)&&void 0!==e?e:this._option=this.grid.config.reorderable.column}renderReorderIndicator(e){u.JqUtils.adjustElement(e,`>div.${d.SbCss.reorder_indicator}.${d.SbCss.col}`,`<div class='${d.SbCss.reorder_indicator} ${d.SbCss.col}'></div>`)}renderFrozenIndicator(e){const t=this.grid.container.offset(),r=u.JqUtils.adjustElement(e,`>div.${d.SbCss.icon}.${d.SbCss.reorder_head}`,`<div class='${d.SbCss.icon} ${d.SbCss.reorder_head}'></div>`);this.moveFrozenColumn(e,r,t);const n=u.JqUtils.adjustElement(e,`>div.${d.SbCss.icon}.${d.SbCss.reorder_tail}`,`<div class='${d.SbCss.icon} ${d.SbCss.reorder_tail}'></div>`);this.moveFrozenColumn(e,n,t)}addDroppableColumn(e){const t=this.grid.getColumn(e);u.Convert.isNull(t)||t.part===s.PartType.Fixed||t instanceof a.GroupColumn||e.droppable({over:(e,t)=>{this.over(n(e.target))},drop:(e,t)=>{}})}over(e){const t=this.grid.getColumn(e);u.Convert.isNull(t)||t.part===s.PartType.Fixed||t instanceof a.GroupColumn||(this.jqTargetCol=e)}drop(){if(u.Convert.isNull(this.jqFromCol)||u.Convert.isNull(this.jqTargetCol))return;const e=this.grid.getColumn(this.jqFromCol),t=this.grid.getColumn(this.jqTargetCol);this.moveColumn(e,t,this.isBefore,this.grid.captionLayout),this.clear()}isOver(e,t,r){const n=e.left+e.width,i=e.top+e.height;return!(e.left<=t&&t<=n&&e.top<=r&&r<=i)}clear(){this.jqFromCol=void 0,this.jqTargetCol=void 0,this.isBefore=void 0}addDraggableColumn(e){const t=this.grid.getColumn(e);if(u.Convert.isNull(t)||t.part===s.PartType.Fixed||t instanceof a.GroupColumn)return;const r=this.grid.container.find(`.${d.SbCss.caption}.${d.SbCss.panel}`),n=r.find(` .${d.SbCss.reorder_indicator}.${d.SbCss.col}`),i=this.grid.container.offset();e.draggable({start:(t,r)=>{let o=t.pageX;this.dragStart(e,o,n,i)},drag:(t,o)=>{this.setMoveTopColTimer(o.helper,r),u.Convert.isNull(this.jqTargetCol)||this.jqTargetCol!=e&&(this.isOver({width:r.outerWidth(),height:r.outerHeight(),top:r.offset().top,left:r.offset().left},t.pageX,t.pageY)?n.css("opacity","0"):this.isDescendant()?this.jqTargetCol=void 0:this.moveIndicator(this.jqTargetCol,t.pageX,n,i))},stop:(e,t)=>{this.isOver({width:r.outerWidth(),height:r.outerHeight(),top:r.offset().top,left:r.offset().left},e.pageX,e.pageY)||this.drop(),n.css("opacity","0"),clearInterval(this.moveTopColTimer)},helper:(t,n)=>{const i=u.JqUtils.adjustElement(r,`>span.${d.SbCss.draggable_helper}.${d.SbCss.col}`,`<span class='${d.SbCss.draggable_helper} ${d.SbCss.col}'>${null==e?void 0:e.text()}</span>`);return u.JqUtils.adjustElement(i,`>span.${d.SbCss.icon}`,`<span class='${d.SbCss.icon}'></span>`),i},cursorAt:{top:15,left:25},refreshPositions:!0})}getTargetCol(e,t){return document.elementFromPoint(e,t).closest(`.${d.SbCss.col}`)}setMoveTopColTimer(e,t){return i(this,void 0,void 0,(function*(){const r=yield this.isHoverFrozen(e,t);if(u.Convert.isNull(r))return u.Convert.isValue(this.moveTopColTimer)&&clearTimeout(this.moveTopColTimer),void(this.moveTopColTimer=void 0);u.Convert.isNull(this.moveTopColTimer)&&(r>0?this.initTailFrozenBefore():this.initHeadFrozenNext(),this.moveTopColTimer=setInterval((()=>{this.isHoverFrozen(e,t)&&this.changeTopCol(r)}),this.option.scrollInterval))}))}isHoverFrozen(e,t){const r=this.getEdgePosition(-1,t),n=this.getEdgePosition(1,t),i=e.offset().left,o=i+e.outerWidth();let s;return i<=r.position&&r.position<o&&(s=-1),i<=n.position&&n.position<o&&(s=1),s}changeTopCol(e){return i(this,void 0,void 0,(function*(){const t=this.grid.topCol;if(1===e){const e=yield this.findBodyLast(t);(u.Convert.isNull(e)||(null==e?void 0:e.outOfView)>0)&&(this.grid.topCol+=1)}else if(-1===e){const e=yield this.findBodyFirst(t);u.Convert.isNull(e)&&(this.grid.topCol-=1)}}))}initHeadFrozenNext(){const e=this.grid.headColumns.at(-1);this.bodyFirstIndex=e.index+1}initTailFrozenBefore(){const e=this.grid.tailColumns[0];this.bodyLastIndex=e.index-1,this.initHeadFrozenNext();const t=this.grid.topCol;this.bodyFirstIndex>t&&(this.grid.topCol=this.bodyFirstIndex)}findBodyLast(e){return i(this,void 0,void 0,(function*(){let t=(yield this.grid.viewport.calcCols(e,!0)).fullCells.find((e=>(null==e?void 0:e.column.index)==this.bodyLastIndex));return(null==t?void 0:t.part)===s.PartType.Sticky&&(this.bodyLastIndex-=1,t=yield this.findBodyLast(e)),t}))}findBodyFirst(e){return i(this,void 0,void 0,(function*(){let t=(yield this.grid.viewport.calcCols(e,!0)).fullCells.find((e=>(null==e?void 0:e.column.index)==this.bodyFirstIndex));return(null==t?void 0:t.part)===s.PartType.Sticky&&(this.bodyLastIndex+=1,t=yield this.findBodyFirst(e)),t}))}getTopCol(e,t,r){return i(this,void 0,void 0,(function*(){const n=yield this.grid.viewport.calcCols(e,!0);if(e<0||e>n.lastCol)return;const i=n.fullCells,o=i.findIndex((e=>e.column.index===r)),a=i[o];return u.Convert.isNull(a)?yield this.getTopCol(e+t,t,r):a.column.part===s.PartType.Sticky?yield this.getTopCol(e,t,r-1):{nextTopCol:e,nextCell:a}}))}getEdgePosition(e,t){var r;let n=(null===(r=this.grid.config.reorderable)||void 0===r?void 0:r.column)?this.grid.headColumns.at(-1):this.grid.fixedColumns.at(-1),i=u.Utils.findCellFromColumn(this.grid.captionLayout,n);return{position:e>0?i.left+t.offset().left+this.grid.viewportWidth:i.left+t.offset().left,column:n}}isDescendant(){const e=this.grid.getColumn(this.jqFromCol),t=this.grid.getColumn(this.jqTargetCol),r=u.Arrays.bfsSearch(null==e?void 0:e.columns,(e=>e==t||e.columns));return!!u.Convert.isValue(r)}dragStart(e,t,r,n){const i=this.grid.getColumn(e);u.Convert.isNull(i)||(this.jqFromCol=e)}moveFrozenColumn(e,t,r){const n=this.initFrozenIndicatorPosition(t,r);let o,a;t.draggable({axis:"x",start:(e,r)=>{a=t.position(),u.Convert.isNull(o)&&(o=this.grid.container.find(`.${d.SbCss.caption}.${d.SbCss.panel} .${d.SbCss.reorder_indicator}.${d.SbCss.col}`)),o.css("opacity","1")},drag:(e,n)=>{const i=n.offset;t.css({top:i.top-r.top,left:i.left-r.left});let s=this.getJqColByIndicatorPosition(t);if((null==s?void 0:s.length)<=0&&(s=this.getJqColByIndicatorPosition(t,!1)),(null==s?void 0:s.length)<=0)return;let a=e.pageX;this.moveIndicator(s,a,o,r)},stop:(e,r)=>i(this,void 0,void 0,(function*(){let e=this.getJqColByIndicatorPosition(t);if(e.length<=0&&(e=this.getJqColByIndicatorPosition(t,!1)),e.length<=0)return void t.css({left:a.left,top:a.top});let r=this.grid.getColumn(e);for(;r.parent;)r=r.parent;(t.hasClass(d.SbCss.reorder_head)&&r.part===s.PartType.Tail||t.hasClass(d.SbCss.reorder_tail)&&r.part===s.PartType.Head)&&(r=t.hasClass(d.SbCss.reorder_head)?this.grid.viewportColumns[this.grid.viewportColumns.length-1]:this.grid.viewportColumns.length>0?this.grid.viewportColumns[0]:this.grid.headColumns[this.grid.headColumns.length-1]),u.Convert.isNull(r)?t.css({left:a.left,top:a.top}):(yield this.moveColumn(n,r,this.isBefore,this.grid.captionLayout),o.css("opacity","0"),this.clear())})),helper:(t,r)=>{const n=u.JqUtils.adjustElement(e,`>span.${d.SbCss.reorder_helper}`,`<span class='${d.SbCss.reorder_helper}'></span>`),i=this.grid.container.find(`.${d.SbCss.scroll_body}`);return n.height(i.height()),n}})}initFrozenIndicatorPosition(e,t){let r;if(e.hasClass(d.SbCss.reorder_head)){const e=this.grid.headColumns;r=e[e.length-1]}else if(e.hasClass(d.SbCss.reorder_tail)){r=this.grid.tailColumns[0]}const n=this.grid.getContainer(void 0,r,c.PanelType.Caption);return u.Convert.isValue(n)&&this.moveIndicator(n,n.offset().left,e,t,!1),r}getJqColByIndicatorPosition(e,t=!0){const r=e[0].getBoundingClientRect(),n=document.elementFromPoint(r.x+(t?-5:r.width+5),r.y+r.height+20),i=h.SBGrid3.$(n).closest(`.${d.SbCss.col}`);return i.length,i}moveIndicator(e,t,r,n,i=!0){let o=e.offset();if(u.Convert.isNull(o))return;let s=o.left-1.5-1,a=e.outerWidth(),l=s+a/2,c=o.top,h=t<l;h||(s+=a+1);const d=this.grid.getColumn(e);r.css("opacity",1),r.css({left:s-n.left,top:c-n.top}),this.isBefore=h;const f=this.getHight(d);i&&r.css("height",f)}getHight(e){var t;const r=u.Utils.findCellFromColumn(this.grid.captionLayout,e);if(u.Convert.isNull(r))return;let n=this.grid.config.captionHeight*r.rowSpan;if(u.Convert.isValue(e.columns)){const i=this.grid.captionLayout.rows;for(let o=r.row+1;o<i.length;o++){const s=i[o].cells[r.col];(null===(t=null==s?void 0:s.column)||void 0===t?void 0:t.parent)==e&&(n+=this.getHight(s.column))}}return n}moveColumn(e,t,r,n){var s;return i(this,void 0,void 0,(function*(){(null===(s=null==e?void 0:e.config)||void 0===s?void 0:s.type)==o.ColumnTypes.Frozen&&u.Convert.isValue(null==t?void 0:t.parent)||(l.Log.debug((()=>[e.config.caption,"-----\x3e",t.config.caption,r?"앞":"뒤"])),yield this.grid.moveToColumn(e,t,r))}))}static cancelDrag(e){const t=e.find(`>span.${d.SbCss.draggable_helper}`);t.length<1||t.remove()}};t.RowReorder=class{get jqTargetRow(){return this._jqTargetRow}set jqTargetRow(e){this._jqTargetRow=e}get option(){var e;return null!==(e=this._option)&&void 0!==e?e:this._option=this.grid.config.reorderable.row}constructor(e){this.grid=e}renderReorderIndicator(e){const t=u.JqUtils.adjustElement(e,`>div.${d.SbCss.reorder_indicator}.${d.SbCss.row}`,`<div class='${d.SbCss.reorder_indicator} ${d.SbCss.row}'></div>`),r=e.outerWidth();t.width(r)}addDraggableRow(e){return i(this,void 0,void 0,(function*(){const t=this.grid.getColumn(e);if(u.Convert.isNull(t))return;const r=yield this.grid.getRowItem(e);if(0==(null==r?void 0:r.reorderable))return;const n=this.grid.container.find(`.${d.SbCss.body}.${d.SbCss.panel}`),i=n.find(` .${d.SbCss.reorder_indicator}.${d.SbCss.row}`),o=this.grid.container.offset();e.draggable({axis:"y",start:(t,r)=>{this.dragStart(e),this.toggleIndicator(i,1)},drag:(e,t)=>{this.setMoveTopRowTimer(t.helper,n);if(this.isOver({width:n.outerWidth(),height:n.outerHeight(),top:n.offset().top,left:n.offset().left},e.pageX,e.pageY))return void this.toggleIndicator(i,0);const r=t.helper,s=r[0].getBoundingClientRect(),a=s.top,l=s.left,c=r.outerHeight()/2,h=this.getTargetRow(r,a,l,c);if(u.Convert.isNull(h))return;this.jqTargetRow=h;const d=t.offset.top+c;this.moveIndicator(i,d,this.jqTargetRow,o)},stop:(t,r)=>{if(!this.isOver({width:n.outerWidth(),height:n.outerHeight(),top:n.offset().top,left:n.offset().left},t.pageX,t.pageY)){const e=r.helper,t=r.helper[0].getBoundingClientRect(),n=e.outerHeight()/2,i=t.top+n-o.top;this.drop(this._jqTargetRow,this.isBefore(i,o.top))}this.toggleIndicator(i,0),this.removeMovingClassToTarget(e),clearTimeout(this.moveTopRowTimer)},helper:(t,r)=>(this.addMovingClassToTarget(e),this.makeHelper(n,e)),cursorAt:{top:12,left:0}})}))}isOver(e,t,r){const n=e.left+e.width,i=e.top+e.height;return!(e.left<=t&&t<=n&&e.top<=r&&r<=i)}makeHelper(e,t){const r=u.JqUtils.adjustElement(e,`>div.${d.SbCss.draggable_helper}.${d.SbCss.rowreorder}`,`<div class='${d.SbCss.draggable_helper} ${d.SbCss.rowreorder}'></div>`),n=u.JqUtils.adjustElement(r,">div","<div></div>"),i=(u.JqUtils.adjustElement(n,`>span.${d.SbCss.icon}.${d.SbCss.rowreorder}`,`<span class='${d.SbCss.icon} ${d.SbCss.rowreorder}'></span>`),t.closest(`.${d.SbCss.row}`).data("selector")),o=e.find(`.${d.SbCss.part}.${d.SbCss.head} .${i},.${d.SbCss.part}.${d.SbCss.body} .${i},.${d.SbCss.part}.${d.SbCss.tail} .${i}`).clone();return n.append(o),r}getTargetRow(e,t,r,n){const i=document.elementFromPoint(r-10,t+n).closest(`.${d.SbCss.row}.${d.SbCss.fixed}`);return u.Convert.isValue(i)?h.SBGrid3.$(i):void 0}toggleIndicator(e,t){e.css("opacity",t)}dragStart(e){this.jqSourceRow=e.closest(`.${d.SbCss.row}`)}addMovingClassToTarget(e){const t=e.closest(`.${d.SbCss.row}`).data("selector");this.grid.container.find(`.${d.SbCss.body}.${d.SbCss.panel}`).find(`.${d.SbCss.row}.${t}`).addClass(d.SbCss.moving)}removeMovingClassToTarget(e){const t=e.closest(`.${d.SbCss.row}`).data("selector");this.grid.container.find(`.${d.SbCss.body}.${d.SbCss.panel}`).find(`.${d.SbCss.row}.${t}`).removeClass(d.SbCss.moving)}isBefore(e,t){const r=this.jqTargetRow.offset(),n=this.jqTargetRow.outerHeight()/2;return e<r.top-t+n}over(e){return i(this,void 0,void 0,(function*(){const t=yield this.grid.getRowItem(e);u.Convert.isNull(t)&&(this.jqTargetRow=void 0),this.jqTargetRow=e}))}drop(e,t){return i(this,void 0,void 0,(function*(){if(u.Convert.isNull(this.jqSourceRow)||u.Convert.isNull(this.jqTargetRow))return;if(!(yield this.isDroppable(t)))return;const e=yield this.grid.getRowItem(this.jqSourceRow),r=yield this.grid.getRowItem(this.jqTargetRow);this.grid.moveToRow(e,r,t),this.clear()}))}clear(){this.jqSourceRow=void 0,this.jqTargetRow=void 0}moveIndicator(e,t,r,n){return i(this,void 0,void 0,(function*(){const i=r.offset(),o=r.outerHeight(),s=i.top-1,a=t<s+o/2;if(!(yield this.isDroppable(a)))return void this.toggleIndicator(e,0);this.toggleIndicator(e,1);const l=a?s-n.top:s+o-n.top;e.css({top:l,left:i.left-n.left})}))}isDroppable(e){return i(this,void 0,void 0,(function*(){const e=yield this.grid.getRowItem(this.jqSourceRow);let t=yield this.grid.getRowItem(this.jqTargetRow);return this._isDroppable(e,t)}))}_isDroppable(e,t){return e!=t&&e.isDroppable(t)}setMoveTopRowTimer(e,t){return i(this,void 0,void 0,(function*(){const r=yield this.isHoverBodyEdge(e,t);if(u.Convert.isNull(r))return u.Convert.isValue(this.moveTopRowTimer)&&clearTimeout(this.moveTopRowTimer),void(this.moveTopRowTimer=void 0);u.Convert.isNull(this.moveTopRowTimer)&&(this.interval=r.interval,this.moveTopRowTimer=setInterval((()=>{const r=this.isHoverBodyEdge(e,t);u.Convert.isNull(r)||(this.interval!==r.interval?(clearInterval(this.moveTopRowTimer),this.moveTopRowTimer=void 0,this.setMoveTopRowTimer(e,t)):this.changeTopRow(r.state))}),this.interval))}))}isHoverBodyEdge(e,t){const r=t.offset().top,n=t.offset().top+t.outerHeight(),i=e.offset().top,o=e.offset().top+e.outerHeight()/2,s=e.offset().top+e.outerHeight();let a;const l=this.option.scrollInterval;return i<r&&r<o?a={state:-1,interval:l}:o<r&&r<s&&(a={state:-1,interval:.45*l}),o<n&&n<s?a={state:1,interval:l}:i<n&&n<o&&(a={state:1,interval:.45*l}),a}changeTopRow(e){return i(this,void 0,void 0,(function*(){const t=this.grid.topRow;if(-1===e&&0===t)return;const r=yield this.grid.viewport.calcRows(t);if(1===e){const e=this.grid.total-1,t=r.currRows.find((t=>t.rowIndex===e));(u.Convert.isNull(t)||r.scrollHeight<t.top+t.rowHeight.height)&&(this.grid.topRow+=1)}else if(-1===e){const e=r.currRows.find((e=>0===e.rowIndex));u.Convert.isNull(e)&&(this.grid.topRow+=-1)}}))}}},5360:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RowTemplate=t.RowCustom=t.RowButton=t.RowTool=t.RowCommandFactory=t.RowCommands=void 0;const i=r(2733),o=r(9402),s=r(8154),a=r(3396),l=r(7392),u=r(7074);var c;!function(e){e.Edit="edit",e.Delete="delete",e.Update="update",e.Insert="insert",e.Cancel="cancel",e.Custom="custom",e.Template="template"}(c||(t.RowCommands=c={}));class h{static create(e,t,r,n){switch(e){case c.Edit:return new s.EditCommand(l.EditMode.inline,t,r);case c.Delete:return new o.DeleteCommand([{key:t.key}]);case c.Update:return new o.UpdateCommand([{key:t.key,value:n}]);case c.Insert:return new s.InsertRowCommand(t.key,n);case c.Cancel:return new o.CancelCommand}}static createTool(e,t){if("function"==typeof t)return new p(e,t);switch(t){case c.Edit:case c.Delete:case c.Update:case c.Insert:case c.Cancel:return new f(e,t);default:return new m(e,t)}}static label(e,t){switch(e){case c.Edit:return t.tool_edit;case c.Delete:return t.tool_deleteRow;case c.Update:return t.tool_update;case c.Insert:return t.tool_insertRow;case c.Cancel:return t.tool_cancel;default:return e}}}t.RowCommandFactory=h;class d extends i.Observer{get command(){return this._command}get clazz(){return this._command}get grid(){return this._grid}get resourceManager(){return this.grid.dataSource.resourceManager}constructor(e,t){super(e),this._command=t,this._grid=e}makeButton(e){return a.JqUtils.adjustElement(e,`>input[type='button'].${u.SbCss.toClass("command",this.command)}`,`<input type='button' class='${u.SbCss.toClass("command",this.clazz)}'>`)}render(e,t,r){return n(this,void 0,void 0,(function*(){this.makeButton(e).val(h.label(this.command,this.resourceManager.resource))}))}}t.RowTool=d;class f extends d{render(e,t,r){return n(this,void 0,void 0,(function*(){const n=this.makeButton(e);n.val(h.label(this.command,this.resourceManager.resource)),this.grid.setEvent("RowButtonClick","click",`${this._name}_${t.rowIndex}`,(()=>{const e=a.Convert.isEmpty(t.temp)?t.data:t.temp,n=a.Convert.cloneData(e);switch(this.command){case c.Update:this.grid.view.clearEdit();case c.Edit:case c.Delete:case c.Insert:case c.Cancel:this.fireCommandAsync(this,h.create(this.command,t,r,n))}}),n)}))}}t.RowButton=f;class p extends d{constructor(e,t){super(e,c.Custom),this._rowFunc=t}render(e,t,r){return n(this,void 0,void 0,(function*(){e.empty(),this._rowFunc(e.get(0),t,r)}))}}t.RowCustom=p;class m extends d{constructor(e,t){super(e,c.Custom),this._template=a.Utils.createTemplate(t)}render(e,t,r){return n(this,void 0,void 0,(function*(){e.empty();const r=this._template(t);a.JqUtils.adjustHtml(e,r)}))}}t.RowTemplate=m},3988:function(e,t,r){"use strict";var n=r(9755),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SBGrid3=void 0,r(9755),r(5476),r(9675),r(1232),r(6663),r(3396),r(7074),r(4579),r(1919),r(5677),r(3455),r(4597),r(7755),r(7392),r(6231),r(6659),r(8401),r(4772),r(696),r(4597),r(5838),r(2519),r(2033),r(9172),r(168),r(4014),r(5360),r(2733),r(235),r(9863),r(510),r(5087),r(1880),r(9402),r(8154),r(9402),r(8154),r(3905),r(5643),r(1290),r(109),r(739),r(9909),r(6328),r(4683),r(4072),r(4936),r(2542),r(1623),r(1700),r(9114),r(3211),r(4249),r(3341),r(3648),r(7134),r(2867),r(270),r(1207),r(7333),r(7641),r(6411),r(8141),r(7367),r(4920),r(5077),r(3225),r(8461),r(7565),r(9019),r(1374),r(3396),r(4202),r(2271),r(249),r(5421),r(5548),r(7270);const o=r(4579),s=r(3396),a=r(7392),l=r(6659),u=r(1374),c=r(9402),h=r(9863),d=r(7270),f=r(5421),p=r(8154),m=r(2519),g=r(4772),v=r(6522),y=r(4462);class b{static get trialKey(){if(s.Convert.isEmpty(this._trialKey)&&this.version.includes(".TRIAL")&&s.Convert.isValue("2023-07-26")){const e="T"+"_2023-07-26|3.23.07.26.0";this._trialKey=s.Crypto.encrypt(e,CRYPTO_KEY,256)}return this._trialKey}static get version(){return this._version}static get default(){return this._default}static set default(e){this.setDefaultConfig(e)}static setDefaultConfig(e){this._default=a.GridParser.parseDefaultConfig(e)}static renderPages(e){const t=b.$("<div role='row'/>");for(const e of this.pages.sort()){const r=e.replace(".html","").replace("./",""),n=`<span class='badge'><a href='${e}' target='${r}'>${r}</a> </span>&nbsp;`;t.append(n)}e.before(t)}static createGrid(e){if(this.checkLicense(e)){const t=new o.Grid(e);return t.refresh(),t}}static toggleRow(e,t){return i(this,void 0,void 0,(function*(){if(s.Convert.isNull(e))throw"grid is null";return yield e.toggleRow(t)}))}static getRow_Index(e,t){return e.rows[t]}static getRowKey(e,t){var r;return null===(r=this.getRow_Index(e,t))||void 0===r?void 0:r.key}static getRow(e,t){return e.view.map(t)}static getFocused(e){return e.focusManager.focus}static getFocusedColumn(e){var t;return null===(t=this.getFocused(e))||void 0===t?void 0:t.column}static getFocusedRow(e){var t;return null===(t=this.getFocused(e))||void 0===t?void 0:t.rowItem}static getFocusedKey(e){var t,r;return null===(r=null===(t=this.getFocused(e))||void 0===t?void 0:t.rowItem)||void 0===r?void 0:r.key}static getFocusedValue(e,t){const r=this.getFocusedRow(e);if(!s.Convert.isNull(r))return r.getValue(t)}static getSelectedKeys(e){return e.view.getSelectedKeys()}static getSelectedRows(e){return e.view.getSelectedRows()}static getCheckedRows(e){return e.view.getCheckedRows()}static getCheckedKeys(e){return e.view.getCheckedKeys()}static getRangedRows(e){return e.getRangedRows()}static getRangedKeys(e){return e.getRangedKeys()}static showDetail(e,t,r,n){const i=this.getRow(e,t);s.Convert.isValue(i)?(i.detailTemplate=r,i.detailInit=n,i.detailContext=void 0,e.toggleDetail(t,!0)):u.Log.error(`SBGrid3.showDetail : [${t}] not found!`)}static hideDetail(e,t){e.toggleDetail(t,!1)}static getValue(e,t,r){var n,i,o;return s.Convert.isValue(r)?null===(i=null===(n=this.getRow(e,t))||void 0===n?void 0:n.data)||void 0===i?void 0:i[r]:null===(o=this.getRow(e,t))||void 0===o?void 0:o.data}static setValue(e,t,r,n){return i(this,void 0,void 0,(function*(){yield e.fireCommandAsync(e,new c.UpdateCommand([].concat({key:t,value:r,field:n})))}))}static setValues(e,t){e.fireCommandAsync(e,new c.UpdateCommand(t))}static editable(e,t){e.editable(t)}static rowEditable(e,t,r){if(e.config.editable.mode!==a.EditMode.inline)return;if((r=null==r||r)&&e.view.editKeyMap.size>0)return;const n=e.view.map(t);s.Convert.isNull(n)?u.Log.warn((()=>`[${t}] : not found`)):(n.isEdit=r,e.refresh())}static columnEditable(e,t,r,n){n=null==n||n;const i=e.view.map(t);if(s.Convert.isNull(i))u.Log.warn((()=>`[${t}] : not found`));else{if(s.Convert.isValue(r)&&n){const t=e.focusManager;0==t.isFocused(i,r,g.PanelType.Body)&&(t.focus={rowItem:i,column:r,panelType:g.PanelType.Body,cell:s.Utils.findCellFromColumn(e.rowLayout,r)})}i.isEdit=n,e.fireCommandAsync(e,new p.RefreshCommand({rowStart:i.rowIndex,rowEnd:i.rowIndex,colStart:r.index,colEnd:r.index}))}}static validateGrid(e){const t=[];return e.view.rows.forEach((r=>{const n=s.Arrays.bfsSearch(e.visibleColumns,(e=>{var t;return(null===(t=e.isValid(r))||void 0===t?void 0:t.state)!==m.ValidationState.Valid||e.columns}));s.Convert.isValue(n)&&t.push(r.key)})),t}static validateRow(e,t){const r=[],n=e.view.keyMap.get(t);if(!s.Convert.isNull(n))return s.Arrays.bfsAction(e.wholeColumns,(e=>(e.isValid(n).state!==m.ValidationState.Valid&&r.push(e),e.columns))),r;u.Log.warn((()=>`[${t}] : not found`))}static getSaveData(e,t=!0,r=!0,n=!0){return e.dataSource.getSaveData(t,r,n)}static clearSaveData(e){e.clearSaveData()}static clearRows(e){e.clearRows()}static save(e){return i(this,void 0,void 0,(function*(){yield e.save()}))}static refresh(e){e.refresh()}static reload(e){e.reload()}static rebuild(e){e.rebuild()}static setGridDefault(e){b.default=e}static setResourceDefault(e){h.ResourceManager.default=e}static setDefault(e,t){s.Convert.isValue(e)&&this.setGridDefault(e),s.Convert.isValue(t)&&this.setResourceDefault(t)}static setResource(e,t,r){e.resourceManager.setResource(t,r)}static listPersonalization(e){const t=new f.PersonalStorage(e);try{return t.listPersonalization()}catch(e){return[]}}static savePersonalization(e,t){const r=new f.PersonalStorage(e);try{return r.savePersonalization(t),!0}catch(e){return!1}}static resetPersonalization(e){const t=new f.PersonalStorage(e);try{return t.removePersonalization(t.key),!0}catch(e){return!1}}static removePersonalization(e,t){const r=new f.PersonalStorage(e);try{return r.removePersonalization(t),!0}catch(e){return!1}}static setPersonalization(e,t){const r=new f.PersonalStorage(e);try{return r.setPersonalization(t),!0}catch(e){return!1}}static excelExport(e,t){return i(this,void 0,void 0,(function*(){const r=new d.ExcelExport(e,t),n=new s.default,i=s.Utils.ensureName("excel");e.setEvent("excel","keydown",i,(e=>{"Escape"===e.key&&n.cancel()}),e.container),yield r.export(n.token),e.setEvent("excel","keydown",i,void 0,e.container)}))}static excelImport(e,t,r){return i(this,void 0,void 0,(function*(){let n;switch(t.name.split(".").at(-1)){case"csv":n=new y.CsvImport(e,r);break;case"xlsx":n=new v.ExcelImport(e,r)}if(!s.Convert.isValue(n))throw"not supported file "+t.name;n.excelImport(t)}))}static addRow(e,t,r){return i(this,void 0,void 0,(function*(){yield e.addRowCommand(new p.AddRowCommand(t,r))}))}static insertRow(e,t,r){return i(this,void 0,void 0,(function*(){yield e.insertRowCommand(new p.InsertRowCommand(t,r))}))}static appendRow(e,t,r){return i(this,void 0,void 0,(function*(){yield e.appendRowCommand(new p.AppendRowCommand(t,r))}))}static deleteRow(e,t,r){return i(this,void 0,void 0,(function*(){yield e.deleteRowCommand(new p.DeleteRowCommand(t,r))}))}static fireCommand(e,t){return e.fireCommand(e,t)}static fireCommandAsync(e,t){return i(this,void 0,void 0,(function*(){yield e.fireCommandAsync(e,t)}))}static setTheme(e,t){e.setTheme(t)}static checkLicense(e){if(s.Convert.isValue(this.trialKey)){const t=s.Crypto.decrypt(this.trialKey,CRYPTO_KEY,256),[r,n]=t.split("|"),[i,o]=r.split("_");if("3.23.07.26.0"!==n)return!1;if("T"!==i)return!1;if("2023-07-26"!==o)return!1;if(!function(e){const t=new Date,r=t.getMonth()+1;return!(Number(t.getFullYear().toString()+(r<10?`0${r}`:r)+(t.getDate()<10?`0${t.getDate()}`:t.getDate()))>Number(e))}(o.replace(/-/g,"")))return u.Log.error("사용기간이 만료되었습니다. 라이센스를 재발급받으시기 바랍니다."),this.showExpirationMessage(e),!1}return!0}static showExpirationMessage(e){const t=e.width,r=e.height;let n=e.container;if(s.Convert.isNull(n))return;("string"==typeof n||n instanceof HTMLElement)&&(n=b.$(n)),n.css({border:"1px solid #cecece","box-sizing":"border-box",width:t,height:r});const i=s.JqUtils.adjustElement(n,"div.popup-text",'<div class="popup-text">'),o=s.JqUtils.adjustElement(i,"div.popup-text-result-wrap",'<div class="popup-text-result-wrap">');s.JqUtils.adjustElement(o,"div.sbgrid-trial-check",'<div class="sbgrid-trial-check">');return s.JqUtils.adjustElement(o,"div.sbgrid-text",'<div class="sbgrid-text">').html("사용기간이 만료되었습니다.<br> 라이센스를 재발급받으시기 바랍니다."),!0}}t.SBGrid3=b,b._version="3.23.07.26.0",b.$=n,b.isNode=!globalThis.window,b.LogLevel=u.LogLevels.Trace,b.Log=u.Log,b.trace=u.Log.trace,b.debug=u.Log.debug,b.info=u.Log.info,b.warn=u.Log.warn,b.error=u.Log.error,b.pages=["./autoBind.html","./big.html","./columns.html","./city.html","./clipboard.html","./checkColumn.html","./columnType.html","./detail.html","./faq.html","./filter.html","./filter2.html","./merge.html","./navi.html","./lazy.html","./status.html","./server.html","./select.html","./sticky.html","./test.html","./tree.html","./validation.html","./wordwrap.html","./zip.html","./combo.html","./excelTest.html"],globalThis.SBGrid3=b,b._default=a.GridParser.parseDefaultConfig(new l.GridDefault)},7074:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SbCss=void 0;class n{static toClass(...e){const t=e.join(this.seperator);return""==t?"":this.prefix+this.seperator+t}}t.SbCss=n,r=n,n.prefix="sbgrid",n.seperator="-",n.grid=r.toClass("grid"),n.empty=r.toClass("empty"),n.scroll=r.toClass("scroll"),n.panel=r.toClass("panel"),n.part=r.toClass("part"),n.align=r.toClass("align"),n.tools=r.toClass("tools"),n.tool=r.toClass("tool"),n.item=r.toClass("item"),n.pager=r.toClass("pager"),n.scroll_vert=r.toClass("scroll","vert"),n.scroll_body=r.toClass("scroll","body"),n.scrollh=r.toClass("scrollh"),n.scrollbar=r.toClass("scrollbar"),n.scrollv=r.toClass("scrollv"),n.body=r.toClass("body"),n.left=r.toClass("left"),n.center=r.toClass("center"),n.right=r.toClass("right"),n.area=r.toClass("area"),n.thead=r.toClass("thead"),n.tbody=r.toClass("tbody"),n.tfoot=r.toClass("tfoot"),n.row=r.toClass("row"),n.col=r.toClass("col"),n.cell=r.toClass("cell"),n.caption=r.toClass("caption"),n.header=r.toClass("header"),n.footer=r.toClass("footer"),n.fixed=r.toClass("fixed"),n.variable=r.toClass("variable"),n.head=r.toClass("head"),n.tail=r.toClass("tail"),n.group=r.toClass("group"),n.fixed_height=r.toClass("fixed","height"),n.alternate=r.toClass("alternate"),n.tree=r.toClass("tree"),n.title=r.toClass("title"),n.custom=r.toClass("custom"),n.hidden=r.toClass("hidden"),n.merge=r.toClass("merge"),n.merge_row=r.toClass("merge-row"),n.merge_col=r.toClass("merge-col"),n.merged=r.toClass("merged"),n.level=r.toClass("level"),n.level_first=r.toClass("level","first"),n.level_next=r.toClass("level","next"),n.focused=r.toClass("focused"),n.pined=r.toClass("pined"),n.selecting=r.toClass("selecting"),n.unselected=r.toClass("unselected"),n.selected=r.toClass("selected"),n.sticky=r.toClass("sticky"),n.detail=r.toClass("detail"),n.checked=r.toClass("checked"),n.halfCheck=r.toClass("half"),n.dropdown=r.toClass("dropdown"),n.option=r.toClass("option"),n.unchecked=r.toClass("unchecked"),n.rowno=r.toClass("rowno"),n.edit=r.toClass("edit"),n.column=r.toClass("column"),n.icon=r.toClass("icon"),n.input=r.toClass("input"),n.loading=r.toClass("loading"),n.folder=r.toClass("folder"),n.asc=r.toClass("asc"),n.desc=r.toClass("desc"),n.open=r.toClass("open"),n.close=r.toClass("close"),n.leaf=r.toClass("leaf"),n.indicator=r.toClass("indicator"),n.hover=r.toClass("hover"),n.hovered=r.toClass("hovered"),n.text=r.toClass("text"),n.space=r.toClass("space"),n.page=r.toClass("page"),n.current=r.toClass("current"),n.disabled=r.toClass("disabled"),n.add=r.toClass("add"),n.addTop=r.toClass("add","top"),n.field=r.toClass("field"),n.popup=r.toClass("popup"),n.summit=r.toClass("summit"),n.cancel=r.toClass("cancel"),n.cancel_red=r.toClass("cancel-red"),n.refresh=r.toClass("refresh"),n.delete=r.toClass("delete"),n.update=r.toClass("update"),n.insert=r.toClass("insert"),n.append=r.toClass("append"),n.grouping=r.toClass("grouping"),n.order=r.toClass("order"),n.sort=r.toClass("sort"),n.no=r.toClass("no"),n.draggable_helper=r.toClass("draggable","helper"),n.check=r.toClass("check"),n.checkbox=r.toClass("checkbox"),n.checkboxGroup=r.toClass("checkboxgroup"),n.combobox=r.toClass("combobox"),n.comboInner=r.toClass("combo","inner"),n.comboButton=r.toClass("combo","button"),n.comboButtonIcon=r.toClass("combo","button","icon"),n.comboValueText=r.toClass("combo","value","text"),n.comboPopup=r.toClass("combo","popup"),n.comboPopupItems=r.toClass("popup","items"),n.comboPopupItem=r.toClass("popup","item"),n.comboItemSelected=r.toClass("combo","item","selected"),n.radio=r.toClass("radio"),n.radio_icon=r.toClass("radio","icon"),n.wrap_radio=r.toClass("wrap","radio"),n.radioGroup=r.toClass("radiogroup"),n.multiText=r.toClass("multiText"),n.rowcheck=r.toClass("rowcheck"),n.first=r.toClass("first"),n.prev=r.toClass("prev"),n.next=r.toClass("next"),n.last=r.toClass("last"),n.save=r.toClass("save"),n.resize_indicator=r.toClass("resize","indicator"),n.resize_helper=r.toClass("resize","helper"),n.reorder_indicator=r.toClass("reorder","indicator"),n.reorder_head=r.toClass("reorder","head"),n.reorder_tail=r.toClass("reorder","tail"),n.reorder_helper=r.toClass("reorder","helper"),n.undo=r.toClass("undo"),n.redo=r.toClass("redo"),n.valid=r.toClass("valid"),n.invalid=r.toClass("invalid"),n.tooltip=r.toClass("tooltip"),n.frozen=r.toClass("frozen"),n.status=r.toClass("status"),n.filter=r.toClass("filter"),n.menu=r.toClass("menu"),n.condition=r.toClass("condition"),n.operator=r.toClass("operator"),n.join=r.toClass("join"),n.value=r.toClass("value"),n.values=r.toClass("values"),n.checkable=r.toClass("checkable"),n.search=r.toClass("search"),n.summary=r.toClass("summary"),n.autoComplete=r.toClass("autocomplete"),n.autoComplete_list=r.toClass("autocomplete-list"),n.confirm=r.toClass("confirm"),n.filled=r.toClass("filled"),n.and=r.toClass("and"),n.or=r.toClass("or"),n.none=r.toClass("none"),n.command=r.toClass("command"),n.button=r.toClass("button"),n.copy_top=r.toClass("copy-top"),n.copy_bottom=r.toClass("copy-bottom"),n.copy_left=r.toClass("copy-left"),n.copy_right=r.toClass("copy-right"),n.fillHandle=r.toClass("fill-handle"),n.fillHandle_top=r.toClass("fill-handle-top"),n.fillHandle_bottom=r.toClass("fill-handle-bottom"),n.fillHandle_left=r.toClass("fill-handle-left"),n.fillHandle_right=r.toClass("fill-handle-right"),n.menu_group=r.toClass("menu-group"),n.menu_seperator=r.toClass("seperator"),n.wrapPopup=r.toClass("wrap","popup"),n.comboItemEmpty=r.toClass("combo","item","empty"),n.angleBottom=r.toClass("angle","bottom"),n.context_menu=r.toClass("context-menu"),n.rowreorder=r.toClass("rowreorder"),n.moving=r.toClass("moving"),n.place_holder=r.toClass("place","holder"),n.template=r.toClass("template"),n.excel=r.toClass("excel"),n.floatingEditBox=r.toClass("floating","edit","box")},4014:(e,t,r)=>{"use strict";var n=r(9755);Object.defineProperty(t,"__esModule",{value:!0}),t.SbScrollBar=void 0;const i=r(3396),o=r(5677),s=r(3988),a=r(7074);class l extends o.GridPanel{constructor(e){super(e,a.SbCss.scroll),this._snapAmout=0,this._scrolling=!1}sanpAmount(){return this._snapAmout}scrolling(){return this._scrolling}isScrollBar(e){let t=!1;return s.SBGrid3.$(e).find(".mCSB_container").length>0&&(t=!0),t}update(e){s.SBGrid3.$(e).mCustomScrollbar("update",{callback:!1})}setSize(e,t){if("y"==t){const t=this.grid.virtualRow?s.SBGrid3.$(e).find(".mCSB_scrollTools").height()+(this.grid.viewport.getScrollHeight()-this.grid.scrollPanel.viewportHeight):Math.round(this.grid.scrollPanel.scrollHeight/this.grid.scrollPanel.viewportHeight*100)+"%";this.grid.virtualRow?this.grid.scrollPanel.bodyPanel.bodyHeight>this.grid.viewport.getScrollHeight()?(s.SBGrid3.$(e).find(".mCSB_container").css("height","0px"),this.grid.view.topRow=0):s.SBGrid3.$(e).find(".mCSB_container").css("height",t):this.grid.scrollPanel.bodyPanel.bodyHeight>this.grid.viewport.getScrollHeight()?s.SBGrid3.$(e).find(".mCSB_container").css("height","0px"):s.SBGrid3.$(e).find(".mCSB_container").css("height",t)}else if("x"==t){const t=this.grid.virtualColumn?s.SBGrid3.$(e).find(".mCSB_scrollTools").width()+100*this.grid.scrollColumns.length:Math.round(this.grid.scrollWidth/this.grid.viewportWidth*100)+"%";s.SBGrid3.$(e).find(".mCSB_container").css("width",t),100>=i.Convert.asInt(t.toString().replace("px","").replace("%",""))&&(this.grid.topCol=this.grid.minTopCol)}}createScroll(e,t){let r=EventTarget.prototype.addEventListener;EventTarget.prototype.addEventListener=function(e,t,n){this.func=r,"boolean"!=typeof n&&((n=n||{}).passive=!1),this.func(e,t,n)};"y"==t?(this.grid.config.virtualRow,this._snapAmout=6):this.grid.config.virtualColumn?this._snapAmout=this.grid.viewportWidth/(2*this.grid.viewportColumns.length):this._snapAmout=30,s.SBGrid3.$(e).mCustomScrollbar({axis:t,theme:"3d-dark",scrollbarPosition:"inside",scrollInertia:250,autoDraggerLength:!0,autoExpandScrollbar:!0,alwaysShowScrollbar:0,snapAmount:this._snapAmout,scrollButtons:{enable:!0,scrollType:"stepless",tabindex:1,scrollAmount:this._snapAmout},keyboard:{enable:!0,scrollAmount:this._snapAmout,scrollType:"stepless"},advanced:{updateOnBrowserResize:!0,updateOnContentResize:!0},callbacks:{whileScrolling:function(){"y"==t?o():"x"==t&&a()}}});const o=()=>{let t=-i.Convert.asInt(s.SBGrid3.$(e).find(".mCSB_container").css("top").replace("px",""));if(this.grid.virtualRow){const t=s.SBGrid3.$(e).find(".mCSB_container"),r=s.SBGrid3.$(e).find(".mCSB_scrollTools").height(),n=t.height(),o=-i.Convert.asInt(t.css("top").replace("px","")),a=n-r,l=0==o?0:Math.round(o/(a/this.grid.maxTopRow));if(this.grid.topRow==l)return;if(this.grid.maxTopRow<l)return;this.grid.viewport.setScroll(void 0,l)}else this.grid.viewport.setScroll(void 0,t)},a=()=>{if(this.grid.virtualColumn){const t=s.SBGrid3.$(e).find(".mCSB_container"),r=s.SBGrid3.$(e).find(".mCSB_scrollTools").width(),n=t.width(),o=-i.Convert.asInt(t.css("left").replace("px","")),a=n-r,l=0==o?0:Math.round(o/(a/this.grid.scrollColumns.length));this.grid.topCol=l+this.grid.minTopCol}else{const t=-i.Convert.asInt(s.SBGrid3.$(e).find(".mCSB_container").css("left").replace("px","")),r=s.SBGrid3.$(e).find(".mCSB_container").width();s.SBGrid3.$(e).find(".mCSB_dragger").width();let n=0==t?0:this.grid.scrollWidth*(t/r);this.grid.viewport.setScroll(n,void 0)}};s.SBGrid3.$(e).find(".mCSB_draggerRail").height(0),n(window).on("resize",(()=>{s.SBGrid3.$(e).mCustomScrollbar("update")})),s.SBGrid3.$(e).on("wheel",(t=>{this.scrollBarEvent(t,e)}))}scrollBarEvent(e,t){e.preventDefault();let r=0;var n=window.event||event;let o;if(0!=n.deltaY){let e=i.Convert.asInt(s.SBGrid3.$(t).find(".mCSB_container").css("top").replace("px","")),o=i.Convert.asInt(n.wheelDeltaY/4);r+=2;let a=e+r*o;s.SBGrid3.$(t).find(".mCSB_container").css("top",a),a>0&&(a=0),this.grid.virtualRow?(i.Convert.isValue(this.scrollTimer)&&clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout((function(){s.SBGrid3.$(t).mCustomScrollbar("scrollTo",[a,void 0],{timeout:1,scrollInertia:0}),this.scrollTimer=void 0,r=void 0}),0)):(s.SBGrid3.$(t).mCustomScrollbar("scrollTo",[a,void 0],{timeout:1,scrollInertia:0}),this.scrollTimer,clearTimeout(this.scrollTimer))}if(0!=n.deltaX){let e=i.Convert.asInt(s.SBGrid3.$(t).find(".mCSB_container").css("left").replace("px",""))-i.Convert.asInt(n.wheelDeltaX);e>=0&&(e=0),o=setTimeout((()=>{s.SBGrid3.$(t).mCustomScrollbar("scrollTo",[void 0,e],{timeout:1,scrollInertia:0}),clearTimeout(o)}),1)}}setScrollTop(e,t){s.SBGrid3.$(e).find(".mCSB_container").css("top",t)}getScrollTop(e){return i.Convert.isValue(e)?i.Convert.asInt(s.SBGrid3.$(e).find(".mCSB_container").css("top").replace("px","")):0}scrollLeft(e){return i.Convert.isValue(e)?i.Convert.asInt(s.SBGrid3.$(e).find(".mCSB_container").css("left").replace("px","")):0}scrollTo(e,t,r,n){isNaN(t)||isNaN(r)||(i.Convert.isValue(n)?s.SBGrid3.$(e).mCustomScrollbar("scrollTo",[-r,-t],{timeout:1,scrollInertia:0,callbacks:!1}):s.SBGrid3.$(e).mCustomScrollbar("scrollTo",[-r,-t],{timeout:1,scrollInertia:0}))}}t.SbScrollBar=l},5838:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.FilterPanel=t.FooterPanel=t.HeaderPanel=t.RowsPanel=t.BodyPanel=t.CaptionPanel=t.LayoutPanel=t.ScrollPanel=t.ScrollPart=void 0;const i=r(3396),o=r(1623),s=r(5677),a=r(5643),l=r(1374),u=r(5087),c=r(3988),h=r(7074),d=r(1880),f=r(3211),p=r(4772),m=r(4249),g=r(2271),v=r(4014),y=r(2519),b=r(7641),w=r(249),C=r(7755),_=r(109),S=r(9172);var x;!function(e){e.None="none",e.Thumb="thumb",e.Prev="prev",e.Next="next"}(x||(t.ScrollPart=x={}));class k extends s.GridPanel{constructor(e){super(e,h.SbCss.scroll),this.revmoeContextMenu=e=>{e.preventDefault(),null==c.SBGrid3.$(e.target).closest("."+h.SbCss.context_menu).html()&&this.grid.container.find("."+h.SbCss.context_menu).remove()},this.removeMenu=()=>{this.revmoePopupMenu()},this.revmoePopupMenu=()=>{this.grid.container.find("."+h.SbCss.context_menu).remove(),this.grid.container.find("."+h.SbCss.menu_group).remove()},this.removeComboPopupScrolling=()=>{this.grid.container.find("."+h.SbCss.comboPopup).addClass(h.SbCss.hidden)},this.onContextMenu=e=>n(this,void 0,void 0,(function*(){e.preventDefault();let t=this.getCol(c.SBGrid3.$(e.target));c.SBGrid3.$(e.target);const r=this._grid.getColumn(t),n=yield this.grid.getRowItem(t);if(this.grid.container.find(`.${h.SbCss.context_menu}`).remove(),this.grid.container.find(`.${h.SbCss.menu_group}`).remove(),c.SBGrid3.$(e.target).find(".mCSB_dragger").length>0)return;let o;const s=c.SBGrid3.$(e.target).closest("."+h.SbCss.panel+"."+h.SbCss.scroll);let a;o=i.Convert.isValue(t)?i.JqUtils.adjustElement(s,`>div.${h.SbCss.context_menu}.0`,`<div class='${h.SbCss.context_menu} ${h.SbCss.col}-0'></span>`):i.JqUtils.adjustElement(s,`>div.${h.SbCss.context_menu}.${r.index}`,`<div class='${h.SbCss.context_menu} ${h.SbCss.col}-${r.index}'></span>`),a=null==r||null==r.config.field?new w.GridMenu(this._grid,w.GridMenuParser.parse(this.grid.contextMenu),r,n):new w.GridMenu(this._grid,w.GridMenuParser.parse(r.contextMenu),r,n),a.render(c.SBGrid3.$(o),w.MenuType.ContextMenu,void 0);let l=t.closest("."+h.SbCss.grid);this.grid.container.find(o).css("top",e.pageY-this.grid.container.offset().top),this.grid.container.find(o).css("left",e.pageX-this.grid.container.offset().left),this.grid.container.height()<this.grid.container.find(o).children().height()&&(o.children().css("height",this.grid.container.height()/2),o.children().css("overflow-y","scroll")),null!=r?(this.grid.container.height()+this.grid.container.offset().top<e.pageY+this.grid.container.find(o).children("span").height()&&this.grid.container.find(o).css("top",this.grid.container.height()-this.grid.container.find(o).children("span").height()-this.grid.container.find(`.${h.SbCss.scrollh}`).height()-5),this.grid.container.width()+this.grid.container.offset().left<t.offset().left+this.grid.container.find(o).width()+t.width()&&this.grid.container.find(o).css("left",l.width()-this.grid.container.find(o).width()-this.grid.container.find(`.${h.SbCss.scrollv}`).width())):(this.grid.container.height()+this.grid.container.offset().top<e.pageY+this.grid.container.find(o).children("span").height()&&this.grid.container.find(o).css("top",this.grid.container.height()-this.grid.container.find(o).children("span").height()-this.grid.container.find(`.${h.SbCss.scrollh}`).height()-5),this.grid.container.width()+this.grid.container.offset().left<e.pageX+this.grid.container.find(o).width()&&this.grid.container.find(o).css("left",l.width()-this.grid.container.find(o).width()-this.grid.container.find(`.${h.SbCss.scrollv}`).width()))})),this.onScrollVert=e=>{i.Convert.isValue(this.scrollTimer)&&clearTimeout(this.scrollTimer);const t=this;this.scrollTimer=setTimeout((function(){t.doScrollVert(e),this.scrollTimer=void 0}),0)},this.doScrollVert=e=>{try{let t=c.SBGrid3.$(e.target),r=i.Convert.asInt(t.scrollTop());this.grid.viewport.setScroll(void 0,r)}finally{}},this.onScrollHorz=e=>{i.Convert.isValue(this.scrollTimer)&&clearTimeout(this.scrollTimer);const t=this;this.scrollTimer=setTimeout((function(){t.doScrollHorz(e),this.scrollTimer=void 0}),0)},this.doScrollHorz=e=>{try{let t=c.SBGrid3.$(e.target),r=t.scrollLeft(),n=c.SBGrid3.$(`>.${h.SbCss.scrollbar}`,t).width();if(l.Log.debug((()=>[this.grid.name+"_onScrollHorz",r,e])),this.grid.view.virtualColumn){let e=r/n*(this.grid.scrollColumns.length+this.grid.viewportColumns.length);e=Math.min(this.grid.scrollColumns.length-this.grid.viewportColumns.length+this.grid.fixedColumns.length+1,i.Convert.asInt(e)),this.grid.viewport.setScroll(e,void 0)}else r=Math.trunc(this.grid.scrollWidth/n*r),this.grid.viewport.setScroll(r,void 0)}finally{}}}get captionPanel(){var e;return null!==(e=this._captionPanel)&&void 0!==e?e:this._captionPanel=new R(this.grid)}get headerPanel(){var e;return null!==(e=this._headerPanel)&&void 0!==e?e:this._headerPanel=new P(this.grid)}get bodyPanel(){var e;return null!==(e=this._bodyPanel)&&void 0!==e?e:this._bodyPanel=new E(this.grid)}get footerPanel(){var e;return null!==(e=this._footerPanel)&&void 0!==e?e:this._footerPanel=new O(this.grid)}get filterPanel(){var e;return null!==(e=this._filterPanel)&&void 0!==e?e:this._filterPanel=new I(this.grid)}get sbScrollbar(){var e;return null!==(e=this._sbScrollbar)&&void 0!==e?e:this._sbScrollbar=new v.SbScrollBar(this.grid)}get scrollLeft(){var e;return null!==(e=this._scrollLeft)&&void 0!==e?e:this._scrollLeft=0}set scrollLeft(e){const t=Math.max(0,Math.min(e,this.grid.scrollWidth-this.grid.viewportWidth));this._scrollLeft!=t&&(this._scrollLeft=t,this.grid.styleScroll.set(`>.${h.SbCss.scroll}>.${h.SbCss.scroll_body}>.${h.SbCss.panel}>div>.${h.SbCss.body}>.${h.SbCss.scroll}`,{"margin-left":-this.scrollLeft+"px"}),this.grid.applyStyle())}get scrollTop(){var e;return null!==(e=this._scrollTop)&&void 0!==e?e:this._scrollTop=0}set scrollTop(e){if(this._scrollTop==e)return;this.grid.viewport.getRowScrollInfo(e).then((e=>this.grid.view.topRow=e.index));const t=this.scrollHeight,r=this.viewportHeight;e=t-e>r?e:t-r,this._scrollTop=e,this.grid.styleScroll.set(`>.${h.SbCss.scroll}>.${h.SbCss.scroll_body}>.${h.SbCss.panel}.${h.SbCss.body}>.${h.SbCss.tbody}>.${h.SbCss.part}>.${h.SbCss.scroll}`,{"margin-top":-this.scrollTop+"px"}),this.grid.applyStyle()}set internalScrollTop(e){this._scrollTop=e}get rowsView(){return this.bodyPanel.rowsView}get viewportHeight(){var e;return null!==(e=this.bodyPanel.bodyHeight)&&void 0!==e?e:this.grid.container.height()}get scrollHeight(){return this.bodyPanel.scrollHeight}layoutPanel(e,t=!1){return n(this,void 0,void 0,(function*(){let r=i.JqUtils.adjustElement(e,`>div.${h.SbCss.panel}.${h.SbCss.scroll}`,`<div class='${h.SbCss.panel} ${h.SbCss.scroll}'></div>`),n=i.JqUtils.adjustElement(r,">div",`<div class='${h.SbCss.scroll_body}'></div>`);return t&&this.renderScrollbar(r),n}))}render(e){var t;return n(this,void 0,void 0,(function*(){l.Log.time("scrollPanel.render");const r=yield this.layoutPanel(e,!0);yield this.grid.view.getRow(0),yield this.captionPanel.render(r),this.grid.config.filterable===b.FilterMode.Row&&(yield this.filterPanel.render(r)),this.grid.hasHeader&&(yield this.headerPanel.render(r)),this.bodyPanel.layoutPanel(r),this.grid.hasFooter&&(yield this.footerPanel.render(r)),yield this.bodyPanel.render(r),this.grid.focusManager.addEventHandler(r),this.grid.selectManager.addEventHandler(r),null===(t=this.grid.tooltip)||void 0===t||t.addEventHandler(r),i.Convert.isValue(this.grid.contextMenu)&&this.addEventHandler(r),l.Log.timeEnd("scrollPanel.render")}))}addEventHandler(e){this.grid.setEvent("scrollPanel","contextmenu","contextmenu",(e=>this.onContextMenu(e)),e)}getCol(e){var t;if(0!=(null!==(t=null==e?void 0:e.length)&&void 0!==t?t:0))return e.closest(`.${h.SbCss.col}`)}getPanelLayout(e){if(i.Convert.isNull(null==e?void 0:e.isSticky))return this.bodyPanel.tbody.name;const{headers:t,footers:r}=this.bodyPanel.rowsView,n=i.Arrays.dfsSearch(t,(t=>t.rowItem===e)),o=i.Arrays.dfsSearch(r,(t=>t.rowItem===e));return i.Convert.isValue(n)?this.bodyPanel.thead.name:i.Convert.isValue(o)?this.bodyPanel.tfoot.name:this.bodyPanel.tbody.name}getPartLayout(e){switch(e.part){case f.PartType.Sticky:case f.PartType.Body:return f.PartType.Body}return e.part}rePositionMultiText(){var e;const t=c.SBGrid3.$(`div.${h.SbCss.floatingEditBox}`,this.grid.container),r=i.Convert.asNumber(null!==(e=t.attr("row"))&&void 0!==e?e:"-1");if(t.length<1)return;const n=i.Arrays.bfsSearch(this.grid.rows,(e=>e.rowIndex===i.Convert.asNumber(r)));for(const e of t){const t=i.Arrays.bfsSearch(this.grid.columns,(t=>t._name===e.id)),r=this.getPartLayout(t),o=this.getPanelLayout(n),s=c.SBGrid3.$(`div#${o} div.${h.SbCss.toClass(r)}`,this.grid.container).get(0);this.rePositionVertical(s,e,n),this.rePositionHorizontal(s,e,n,t)}}rePositionVertical(e,t,r){var n,i;const o=c.SBGrid3.$(`div.${h.SbCss.row}-${r.rowIndex}`,e),s=null!==(i=null===(n=null==o?void 0:o.get(0))||void 0===n?void 0:n.offsetTop)&&void 0!==i?i:-9999,a=e.getBoundingClientRect();t.offsetTop!=s&&(t.style.top=s+t.clientHeight<a.bottom-a.top?`${s}px`:`${o.offset().top-t.clientHeight-a.top+o.height()}px`)}rePositionHorizontal(e,t,r,n){var i,o;const s=r.isSticky?this.grid.getContainer(r,n,p.PanelType.Caption):this.grid.virtualColumn?c.SBGrid3.$(`div.${h.SbCss.row}-${r.rowIndex} span.${n.cellSelector}`,e).closest(`span.${h.SbCss.col}`):this.grid.getContainer(r,n,p.PanelType.Body),a=null!==(o=null===(i=null==s?void 0:s.get(0))||void 0===i?void 0:i.offsetLeft)&&void 0!==o?o:-9999;t.offsetLeft!=a&&(t.style.left=`${a}px`)}createStyle(e){return n(this,void 0,void 0,(function*(){let t=c.SBGrid3.$(`>div.${h.SbCss.panel}.${h.SbCss.scroll}>div>div`,e);yield this.captionPanel.createStyle(t),yield this.filterPanel.createStyle(t),yield this.headerPanel.createStyle(t),yield this.bodyPanel.createStyle(t),yield this.footerPanel.createStyle(t);const r=c.SBGrid3.$(`>.${h.SbCss.scroll}>.${h.SbCss.scrollv}`,this.grid.container),n=c.SBGrid3.$(`>.${h.SbCss.scroll}>.${h.SbCss.scrollh}`,this.grid.container);this.sbScrollbar.setSize(r,"y"),this.sbScrollbar.setSize(n,"x"),this.grid.styleScroll.set(`>.${h.SbCss.scroll}>.${h.SbCss.scroll_body}>.${h.SbCss.panel}.${h.SbCss.body}>.${h.SbCss.tbody}>.${h.SbCss.part}>.${h.SbCss.scroll}`,{"margin-top":-this.scrollTop+"px"})}))}renderScrollbar(e){const t=i.JqUtils.adjustElement(e,`>div.${h.SbCss.scrollh}`,`<div  class='${h.SbCss.scrollh}'></div>`),r=i.JqUtils.adjustElement(e,`>div.${h.SbCss.scrollv}`,`<div  class='${h.SbCss.scrollv}'></div>`);this.sbScrollbar.isScrollBar(r)?this.sbScrollbar.update(r):this.sbScrollbar.createScroll(r,"y"),this.sbScrollbar.isScrollBar(t)?this.sbScrollbar.update(t):this.sbScrollbar.createScroll(t,"x")}doCommand(e,t){return t.command!==d.Commands.Reload?super.doCommand(e,t):(this.reload(t),!0)}canCommand(e,t){"object"==typeof t&&t.command;return super.canCommand(e,t)}getContainer(e,t,r){let n;switch(r){case p.PanelType.Body:n=this._bodyPanel.tbody.getContainer(e,t),0==n.length&&(n=this._bodyPanel.thead.getContainer(e,t)),0==n.length&&(n=this._bodyPanel.tfoot.getContainer(e,t));break;case p.PanelType.Caption:n=this._captionPanel.getContainer(t);break;case p.PanelType.Header:n=this._headerPanel.getContainer(t);break;case p.PanelType.Footer:n=this._footerPanel.getContainer(t);break;case p.PanelType.Filter:n=this._filterPanel.getContainer(t)}return n}reload(e){l.Log.debug((()=>"scrollPanel.reload")),this._captionPanel=new R(this.grid),this._bodyPanel=new E(this.grid),this._footerPanel=new O(this.grid)}doScroll(e){try{i.Convert.isValue(this.wheelTimer)&&clearTimeout(this.wheelTimer),i.Convert.isNull(this.scrollCommand)?this.scrollCommand=e:(this.scrollCommand.scrollX+=e.scrollX,this.scrollCommand.scrollY+=e.scrollY);const t=this;this.wheelTimer=setTimeout((function(){t._doScroll(t.scrollCommand),t.wheelTimer=void 0,t.scrollCommand=void 0}),1)}finally{}return!1}setScrollPos(e,t){try{if(0==i.Convert.isNull(e)){const t=c.SBGrid3.$(`>.${h.SbCss.scroll}>.${h.SbCss.scrollh}`,this.grid.container),r=c.SBGrid3.$(t).find(".mCSB_container"),n=c.SBGrid3.$(t).find(".mCSB_scrollTools").width(),i=r.width()-n;if(this.grid.virtualColumn){const r=i/this.grid.scrollColumns.length*(e-this.grid.minTopCol);if(r>i)return;this.sbScrollbar.scrollTo(t,r,0,!1)}else{const t=c.SBGrid3.$(`>.${h.SbCss.scroll}>.${h.SbCss.scrollh}`,this.grid.container),r=c.SBGrid3.$(t).find(".mCSB_container").width(),n=(c.SBGrid3.$(t).find(".mCSB_dragger").width(),r*e/this.grid.scrollWidth);this.sbScrollbar.scrollTo(t,n,0,!1)}}if(0==i.Convert.isNull(t)){const e=c.SBGrid3.$(`>.${h.SbCss.scroll}>.${h.SbCss.scrollv}`,this.grid.container);if(this.grid.virtualRow){const r=c.SBGrid3.$(e).find(".mCSB_container"),n=c.SBGrid3.$(e).find(".mCSB_scrollTools").height(),i=r.height();let o=t*(i-n)/this.grid.maxTopRow,s=-this.sbScrollbar.getScrollTop(e);Math.abs(o-s)>2*this.grid.rowHeight&&this.sbScrollbar.scrollTo(e,0,o,!1)}else this.sbScrollbar.scrollTo(e,0,t,!1)}}finally{}}_doScroll(e){try{if(0!=e.scrollY)if(0==this.grid.config.virtualRow){const t=c.SBGrid3.$(`>.${h.SbCss.scroll}>.${h.SbCss.scrollv}`,this.grid.container),r=Math.trunc(e.scrollY),n=this.sbScrollbar.getScrollTop(t);let i=n-r*(this.grid.config.wheelDelta+10);i>0&&(i=0),0==n&&-2==r||this.sbScrollbar.scrollTo(t,0,i)}else{const t=c.SBGrid3.$(`>.${h.SbCss.scroll}>.${h.SbCss.scrollv}`,this.grid.container),r=Math.trunc(e.scrollY),n=this.sbScrollbar.getScrollTop(t);let i=n-r*this.grid.config.wheelDelta;this.sbScrollbar.setScrollTop(t,i),i>=0&&(i=0,this.grid.topRow=0),this.sbScrollbar.scrollTo(t,0,i)}else if(0!=e.scrollX){const t=c.SBGrid3.$(`>.${h.SbCss.scroll}>.${h.SbCss.scrollh}`,this.grid.container),r=Math.trunc(e.scrollX);let n=0;const i=this.sbScrollbar.scrollLeft(t);n=i+r,i+r>0&&(n=0),this.sbScrollbar.scrollTo(t,-n,0)}}finally{}}adjustStickyColumns(e){return e}addClass(e,t,r,n=void 0){switch(t){case p.PanelType.Caption:return this.captionPanel.addClass(e,r,n);case p.PanelType.Filter:return this.filterPanel.addClass(e,r,n);case p.PanelType.Header:return this.headerPanel.addClass(e,r,n);case p.PanelType.Body:return this.bodyPanel.addClass(e,r,n);case p.PanelType.Footer:return this.footerPanel.addClass(e,r,n)}}removeClass(e,t,r,n=void 0){switch(t){case p.PanelType.Caption:return this.captionPanel.removeClass(e,r,n);case p.PanelType.Filter:return this.filterPanel.removeClass(e,r,n);case p.PanelType.Header:return this.headerPanel.removeClass(e,r,n);case p.PanelType.Body:return this.bodyPanel.removeClass(e,r,n);case p.PanelType.Footer:return this.footerPanel.removeClass(e,r,n)}}get panels(){var e;return null!==(e=this._panels)&&void 0!==e?e:this._panels=[]}}t.ScrollPanel=k;class T extends s.GridPanel{constructor(e,t){super(e,t)}get layout(){}get cells(){return this.getFullCells(this.layout)}render(e){return n(this,void 0,void 0,(function*(){let t=i.JqUtils.adjustElement(e,`>div#${this.name}`,`<div class='${h.SbCss.panel} ${this._class}' id='${this.name}' role='rowgroup'></div>`);yield this.renderParts(t,`${this._class}`)}))}renderParts(e,t){var r,i,o;return n(this,void 0,void 0,(function*(){if(0==(null!==(o=null===(i=null===(r=this.layout)||void 0===r?void 0:r.rows)||void 0===i?void 0:i.length)&&void 0!==o?o:0))return;yield this.renderPart(e,f.PartType.Fixed,h.SbCss.fixed),yield this.renderPart(e,f.PartType.Head,h.SbCss.head),yield this.renderPart(e,f.PartType.Body,h.SbCss.body),yield this.renderPart(e,f.PartType.Tail,h.SbCss.tail)}))}renderPart(e,t,r){return n(this,void 0,void 0,(function*(){let n=this.makePart(e,t,r);return yield this.renderColumns(n,t,r),n}))}getRowParentCss(e,t){return`>.${h.SbCss.panel}.${h.SbCss.scroll}>.${h.SbCss.scroll_body}>.${h.SbCss.panel}.${e}>.${h.SbCss.area}>.${t}>.${h.SbCss.scroll}`}makePart(e,t,r){let n=i.JqUtils.adjustElement(e,`>div.${r}`,`<div class='${h.SbCss.part} ${r}'></div>`);const o=this.grid.defaultLayout.rows[0].getCells(t);let s=`${h.SbCss.scroll}`,a=i.JqUtils.adjustElement(n,`>div.${h.SbCss.scroll}`,`<div class='${s}'></div>`);return i.JqUtils.changeClass(a,s),i.Convert.isEmpty(o)&&a.empty(),!this.grid.config.freezable||t!=f.PartType.Head&&t!=f.PartType.Tail||n.addClass(h.SbCss.frozen),a}renderColumns(e,t,r){return n(this,void 0,void 0,(function*(){}))}createStyle(e){return n(this,void 0,void 0,(function*(){const t=this.cells,r=e.width();let n=0;if(t.some((e=>e.unit!=f.Unit.Pixel))){let e=0,i=0;for(const r in t){const n=t[r];n.unit==f.Unit.Pixel?e+=n.width:i+=n.width}const o=this.splitPart(t),s=r-e,a=`.${h.SbCss.scroll_body} > .${h.SbCss.panel} > .${h.SbCss.area} > .${h.SbCss.part}`;n=s/i,this.grid.style.set(a+`.${h.SbCss.fixed}`,{width:this.calcPartWidth(o.fixed,n)+"px"}),this.grid.style.set(a+`.${h.SbCss.head}`,{width:this.calcPartWidth(o.head,n)+"px"}),this.grid.style.set(a+`.${h.SbCss.body}`,{width:this.calcPartWidth(o.body,n)+"px"}),this.grid.style.set(a+`.${h.SbCss.tail}`,{width:this.calcPartWidth(o.tail,n)+"px"})}yield this.createStylePart(e,f.PartType.Fixed,h.SbCss.fixed,n),yield this.createStylePart(e,f.PartType.Head,h.SbCss.head,n),yield this.createStylePart(e,f.PartType.Body,h.SbCss.body,n),yield this.createStylePart(e,f.PartType.Tail,h.SbCss.tail,n)}))}createStylePart(e,t,r,i){return n(this,void 0,void 0,(function*(){}))}getElement(e,t){throw new Error("Method not implemented.")}getCell(e,t=void 0){throw new Error("Method not implemented.")}addClass(e,t,r=void 0){const n=this.getElement(t,r);return i.JqUtils.addClass(n,e),n}removeClass(e,t,r=void 0){const n=this.getElement(t,r);return i.JqUtils.removeClass(n,e),n}calcHeaderClass(e,t,r,n){const o=t[r.row],s=null==o?void 0:o.cssClass;let a="";return i.Convert.isValue(s)&&(a+=" "+("function"==typeof s?s(n()):s)),i.Convert.isValue(null==o?void 0:o.align)?a+=` ${h.SbCss.toClass(o.align)}`:a+=` ${h.SbCss.toClass(e.config.align)}`,a}unit(e){return e===f.Unit.Pixel?"px":"fr"}getFullCells(e){var t;const r=[];for(const n in null!==(t=null==e?void 0:e.rows)&&void 0!==t?t:[]){const t=e.rows[n];for(const e in t.cells){const n=t.cells[e];r[n.column.index]=n}}return r}splitPart(e){const t={fixed:[],head:[],body:[],tail:[]};for(const r in e){const n=e[r];switch(n.part){case f.PartType.Fixed:t.fixed.push(n);break;case f.PartType.Head:t.head.push(n);break;case f.PartType.Sticky:case f.PartType.Body:t.body.push(n);break;case f.PartType.Tail:t.tail.push(n)}}return t}calcPartWidth(e,t){var r;let n=0;for(const i in e){const o=e[i];if(o.unit===f.Unit.Pixel)n+=o.width;else n+=t>0?o.width*t:null!==(r=o.column.minWidth)&&void 0!==r?r:0}return n}}t.LayoutPanel=T;class R extends T{constructor(e){super(e,h.SbCss.caption),this.grid.scrollPanel.panels.push(this)}get columnResize(){var e,t,r;return null!==(e=this._columnResize)&&void 0!==e?e:i.Convert.isValue(null===(r=null===(t=this.grid)||void 0===t?void 0:t.config)||void 0===r?void 0:r.resizable)?this._columnResize=new m.ColumnResize(this.grid):void 0}get columnReorder(){var e;return null!==(e=this._columnReorder)&&void 0!==e?e:this._columnReorder=new C.ColumnReorder(this.grid)}get layout(){return this.grid.captionLayout}renderParts(e,t){const r=Object.create(null,{renderParts:{get:()=>super.renderParts}});var o;return n(this,void 0,void 0,(function*(){let n=i.JqUtils.adjustElement(e,`>div.${h.SbCss.thead}`,`<div class='${h.SbCss.area} ${h.SbCss.thead}' ></div>`);yield r.renderParts.call(this,n,t),null===(o=this.columnResize)||void 0===o||o.renderIndecator(e),this.grid.config.reorderable.column&&this.columnReorder.renderReorderIndicator(e),this.grid.config.freezable&&this.columnReorder.renderFrozenIndicator(e)}))}renderColumns(e,t,r){var o,s,a;return n(this,void 0,void 0,(function*(){let r=i.JqUtils.adjustElement(e,`>div.${h.SbCss.row}.${h.SbCss.caption}`,`<div class='${h.SbCss.row} ${h.SbCss.caption}' role='row'></div>`);if(0==(null!==(a=null===(s=null===(o=this.layout)||void 0===o?void 0:o.rows)||void 0===s?void 0:s.length)&&void 0!==a?a:0))return r;const n=this.layout,l=new Set;for(const e of n.rows){const n=e.getCells(t);for(const e in n){const t=n[e],o=t.column,{colSelector:s,colClass:a}=this.makeColClass(o,t);l.add(s);let u=i.JqUtils.adjustElement(r,`>span.${s}`,`<span class='${a}' role='columnheader'></span>`);i.JqUtils.changeClass(u,a),u.data("col",t.col),u.data("column",o),u.data("cell",t),i.JqUtils.changeDataset(u,"selector",s),i.Convert.isValue(o.captionTemplate)?i.JqUtils.adjustHtml(u,o.captionTemplate(this)):yield o.renderCaption(u),this.grid.config.reorderable.column&&(this.columnReorder.addDraggableColumn(u),this.columnReorder.addDroppableColumn(u)),!0===this.grid.config.groupable&&g.ToolGroup.addDraggableHandler(u,this.grid)}}return i.JqUtils.movetoTrash(this.grid.trashCan,r,l),r}))}makeColClass(e,t,r){let n=`${h.SbCss.col}-${t.row+1}-${t.col}`,o=`${n} ${h.SbCss.col}`;return 0==i.Convert.isWhite(e.config.captionCss)&&(o+=` ${e.config.captionCss}`),e.part==f.PartType.Sticky&&(o+=` ${h.SbCss.sticky}`),0==e.width&&(o+=` ${h.SbCss.hidden}`),o+=this.grid.selectManager.makeSelectClass(r,e,t,this.grid.captionLayout,p.PanelType.Caption),{colSelector:n,colClass:o}}createStylePart(e,t,r,o){var s,a,l,u,c,d,p,m;return n(this,void 0,void 0,(function*(){if(0==(null!==(l=null===(a=null===(s=this.layout)||void 0===s?void 0:s.rows)||void 0===a?void 0:a.length)&&void 0!==l?l:0))return;let e;const n=[],g=this.layout,v=null===(u=g.rows[0])||void 0===u?void 0:u.cells[(null===(c=g.rows[0])||void 0===c?void 0:c.cells.length)-1];if(i.Convert.isNull(v))return;v.col,v.colSpan;const y=this.getRowParentCss(h.SbCss.caption,r);for(const r of g.rows){const s=r.getCells(t);for(const t in s){const r=s[t],a=r.column;i.Convert.isNull(e)&&(e=r.col-1);const l=`${h.SbCss.col}-${r.row+1}-${r.col}`,u=null!==(d=r.colSpan)&&void 0!==d?d:0,c=null!==(p=r.rowSpan)&&void 0!==p?p:0,g={"grid-column":`${r.col-e}${u>1?" / span "+u:""}`,"grid-row":`${r.row+1}${c>1?" / span "+c:""}`};a.part==f.PartType.Sticky&&(g.position="sticky",g.left=r.stickyLeft,g.right=r.stickyRight,g["z-index"]=r.col),this.grid.style.set(`${y}>.${h.SbCss.row}.${h.SbCss.caption}>.${h.SbCss.col}.${l}`,g),r.unit==f.Unit.Pixel?n[a.index]=r.width+this.unit(r.unit):n[a.index]=o>0?`minmax(${r.minWidth+this.unit(f.Unit.Pixel)}, ${r.width+this.unit(r.unit)})`:(null!==(m=r.minWidth)&&void 0!==m?m:0)+this.unit(f.Unit.Pixel)}}const b=this.getRowParentCss(h.SbCss.header,r),w=this.getRowParentCss(h.SbCss.footer,r),C=this.getRowParentCss(h.SbCss.filter,r),_=this.getRowParentCss(h.SbCss.body,r),S=i.Convert.isValue(n)?n.join(" "):"none";this.grid.style.set(`${y}>.${h.SbCss.row}.${h.SbCss.caption}`,{display:"grid","grid-auto-rows":`minmax(${this.grid.config.captionHeight}px, ${this.grid.config.captionHeight+"px"})`,"grid-template-columns":S}),this.grid.style.set(`${b}>.${h.SbCss.row}.${h.SbCss.header}`,{display:"grid","grid-auto-rows":`minmax(${this.grid.config.headerHeight}px, ${this.grid.config.headerHeight+"px"})`,"grid-template-columns":S}),this.grid.style.set(`${_}>.${h.SbCss.row}`,{display:"grid","grid-auto-rows":`minmax(${this.grid.config.rowHeight}px, ${this.grid.fixedRows?this.grid.config.rowHeight+"px":"auto"})`,"grid-template-columns":S}),this.grid.style.set(`${_}>.${h.SbCss.row}.${h.SbCss.variable}`,{"max-height":`${this.grid.config.maxRowHeight}px`}),this.grid.style.set(`${_}>.${h.SbCss.row}.${h.SbCss.detail}`,{display:"grid","grid-auto-rows":`minmax(${this.grid.config.detailHeight}px, ${this.grid.fixedRows?this.grid.config.detailHeight+"px":"auto"})`,"grid-template-columns":S}),this.grid.style.set(`${_}>.${h.SbCss.row}.${h.SbCss.variable}.${h.SbCss.detail}`,{"max-height":`${this.grid.config.maxDetailHeight}px`}),this.grid.style.set(`${_}>.${h.SbCss.row}.${h.SbCss.tree}.${h.SbCss.footer}`,{display:"grid","grid-auto-rows":`minmax(${this.grid.config.groupHeight}px, ${this.grid.config.groupHeight+"px"})`,"grid-template-columns":S}),i.Convert.isValue(this.grid.dataConfig.groups)&&(this.grid.style.set(`${_}>.${h.SbCss.row}.${h.SbCss.group}.${h.SbCss.header}`,{display:"grid","grid-auto-rows":`minmax(${this.grid.config.groupHeight}px, ${this.grid.config.groupHeight+"px"})`,"grid-template-columns":S}),this.grid.style.set(`${_}>.${h.SbCss.row}.${h.SbCss.group}.${h.SbCss.footer}`,{display:"grid","grid-auto-rows":`minmax(${this.grid.config.groupHeight}px, ${this.grid.config.groupHeight+"px"})`,"grid-template-columns":S})),this.grid.style.set(`${w}>.${h.SbCss.row}`,{display:"grid","grid-auto-rows":`minmax(${this.grid.config.footerHeight}px, ${this.grid.config.footerHeight+"px"})`,"grid-template-columns":S}),this.grid.style.set(`${C}>.${h.SbCss.row}`,{display:"grid","grid-auto-rows":`minmax(${this.grid.config.filterHeight}px, ${this.grid.config.filterHeight+"px"})`,"grid-template-columns":S})}))}getContainer(e){const t=i.Utils.findCellFromColumn(this.grid.captionLayout,e);if(i.Convert.isNull(t))return;const r=c.SBGrid3.$(`.${h.SbCss.part}${i.Convert.isNull(t)?"":"."+h.SbCss.toClass(t.part==f.PartType.Sticky?p.PanelType.Body:t.part)} div.${h.SbCss.row}.${h.SbCss.caption}`,this.grid.container),{colSelector:n}=this.makeColClass(e,t);return c.SBGrid3.$(`.${n}`,r)}getCell(e,t=void 0){return this.grid.captionLayout.findCell(e)}getElement(e,t){const r=c.SBGrid3.$(`> .${h.SbCss.panel}.${h.SbCss.scroll} > .${h.SbCss.scroll_body} > .${h.SbCss.caption} > .${h.SbCss.area} > .${h.SbCss.part} > .${h.SbCss.scroll} > .${h.SbCss.row}`,this.grid.container),n=this.getCell(e);return i.Convert.isNull(n)?r:c.SBGrid3.$(`> .${h.SbCss.col}-${n.row+1}-${n.col}`,r)}doCommand(e,t){return t.command!==d.Commands.Escape?super.doCommand(e,t):(this.doCancelDrag(t),!0)}doCancelDrag(e){const t=c.SBGrid3.$(`div.${h.SbCss.panel}.${h.SbCss.caption}`,this.grid.container);C.ColumnReorder.cancelDrag(t)}}t.CaptionPanel=R;class E extends T{constructor(e){super(e,h.SbCss.body),this.onMouseWheel=e=>n(this,void 0,void 0,(function*(){if(e.originalEvent instanceof WheelEvent){let t=Math.trunc(e.originalEvent.deltaY/50),r=Math.trunc(e.originalEvent.deltaX);this.grid.fireCommandAsync(this,new u.ScrollCommand(r,t))}return!1})),this.onMouseMove=e=>{const t=e.pageX-e.currentTarget.offsetLeft,r=e.pageY-e.currentTarget.offsetTop;l.Log.debug((()=>[t,r]))},this.onMouseDown=e=>{const t=e.pageX-e.currentTarget.offsetLeft,r=e.pageY-e.currentTarget.offsetTop;l.Log.debug((()=>[t,r]))},this.grid.scrollPanel.panels.push(this)}get thead(){var e;return null!==(e=this._headerPanel)&&void 0!==e?e:this._headerPanel=new M(this.grid,h.SbCss.thead,(()=>this.rowsView.headers),!0,!1)}get tbody(){var e;return null!==(e=this._rowsPanel)&&void 0!==e?e:this._rowsPanel=new M(this.grid,h.SbCss.tbody,(()=>this.rowsView.currRows),!1,!0)}get tfoot(){var e;return null!==(e=this._footerPanel)&&void 0!==e?e:this._footerPanel=new M(this.grid,h.SbCss.tfoot,(()=>this.rowsView.footers),!0,!1)}get rowsView(){var e;return null!==(e=this._rowsView)&&void 0!==e?e:this._rowsView={}}get rows(){return[].concat(this._rowsView.prevRows).concat(this._rowsView.currRows).concat(this._rowsView.nextRows)}get bodyHeight(){return this._bodyHeight}get scrollHeight(){return this.tbody.scrollHeight}get layout(){return this.grid.rowLayout}layoutPanel(e){return i.JqUtils.adjustElement(e,`>div#${this.name}`,`<div class='${h.SbCss.panel} ${this._class}' id='${this.name}'></div>`)}render(e){return n(this,void 0,void 0,(function*(){const t=this.name+"_render";l.Log.time(t);const r=this.layoutPanel(e);this.grid.config.reorderable.row&&this.grid.rowReorder.renderReorderIndicator(r),this._bodyHeight=r.height(),yield this.ensureRowsView(),yield this.thead.render(r),yield this.tbody.render(r),yield this.tfoot.render(r),this.grid.setEvent("scrollWheel","wheel",this.constructor.name,this.onMouseWheel,r[0]),r.get(0).removeEventListener("mousedown",this.onMouseDown),r.get(0).addEventListener("mousedown",this.onMouseDown,{passive:!0,capture:!1}),l.Log.timeEnd(t)}))}createStylePart(e,t,r,o){var s,a,l,u,c;return n(this,void 0,void 0,(function*(){if(0==(null!==(l=null===(a=null===(s=this.layout)||void 0===s?void 0:s.rows)||void 0===a?void 0:a.length)&&void 0!==l?l:0))return;const e=i.Convert.isValue(this.grid.dataConfig.groups);if(this.createRowStyle(this.layout,t,r,"",0,0),e){const e=this.grid.dataConfig.groups;for(let n=0;n<(null!==(u=e.length)&&void 0!==u?u:0);n++){const i=e[n].field,{header:o,footer:s}=this.grid.groupLayout(i);this.createRowStyle(o,t,r,"."+h.SbCss.group+"."+h.SbCss.header+"."+h.SbCss.toClass(i),e.length,n),this.createRowStyle(s,t,r,"."+h.SbCss.group+"."+h.SbCss.footer+"."+h.SbCss.toClass(i),e.length,n)}}i.Convert.isValue(null===(c=this.grid.dataConfig.tree)||void 0===c?void 0:c.aggregates)&&this.createRowStyle(this.grid.treeFooterLayout,t,r,"."+h.SbCss.tree+"."+h.SbCss.footer,0,0),i.Convert.isValue(this.grid.detailTemplate)&&this.createRowStyle(this.grid.detailLayout,t,r,"."+h.SbCss.detail,0,0)}))}createRowStyle(e,t,r,n,o,s){var a,l,u,c;const d=null===(a=e.rows[0])||void 0===a?void 0:a.cells[(null===(l=e.rows[0])||void 0===l?void 0:l.cells.length)-1];if(i.Convert.isNull(d))return;d.col,d.colSpan;let f,p;const m=this.getRowParentCss(h.SbCss.body,r);for(const r of e.rows){const e=r.getCells(t);let o;for(const t in e){const r=e[t];i.Convert.isNull(f)&&(f=r.col-1,p=f);const s=r.column,a=`${h.SbCss.col}-${r.row+1}-${r.col}`,l=null!==(u=r.colSpan)&&void 0!==u?u:0,d=null!==(c=r.rowSpan)&&void 0!==c?c:0;p=Math.max(p,r.col);const g={"grid-column":`${r.col-f}${l>1?" / span "+l:""}`,"grid-row":`${r.row+1}${d>1?" / span "+d:""}`};s.isSticky&&(g.position="sticky",g.left=r.stickyLeft,g.right=r.stickyRight,g["z-index"]=r.col),o=r,this.grid.style.set(`${m}>.${h.SbCss.row}${n}>.${h.SbCss.col}.${a}`,g)}}return o>0&&this.grid.style.set(`${m}>.${h.SbCss.row}.${h.SbCss.group}.${h.SbCss.header}${n}>.${h.SbCss.col}.${h.SbCss.group}.${h.SbCss.title}`,{"grid-column-end":`${o+2}`}),{firstCol:f,lastCol:p}}createStyle(e){const t=Object.create(null,{createStyle:{get:()=>super.createStyle}});return n(this,void 0,void 0,(function*(){yield t.createStyle.call(this,e),this.createStyleStickyRow(e,this.rowsView.currRows)}))}createStyleStickyRow(e,t){var r,n;if(0==this.grid.config.stickyRow)return;if(i.Convert.isNull(t))return;const o=null===(r=this.layout.rows[0])||void 0===r?void 0:r.cells[(null===(n=this.layout.rows[0])||void 0===n?void 0:n.cells.length)-1];if(i.Convert.isNull(o))return;let s=o.col+o.colSpan;const l=1==this.grid.config.stickyFooter;for(const e of t)(e.rowItem.isSticky||l&&e.rowItem.node instanceof a.FooterNode)&&s++;let u=0,c=0;const d=new Map,f=[];for(const e of t){const t=e.rowItem,r=m(this.tbody.name,t);if(this._rowsView.stickyKeys.has(e.rowItem.key)||l&&t.node instanceof a.FooterNode){d.set(r,{top:c,position:"sticky"});c+=this.grid.viewport.getItemHeight(e.rowItem).height,f.push(e.rowItem)}}s+=f.length;for(const e of[].concat(f).reverse()){const t=m(this.tbody.name,e),r=d.get(t);r.bottom=u,r["z-index"]=s--,d.set(t,r);u+=this.grid.viewport.getItemHeight(e).height}function p(e){return`#${e} > .${h.SbCss.part} > .${h.SbCss.scroll} > .${h.SbCss.row}-`}function m(e,t){return p(e)+`${t.rowIndex}`}!function(e,t){const r=p(e),n=t.keys;for(const e of n)e.includes(r)&&t.delete(e);for(const e of d.keys())t.set(e,d.get(e))}(this.tbody.name,this.grid.styleScroll)}ensureRowsView(e=void 0){return n(this,void 0,void 0,(function*(){i.Convert.isNull(e)&&(e=this.bodyHeight),this._rowsView=yield this.grid.viewport.makeRows()}))}getCell(e,t=void 0){if(i.Convert.isNull(e))return null;switch(null==t?void 0:t.node.constructor.name){case a.GroupItem.name:case a.ListNode.name:case a.TreeNode.name:return this.grid.rowLayout.findCell(e);case a.GroupNode.name:const{header:r}=this.grid.groupLayout(t.node.igroup.field);return r.findCell(e);case a.FooterNode.name:const n=t.node.parent;if(n instanceof a.GroupNode){const{footer:t}=this.grid.groupLayout(n.igroup.field);return t.findCell(e)}return this.grid.treeFooterLayout.findCell(e)}}getElement(e,t){const r=c.SBGrid3.$(`> .${h.SbCss.panel}.${h.SbCss.scroll} > .${h.SbCss.scroll_body} > .${h.SbCss.body} > .${h.SbCss.area} > .${h.SbCss.part} > .${h.SbCss.scroll} > .${h.SbCss.row}-${t.rowIndex}`,this.grid.container),n=this.getCell(e,t);return i.Convert.isNull(n)?r:c.SBGrid3.$(`> .${h.SbCss.col}-${n.row+1}-${n.col}`,r)}}t.BodyPanel=E;class M extends T{constructor(e,t,r,i,o){super(e,t),this.detailScroll=e=>!1,this.detailWheel=e=>n(this,void 0,void 0,(function*(){if(e.originalEvent instanceof WheelEvent){c.SBGrid3.$(e.target);Math.trunc(e.originalEvent.deltaY/50),Math.trunc(e.originalEvent.deltaX);if(this.isScrollable(e.currentTarget,e.originalEvent).vertical)return!1;e.stopPropagation()}return!0})),this.isScrollable=function(e,t){return{vertical:e.scrollHeight>e.clientHeight&&(t.deltaY>0?e.scrollTop+e.clientHeight+M.wheelScrollThreshold<e.scrollHeight:e.scrollTop>0),horizontal:e.scrollWidth>e.clientWidth&&(t.deltaX>0?e.scrollLeft+e.clientWidth+M.wheelScrollThreshold<e.scrollWidth:e.scrollLeft>0)}},this._view=r,this._ignoreRange=i,this._isBody=o}get scrollHeight(){return this._scrollHeight}get viewportHeight(){return this._height}get layout(){return this.grid.rowLayout}get isBody(){return this._isBody}render(e){var t;return n(this,void 0,void 0,(function*(){let r=i.JqUtils.adjustElement(e,`>div#${this.name}`,`<div class='${h.SbCss.area} ${this._class}' id='${this.name}'></div>`);i.Convert.isEmpty(null===(t=this.layout)||void 0===t?void 0:t.rows)||(yield this.renderRows(r,this._view(),this._ignoreRange),this.grid.focusManager.initEditEvent(e),this._height=r.height())}))}renderRows(e,t,r){var o,s,a,u;return n(this,void 0,void 0,(function*(){if(i.Convert.isEmpty(null===(s=null===(o=this.layout.rows)||void 0===o?void 0:o[0])||void 0===s?void 0:s.cells))return;if(i.Convert.isEmpty(t))return e.empty(),void(this.isBody&&0==(null!==(a=this.grid.total)&&void 0!==a?a:0)&&this.renderEmptyRows(e,!1));this.renderEmptyRows(e,!0);const n=[{part:f.PartType.Fixed,clazz:h.SbCss.fixed,container:this.makePart(e,f.PartType.Fixed,h.SbCss.fixed)},{part:f.PartType.Head,clazz:h.SbCss.head,container:this.makePart(e,f.PartType.Head,h.SbCss.head)},{part:f.PartType.Body,clazz:h.SbCss.body,container:this.makePart(e,f.PartType.Body,h.SbCss.body)},{part:f.PartType.Tail,clazz:h.SbCss.tail,container:this.makePart(e,f.PartType.Tail,h.SbCss.tail)}],d=this.grid.refreshCommand,p=new Set;let m=!1;const g=this.grid.fixedRows;let v=0;for(let o in t){const s=t[o],a=null==s?void 0:s.rowItem;if(i.Convert.isNull(a)){l.Log.warn((()=>"rowItem is null"));continue}const f=s.merge,y=this.makeRowClass(a),b=this.makeRowClass(a,!0),w=null!==(u=s.rowHeight)&&void 0!==u?u:{total:0,height:0,detail:0};p.add(y.rowSelector),0==i.Convert.isNull(b)&&p.add(b.rowSelector);let C=0,_=0,S=!1;if(0==r&&0==i.Convert.between(null==d?void 0:d.rowStart,a.rowIndex,null==d?void 0:d.rowEnd)){const t=c.SBGrid3.$(`>.${h.SbCss.part}>.${h.SbCss.scroll}>.${y.rowSelector}`,e);t.length>0&&(t.each(((e,t)=>{C=Math.max(C,c.SBGrid3.$(t).height())})),C=Math.min(i.Convert.asInt(C),this.grid.config.maxRowHeight),S=!0)}if(0==S){this.grid.dataSource.hasCalcFields&&this.grid.view.calculateFields(a);for(const e of n){const{height:t,detail:r,total:n}=yield this.renderRow(a,e.container,v,s.rowHeight,e.clazz,e.part,f,d,y,b);C=Math.max(C,t),_=Math.max(_,r)}C>0&&(C=Math.min(i.Convert.asInt(C),this.grid.config.maxRowHeight)),_>0&&(_=Math.min(i.Convert.asInt(_),this.grid.config.maxDetailHeight))}if(0==g&&(C>0||_>0)){if(m=!0,w.height<=C){w.height=C,this.grid.setRowHeight(a,C,void 0);for(const e of n){const t=c.SBGrid3.$(`>.${y.rowSelector}`,e.container);t.height(C),C==this.grid.config.maxRowHeight?i.JqUtils.addClass(t,h.SbCss.scroll):i.JqUtils.removeClass(t,h.SbCss.scroll)}}if(w.detail<=_){w.detail=_,this.grid.setRowHeight(a,void 0,_);for(const e of n){const t=c.SBGrid3.$(`>.${b.rowSelector}`,e.container);t.height(_),_==this.grid.config.maxDetailHeight?i.JqUtils.addClass(t,h.SbCss.scroll):i.JqUtils.removeClass(t,h.SbCss.scroll)}}w.total=w.height+w.detail}v+=w.total}const y=`${h.SbCss.last}`;p.add(y);for(const e of n){c.SBGrid3.$(`>div.${y}`,e.container).remove();const t=i.JqUtils.adjustElement(e.container,`>div.${y}`,`<div class='${h.SbCss.row} ${h.SbCss.last}' data-selector='${y}' />`);i.JqUtils.changeDataset(t,"selector",y),t.css("transform","")}for(const e of n)i.JqUtils.movetoTrash(this.grid.trashCan,e.container,p);if(this._scrollHeight=v,(!this.grid.fixedRows||0!=this.grid.mergeRow)&&(this.renderMerge(t,e),m)){let e=0;for(const r of t)r.rowHeight.total=r.rowHeight.height+r.rowHeight.detail,e+=r.rowHeight.total;this.grid.calcRowHeights()}}))}renderEmptyRows(e,t){const r=new Set,n=i.JqUtils.adjustElement(e,`>span.${h.SbCss.empty}`,`<span class='${h.SbCss.empty}'></span>`,void 0,r);if(t)n.remove();else{if(i.Convert.isEmpty(this.grid.emptyTemplate)){const e=`<div class="search-result"><span class="search-result-wrap"><span class="sbgrid-icon sbgrid-search"></span><span class="sbgrid-text">${this.grid.emptyMessage}</span></span></div>`;i.JqUtils.adjustHtml(n,e)}else{const e=this.grid.emptyTemplate(this.grid);i.JqUtils.adjustHtml(n,e)}i.JqUtils.movetoTrash(this.grid.trashCan,e,r)}}renderMerge(e,t){var r;const n=e.map((e=>e.rowHeight));for(let o=0,s=e.length;o<s;o++){const s=e[o];if(i.Convert.isNull(s.rowItem))continue;const a=null===(r=s.rowItem)||void 0===r?void 0:r.rowIndex,l=`>div>.${h.SbCss.scroll}>.${h.SbCss.row}-${a}>.${h.SbCss.col}.${h.SbCss.merge}`,u=c.SBGrid3.$(l,t);if(u.length>0)for(let t=0,r=u.length;t<r;t++){const r=c.SBGrid3.$(u[t]),s=r.data("cell");if(!i.Convert.isNull(s)&&s.mergeRow>1){let t=0;for(let r=o,i=o+s.mergeRow;r<i&&!(r>=e.length);r++)t+=n[r].height;const i=r.outerHeight(!0)-r.height();r.height(t-i)}}}}renderRow(e,t,r,o,s,l,u,c,h,d){var f,p,m;return n(this,void 0,void 0,(function*(){const r={height:null!==(f=null==o?void 0:o.height)&&void 0!==f?f:0,detail:null!==(p=null==o?void 0:o.detail)&&void 0!==p?p:0,total:null!==(m=null==o?void 0:o.total)&&void 0!==m?m:0};let n=e.rowIndex;const{layout:g,isGroupHeader:v,isGroupFooter:y,isTreeFooter:b}=this.getLayout(e);if(0==g.rows[0].getCells(l).length)return r;let w=i.JqUtils.adjustElement(t,`>div.${h.rowSelector}`,`<div class='${s} ${h.rowClass}' role='row' aria-rowindex='${n+1}'></div>`,(e=>e.data("row")>n));if(i.JqUtils.changeDataset(w,"selector",h.rowSelector),w.data("row",n),w.data("rowItem",e),0==this.grid.fixedRows&&i.Convert.isValue(w.css("height"))&&w.css("height",""),i.JqUtils.changeClass(w,h.rowClass),this.grid.fixedRows)yield this.renderCols(g,l,u,e,c,w,n,v,y,b);else{yield this.renderCols(g,l,u,e,c,w,n,v,y,b);let t=i.Convert.asInt(w.height());e.node instanceof a.GroupNode||e.node instanceof a.FooterNode||(t<=o.height?(w.height(o.height),t=o.height):t>this.grid.config.maxRowHeight&&(w.height(this.grid.config.maxRowHeight),t=this.grid.config.maxRowHeight)),r.height=t}return this.grid.hasDetail&&(yield this.renderRowDetail(o,t,d,n,e,l,r)),r.total=r.height+r.detail,r}))}renderRowDetail(e,t,r,o,s,l,u){return n(this,void 0,void 0,(function*(){if(this.grid.hasDetail){let n=this.grid.detailHeight;const c=i.JqUtils.adjustElement(t,`>.${r.rowSelector}`,`<div class='${r.rowClass}' role='row' aria-rowindex='${o+1}'></div>`,(e=>e.data("row")>o));if(s.node instanceof a.GroupNode)i.JqUtils.addClass(c,h.SbCss.hidden);else if(i.JqUtils.changeDataset(c,"selector",r.rowSelector),c.css("height",this.grid.fixedRows&&s.isDetail?n:""),c.data("row",o),i.JqUtils.changeClass(c,r.rowClass),s.isDetail&&(yield this.renderColsDetail(l,s,c),u.detail=this.grid.fixedRows?0:c.height()),0==this.grid.fixedRows&&s.isDetail){let t=i.Convert.asInt(c.height());t<=e.detail?(c.height(e.detail),t=e.detail):t>this.grid.config.maxDetailHeight&&(c.height(this.grid.config.maxDetailHeight),t=this.grid.config.maxDetailHeight),u.detail=t}}else u.detail=0}))}renderCols(e,t,r,o,s,a,l,u,d,p){return n(this,void 0,void 0,(function*(){const n=new Set;let m;for(const g of e.rows){const e=g.getCells(t);if(i.Convert.isNull(m))for(const t in e){m=e[t].col;break}const v=t!=f.PartType.Fixed&&(this.grid.mergeColumn||this.grid.mergeRow)?this.grid.viewport.makeMerge(e,o,r):e;for(const e in v){const t=v[e],r=t.column,{colSelector:g,colClass:y}=this.makeColClass(o,r,t);n.add(g);const b=r.index;let w=c.SBGrid3.$(`>span.${g}`,a);if(w.length>0&&(i.Convert.isValue(null==s?void 0:s.colStart)&&s.colStart>b||i.Convert.isValue(null==s?void 0:s.colEnd)&&b>s.colEnd||i.Convert.isValue(null==s?void 0:s.cols)&&s.cols.indexOf(b)<0))0==this.grid.fixedRows&&w.css("height","");else{if(w=i.JqUtils.adjustElement(a,`>span.${g}`,`<span class='${y}' role='gridcell' aria-colindex='${r.colIndex}'></span>`),i.JqUtils.changeClass(w,y),w.data("col",r.index),w.data("row",l),w.data("column",r),w.data("cell",t),i.JqUtils.changeDataset(w,"selector",g),t.column.mergeRow&&t.mergeRow>1||t.column.mergeColumn&&t.mergeCol>1){if(this.grid.fixedRows){const e=w.outerHeight(!0)-w.outerHeight();w.css("height",this.grid.viewport.getItemHeight(o).height*t.mergeRow-e)}switch(w.css("grid-area",`${t.row+1} / ${t.col-m+1} / span ${t.rowSpan} / span ${t.colSpan+t.mergeCol-1}`),w.css("flex-direction","column"),r.valign){case f.VertAlign.Top:w.css("justify-content","flex-start");break;case f.VertAlign.Center:w.css("justify-content","center");break;case f.VertAlign.Bottom:w.css("justify-content","flex-end")}}else w.css("height",""),t.mergeRow;w.hasClass(h.SbCss.fillHandle)&&this.grid.selectManager.addFillHandlerEvent(w),this.renderValidationTooltip(w),1==s.onlyLayout&&w.children().length>0||(u?yield r.renderGroupHeader(w,o,t):d?yield r.renderGroupFooter(w,o,t):p?yield r.renderTreeFooter(w,o,t):o.isEdit&&0==t.merge&&r.isEdit(o)?yield r.renderEdit(w,o,t):yield r.renderCell(w,o,t))}}}i.JqUtils.movetoTrash(this.grid.trashCan,a,n)}))}renderColsDetail(e,t,r){return n(this,void 0,void 0,(function*(){const n=new Set,o=this.grid.detailLayout.rows;for(const s of o){const o=s.getCells(e);for(const e in o){const s=o[e];if(i.Convert.isNull(s)||0==s.visible)continue;const a=s.column,{colSelector:l,colClass:u}=this.makeColClass(t,a,s);n.add(l);let c=i.JqUtils.adjustElement(r,`>span.${l}`,`<span class='${u}' ></span>`);if(i.JqUtils.changeClass(c,u),i.JqUtils.changeDataset(c,"selector",l),i.Convert.isValue(a)){const e=yield a.renderDetail(c,t,s);this.grid.setEvent("detailScroll","scroll","detailScroll-"+t.rowIndex,this.detailScroll,e),this.grid.setEvent("detailWheel","wheel","detailScroll-"+t.rowIndex,this.detailWheel,e)}}}i.JqUtils.movetoTrash(this.grid.trashCan,r,n)}))}moveToHidden(e){i.Convert.isNull(e)||e.length>0&&this.grid.hiddenPanel.container.append(e)}static getCellFromColumn(e,t){for(const r of e.rows){let e=r.cells;for(const r of e)if(t==(null==r?void 0:r.column))return r}}getContainer(e,t=void 0){const{layout:r}=this.getLayout(e),{rowSelector:n}=this.makeRowClass(e),o=c.SBGrid3.$(`.${n}`,this.grid.container);if(i.Convert.isValue(t)){const n=M.getCellFromColumn(r,t),{colSelector:i}=this.makeColClass(e,t,n);return c.SBGrid3.$(`.${i}`,o)}return o}getLayout(e){let t=this.layout,r=!1,n=!1,o=!1;if((null==e?void 0:e.node)instanceof a.GroupNode){const n=e.node.igroup.field,o=this.grid.groupLayout(n).header;i.Convert.isValue(o.rows)&&(t=o,r=!0)}else if((null==e?void 0:e.node)instanceof a.FooterNode)if(e.node.parent instanceof a.GroupNode){const r=e.node.parent.igroup.field,o=this.grid.groupLayout(r).footer;i.Convert.isValue(o.rows)&&(t=o,n=!0)}else if(e.node.parent instanceof a.TreeNode){const e=this.grid.treeFooterLayout;i.Convert.isValue(e.rows)&&(t=e,o=!0)}return{layout:t,isGroupHeader:r,isGroupFooter:n,isTreeFooter:o}}makeColClass(e,t,r){var n,s,l;const u=r.mergeRow>1||r.mergeCol>1,c=0===r.mergeRow||0===r.mergeCol,d=`${h.SbCss.col}-${r.row+1}-${r.col}${u?"-"+h.SbCss.merge:""}`,m=this.getLayout(e).layout;let g=`${h.SbCss.col} ${d} ${h.SbCss.toClass(t.config.type)} ${h.SbCss.toClass(null!==(n=t.config.align)&&void 0!==n?n:"")}`+(t.part==f.PartType.Sticky?" "+h.SbCss.sticky:"")+(0==t.width?` ${h.SbCss.hidden}`:"")+(u?"":" "+this.grid.selectManager.makeSelectClass(e,t,r,m,p.PanelType.Body));if(c)g+=` ${h.SbCss.merged}`;else if(u&&(g+=` ${h.SbCss.merge} ${r.mergeRow>1?h.SbCss.merge_row:h.SbCss.merge_col}`,i.Convert.isValue(this.grid.alternateCss))){const t=(null!==(s=null==e?void 0:e.rowIndex)&&void 0!==s?s:0)%(this.grid.alternateCss.length+1);t>0&&(g+=` ${h.SbCss.alternate} ${h.SbCss.alternate}-${t} ${this.grid.alternateCss[t-1]}`)}if(g+=this.getColCss(e,t.config,r),g+=r.visible?"":` ${h.SbCss.hidden}`,g+=(null===(l=t.isValid(e))||void 0===l?void 0:l.state)!=y.ValidationState.Valid?" "+h.SbCss.invalid:"",e.node instanceof a.GroupNode){const n=e.node.igroup,{headers:s,groups:a}=t.getGroup(n.field);g+=this.calcHeaderClass(t,s,r,(()=>o.GridColumn.makeGroupData(n.aggregates,a,e)));const l=a.find((e=>e.field==n.field));i.Convert.isValue(l)&&i.Convert.isValue(l.headerCss)&&(g+=" "+l.headerCss)}else if(e.node instanceof a.FooterNode){const n=e.node;if(n.parent instanceof a.TreeNode){g+=this.calcHeaderClass(t,t.treeFooters,r,(()=>o.GridColumn.makeTreeData(n.aggregates,t.config.tree,e.parent)));const s=t.config.tree;i.Convert.isValue(s)&&i.Convert.isValue(s.footerCss)&&(g+=" "+s.footerCss)}else if(n.parent instanceof a.GroupNode){const s=n.parent.igroup,{footers:a,groups:l}=t.getGroup(s.field);g+=this.calcHeaderClass(t,a,r,(()=>o.GridColumn.makeGroupData(n.aggregates,l,e.parent)));const u=l.find((e=>e.field==s.field));i.Convert.isValue(u)&&i.Convert.isValue(u.footerCss)&&(g+=" "+u.footerCss)}}return g+=t.makeColClass(e,r),{colSelector:d,colClass:g}}getColCss(e,t,r){let n="";return"function"==typeof t.colCss?n+=" "+t.colCss(e.data,r,e):0==i.Convert.isWhite(t.colCss)&&(n+=" "+t.colCss),n}static makeRowSelector(e,t=!1){return`${h.SbCss.row}-${e.rowIndex}${t?"-detail":""}`}makeRowClass(e,t=!1){var r;const n=M.makeRowSelector(e,t);let o=`${h.SbCss.row} ${n} ${this.grid.fixedRows?h.SbCss.fixed:h.SbCss.variable} ${t?h.SbCss.detail:""}`;if((null==e?void 0:e.status)!=_.DataStatus.Normal&&(o+=` ${h.SbCss.toClass(null==e?void 0:e.status)}`),(null==e?void 0:e.node)instanceof a.GroupNode){const t=e.node.igroup.field;o+=` ${h.SbCss.group} ${h.SbCss.header} ${h.SbCss.toClass(t)} ${h.SbCss.level}-${e.node.level}`}else(null==e?void 0:e.node)instanceof a.TreeNode?o+=` ${h.SbCss.tree} ${h.SbCss.header} ${h.SbCss.level}-${e.node.level}`:(null==e?void 0:e.node)instanceof a.FooterNode?(o+=(null==e?void 0:e.node.parent)instanceof a.GroupNode?` ${h.SbCss.group} ${h.SbCss.footer} ${h.SbCss.toClass(null==e?void 0:e.node.parent.igroup.field)}`:` ${h.SbCss.tree} ${h.SbCss.footer}`,o+=` ${h.SbCss.level}-${e.node.level-1}`):((null==e?void 0:e.isSticky)&&(o+=` ${h.SbCss.sticky}`),(null==e?void 0:e.isSelect)&&(o+=` ${h.SbCss.selected}`),(null==e?void 0:e.isCheck)&&(o+=` ${h.SbCss.checked}`),(null==e?void 0:e.cssClass.length)>0&&(o+=" "+(null==e?void 0:e.cssClass.join(" "))),(null==e?void 0:e.isEdit)&&(o+=` ${h.SbCss.edit}`),"function"==typeof this.grid.config.rowCss?o+=" "+this.grid.config.rowCss(null==e?void 0:e.data,e):0==i.Convert.isWhite(this.grid.config.rowCss)&&(o+=" "+this.grid.config.rowCss),t&&1!=(null==e?void 0:e.isDetail)&&(o+=` ${h.SbCss.hidden}`),i.Convert.isNull(e)&&(o+=` ${h.SbCss.hidden}`));if(i.Convert.isValue(this.grid.alternateCss)){const t=(null!==(r=null==e?void 0:e.rowIndex)&&void 0!==r?r:0)%(this.grid.alternateCss.length+1);t>0&&(o+=` ${h.SbCss.alternate} ${h.SbCss.alternate}-${t} ${this.grid.alternateCss[t-1]}`)}return{rowSelector:n,rowClass:o}}renderValidationTooltip(e){var t,r,n;if(e.hasClass(h.SbCss.invalid)){i.JqUtils.adjustElement(e,`>span.${h.SbCss.invalid}.${h.SbCss.indicator}`,`<span class='${h.SbCss.invalid} ${h.SbCss.indicator}'></span>`);const n=this.grid.getColumn(e),o=this.grid.getRowItem(e);n.isEdit(o)&&this.grid.focusManager.isFocused(o,n,p.PanelType.Body)?null===(t=this.grid.tooltip)||void 0===t||t.showTooltip(e,S.TooltipCategory.Validation,n.tooltip.validation):null===(r=this.grid.tooltip)||void 0===r||r.clearTooltip(e,S.TooltipCategory.Validation)}else null===(n=this.grid.tooltip)||void 0===n||n.clearTooltip(e,S.TooltipCategory.Validation)}}t.RowsPanel=M,M.wheelScrollThreshold=3;class P extends T{constructor(e){super(e,h.SbCss.header),this.grid.hasHeader&&this.grid.scrollPanel.panels.push(this)}get layout(){return this.grid.headerLayout}renderParts(e,t){const r=Object.create(null,{renderParts:{get:()=>super.renderParts}});return n(this,void 0,void 0,(function*(){let n=i.JqUtils.adjustElement(e,`>div.${h.SbCss.thead}`,`<div class='${h.SbCss.area} ${h.SbCss.thead}' ></div>`);r.renderParts.call(this,n,t)}))}makeColClass(e,t){var r,n;const s=`${h.SbCss.col}-${t.row+1}-${t.col}`;let a=s;return i.Convert.isValue(null===(n=null===(r=e.config)||void 0===r?void 0:r.total)||void 0===n?void 0:n.headerCss)&&(a+=" "+e.config.total.headerCss),i.Convert.isValue(e.headers[t.row])&&(a+=this.calcHeaderClass(e,e.headers,t,(()=>{var t;return o.GridColumn.makeAggregateData(this.grid.dataConfig.aggregates,null===(t=e.config.total)||void 0===t?void 0:t.aggregates)}))),e.part==f.PartType.Sticky&&(a+=" "+h.SbCss.sticky),0==e.width&&(a+=` ${h.SbCss.hidden}`),a+=this.grid.selectManager.makeSelectClass(void 0,e,t,this.grid.headerLayout,p.PanelType.Header),{colSelector:s,colClass:a}}renderColumns(e,t,r){var o,s,a;return n(this,void 0,void 0,(function*(){let r=i.JqUtils.adjustElement(e,`>div.${h.SbCss.row}.${h.SbCss.header}`,`<div class='${h.SbCss.row} ${h.SbCss.header}'></div>`);if(0==(null!==(a=null===(s=null===(o=this.layout)||void 0===o?void 0:o.rows)||void 0===s?void 0:s.length)&&void 0!==a?a:0))return r;const n=this.layout,l=new Set;for(const e of n.rows){const n=e.getCells(t);for(const e in n){const t=n[e],o=t.column,{colSelector:s,colClass:a}=this.makeColClass(o,t);l.add(s);let u=i.JqUtils.adjustElement(r,`>span.${s}`,`<span class='col ${a}'></span>`);i.JqUtils.changeClass(u,`${h.SbCss.col} ${a}`),u.data("col",t.col),u.data("column",o),u.data("cell",t),i.JqUtils.changeDataset(u,"selector",s),yield o.renderHeader(u,t)}}return i.JqUtils.movetoTrash(this.grid.trashCan,r,l),r}))}createStylePart(e,t,r,o){var s,a,l,u,c;return n(this,void 0,void 0,(function*(){if(0==(null!==(l=null===(a=null===(s=this.layout)||void 0===s?void 0:s.rows)||void 0===a?void 0:a.length)&&void 0!==l?l:0))return;let e;const n=this.layout,o=this.getRowParentCss(h.SbCss.header,r);for(const r of n.rows){const n=r.getCells(t);for(const t in n){const r=n[t],s=r.column;i.Convert.isNull(e)&&(e=r.col-1);const a=`${h.SbCss.col}-${r.row+1}-${r.col}`,l=null!==(u=r.colSpan)&&void 0!==u?u:0,d=null!==(c=r.rowSpan)&&void 0!==c?c:0,p={"grid-column":`${r.col-e}${l>1?" / span "+l:""}`,"grid-row":`${r.row+1}${d>1?" / span "+d:""}`};s.part==f.PartType.Sticky&&(p.position="sticky",p.left=r.stickyLeft,p.right=r.stickyRight),this.grid.style.set(`${o}>.${h.SbCss.row}.${h.SbCss.header}>.${h.SbCss.col}.${a}`,p)}}}))}getCell(e,t=void 0){return i.Convert.isNull(e)?null:this.grid.headerLayout.findCell(e)}getElement(e,t){const r=c.SBGrid3.$(`> .${h.SbCss.panel}.${h.SbCss.scroll} > .${h.SbCss.scroll_body} > .${h.SbCss.header} > .${h.SbCss.area} > .${h.SbCss.part} > .${h.SbCss.scroll} > .${h.SbCss.row}-${t.rowIndex}`,this.grid.container),n=this.getCell(e);return i.Convert.isNull(n)?r:c.SBGrid3.$(`> .${h.SbCss.col}-${n.row+1}-${n.col}`,r)}getContainer(e){const t=c.SBGrid3.$(`div.${h.SbCss.row}.${h.SbCss.header}`,this.grid.container),r=i.Utils.findCellFromColumn(this.grid.headerLayout,e),{colSelector:n}=this.makeColClass(e,r);return c.SBGrid3.$(`.${n}`,t)}}t.HeaderPanel=P;class O extends T{constructor(e){super(e,h.SbCss.footer),this.grid.hasFooter&&this.grid.scrollPanel.panels.push(this)}get layout(){return this.grid.footerLayout}renderParts(e,t){const r=Object.create(null,{renderParts:{get:()=>super.renderParts}});return n(this,void 0,void 0,(function*(){let n=i.JqUtils.adjustElement(e,`>div.${h.SbCss.tfoot}`,`<div class='${h.SbCss.area} ${h.SbCss.tfoot}' ></div>`);r.renderParts.call(this,n,t)}))}makeColClass(e,t){var r,n;const s=`${h.SbCss.col}-${t.row+1}-${t.col}`;let a=s;return i.Convert.isValue(null===(n=null===(r=e.config)||void 0===r?void 0:r.total)||void 0===n?void 0:n.footerCss)&&(a+=" "+e.config.total.footerCss),i.Convert.isValue(e.footers[t.row])&&(a+=this.calcHeaderClass(e,e.footers,t,(()=>{var t;return o.GridColumn.makeAggregateData(this.grid.dataConfig.aggregates,null===(t=e.config.total)||void 0===t?void 0:t.aggregates)}))),e.part==f.PartType.Sticky&&(a+=" "+h.SbCss.sticky),0==e.width&&(a+=` ${h.SbCss.hidden}`),a+=this.grid.selectManager.makeSelectClass(void 0,e,t,this.grid.footerLayout,p.PanelType.Footer),{colSelector:s,colClass:a}}renderColumns(e,t,r){var o,s,a;return n(this,void 0,void 0,(function*(){let r=i.JqUtils.adjustElement(e,`>div.${h.SbCss.row}.${h.SbCss.footer}`,`<div class='${h.SbCss.row} ${h.SbCss.footer}'></div>`);if(0==(null!==(a=null===(s=null===(o=this.layout)||void 0===o?void 0:o.rows)||void 0===s?void 0:s.length)&&void 0!==a?a:0))return r;const n=this.layout,l=new Set;for(const e of n.rows){const n=e.getCells(t);for(const e in n){const t=n[e],o=t.column,{colSelector:s,colClass:a}=this.makeColClass(o,t);l.add(s);let u=i.JqUtils.adjustElement(r,`>span.${s}`,`<span class='col ${a}'></span>`);i.JqUtils.changeClass(u,`${h.SbCss.col} ${a}`),u.data("col",t.col),u.data("column",o),u.data("cell",t),i.JqUtils.changeDataset(u,"selector",s),yield o.renderFooter(u,t)}}return i.JqUtils.movetoTrash(this.grid.trashCan,r,l),r}))}createStylePart(e,t,r,o){var s,a,l,u,c;return n(this,void 0,void 0,(function*(){if(0==(null!==(l=null===(a=null===(s=this.layout)||void 0===s?void 0:s.rows)||void 0===a?void 0:a.length)&&void 0!==l?l:0))return;let e;const n=this.layout,o=this.getRowParentCss(h.SbCss.footer,r);for(const r of n.rows){const n=r.getCells(t);for(const t in n){const r=n[t],s=r.column;i.Convert.isNull(e)&&(e=r.col-1);const a=`${h.SbCss.col}-${r.row+1}-${r.col}`,l=null!==(u=r.colSpan)&&void 0!==u?u:0,d=null!==(c=r.rowSpan)&&void 0!==c?c:0,p={"grid-column":`${r.col-e}${l>1?" / span "+l:""}`,"grid-row":`${r.row+1}${d>1?" / span "+d:""}`};s.part==f.PartType.Sticky&&(p.position="sticky",p.left=r.stickyLeft,p.right=r.stickyRight),this.grid.style.set(`${o}>.${h.SbCss.row}.${h.SbCss.footer}>.${h.SbCss.col}.${a}`,p)}}}))}getCell(e,t=void 0){return i.Convert.isNull(e)?null:this.grid.footerLayout.findCell(e)}getElement(e,t){const r=c.SBGrid3.$(`> .${h.SbCss.panel}.${h.SbCss.scroll} > .${h.SbCss.scroll_body} > .${h.SbCss.footer} > .${h.SbCss.area} > .${h.SbCss.part} > .${h.SbCss.scroll} > .${h.SbCss.row}-${t.rowIndex}`,this.grid.container),n=this.getCell(e);return i.Convert.isNull(n)?r:c.SBGrid3.$(`> .${h.SbCss.col}-${n.row+1}-${n.col}`,r)}getContainer(e){const t=c.SBGrid3.$(`div.${h.SbCss.row}.${h.SbCss.footer}`,this.grid.container),r=i.Utils.findCellFromColumn(this.grid.footerLayout,e),{colSelector:n}=this.makeColClass(e,r);return c.SBGrid3.$(`.${n}`,t)}}t.FooterPanel=O;class I extends T{constructor(e){super(e,h.SbCss.filter),this.grid.config.filterable===b.FilterMode.Row&&this.grid.scrollPanel.panels.push(this)}get layout(){return this.grid.filterLayout}renderParts(e,t){const r=Object.create(null,{renderParts:{get:()=>super.renderParts}});return n(this,void 0,void 0,(function*(){let n=i.JqUtils.adjustElement(e,`>div.${h.SbCss.tbody}`,`<div class='${h.SbCss.area} ${h.SbCss.tbody}' ></div>`);r.renderParts.call(this,n,t)}))}renderColumns(e,t,r){var o,s,a;return n(this,void 0,void 0,(function*(){let r=i.JqUtils.adjustElement(e,`>div.${h.SbCss.row}.${h.SbCss.filter}`,`<div class='${h.SbCss.row} ${h.SbCss.filter}'></div>`);if(0==(null!==(a=null===(s=null===(o=this.layout)||void 0===o?void 0:o.rows)||void 0===s?void 0:s.length)&&void 0!==a?a:0))return r;const n=this.layout,l=new Set;for(const e of n.rows){const n=e.getCells(t);for(const e in n){const t=n[e],o=t.column,{colSelector:s,colClass:a}=this.makeColClass(o,t);l.add(s);let u=i.JqUtils.adjustElement(r,`>span.${s}`,`<span class='${a}'></span>`);i.JqUtils.changeClass(u,a),u.data("col",t.col),u.data("column",o),u.data("cell",t),i.JqUtils.changeDataset(u,"selector",s),o.renderFilterColumn(u)}}return i.JqUtils.movetoTrash(this.grid.trashCan,r,l),r}))}makeColClass(e,t,r){const n=`${h.SbCss.col}-${t.row+1}-${t.col}`;let i=`${n} ${h.SbCss.col}`;return e.part==f.PartType.Sticky&&(i+=` ${h.SbCss.sticky}`),0==e.width&&(i+=` ${h.SbCss.hidden}`),i+=this.grid.selectManager.makeSelectClass(r,e,t,this.grid.captionLayout,p.PanelType.Filter),{colSelector:n,colClass:i}}createStylePart(e,t,r,o){var s,a,l,u,c,d;return n(this,void 0,void 0,(function*(){if(0==(null!==(l=null===(a=null===(s=this.layout)||void 0===s?void 0:s.rows)||void 0===a?void 0:a.length)&&void 0!==l?l:0))return;let e;const n=[],p=this.layout,m=this.getRowParentCss(h.SbCss.filter,r);for(const r of p.rows){const s=r.getCells(t);for(const t in s){const r=s[t],a=r.column;i.Convert.isNull(e)&&(e=r.col-1);const l=`${h.SbCss.col}-${r.row+1}-${r.col}`,p=null!==(u=r.colSpan)&&void 0!==u?u:0,g=null!==(c=r.rowSpan)&&void 0!==c?c:0,v={"grid-column":`${r.col-e}${p>1?" / span "+p:""}`,"grid-row":`${r.row+1}${g>1?" / span "+g:""}`};a.part==f.PartType.Sticky&&(v.position="sticky",v.left=r.stickyLeft,v.right=r.stickyRight),this.grid.style.set(`${m}>.${h.SbCss.row}.${h.SbCss.filter}>.${h.SbCss.col}.${l}`,v),n[a.index]=r.unit==f.Unit.Pixel||o>0?r.width+this.unit(r.unit):(null!==(d=r.column.minWidth)&&void 0!==d?d:0)+this.unit(f.Unit.Pixel)}}}))}getCell(e,t=void 0){return i.Convert.isNull(e)?null:this.grid.filterLayout.findCell(e)}getElement(e,t){const r=c.SBGrid3.$(`> .${h.SbCss.panel}.${h.SbCss.scroll} > .${h.SbCss.scroll_body} > .${h.SbCss.filter} > .${h.SbCss.area} > .${h.SbCss.part} > .${h.SbCss.scroll} > .${h.SbCss.row}-${t.rowIndex}`,this.grid.container),n=this.getCell(e);return i.Convert.isNull(n)?r:c.SBGrid3.$(`> .${h.SbCss.col}-${n.row+1}-${n.col}`,r)}getContainer(e){const t=c.SBGrid3.$(`div.${h.SbCss.row}.${h.SbCss.filter}`,this.grid.container),r=i.Utils.findCellFromColumn(this.grid.filterLayout,e),{colSelector:n}=this.makeColClass(e,r);return c.SBGrid3.$(`.${n}`,t)}get isEdit(){var e;return this.grid.config.filterable!==b.FilterMode.Menu&&(null!==(e=this._isEdit)&&void 0!==e?e:this._isEdit=!1)}set isEdit(e){this._isEdit=e}addFocusEvent(){}doCommand(e,t){return t.command===d.Commands.Focused?this.doFocus(t):super.doCommand(e,t)}doEscape(e){return this.grid.focusManager.focus.panelType!==p.PanelType.Filter||(this.isEdit=!1),!0}doFocus(e){return e.current.panelType!==p.PanelType.Filter&&(this.grid.scrollPanel.filterPanel.isEdit=!1),!0}}t.FilterPanel=I},696:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CopyRange=t.HoverType=t.CopyOptionParser=t.SelectOptionParser=t.SelectMode=t.SelectType=t.SelectManager=void 0;const i=r(2733),o=r(1880),s=r(8154),a=r(5643),l=r(1374),u=r(3396),c=r(7134),h=r(9114),d=r(168),f=r(1919),p=r(3455),m=r(4772),g=r(3988),v=r(7074),y=r(249),b=r(3211);class w extends i.Observer{constructor(e){super(e),this._isMouseDown=!1,this.mouseDown=e=>n(this,void 0,void 0,(function*(){if(this.isMouseDown)return;const t=this.getCol(g.SBGrid3.$(e.target)),r=this.getPanelType(t),n=yield this.grid.getRowItem(t),i=this.grid.getColumn(t);3===e.which&&this.isSelectedCell(null==n?void 0:n.key,null==i?void 0:i.name)||this._mouseDown(n,i,r,e.ctrlKey)})),this._mouseDown=(e,t,r,i)=>n(this,void 0,void 0,(function*(){if(!this.isMouseDown&&!(u.Convert.isNull(t)||u.Convert.isValue(e)&&0==t.selectable(e))){switch(u.Convert.isValue(this.copyRange)&&(this.copyRange.fillOriginRange=void 0),i?this.sendClearRefreshEvent(!1):this.sendClearRefreshEvent(),r){case m.PanelType.Body:this._bodyMouseDown(e,t,i);break;case m.PanelType.Header:case m.PanelType.Footer:this.totalMouseDown(t,r);break;case m.PanelType.Caption:this.captionMouseDown(t)}this.isMouseDown=!0,this.sendRefreshCommand()}})),this.captionMouseDown=e=>{!1!==this.option.columnSelect&&(this.tempSelectType=C.Col,this.addTempCols(e),this._firstColumn=e,this._firstRowItem=void 0,this.prevRowItem=void 0)},this.totalMouseDown=(e,t)=>n(this,void 0,void 0,(function*(){this.tempSelectType=C.Cell,this.tempCells.set(t,new Set([e.name])),this.isMouseDown=!0,this._firstColumn=e,this.prevColumn=e,this.sendRefreshCommand()})),this.bodyMouseMove=e=>n(this,void 0,void 0,(function*(){var t;if(!this.isMouseDown)return;const r=this.getCol(g.SBGrid3.$(e.target)),n=this.getPanelType(r);if(u.Convert.isNull(n))return;if(n==m.PanelType.Header||n==m.PanelType.Footer)return void this.totalMouseMove(e,n);if(u.Convert.isNull(this._firstRowItem))return;const i=yield this.grid.getRowItem(r),o=this.grid.getColumn(r);(null===(t=this.copyRange)||void 0===t?void 0:t.fillHandleMove)?this.fillHandleMove(i,o,e.clientX,e.clientY):this._bodyMouseMove(i,o)})),this._bodyMouseMove=(e,t)=>n(this,void 0,void 0,(function*(){if(!(u.Convert.isNull(e)||u.Convert.isNull(t)||t.config.type==c.ColumnTypes.Frozen||0==t.selectable(e)||this.prevRowItem===e&&this.prevColumn===t)){switch(this.tempCells.clear(),this.tempRows.clear(),this.tempSelectType){case C.Cell:yield this.calcSelectedColumns(this._firstRowItem,this._firstColumn,e,t,((e,t)=>{var r;let n=null!==(r=this.tempCells.get(e.key))&&void 0!==r?r:new Set;n.add(t.name),this.tempCells.set(e.key,n)}));break;case C.Row:yield this.calcSelectedRows(this._firstRowItem,e)}this.prevRowItem=e,this.prevColumn=t,this.sendRefreshCommand()}})),this.totalMouseMove=(e,t)=>n(this,void 0,void 0,(function*(){if(!this.isMouseDown)return;const r=this.getCol(g.SBGrid3.$(e.target)),n=this.grid.getColumn(r);u.Convert.isNull(n)||n.config.type==c.ColumnTypes.Frozen||0!=n.selectable(void 0)&&this.prevColumn!==n&&(this.tempCells.clear(),this.tempRows.clear(),yield this.calcSelectedColumns(void 0,this._firstColumn,void 0,n,((e,r)=>{var n;let i=null!==(n=this.tempCells.get(t))&&void 0!==n?n:new Set;i.add(r.name),this.tempCells.set(t,i)})),this.prevColumn=n,this.sendRefreshCommand())})),this.bodyMouseUp=()=>n(this,void 0,void 0,(function*(){var e,t;this.isMouseDown&&(yield this.addTempToSelect(),this.isMouseDown=!1,(null===(e=this.copyRange)||void 0===e?void 0:e.fillHandleMove)&&(yield this.fillCells()),null===(t=this.copyRange)||void 0===t||t.createFillOriginRange(),yield this.sendRefreshCommand(),this.fireCommandAsync(this,new s.SelectedCommand),this.refreshRange={})})),this.headerMouseMove=e=>{if(!this.isMouseDown)return;const t=this.getCol(g.SBGrid3.$(e.target)),r=null==t?void 0:t.data("column");u.Convert.isNull(r)||this.prevColumn!==r&&(this.tempCols.clear(),this.calcSelectedColumns(void 0,this._firstColumn,void 0,r,((e,t)=>{})),this.prevColumn=r,this.fireCommandAsync(this,new s.RefreshCommand))},this.refreshRange={},this.grid=e}get gridMenu(){return new y.GridMenu(this.grid,[],void 0,void 0)}get selectedRows(){var e;return null!==(e=this._selectedRows)&&void 0!==e?e:this._selectedRows=new Map}get selectedColumns(){var e;return null!==(e=this._selectedColumns)&&void 0!==e?e:this._selectedColumns=new Map}get selectedCells(){var e;return null!==(e=this._selectedCells)&&void 0!==e?e:this._selectedCells=new Map}get option(){var e;return null!==(e=this._option)&&void 0!==e?e:this._option=u.Convert.isValue(this.grid.config.selectable)?this.grid.config.selectable:void 0}set option(e){this._option=e}get tempCells(){var e;return null!==(e=this._tempCells)&&void 0!==e?e:this._tempCells=new Map}get tempRows(){var e;return null!==(e=this._tempRows)&&void 0!==e?e:this._tempRows=new Set}get tempCols(){var e;return null!==(e=this._tempCols)&&void 0!==e?e:this._tempCols=new Set}get grid(){return this._grid}set grid(e){this._grid=e}get tempSelectType(){return this._tempSelectType}set tempSelectType(e){this._tempSelectType=e}get copyRange(){var e;return null!==(e=this._copyRange)&&void 0!==e?e:this.grid.config.copyable?this._copyRange=new T(this):void 0}get isMouseDown(){return this._isMouseDown}set isMouseDown(e){this._isMouseDown=e}copy(){return n(this,void 0,void 0,(function*(){if(this.grid.config.copyable&&this.grid.config.selectable)try{u.Convert.isValue(this.copyRange.fillOriginRange)?this.copyRange.copyRangeList=[this.copyRange.fillOriginRange]:this.copyRange.makeCopyRangeList(),new d.Clipboard(this.grid).copy(this.copyRange.copyRangeList)}catch(e){"edit"!==e&&alert(e)}finally{this.fireCommandAsync(this,new s.RefreshCommand)}}))}paste(){var e;return n(this,void 0,void 0,(function*(){if(!this.grid.config.copyable)return;if(!this.grid.config.editable)return;const t=new d.Clipboard(this.grid),r=this.copyRange.makeColumnByRows(),n=this.copyRange.makeSelectRange(r);yield t.paste(n),null===(e=this.copyRange)||void 0===e||e.createFillOriginRange()}))}addEventHandler(e){this.option&&(this.grid.setEvent("selectManager","mouseup",this.constructor.name,(e=>this.bodyMouseUp()),this.grid.container),1!=this.option.rowSelect&&!0!==this.option.columnSelect&&this.option.cellSelect!==C.Row&&this.option.cellSelect!==C.Cell&&this.option.cellSelect!==C.Col||this.grid.setEvent("selectManager","mousedown",this.constructor.name+"_body",(e=>this.mouseDown(e)),e),this.option.selectMode===_.Multi&&this.grid.setEvent("selectManager","mousemove",this.constructor.name,(e=>this.bodyMouseMove(e)),e)),this.addHoverHandler(e)}addHoverHandler(e){this.grid.config.hover&&(this.jqHover=u.JqUtils.adjustElement(e,`> div.${v.SbCss.hover}`,`<div class='${v.SbCss.hover}'></div>`),this.grid.setEvent("hover","mousemove",this.constructor.name,(e=>this.hover(e)),e),this.grid.setEvent("hover","mouseout",this.constructor.name,(e=>(this.hideHover(),!1)),e))}hideHover(){var e;null===(e=this.jqHover)||void 0===e||e.css("opacity",0)}hover(e){return n(this,void 0,void 0,(function*(){let t,r,n=this.getRow(g.SBGrid3.$(e.target)),i=this.getCol(g.SBGrid3.$(e.target)),o=0,s=0,a=g.SBGrid3.$(e.currentTarget).offset();switch(this.grid.config.hover){case S.Row:let e=yield this.grid.getRowItem(i);if(u.Convert.isNull(e))return;o=this.grid.fixedWidth+this.grid.headWidth+this.grid.viewportWidth+this.grid.tailWidth,s=this.grid.getItemHeight(e).height,r=(null==n?void 0:n.offset().top)-a.top,t=`translateY(${r}px)`;break;case S.Col:break;case S.Cell:if(u.Convert.isNull(i)||i.length<=0)return;if(i.hasClass(v.SbCss.frozen))return;o=i.outerWidth(!0),s=i.outerHeight(!0);let l=i.offset();r=l.top-a.top,t=`translate(${l.left-a.left}px,${r}px)`}this.jqHover.width()!=o&&this.jqHover.width(o),this.jqHover.height()!=s&&this.jqHover.height(s),this.jqHover.css({opacity:1}),u.Convert.isValue(t)&&this.jqHover.css({transform:t})}))}getCol(e){var t;if(0!=(null!==(t=null==e?void 0:e.length)&&void 0!==t?t:0))return e.closest(`.${v.SbCss.col}`)}getRow(e){var t;if(0!=(null!==(t=null==e?void 0:e.length)&&void 0!==t?t:0))return e.closest(`.${v.SbCss.row}`)}switchRange(e,t){return e>t?[t,e]:[e,t]}addTempToSelect(){var e,t,r,i;return n(this,void 0,void 0,(function*(){switch(this.tempSelectType){case C.Row:let n=!this.isSelectedRow(null===(e=this._firstRowItem)||void 0===e?void 0:e.key);this.selectRows(this.tempRows,n);break;case C.Col:let o=!this.isSelectedColumn(null===(t=this._firstColumn)||void 0===t?void 0:t.name);this.selectColumns(this.tempCols,o);break;case C.Cell:let s=!this.isSelectedCell(null===(r=this._firstRowItem)||void 0===r?void 0:r.key,null===(i=this._firstColumn)||void 0===i?void 0:i.name);this.selectCells(this.tempCells,s)}this.tempCells.clear(),this.tempRows.clear(),this.tempCols.clear()}))}isTemporaryCell(e,t){var r;let n=!1;switch(this.tempSelectType){case C.Row:n=!!this.tempRows.has(e);break;case C.Col:n=!!this.tempCols.has(t);break;case C.Cell:n=!!(null===(r=this.tempCells.get(e))||void 0===r?void 0:r.has(t));break;default:n=!1}return n}selectRow(e){return n(this,void 0,void 0,(function*(){return this.option.selectMode===_.Single&&this.clear(),this.fireCommandAsync(this,new s.RefreshCommand({rowStart:e.rowIndex,rowEnd:e.rowIndex})),this.selectRows(new Set([e.key]),!0),!0}))}selectRows(e,t=!0){e.forEach((e=>{t?this.addSelectedRow(e):this.removeSelectedRow(e)}))}clear(){this.selectedRows.forEach(((e,t)=>this.removeSelectedRow(t))),this.selectedRows.clear(),this.selectedColumns.clear(),this.selectedCells.clear(),this.tempRows.clear(),this.tempCells.clear(),this.tempCols.clear()}isSelectedRow(e){return this.selectedRows.has(e)}removeSelectedRow(e){this.selectedRows.delete(e);let t=this.grid.view.keyMap.get(e);t.isSelect=!1,l.Log.debug(["### removed row",t])}addSelectedRow(e){this.selectedRows.set(e,new Set);let t=this.grid.view.keyMap.get(e);t.isSelect=!0,l.Log.debug((()=>["### added row",t.key]))}selectColumns(e,t){e.forEach((e=>{t?this.addSelectedColumn(e):this.removeSelectedColumn(e)}))}addSelectedColumn(e,t){this.selectedColumns.set(e,new Set),l.Log.debug((()=>["-----\x3e add column",e]))}removeSelectedColumn(e){this.selectedColumns.delete(e),l.Log.debug((()=>["---------\x3eremoved column >> ",e]))}isSelectedCell(e,t){var r,n,i;let o=!1;return this.selectedRows.has(e)&&(o=!(null===(r=this.selectedRows.get(e))||void 0===r?void 0:r.has(t))),!1===o&&this.selectedColumns.has(t)&&(o=!(null===(n=this.selectedColumns.get(t))||void 0===n?void 0:n.has(e))),!1===o&&this.selectedCells.has(e)&&(o=null===(i=this.selectedCells.get(e))||void 0===i?void 0:i.has(t)),o}isSelectedColumn(e){return this.selectedColumns.has(e)}selectCells(e,t=!0){e.forEach(((e,r)=>{e.forEach((e=>{t?this.addSelectedCell(r,e):this.removeSelectedCell(r,e)}))}))}addSelectedCell(e,t){var r,n;if(null===(r=this.selectedRows.get(e))||void 0===r?void 0:r.has(t)){this.selectedRows.get(e).delete(t)}else if(null===(n=this.selectedColumns.get(t))||void 0===n?void 0:n.has(e)){this.selectedColumns.get(t).delete(e)}else{let r=this.selectedCells.get(e);r=null!=r?r:new Set,r.add(t),this.selectedCells.set(e,r)}}removeSelectedCell(e,t){if(this.selectedCells.has(e)){this.selectedCells.get(e).delete(t)}if(this.selectedRows.has(e)){this.selectedRows.get(e).add(t)}if(this.selectedColumns.has(t)){this.selectedColumns.get(t).add(e)}}getSelectedRows(){return Array.from(this.selectedRows.keys())}get prevRowItem(){return this._prevRowItem}set prevRowItem(e){this._prevRowItem=e}get prevColumn(){return this._prevColumn}set prevColumn(e){this._prevColumn=e}adjustTempSelectType(e){const t=e instanceof h.RowNoColumn?C.Row:C.Cell;switch(this.tempSelectType=void 0,t){case C.Cell:this.option.cellSelect!=C.None&&(this.tempSelectType=u.Convert.parseEnum(C,this.option.cellSelect));break;case C.Row:this.option.rowSelect&&(this.tempSelectType=C.Row)}}_bodyMouseDown(e,t,r){switch(this.adjustTempSelectType(t),this.tempSelectType){case C.Row:this.tempRows.add(e.key);break;case C.Cell:this.tempCells.set(e.key,new Set([t.name]));break;case C.Col:this.addTempCols(t)}this.isMouseDown=!0,this._firstRowItem=e,this._firstColumn=t,this.prevRowItem=e,this.prevColumn=t,this.sendRefreshCommand()}getPanelType(e){const t=e.closest(`.${v.SbCss.panel}`);return t.length<1?void 0:t.hasClass(v.SbCss.body)?m.PanelType.Body:t.hasClass(v.SbCss.header)?m.PanelType.Header:t.hasClass(v.SbCss.footer)?m.PanelType.Footer:t.hasClass(v.SbCss.caption)?m.PanelType.Caption:void 0}adjustRefreshRange(e){const t=this.grid.view.keyMap;this._firstRowItem=t.get(e.rowStart),this.prevRowItem=t.get(e.rowEnd),this._firstColumn=u.Utils.findGridColumnByName(e.colStart,this.grid.columns),this.prevColumn=u.Utils.findGridColumnByName(e.colEnd,this.grid.columns)}calcSelectedRows(e,t){return n(this,void 0,void 0,(function*(){let[r,n]=this.switchRange(e.rowIndex,t.rowIndex);for(let e=r;e<=n;e++){let t=yield this.grid.view.getRow(e);this.tempRows.add(t.key)}}))}calcSelectedColumns(e,t,r,i,o){return n(this,void 0,void 0,(function*(){const n=this.tempSelectType===C.Cell?this.grid.rowLayout:this.grid.captionLayout,s=n.rows.length-1;let{startCell:a,endCell:l}=w.findStartEndCell(n,t,i);if(!u.Convert.isNull(a)&&!u.Convert.isNull(l))if(e==r){let t=Math.min(a.row,l.row),r=Math.min(a.col,l.col),i=Math.max(a.row+a.rowSpan,l.row+l.rowSpan)-1,s=Math.max(a.col+a.colSpan,l.col+l.colSpan)-1;({minRow:t,maxRow:i,minCol:r,maxCol:s}=w.calcMinMax(n,t,i,r,s)),w.generateCells(n,e,t,i,r,s,o)}else{const t=w.calcMinMax(n,0,s,Math.min(a.col,l.col),Math.max(a.col+a.colSpan,l.col+l.colSpan)-1),i=e.rowIndex>r.rowIndex;if(null!=e){let r=i?0:a.row,l=i?a.row:s,u=t.minCol,c=t.maxCol;({minRow:r,maxRow:l,minCol:u,maxCol:c}=w.calcMinMax(n,r,l,u,c)),w.generateCells(n,e,r,l,u,c,o)}if(e.rowIndex!=r.rowIndex){const i=t.minRow,s=t.maxRow,a=t.minCol,l=t.maxCol,u=Math.min(e.rowIndex,r.rowIndex)+1,c=Math.max(e.rowIndex,r.rowIndex)-1;for(let e=u;e<=c;e++){let t=yield this.grid.view.getRow(e);w.generateCells(n,t,i,s,a,l,o)}}if(null!=r){let e=i?l.row:0,a=i?s:l.row,u=t.minCol,c=t.maxCol;({minRow:e,maxRow:a,minCol:u,maxCol:c}=w.calcMinMax(n,e,a,u,c)),w.generateCells(n,r,e,a,u,c,o)}}}))}static calcMinMax(e,t,r,n,i){const o=f.GridMatrix.toMatrix(e);for(let e=t;e<=r;e++)for(let s=n;s<=i;){let a=o.getCell(e,s);if(a.col+a.colSpan-1>=s)if(a.col<n)s=n=a.col;else{if(a.row<t){e=(t=a.row)-1;break}a.col+a.colSpan-1>i&&(i=a.col+a.colSpan-1),a.row+a.rowSpan-1>r&&(r=a.row+a.rowSpan-1),s+=a.colSpan}else s++}return{minRow:t,maxRow:r,minCol:n,maxCol:i}}static generateCells(e,t,r,n,i,o,s){var a;for(let l=r;l<=n;l++){const r=e.rows[l].cells;for(let e=i;e<=o;){let n=r[e];e+=null!==(a=null==n?void 0:n.colSpan)&&void 0!==a?a:1,u.Convert.isNull(n)||s(t,n.column)}}}static findStartEndCell(e,t,r){let n,i,o=0;for(const s of e.rows){const e=s.cells;for(const s in e){const a=e[s];if(a.column===t&&u.Convert.isNull(n)&&(n=a,o++),a.column===r&&u.Convert.isNull(i)&&(i=a,o++),o>=2)break}if(o>=2)break}return{startCell:n,endCell:i}}addTempCols(e){var t;(null===(t=e.columns)||void 0===t?void 0:t.length)>0?e.columns.forEach((e=>{this.addTempCols(e)})):this.prevColumn=e,this.tempCols.add(e.name)}sendRefreshCommand(){return n(this,void 0,void 0,(function*(){yield this.calcSelectedColumns(this._firstRowItem,this._firstColumn,this.prevRowItem,this.prevColumn,((e,t)=>{var r,n,i,o,s,a,l,u,c,h;switch(this.tempSelectType){case C.Col:this.refreshRange.colStart=Math.min(null!==(r=this.refreshRange.colStart)&&void 0!==r?r:t.index,t.index),this.refreshRange.colEnd=Math.max(null!==(n=this.refreshRange.colEnd)&&void 0!==n?n:t.index,t.index);break;case C.Row:this.refreshRange.rowStart=Math.min(null!==(i=this.refreshRange.rowStart)&&void 0!==i?i:e.rowIndex,e.rowIndex),this.refreshRange.rowEnd=Math.max(null!==(o=this.refreshRange.rowEnd)&&void 0!==o?o:e.rowIndex,e.rowIndex),this.refreshRange.colStart=void 0,this.refreshRange.colEnd=void 0;break;case C.Cell:this.refreshRange.rowStart=Math.min(null!==(a=null===(s=this.refreshRange)||void 0===s?void 0:s.rowStart)&&void 0!==a?a:null==e?void 0:e.rowIndex,null==e?void 0:e.rowIndex),this.refreshRange.rowEnd=Math.max(null!==(u=null===(l=this.refreshRange)||void 0===l?void 0:l.rowEnd)&&void 0!==u?u:null==e?void 0:e.rowIndex,null==e?void 0:e.rowIndex),this.refreshRange.colStart=Math.min(null!==(c=this.refreshRange.colStart)&&void 0!==c?c:t.index,t.index),this.refreshRange.colEnd=Math.max(null!==(h=this.refreshRange.colEnd)&&void 0!==h?h:t.index,t.index)}})),this.refreshRange.onlyLayout=!0,this.fireCommandAsync(this,new s.RefreshCommand(this.refreshRange))}))}sendClearRefreshEvent(e=!0){const t=u.Convert.isValue(this.selectedRows)||u.Convert.isValue(this.selectedCells)&&u.Convert.isEmpty(this.selectedColumns),r=u.Convert.isValue(this.selectedColumns)&&u.Convert.isNull(this.selectedRows)&&u.Convert.isNull(this.selectedCells);let n={};if(r)this.selectedColumns.forEach(((e,t)=>{var r,i;const o=u.Arrays.bfsSearch(this.grid.columns,(e=>e.name==t||e.columns));u.Convert.isValue(o)&&(n.colStart=Math.min(null!==(r=n.colStart)&&void 0!==r?r:o.index,o.index),n.colEnd=Math.max(null!==(i=n.colEnd)&&void 0!==i?i:o.index,o.index))}));else if(t){[...this.selectedRows.keys(),...this.selectedCells.keys()].forEach((e=>{var t,r;const i=this.grid.view.keyMap.get(e);n.rowStart=Math.min(null!==(t=n.rowStart)&&void 0!==t?t:null==i?void 0:i.rowIndex,null==i?void 0:i.rowIndex),n.rowEnd=Math.max(null!==(r=n.rowEnd)&&void 0!==r?r:null==i?void 0:i.rowIndex,null==i?void 0:i.rowIndex)}))}n.onlyLayout=!0,!0===e&&this.clear(),u.Convert.isValue(n)&&this.fireCommandAsync(this,new s.RefreshCommand(n))}makeEdgeClass(e,t,r,n,i,o,s){var c,h,d;if(u.Convert.isEmpty(e))return"";let f;for(const s of e){const e=o===m.PanelType.Body?null==t?void 0:t.key:o;try{if(s.type===C.Row&&!1===s.cellMap.has(e))continue;if(s.type===C.Cell&&(!s.cellMap.has(e)||!1===(null===(c=s.cellMap.get(e))||void 0===c?void 0:c.has(r.name))))continue}catch(e){l.Log.error([s,e]);continue}const p=u.Utils.findGridColumnByName(s.colStart,this.grid.columns),g=u.Utils.findGridColumnByName(s.colEnd,this.grid.columns),v=this.grid.view.keyMap,y=null===(h=v.get(s.rowStart))||void 0===h?void 0:h.rowIndex,b=null===(d=v.get(s.rowEnd))||void 0===d?void 0:d.rowIndex,_=o===m.PanelType.Header||o===m.PanelType.Footer||(null==t?void 0:t.node)instanceof a.GroupNode;let{startCell:S,endCell:x}=w.findStartEndCell(i,p,g);if(u.Convert.isNull(S)||u.Convert.isNull(x))return;let k=Math.min(S.row,x.row),T=Math.min(S.col,x.col),R=_?i.rows.length-1:Math.max(S.row+S.rowSpan,x.row+x.rowSpan)-1,E=Math.max(S.col+S.colSpan,x.col+x.colSpan)-1;k<=n.row&&n.row<=R&&T<=n.col&&n.col<=E&&(f=y==b?{Top:n.row==k,Bottom:n.row==R||n.row+n.rowSpan-1==R,Left:n.col==T,Right:n.col==E||n.col+n.colSpan-1==E}:y==t.rowIndex?{Top:n.row==k,Bottom:!1,Left:n.col==T,Right:n.col==E||n.col+n.colSpan-1==E}:b==t.rowIndex?{Top:!1,Bottom:n.row==R||n.row+n.rowSpan-1==R,Left:n.col==T,Right:n.col==E||n.col+n.colSpan-1==E}:{Top:!1,Bottom:!1,Left:n.col==T,Right:n.col==E||n.col+n.colSpan-1==E});break}return s(f)}cancelCopy(){var e;null===(e=this.copyRange)||void 0===e||e.clearCopyRanges(),this.fireCommandAsync(this,new s.RefreshCommand({}))}selectAll(){var e;this.clear();const t=new Set(this.grid.view.keyMap.keys());this.selectRows(t,!0),null===(e=this.copyRange)||void 0===e||e.createFillOriginRange(),this.fireCommandAsync(this,new s.RefreshCommand),this.fireCommandAsync(this,new s.SelectedCommand),this.refreshRange={}}isFillHandleClick(e,t){if(!e.is(`.${v.SbCss.col}.${v.SbCss.fillHandle}`))return!1;const r=window.getComputedStyle(e[0],":after").getPropertyValue("border"),n=2*Math.ceil(Number.parseFloat(r)),i=1.5*Math.ceil(Number.parseFloat(e.css("border-width"))),o=t.offsetX+i,s=t.offsetY+i,a=e.outerWidth()-n,l=e.outerHeight()-n;return a<=o&&o<=a+n&&l<=s&&s<=l+n}get copyConfig(){var e;return null!==(e=this._copyConfig)&&void 0!==e?e:this._copyConfig=u.Convert.isValue(this.grid.config.copyable)?this.grid.config.copyable:void 0}addFillHandlerEvent(e){var t;if(!(null===(t=this.copyConfig)||void 0===t?void 0:t.fill))return;const r=e;this.grid.setEvent("selectManager","mousedown",this.name+"_fillHandler",(e=>n(this,void 0,void 0,(function*(){if(u.Convert.isNull(this.copyRange.fillOriginRange))return;if(0==this.isFillHandleClick(r,e))return;this.cancelEdit(r),this.copyRange.fillHandleStart(),this.isMouseDown=!0;const t=this.grid.view.keyMap,n=this.copyRange.fillOriginRange,i=t.get(n.rowStart),o=t.get(n.rowEnd),s=n.colStart,a=n.colEnd;return this.refreshRange={rowStart:i.rowIndex,rowEnd:o.index,colStart:u.Utils.findGridColumnByName(s,this.grid.columns).index,colEnd:u.Utils.findGridColumnByName(a,this.grid.columns).index},!1}))),r)}cancelEdit(e){return n(this,void 0,void 0,(function*(){const t=this.grid.getColumn(e),r=yield this.grid.getRowItem(e);if(!u.Convert.isNull(t)&&!u.Convert.isNull(r)&&t.isEdit(r)){const e=new s.EscapeCommand;this.fireCommandAsync(this,e)}}))}isFillHandler(e,t,r){var n;return(null===(n=this.copyConfig)||void 0===n?void 0:n.fill)&&this.copyRange.isFillHandler(e,t,r)}getCopyRangeClass(e,t,r,n,i){return u.Convert.isNull(this.copyRange)?"":this.makeEdgeClass(this.copyRange.copyRangeList,e,t,r,n,i,(e=>{let t=[];return(null==e?void 0:e.Top)&&t.push(v.SbCss.copy_top),(null==e?void 0:e.Bottom)&&t.push(v.SbCss.copy_bottom),(null==e?void 0:e.Left)&&t.push(v.SbCss.copy_left),(null==e?void 0:e.Right)&&t.push(v.SbCss.copy_right),t.join(" ").toString()}))}getFillHandleRangeClass(e,t,r,n,i){var o;return u.Convert.isNull(null===(o=this.copyRange)||void 0===o?void 0:o.fillOriginRange)?"":this.makeEdgeClass([this.copyRange.fillOriginRange],e,t,r,n,i,(e=>{if(u.Convert.isEmpty(e))return"";let t=[];return(null==e?void 0:e.Top)&&t.push(v.SbCss.fillHandle_top),(null==e?void 0:e.Bottom)&&t.push(v.SbCss.fillHandle_bottom),(null==e?void 0:e.Left)&&t.push(v.SbCss.fillHandle_left),(null==e?void 0:e.Right)&&t.push(v.SbCss.fillHandle_right),t.join(" ").toString()}))}fillHandleMove(e,t,r,n){this.copyRange.adjustFillRange(e,t,this.prevRowItem,this.prevColumn,r,n),this.prevColumn=t,this.prevRowItem=e,this.sendRefreshCommand()}fillCells(){return n(this,void 0,void 0,(function*(){const e=this.copyRange.fillOriginRange,t=this.copyRange.copyRangeList;try{if(u.Convert.isNull(e)||u.Convert.isNull(t))return;this.clear();const r=new d.Clipboard(this.grid);yield r.fillCells(e,t[0])}catch(e){l.Log.error(["fill handle move Exception ocurred",e])}finally{this.copyRange.fillHandleMove=!1,this.copyRange.copyRangeList=void 0,this.copyRange.fillOriginRange=void 0}}))}makeSelectClass(e,t,r,n,i){let o="";const s=i===m.PanelType.Body?null==e?void 0:e.key:i;if(t.selectable&&u.Convert.isValue(this.grid.config.selectable)){o+=this.isTemporaryCell(s,t.name)?` ${v.SbCss.selecting}`:"";const a=this.isSelectedCell(s,t.name);i===m.PanelType.Body?o+=e.isSelect&&!a?` ${v.SbCss.unselected}`:0==e.isSelect&&a?` ${v.SbCss.selected}`:"":o+=a?` ${v.SbCss.selected}`:"";const l=this.getCopyRangeClass(e,t,r,n,i);o+=u.Convert.isValue(l)?` ${l}`:"";o+=` ${this.getFillHandleRangeClass(e,t,r,n,i)}`;this.isFillHandler(e,t,i)&&(o+=` ${v.SbCss.fillHandle}`)}return o+=this.grid.focusManager.isFocused(e,t,i,r)?` ${v.SbCss.focused} `:"",o}doCommand(e,t){switch(t.command){case o.Commands.Focused:break;case o.Commands.Escape:this.cancelCopy();break;case o.Commands.Select:this.doSelect(t);break;default:return super.doCommand(e,t)}return!0}doSelect(e){return n(this,void 0,void 0,(function*(){switch(e.selectType){case C.Row:yield this._mouseDown(e.start.rowItem,e.start.column,m.PanelType.Body,!0),this.bodyMouseUp();break;case C.Cell:yield this._mouseDown(e.start.rowItem,e.start.column,m.PanelType.Body,!1),yield this._bodyMouseMove(e.end.rowItem,e.end.column),yield this.bodyMouseUp();default:u.Convert.isNull(e.start)&&u.Convert.isNull(e.end)&&this.selectAll()}}))}focusMoved(e){return n(this,void 0,void 0,(function*(){}))}canCopy(){if(!this.grid.config.copyable)return!1;let e=!0;try{u.Convert.isValue(this.copyRange.fillOriginRange)?this.copyRange.copyRangeList=[this.copyRange.fillOriginRange]:(this.copyRange.makeCopyRangeList(),u.Convert.isEmpty(this.copyRange.copyRangeList)&&(e=!1))}catch(t){e=!1}finally{return this.copyRange.clearCopyRanges(),e}}}var C,_,S,x;t.SelectManager=w,function(e){e.Cell="cell",e.Row="row",e.Col="col",e.None="none"}(C||(t.SelectType=C={})),function(e){e.Single="single",e.Multi="multi"}(_||(t.SelectMode=_={}));class k{static parseSelectOption(e){return!0===e?k.parseSelectOption(_.Single):!1===e?void 0:"string"==typeof e?k.parseSelectOption({selectMode:u.Convert.parseEnum(_,e)}):{selectMode:u.Convert.default(e.selectMode,_.Single,(e=>u.Convert.parseEnum(_,e))),rowSelect:u.Convert.default(e.rowSelect,!0),columnSelect:u.Convert.default(e.columnSelect,!1),cellSelect:u.Convert.default(e.cellSelect,C.None,(e=>u.Convert.parseEnum(C,e))),rowCheckable:u.Convert.default(e.rowCheckable,!1)}}}t.SelectOptionParser=k;t.CopyOptionParser=class{static parseCopyOption(e){return!1===e?void 0:!0===e?{fill:!1}:{fill:u.Convert.default(e.fill,!1)}}},function(e){e.Cell="cell",e.Row="row",e.Col="col"}(S||(t.HoverType=S={})),function(e){e.x="x",e.y="y"}(x||(x={}));class T{constructor(e){this._fillHandleMove=!1,this.preX=0,this.preY=0,this._selectManager=e,this._grid=e.grid}get copyRangeList(){return this._copyRangeList}set copyRangeList(e){this._copyRangeList=e}get fillOriginRange(){return this._fillHandleOriginRange}set fillOriginRange(e){this._fillHandleOriginRange=e}get fillHandleMove(){return this._fillHandleMove}set fillHandleMove(e){this._fillHandleMove=e}createFillOriginRange(){const e=this.makeColumnByRows();try{this.validRange(e);(e.size>1||[...e.values()].some((e=>(null==e?void 0:e.length)>1)))&&this.validMultiRowSelectRange(e);const t=this.makeSelectRange(e);this.fillOriginRange=1===(null==t?void 0:t.length)?t[0]:void 0}catch(e){l.Log.debug(e),this._fillHandleOriginRange=void 0}}makeSelectRange(e){const t=[];return T.sortColumns([...e.keys()],this._grid).forEach((r=>{let n=T.sortRows([...e.get(r)],this._grid);n.every((e=>u.Convert.isNull(e)))&&(n=[...e.get(r)]),n.forEach((e=>{const n=this.searchRange(t,r,e);if(u.Convert.isNull(n)){let n=this.createSelectRange(r,e);t.push(n)}else this.joinCell(n,e,r)}))})),t}joinCell(e,t,r){var n,i,o,s,a,l,c,h;const d=t instanceof p.RowItem?t.key:t,f=this._grid.view.keyMap;switch(e.type){case C.Row:const p=null!==(n=e.cellMap)&&void 0!==n?n:new Map;p.set(d,void 0),e.cellMap=p,e.rowStart=f.get(e.rowStart).rowIndex>t.rowIndex?t.key:e.rowStart,e.rowEnd=f.get(e.rowEnd).rowIndex<t.rowIndex?t.key:e.rowEnd;break;case C.Col:break;case C.Cell:const m=null!==(o=null===(i=e.cellMap)||void 0===i?void 0:i.get(d))&&void 0!==o?o:new Set;m.add(r.name);const g=null!==(s=e.cellMap)&&void 0!==s?s:new Map;g.set(d,m),e.cellMap=g,e.rowStart=(null===(a=f.get(e.rowStart))||void 0===a?void 0:a.rowIndex)>(null==t?void 0:t.rowIndex)?null==t?void 0:t.key:e.rowStart,e.rowEnd=(null===(l=f.get(e.rowEnd))||void 0===l?void 0:l.rowIndex)<(null==t?void 0:t.rowIndex)?null==t?void 0:t.key:e.rowEnd,e.colStart=(null===(c=u.Utils.findGridColumnByName(e.colStart,this._grid.wholeColumns))||void 0===c?void 0:c.index)>r.index?r.name:e.colStart,e.colEnd=(null===(h=u.Utils.findGridColumnByName(e.colEnd,this._grid.wholeColumns))||void 0===h?void 0:h.index)<=r.index?r.name:e.colEnd}return e}createSelectRange(e,t){let r;const n=t instanceof p.RowItem?null==t?void 0:t.key:t;return r=void 0===e?{type:C.Row,cellMap:(new Map).set(n,void 0),rowStart:t instanceof p.RowItem?n:void 0,rowEnd:t instanceof p.RowItem?n:void 0,colStart:this._grid.columns[0].name,colEnd:this.findLastColumn(this._grid.columns[this._grid.columns.length-1]).name}:{type:C.Cell,cellMap:(new Map).set(n,(new Set).add(e.name)),rowStart:t instanceof p.RowItem?n:void 0,rowEnd:t instanceof p.RowItem?n:void 0,colStart:e.name,colEnd:e.name},r}makeColumnByRows(){const e=[...this._selectManager.selectedRows.keys()],t=this._selectManager.selectedCells,r=[...this._selectManager.selectedColumns.keys()],n=new Map,i=this._grid.view.keyMap;return e.forEach((e=>{var t;if(i.has(e)){const r=null!==(t=n.get(void 0))&&void 0!==t?t:[];r.includes(e)||r.push(e),n.set(void 0,r)}})),t.forEach(((e,t)=>{const r=this._grid.wholeColumns;e.forEach((e=>{var i;const o=u.Arrays.bfsSearch(r,(t=>t.name===e||t.columns));if(u.Convert.isValue(o)){const e=null!==(i=n.get(o))&&void 0!==i?i:[];e.includes(t)||e.push(t),n.set(o,e)}}))})),r.forEach((e=>n.set(u.Utils.findGridColumnByName(e,this._grid.columns),void 0))),n}validRange(e){this._grid.view;const t=[...e.values()];let r=null==t?void 0:t.every((e=>{if(u.Convert.isNull(e))throw"컬럼 선택 복사는 지원되지 않습니다.";return t.every((t=>e.length==t.length&&e.every(((e,r)=>e==t[r]))))}));if(!r)throw"범위 지정이 잘못되었습니다.";return r}validMultiRowSelectRange(e){const t=e=>u.Convert.isValue(e.parent)?t(e.parent):e,r=t=>!(!u.Convert.isNull(t.field)&&!e.has(t))&&t.columns.every((e=>r(e)));if(![...e.keys()].every((e=>{if(u.Convert.isNull(e))return!0;const n=t(e);return r(n)})))throw"멀티로우 선택 실패."}searchRange(e,t,r){const n=this._grid.view.keyMap;return e.find((e=>{const i=n.get(e.rowStart),o=n.get(e.rowEnd);let s=!1;if(r instanceof p.RowItem?s=(null==i?void 0:i.rowIndex)<=(null==r?void 0:r.rowIndex)&&(null==r?void 0:r.rowIndex)<=(null==o?void 0:o.rowIndex)+1:"string"==typeof r&&(s=!0),void 0===t)return e.type===C.Row&&s;if(e.type!==C.Cell)return!1;if(s){const r=u.Utils.findGridColumnByName(e.colStart,this._grid.wholeColumns),n=u.Utils.findGridColumnByName(e.colEnd,this._grid.wholeColumns);return r.index<=t.index&&t.index<=n.index+1}return!1}))}findLastColumn(e){const t=e.columns;return u.Convert.isValue(t)?this.findLastColumn(t[t.length-1]):e}makeCopyRangeList(){const e=this.makeColumnByRows();try{return this.validRange(e),this.copyRangeList=this.makeSelectRange(e),this.copyRangeList}catch(e){throw this.copyRangeList=void 0,e}}isFillHandler(e,t,r){var n,i;if(r!=m.PanelType.Body)return!1;if(e.node instanceof a.GroupNode)return!1;if(t.part===b.PartType.Fixed)return!1;const o={rowKey:null===(n=this.fillOriginRange)||void 0===n?void 0:n.rowEnd,colName:null===(i=this.fillOriginRange)||void 0===i?void 0:i.colEnd};return(null==o?void 0:o.rowKey)===e.key&&(null==o?void 0:o.colName)===t.name}initRange(e,t,r){var n,i,o,s;const a=this._grid.view.keyMap,l=u.Utils.findGridColumnByName(null===(n=this.fillOriginRange)||void 0===n?void 0:n.colStart,this._grid.columns),c=a.get(null===(i=this.fillOriginRange)||void 0===i?void 0:i.rowStart);let h,d;switch(e){case x.x:d=l.index===r.index?(null===(o=u.Utils.findCellFromColumn(this._grid.rowLayout,l))||void 0===o?void 0:o.row)>(null===(s=u.Utils.findCellFromColumn(this._grid.rowLayout,r))||void 0===s?void 0:s.row):l.index>r.index,h={type:this._selectManager.tempSelectType,rowStart:this.fillOriginRange.rowStart,rowEnd:this.fillOriginRange.rowEnd,colStart:d?r.name:this.fillOriginRange.colStart,colEnd:d?this.fillOriginRange.colEnd:r.name,axis:e};break;case x.y:d=c.index>t.index,h={type:this._selectManager.tempSelectType,rowStart:d?t.key:this.fillOriginRange.rowStart,rowEnd:d?this.fillOriginRange.rowEnd:t.key,colStart:this.fillOriginRange.colStart,colEnd:this.fillOriginRange.colEnd,axis:e}}return h}adjustFillRange(e,t,r,i,o,s){return n(this,void 0,void 0,(function*(){const n=this._grid.view.keyMap,a=this.getAxis(e,t,r,i,o,s),l=this.initRange(a,e,t),c=n.get(null==l?void 0:l.rowStart),h=n.get(null==l?void 0:l.rowEnd),d=u.Utils.findGridColumnByName(null==l?void 0:l.colStart,this._grid.columns),f=u.Utils.findGridColumnByName(null==l?void 0:l.colEnd,this._grid.columns);u.Convert.isNull(d)||u.Convert.isNull(f)||(yield this._selectManager.calcSelectedColumns(c,d,h,f,((e,t)=>{this.joinCell(l,e,t)})),this.copyRangeList=[l])}))}getAxis(e,t,r,n,i,o){const s=this.fillOriginRange;if(s.type===C.Row)return x.y;if((()=>{if(s.rowStart===s.rowEnd&&s.colStart===s.colEnd)return!1;return[...s.cellMap.values()].some((e=>[...e].some((e=>{const t=u.Utils.findGridColumnByName(e,this._grid.wholeColumns);return u.Convert.isValue(t.parent)||u.Convert.isValue(t.columns)}))))})())return x.y;u.Convert.isNull(this._copyRangeList)&&(this.preX=0,this.preY=0);const a=Math.abs(this.preX-i),l=Math.abs(this.preY-o);return a<20&&l<20||(this.axis=a>l?x.x:x.y,this.preX=i,this.preY=o),this.axis}clearCopyRanges(){this.copyRangeList=[]}fillHandleStart(){this.copyRangeList=void 0,this.fillHandleMove=!0}static sortColumns(e,t){const r=e.sort(((e,r)=>{const n="string"==typeof e?u.Utils.findGridColumnByName(e,t.wholeColumns):e,i="string"==typeof r?u.Utils.findGridColumnByName(r,t.wholeColumns):r;let o=n.index,s=i.index;if(o===s){const e=u.Utils.findCellFromColumn(t.rowLayout,n),r=u.Utils.findCellFromColumn(t.rowLayout,i);o+=e.row,s+=r.row}return o<s?-1:o==s?0:1}));return"string"==typeof r[0]?r.map((e=>u.Utils.findGridColumnByName(e.toString(),t.wholeColumns))):r}static sortRows(e,t){const r=t.view.keyMap;return e.sort(((e,t)=>{var n,i;const o=null===(n=r.get(e))||void 0===n?void 0:n.rowIndex,s=null===(i=r.get(t))||void 0===i?void 0:i.rowIndex;return o<s?-1:o==s?0:1})).map((e=>r.get(e)))}}t.CopyRange=T},9172:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CaptionContentRenderer=t.ValidationContentRenderer=t.ContentRenderer=t.TooltipCategory=t.Placement=t.Tooltip=void 0;const i=r(7641),o=r(3396),s=r(7074),a=r(3988);var l,u;t.Tooltip=class{get lastTarget(){return this._lastTarget}set lastTarget(e){this._lastTarget=e}get tooltips(){var e;return null!==(e=this._tooltips)&&void 0!==e?e:[]}set tooltips(e){this._tooltips=e}constructor(e){this.grid=e}addEventHandler(e){this.grid.setEvent("tooltip","mouseover","tooltip-hover",(e=>this.mouseover(e)),e)}mouseover(e){return n(this,void 0,void 0,(function*(){if(this.grid.container.find(`.${s.SbCss.col}.${s.SbCss.invalid}`).length>0&&this.grid.container.find(`.${s.SbCss.cell}.${s.SbCss.edit}`).length>0)return;const t=a.SBGrid3.$(e.target),r=this.getConfig(t);if(o.Convert.isNull(r))return this.clearTooltips(),void(this.lastTarget=void 0);yield this.renderTooltip(t,r)}))}showTooltip(e,t,r){let n=this.findTooltip(e,r,t);o.Convert.isNull(n)&&(n=new f(t,r,this.grid),this.tooltips.push(n)),n.render(e)}findTooltip(e,t,r){const n=this.grid.getColumn(e),i=this.grid.getRowItem(e);return this.tooltips.find((e=>e.option==t&&e.type==r&&e.colSelector==n.cellSelector&&e.rowKey==(null==i?void 0:i.key)))}renderTooltip(e,t){return n(this,void 0,void 0,(function*(){const r=o.Convert.parseEnum(u,t[0]),n=t[1],i=e.closest(n.target);if(o.Convert.isNull(this.lastTarget)||i[0]!=this.lastTarget){let t;this.clearTooltips(),t=new f(r,n,this.grid),t.render(i),this.tooltips.push(t),this._lastTarget=e[0]}}))}clearTooltips(){this.grid.container.find(`.${s.SbCss.col}.${s.SbCss.invalid}`).length>0&&this.grid.container.find(`.${s.SbCss.cell}.${s.SbCss.edit}`).length;for(const e in this.tooltips){this.tooltips[e].fadeout()}this.tooltips=[]}clearTooltip(e,t){const r=this.tooltips.findIndex((r=>{const n=this.grid.getColumn(e),i=this.grid.getRowItem(e),o=n.cellSelector;if(r.type==t&&r.colSelector==o&&(null==i?void 0:i.key)===(null==r?void 0:r.rowKey))return r}));this._clearTooltip(r)}_clearTooltip(e){if(e>-1){this.tooltips[e].fadeout(),this.tooltips.splice(e,1)}}getConfig(e){const t=e.closest(`.${s.SbCss.col}`);if(o.Convert.isNull(t))return;const r=this.getTooltipConfig(t);if(o.Convert.isNull(r))return;const n=Object.entries(r);let i=n.find((([t,r])=>e.is(null==r?void 0:r.target)));return o.Convert.isNull(i)&&(i=n.find((([e,r])=>t.is(null==r?void 0:r.target)))),i}getTooltipConfig(e){const t=this.grid.getColumn(e);if(o.Convert.isNull(t))return;return t.config.tooltip}static getTooltipSelector(e){switch(e){case u.Cell:return c.target;case u.Caption:return d.target;case u.Validation:return h.target}}static getTitleFunc(e){switch(e){case u.Cell:return c.defaultFunc;case u.Caption:return d.defaultFunc;case u.Validation:return h.defaultFunc}}},function(e){e.Top="top",e.Bottom="bottom",e.Left="left",e.Right="right"}(l||(t.Placement=l={})),function(e){e.Validation="validation",e.Cell="cell",e.Caption="caption"}(u||(t.TooltipCategory=u={}));class c{get template(){var e;return null!==(e=this._template)&&void 0!==e?e:this._template=o.Utils.createTemplate(this.option.template)}constructor(e,t,r){this.rowItem=e,this.column=t,this.option=r}renderTitle(e){const t=o.JqUtils.adjustElement(e,` span.${s.SbCss.title}`,`<span class = '${s.SbCss.title}'></span>`);if(o.Convert.isValue(this.option.template))this.renderTempate(t,this.template);else{const e=this.option.title,r=typeof e,n="string"===r?e.toString():"function"===r?e(this.column,this.rowItem):void 0;t.text(n)}}renderTempate(e,t){const r=t(this.rowItem.data);e.html(r)}}t.ContentRenderer=c,c.defaultFunc=(e,t)=>e.getValue(t),c.target=".sbgrid-panel.sbgrid-body .sbgrid-row>.sbgrid-col";class h extends c{renderTempate(e,t){const r=t(this.column.isValid(this.rowItem));e.html(r)}}t.ValidationContentRenderer=h,h.defaultFunc=(e,t)=>{var r;return null===(r=e.isValid(t))||void 0===r?void 0:r.message},h.target=".sbgrid-invalid.sbgrid-indicator";class d extends c{renderTempate(e,t){const r=t(this.column.config);e.html(r)}}t.CaptionContentRenderer=d,d.defaultFunc=(e,t)=>e.config.caption,d.target=".sbgrid-panel.sbgrid-caption .sbgrid-row>.sbgrid-col";class f{get option(){return this._option}set option(e){this._option=e}get type(){return this._type}set type(e){this._type=e}get timeoutId(){return this._timeoutId}set timeoutId(e){this._timeoutId=e}get colSelector(){return this._colSelector}set colSelector(e){this._colSelector=e}get rowKey(){return this._rowSelector}set rowKey(e){this._rowSelector=e}constructor(e,t,r){this.option=t,this.name=o.Utils.ensureName("Tooltip"),this.grid=r,this.type=e}render(e){return n(this,void 0,void 0,(function*(){const t=e.closest(`.${s.SbCss.col}`);if(o.Convert.isNull(t))return;const r=this.grid.getColumn(e),n=o.JqUtils.adjustElement(this.grid.container,`#${this.name}.${s.SbCss.tooltip}`,`<div id=${this.name} class ='${s.SbCss.tooltip} ${this.getClassByType(this.type)} ${r.cellSelector}'></div>`),i=yield this.grid.getRowItem(t);this.getContentRenderer(this.type,i,r,this.option).renderTitle(n),this.setPosition(e,this.option.placement),this.colSelector=r.cellSelector,this.rowKey=null==i?void 0:i.key,this.show(n),o.Convert.isNull(this.moveTimer)&&(this.moveTimer=setInterval((()=>this.setPosition(e,this.option.placement)),50))}))}getContentRenderer(e,t,r,n){switch(e){case u.Cell:return new c(t,r,n);case u.Validation:return new h(t,r,n);case u.Caption:return new d(t,r,n)}}setPosition(e,t){const r=this.grid.container.find(`#${this.name}.${s.SbCss.tooltip}`);r.attr("data-placement",t);const n=new i.PopupPosition(this.grid.container);switch(t){case l.Top:n.positionTop(r,e);break;case l.Bottom:n.positionBottom(r,e);break;case l.Left:n.positionLeft(r,e);break;case l.Right:n.positionRight(r,e)}}fadeout(){clearInterval(this.moveTimer);const e=this.grid.container.find(`#${this.name}.${s.SbCss.tooltip}`);if(e.length<=0)return;const t=.001*this.option.delay.hide;if(t>0){e.css("transition","opacity 0.1s ease-in-out"),e.css("transition-delay",t+"s"),e.removeClass("show");const r=setTimeout((()=>{e.remove(),clearTimeout(r)}),t+1e3)}else e.remove()}show(e){const t=.001*this.option.delay.show;t>0?(e.css("transition","opacity 0.1s ease-in-out"),e.css("transition-delay",t+"s"),e.addClass("show")):e.addClass("show")}getClassByType(e){switch(e){case u.Caption:return s.SbCss.caption;case u.Cell:return s.SbCss.col;case u.Validation:return s.SbCss.invalid}}}},8401:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.UndoMoveToPart=t.UndoColumnVisible=t.UndoMoveRow=t.UndoMoveColumn=t.UndoGroup=t.UndoSort=t.UndoOrder=t.UndoCheckRow=t.UndoStickyRow=t.UndoCloseDetail=t.UndoOpenDetail=t.UndoToggleDetail=t.UndoCloseRow=t.UndoOpenRow=t.UndoToggleRow=t.UndoDelete=t.UndoInsertRow=t.UndoInsert=t.UndoUpdate=t.UndoColWidth=t.UndoScroll=t.UndoScope=t.UndoBase=t.UndoManager=void 0;const i=r(6328),o=r(3396),s=r(4579);t.UndoManager=class{constructor(e){this._doing=!1,this._grid=e}get grid(){return this._grid}get doing(){var e;return null!==(e=this._doing)&&void 0!==e?e:this._doing=!1}get lock(){var e;return null!==(e=this._lock)&&void 0!==e?e:this._lock=new o.Lock}get undoStack(){var e;return null!==(e=this._undoStack)&&void 0!==e?e:this._undoStack=new o.Stack}get redoStack(){var e;return null!==(e=this._redoStack)&&void 0!==e?e:this._redoStack=new o.Stack}clear(){this.undoStack.clear(),this.redoStack.clear()}_add(e){const t=this.undoStack.peek();e.overwrite&&(null==t?void 0:t.constructor.name)==e.constructor.name&&t.merge(e)||(this.redoStack.clear(),this.undoStack.push(e))}add(e){if(0==this.grid.config.undoable)return;if(this.doing)return;const t=e();this._add(t)}addScope(e,t){return n(this,void 0,void 0,(function*(){let r;try{this.grid.config.undoable&&0==this.doing&&(r=e(this.grid),r.acquire(this.grid),this._add(r));const n=t(this.grid);n instanceof Promise&&(yield n)}finally{null==r||r.release(this.grid)}}))}undo(){return n(this,void 0,void 0,(function*(){yield this.lock.acquire();try{const e=this.undoStack.pop();if(o.Convert.isNull(e))return!1;try{this._doing=!0;let t=e.undo(this.grid);for(;t instanceof Promise;)t=yield t;this.redoStack.push(e)}finally{this._doing=!1}}finally{yield this.lock.release()}return!0}))}redo(){return n(this,void 0,void 0,(function*(){yield this.lock.acquire();try{const e=this.redoStack.pop();if(o.Convert.isNull(e))return!1;try{this._doing=!0,this.undoStack.push(e);const t=e.redo(this.grid);t instanceof Promise&&(yield t)}finally{this._doing=!1}}finally{yield this.lock.release()}return!0}))}};class a{get overwrite(){return!1}merge(e){return!1}}t.UndoBase=a;class l extends a{}t.UndoScope=l;t.UndoScroll=class extends a{get overwrite(){return!0}constructor(e,t){super(),this.undoTop=e,this.redoTop=t}undo(e){e.topRow=this.undoTop}redo(e){e.topRow=this.redoTop}merge(e){return this.redoTop=e.redoTop,!0}};t.UndoColWidth=class extends a{constructor(e,t,r,n){super(),this.column=e,this.undoWidth=t,this.redoWidth=r,this.syncRightColumn=n}undo(e){e.setColumnSize(this.column,this.undoWidth,this.syncRightColumn)}redo(e){e.setColumnSize(this.column,this.redoWidth,this.syncRightColumn)}};t.UndoUpdate=class extends a{get overwrite(){return!0}get values(){var e;return null!==(e=this._values)&&void 0!==e?e:this._values=[]}constructor(e){super(),this._values=this.values.concat(e)}add(e){e instanceof Array?e.forEach((e=>this.values.push(e))):this.values.push(e)}undo(e){const t=this.values.map((e=>({key:e.key,value:e.undoValue,field:e.field})));e.view.setValues(t)}redo(e){const t=this.values.map((e=>({key:e.key,value:e.redoValue,field:e.field})));e.view.setValues(t)}merge(e){if(1!=this.values.length||1!=e.values.length)return!1;const t=this.values[0],r=e.values[0];return t.field==r.field&&(!o.Convert.isWhite(t.field)&&(t.redoValue=r.redoValue,!0))}get length(){return this.values.length}};t.UndoInsert=class extends a{get overwrite(){return!0}get values(){var e;return null!==(e=this._values)&&void 0!==e?e:this._values=[]}constructor(e,t){super(),this._values=this.values.concat(t),this._parentKey=e}add(e){e instanceof Array?e.forEach((e=>this.values.push(e))):this.values.push(e)}undo(e){const t=this.values.map((e=>({key:e.key,value:e.value,field:e.field})));e.view.insertValues(this._parentKey,t,!0)}redo(e){const t=this.values.map((e=>({key:void 0,value:e.value,field:e.field})));e.view.insertValues(this._parentKey,t,!1)}get length(){return this.values.length}};t.UndoInsertRow=class extends a{constructor(e,t,r,n,i,o){super(),this.parentKey=e,this.targetKey=t,this.box=r,this.undoKey=n,this.undoBox=i,this.insertTo=o}undo(e){return n(this,void 0,void 0,(function*(){yield e.insertRowItem(this.parentKey,this.undoKey,this.undoBox,this.insertTo,!0)}))}redo(e){return n(this,void 0,void 0,(function*(){yield e.insertRowItem(this.parentKey,this.targetKey,this.undoBox,this.insertTo,!1)}))}};t.UndoDelete=class extends a{constructor(e){super(),this.items=e}undo(e){return n(this,void 0,void 0,(function*(){yield e.removeRowItems([].concat(this.items.map((e=>({parentKey:e.parentKey,targetKey:e.undoKey,data:e.undoBox})))).reverse(),!0)}))}redo(e){return n(this,void 0,void 0,(function*(){yield e.removeRowItems([].concat(this.items.map((e=>({parentKey:e.parentKey,targetKey:e.targetKey,data:e.data})))),!1)}))}};t.UndoToggleRow=class extends a{constructor(e){super(),this.key=e}undo(e){return n(this,void 0,void 0,(function*(){yield e.toggleRow(this.key)}))}redo(e){return n(this,void 0,void 0,(function*(){yield e.toggleRow(this.key)}))}};t.UndoOpenRow=class extends a{constructor(e){super(),this.key=e}undo(e){return n(this,void 0,void 0,(function*(){yield e.toggleRow(this.key,!1)}))}redo(e){return n(this,void 0,void 0,(function*(){yield e.toggleRow(this.key,!0)}))}};t.UndoCloseRow=class extends a{constructor(e){super(),this.key=e}undo(e){return n(this,void 0,void 0,(function*(){yield e.toggleRow(this.key,!0)}))}redo(e){return n(this,void 0,void 0,(function*(){yield e.toggleRow(this.key,!1)}))}};t.UndoToggleDetail=class extends a{constructor(e){super(),this.key=e}undo(e){return n(this,void 0,void 0,(function*(){yield e.toggleDetail(this.key)}))}redo(e){return n(this,void 0,void 0,(function*(){yield e.toggleDetail(this.key)}))}};t.UndoOpenDetail=class extends a{constructor(e){super(),this.key=e}undo(e){return n(this,void 0,void 0,(function*(){yield e.toggleDetail(this.key,!1)}))}redo(e){return n(this,void 0,void 0,(function*(){yield e.toggleDetail(this.key,!0)}))}};t.UndoCloseDetail=class extends a{constructor(e){super(),this.key=e}undo(e){return n(this,void 0,void 0,(function*(){yield e.toggleDetail(this.key,!0)}))}redo(e){return n(this,void 0,void 0,(function*(){yield e.toggleDetail(this.key,!1)}))}};t.UndoStickyRow=class extends a{constructor(e){super(),this.key=e}undo(e){return n(this,void 0,void 0,(function*(){yield e.toggleStickyRow(this.key)}))}redo(e){return n(this,void 0,void 0,(function*(){yield e.toggleStickyRow(this.key)}))}};t.UndoCheckRow=class extends a{constructor(e){super(),this.key=e}undo(e){return n(this,void 0,void 0,(function*(){yield e.toggleCheckRow(this.key)}))}redo(e){return n(this,void 0,void 0,(function*(){yield e.toggleCheckRow(this.key)}))}};class u extends l{constructor(){super(...arguments),this.orderMap=[]}acquire(e){e.dataSource.orderMap=this.orderMap}release(e){e.dataSource.orderMap=void 0}undo(e){for(const t of[].concat(this.orderMap).reverse()){const r=e.view.map(t.key);o.Convert.isNull(r)||(r.node.index=t.oldIndex)}}redo(e){}}t.UndoOrder=u;t.UndoSort=class extends a{constructor(e,t){super(),this.undoOrders=i.DataSourceParser.parseOrders(e),this.redoOrders=i.DataSourceParser.parseOrders(t)}undo(e){e.setSort(this.undoOrders)}redo(e){e.setSort(this.redoOrders)}};t.UndoGroup=class extends a{constructor(e,t){super(),this.undoGroups=i.DataSourceParser.parseGroups(e),this.redoGroups=i.DataSourceParser.parseGroups(t)}undo(e){return n(this,void 0,void 0,(function*(){yield e.setGroup(this.undoGroups)}))}redo(e){return n(this,void 0,void 0,(function*(){yield e.setGroup(this.redoGroups)}))}};t.UndoMoveColumn=class extends a{constructor(e,t,r,n=!0){super(),this.wholeColumns=e,this.sourceColumn=t,this.targetColumn=r,this.isBefore=n,this.undoBefore=!1,this.undoColumn=s.Grid.findLeftColumn(t,e),o.Convert.isNull(this.undoColumn)&&(this.undoColumn=s.Grid.findRightColumn(t,e),o.Convert.isValue(this.undoColumn)?this.undoBefore=!0:(this.undoBefore=void 0,this.undoColumn=this.sourceColumn.parent))}undo(e){return n(this,void 0,void 0,(function*(){yield e.moveToColumn(this.sourceColumn,this.undoColumn,this.undoBefore)}))}redo(e){return n(this,void 0,void 0,(function*(){yield e.moveToColumn(this.sourceColumn,this.targetColumn,this.isBefore)}))}};t.UndoMoveRow=class extends u{constructor(e,t,r){super(),this.sourceKey=e.key,this.targetKey=t.key,this.isBefore=r;const n=e.node,i=n.parent,s=o.Convert.isNull(i)?e.view.dataSource.loader.nodes:i.nodes;s.length>=2?n.index>0?(this.undoKey=s[n.index-1].key,this.undoBefore=!1):(this.undoKey=s[1].key,this.undoBefore=!0):(this.undoBefore=void 0,this.undoKey=null==i?void 0:i.key)}undo(e){return n(this,void 0,void 0,(function*(){const t=e.view.map(this.sourceKey),r=e.view.map(this.undoKey);yield e.moveToRow(t,r,this.undoBefore),this.assignOld(e)}))}redo(e){return n(this,void 0,void 0,(function*(){const t=e.view.map(this.sourceKey),r=e.view.map(this.targetKey);yield e.moveToRow(t,r,this.isBefore),this.assignNew(e)}))}release(e){super.release(e),this.assignNew(e)}assignNew(e){if(!o.Convert.isEmpty(this.orderMap))for(const t of this.orderMap){const r=e.dataSource.map(t.key);o.Convert.isNull(r)||(r.originIndex=t.newIndex)}}assignOld(e){if(!o.Convert.isEmpty(this.orderMap))for(const t of this.orderMap){const r=e.dataSource.map(t.key);o.Convert.isNull(r)||(r.originIndex=t.oldIndex)}}};t.UndoColumnVisible=class extends a{constructor(e,t){super(),this.undoVisible=e,this.redoVisible=t}undo(e){e.columnVisible(this.undoVisible)}redo(e){e.columnVisible(this.redoVisible)}};t.UndoMoveToPart=class extends a{constructor(e,t,r,n,i){super(),this.column=e,this.undoPart=t,this.redoPart=r,this.parent=n,this.index=i}undo(e){e.moveToPart(this.column,this.undoPart,this.parent,this.index,!0)}redo(e){e.moveToPart(this.column,this.redoPart,this.parent,this.index,!1)}}},2519:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnValidator=t.InvalidError=t.DefaultMessages=t.FormTypes=t.ValidationState=t.Rules=t.BetweenValidator=t.ArrayValidator=t.StringValidator=t.BooleanValidator=t.DateValidator=t.NumberValidator=t.UrlValidator=t.EmailValidator=t.TypeValidator=t.MinLengthValidator=t.MaxLengthValidator=t.PatternValidator=t.CustomValidator=t.MaxValidator=t.MinValidator=t.RequiredValidator=t.Validator=void 0;const n=r(1374),i=r(3396);var o,s,a,l,u=r(9675);u.registerHelper("get",(function(e,t){return e.get(t)}));class c{getMessage(e,t){if((null==e?void 0:e.indexOf("{{"))>-1){const r=u.compile(e);e=r(t instanceof Array?{value1:t[0],value2:t[1]}:{value:t})}return e}}t.Validator=c;class h extends c{isValid(e,t){var r;return!i.Convert.isEmpty(t)?{state:s.Valid}:{cause:e,state:s.ValueMissing,message:this.getMessage(null!==(r=e.message)&&void 0!==r?r:l.Required)}}}t.RequiredValidator=h;class d extends c{isValid(e,t){var r;const n=e.dataType,o=i.Convert.convertType(t,n)>=i.Convert.convertType(e.value,n);let a;return a=i.Convert.isEmpty(t)||o?{state:s.Valid}:{cause:e,state:s.RangeUnderflow,message:this.getMessage(null!==(r=e.message)&&void 0!==r?r:l.Min,e.value)},a}}t.MinValidator=d;class f extends c{isValid(e,t){var r;const n=e.dataType,o=i.Convert.convertType(t,n)<=i.Convert.convertType(e.value,n);let a;return a=i.Convert.isEmpty(t)||o?{state:s.Valid}:{cause:e,state:s.RangeOverflow,message:this.getMessage(null!==(r=e.message)&&void 0!==r?r:l.Max,e.value)},a}}t.MaxValidator=f;class p extends c{isValid(e,t){var r;const n="function"==typeof e.rule?e.rule:"function"==typeof e.value?e.value:void 0;if(i.Convert.isNull(n))throw"invalid value . Custom rule must have Function value";let o;return o=n(t)?{state:s.Valid}:{cause:e,state:s.CustomError,message:this.getMessage(null!==(r=e.message)&&void 0!==r?r:l.Custom,e.value)},o}}t.CustomValidator=p;class m extends c{isValid(e,t){var r;const o="string"==typeof e.value?new RegExp(e.value):e.value instanceof RegExp?e.value:void 0;if(i.Convert.isNull(o))throw n.Log.info(["invalid RegExp ",e.value]),"invalid RegExp "+e.value;const a=o.test(t);let u;return u=i.Convert.isEmpty(t)||a?{state:s.Valid}:{state:s.PatternMismatch,cause:e,message:this.getMessage(null!==(r=e.message)&&void 0!==r?r:l.Pattern,e.value)},u}}t.PatternValidator=m;class g extends c{isValid(e,t){var r,n,o;const a=(null!==(n=null===(r=i.Convert.convertType(t,i.DataType.String))||void 0===r?void 0:r.length)&&void 0!==n?n:0)<=i.Convert.asNumber(e.value);let u={state:s.Valid};return i.Convert.isValue(t)&&!a&&(u={state:s.TooLong,cause:e,message:this.getMessage(null!==(o=e.message)&&void 0!==o?o:l.MaxLength,e.value)}),u}}t.MaxLengthValidator=g;class v extends c{isValid(e,t){var r,n,o;const a=(null!==(n=null===(r=i.Convert.convertType(t,i.DataType.String))||void 0===r?void 0:r.length)&&void 0!==n?n:0)>=i.Convert.asNumber(e.value);let u={state:s.Valid};return i.Convert.isValue(t)&&!a&&(u={state:s.TooShort,cause:e,message:this.getMessage(null!==(o=e.message)&&void 0!==o?o:l.MinLength,e.value)}),u}}t.MinLengthValidator=v;class y extends c{isValid(e,t){const r=i.Convert.parseEnum(o,e.value.toString()),n=k.getValidator(r);if(i.Convert.isValue(n))return n.isValid(e,t)}}t.TypeValidator=y;class b extends c{isValid(e,t){var r;const n=k.getValidator(o.Pattern),i={rule:o.Pattern,value:b.emailPattern,message:this.getMessage(null!==(r=e.message)&&void 0!==r?r:l.Email,e.value)};return n.isValid(i,t)}}t.EmailValidator=b,b.emailPattern=/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/;class w extends c{isValid(e,t){var r;const n=k.getValidator(o.Pattern),i={rule:o.Pattern,value:w.urlPattern,message:this.getMessage(null!==(r=e.message)&&void 0!==r?r:l.Url,e.value)};return n.isValid(i,t)}}t.UrlValidator=w,w.urlPattern=/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/;class C extends c{isValid(e,t){var r;const n=!isNaN(t)&&t!==1/0;let o={state:s.Valid};return i.Convert.isValue(t)&&!n&&(o={state:s.TypeMismatch,cause:e,message:this.getMessage(null!==(r=e.message)&&void 0!==r?r:l.Type,e.value)}),o}}t.NumberValidator=C;class _ extends c{isValid(e,t){var r;const n=i.Convert.convertType(t,i.DataType.Date),o=!isNaN(n);let a={state:s.Valid};return i.Convert.isValue(t)&&!o&&(a={state:s.TypeMismatch,cause:e,message:this.getMessage(null!==(r=e.message)&&void 0!==r?r:l.Type,e.value)}),a}}t.DateValidator=_;t.BooleanValidator=class extends c{isValid(e,t){var r;const n="boolean"==typeof i.Convert.convertType(t,i.DataType.Boolean);let o={state:s.Valid};return n||(o={state:s.TypeMismatch,cause:e,message:this.getMessage(null!==(r=e.message)&&void 0!==r?r:l.Type,e.value)}),o}};t.StringValidator=class extends c{isValid(e,t){var r;const n="string"==typeof i.Convert.convertType(t,i.DataType.String);let o={state:s.Valid};return n||(o={state:s.TypeMismatch,cause:e,message:this.getMessage(null!==(r=e.message)&&void 0!==r?r:l.Type,e.value)}),o}};t.ArrayValidator=class extends c{isValid(e,t){var r;const n=t instanceof Array;let i={state:s.Valid};return n||(i={state:s.TypeMismatch,cause:e,message:this.getMessage(null!==(r=e.message)&&void 0!==r?r:l.Type,e.value)}),i}};class S extends c{isValid(e,t){var r;const n=e.value,o=i.Convert.convertType(n[0],i.DataType.Number),a=i.Convert.convertType(n[1],i.DataType.Number),u=i.Convert.convertType(t,i.DataType.Number),c=o<=u&&u<=a;let h={state:s.Valid};return i.Convert.isValue(t)&&!c&&(h={state:s.RangeOverflow,cause:e,message:this.getMessage(null!==(r=e.message)&&void 0!==r?r:l.Between,e.value)}),h}}t.BetweenValidator=S,function(e){e.Required="required",e.Min="min",e.Max="max",e.Pattern="pattern",e.MaxLength="maxLength",e.MinLength="minLength",e.Custom="custom",e.Email="email",e.Between="between",e.Type="type",e.Url="url",e.Number="number",e.Date="date",e.None="none"}(o||(t.Rules=o={})),function(e){e[e.ValueMissing=0]="ValueMissing",e[e.PatternMismatch=1]="PatternMismatch",e[e.TooLong=2]="TooLong",e[e.TooShort=3]="TooShort",e[e.RangeOverflow=4]="RangeOverflow",e[e.RangeUnderflow=5]="RangeUnderflow",e[e.TypeMismatch=6]="TypeMismatch",e[e.CustomError=7]="CustomError",e[e.ConfigError=8]="ConfigError",e[e.Valid=9]="Valid"}(s||(t.ValidationState=s={})),function(e){e.Email="email",e.Url="url"}(a||(t.FormTypes=a={})),function(e){e.Required="빈 칸을 채우세요",e.Min="{{value}}이상의 값을 입력하세요",e.Max="{{value}}이하의 값을 입력하세요.",e.Pattern="잘못된 입력입니다.",e.MaxLength="{{value}}글자 이내로 입력하세요.",e.MinLength="{{value}}글자이상 입력하세요.",e.Email="이메일 형식으로 입력하세요.",e.Url="url 형식으로 입력하세요.",e.Between="{{value1}}과 {{value2}} 이내의 값을 입력하세요",e.Type="{{value}} 타입으로 입력하세요",e.Custom="커스텀에러 발생",e.None="none"}(l||(t.DefaultMessages=l={}));class x extends Error{constructor(e,t){super(e),this.validator=t}}t.InvalidError=x;class k{static getValidator(e){var t;const r=null!==(t=k.validators)&&void 0!==t?t:k.validators=new Map;let n=r.get(e);if(i.Convert.isNull(n)){switch(e){case o.Required:n=new h;break;case o.Min:n=new d;break;case o.Max:n=new f;break;case o.Type:n=new y;break;case o.Number:n=new C;break;case o.Date:n=new _;break;case o.Between:n=new S;break;case o.Email:n=new b;break;case o.Url:n=new w;break;case o.Pattern:n=new m;break;case o.Custom:n=new p;break;case o.MinLength:n=new v;break;case o.MaxLength:n=new g}if(!i.Convert.isValue(n))throw`'${e}' is not supported validator.`;r.set(e,n)}if(i.Convert.isNull(n))throw Error;return n}static isValid(e,t){let r;for(const a of e){const e="function"==typeof a.rule?o.Custom:a.rule,l=k.getValidator(e);if(i.Convert.isNull(l))return void n.Log.debug(["validator not found >> ",l]);if(r=l.isValid(a,t),r.state!==s.Valid)break}return r}}t.ColumnValidator=k},6231:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Viewport=void 0;const i=r(2733),o=r(1880),s=r(4072),a=r(5643),l=r(3396),u=r(1919),c=r(3211);class h extends i.Observer{constructor(e){super(e),this._grid=e}get grid(){return this._grid}get view(){return this.grid.view}get config(){return this.grid.config}get dataConfig(){return this.grid.dataConfig}get stickyRow(){var e;return null!==(e=this.config.stickyRow)&&void 0!==e&&e}get stickyFooter(){var e;return null!==(e=this.config.stickyFooter)&&void 0!==e&&e}get stickyHeader(){var e;return null!==(e=this.config.stickyHeader)&&void 0!==e&&e}get stickyEdit(){return this.config.stickyEdit}get stickyInsert(){return this.config.stickyInsert}get stickyUpdate(){return this.config.stickyUpdate}get stickyDelete(){return this.config.stickyDelete}get rowHeights(){var e;return null!==(e=this._rowHeights)&&void 0!==e?e:this._rowHeights=[]}get scrollPanel(){return this.grid.scrollPanel}get topRow(){return this.grid.topRow}set topRow(e){this.grid.topRow=e}get topCol(){return this.grid.topCol}set topCol(e){this.grid.topCol=e}get marginCol(){return this.grid.scrollPanel.scrollLeft}set marginCol(e){this.grid.scrollPanel.scrollLeft=e}clear(){this._rowHeights=[]}doCommand(e,t){switch(t.command){case o.Commands.Open:case o.Commands.Close:return this.clearRowHeights(t),!0;default:return super.doCommand(e,t)}return!0}clearRowHeights(e){this.rowHeights.splice(e.rowIndex)}calcCols(e,t=!0){var r;return n(this,void 0,void 0,(function*(){const t=this.grid.bodyWidth,n=u.GridLayout.makeViewportLayout(this.grid,this.grid.wholeColumns,e,t);return n.lastCol=null===(r=this.grid.wholeColumns[this.grid.wholeColumns.length-1])||void 0===r?void 0:r.index,n}))}calcRows(e,t=!0){var r;return n(this,void 0,void 0,(function*(){let n=this.scrollPanel.viewportHeight;0==n&&(n=void 0);const i={currRows:[],prevRows:[],nextRows:[],headers:[],footers:[],stickyKeys:new Set,bodyHeight:n,scrollHeight:0,footerHeight:0,headerHeight:0,rowHeights:0,marginTop:this.scrollPanel.scrollTop};return yield this.makeCurrRows(i,e,n,t),(this.stickyRow||this.stickyEdit||this.stickyInsert||this.stickyUpdate||this.stickyDelete)&&(n=yield this.makeStickyRows(i,n,t)),this.config.stickyHeader&&(n=yield this.makeStickyHeader(i,n,t)),this.config.stickyFooter&&(n=yield this.makeStickyFooter(i,n,t)),e=null===(r=i.currRows[i.currRows.length-1])||void 0===r?void 0:r.rowItem.rowIndex,i.headers.forEach((e=>i.headerHeight+=e.rowHeight.total)),i.footers.forEach((e=>i.footerHeight+=e.rowHeight.total)),i.scrollHeight=i.bodyHeight-i.headerHeight-i.footerHeight,this.rowMergeable&&(i.currRows.forEach(((e,t)=>i.currRows[t].rowHeight=this.getItemHeight(e.rowItem))),h.makeMergeRow(i.currRows,this.grid.columns),h.makeMergeRow(i.headers,this.grid.columns),h.makeMergeRow(i.footers,this.grid.columns)),i.rowHeights=i.currRows.reduce(((e,t)=>t.rowHeight.total+e),0),i}))}makeRows(){return n(this,void 0,void 0,(function*(){const e=this.grid.virtualRow?this.grid.view.topRow:this.grid.pageNo*this.pageSize;return yield this.calcRows(e,this.grid.virtualRow)}))}makeCurrRows(e,t,r,i){return n(this,void 0,void 0,(function*(){let n=0;if(i&&l.Convert.isValue(r))for(;;t++){const i=yield this.view.getRow(t);if(l.Convert.isNull(i))break;const o={rowItem:i,top:n,rowHeight:this.getItemHeight(i),rowIndex:t};if(e.currRows.push(o),n+=o.rowHeight.total,n>r)break}else for(const r in this.view.rows){const i=this.view.rows[r];if(l.Convert.isNull(i))break;const o={rowItem:i,top:n,rowHeight:this.getItemHeight(i),rowIndex:t};e.currRows.push(o),n+=o.rowHeight.total}}))}adjustCurrRows(e,t,r){if(0==r||t<0)return t;let n=0;const i=e.currRows.findIndex((e=>n>t||(n+=this.getItemHeight(e.rowItem).total,!1)));if(i>=0){n=0;const o=e.currRows.splice(i);for(const t of o.reverse())t.rowItem.isSticky&&(e.footers.splice(0,0,t),n+=this.getItemHeight(t.rowItem).total);n>0&&(t-=n,t=this.adjustCurrRows(e,t,r))}return t}static makeMergeRow(e,t){var r;const n=e.map((e=>({})));{for(const o of t){if(!1===o.mergeRow)continue;const s=null==o?void 0:o.field;if(l.Convert.isEmpty(s))continue;let a,u;for(let c=0,h=e.length;c<h;c++){const d=e[c],f=n[c],p=i(d.rowItem,o),m=d.rowItem.node.constructor.name,g=d.rowItem.level,v=d.rowItem.isSticky;if(f[s]={rowSpan:1,value:p,node:m,isDetail:d.rowItem.isDetail,level:g,isSticky:v},u==m&&a==p)for(let y=c-1;y>=-1;y--){const b=null===(r=n[y])||void 0===r?void 0:r[s];if(y<0||v||b.isSticky!=v||b.value!=p||b.node!=m||b.level!=g||1==b.isDetail){n[y+1][s].rowSpan=c-y;break}n[y+1][s].rowSpan=0}a=p,u=d.rowItem.node.constructor.name}}function i(e,t){return"function"==typeof t.mergeRow?t.mergeRow(e.data,e):null==e?void 0:e.data[t.field]}}for(const w in n){const C=n[w];if(!l.Convert.isNull(C)){for(const _ in C){const S=C[_];C[_]=S.rowSpan}e[w].merge=C}}return n}makeMerge(e,t,r){const n=[];let i=e.map((e=>e.clone()));const o=t.node.constructor.name;if(o==a.GroupNode.name||o==a.FooterNode.name)return i;if(this.grid.mergeRow)for(const e in i){const t=i[e],o=t.column;if(t.mergeCol>1||0==t.mergeCol)continue;const s=null==o?void 0:o.field,a=null==r?void 0:r[s];if(o.mergeRow&&(0==a||a>1)&&(t.mergeRow=0,a>1)){const e=t.clone();e.mergeRow=a,n.push(e)}}return i=this.grid.mergeColumn?this.makeMergeCol(i,t):i,i.concat(n)}makeMergeCol(e,t){const r=e,n=[],i=[];let o;for(let e=0;e<r.length;){const s=r[e],a=null==s?void 0:s.column;if(l.Convert.isNull(a)||!1===a.mergeColumn||s.mergeRow>1||0==s.mergeRow){i.push(void 0),o=void 0,e++;continue}const u={col:e,value:"function"==typeof a.mergeColumn?a.mergeColumn(t.data,t):a.getValue(t),colSpan:1,cell:s};if(i.push(u),l.Convert.isValue(o)&&o.value==u.value){let e=1;u.cell.mergeCol=0;for(let t=i.length-2;t>=-1;t--){const r=i[t];if(-1==t||l.Convert.isNull(r)||r.value!=u.value){i[t+1].cell.mergeCol=0;const r=i[t+1].cell.clone();r.mergeCol=e,n.push(r);break}i[t+1].cell.mergeCol=0,e++}}o=u,e+=s.colSpan}return r.concat(n)}makeStickyHeader(e,t,r){return n(this,void 0,void 0,(function*(){const n=e.headers;if(0==this.config.stickyHeader)return t;if(this.grid.loader instanceof s.ListLoader)return t;for(const t of e.currRows){if(l.Convert.isNull(t)||t.rowItem.isSticky)continue;let r=t.rowItem.parent;for(;l.Convert.isValue(r);)n.findIndex((e=>e.rowItem==r))<0&&e.currRows.findIndex((e=>e.rowItem==r))<0&&n.push({rowItem:r,rowHeight:this.getItemHeight(r)}),r=r.parent}return n.sort(h.treeIndexHeaderCompare),l.Convert.isValue(t)&&(t-=n.filter((e=>0==e.rowItem.isSticky)).reduce(((e,t)=>e+this.getItemHeight(t.rowItem).total),0),t=this.adjustCurrRows(e,t,r)),t}))}makeStickyFooter(e,t,r){return n(this,void 0,void 0,(function*(){if(0==this.config.stickyFooter)return t;if(this.grid.loader instanceof s.ListLoader)return t;const r=e.footers,n=new Set;for(const i of e.currRows.map((e=>e.rowItem))){if(n.has(i.key))continue;let o=i;for(;l.Convert.isValue(o);){if(o.isOpen&&o.isParentsOpen){const s=o.node instanceof a.ParentNode&&l.Convert.isValue(o.node.footer)?o.node:void 0;if(l.Convert.isValue(s)&&0==e.currRows.concat(r).some((e=>e.rowItem.key===s.footer.key))){const o=this.view.map(s.footer.key);if((null==o?void 0:o.node)instanceof a.FooterNode){if(!(r.findIndex((e=>e.rowItem==o))<0))break;{let s=l.Convert.isValue(t)?t-this.getItemHeight(o).total:this.getItemHeight(o).total;const a=e.currRows.findIndex((e=>e.top>s));if(a<0||0==e.currRows.some(((e,t)=>a<=t&&e.rowItem==i))){r.push(this.getRowsMap(o));e.currRows.splice(a).forEach((e=>{n.add(e.rowItem.key),e.rowItem.isSticky&&(this.addStickyFooter(r,e.rowItem),s+=e.rowHeight.total)})),l.Convert.isValue(t)&&(t=s)}}}}}o=o.parent}r.sort(h.treeIndexFooterCompare)}return t}))}getRowsMap(e){return{rowItem:e,rowHeight:this.getItemHeight(e),rowIndex:e.rowIndex}}makeStickyRows(e,t,r){var i,o;return n(this,void 0,void 0,(function*(){if(l.Convert.isNull(e))return;const n=e.currRows,s=e.headers,a=e.footers,u=e.stickyKeys,c=[].concat(n),d=[].concat(this.view.getStickyRows(this.stickyEdit,this.stickyInsert||this.stickyUpdate||this.stickyDelete)),f=s.length,p=null===(i=c[0])||void 0===i?void 0:i.rowItem.node.treeIndex,m=null===(o=c[c.length-1])||void 0===o?void 0:o.rowItem.node.treeIndex;for(const i of d){if(u.add(i.key),n.some((e=>e.rowItem.key==i.key)))continue;const o=i.node.treeIndex;if(l.Convert.isEmpty(p)||p>o)this.addStickyHeader(s,i);else{if(!(m<o))continue;this.addStickyFooter(a,i)}l.Convert.isValue(t)&&(t-=this.getItemHeight(i).total,t=this.adjustCurrRows(e,t,r))}return f!=s.length&&s.sort(h.treeIndexHeaderCompare),t}))}addStickyHeader(e,t){e.findIndex((e=>e.rowItem==t))<0&&e.push(this.getRowsMap(t))}addStickyFooter(e,t){e.findIndex((e=>e.rowItem==t))<0&&e.push(this.getRowsMap(t))}static treeIndexHeaderCompare(e,t){return e.rowItem.node.treeIndex==t.rowItem.node.treeIndex?0:e.rowItem.node.treeIndex>t.rowItem.node.treeIndex?1:-1}static treeIndexFooterCompare(e,t){const r=e.rowItem.node instanceof a.FooterNode?e.rowItem.node.parent.level:e.rowItem.node.level;return(t.rowItem.node instanceof a.FooterNode?t.rowItem.node.parent.level:t.rowItem.node.level)-r}calcRowHeights(){this.clear()}getItemHeight(e){var t;let r=0,n=0;if(l.Convert.isNull(e)){const e=this.grid.rowDepth*this.grid.rowHeight;return{total:e,height:e,detail:n}}const i=e.node.constructor.name;if((null!==(t=e.rowHeight)&&void 0!==t?t:0)>0){const t=e.rowHeight,r=1==e.isDetail&&i!=a.GroupNode.name&&i!=a.FooterNode.name?e.detailHeight:0;return{total:t+r,height:t,detail:r}}switch(i){case a.GroupItem.name:case a.ListNode.name:case a.TreeNode.name:r=this.grid.rowDepth*this.grid.rowHeight;break;case a.GroupNode.name:const{header:t}=this.grid.groupLayout(e.node.igroup.field);r=t.rows.length*this.grid.groupHeight;break;case a.FooterNode.name:const n=e.node.parent;if(n instanceof a.GroupNode){const{footer:e}=this.grid.groupLayout(n.igroup.field);r=e.rows.length*this.grid.groupHeight}else{r=this.grid.treeFooterLayout.rows.length*this.grid.groupHeight}}return 1==e.isDetail&&i!=a.GroupNode.name&&i!=a.FooterNode.name?(e.setHeight(r,this.grid.detailHeight),n=this.grid.detailHeight):e.setHeight(r,void 0),{total:r+n,height:r,detail:n}}setRowHeight(e,t,r){e.setHeight(t,r)&&(this.rowHeights.splice(e.rowIndex),this.rowHeights[e.rowIndex]=this.rowHeights[e.rowIndex-1]+t)}get pageSize(){return this.dataConfig.pageSize}getScrollHeight(e=void 0){var t;const r=l.Convert.isValue(e)?0:l.Convert.isNull(e)?this.config.virtualRow?0:this.topRow-this.topRow%this.pageSize:e-e%this.pageSize,n=l.Convert.isNull(e)?this.config.virtualRow||0==this.dataConfig.serverPaging?this.grid.rowCount-1:r+this.pageSize:e;if(this.fixedHeight&&0==this.grid.hasDetail&&this.grid.loader instanceof s.ListLoader)return this.grid.rowDepth*this.grid.rowHeight*(n-r+1);let i=0,o=0;for(const e of this.grid.rows.keys())if(!(e<r)){if(n<=e)break;i+=null!==(t=this.getItemHeight(this.grid.rows[e]).total)&&void 0!==t?t:0,o++}const a=n-r-o;return i+this.grid.rowDepth*this.grid.rowHeight*a}get fixedHeight(){return this.config.fixedRows}get rowMergeable(){return this.config.mergeRow}setScroll(e,t){return n(this,void 0,void 0,(function*(){this.grid.selectManager.hideHover(),this.grid.scrollPanel.removeMenu(),this.grid.scrollPanel.removeComboPopupScrolling(),l.Convert.isValue(t)&&t>=0&&(yield this.setScrollRow(t)),l.Convert.isValue(e)&&e>=0&&(yield this.setScrollCol(e)),this.scrollPanel.rePositionMultiText()}))}setScrollRow(e){return n(this,void 0,void 0,(function*(){if(this.grid.virtualRow)this.topRow!=e&&(this.topRow=e);else{const t=yield this.getRowScrollInfo(e);this.grid.view.topRow=t.index,this.grid.scrollPanel.scrollTop=e}}))}setScrollCol(e){return n(this,void 0,void 0,(function*(){if(e+=this.grid.fixedColumns.length+this.grid.headColumns.length,this.grid.virtualColumn)this.topCol!=e&&(this.topCol=e);else{const t=yield this.getColScrollInfo(e);this.grid.view.topCol=t.index,this.scrollPanel.scrollLeft=e}}))}getRowScrollInfo(e){var t;return n(this,void 0,void 0,(function*(){0==this.grid.rowCount&&(yield this.view.prepareRows());let r=0,n=0,i=0;for(const o=this.grid.rowCount;r<o;r++){const o=this.grid.rows[r];if(i=this.getItemHeight(o).total,n+=i,0==this.grid.virtualRow&&null!==(t=null==o?void 0:o.isSticky)&&void 0!==t&&t&&(e+=i),e<n)break}return{margin:n-e-i,total:n,index:r}}))}getColScrollInfo(e){var t;return n(this,void 0,void 0,(function*(){let r=0,n=0,i=0;const o=null===(t=this.grid.defaultLayout.rows[0])||void 0===t?void 0:t.getCells(c.PartType.Body);for(const t in o){const s=o[t];if(r=s.col,i=s.width,n+=i,0==this.grid.virtualColumn&&s.isSticky&&(e+=i),e<n)break}return{margin:n-e-i,total:n,index:r}}))}}t.Viewport=h},8461:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateUtil=void 0;class r{constructor(){this.format2=function(e,t){if(!this.valueOf())return" ";const r=["일요일","월요일","화요일","수요일","목요일","금요일","토요일"];let n,i=e;return t.replace(/(yyyy|yy|MM|dd|E|hh|mm|ss|a\/p)/gi,(function(e){switch(e){case"yyyy":return i.getFullYear();case"yy":return this.pad(i.getFullYear()%1e3,2);case"MM":return this.pad(i.getMonth()+1,2);case"dd":return this.pad(i.getDate(),2);case"E":return r[i.getDay()];case"HH":return this.pad(i.getHours(),2);case"hh":return this.pad((n=i.getHours()%12)?n:12,2);case"mm":return this.pad(i.getMinutes(),2);case"ss":return this.pad(i.getSeconds(),2);case"a/p":return i.getHours()<12?"오전":"오후";default:return e}}))}}static dateFormat(e,t,r){this.dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(e)||/\d/.test(e)||(t=e,e=void 0),e=e?new Date(e):new Date,isNaN(e))throw SyntaxError("invalid date");"UTC:"==(t=String(this.masks[t]||t||this.masks.default)).slice(0,4)&&(t=t.slice(4),r=!0);const n=r?"getUTC":"get",i=e[n+"Date"](),o=e[n+"Day"](),s=e[n+"Month"](),a=e[n+"FullYear"](),l=e[n+"Hours"](),u=e[n+"Minutes"](),c=e[n+"Seconds"](),h=e[n+"Milliseconds"](),d=r?0:e.getTimezoneOffset(),f={d:i,dd:this.pad(i),ddd:this.i18n.dayNames[o],dddd:this.i18n.dayNames[o+7],M:s+1,MM:this.pad(s+1),MMM:this.i18n.monthNames[s],MMMM:this.i18n.monthNames[s+12],yy:String(a).slice(2),yyyy:a,h:l%12||12,hh:this.pad(l%12||12),H:l,HH:this.pad(l),m:u,mm:this.pad(u),s:c,ss:this.pad(c),l:this.pad(h,3),L:this.pad(h>99?Math.round(h/10):h),t:l<12?"a":"p",tt:l<12?"am":"pm",T:l<12?"A":"P",TT:l<12?"AM":"PM",Z:r?"UTC":(String(e).match(this.timezone)||[""]).pop().replace(this.timezoneClip,""),o:(d>0?"-":"+")+this.pad(100*Math.floor(Math.abs(d)/60)+Math.abs(d)%60,4),S:["th","st","nd","rd"][i%10>3?0:i%100-i%10!=10?i%10:0]};return t.replace(this.token,(function(e){return e in f?f[e]:e.slice(1,e.length-1)}))}static format(e,t,r){return this.dateFormat(e,t,r)}}t.DateUtil=r,r.token=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,r.timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,r.timezoneClip=/[^-+\dA-Z]/g,r.pad=function(e,t=0){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e},r.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},r.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]}},1374:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Log=t.LogLevels=void 0;const n=r(3988);var i;!function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warn=3]="Warn",e[e.Error=4]="Error"}(i||(t.LogLevels=i={}));const o=new Map([[i.Trace,console.trace],[i.Debug,console.debug],[i.Info,console.info],[i.Warn,console.warn],[i.Error,console.error]]);class s{static timeEnd(e){}static time(e){}static timeLog(e,...t){}static whoIsMyDaddy(){try{throw new Error}catch(e){const t=e.stack.match(/(\w+)@|at (\w+) \(/g)[2].match(/(\w+)@|at (\w+) \(/);return t[1]||t[2]}}}t.Log=s,s.log=(e,t)=>{var r;if(e>=n.SBGrid3.LogLevel){try{null===(r=o.get(e))||void 0===r||r("string"==typeof t?t:"function"==typeof t?t():t)}catch(e){}return!0}return!1},s.trace=e=>s.log(i.Trace,e),s.debug=e=>s.log(i.Debug,e),s.info=e=>s.log(i.Info,e),s.warn=e=>s.log(i.Warn,e),s.error=e=>s.log(i.Error,e)},9019:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomMask=t.DateMask=t.RRNMask=t.PhoneMask=t.Mask=t.MaskType=void 0;const n=r(3988),i=r(7074),o=r(3396);var s;!function(e){e.Phone="phone",e.RRN="rrn",e.Date="date",e.Custom="custom"}(s||(t.MaskType=s={}));class a{get slots(){return o.Convert.isNull(this._slots)&&(this._slots=new Set(this.config.slots)),this._slots}get accept(){if(o.Convert.isNull(this._accept)){const e="string"==typeof this.config.accept?[this.config.accept,"\\*"]:[...this.config.accept,"\\*"];this._accept=new RegExp(`[${e.join(",")}]`,"g")}return this._accept}get unmaskAccepts(){if(o.Convert.isNull(this._unmaskAccepts)){const e="string"==typeof this.config.accept?[this.config.accept,"\\*"]:[...this.config.accept,"\\*"];this._unmaskAccepts=new RegExp(`[^${e.join(",")}]`,"g")}return this._unmaskAccepts}set column(e){this._column=e}get column(){return this._column}get config(){return this._config}get maskConfig(){return o.Convert.isNull(this._maskConfig)&&("string"==typeof this.column.config.mask?this._maskConfig={type:this.column.config.mask}:this._maskConfig=this.column.config.mask),this._maskConfig}constructor(e){this.column=e,this._config=this.parseConfig(this.maskConfig)}parseConfig(e){if(!o.Convert.isNull(e))return this.maskConfig.type=o.Convert.default(e.type,void 0),this.maskConfig.unMaskValue=o.Convert.default(e.unMaskValue,!1),this.maskConfig.useHide=o.Convert.default(e.useHide,!1),this.maskConfig}static create(e){var t;switch("object"==typeof e.config.mask?null===(t=e.config.mask)||void 0===t?void 0:t.type:e.config.mask){case s.Phone:return new l(e);case s.RRN:return new u(e);case s.Date:return new c(e);case s.Custom:return new h(e);default:return new a(e)}}format(e){const t=e.value;return this.clean(t).join("")===this.config.pattern?"":this.clean(t).join("")}mask(e){const t=e instanceof HTMLElement?e:e.get(0);if(o.Convert.isNull(this.config))return;const r=(e=>Array.from(this.config.pattern,((t,r)=>this.slots.has(t)?e=r+1:e)))(0);[...this.config.pattern].findIndex((e=>this.slots.has(e)));t.value=this.format(t),t.setAttribute("placeholder",this.config.pattern),t.setSelectionRange(0,t.value.length),this.column.grid.setEvent("MaskInput","input",this.column.name,(e=>{const s=n.SBGrid3.$(t).closest(`span.${i.SbCss.col}`),a=this.column.grid.getRowItem(s),[l,u]=[t.selectionStart,t.selectionEnd].map((e=>(e=this.clean(t.value.slice(0,e)).findIndex((e=>this.slots.has(e))))<0?r[r.length-1]:e));return t.value=this.format(t),o.Convert.isValue(this.config.pattern)&&t.setSelectionRange(l,u),this.column.setTemp(a,s),!1}),t,!0)}getEditValue(e){return o.Convert.isNull(this.config)?e.val():!1===this.config.unMaskValue?this.getMaskValue(e):this.getUnMaskValue(e)}getMaskValue(e){return e.val()}getUnMaskValue(e){return e.val().replace(new RegExp(this.unmaskAccepts,"g"),"")}clean(e){return e=e.match(this.accept)||[],o.Convert.isEmpty(this.config.pattern)?e:Array.from(this.config.pattern,(t=>(e[0]===t||this.slots.has(t))&&e.shift()||t))}}t.Mask=a;class l extends a{parseConfig(e){const t=super.parseConfig(e);return t.pattern="___-____-____",t.slots="_",t.accept="\\d",t}get config(){return super.config}format(e){let t=e.value;const{useHide:r,pattern:n,slots:i}=this.config;if(!0===r){const e=t.replace(new RegExp(`[\\${i},\\-]`,"g"),"").match(/[\d,\\*]{4}/gi);if(o.Convert.isValue(e)&&1===e.length){const e=t.replace(new RegExp(`[\\${i},\\-]`,"g"),"").split("");e.splice(e.length-1,1,"*"),t=e.join("")}}return this.clean(t).join("")===n?"":this.clean(t).join("")}}t.PhoneMask=l;class u extends a{parseConfig(e){const t=super.parseConfig(e);return t.pattern="______-_______",t.slots="_",t.accept="\\d",t}get config(){return super.config}format(e){const{useHide:t,slots:r,pattern:n}=this.config;let i=e.value;if(o.Convert.isNull(i))return i;const s=i.replace(new RegExp(`[\\${r},\\-]`,"g"),"").match(/\d{7}/gi);if(!0===t&&o.Convert.isValue(s)&&i.indexOf("-")>0){if(i.split("-")[1].replace(new RegExp(`\\${r}`,"g"),"").length>1){const e=i.replace(new RegExp(`\\${r}`,"g"),"").split("");e.splice(e.length-1,1,"*"),i=e.join("")}}return this.clean(i).join("")===n?"":this.clean(i).join("")}}t.RRNMask=u;class c extends a{parseConfig(e){var t;const r=super.parseConfig(e);return r.pattern=null!==(t=e.pattern)&&void 0!==t?t:"yyyy/mm/dd",r.slots="ymdhs",r.accept="\\d",r}get config(){return super.config}}t.DateMask=c;class h extends a{parseConfig(e){var t,r,n;const i=super.parseConfig(e);return i.pattern=null!==(t=e.pattern)&&void 0!==t?t:"",i.slots=null!==(r=e.slots)&&void 0!==r?r:"",i.accept=null!==(n=e.accept)&&void 0!==n?n:"",i}get config(){return super.config}format(e){let t=e.value;return"function"==typeof this.config.useHide&&(t=this.config.useHide(t)),this.clean(t).join("")}}t.CustomMask=h},7565:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NumberUtil=void 0;class r{static getIndex(e){return e.search(this.maskRegex)}static processMask(e="#.##"){const t={},r=e.length,n=this.getIndex(e);t.prefix=n>0?e.substring(0,n):"";const i=this.getIndex(e.split("").reverse().join("")),o=r-i,s=e.substring(o,o+1),a=o+("."===s||","===s?1:0);t.suffix=i>0?e.substring(a,r):"",t.mask=e.substring(n,a),t.maskHasNegativeSign="-"===t.mask.charAt(0),t.maskHasPositiveSign="+"===t.mask.charAt(0);let l=t.mask.match(this.notMaskRegex);t.decimal=l&&l[l.length-1]||".",t.separator=l&&l[1]&&l[0]||",";const u=t.mask.split(t.decimal);return t.integer=u[0],t.fraction=u[1],t}static processValue(e,t,r){let n=!1;const i={value:e};e<0&&(n=!0,i.value=-i.value),i.sign=n?"-":"",i.value=Number(i.value).toFixed(t.fraction&&t.fraction.length),i.value=Number(i.value).toString();const o=t.fraction&&t.fraction.lastIndexOf("0");let[s="0",a=""]=i.value.split(".");return(!a||a&&a.length<=o)&&(a=o<0?"":Number("0."+a).toFixed(o+1).replace("0.","")),i.integer=s,i.fraction=a,this.addSeparators(i,t),"0"!==i.result&&""!==i.result||(n=!1,i.sign=""),!n&&t.maskHasPositiveSign?i.sign="+":n&&t.maskHasPositiveSign?i.sign="-":n&&(i.sign=r&&r.enforceMaskSign&&!t.maskHasNegativeSign?"":"-"),i}static addSeparators(e,t){e.result="";const r=t.integer.split(t.separator),n=r.join(""),i=n&&n.indexOf("0");if(i>-1)for(;e.integer.length<n.length-i;)e.integer="0"+e.integer;else 0===Number(e.integer)&&(e.integer="");const o=r[1]&&r[r.length-1].length;if(o){const r=e.integer.length,n=r%o;for(let i=0;i<r;i++)e.result+=e.integer.charAt(i),!((i-n+1)%o)&&i<r-o&&(e.result+=t.separator)}else e.result=e.integer;return e.result+=t.fraction&&e.fraction?t.decimal+e.fraction:"",e}static format(e,t,r={enforceMaskSign:!0}){if(!t||isNaN(Number(e)))return e;const n=this.processMask(t),i=this.processValue(e,n,r);return n.prefix+i.sign+i.result+n.suffix}}t.NumberUtil=r,r.maskRegex=/[0-9\-+#]/,r.notMaskRegex=/[^\d\-+#]/g},3396:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Crypto=t.CancellationToken=t.Lock=t.FuzzyMatcher=t.JqUtils=t.Queue=t.Stack=t.Arrays=t.Utils=t.Convert=t.DataType=void 0;const i=r(3988),o=r(8461),s=r(1374),a=r(7565);var l,u=r(9675);u.setDelimiter=function(...e){u.original_compile||(u.original_compile=u.compile);for(const t of e){const e=t.prefix.source,r=t.suffix.source;t.searchExp=new RegExp("("+e+")(.*?)("+r+")","ig"),t.prefixExp=new RegExp(e,"ig"),t.suffixExp=new RegExp(r,"ig")}u.compile=function(t){let r=t;for(const t of e)r=r.replace(t.searchExp,((e,r,n,i,o,s)=>(r=r.replace(t.prefixExp,t.prefix.target))+n+(i=i.replace(t.suffixExp,t.suffix.target))));return u.original_compile(r)}},u.setDelimiter({prefix:{source:"`{{",target:"{{params "},suffix:{source:"}}`",target:"}}"}},{prefix:{source:'"{{',target:"{{params "},suffix:{source:'}}"',target:"}}"}},{prefix:{source:"'{{",target:"{{params "},suffix:{source:"}}'",target:"}}"}}),u.registerHelper("get",(function(e,t){return e.get(t)})),u.registerHelper("json",(function(e){return JSON.stringify(e)})),u.registerHelper("params",(function(...e){s.Log.debug((()=>["params",e])),e.pop();let t=[];for(const r of e)t.push(JSON.stringify(r));return t.join(", ")})),function(e){e.String="string",e.Number="number",e.Boolean="boolean",e.Date="date",e.Array="array",e.Any="any",e.Object="object"}(l||(t.DataType=l={}));class c{static repeat(e,t){let r=[];for(let n=0;n<e;n++)r.push(t(n));return r.join("")}static asText(e){return"string"==typeof e?e:"symbol"==typeof e?e.description:null==e?void 0:e.toString()}static asDate(e){return e instanceof Date?e:c.isEmpty(e)?void 0:"string"==typeof e?new Date(Date.parse(e)):new Date(e)}static isEmpty(e){if(this.isNull(e))return!0;switch(typeof e){case"function":return!1;case"string":return""===e;case"number":return e===1/0||isNaN(e);case"object":if(e instanceof Array)return 0==e.length;if(e instanceof Map)return 0==e.size;if(e instanceof Set)return 0==e.size;if(e.constructor===Object)return 0==Object.keys(e).length}return!1}static isWhite(e){return"string"==typeof e?""===e||""===e.trim():this.isEmpty(e)}static isValue(e){return!c.isEmpty(e)}static isNull(e){return null==e}static isSameValue(e,t){if(e===t)return!0;const r=typeof e;if(r!=typeof t)switch(r){case"bigint":return e==c.asBigInt(t);case"boolean":return e==c.asBool(t);case"function":case"object":case"symbol":case"undefined":return e==t;case"number":return e==c.asNumber(t);case"string":return e==c.asText(t)}return!1}static isSame(e,t,r=!1){if(e===t)return!0;c.isNull(e)&&(e={}),c.isNull(t)&&(t={});for(const r in e)if(0==this.isSameValue(e[r],t[r]))return!1;if(r)for(const r in null!=t?t:{})if(0==this.isSameValue(e[r],t[r]))return!1;return!0}static asInt(e){return"number"==typeof e?Math.round(e):Math.round(Number.parseFloat(e))}static asBigInt(e){return"bigint"==typeof e?e:BigInt(e)}static asFloat(e){return"number"==typeof e?e:Number.parseFloat(e)}static asNumber(e){return"number"==typeof e?e:Number.parseFloat(e)}static valueOf(e,t){var r;if((null!==(r=null==e?void 0:e.length)&&void 0!==r?r:0)<=t)throw`[${e}] : out of index(${t})`;return e[t]}static asBool(e){if("boolean"==typeof e)return e;if("string"==typeof e)switch(e.trim().toLowerCase()){case"":case"false":return!1;default:return!0}return Boolean(e)}static asStringArray(e,t){return c.isEmpty(e)&&c.isEmpty(t)?[]:"string"==typeof e?[e]:e instanceof Array&&c.isValue(e)?e:this.asStringArray(t,void 0)}static default(e,t,r){return this.isNull(e)?t:this.isNull(r)?e:r(e)}static parseEnum(e,t){if(c.isEmpty(t))return;let r=e[Object.keys(e).filter((r=>e[r].toString().toLowerCase()===t.toLowerCase()))[0]];if(c.isEmpty(r)){throw`'${t}' is invalid enum value ${e.constructor.name} [${Object.values(e)}]`}return r}static makeQueryString(e={},t){var r=[];for(let n in e)if(e.hasOwnProperty(n)){let i=t?t+"["+n+"]":n,o=e[n];r.push(null!==o&&"object"==typeof o?c.makeQueryString(o,i):encodeURIComponent(i)+"="+encodeURIComponent(o))}return r.join("&")}static arrayEqual(e,t,r){var n,i;if(c.isNull(e)&&c.isNull(t))return!0;let o=null!==(n=null==e?void 0:e.length)&&void 0!==n?n:0;if(o!=(null!==(i=null==t?void 0:t.length)&&void 0!==i?i:0))return!1;for(let n=0;n<o;n++)if(0==r(e[n],t[n]))return!1;return!0}static lpad(e,t,r){if(r.length>t)return s.Log.warn((()=>"오류 : 채우고자 하는 문자열이 요청 길이보다 큽니다")),e;for(e+="",r+="";e.length<t;)e=r+e;return e=e.length>=t?e.substring(0,t):e}static rpad(e,t,r){if(r.length>t)return s.Log.warn((()=>"오류 : 채우고자 하는 문자열이 요청 길이보다 큽니다")),e+"";for(e+="",r+="";e.length<t;)e+=r;return e=e.length>=t?e.substring(0,t):e}static testQueryString(){i.SBGrid3.Log.debug((()=>c.makeQueryString({foo:"hi there",bar:{blah:123,quux:[1,2,3]}})))}static formatValue(e,t,r=void 0){const n=c.isEmpty(t)?e:c.isValue(e)?e[t]:void 0;return c.isEmpty(r)?n:"function"==typeof r?r(n):"number"==typeof n?a.NumberUtil.format(n,r):n instanceof Date?o.DateUtil.format(n,r,!1):c.isNull(n)?"":n}static mergeData(e,t=void 0){const r={};for(const t in null!=e?e:{})r[t]=e[t];for(const e in null!=t?t:{})r.hasOwnProperty(e)||(r[e]=t[e]);return r}static mergeArray(e,t){const r=new Set;if(c.isValue(e))for(const t in e)r.add(e[t]);if(c.isValue(t))for(const e in t)r.add(t[e]);return Array.from(r)}static cloneData(e){const t={};for(const r in null!=e?e:{})t[r]=e[r];return t}static between(e,t,r){return(null!=e?e:t)<=t&&t<=(null!=r?r:t)}static convertType(e,t){if(c.isEmpty(t))return e;if("function"==typeof t)return t(e);if(!c.isNull(e))switch(t){case l.Array:return e;case l.Boolean:return c.asBool(e);case l.Date:return c.asDate(e);case l.Number:return c.asNumber(e);case l.String:return c.asText(e);default:return e}}}t.Convert=c;class h{static postData(e="",t={}){return n(this,void 0,void 0,(function*(){s.Log.debug((()=>({f:"postData",url:e,payload:t})));const r=yield fetch(e,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json","access-control-allow-origin":"*","access-control-allow-credentials":"true"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});return yield r.json()}))}static getData(e="",t={}){return n(this,void 0,void 0,(function*(){var r=c.makeQueryString(t);e=c.isEmpty(r)?e:e.replace("?","")+"?"+r;const n=yield fetch(e,{method:"GET",mode:"no-cors",cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json","access-control-allow-origin":"*","access-control-allow-credentials":"true"},redirect:"follow",referrerPolicy:"no-referrer"});return yield n.json()}))}static ensureName(e){let t=0;return this._nameMap.has(e)?(t=this._nameMap.get(e),t++,this._nameMap.set(e,t)):(t++,this._nameMap.set(e,t)),e+t}static setData(e,t,r){let n=e.findIndex((e=>r(e)));n<0?e.push(t):e[n]=t}static removeData(e,t){let r=e.findIndex((e=>t(e)));return r>=0&&e.splice(r),this}static createTemplate(e){if(!c.isEmpty(e)){if(e.startsWith("#")){const t=i.SBGrid3.$(e);if(0==t.length)return void s.Log.error((()=>`[${e}] 를 찾을 수 없습니다.`));const r=t.html().trim();e=r}return u.compile(e)}}static createTemplates(e){return c.isEmpty(e)?[]:e.map((e=>this.createTemplate(e)))}static findCellFromColumn(e,t){for(const r of null==e?void 0:e.rows){let e=null==r?void 0:r.cells;for(const r of e)if(t==(null==r?void 0:r.column))return r}}static findGridColumnByName(e,t){return d.dfsSearch(t,(t=>(null==t?void 0:t.name)===e||(null==t?void 0:t.columns)))}}t.Utils=h,h._nameMap=new Map;class d{static dfsAction(e,t){if(!c.isNull(t)&&!c.isEmpty(e)){var r=new f;for(let t=e.length-1;t>=0;t--)r.push(e[t]);for(;r.any();){let e=t(r.pop());if(!c.isNull(e)&&0!=e.length)for(let t=e.length-1;t>=0;t--)r.push(e[t])}}}static dfsActionAsync(e,t){return n(this,void 0,void 0,(function*(){if(!c.isNull(t)&&!c.isEmpty(e)){var r=new f;for(let t=e.length-1;t>=0;t--)r.push(e[t]);for(;r.any();){var n=r.pop();let e=yield t(n);if(!c.isNull(e)&&0!=e.length)for(let t=e.length-1;t>=0;t--)r.push(e[t])}}}))}static bfsAction(e,t){if(!c.isNull(t)&&!c.isEmpty(e)){var r=new p;for(let t=0,n=e.length;t<n;t++)r.push(e[t]);for(;r.any();){let e=t(r.pop());if(!c.isEmpty(e))for(let t=0,n=e.length;t<n;t++)r.push(e[t])}}}static bfsActionAsync(e,t){return n(this,void 0,void 0,(function*(){if(!c.isNull(t)&&!c.isEmpty(e)){var r=new p;for(let t=0,n=e.length;t<n;t++)r.push(e[t]);for(;r.any();){var n=r.pop();let e=yield t(n);if(!c.isNull(e)&&0!=e.length)for(let t=0,n=e.length;t<n;t++)r.push(e[t])}}}))}static bfsSearch(e,t){if(!c.isNull(t)&&!c.isEmpty(e)){var r=new p;for(let t=0,n=e.length;t<n;t++)r.push(e[t]);for(;r.any();){var n=r.pop();let e=t(n);if(!0===e)return n;if(e instanceof Array){if(0==e.length)continue;for(let t=0,n=e.length;t<n;t++)r.push(e[t])}}}}static bfsSearchAll(e,t){if(c.isNull(t)||c.isEmpty(e))throw"subItems == null || predicate == null";const r=[];let n=e(void 0);var i=new p;for(let e=0,t=n.length;e<t;e++)i.push(n[e]);for(;i.any();){var o=i.pop();if(!0===t(o)&&r.push(o),n=e(o),n instanceof Array){if(0==n.length)continue;for(let e=0,t=n.length;e<t;e++)i.push(n[e])}}return r}static dfsSearch(e,t){if(!c.isNull(t)&&!c.isEmpty(e)){var r=new f;for(let t=e.length-1;t>=0;t--)r.push(e[t]);for(;r.any();){var n=r.pop();let e=t(n);if(!0===e)return n;if(e instanceof Array){if(0==e.length)continue;for(let t=e.length-1;t>=0;t--)r.push(e[t])}}}}static arrayEquals(e,t){return e==t||Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every(((e,r)=>e==t[r]))}static intervalAction(e,t){return n(this,void 0,void 0,(function*(){let r=0;const i=e.length;return new Promise(((o,s)=>{let a=setInterval((()=>n(this,void 0,void 0,(function*(){try{for(;r<i;r++){const n=e[r];let o=t(n,r,i);if(o instanceof Promise&&(o=yield o),!0===o)return void r++}clearInterval(a),o()}catch(e){clearInterval(a),s(e)}}))),0)}))}))}static splitIterator(e,t){return n(this,void 0,void 0,(function*(){let r=0;return new Promise(((i,o)=>{let a=setInterval((()=>n(this,void 0,void 0,(function*(){try{let n;for(;n=yield e(r);){let e=t(n instanceof Promise?yield n:n,r,length);if(e instanceof Promise&&(e=yield e),r++,!0===e)return}clearInterval(a),i()}catch(e){s.Log.warn(e),clearInterval(a),o(e)}}))),0)}))}))}}t.Arrays=d;class f{constructor(){this.data=[]}push(e){this.data.push(e)}pop(){return this.data.pop()}peek(){return this.data[this.data.length-1]}any(){return this.data.length>0}get list(){return this.data}clear(){this.data.splice(0)}}t.Stack=f;class p extends f{pop(){return this.data.shift()}}t.Queue=p;t.JqUtils=class{static addClass(e,t){let r=!1;return(r=e.hasClass(t))||e.addClass(t),r}static removeClass(e,t){let r=!1;return(r=e.hasClass(t))&&e.removeClass(t),r}static adjustHtml(e,t){e.html()!=(t=c.asText(t))&&e.html(t)}static movetoTrash(e,t,r){if(c.isNull(t))return;const n=t.children();for(let t=0;t<n.length;t++){const i=n[t],o=i.dataset.selector;if("string"==typeof r){if(r==o)continue}else if(r.has(o))continue;e.push(i)}}static emptyTrash(e){for(const t of e)t.remove();e.splice(0)}static adjustElement(e,t,r,n=void 0,o=void 0){let s=i.SBGrid3.$(t,e);if(0==c.isNull(o)&&o.add(t),0==s.length)if(s=i.SBGrid3.$(r),0==c.isNull(o)&&(s[0].dataset.selector=t),c.isNull(n))e.append(s);else{const t=e.children();for(let e=0;e<t.length;e++){const r=i.SBGrid3.$(t[e]);if("function"==typeof n){if(n(r))return r.before(s),s}else if(r.data(n.data)>n.index)return r.before(s),s.data(n.data,n.index),s}e.append(s)}else 0==c.isNull(o)&&(s[0].dataset.selector=t),c.isValue(n)&&("function"==typeof n||s.data(n.data,n.index));return s}static removeElement(e,t){i.SBGrid3.$(t,e).remove()}static changeAttr(e,t,r){e.attr(t)!=r&&e.attr(t,r)}static changeClass(e,t){const r=e.attr("class");if(r==t)return;let n=t.split(" ");n=n.filter((e=>e.length>0)),r!=(t=n.join(" "))&&e.attr("class",t)}static changeDataset(e,t,r){e[0].dataset[t]!=r&&(e[0].dataset[t]=r)}};class m{static createFuzzyMatcher(e){if(c.isEmpty(e))return new RegExp("");const t=m.convertPattern(e);return new RegExp(t)}static convertPattern(e){return/[ㄱ-ㅎ]/.test(e)?m.consonantPattern(e):m.syllablePattern(e)}static syllablePattern(e){const t=e.substring(0,(null==e?void 0:e.length)-1),r=e[e.length-1];let n=null==r?void 0:r.charCodeAt(0);if(n>=44032&&n<=55203){const i=44032;n=r.charCodeAt(0)-i;const o=28*Math.floor(n/28)+i;if(n%28>0){const r=n%28;return`${e}|\\${t}${String.fromCharCode(o)+m.consonantPattern(m.JONGSUNGS[r])}`}const s=o+27;return`${t}[\\u${o.toString(16)}-\\u${s.toString(16)}]`}return e}static consonantPattern(e){return e.split("").map(m._consonantPattern).join("")}static _consonantPattern(e){const t=m.CONSONANTS[e]||588*(e.charCodeAt(0)-12613)+m.CONSONANTS["ㅅ"],r=t+587;return`[${e}\\u${t.toString(16)}-\\u${r.toString(16)}]`}}t.FuzzyMatcher=m,m.JONGSUNGS=["","ㄱ","ㄲ","ㄳ","ㄴ","ㄵ","ㄶ","ㄷ","ㄹ","ㄺ","ㄻ","ㄼ","ㄽ","ㄾ","ㄿ","ㅀ","ㅁ","ㅂ","ㅄ","ㅅ","ㅆ","ㅇ","ㅈ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],m.CONSONANTS={ㄱ:44032,ㄲ:44620,ㄴ:45208,ㄷ:45796,ㄸ:46384,ㄹ:46972,ㅁ:47560,ㅂ:48148,ㅃ:48736,ㅅ:49324};t.Lock=class{constructor(){this.queue=[],this.acquired=!1}acquire(){return n(this,void 0,void 0,(function*(){if(this.acquired)return new Promise(((e,t)=>{this.queue.push(e)}));this.acquired=!0}))}release(){return n(this,void 0,void 0,(function*(){if(0===this.queue.length&&this.acquired)return void(this.acquired=!1);const e=this.queue.shift();return new Promise((t=>{e(),t()}))}))}critical(e){return n(this,void 0,void 0,(function*(){yield this.acquire();try{return yield e()}finally{yield this.release()}}))}};const g=Symbol();class v{constructor(){this._cancelled=!1,this._cancelled=!1}throwIfCancelled(){if(this.cancelled)throw"Cancelled!"}get cancelled(){return!0===this._cancelled}[g](){this._cancelled=!0}}t.CancellationToken=v;t.default=class{constructor(){this.token=new v}cancel(){this.token[g]()}};class y{static decrypt(e,t,r){if(128!=r&&192!=r&&256!=r)return"";e=this.Aes.base64Decode(e),t=this.Aes.utf8Encode(t);const n=r/8,i=new Array(n);for(let e=0;e<n;e+=1)i[e]=isNaN(t.charCodeAt(e))?0:t.charCodeAt(e);let o=this.Aes.cipher(i,this.Aes.keyExpansion(i));o=o.concat(o.slice(0,n-16));const s=new Array(8),a=e.slice(0,8);for(let e=0;e<8;e+=1)s[e]=a.charCodeAt(e);const l=this.Aes.keyExpansion(o),u=Math.ceil((e.length-8)/16),c=new Array(u);for(let t=0;t<u;t+=1)c[t]=e.slice(16*t+8,16*t+16+8);e=c;const h=new Array(e.length);for(let t=0;t<u;t+=1){for(let e=0;e<4;e+=1)s[15-e]=t>>>8*e&255;for(let e=0;e<4;e+=1)s[15-e-4]=(t+1)/4294967296-1>>>8*e&255;const r=this.Aes.cipher(s,l),n=new Array(e[t].length);for(let i=0;i<e[t].length;i+=1)n[i]=r[i]^e[t].charCodeAt(i),n[i]=String.fromCharCode(n[i]);h[t]=n.join("")}let d=h.join("");return d=this.Aes.utf8Decode(d),d}static encrypt(e,t,r){if(128!=r&&192!=r&&256!=r)return"";e=this.Aes.utf8Encode(e),t=this.Aes.utf8Encode(t);const n=r/8,i=new Array(n);for(let e=0;e<n;e+=1)i[e]=isNaN(t.charCodeAt(e))?0:t.charCodeAt(e);let o=this.Aes.cipher(i,this.Aes.keyExpansion(i));o=o.concat(o.slice(0,n-16));const s=new Array(16),a=(new Date).getTime(),l=a%1e3,u=Math.floor(a/1e3),c=Math.floor(65535*Math.random());for(let e=0;e<2;e+=1)s[e]=l>>>8*e&255;for(let e=0;e<2;e+=1)s[e+2]=c>>>8*e&255;for(let e=0;e<4;e+=1)s[e+4]=u>>>8*e&255;let h="";for(let e=0;e<8;e+=1)h+=String.fromCharCode(s[e]);const d=this.Aes.keyExpansion(o),f=Math.ceil(e.length/16),p=new Array(f);for(let t=0;t<f;t+=1){for(let e=0;e<4;e+=1)s[15-e]=t>>>8*e&255;for(let e=0;e<4;e+=1)s[15-e-4]=t/4294967296>>>8*e;const r=this.Aes.cipher(s,d),n=t<f-1?16:(e.length-1)%16+1,i=new Array(n);for(let o=0;o<n;o+=1)i[o]=r[o]^e.charCodeAt(16*t+o),i[o]=String.fromCharCode(i[o]);p[t]=i.join("")}let m=h+p.join("");return m=this.Aes.base64Encode(m),m}}t.Crypto=y,y.Aes={sBox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],rCon:[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],utf8Encode:e=>(e=String(e),unescape(encodeURIComponent(e))),utf8Decode:e=>(e=String(e),decodeURIComponent(escape(e))),base64Encode:e=>(e=String(e),void 0!==window.btoa?window.btoa(e):"undefined"!=typeof Buffer?new Buffer(e,"utf8").toString("base64"):void 0),base64Decode:e=>(e=String(e),void 0!==window.atob?window.atob(e):"undefined"!=typeof Buffer?new Buffer(e,"base64").toString("utf8"):void 0),cipher(e,t){const r=t.length/4-1;let n=[[],[],[],[]];for(let t=0;t<16;t+=1)n[t%4][Math.floor(t/4)]=e[t];n=this.addRoundKey(n,t,0,4);for(let e=1;e<r;e+=1)n=this.subBytes(n,4),n=this.shiftRows(n,4),n=this.mixColumns(n,4),n=this.addRoundKey(n,t,e,4);n=this.subBytes(n,4),n=this.shiftRows(n,4),n=this.addRoundKey(n,t,r,4);const i=new Array(16);for(let e=0;e<16;e+=1)i[e]=n[e%4][Math.floor(e/4)];return i},addRoundKey(e,t,r,n){for(let i=0;i<4;i+=1)for(let o=0;o<n;o+=1)e[i][o]^=t[4*r+o][i];return e},subBytes(e,t){for(let r=0;r<4;r+=1)for(let n=0;n<t;n+=1)e[r][n]=this.sBox[e[r][n]];return e},shiftRows(e,t){const r=new Array(4);for(let n=1;n<4;n+=1){for(let i=0;i<4;i+=1)r[i]=e[n][(i+n)%t];for(let t=0;t<4;t+=1)e[n][t]=r[t]}return e},mixColumns(e,t){for(let t=0;t<4;t+=1){const r=new Array(4),n=new Array(4);for(let i=0;i<4;i+=1)r[i]=e[i][t],n[i]=128&e[i][t]?e[i][t]<<1^283:e[i][t]<<1;e[0][t]=n[0]^r[1]^n[1]^r[2]^r[3],e[1][t]=r[0]^n[1]^r[2]^n[2]^r[3],e[2][t]=r[0]^r[1]^n[2]^r[3]^n[3],e[3][t]=r[0]^n[0]^r[1]^r[2]^n[3]}return e},subWord(e){for(let t=0;t<4;t+=1)e[t]=this.sBox[e[t]];return e},rotWord(e){const t=e[0];for(let t=0;t<3;t+=1)e[t]=e[t+1];return e[3]=t,e},keyExpansion(e){const t=e.length/4,r=t+6,n=new Array(4*(r+1));let i=new Array(4);for(let r=0;r<t;r+=1){const t=[e[4*r],e[4*r+1],e[4*r+2],e[4*r+3]];n[r]=t}for(let e=t;e<4*(r+1);e+=1){n[e]=new Array(4);for(let t=0;t<4;t+=1)i[t]=n[e-1][t];if(e%t==0){i=this.subWord(this.rotWord(i));for(let r=0;r<4;r+=1)i[r]^=this.rCon[e/t][r]}else t>6&&e%t==4&&(i=this.subWord(i));for(let r=0;r<4;r+=1)n[e][r]=n[e-t][r]^i[r]}return n}}},6663:(e,t,r)=>{e.exports=function(){var e;return function(){function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[s]={exports:{}};t[s][0].call(u.exports,(function(e){return i(t[s][1][e]||e)}),u,u.exports,e,t,r,n)}return r[s].exports}for(var o=void 0,s=0;s<n.length;s++)i(n[s]);return i}return e}()({1:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t,r,n,i,o,s){try{var a=e[o](s),l=a.value}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(n,i)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function a(e){i(s,n,o,a,l,"next",e)}function l(e){i(s,n,o,a,l,"throw",e)}a(void 0)}))}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}var u=e("fs"),c=e("fast-csv"),h=e("dayjs/plugin/customParseFormat"),d=e("dayjs/plugin/utc"),f=e("dayjs").extend(h).extend(d),p=e("../utils/stream-buf"),m=e("../utils/utils").fs.exists,g={true:!0,false:!1,"#N/A":{error:"#N/A"},"#REF!":{error:"#REF!"},"#NAME?":{error:"#NAME?"},"#DIV/0!":{error:"#DIV/0!"},"#NULL!":{error:"#NULL!"},"#VALUE!":{error:"#VALUE!"},"#NUM!":{error:"#NUM!"}},v=function(){function e(t){s(this,e),this.workbook=t,this.worksheet=null}return l(e,[{key:"readFile",value:function(){var e=o(regeneratorRuntime.mark((function e(t,r){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=r||{},e.next=3,m(t);case 3:if(e.sent){e.next=5;break}throw new Error("File not found: ".concat(t));case 5:return n=u.createReadStream(t),e.next=8,this.read(n,r);case 8:return i=e.sent,n.close(),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"read",value:function(e,t){var r=this;return t=t||{},new Promise((function(n,i){var o=r.workbook.addWorksheet(t.sheetName),s=t.dateFormats||["YYYY-MM-DD[T]HH:mm:ssZ","YYYY-MM-DD[T]HH:mm:ss","MM-DD-YYYY","YYYY-MM-DD"],a=t.map||function(e){if(""===e)return null;var t=Number(e);if(!Number.isNaN(t)&&t!==1/0)return t;var r=s.reduce((function(t,r){if(t)return t;var n=f(e,r,!0);return n.isValid()?n:null}),null);if(r)return new Date(r.valueOf());var n=g[e];return void 0!==n?n:e},l=c.parse(t.parserOptions).on("data",(function(e){o.addRow(e.map(a))})).on("end",(function(){l.emit("worksheet",o)}));l.on("worksheet",n).on("error",i),e.pipe(l)}))}},{key:"createInputStream",value:function(){throw new Error("`CSV#createInputStream` is deprecated. You should use `CSV#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}},{key:"write",value:function(e,t){var r=this;return new Promise((function(i,o){t=t||{};var s=r.workbook.getWorksheet(t.sheetName||t.sheetId),a=c.format(t.formatterOptions);e.on("finish",(function(){i()})),a.on("error",o),a.pipe(e);var l=t,u=l.dateFormat,h=l.dateUTC,d=t.map||function(e){if(e){if(e.text||e.hyperlink)return e.hyperlink||e.text||"";if(e.formula||e.result)return e.result||"";if(e instanceof Date)return u?h?f.utc(e).format(u):f(e).format(u):h?f.utc(e).format():f(e).format();if(e.error)return e.error;if("object"===n(e))return JSON.stringify(e)}return e},p=void 0===t.includeEmptyRows||t.includeEmptyRows,m=1;s&&s.eachRow((function(e,t){if(p)for(;m++<t-1;)a.write([]);var r=e.values;r.shift(),a.write(r.map(d)),m=t})),a.end()}))}},{key:"writeFile",value:function(e,t){var r={encoding:(t=t||{}).encoding||"utf8"},n=u.createWriteStream(e,r);return this.write(n,t)}},{key:"writeBuffer",value:function(){var e=o(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new p,e.next=3,this.write(r,t);case 3:return e.abrupt("return",r.read());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t.exports=v},{"../utils/stream-buf":23,"../utils/utils":26,dayjs:336,"dayjs/plugin/customParseFormat":337,"dayjs/plugin/utc":338,"fast-csv":369,fs:215}],2:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var s=e("../utils/col-cache"),a=function(){function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n(this,e),r)if("string"==typeof r){var o=s.decodeAddress(r);this.nativeCol=o.col+i,this.nativeColOff=0,this.nativeRow=o.row+i,this.nativeRowOff=0}else void 0!==r.nativeCol?(this.nativeCol=r.nativeCol||0,this.nativeColOff=r.nativeColOff||0,this.nativeRow=r.nativeRow||0,this.nativeRowOff=r.nativeRowOff||0):void 0!==r.col?(this.col=r.col+i,this.row=r.row+i):(this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0);else this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0;this.worksheet=t}return o(e,[{key:"col",get:function(){return this.nativeCol+Math.min(this.colWidth-1,this.nativeColOff)/this.colWidth},set:function(e){this.nativeCol=Math.floor(e),this.nativeColOff=Math.floor((e-this.nativeCol)*this.colWidth)}},{key:"row",get:function(){return this.nativeRow+Math.min(this.rowHeight-1,this.nativeRowOff)/this.rowHeight},set:function(e){this.nativeRow=Math.floor(e),this.nativeRowOff=Math.floor((e-this.nativeRow)*this.rowHeight)}},{key:"colWidth",get:function(){return this.worksheet&&this.worksheet.getColumn(this.nativeCol+1)&&this.worksheet.getColumn(this.nativeCol+1).isCustomWidth?Math.floor(1e4*this.worksheet.getColumn(this.nativeCol+1).width):64e4}},{key:"rowHeight",get:function(){return this.worksheet&&this.worksheet.getRow(this.nativeRow+1)&&this.worksheet.getRow(this.nativeRow+1).height?Math.floor(1e4*this.worksheet.getRow(this.nativeRow+1).height):18e4}},{key:"model",get:function(){return{nativeCol:this.nativeCol,nativeColOff:this.nativeColOff,nativeRow:this.nativeRow,nativeRowOff:this.nativeRowOff}},set:function(e){this.nativeCol=e.nativeCol,this.nativeColOff=e.nativeColOff,this.nativeRow=e.nativeRow,this.nativeRowOff=e.nativeRowOff}}],[{key:"asInstance",value:function(t){return t instanceof e||null==t?t:new e(t)}}]),e}();t.exports=a},{"../utils/col-cache":19}],3:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var s=e("../utils/col-cache"),a=e("../utils/under-dash"),l=e("./enums"),u=e("../utils/shared-formula").slideFormula,c=e("./note"),h=function(){function e(t,r,i){if(n(this,e),!t||!r)throw new Error("A Cell needs a Row");this._row=t,this._column=r,s.validateAddress(i),this._address=i,this._value=x.create(e.Types.Null,this),this.style=this._mergeStyle(t.style,r.style,{}),this._mergeCount=0}return o(e,[{key:"destroy",value:function(){delete this.style,delete this._value,delete this._row,delete this._column,delete this._address}},{key:"_mergeStyle",value:function(e,t,r){var n=e&&e.numFmt||t&&t.numFmt;n&&(r.numFmt=n);var i=e&&e.font||t&&t.font;i&&(r.font=i);var o=e&&e.alignment||t&&t.alignment;o&&(r.alignment=o);var s=e&&e.border||t&&t.border;s&&(r.border=s);var a=e&&e.fill||t&&t.fill;a&&(r.fill=a);var l=e&&e.protection||t&&t.protection;return l&&(r.protection=l),r}},{key:"toCsvString",value:function(){return this._value.toCsvString()}},{key:"addMergeRef",value:function(){this._mergeCount++}},{key:"releaseMergeRef",value:function(){this._mergeCount--}},{key:"merge",value:function(t,r){this._value.release(),this._value=x.create(e.Types.Merge,this,t),r||(this.style=t.style)}},{key:"unmerge",value:function(){this.type===e.Types.Merge&&(this._value.release(),this._value=x.create(e.Types.Null,this),this.style=this._mergeStyle(this._row.style,this._column.style,{}))}},{key:"isMergedTo",value:function(t){return this._value.type===e.Types.Merge&&this._value.isMergedTo(t)}},{key:"toString",value:function(){return this.text}},{key:"_upgradeToHyperlink",value:function(t){this.type===e.Types.String&&(this._value=x.create(e.Types.Hyperlink,this,{text:this._value.value,hyperlink:t}))}},{key:"addName",value:function(e){this.workbook.definedNames.addEx(this.fullAddress,e)}},{key:"removeName",value:function(e){this.workbook.definedNames.removeEx(this.fullAddress,e)}},{key:"removeAllNames",value:function(){this.workbook.definedNames.removeAllNames(this.fullAddress)}},{key:"worksheet",get:function(){return this._row.worksheet}},{key:"workbook",get:function(){return this._row.worksheet.workbook}},{key:"numFmt",get:function(){return this.style.numFmt},set:function(e){this.style.numFmt=e}},{key:"font",get:function(){return this.style.font},set:function(e){this.style.font=e}},{key:"alignment",get:function(){return this.style.alignment},set:function(e){this.style.alignment=e}},{key:"border",get:function(){return this.style.border},set:function(e){this.style.border=e}},{key:"fill",get:function(){return this.style.fill},set:function(e){this.style.fill=e}},{key:"protection",get:function(){return this.style.protection},set:function(e){this.style.protection=e}},{key:"address",get:function(){return this._address}},{key:"row",get:function(){return this._row.number}},{key:"col",get:function(){return this._column.number}},{key:"$col$row",get:function(){return"$".concat(this._column.letter,"$").concat(this.row)}},{key:"type",get:function(){return this._value.type}},{key:"effectiveType",get:function(){return this._value.effectiveType}},{key:"isMerged",get:function(){return this._mergeCount>0||this.type===e.Types.Merge}},{key:"master",get:function(){return this.type===e.Types.Merge?this._value.master:this}},{key:"isHyperlink",get:function(){return this._value.type===e.Types.Hyperlink}},{key:"hyperlink",get:function(){return this._value.hyperlink}},{key:"value",get:function(){return this._value.value},set:function(t){this.type!==e.Types.Merge?(this._value.release(),this._value=x.create(x.getType(t),this,t)):this._value.master.value=t}},{key:"note",get:function(){return this._comment&&this._comment.note},set:function(e){this._comment=new c(e)}},{key:"text",get:function(){return this._value.toString()}},{key:"html",get:function(){return a.escapeHtml(this.text)}},{key:"formula",get:function(){return this._value.formula}},{key:"result",get:function(){return this._value.result}},{key:"formulaType",get:function(){return this._value.formulaType}},{key:"fullAddress",get:function(){return{sheetName:this._row.worksheet.name,address:this.address,row:this.row,col:this.col}}},{key:"name",get:function(){return this.names[0]},set:function(e){this.names=[e]}},{key:"names",get:function(){return this.workbook.definedNames.getNamesEx(this.fullAddress)},set:function(e){var t=this,r=this.workbook.definedNames;r.removeAllNames(this.fullAddress),e.forEach((function(e){r.addEx(t.fullAddress,e)}))}},{key:"_dataValidations",get:function(){return this.worksheet.dataValidations}},{key:"dataValidation",get:function(){return this._dataValidations.find(this.address)},set:function(e){this._dataValidations.add(this.address,e)}},{key:"model",get:function(){var e=this._value.model;return e.style=this.style,this._comment&&(e.comment=this._comment.model),e},set:function(e){this._value.release(),this._value=x.create(e.type,this),this._value.model=e,e.comment&&"note"===e.comment.type&&(this._comment=c.fromModel(e.comment)),e.style?this.style=e.style:this.style={}}}]),e}();h.Types=l.ValueType;var d=function(){function e(t){n(this,e),this.model={address:t.address,type:h.Types.Null}}return o(e,[{key:"toCsvString",value:function(){return""}},{key:"release",value:function(){}},{key:"toString",value:function(){return""}},{key:"value",get:function(){return null},set:function(e){}},{key:"type",get:function(){return h.Types.Null}},{key:"effectiveType",get:function(){return h.Types.Null}},{key:"address",get:function(){return this.model.address},set:function(e){this.model.address=e}}]),e}(),f=function(){function e(t,r){n(this,e),this.model={address:t.address,type:h.Types.Number,value:r}}return o(e,[{key:"toCsvString",value:function(){return this.model.value.toString()}},{key:"release",value:function(){}},{key:"toString",value:function(){return this.model.value.toString()}},{key:"value",get:function(){return this.model.value},set:function(e){this.model.value=e}},{key:"type",get:function(){return h.Types.Number}},{key:"effectiveType",get:function(){return h.Types.Number}},{key:"address",get:function(){return this.model.address},set:function(e){this.model.address=e}}]),e}(),p=function(){function e(t,r){n(this,e),this.model={address:t.address,type:h.Types.String,value:r}}return o(e,[{key:"toCsvString",value:function(){return'"'.concat(this.model.value.replace(/"/g,'""'),'"')}},{key:"release",value:function(){}},{key:"toString",value:function(){return this.model.value}},{key:"value",get:function(){return this.model.value},set:function(e){this.model.value=e}},{key:"type",get:function(){return h.Types.String}},{key:"effectiveType",get:function(){return h.Types.String}},{key:"address",get:function(){return this.model.address},set:function(e){this.model.address=e}}]),e}(),m=function(){function e(t,r){n(this,e),this.model={address:t.address,type:h.Types.String,value:r}}return o(e,[{key:"toString",value:function(){return this.model.value.richText.map((function(e){return e.text})).join("")}},{key:"toCsvString",value:function(){return'"'.concat(this.text.replace(/"/g,'""'),'"')}},{key:"release",value:function(){}},{key:"value",get:function(){return this.model.value},set:function(e){this.model.value=e}},{key:"type",get:function(){return h.Types.RichText}},{key:"effectiveType",get:function(){return h.Types.RichText}},{key:"address",get:function(){return this.model.address},set:function(e){this.model.address=e}}]),e}(),g=function(){function e(t,r){n(this,e),this.model={address:t.address,type:h.Types.Date,value:r}}return o(e,[{key:"toCsvString",value:function(){return this.model.value.toISOString()}},{key:"release",value:function(){}},{key:"toString",value:function(){return this.model.value.toString()}},{key:"value",get:function(){return this.model.value},set:function(e){this.model.value=e}},{key:"type",get:function(){return h.Types.Date}},{key:"effectiveType",get:function(){return h.Types.Date}},{key:"address",get:function(){return this.model.address},set:function(e){this.model.address=e}}]),e}(),v=function(){function e(t,r){n(this,e),this.model={address:t.address,type:h.Types.Hyperlink,text:r?r.text:void 0,hyperlink:r?r.hyperlink:void 0},r&&r.tooltip&&(this.model.tooltip=r.tooltip)}return o(e,[{key:"toCsvString",value:function(){return this.model.hyperlink}},{key:"release",value:function(){}},{key:"toString",value:function(){return this.model.text}},{key:"value",get:function(){var e={text:this.model.text,hyperlink:this.model.hyperlink};return this.model.tooltip&&(e.tooltip=this.model.tooltip),e},set:function(e){this.model={text:e.text,hyperlink:e.hyperlink},e.tooltip&&(this.model.tooltip=e.tooltip)}},{key:"text",get:function(){return this.model.text},set:function(e){this.model.text=e}},{key:"hyperlink",get:function(){return this.model.hyperlink},set:function(e){this.model.hyperlink=e}},{key:"type",get:function(){return h.Types.Hyperlink}},{key:"effectiveType",get:function(){return h.Types.Hyperlink}},{key:"address",get:function(){return this.model.address},set:function(e){this.model.address=e}}]),e}(),y=function(){function e(t,r){n(this,e),this.model={address:t.address,type:h.Types.Merge,master:r?r.address:void 0},this._master=r,r&&r.addMergeRef()}return o(e,[{key:"isMergedTo",value:function(e){return e===this._master}},{key:"toCsvString",value:function(){return""}},{key:"release",value:function(){this._master.releaseMergeRef()}},{key:"toString",value:function(){return this.value.toString()}},{key:"value",get:function(){return this._master.value},set:function(e){e instanceof h?(this._master&&this._master.releaseMergeRef(),e.addMergeRef(),this._master=e):this._master.value=e}},{key:"master",get:function(){return this._master}},{key:"type",get:function(){return h.Types.Merge}},{key:"effectiveType",get:function(){return this._master.effectiveType}},{key:"address",get:function(){return this.model.address},set:function(e){this.model.address=e}}]),e}(),b=function(){function e(t,r){n(this,e),this.cell=t,this.model={address:t.address,type:h.Types.Formula,shareType:r?r.shareType:void 0,ref:r?r.ref:void 0,formula:r?r.formula:void 0,sharedFormula:r?r.sharedFormula:void 0,result:r?r.result:void 0}}return o(e,[{key:"_copyModel",value:function(e){var t={},r=function(r){var n=e[r];n&&(t[r]=n)};return r("formula"),r("result"),r("ref"),r("shareType"),r("sharedFormula"),t}},{key:"validate",value:function(e){switch(x.getType(e)){case h.Types.Null:case h.Types.String:case h.Types.Number:case h.Types.Date:break;case h.Types.Hyperlink:case h.Types.Formula:default:throw new Error("Cannot process that type of result value")}}},{key:"_getTranslatedFormula",value:function(){if(!this._translatedFormula&&this.model.sharedFormula){var e=this.cell.worksheet.findCell(this.model.sharedFormula);this._translatedFormula=e&&u(e.formula,e.address,this.model.address)}return this._translatedFormula}},{key:"toCsvString",value:function(){return"".concat(this.model.result||"")}},{key:"release",value:function(){}},{key:"toString",value:function(){return this.model.result?this.model.result.toString():""}},{key:"value",get:function(){return this._copyModel(this.model)},set:function(e){this.model=this._copyModel(e)}},{key:"dependencies",get:function(){return{ranges:this.formula.match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g),cells:this.formula.replace(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g,"").match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}/g)}}},{key:"formula",get:function(){return this.model.formula||this._getTranslatedFormula()},set:function(e){this.model.formula=e}},{key:"formulaType",get:function(){return this.model.formula?l.FormulaType.Master:this.model.sharedFormula?l.FormulaType.Shared:l.FormulaType.None}},{key:"result",get:function(){return this.model.result},set:function(e){this.model.result=e}},{key:"type",get:function(){return h.Types.Formula}},{key:"effectiveType",get:function(){var e=this.model.result;return null==e?l.ValueType.Null:e instanceof String||"string"==typeof e?l.ValueType.String:"number"==typeof e?l.ValueType.Number:e instanceof Date?l.ValueType.Date:e.text&&e.hyperlink?l.ValueType.Hyperlink:e.formula?l.ValueType.Formula:l.ValueType.Null}},{key:"address",get:function(){return this.model.address},set:function(e){this.model.address=e}}]),e}(),w=function(){function e(t,r){n(this,e),this.model={address:t.address,type:h.Types.SharedString,value:r}}return o(e,[{key:"toCsvString",value:function(){return this.model.value.toString()}},{key:"release",value:function(){}},{key:"toString",value:function(){return this.model.value.toString()}},{key:"value",get:function(){return this.model.value},set:function(e){this.model.value=e}},{key:"type",get:function(){return h.Types.SharedString}},{key:"effectiveType",get:function(){return h.Types.SharedString}},{key:"address",get:function(){return this.model.address},set:function(e){this.model.address=e}}]),e}(),C=function(){function e(t,r){n(this,e),this.model={address:t.address,type:h.Types.Boolean,value:r}}return o(e,[{key:"toCsvString",value:function(){return this.model.value?1:0}},{key:"release",value:function(){}},{key:"toString",value:function(){return this.model.value.toString()}},{key:"value",get:function(){return this.model.value},set:function(e){this.model.value=e}},{key:"type",get:function(){return h.Types.Boolean}},{key:"effectiveType",get:function(){return h.Types.Boolean}},{key:"address",get:function(){return this.model.address},set:function(e){this.model.address=e}}]),e}(),_=function(){function e(t,r){n(this,e),this.model={address:t.address,type:h.Types.Error,value:r}}return o(e,[{key:"toCsvString",value:function(){return this.toString()}},{key:"release",value:function(){}},{key:"toString",value:function(){return this.model.value.error.toString()}},{key:"value",get:function(){return this.model.value},set:function(e){this.model.value=e}},{key:"type",get:function(){return h.Types.Error}},{key:"effectiveType",get:function(){return h.Types.Error}},{key:"address",get:function(){return this.model.address},set:function(e){this.model.address=e}}]),e}(),S=function(){function e(t,r){n(this,e),this.model={address:t.address,type:h.Types.String,value:JSON.stringify(r),rawValue:r}}return o(e,[{key:"toCsvString",value:function(){return this.model.value}},{key:"release",value:function(){}},{key:"toString",value:function(){return this.model.value}},{key:"value",get:function(){return this.model.rawValue},set:function(e){this.model.rawValue=e,this.model.value=JSON.stringify(e)}},{key:"type",get:function(){return h.Types.String}},{key:"effectiveType",get:function(){return h.Types.String}},{key:"address",get:function(){return this.model.address},set:function(e){this.model.address=e}}]),e}(),x={getType:function(e){return null==e?h.Types.Null:e instanceof String||"string"==typeof e?h.Types.String:"number"==typeof e?h.Types.Number:"boolean"==typeof e?h.Types.Boolean:e instanceof Date?h.Types.Date:e.text&&e.hyperlink?h.Types.Hyperlink:e.formula||e.sharedFormula?h.Types.Formula:e.richText?h.Types.RichText:e.sharedString?h.Types.SharedString:e.error?h.Types.Error:h.Types.JSON},types:[{t:h.Types.Null,f:d},{t:h.Types.Number,f},{t:h.Types.String,f:p},{t:h.Types.Date,f:g},{t:h.Types.Hyperlink,f:v},{t:h.Types.Formula,f:b},{t:h.Types.Merge,f:y},{t:h.Types.JSON,f:S},{t:h.Types.SharedString,f:w},{t:h.Types.RichText,f:m},{t:h.Types.Boolean,f:C},{t:h.Types.Error,f:_}].reduce((function(e,t){return e[t.t]=t.f,e}),[]),create:function(e,t,r){var n=this.types[e];if(!n)throw new Error("Could not create Value of type ".concat(e));return new n(t,r)}};t.exports=h},{"../utils/col-cache":19,"../utils/shared-formula":22,"../utils/under-dash":25,"./enums":7,"./note":9}],4:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var s=e("../utils/under-dash"),a=e("./enums"),l=e("../utils/col-cache"),u=9,c=function(){function e(t,r,i){n(this,e),this._worksheet=t,this._number=r,!1!==i&&(this.defn=i)}return o(e,[{key:"toString",value:function(){return JSON.stringify({key:this.key,width:this.width,headers:this.headers.length?this.headers:void 0})}},{key:"equivalentTo",value:function(e){return this.width===e.width&&this.hidden===e.hidden&&this.outlineLevel===e.outlineLevel&&s.isEqual(this.style,e.style)}},{key:"eachCell",value:function(e,t){var r=this.number;t||(t=e,e=null),this._worksheet.eachRow(e,(function(e,n){t(e.getCell(r),n)}))}},{key:"_applyStyle",value:function(e,t){return this.style[e]=t,this.eachCell((function(r){r[e]=t})),t}},{key:"number",get:function(){return this._number}},{key:"worksheet",get:function(){return this._worksheet}},{key:"letter",get:function(){return l.n2l(this._number)}},{key:"isCustomWidth",get:function(){return void 0!==this.width&&this.width!==u}},{key:"defn",get:function(){return{header:this._header,key:this.key,width:this.width,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel}},set:function(e){e?(this.key=e.key,this.width=void 0!==e.width?e.width:u,this.outlineLevel=e.outlineLevel,e.style?this.style=e.style:this.style={},this.header=e.header,this._hidden=!!e.hidden):(delete this._header,delete this._key,delete this.width,this.style={},this.outlineLevel=0)}},{key:"headers",get:function(){return this._header&&this._header instanceof Array?this._header:[this._header]}},{key:"header",get:function(){return this._header},set:function(e){var t=this;void 0!==e?(this._header=e,this.headers.forEach((function(e,r){t._worksheet.getCell(r+1,t.number).value=e}))):this._header=void 0}},{key:"key",get:function(){return this._key},set:function(e){(this._key&&this._worksheet.getColumnKey(this._key))===this&&this._worksheet.deleteColumnKey(this._key),this._key=e,e&&this._worksheet.setColumnKey(this._key,this)}},{key:"hidden",get:function(){return!!this._hidden},set:function(e){this._hidden=e}},{key:"outlineLevel",get:function(){return this._outlineLevel||0},set:function(e){this._outlineLevel=e}},{key:"collapsed",get:function(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelCol)}},{key:"isDefault",get:function(){if(this.isCustomWidth)return!1;if(this.hidden)return!1;if(this.outlineLevel)return!1;var e=this.style;return!e||!(e.font||e.numFmt||e.alignment||e.border||e.fill||e.protection)}},{key:"headerCount",get:function(){return this.headers.length}},{key:"values",get:function(){var e=[];return this.eachCell((function(t,r){t&&t.type!==a.ValueType.Null&&(e[r]=t.value)})),e},set:function(e){var t=this;if(e){var r=this.number,n=0;e.hasOwnProperty("0")&&(n=1),e.forEach((function(e,i){t._worksheet.getCell(i+n,r).value=e}))}}},{key:"numFmt",get:function(){return this.style.numFmt},set:function(e){this._applyStyle("numFmt",e)}},{key:"font",get:function(){return this.style.font},set:function(e){this._applyStyle("font",e)}},{key:"alignment",get:function(){return this.style.alignment},set:function(e){this._applyStyle("alignment",e)}},{key:"protection",get:function(){return this.style.protection},set:function(e){this._applyStyle("protection",e)}},{key:"border",get:function(){return this.style.border},set:function(e){this._applyStyle("border",e)}},{key:"fill",get:function(){return this.style.fill},set:function(e){this._applyStyle("fill",e)}}],[{key:"toModel",value:function(e){var t=[],r=null;return e&&e.forEach((function(e,n){e.isDefault?r&&(r=null):r&&e.equivalentTo(r)?r.max=n+1:(r={min:n+1,max:n+1,width:void 0!==e.width?e.width:u,style:e.style,isCustomWidth:e.isCustomWidth,hidden:e.hidden,outlineLevel:e.outlineLevel,collapsed:e.collapsed},t.push(r))})),t.length?t:void 0}},{key:"fromModel",value:function(t,r){r=r||[];for(var n=[],i=1,o=0;o<r.length;){for(var s=r[o++];i<s.min;)n.push(new e(t,i++));for(;i<=s.max;)n.push(new e(t,i++,s))}return n.length?n:null}}]),e}();t.exports=c},{"../utils/col-cache":19,"../utils/under-dash":25,"./enums":7}],5:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var s=function(){function e(t){n(this,e),this.model=t||{}}return o(e,[{key:"add",value:function(e,t){return this.model[e]=t}},{key:"find",value:function(e){return this.model[e]}},{key:"remove",value:function(e){this.model[e]=void 0}}]),e}();t.exports=s},{}],6:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var s=e("../utils/under-dash"),a=e("../utils/col-cache"),l=e("../utils/cell-matrix"),u=e("./range"),c=/[$](\w+)[$](\d+)(:[$](\w+)[$](\d+))?/,h=function(){function e(){n(this,e),this.matrixMap={}}return o(e,[{key:"getMatrix",value:function(e){return this.matrixMap[e]||(this.matrixMap[e]=new l)}},{key:"add",value:function(e,t){var r=a.decodeEx(e);this.addEx(r,t)}},{key:"addEx",value:function(e,t){var r=this.getMatrix(t);if(e.top)for(var n=e.left;n<=e.right;n++)for(var i=e.top;i<=e.bottom;i++){var o={sheetName:e.sheetName,address:a.n2l(n)+i,row:i,col:n};r.addCellEx(o)}else r.addCellEx(e)}},{key:"remove",value:function(e,t){var r=a.decodeEx(e);this.removeEx(r,t)}},{key:"removeEx",value:function(e,t){this.getMatrix(t).removeCellEx(e)}},{key:"removeAllNames",value:function(e){s.each(this.matrixMap,(function(t){t.removeCellEx(e)}))}},{key:"forEach",value:function(e){s.each(this.matrixMap,(function(t,r){t.forEach((function(t){e(r,t)}))}))}},{key:"getNames",value:function(e){return this.getNamesEx(a.decodeEx(e))}},{key:"getNamesEx",value:function(e){return s.map(this.matrixMap,(function(t,r){return t.findCellEx(e)&&r})).filter(Boolean)}},{key:"_explore",value:function(e,t){t.mark=!1;var r,n,i=t.sheetName,o=new u(t.row,t.col,t.row,t.col,i);function s(r,n){var s=e.findCellAt(i,r,t.col);return!(!s||!s.mark||(o[n]=r,s.mark=!1,0))}for(n=t.row-1;s(n,"top");n--);for(n=t.row+1;s(n,"bottom");n++);function a(t,r){var s=[];for(n=o.top;n<=o.bottom;n++){var a=e.findCellAt(i,n,t);if(!a||!a.mark)return!1;s.push(a)}o[r]=t;for(var l=0;l<s.length;l++)s[l].mark=!1;return!0}for(r=t.col-1;a(r,"left");r--);for(r=t.col+1;a(r,"right");r++);return o}},{key:"getRanges",value:function(e,t){var r=this;return(t=t||this.matrixMap[e])?(t.forEach((function(e){e.mark=!0})),{name:e,ranges:t.map((function(e){return e.mark&&r._explore(t,e)})).filter(Boolean).map((function(e){return e.$shortRange}))}):{name:e,ranges:[]}}},{key:"normaliseMatrix",value:function(e,t){e.forEachInSheet(t,(function(e,t,r){e&&(e.row===t&&e.col===r||(e.row=t,e.col=r,e.address=a.n2l(r)+t))}))}},{key:"spliceRows",value:function(e,t,r,n){var i=this;s.each(this.matrixMap,(function(o){o.spliceRows(e,t,r,n),i.normaliseMatrix(o,e)}))}},{key:"spliceColumns",value:function(e,t,r,n){var i=this;s.each(this.matrixMap,(function(o){o.spliceColumns(e,t,r,n),i.normaliseMatrix(o,e)}))}},{key:"model",get:function(){var e=this;return s.map(this.matrixMap,(function(t,r){return e.getRanges(r,t)})).filter((function(e){return e.ranges.length}))},set:function(e){var t=this.matrixMap={};e.forEach((function(e){var r=t[e.name]=new l;e.ranges.forEach((function(e){c.test(e.split("!").pop()||"")&&r.addCell(e)}))}))}}]),e}();t.exports=h},{"../utils/cell-matrix":18,"../utils/col-cache":19,"../utils/under-dash":25,"./range":10}],7:[function(e,t,r){"use strict";t.exports={ValueType:{Null:0,Merge:1,Number:2,String:3,Date:4,Hyperlink:5,Formula:6,SharedString:7,RichText:8,Boolean:9,Error:10},FormulaType:{None:0,Master:1,Shared:2},RelationshipType:{None:0,OfficeDocument:1,Worksheet:2,CalcChain:3,SharedStrings:4,Styles:5,Theme:6,Hyperlink:7},DocumentType:{Xlsx:1},ReadingOrder:{LeftToRight:1,RightToLeft:2},ErrorValue:{NotApplicable:"#N/A",Ref:"#REF!",Name:"#NAME?",DivZero:"#DIV/0!",Null:"#NULL!",Value:"#VALUE!",Num:"#NUM!"}}},{}],8:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var s=e("../utils/col-cache"),a=e("./anchor"),l=function(){function e(t,r){n(this,e),this.worksheet=t,this.model=r}return o(e,[{key:"model",get:function(){switch(this.type){case"background":return{type:this.type,imageId:this.imageId};case"image":return{type:this.type,imageId:this.imageId,hyperlinks:this.range.hyperlinks,range:{tl:this.range.tl.model,br:this.range.br&&this.range.br.model,ext:this.range.ext,editAs:this.range.editAs}};default:throw new Error("Invalid Image Type")}},set:function(e){var t=e.type,r=e.imageId,n=e.range,i=e.hyperlinks;if(this.type=t,this.imageId=r,"image"===t)if("string"==typeof n){var o=s.decode(n);this.range={tl:new a(this.worksheet,{col:o.left,row:o.top},-1),br:new a(this.worksheet,{col:o.right,row:o.bottom},0),editAs:"oneCell"}}else this.range={tl:new a(this.worksheet,n.tl,0),br:n.br&&new a(this.worksheet,n.br,0),ext:n.ext,editAs:n.editAs,hyperlinks:i||n.hyperlinks}}}]),e}();t.exports=l},{"../utils/col-cache":19,"./anchor":2}],9:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var a=e("../utils/under-dash"),l=function(){function e(t){i(this,e),this.note=t}return s(e,[{key:"model",get:function(){var t=null;return t="string"===n(this.note)?{type:"note",note:{texts:[{text:this.note}]}}:{type:"note",note:this.note},a.deepMerge({},e.DEFAULT_CONFIGS,t)},set:function(e){var t=e.note,r=t.texts;1===r.length&&1===Object.keys(r[0]).length?this.note=r[0].text:this.note=t}}],[{key:"fromModel",value:function(t){var r=new e;return r.model=t,r}}]),e}();l.DEFAULT_CONFIGS={note:{margins:{insetmode:"auto",inset:[.13,.13,.25,.25]},protection:{locked:"True",lockText:"True"},editAs:"absolute"}},t.exports=l},{"../utils/under-dash":25}],10:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var s=e("../utils/col-cache"),a=function(){function e(){n(this,e),this.decode(arguments)}return o(e,[{key:"setTLBR",value:function(e,t,r,n,i){if(arguments.length<4){var o=s.decodeAddress(e),a=s.decodeAddress(t);this.model={top:Math.min(o.row,a.row),left:Math.min(o.col,a.col),bottom:Math.max(o.row,a.row),right:Math.max(o.col,a.col),sheetName:r},this.setTLBR(o.row,o.col,a.row,a.col,i)}else this.model={top:Math.min(e,r),left:Math.min(t,n),bottom:Math.max(e,r),right:Math.max(t,n),sheetName:i}}},{key:"decode",value:function(t){switch(t.length){case 5:this.setTLBR(t[0],t[1],t[2],t[3],t[4]);break;case 4:this.setTLBR(t[0],t[1],t[2],t[3]);break;case 3:this.setTLBR(t[0],t[1],t[2]);break;case 2:this.setTLBR(t[0],t[1]);break;case 1:var r=t[0];if(r instanceof e)this.model={top:r.model.top,left:r.model.left,bottom:r.model.bottom,right:r.model.right,sheetName:r.sheetName};else if(r instanceof Array)this.decode(r);else if(r.top&&r.left&&r.bottom&&r.right)this.model={top:r.top,left:r.left,bottom:r.bottom,right:r.right,sheetName:r.sheetName};else{var n=s.decodeEx(r);n.top?this.model={top:n.top,left:n.left,bottom:n.bottom,right:n.right,sheetName:n.sheetName}:this.model={top:n.row,left:n.col,bottom:n.row,right:n.col,sheetName:n.sheetName}}break;case 0:this.model={top:0,left:0,bottom:0,right:0};break;default:throw new Error("Invalid number of arguments to _getDimensions() - ".concat(t.length))}}},{key:"expand",value:function(e,t,r,n){(!this.model.top||e<this.top)&&(this.top=e),(!this.model.left||t<this.left)&&(this.left=t),(!this.model.bottom||r>this.bottom)&&(this.bottom=r),(!this.model.right||n>this.right)&&(this.right=n)}},{key:"expandRow",value:function(e){if(e){var t=e.dimensions,r=e.number;t&&this.expand(r,t.min,r,t.max)}}},{key:"expandToAddress",value:function(e){var t=s.decodeEx(e);this.expand(t.row,t.col,t.row,t.col)}},{key:"toString",value:function(){return this.range}},{key:"intersects",value:function(e){return!(e.sheetName&&this.sheetName&&e.sheetName!==this.sheetName||e.bottom<this.top||e.top>this.bottom||e.right<this.left||e.left>this.right)}},{key:"contains",value:function(e){var t=s.decodeEx(e);return this.containsEx(t)}},{key:"containsEx",value:function(e){return(!e.sheetName||!this.sheetName||e.sheetName===this.sheetName)&&e.row>=this.top&&e.row<=this.bottom&&e.col>=this.left&&e.col<=this.right}},{key:"forEachAddress",value:function(e){for(var t=this.left;t<=this.right;t++)for(var r=this.top;r<=this.bottom;r++)e(s.encodeAddress(r,t),r,t)}},{key:"top",get:function(){return this.model.top||1},set:function(e){this.model.top=e}},{key:"left",get:function(){return this.model.left||1},set:function(e){this.model.left=e}},{key:"bottom",get:function(){return this.model.bottom||1},set:function(e){this.model.bottom=e}},{key:"right",get:function(){return this.model.right||1},set:function(e){this.model.right=e}},{key:"sheetName",get:function(){return this.model.sheetName},set:function(e){this.model.sheetName=e}},{key:"_serialisedSheetName",get:function(){var e=this.model.sheetName;return e?/^[a-zA-Z0-9]*$/.test(e)?"".concat(e,"!"):"'".concat(e,"'!"):""}},{key:"tl",get:function(){return s.n2l(this.left)+this.top}},{key:"$t$l",get:function(){return"$".concat(s.n2l(this.left),"$").concat(this.top)}},{key:"br",get:function(){return s.n2l(this.right)+this.bottom}},{key:"$b$r",get:function(){return"$".concat(s.n2l(this.right),"$").concat(this.bottom)}},{key:"range",get:function(){return"".concat(this._serialisedSheetName+this.tl,":").concat(this.br)}},{key:"$range",get:function(){return"".concat(this._serialisedSheetName+this.$t$l,":").concat(this.$b$r)}},{key:"shortRange",get:function(){return this.count>1?this.range:this._serialisedSheetName+this.tl}},{key:"$shortRange",get:function(){return this.count>1?this.$range:this._serialisedSheetName+this.$t$l}},{key:"count",get:function(){return(1+this.bottom-this.top)*(1+this.right-this.left)}}]),e}();t.exports=a},{"../utils/col-cache":19}],11:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var s=e("../utils/under-dash"),a=e("./enums"),l=e("../utils/col-cache"),u=e("./cell"),c=function(){function e(t,r){n(this,e),this._worksheet=t,this._number=r,this._cells=[],this.style={},this.outlineLevel=0}return o(e,[{key:"commit",value:function(){this._worksheet._commitRow(this)}},{key:"destroy",value:function(){delete this._worksheet,delete this._cells,delete this.style}},{key:"findCell",value:function(e){return this._cells[e-1]}},{key:"getCellEx",value:function(e){var t=this._cells[e.col-1];if(!t){var r=this._worksheet.getColumn(e.col);t=new u(this,r,e.address),this._cells[e.col-1]=t}return t}},{key:"getCell",value:function(e){if("string"==typeof e){var t=this._worksheet.getColumnKey(e);e=t?t.number:l.l2n(e)}return this._cells[e-1]||this.getCellEx({address:l.encodeAddress(this._number,e),row:this._number,col:e})}},{key:"splice",value:function(e,t){for(var r=e+t,n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];var s,a,l,u=i.length-t,c=this._cells.length;if(u<0)for(s=e+i.length;s<=c;s++)l=this._cells[s-1],(a=this._cells[s-u-1])?((l=this.getCell(s)).value=a.value,l.style=a.style,l._comment=a._comment):l&&(l.value=null,l.style={},l._comment=void 0);else if(u>0)for(s=c;s>=r;s--)(a=this._cells[s-1])?((l=this.getCell(s+u)).value=a.value,l.style=a.style,l._comment=a._comment):this._cells[s+u-1]=void 0;for(s=0;s<i.length;s++)(l=this.getCell(e+s)).value=i[s],l.style={},l._comment=void 0}},{key:"eachCell",value:function(e,t){if(t||(t=e,e=null),e&&e.includeEmpty)for(var r=this._cells.length,n=1;n<=r;n++)t(this.getCell(n),n);else this._cells.forEach((function(e,r){e&&e.type!==a.ValueType.Null&&t(e,r+1)}))}},{key:"addPageBreak",value:function(e,t){var r=this._worksheet,n=Math.max(0,e-1)||0,i=Math.max(0,t-1)||16838,o={id:this._number,max:i,man:1};n&&(o.min=n),r.rowBreaks.push(o)}},{key:"_applyStyle",value:function(e,t){return this.style[e]=t,this._cells.forEach((function(r){r&&(r[e]=t)})),t}},{key:"number",get:function(){return this._number}},{key:"worksheet",get:function(){return this._worksheet}},{key:"values",get:function(){var e=[];return this._cells.forEach((function(t){t&&t.type!==a.ValueType.Null&&(e[t.col]=t.value)})),e},set:function(e){var t=this;if(this._cells=[],e)if(e instanceof Array){var r=0;e.hasOwnProperty("0")&&(r=1),e.forEach((function(e,n){void 0!==e&&(t.getCellEx({address:l.encodeAddress(t._number,n+r),row:t._number,col:n+r}).value=e)}))}else this._worksheet.eachColumnKey((function(r,n){void 0!==e[n]&&(t.getCellEx({address:l.encodeAddress(t._number,r.number),row:t._number,col:r.number}).value=e[n])}))}},{key:"hasValues",get:function(){return s.some(this._cells,(function(e){return e&&e.type!==a.ValueType.Null}))}},{key:"cellCount",get:function(){return this._cells.length}},{key:"actualCellCount",get:function(){var e=0;return this.eachCell((function(){e++})),e}},{key:"dimensions",get:function(){var e=0,t=0;return this._cells.forEach((function(r){r&&r.type!==a.ValueType.Null&&((!e||e>r.col)&&(e=r.col),t<r.col&&(t=r.col))})),e>0?{min:e,max:t}:null}},{key:"numFmt",get:function(){return this.style.numFmt},set:function(e){this._applyStyle("numFmt",e)}},{key:"font",get:function(){return this.style.font},set:function(e){this._applyStyle("font",e)}},{key:"alignment",get:function(){return this.style.alignment},set:function(e){this._applyStyle("alignment",e)}},{key:"protection",get:function(){return this.style.protection},set:function(e){this._applyStyle("protection",e)}},{key:"border",get:function(){return this.style.border},set:function(e){this._applyStyle("border",e)}},{key:"fill",get:function(){return this.style.fill},set:function(e){this._applyStyle("fill",e)}},{key:"hidden",get:function(){return!!this._hidden},set:function(e){this._hidden=e}},{key:"outlineLevel",get:function(){return this._outlineLevel||0},set:function(e){this._outlineLevel=e}},{key:"collapsed",get:function(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelRow)}},{key:"model",get:function(){var e=[],t=0,r=0;return this._cells.forEach((function(n){if(n){var i=n.model;i&&((!t||t>n.col)&&(t=n.col),r<n.col&&(r=n.col),e.push(i))}})),this.height||e.length?{cells:e,number:this.number,min:t,max:r,height:this.height,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel,collapsed:this.collapsed}:null},set:function(e){var t,r=this;if(e.number!==this._number)throw new Error("Invalid row number in model");this._cells=[],e.cells.forEach((function(e){if(e.type===u.Types.Merge);else{var n;if(e.address)n=l.decodeAddress(e.address);else if(t){var i=t.row,o=t.col+1;n={row:i,col:o,address:l.encodeAddress(i,o),$col$row:"$".concat(l.n2l(o),"$").concat(i)}}t=n,r.getCellEx(n).model=e}})),e.height?this.height=e.height:delete this.height,this.hidden=e.hidden,this.outlineLevel=e.outlineLevel||0,this.style=e.style&&JSON.parse(JSON.stringify(e.style))||{}}}]),e}();t.exports=c},{"../utils/col-cache":19,"../utils/under-dash":25,"./cell":3,"./enums":7}],12:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var s=e("../utils/col-cache"),a=function(){function e(t,r,i){n(this,e),this.table=t,this.column=r,this.index=i}return o(e,[{key:"_set",value:function(e,t){this.table.cacheState(),this.column[e]=t}},{key:"name",get:function(){return this.column.name},set:function(e){this._set("name",e)}},{key:"filterButton",get:function(){return this.column.filterButton},set:function(e){this.column.filterButton=e}},{key:"style",get:function(){return this.column.style},set:function(e){this.column.style=e}},{key:"totalsRowLabel",get:function(){return this.column.totalsRowLabel},set:function(e){this._set("totalsRowLabel",e)}},{key:"totalsRowFunction",get:function(){return this.column.totalsRowFunction},set:function(e){this._set("totalsRowFunction",e)}},{key:"totalsRowResult",get:function(){return this.column.totalsRowResult},set:function(e){this._set("totalsRowResult",e)}},{key:"totalsRowFormula",get:function(){return this.column.totalsRowFormula},set:function(e){this._set("totalsRowFormula",e)}}]),e}(),l=function(){function e(t,r){n(this,e),this.worksheet=t,r&&(this.table=r,this.validate(),this.store())}return o(e,[{key:"getFormula",value:function(e){switch(e.totalsRowFunction){case"none":return null;case"average":return"SUBTOTAL(101,".concat(this.table.name,"[").concat(e.name,"])");case"countNums":return"SUBTOTAL(102,".concat(this.table.name,"[").concat(e.name,"])");case"count":return"SUBTOTAL(103,".concat(this.table.name,"[").concat(e.name,"])");case"max":return"SUBTOTAL(104,".concat(this.table.name,"[").concat(e.name,"])");case"min":return"SUBTOTAL(105,".concat(this.table.name,"[").concat(e.name,"])");case"stdDev":return"SUBTOTAL(106,".concat(this.table.name,"[").concat(e.name,"])");case"var":return"SUBTOTAL(107,".concat(this.table.name,"[").concat(e.name,"])");case"sum":return"SUBTOTAL(109,".concat(this.table.name,"[").concat(e.name,"])");case"custom":return e.totalsRowFormula;default:throw new Error("Invalid Totals Row Function: ".concat(e.totalsRowFunction))}}},{key:"validate",value:function(){var e=this,t=this.table,r=function(e,t,r){void 0===e[t]&&(e[t]=r)};r(t,"headerRow",!0),r(t,"totalsRow",!1),r(t,"style",{}),r(t.style,"theme","TableStyleMedium2"),r(t.style,"showFirstColumn",!1),r(t.style,"showLastColumn",!1),r(t.style,"showRowStripes",!1),r(t.style,"showColumnStripes",!1);var n=function(e,t){if(!e)throw new Error(t)};n(t.ref,"Table must have ref"),n(t.columns,"Table must have column definitions"),n(t.rows,"Table must have row definitions"),t.tl=s.decodeAddress(t.ref);var i=t.tl,o=i.row,a=i.col;n(o>0,"Table must be on valid row"),n(a>0,"Table must be on valid col");var l=this.width,u=this.filterHeight,c=this.tableHeight;t.autoFilterRef=s.encode(o,a,o+u-1,a+l-1),t.tableRef=s.encode(o,a,o+c-1,a+l-1),t.columns.forEach((function(t,i){n(t.name,"Column ".concat(i," must have a name")),0===i?r(t,"totalsRowLabel","Total"):(r(t,"totalsRowFunction","none"),t.totalsRowFormula=e.getFormula(t))}))}},{key:"store",value:function(){var e=this,t=function(e,t){t&&Object.keys(t).forEach((function(r){e[r]=t[r]}))},r=this.worksheet,n=this.table,i=n.tl,o=i.row,s=i.col,a=0;if(n.headerRow){var l=r.getRow(o+a++);n.columns.forEach((function(e,r){var n=e.style,i=e.name,o=l.getCell(s+r);o.value=i,t(o,n)}))}if(n.rows.forEach((function(e){var i=r.getRow(o+a++);e.forEach((function(e,r){var o=i.getCell(s+r);o.value=e,t(o,n.columns[r].style)}))})),n.totalsRow){var u=r.getRow(o+a++);n.columns.forEach((function(r,n){var i=u.getCell(s+n);if(0===n)i.value=r.totalsRowLabel;else{var o=e.getFormula(r);i.value=o?{formula:r.totalsRowFormula,result:r.totalsRowResult}:null}t(i,r.style)}))}}},{key:"load",value:function(e){var t=this,r=this.table,n=r.tl,i=n.row,o=n.col,s=0;if(r.headerRow){var a=e.getRow(i+s++);r.columns.forEach((function(e,t){a.getCell(o+t).value=e.name}))}if(r.rows.forEach((function(t){var r=e.getRow(i+s++);t.forEach((function(e,t){r.getCell(o+t).value=e}))})),r.totalsRow){var l=e.getRow(i+s++);r.columns.forEach((function(e,r){var n=l.getCell(o+r);0===r?n.value=e.totalsRowLabel:t.getFormula(e)&&(n.value={formula:e.totalsRowFormula,result:e.totalsRowResult})}))}}},{key:"cacheState",value:function(){this._cache||(this._cache={ref:this.ref,width:this.width,tableHeight:this.tableHeight})}},{key:"commit",value:function(){if(this._cache){this.validate();var e=s.decodeAddress(this._cache.ref);if(this.ref!==this._cache.ref)for(var t=0;t<this._cache.tableHeight;t++)for(var r=this.worksheet.getRow(e.row+t),n=0;n<this._cache.width;n++)r.getCell(e.col+n).value=null;else{for(var i=this.tableHeight;i<this._cache.tableHeight;i++)for(var o=this.worksheet.getRow(e.row+i),a=0;a<this._cache.width;a++)o.getCell(e.col+a).value=null;for(var l=0;l<this.tableHeight;l++)for(var u=this.worksheet.getRow(e.row+l),c=this.width;c<this._cache.width;c++)u.getCell(e.col+c).value=null}this.store()}}},{key:"addRow",value:function(e,t){this.cacheState(),void 0===t?this.table.rows.push(e):this.table.rows.splice(t,0,e)}},{key:"removeRows",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.cacheState(),this.table.rows.splice(e,t)}},{key:"getColumn",value:function(e){var t=this.table.columns[e];return new a(this,t,e)}},{key:"addColumn",value:function(e,t,r){this.cacheState(),void 0===r?(this.table.columns.push(e),this.table.rows.forEach((function(e,r){e.push(t[r])}))):(this.table.columns.splice(r,0,e),this.table.rows.forEach((function(e,n){e.splice(r,0,t[n])})))}},{key:"removeColumns",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.cacheState(),this.table.columns.splice(e,t),this.table.rows.forEach((function(r){r.splice(e,t)}))}},{key:"_assign",value:function(e,t,r){this.cacheState(),e[t]=r}},{key:"width",get:function(){return this.table.columns.length}},{key:"height",get:function(){return this.table.rows.length}},{key:"filterHeight",get:function(){return this.height+(this.table.headerRow?1:0)}},{key:"tableHeight",get:function(){return this.filterHeight+(this.table.totalsRow?1:0)}},{key:"model",get:function(){return this.table},set:function(e){this.table=e}},{key:"ref",get:function(){return this.table.ref},set:function(e){this._assign(this.table,"ref",e)}},{key:"name",get:function(){return this.table.name},set:function(e){this.table.name=e}},{key:"displayName",get:function(){return this.table.displyName||this.table.name}},{key:"displayNamename",set:function(e){this.table.displayName=e}},{key:"headerRow",get:function(){return this.table.headerRow},set:function(e){this._assign(this.table,"headerRow",e)}},{key:"totalsRow",get:function(){return this.table.totalsRow},set:function(e){this._assign(this.table,"totalsRow",e)}},{key:"theme",get:function(){return this.table.style.name},set:function(e){this.table.style.name=e}},{key:"showFirstColumn",get:function(){return this.table.style.showFirstColumn},set:function(e){this.table.style.showFirstColumn=e}},{key:"showLastColumn",get:function(){return this.table.style.showLastColumn},set:function(e){this.table.style.showLastColumn=e}},{key:"showRowStripes",get:function(){return this.table.style.showRowStripes},set:function(e){this.table.style.showRowStripes=e}},{key:"showColumnStripes",get:function(){return this.table.style.showColumnStripes},set:function(e){this.table.style.showColumnStripes=e}}]),e}();t.exports=l},{"../utils/col-cache":19}],13:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var s=e("./worksheet"),a=e("./defined-names"),l=e("../xlsx/xlsx"),u=e("../csv/csv"),c=function(){function e(){n(this,e),this.category="",this.company="",this.created=new Date,this.description="",this.keywords="",this.manager="",this.modified=this.created,this.properties={},this.calcProperties={},this._worksheets=[],this.subject="",this.title="",this.views=[],this.media=[],this._definedNames=new a}return o(e,[{key:"addWorksheet",value:function(e,t){var r=this.nextId;if(e&&e.length,/[*?:/\\[\]]/.test(e))throw new Error("Worksheet name ".concat(e," cannot include any of the following characters: * ? : \\ / [ ]"));if(/(^')|('$)/.test(e))throw new Error("The first or last character of worksheet name cannot be a single quotation mark: ".concat(e));if(e=(e||"sheet".concat(r)).substring(0,31),this._worksheets.find((function(t){return t&&t.name.toLowerCase()===e.toLowerCase()})))throw new Error("Worksheet name already exists: ".concat(e));t&&("string"==typeof t?t={properties:{tabColor:{argb:t}}}:(t.argb||t.theme||t.indexed)&&(t={properties:{tabColor:t}}));var n=this._worksheets.reduce((function(e,t){return(t&&t.orderNo)>e?t.orderNo:e}),0),i=Object.assign({},t,{id:r,name:e,orderNo:n+1,workbook:this}),o=new s(i);return this._worksheets[r]=o,o}},{key:"removeWorksheetEx",value:function(e){delete this._worksheets[e.id]}},{key:"removeWorksheet",value:function(e){var t=this.getWorksheet(e);t&&t.destroy()}},{key:"getWorksheet",value:function(e){return void 0===e?this._worksheets.find(Boolean):"number"==typeof e?this._worksheets[e]:"string"==typeof e?this._worksheets.find((function(t){return t&&t.name===e})):void 0}},{key:"eachSheet",value:function(e){this.worksheets.forEach((function(t){e(t,t.id)}))}},{key:"clearThemes",value:function(){this._themes=void 0}},{key:"addImage",value:function(e){var t=this.media.length;return this.media.push(Object.assign({},e,{type:"image"})),t}},{key:"getImage",value:function(e){return this.media[e]}},{key:"xlsx",get:function(){return this._xlsx||(this._xlsx=new l(this)),this._xlsx}},{key:"csv",get:function(){return this._csv||(this._csv=new u(this)),this._csv}},{key:"nextId",get:function(){for(var e=1;e<this._worksheets.length;e++)if(!this._worksheets[e])return e;return this._worksheets.length||1}},{key:"worksheets",get:function(){return this._worksheets.slice(1).sort((function(e,t){return e.orderNo-t.orderNo})).filter(Boolean)}},{key:"definedNames",get:function(){return this._definedNames}},{key:"model",get:function(){return{creator:this.creator||"Unknown",lastModifiedBy:this.lastModifiedBy||"Unknown",lastPrinted:this.lastPrinted,created:this.created,modified:this.modified,properties:this.properties,worksheets:this.worksheets.map((function(e){return e.model})),sheets:this.worksheets.map((function(e){return e.model})).filter(Boolean),definedNames:this._definedNames.model,views:this.views,company:this.company,manager:this.manager,title:this.title,subject:this.subject,keywords:this.keywords,category:this.category,description:this.description,language:this.language,revision:this.revision,contentStatus:this.contentStatus,themes:this._themes,media:this.media,calcProperties:this.calcProperties}},set:function(e){var t=this;this.creator=e.creator,this.lastModifiedBy=e.lastModifiedBy,this.lastPrinted=e.lastPrinted,this.created=e.created,this.modified=e.modified,this.company=e.company,this.manager=e.manager,this.title=e.title,this.subject=e.subject,this.keywords=e.keywords,this.category=e.category,this.description=e.description,this.language=e.language,this.revision=e.revision,this.contentStatus=e.contentStatus,this.properties=e.properties,this.calcProperties=e.calcProperties,this._worksheets=[],e.worksheets.forEach((function(r){var n=r.id,i=r.name,o=r.state,a=e.sheets&&e.sheets.findIndex((function(e){return e.id===n}));(t._worksheets[n]=new s({id:n,name:i,orderNo:a,state:o,workbook:t})).model=r})),this._definedNames.model=e.definedNames,this.views=e.views,this._themes=e.themes,this.media=e.media||[]}}]),e}();t.exports=c},{"../csv/csv":1,"../xlsx/xlsx":141,"./defined-names":6,"./worksheet":14}],14:[function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return c(e)||u(e)||l(e)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function u(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function c(e){if(Array.isArray(e))return h(e)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),e}var m=e("../utils/under-dash"),g=e("../utils/col-cache"),v=e("./range"),y=e("./row"),b=e("./column"),w=e("./enums"),C=e("./image"),_=e("./table"),S=e("./data-validations"),x=e("../utils/encryptor"),k=function(){function e(t){d(this,e),t=t||{},this.id=t.id,this.orderNo=t.orderNo,this.name=t.name||"Sheet".concat(this.id),this.state=t.state||"visible",this._rows=[],this._columns=null,this._keys={},this._merges={},this.rowBreaks=[],this._workbook=t.workbook,this.properties=Object.assign({},{defaultRowHeight:15,dyDescent:55,outlineLevelCol:0,outlineLevelRow:0},t.properties),this.pageSetup=Object.assign({},{margins:{left:.7,right:.7,top:.75,bottom:.75,header:.3,footer:.3},orientation:"portrait",horizontalDpi:4294967295,verticalDpi:4294967295,fitToPage:!(!t.pageSetup||!t.pageSetup.fitToWidth&&!t.pageSetup.fitToHeight||t.pageSetup.scale),pageOrder:"downThenOver",blackAndWhite:!1,draft:!1,cellComments:"None",errors:"displayed",scale:100,fitToWidth:1,fitToHeight:1,paperSize:void 0,showRowColHeaders:!1,showGridLines:!1,firstPageNumber:void 0,horizontalCentered:!1,verticalCentered:!1,rowBreaks:null,colBreaks:null},t.pageSetup),this.headerFooter=Object.assign({},{differentFirst:!1,differentOddEven:!1,oddHeader:null,oddFooter:null,evenHeader:null,evenFooter:null,firstHeader:null,firstFooter:null},t.headerFooter),this.dataValidations=new S,this.views=t.views||[],this.autoFilter=t.autoFilter||null,this._media=[],this.sheetProtection=null,this.tables={},this.conditionalFormattings=[]}return p(e,[{key:"destroy",value:function(){this._workbook.removeWorksheetEx(this)}},{key:"getColumnKey",value:function(e){return this._keys[e]}},{key:"setColumnKey",value:function(e,t){this._keys[e]=t}},{key:"deleteColumnKey",value:function(e){delete this._keys[e]}},{key:"eachColumnKey",value:function(e){m.each(this._keys,e)}},{key:"getColumn",value:function(e){if("string"==typeof e){var t=this._keys[e];if(t)return t;e=g.l2n(e)}if(this._columns||(this._columns=[]),e>this._columns.length)for(var r=this._columns.length+1;r<=e;)this._columns.push(new b(this,r++));return this._columns[e-1]}},{key:"spliceColumns",value:function(e,t){for(var r=this,n=this._rows.length,i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];if(o.length>0)for(var a=function(n){var i=[e,t];o.forEach((function(e){i.push(e[n]||null)}));var s=r.getRow(n+1);s.splice.apply(s,i)},l=0;l<n;l++)a(l);else this._rows.forEach((function(r){r&&r.splice(e,t)}));var u=o.length-t,c=e+t,h=this._columns.length;if(u<0)for(var d=e+o.length;d<=h;d++)this.getColumn(d).defn=this.getColumn(d-u).defn;else if(u>0)for(var f=h;f>=c;f--)this.getColumn(f+u).defn=this.getColumn(f).defn;for(var p=e;p<e+o.length;p++)this.getColumn(p).defn=null;this.workbook.definedNames.spliceColumns(this.name,e,t,o.length)}},{key:"_commitRow",value:function(){}},{key:"findRow",value:function(e){return this._rows[e-1]}},{key:"findRows",value:function(e,t){return this._rows.slice(e-1,e-1+t)}},{key:"getRow",value:function(e){var t=this._rows[e-1];return t||(t=this._rows[e-1]=new y(this,e)),t}},{key:"getRows",value:function(e,t){if(!(t<1)){for(var r=[],n=e;n<e+t;n++)r.push(this.getRow(n));return r}}},{key:"addRow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"n",r=this._nextRow,n=this.getRow(r);return n.values=e,this._setStyleOption(r,"i"===t[0]?t:"n"),n}},{key:"addRows",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"n",n=[];return e.forEach((function(e){n.push(t.addRow(e,r))})),n}},{key:"insertRow",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"n";return this.spliceRows(e,0,t),this._setStyleOption(e,r),this.getRow(e)}},{key:"insertRows",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"n";if(this.spliceRows.apply(this,[e,0].concat(s(t))),"n"!==r)for(var n=0;n<t.length;n++)"o"===r[0]&&void 0!==this.findRow(t.length+e+n)?this._copyStyle(t.length+e+n,e+n,"+"===r[1]):"i"===r[0]&&void 0!==this.findRow(e-1)&&this._copyStyle(e-1,e+n,"+"===r[1]);return this.getRows(e,t.length)}},{key:"_setStyleOption",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"n";"o"===t[0]&&void 0!==this.findRow(e+1)?this._copyStyle(e+1,e,"+"===t[1]):"i"===t[0]&&void 0!==this.findRow(e-1)&&this._copyStyle(e-1,e,"+"===t[1])}},{key:"_copyStyle",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.getRow(e),o=this.getRow(t);o.style=Object.freeze(i({},n.style)),n.eachCell({includeEmpty:r},(function(e,t){o.getCell(t).style=Object.freeze(i({},e.style))})),o.height=n.height}},{key:"duplicateRow",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this._rows[e-1],o=new Array(t).fill(i.values);this.spliceRows.apply(this,[e+1,n?0:t].concat(s(o)));for(var a=function(t){var n=r._rows[e+t];n.style=i.style,n.height=i.height,i.eachCell({includeEmpty:!0},(function(e,t){n.getCell(t).style=e.style}))},l=0;l<t;l++)a(l)}},{key:"spliceRows",value:function(e,t){for(var r=this,n=e+t,i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];var a,l,u=o.length,c=u-t,h=this._rows.length;if(c<0)for(a=n;a<=h;a++)(l=this._rows[a-1])?function(){var e=r.getRow(a+c);e.values=l.values,e.style=l.style,e.height=l.height,l.eachCell({includeEmpty:!0},(function(t,r){e.getCell(r).style=t.style})),r._rows[a-1]=void 0}():this._rows[a+c-1]=void 0;else if(c>0)for(a=h;a>=n;a--)(l=this._rows[a-1])?function(){var e=r.getRow(a+c);e.values=l.values,e.style=l.style,e.height=l.height,l.eachCell({includeEmpty:!0},(function(t,n){if(e.getCell(n).style=t.style,"MergeValue"===t._value.constructor.name){var i=r.getRow(t._row._number+u).getCell(n),o=t._value._master,s=r.getRow(o._row._number+u).getCell(o._column._number);i.merge(s)}}))}():this._rows[a+c-1]=void 0;for(a=0;a<u;a++){var d=this.getRow(e+a);d.style={},d.values=o[a]}this.workbook.definedNames.spliceRows(this.name,e,t,u)}},{key:"eachRow",value:function(e,t){if(t||(t=e,e=void 0),e&&e.includeEmpty)for(var r=this._rows.length,n=1;n<=r;n++)t(this.getRow(n),n);else this._rows.forEach((function(e){e&&e.hasValues&&t(e,e.number)}))}},{key:"getSheetValues",value:function(){var e=[];return this._rows.forEach((function(t){t&&(e[t.number]=t.values)})),e}},{key:"findCell",value:function(e,t){var r=g.getAddress(e,t),n=this._rows[r.row-1];return n?n.findCell(r.col):void 0}},{key:"getCell",value:function(e,t){var r=g.getAddress(e,t);return this.getRow(r.row).getCellEx(r)}},{key:"mergeCells",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=new v(t);this._mergeCellsInternal(n)}},{key:"mergeCellsWithoutStyle",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=new v(t);this._mergeCellsInternal(n,!0)}},{key:"_mergeCellsInternal",value:function(e,t){m.each(this._merges,(function(t){if(t.intersects(e))throw new Error("Cannot merge already merged cells")}));for(var r=this.getCell(e.top,e.left),n=e.top;n<=e.bottom;n++)for(var i=e.left;i<=e.right;i++)(n>e.top||i>e.left)&&this.getCell(n,i).merge(r,t);this._merges[r.address]=e}},{key:"_unMergeMaster",value:function(e){var t=this._merges[e.address];if(t){for(var r=t.top;r<=t.bottom;r++)for(var n=t.left;n<=t.right;n++)this.getCell(r,n).unmerge();delete this._merges[e.address]}}},{key:"unMergeCells",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=new v(t),i=n.top;i<=n.bottom;i++)for(var o=n.left;o<=n.right;o++){var s=this.findCell(i,o);s&&(s.type===w.ValueType.Merge?this._unMergeMaster(s.master):this._merges[s.address]&&this._unMergeMaster(s))}}},{key:"fillFormula",value:function(e,t,r){var n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"shared",o=g.decode(e),s=o.top,a=o.left,l=o.bottom,u=o.right,c=u-a+1,h=g.encodeAddress(s,a),d="shared"===i;n="function"==typeof r?r:Array.isArray(r)?Array.isArray(r[0])?function(e,t){return r[e-s][t-a]}:function(e,t){return r[(e-s)*c+(t-a)]}:function(){};for(var f=!0,p=s;p<=l;p++)for(var m=a;m<=u;m++)f?(this.getCell(p,m).value={shareType:i,formula:t,ref:e,result:n(p,m)},f=!1):this.getCell(p,m).value=d?{sharedFormula:h,result:n(p,m)}:n(p,m)}},{key:"addImage",value:function(e,t){var r={type:"image",imageId:e,range:t};this._media.push(new C(this,r))}},{key:"getImages",value:function(){return this._media.filter((function(e){return"image"===e.type}))}},{key:"addBackgroundImage",value:function(e){var t={type:"background",imageId:e};this._media.push(new C(this,t))}},{key:"getBackgroundImageId",value:function(){var e=this._media.find((function(e){return"background"===e.type}));return e&&e.imageId}},{key:"protect",value:function(e,t){var r=this;return new Promise((function(n){r.sheetProtection={sheet:!0},t&&"spinCount"in t&&(t.spinCount=Number.isFinite(t.spinCount)?Math.round(Math.max(0,t.spinCount)):1e5),e&&(r.sheetProtection.algorithmName="SHA-512",r.sheetProtection.saltValue=x.randomBytes(16).toString("base64"),r.sheetProtection.spinCount=t&&"spinCount"in t?t.spinCount:1e5,r.sheetProtection.hashValue=x.convertPasswordToHash(e,"SHA512",r.sheetProtection.saltValue,r.sheetProtection.spinCount)),t&&(r.sheetProtection=Object.assign(r.sheetProtection,t),!e&&"spinCount"in t&&delete r.sheetProtection.spinCount),n()}))}},{key:"unprotect",value:function(){this.sheetProtection=null}},{key:"addTable",value:function(e){var t=new _(this,e);return this.tables[e.name]=t,t}},{key:"getTable",value:function(e){return this.tables[e]}},{key:"removeTable",value:function(e){delete this.tables[e]}},{key:"getTables",value:function(){return Object.values(this.tables)}},{key:"addConditionalFormatting",value:function(e){this.conditionalFormattings.push(e)}},{key:"removeConditionalFormatting",value:function(e){"number"==typeof e?this.conditionalFormattings.splice(e,1):this.conditionalFormattings=e instanceof Function?this.conditionalFormattings.filter(e):[]}},{key:"_parseRows",value:function(e){var t=this;this._rows=[],e.rows.forEach((function(e){var r=new y(t,e.number);t._rows[r.number-1]=r,r.model=e}))}},{key:"_parseMergeCells",value:function(e){var t=this;m.each(e.mergeCells,(function(e){t.mergeCellsWithoutStyle(e)}))}},{key:"workbook",get:function(){return this._workbook}},{key:"dimensions",get:function(){var e=new v;return this._rows.forEach((function(t){if(t){var r=t.dimensions;r&&e.expand(t.number,r.min,t.number,r.max)}})),e}},{key:"columns",get:function(){return this._columns},set:function(e){var t=this;this._headerRowCount=e.reduce((function(e,t){var r=(t.header?1:t.headers&&t.headers.length)||0;return Math.max(e,r)}),0);var r=1,n=this._columns=[];e.forEach((function(e){var i=new b(t,r++,!1);n.push(i),i.defn=e}))}},{key:"lastColumn",get:function(){return this.getColumn(this.columnCount)}},{key:"columnCount",get:function(){var e=0;return this.eachRow((function(t){e=Math.max(e,t.cellCount)})),e}},{key:"actualColumnCount",get:function(){var e=[],t=0;return this.eachRow((function(r){r.eachCell((function(r){var n=r.col;e[n]||(e[n]=!0,t++)}))})),t}},{key:"_lastRowNumber",get:function(){for(var e=this._rows,t=e.length;t>0&&void 0===e[t-1];)t--;return t}},{key:"_nextRow",get:function(){return this._lastRowNumber+1}},{key:"lastRow",get:function(){if(this._rows.length)return this._rows[this._rows.length-1]}},{key:"rowCount",get:function(){return this._lastRowNumber}},{key:"actualRowCount",get:function(){var e=0;return this.eachRow((function(){e++})),e}},{key:"hasMerges",get:function(){return m.some(this._merges,Boolean)}},{key:"tabColor",get:function(){return this.properties.tabColor},set:function(e){this.properties.tabColor=e}},{key:"model",get:function(){var e={id:this.id,name:this.name,dataValidations:this.dataValidations.model,properties:this.properties,state:this.state,pageSetup:this.pageSetup,headerFooter:this.headerFooter,rowBreaks:this.rowBreaks,views:this.views,autoFilter:this.autoFilter,media:this._media.map((function(e){return e.model})),sheetProtection:this.sheetProtection,tables:Object.values(this.tables).map((function(e){return e.model})),conditionalFormattings:this.conditionalFormattings};e.cols=b.toModel(this.columns);var t=e.rows=[],r=e.dimensions=new v;return this._rows.forEach((function(e){var n=e&&e.model;n&&(r.expand(n.number,n.min,n.number,n.max),t.push(n))})),e.merges=[],m.each(this._merges,(function(t){e.merges.push(t.range)})),e},set:function(e){var t=this;this.name=e.name,this._columns=b.fromModel(this,e.cols),this._parseRows(e),this._parseMergeCells(e),this.dataValidations=new S(e.dataValidations),this.properties=e.properties,this.pageSetup=e.pageSetup,this.headerFooter=e.headerFooter,this.views=e.views,this.autoFilter=e.autoFilter,this._media=e.media.map((function(e){return new C(t,e)})),this.sheetProtection=e.sheetProtection,this.tables=e.tables.reduce((function(e,t){var r=new _;return r.model=t,e[t.name]=r,e}),{}),this.conditionalFormattings=e.conditionalFormattings}}]),e}();t.exports=k},{"../utils/col-cache":19,"../utils/encryptor":20,"../utils/under-dash":25,"./column":4,"./data-validations":5,"./enums":7,"./image":8,"./range":10,"./row":11,"./table":12}],15:[function(e,t,r){"use strict";e("core-js/modules/es.promise"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.values"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.async-iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.find-index"),e("core-js/modules/es.array.find"),e("core-js/modules/es.string.from-code-point"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.number.is-nan"),e("regenerator-runtime/runtime");var n={Workbook:e("./doc/workbook")},i=e("./doc/enums");Object.keys(i).forEach((function(e){n[e]=i[e]})),t.exports=n},{"./doc/enums":7,"./doc/workbook":13,"core-js/modules/es.array.find":316,"core-js/modules/es.array.find-index":315,"core-js/modules/es.array.includes":317,"core-js/modules/es.array.iterator":318,"core-js/modules/es.number.is-nan":319,"core-js/modules/es.object.assign":320,"core-js/modules/es.object.keys":321,"core-js/modules/es.object.values":322,"core-js/modules/es.promise":323,"core-js/modules/es.string.from-code-point":324,"core-js/modules/es.string.includes":325,"core-js/modules/es.symbol":327,"core-js/modules/es.symbol.async-iterator":326,"regenerator-runtime/runtime":492}],16:[function(e,t,r){"use strict";var n="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8");function i(e){return"string"==typeof e?e:n?n.decode(e):e.toString()}r.bufferToString=i},{}],17:[function(e,t,r){"use strict";var n="undefined"==typeof TextEncoder?null:new TextEncoder("utf-8"),i=e("buffer").Buffer;function o(e){return"string"!=typeof e?e:n?i.from(n.encode(e).buffer):i.from(e)}r.stringToBuffer=o},{buffer:216}],18:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var s=e("./under-dash"),a=e("./col-cache"),l=function(){function e(t){n(this,e),this.template=t,this.sheets={}}return o(e,[{key:"addCell",value:function(e){this.addCellEx(a.decodeEx(e))}},{key:"getCell",value:function(e){return this.findCellEx(a.decodeEx(e),!0)}},{key:"findCell",value:function(e){return this.findCellEx(a.decodeEx(e),!1)}},{key:"findCellAt",value:function(e,t,r){var n=this.sheets[e],i=n&&n[t];return i&&i[r]}},{key:"addCellEx",value:function(e){if(e.top)for(var t=e.top;t<=e.bottom;t++)for(var r=e.left;r<=e.right;r++)this.getCellAt(e.sheetName,t,r);else this.findCellEx(e,!0)}},{key:"getCellEx",value:function(e){return this.findCellEx(e,!0)}},{key:"findCellEx",value:function(e,t){var r=this.findSheet(e,t),n=this.findSheetRow(r,e,t);return this.findRowCell(n,e,t)}},{key:"getCellAt",value:function(e,t,r){var n=this.sheets[e]||(this.sheets[e]=[]),i=n[t]||(n[t]=[]);return i[r]||(i[r]={sheetName:e,address:a.n2l(r)+t,row:t,col:r})}},{key:"removeCellEx",value:function(e){var t=this.findSheet(e);if(t){var r=this.findSheetRow(t,e);r&&delete r[e.col]}}},{key:"forEachInSheet",value:function(e,t){var r=this.sheets[e];r&&r.forEach((function(e,r){e&&e.forEach((function(e,n){e&&t(e,r,n)}))}))}},{key:"forEach",value:function(e){var t=this;s.each(this.sheets,(function(r,n){t.forEachInSheet(n,e)}))}},{key:"map",value:function(e){var t=[];return this.forEach((function(r){t.push(e(r))})),t}},{key:"findSheet",value:function(e,t){var r=e.sheetName;return this.sheets[r]?this.sheets[r]:t?this.sheets[r]=[]:void 0}},{key:"findSheetRow",value:function(e,t,r){var n=t.row;return e&&e[n]?e[n]:r?e[n]=[]:void 0}},{key:"findRowCell",value:function(e,t,r){var n=t.col;return e&&e[n]?e[n]:r?e[n]=this.template?Object.assign(t,JSON.parse(JSON.stringify(this.template))):t:void 0}},{key:"spliceRows",value:function(e,t,r,n){var i=this.sheets[e];if(i){for(var o=[],s=0;s<n;s++)o.push([]);i.splice.apply(i,[t,r].concat(o))}}},{key:"spliceColumns",value:function(e,t,r,n){var i=this.sheets[e];if(i){for(var o=[],a=0;a<n;a++)o.push(null);s.each(i,(function(e){e.splice.apply(e,[t,r].concat(o))}))}}}]),e}();t.exports=l},{"./col-cache":19,"./under-dash":25}],19:[function(e,t,r){"use strict";function n(e,t){return l(e)||a(e,t)||o(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}}function l(e){if(Array.isArray(e))return e}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=/^[A-Z]+\d+$/,f={_dictionary:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_l2nFill:0,_l2n:{},_n2l:[],_level:function(e){return e<=26?1:e<=676?2:3},_fill:function(e){var t,r,n,i,o,s=1;if(e>=4)throw new Error("Out of bounds. Excel supports columns from 1 to 16384");if(this._l2nFill<1&&e>=1){for(;s<=26;)t=this._dictionary[s-1],this._n2l[s]=t,this._l2n[t]=s,s++;this._l2nFill=1}if(this._l2nFill<2&&e>=2){for(s=27;s<=702;)n=(r=s-27)%26,i=Math.floor(r/26),t=this._dictionary[i]+this._dictionary[n],this._n2l[s]=t,this._l2n[t]=s,s++;this._l2nFill=2}if(this._l2nFill<3&&e>=3){for(s=703;s<=16384;)n=(r=s-703)%26,i=Math.floor(r/26)%26,o=Math.floor(r/676),t=this._dictionary[o]+this._dictionary[i]+this._dictionary[n],this._n2l[s]=t,this._l2n[t]=s,s++;this._l2nFill=3}},l2n:function(e){if(this._l2n[e]||this._fill(e.length),!this._l2n[e])throw new Error("Out of bounds. Invalid column letter: ".concat(e));return this._l2n[e]},n2l:function(e){if(e<1||e>16384)throw new Error("".concat(e," is out of bounds. Excel supports columns from 1 to 16384"));return this._n2l[e]||this._fill(this._level(e)),this._n2l[e]},_hash:{},validateAddress:function(e){if(!d.test(e))throw new Error("Invalid Address: ".concat(e));return!0},decodeAddress:function(e){var t=e.length<5&&this._hash[e];if(t)return t;for(var r,n=!1,i="",o=0,s=!1,a="",l=0,u=0;u<e.length;u++)if(r=e.charCodeAt(u),!s&&r>=65&&r<=90)n=!0,i+=e[u],o=26*o+r-64;else if(r>=48&&r<=57)s=!0,a+=e[u],l=10*l+r-48;else if(s&&n&&36!==r)break;if(n){if(o>16384)throw new Error("Out of bounds. Invalid column letter: ".concat(i))}else o=void 0;s||(l=void 0);var c={address:e=i+a,col:o,row:l,$col$row:"$".concat(i,"$").concat(a)};return o<=100&&l<=100&&(this._hash[e]=c,this._hash[c.$col$row]=c),c},getAddress:function(e,t){if(t){var r=this.n2l(t)+e;return this.decodeAddress(r)}return this.decodeAddress(e)},decode:function(e){var t=e.split(":");if(2===t.length){var r=this.decodeAddress(t[0]),n=this.decodeAddress(t[1]),i={top:Math.min(r.row,n.row),left:Math.min(r.col,n.col),bottom:Math.max(r.row,n.row),right:Math.max(r.col,n.col)};return i.tl=this.n2l(i.left)+i.top,i.br=this.n2l(i.right)+i.bottom,i.dimensions="".concat(i.tl,":").concat(i.br),i}return this.decodeAddress(e)},decodeEx:function(e){var t=e.match(/(?:(?:(?:'((?:[^']|'')*)')|([^'^ !]*))!)?(.*)/),r=t[1]||t[2],n=t[3],i=n.split(":");if(i.length>1){var o=this.decodeAddress(i[0]),s=this.decodeAddress(i[1]),a=Math.min(o.row,s.row),l=Math.min(o.col,s.col),u=Math.max(o.row,s.row),h=Math.max(o.col,s.col);return o=this.n2l(l)+a,s=this.n2l(h)+u,{top:a,left:l,bottom:u,right:h,sheetName:r,tl:{address:o,col:l,row:a,$col$row:"$".concat(this.n2l(l),"$").concat(a),sheetName:r},br:{address:s,col:h,row:u,$col$row:"$".concat(this.n2l(h),"$").concat(u),sheetName:r},dimensions:"".concat(o,":").concat(s)}}if(n.startsWith("#"))return r?{sheetName:r,error:n}:{error:n};var d=this.decodeAddress(n);return r?c({sheetName:r},d):d},encodeAddress:function(e,t){return f.n2l(t)+e},encode:function(){switch(arguments.length){case 2:return f.encodeAddress(arguments[0],arguments[1]);case 4:return"".concat(f.encodeAddress(arguments[0],arguments[1]),":").concat(f.encodeAddress(arguments[2],arguments[3]));default:throw new Error("Can only encode with 2 or 4 arguments")}},inRange:function(e,t){var r=n(e,5),i=r[0],o=r[1],s=r[3],a=r[4],l=n(t,2),u=l[0],c=l[1];return u>=i&&u<=s&&c>=o&&c<=a}};t.exports=f},{}],20:[function(e,t,r){(function(r){"use strict";var n=e("crypto"),i={hash:function(e){for(var t=n.createHash(e),i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return t.update(r.concat(o)),t.digest()},convertPasswordToHash:function(e,t,i,o){if(t=t.toLowerCase(),n.getHashes().indexOf(t)<0)throw new Error("Hash algorithm '".concat(t,"' not supported!"));for(var s=r.from(e,"utf16le"),a=this.hash(t,r.from(i,"base64"),s),l=0;l<o;l++){var u=r.alloc(4);u.writeUInt32LE(l,0),a=this.hash(t,a,u)}return a.toString("base64")},randomBytes:function(e){return n.randomBytes(e)}};t.exports=i}).call(this,e("buffer").Buffer)},{buffer:216,crypto:335}],21:[function(e,t,r){"use strict";function n(e){return new s(e)}function i(e){return function(){return new o(e.apply(this,arguments))}}function o(e){var t,r;function n(e,n){return new Promise((function(o,s){var a={key:e,arg:n,resolve:o,reject:s,next:null};r?r=r.next=a:(t=r=a,i(e,n))}))}function i(t,r){try{var n=e[t](r),a=n.value,l=a instanceof s;Promise.resolve(l?a.wrapped:a).then((function(e){l?i("return"===t?"return":"next",e):o(n.done?"return":"normal",e)}),(function(e){i("throw",e)}))}catch(e){o("throw",e)}}function o(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?i(t.key,t.arg):r=null}this._invoke=n,"function"!=typeof e.return&&(this.return=void 0)}function s(e){this.wrapped=e}function a(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}"function"==typeof Symbol&&Symbol.asyncIterator&&(o.prototype[Symbol.asyncIterator]=function(){return this}),o.prototype.next=function(e){return this._invoke("next",e)},o.prototype.throw=function(e){return this._invoke("throw",e)},o.prototype.return=function(e){return this._invoke("return",e)};var l=e("saxes").SaxesParser,u=e("readable-stream").PassThrough,c=e("./browser-buffer-decode").bufferToString;t.exports=function(){var e=i(regeneratorRuntime.mark((function e(t){var r,i,o,s,h,d,f,p,m,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.pipe&&!t[Symbol.asyncIterator]&&(t=t.pipe(new u)),(r=new l).on("error",(function(e){i=e})),o=[],r.on("opentag",(function(e){return o.push({eventType:"opentag",value:e})})),r.on("text",(function(e){return o.push({eventType:"text",value:e})})),r.on("closetag",(function(e){return o.push({eventType:"closetag",value:e})})),s=!0,h=!1,e.prev=9,f=a(t);case 11:return e.next=13,n(f.next());case 13:return p=e.sent,s=p.done,e.next=17,n(p.value);case 17:if(m=e.sent,s){e.next=29;break}if(g=m,r.write(c(g)),!i){e.next=23;break}throw i;case 23:return e.next=25,o;case 25:o=[];case 26:s=!0,e.next=11;break;case 29:e.next=35;break;case 31:e.prev=31,e.t0=e.catch(9),h=!0,d=e.t0;case 35:if(e.prev=35,e.prev=36,s||null==f.return){e.next=40;break}return e.next=40,n(f.return());case 40:if(e.prev=40,!h){e.next=43;break}throw d;case 43:return e.finish(40);case 44:return e.finish(35);case 45:case"end":return e.stop()}}),e,null,[[9,31,35,45],[36,,40,44]])})));return function(t){return e.apply(this,arguments)}}()},{"./browser-buffer-decode":16,"readable-stream":491,saxes:496}],22:[function(e,t,r){"use strict";var n=e("./col-cache"),i=/(([a-z_\-0-9]*)!)?([a-z0-9_$]{2,})([(])?/gi,o=/^([$])?([a-z]+)([$])?([1-9][0-9]*)$/i;function s(e,t,r){var s=n.decode(t),a=n.decode(r);return e.replace(i,(function(e,t,r,i,l){if(l)return e;var u=o.exec(i);if(u){var c=u[1],h=u[2].toUpperCase(),d=u[3],f=u[4];if(h.length>3||3===h.length&&h>"XFD")return e;var p=n.l2n(h),m=parseInt(f,10);return c||(p+=a.col-s.col),d||(m+=a.row-s.row),(t||"")+(c||"")+n.n2l(p)+(d||"")+m}return e}))}t.exports={slideFormula:s}},{"./col-cache":19}],23:[function(e,t,r){(function(r,n){"use strict";function i(e,t,r,n,i,o,s){try{var a=e[o](s),l=a.value}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(n,i)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function a(e){i(s,n,o,a,l,"next",e)}function l(e){i(s,n,o,a,l,"throw",e)}a(void 0)}))}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}var u=e("readable-stream"),c=e("./utils"),h=e("./string-buf"),d=function(){function e(t,r){s(this,e),this._data=t,this._encoding=r}return l(e,[{key:"copy",value:function(e,t,r,n){return this.toBuffer().copy(e,t,r,n)}},{key:"toBuffer",value:function(){return this._buffer||(this._buffer=n.from(this._data,this._encoding)),this._buffer}},{key:"length",get:function(){return this.toBuffer().length}}]),e}(),f=function(){function e(t){s(this,e),this._data=t}return l(e,[{key:"copy",value:function(e,t,r,n){return this._data._buf.copy(e,t,r,n)}},{key:"toBuffer",value:function(){return this._data.toBuffer()}},{key:"length",get:function(){return this._data.length}}]),e}(),p=function(){function e(t){s(this,e),this._data=t}return l(e,[{key:"copy",value:function(e,t,r,n){this._data.copy(e,t,r,n)}},{key:"toBuffer",value:function(){return this._data}},{key:"length",get:function(){return this._data.length}}]),e}(),m=function(){function e(t){s(this,e),this.size=t,this.buffer=n.alloc(t),this.iRead=0,this.iWrite=0}return l(e,[{key:"toBuffer",value:function(){if(0===this.iRead&&this.iWrite===this.size)return this.buffer;var e=n.alloc(this.iWrite-this.iRead);return this.buffer.copy(e,0,this.iRead,this.iWrite),e}},{key:"read",value:function(e){var t;return 0===e?null:void 0===e||e>=this.length?(t=this.toBuffer(),this.iRead=this.iWrite,t):(t=n.alloc(e),this.buffer.copy(t,0,this.iRead,e),this.iRead+=e,t)}},{key:"write",value:function(e,t,r){var n=Math.min(r,this.size-this.iWrite);return e.copy(this.buffer,this.iWrite,t,t+n),this.iWrite+=n,n}},{key:"length",get:function(){return this.iWrite-this.iRead}},{key:"eod",get:function(){return this.iRead===this.iWrite}},{key:"full",get:function(){return this.iWrite===this.size}}]),e}(),g=function(e){e=e||{},this.bufSize=e.bufSize||1048576,this.buffers=[],this.batch=e.batch||!1,this.corked=!1,this.inPos=0,this.outPos=0,this.pipes=[],this.paused=!1,this.encoding=null};c.inherits(g,u.Duplex,{toBuffer:function(){switch(this.buffers.length){case 0:return null;case 1:return this.buffers[0].toBuffer();default:return n.concat(this.buffers.map((function(e){return e.toBuffer()})))}},_getWritableBuffer:function(){if(this.buffers.length){var e=this.buffers[this.buffers.length-1];if(!e.full)return e}var t=new m(this.bufSize);return this.buffers.push(t),t},_pipe:function(e){var t=this;return o(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=function(t){return new Promise((function(r){t.write(e.toBuffer(),(function(){r()}))}))},r.next=3,Promise.all(t.pipes.map(n));case 3:case"end":return r.stop()}}),r)})))()},_writeToBuffers:function(e){for(var t=0,r=e.length;t<r;)t+=this._getWritableBuffer().write(e,t,r-t)},write:function(e,t,i){var s=this;return o(regeneratorRuntime.mark((function o(){var a;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t instanceof Function&&(i=t,t="utf8"),i=i||c.nop,!(e instanceof h)){o.next=6;break}a=new f(e),o.next=15;break;case 6:if(!(e instanceof n)){o.next=10;break}a=new p(e),o.next=15;break;case 10:if(!("string"==typeof e||e instanceof String||e instanceof ArrayBuffer)){o.next=14;break}a=new d(e,t),o.next=15;break;case 14:throw new Error("Chunk must be one of type String, Buffer or StringBuf.");case 15:if(!s.pipes.length){o.next=31;break}if(!s.batch){o.next=21;break}for(s._writeToBuffers(a);!s.corked&&s.buffers.length>1;)s._pipe(s.buffers.shift());o.next=29;break;case 21:if(s.corked){o.next=27;break}return o.next=24,s._pipe(a);case 24:i(),o.next=29;break;case 27:s._writeToBuffers(a),r.nextTick(i);case 29:o.next=34;break;case 31:s.paused||s.emit("data",a.toBuffer()),s._writeToBuffers(a),s.emit("readable");case 34:return o.abrupt("return",!0);case 35:case"end":return o.stop()}}),o)})))()},cork:function(){this.corked=!0},_flush:function(){if(this.pipes.length)for(;this.buffers.length;)this._pipe(this.buffers.shift())},uncork:function(){this.corked=!1,this._flush()},end:function(e,t,r){var n=this,i=function(e){e?r(e):(n._flush(),n.pipes.forEach((function(e){e.end()})),n.emit("finish"))};e?this.write(e,t,i):i()},read:function(e){var t;if(e){for(t=[];e&&this.buffers.length&&!this.buffers[0].eod;){var r=this.buffers[0],i=r.read(e);e-=i.length,t.push(i),r.eod&&r.full&&this.buffers.shift()}return n.concat(t)}return t=this.buffers.map((function(e){return e.toBuffer()})).filter(Boolean),this.buffers=[],n.concat(t)},setEncoding:function(e){this.encoding=e},pause:function(){this.paused=!0},resume:function(){this.paused=!1},isPaused:function(){return!!this.paused},pipe:function(e){this.pipes.push(e),!this.paused&&this.buffers.length&&this.end()},unpipe:function(e){this.pipes=this.pipes.filter((function(t){return t!==e}))},unshift:function(){throw new Error("Not Implemented")},wrap:function(){throw new Error("Not Implemented")}}),t.exports=g}).call(this,e("_process"),e("buffer").Buffer)},{"./string-buf":24,"./utils":26,_process:467,buffer:216,"readable-stream":491}],24:[function(e,t,r){(function(e){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var o=function(){function t(n){r(this,t),this._buf=e.alloc(n&&n.size||16384),this._encoding=n&&n.encoding||"utf8",this._inPos=0,this._buffer=void 0}return i(t,[{key:"toBuffer",value:function(){return this._buffer||(this._buffer=e.alloc(this.length),this._buf.copy(this._buffer,0,0,this.length)),this._buffer}},{key:"reset",value:function(e){e=e||0,this._buffer=void 0,this._inPos=e}},{key:"_grow",value:function(t){for(var r=2*this._buf.length;r<t;)r*=2;var n=e.alloc(r);this._buf.copy(n,0),this._buf=n}},{key:"addText",value:function(e){this._buffer=void 0;for(var t=this._inPos+this._buf.write(e,this._inPos,this._encoding);t>=this._buf.length-4;)this._grow(this._inPos+e.length),t=this._inPos+this._buf.write(e,this._inPos,this._encoding);this._inPos=t}},{key:"addStringBuf",value:function(e){e.length&&(this._buffer=void 0,this.length+e.length>this.capacity&&this._grow(this.length+e.length),e._buf.copy(this._buf,this._inPos,0,e.length),this._inPos+=e.length)}},{key:"length",get:function(){return this._inPos}},{key:"capacity",get:function(){return this._buf.length}},{key:"buffer",get:function(){return this._buf}}]),t}();t.exports=o}).call(this,e("buffer").Buffer)},{buffer:216}],25:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var i=Object.prototype.toString,o=/["&<>]/,s={each:function(e,t){e&&(Array.isArray(e)?e.forEach(t):Object.keys(e).forEach((function(r){t(e[r],r)})))},some:function(e,t){return!!e&&(Array.isArray(e)?e.some(t):Object.keys(e).some((function(r){return t(e[r],r)})))},every:function(e,t){return!e||(Array.isArray(e)?e.every(t):Object.keys(e).every((function(r){return t(e[r],r)})))},map:function(e,t){return e?Array.isArray(e)?e.map(t):Object.keys(e).map((function(r){return t(e[r],r)})):[]},keyBy:function(e,t){return e.reduce((function(e,r){return e[r[t]]=r,e}),{})},isEqual:function(e,t){var r=n(e),i=n(t),o=Array.isArray(e),a=Array.isArray(t);return r===i&&("object"===n(e)?o||a?!(!o||!a)&&e.length===t.length&&e.every((function(e,r){var n=t[r];return s.isEqual(e,n)})):s.every(e,(function(e,r){var n=t[r];return s.isEqual(e,n)})):e===t)},escapeHtml:function(e){var t=o.exec(e);if(!t)return e;for(var r="",n="",i=0,s=t.index;s<e.length;s++){switch(e.charAt(s)){case'"':n="&quot;";break;case"&":n="&amp;";break;case"'":n="&apos;";break;case"<":n="&lt;";break;case">":n="&gt;";break;default:continue}i!==s&&(r+=e.substring(i,s)),i=s+1,r+=n}return i!==s?r+e.substring(i,s):r},strcmp:function(e,t){return e<t?-1:e>t?1:0},isUndefined:function(e){return"[object Undefined]"===i.call(e)},isObject:function(e){return"[object Object]"===i.call(e)},deepMerge:function(){var e,t,r,n=arguments[0]||{},i=arguments.length;function o(i,o){e=n[o],r=Array.isArray(i),s.isObject(i)||r?(r?(r=!1,t=e&&Array.isArray(e)?e:[]):t=e&&s.isObject(e)?e:{},n[o]=s.deepMerge(t,i)):s.isUndefined(i)||(n[o]=i)}for(var a=0;a<i;a++)s.each(arguments[a],o);return n}};t.exports=s},{}],26:[function(e,t,n){(function(r,n){"use strict";var i=e("fs"),o=/[<>&'"\x7F\x00-\x08\x0B-\x0C\x0E-\x1F]/,s={nop:function(){},promiseImmediate:function(e){return new Promise((function(t){r.setImmediate?n((function(){t(e)})):setTimeout((function(){t(e)}),1)}))},inherits:function(e,t,r,n){e.super_=t,n||(n=r,r=null),r&&Object.keys(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}));var i={constructor:{value:e,enumerable:!1,writable:!1,configurable:!0}};n&&Object.keys(n).forEach((function(e){i[e]=Object.getOwnPropertyDescriptor(n,e)})),e.prototype=Object.create(t.prototype,i)},dateToExcel:function(e,t){return 25569+e.getTime()/864e5-(t?1462:0)},excelToDate:function(e,t){var r=Math.round(24*(e-25569+(t?1462:0))*3600*1e3);return new Date(r)},parsePath:function(e){var t=e.lastIndexOf("/");return{path:e.substring(0,t),name:e.substring(t+1)}},getRelsPath:function(e){var t=s.parsePath(e);return"".concat(t.path,"/_rels/").concat(t.name,".rels")},xmlEncode:function(e){var t=o.exec(e);if(!t)return e;for(var r="",n="",i=0,s=t.index;s<e.length;s++){var a=e.charCodeAt(s);switch(a){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&apos;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;case 127:n="";break;default:if(a<=31&&(a<=8||a>=11&&13!==a)){n="";break}continue}i!==s&&(r+=e.substring(i,s)),i=s+1,n&&(r+=n)}return i!==s?r+e.substring(i,s):r},xmlDecode:function(e){return e.replace(/&([a-z]*);/g,(function(e){switch(e){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&apos;":return"'";case"&quot;":return'"';default:return e}}))},validInt:function(e){var t=parseInt(e,10);return Number.isNaN(t)?0:t},isDateFmt:function(e){return!!e&&null!==(e=(e=e.replace(/\[[^\]]*]/g,"")).replace(/"[^"]*"/g,"")).match(/[ymdhMsb]+/)},fs:{exists:function(e){return new Promise((function(t){i.access(e,i.constants.F_OK,(function(e){t(!e)}))}))}},toIsoDateString:function(e){return e.toIsoString().subsstr(0,10)}};t.exports=s}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{fs:215,timers:521}],27:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var s=e("./under-dash"),a=e("./utils"),l="<",u=">",c="</",h="/>",d='="',f='"',p=" ";function m(e,t,r){e.push(p),e.push(t),e.push(d),e.push(a.xmlEncode(r.toString())),e.push(f)}function g(e,t){t&&s.each(t,(function(t,r){void 0!==t&&m(e,r,t)}))}var v=function(){function e(){n(this,e),this._xml=[],this._stack=[],this._rollbacks=[]}return o(e,[{key:"openXml",value:function(e){var t=this._xml;t.push("<?xml"),g(t,e),t.push("?>\n")}},{key:"openNode",value:function(e,t){var r=this.tos,n=this._xml;r&&this.open&&n.push(u),this._stack.push(e),n.push(l),n.push(e),g(n,t),this.leaf=!0,this.open=!0}},{key:"addAttribute",value:function(e,t){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");void 0!==t&&m(this._xml,e,t)}},{key:"addAttributes",value:function(e){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");g(this._xml,e)}},{key:"writeText",value:function(e){var t=this._xml;this.open&&(t.push(u),this.open=!1),this.leaf=!1,t.push(a.xmlEncode(e.toString()))}},{key:"writeXml",value:function(e){this.open&&(this._xml.push(u),this.open=!1),this.leaf=!1,this._xml.push(e)}},{key:"closeNode",value:function(){var e=this._stack.pop(),t=this._xml;this.leaf?t.push(h):(t.push(c),t.push(e),t.push(u)),this.open=!1,this.leaf=!1}},{key:"leafNode",value:function(e,t,r){this.openNode(e,t),void 0!==r&&this.writeText(r),this.closeNode()}},{key:"closeAll",value:function(){for(;this._stack.length;)this.closeNode()}},{key:"addRollback",value:function(){return this._rollbacks.push({xml:this._xml.length,stack:this._stack.length,leaf:this.leaf,open:this.open}),this.cursor}},{key:"commit",value:function(){this._rollbacks.pop()}},{key:"rollback",value:function(){var e=this._rollbacks.pop();this._xml.length>e.xml&&this._xml.splice(e.xml,this._xml.length-e.xml),this._stack.length>e.stack&&this._stack.splice(e.stack,this._stack.length-e.stack),this.leaf=e.leaf,this.open=e.open}},{key:"tos",get:function(){return this._stack.length?this._stack[this._stack.length-1]:void 0}},{key:"cursor",get:function(){return this._xml.length}},{key:"xml",get:function(){return this.closeAll(),this._xml.join("")}}]),e}();v.StdDocAttributes={version:"1.0",encoding:"UTF-8",standalone:"yes"},t.exports=v},{"./under-dash":25,"./utils":26}],28:[function(e,t,r){(function(r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t,r,n,i,o,s){try{var a=e[o](s),l=a.value}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(n,i)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function a(e){i(s,n,o,a,l,"next",e)}function l(e){i(s,n,o,a,l,"throw",e)}a(void 0)}))}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function h(e){var t=p();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var g=e("events"),v=e("jszip"),y=e("./stream-buf"),b=e("./browser-buffer-encode").stringToBuffer,w=function(e){u(n,e);var t=h(n);function n(e){var r;return s(this,n),(r=t.call(this)).options=Object.assign({type:"nodebuffer",compression:"DEFLATE"},e),r.zip=new v,r.stream=new y,r}return l(n,[{key:"append",value:function(e,t){t.hasOwnProperty("base64")&&t.base64?this.zip.file(t.name,e,{base64:!0}):(r.browser&&"string"==typeof e&&(e=b(e)),this.zip.file(t.name,e))}},{key:"finalize",value:function(){var e=o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.zip.generateAsync(this.options);case 2:t=e.sent,this.stream.end(t),this.emit("finish");case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"read",value:function(e){return this.stream.read(e)}},{key:"setEncoding",value:function(e){return this.stream.setEncoding(e)}},{key:"pause",value:function(){return this.stream.pause()}},{key:"resume",value:function(){return this.stream.resume()}},{key:"isPaused",value:function(){return this.stream.isPaused()}},{key:"pipe",value:function(e,t){return this.stream.pipe(e,t)}},{key:"unpipe",value:function(e){return this.stream.unpipe(e)}},{key:"unshift",value:function(e){return this.stream.unshift(e)}},{key:"wrap",value:function(e){return this.stream.wrap(e)}}]),n}(g.EventEmitter);t.exports={ZipWriter:w}}).call(this,e("_process"))},{"./browser-buffer-encode":17,"./stream-buf":23,_process:467,events:367,jszip:399}],29:[function(e,t,r){"use strict";t.exports={0:{f:"General"},1:{f:"0"},2:{f:"0.00"},3:{f:"#,##0"},4:{f:"#,##0.00"},9:{f:"0%"},10:{f:"0.00%"},11:{f:"0.00E+00"},12:{f:"# ?/?"},13:{f:"# ??/??"},14:{f:"mm-dd-yy"},15:{f:"d-mmm-yy"},16:{f:"d-mmm"},17:{f:"mmm-yy"},18:{f:"h:mm AM/PM"},19:{f:"h:mm:ss AM/PM"},20:{f:"h:mm"},21:{f:"h:mm:ss"},22:{f:'m/d/yy "h":mm'},27:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"年"m"月"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"年" mm"月" dd"日"'},28:{"zh-tw":'[$-404]e"年"m"月"d"日"',"zh-cn":'m"月"d"日"',"ja-jp":'[$-411]ggge"年"m"月"d"日"',"ko-kr":"mm-dd"},29:{"zh-tw":'[$-404]e"年"m"月"d"日"',"zh-cn":'m"月"d"日"',"ja-jp":'[$-411]ggge"年"m"月"d"日"',"ko-kr":"mm-dd"},30:{"zh-tw":"m/d/yy ","zh-cn":"m-d-yy","ja-jp":"m/d/yy","ko-kr":"mm-dd-yy"},31:{"zh-tw":'yyyy"年"m"月"d"日"',"zh-cn":'yyyy"年"m"月"d"日"',"ja-jp":'yyyy"年"m"月"d"日"',"ko-kr":'yyyy"년" mm"월" dd"일"'},32:{"zh-tw":'hh"時"mm"分"',"zh-cn":'h"时"mm"分"',"ja-jp":'h"時"mm"分"',"ko-kr":'h"시" mm"분"'},33:{"zh-tw":'hh"時"mm"分"ss"秒"',"zh-cn":'h"时"mm"分"ss"秒"',"ja-jp":'h"時"mm"分"ss"秒"',"ko-kr":'h"시" mm"분" ss"초"'},34:{"zh-tw":'上午/下午 hh"時"mm"分"',"zh-cn":'上午/下午 h"时"mm"分"',"ja-jp":'yyyy"年"m"月"',"ko-kr":"yyyy-mm-dd"},35:{"zh-tw":'上午/下午 hh"時"mm"分"ss"秒"',"zh-cn":'上午/下午 h"时"mm"分"ss"秒"',"ja-jp":'m"月"d"日"',"ko-kr":"yyyy-mm-dd"},36:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"年"m"月"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"年" mm"月" dd"日"'},37:{f:"#,##0 ;(#,##0)"},38:{f:"#,##0 ;[Red](#,##0)"},39:{f:"#,##0.00 ;(#,##0.00)"},40:{f:"#,##0.00 ;[Red](#,##0.00)"},45:{f:"mm:ss"},46:{f:"[h]:mm:ss"},47:{f:"mmss.0"},48:{f:"##0.0E+0"},49:{f:"@"},50:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"年"m"月"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"年" mm"月" dd"日"'},51:{"zh-tw":'[$-404]e"年"m"月"d"日"',"zh-cn":'m"月"d"日"',"ja-jp":'[$-411]ggge"年"m"月"d"日"',"ko-kr":"mm-dd"},52:{"zh-tw":'上午/下午 hh"時"mm"分"',"zh-cn":'yyyy"年"m"月"',"ja-jp":'yyyy"年"m"月"',"ko-kr":"yyyy-mm-dd"},53:{"zh-tw":'上午/下午 hh"時"mm"分"ss"秒"',"zh-cn":'m"月"d"日"',"ja-jp":'m"月"d"日"',"ko-kr":"yyyy-mm-dd"},54:{"zh-tw":'[$-404]e"年"m"月"d"日"',"zh-cn":'m"月"d"日"',"ja-jp":'[$-411]ggge"年"m"月"d"日"',"ko-kr":"mm-dd"},55:{"zh-tw":'上午/下午 hh"時"mm"分"',"zh-cn":'上午/下午 h"时"mm"分"',"ja-jp":'yyyy"年"m"月"',"ko-kr":"yyyy-mm-dd"},56:{"zh-tw":'上午/下午 hh"時"mm"分"ss"秒"',"zh-cn":'上午/下午 h"时"mm"分"ss"秒"',"ja-jp":'m"月"d"日"',"ko-kr":"yyyy-mm-dd"},57:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"年"m"月"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"年" mm"月" dd"日"'},58:{"zh-tw":'[$-404]e"年"m"月"d"日"',"zh-cn":'m"月"d"日"',"ja-jp":'[$-411]ggge"年"m"月"d"日"',"ko-kr":"mm-dd"},59:{"th-th":"t0"},60:{"th-th":"t0.00"},61:{"th-th":"t#,##0"},62:{"th-th":"t#,##0.00"},67:{"th-th":"t0%"},68:{"th-th":"t0.00%"},69:{"th-th":"t# ?/?"},70:{"th-th":"t# ??/??"},81:{"th-th":"d/m/bb"}}},{}],30:[function(e,t,r){"use strict";t.exports={OfficeDocument:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Worksheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",CalcChain:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/calcChain",SharedStrings:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Styles:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Theme:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Hyperlink:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",Image:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",CoreProperties:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",ExtenderProperties:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",Comments:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",VmlDrawing:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Table:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table"}},{}],31:[function(e,t,r){"use strict";function n(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=i(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,s=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw s}}}}function i(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t,r,n,i,o,s){try{var a=e[o](s),l=a.value}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(n,i)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)}))}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function h(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}var d=e("../../utils/parse-sax"),f=e("../../utils/xml-stream"),p=function(){function e(){l(this,e)}return c(e,[{key:"prepare",value:function(){}},{key:"render",value:function(){}},{key:"parseOpen",value:function(e){}},{key:"parseText",value:function(e){}},{key:"parseClose",value:function(e){}},{key:"reconcile",value:function(e,t){}},{key:"reset",value:function(){this.model=null,this.map&&Object.values(this.map).forEach((function(t){t instanceof e?t.reset():t.xform&&t.xform.reset()}))}},{key:"mergeModel",value:function(e){this.model=Object.assign(this.model||{},e)}},{key:"parse",value:function(){var e=a(regeneratorRuntime.mark((function e(t){var r,i,o,s,a,l,u,c,d,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,i=!1,e.prev=2,s=h(t);case 4:return e.next=6,s.next();case 6:return a=e.sent,r=a.done,e.next=10,a.value;case 10:if(l=e.sent,r){e.next=42;break}u=n(l),e.prev=14,u.s();case 16:if((c=u.n()).done){e.next=31;break}if(d=c.value,f=d.eventType,p=d.value,"opentag"!==f){e.next=22;break}this.parseOpen(p),e.next=29;break;case 22:if("text"!==f){e.next=26;break}this.parseText(p),e.next=29;break;case 26:if("closetag"!==f){e.next=29;break}if(this.parseClose(p.name)){e.next=29;break}return e.abrupt("return",this.model);case 29:e.next=16;break;case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(14),u.e(e.t0);case 36:return e.prev=36,u.f(),e.finish(36);case 39:r=!0,e.next=4;break;case 42:e.next=48;break;case 44:e.prev=44,e.t1=e.catch(2),i=!0,o=e.t1;case 48:if(e.prev=48,e.prev=49,r||null==s.return){e.next=53;break}return e.next=53,s.return();case 53:if(e.prev=53,!i){e.next=56;break}throw o;case 56:return e.finish(53);case 57:return e.finish(48);case 58:return e.abrupt("return",this.model);case 59:case"end":return e.stop()}}),e,this,[[2,44,48,58],[14,33,36,39],[49,,53,57]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"parseStream",value:function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.parse(d(t)));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"toXml",value:function(e){var t=new f;return this.render(t,e),t.xml}},{key:"xml",get:function(){return this.toXml(this.model)}}],[{key:"toAttribute",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0===e){if(r)return t}else if(r||e!==t)return e.toString()}},{key:"toStringAttribute",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.toAttribute(t,r,n)}},{key:"toStringValue",value:function(e,t){return void 0===e?t:e}},{key:"toBoolAttribute",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0===e){if(r)return t}else if(r||e!==t)return e?"1":"0"}},{key:"toBoolValue",value:function(e,t){return void 0===e?t:"1"===e}},{key:"toIntAttribute",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.toAttribute(t,r,n)}},{key:"toIntValue",value:function(e,t){return void 0===e?t:parseInt(e,10)}},{key:"toFloatAttribute",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.toAttribute(t,r,n)}},{key:"toFloatValue",value:function(e,t){return void 0===e?t:parseFloat(e)}}]),e}();t.exports=p},{"../../utils/parse-sax":21,"../../utils/xml-stream":27}],32:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../base-xform"),m=e("../../../utils/col-cache"),g=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){e.openNode("definedName",{name:t.name,localSheetId:t.localSheetId}),e.writeText(t.ranges.join(",")),e.closeNode()}},{key:"parseOpen",value:function(e){return"definedName"===e.name&&(this._parsedName=e.attributes.name,this._parsedLocalSheetId=e.attributes.localSheetId,this._parsedText=[],!0)}},{key:"parseText",value:function(e){this._parsedText.push(e)}},{key:"parseClose",value:function(){return this.model={name:this._parsedName,ranges:y(this._parsedText.join(""))},void 0!==this._parsedLocalSheetId&&(this.model.localSheetId=parseInt(this._parsedLocalSheetId,10)),!1}}]),r}(p);function v(e){try{return m.decodeEx(e),!0}catch(e){return!1}}function y(e){var t=[],r=!1,n="";return e.split(",").forEach((function(e){if(e){var i=(e.match(/'/g)||[]).length;if(i){var o=i%2==0;!r&&o&&v(e)?t.push(e):r&&!o?(r=!1,v(n+e)&&t.push(n+e),n=""):(r=!0,n+="".concat(e,","))}else r?n+="".concat(e,","):v(e)&&t.push(e)}})),t}t.exports=g},{"../../../utils/col-cache":19,"../base-xform":31}],33:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../../utils/utils"),m=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){e.leafNode("sheet",{sheetId:t.id,name:t.name,state:t.state,"r:id":t.rId})}},{key:"parseOpen",value:function(e){return"sheet"===e.name&&(this.model={name:p.xmlDecode(e.attributes.name),id:parseInt(e.attributes.sheetId,10),state:e.attributes.state,rId:e.attributes["r:id"]},!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}}]),r}(e("../base-xform"));t.exports=m},{"../../../utils/utils":26,"../base-xform":31}],34:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){e.leafNode("calcPr",{calcId:171027,fullCalcOnLoad:t.fullCalcOnLoad?1:void 0})}},{key:"parseOpen",value:function(e){return"calcPr"===e.name&&(this.model={},!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],35:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){e.leafNode("workbookPr",{date1904:t.date1904?1:void 0,defaultThemeVersion:164011,filterPrivacy:1})}},{key:"parseOpen",value:function(e){return"workbookPr"===e.name&&(this.model={date1904:"1"===e.attributes.date1904},!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],36:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){var r={xWindow:t.x||0,yWindow:t.y||0,windowWidth:t.width||12e3,windowHeight:t.height||24e3,firstSheet:t.firstSheet,activeTab:t.activeTab};t.visibility&&"visible"!==t.visibility&&(r.visibility=t.visibility),e.leafNode("workbookView",r)}},{key:"parseOpen",value:function(e){if("workbookView"===e.name){var t=this.model={},r=function(e,r,n){var i=void 0!==r?t[e]=r:n;void 0!==i&&(t[e]=i)},n=function(e,r,n){var i=void 0!==r?t[e]=parseInt(r,10):n;void 0!==i&&(t[e]=i)};return n("x",e.attributes.xWindow,0),n("y",e.attributes.yWindow,0),n("width",e.attributes.windowWidth,25e3),n("height",e.attributes.windowHeight,1e4),r("visibility",e.attributes.visibility,"visible"),n("activeTab",e.attributes.activeTab,void 0),n("firstSheet",e.attributes.firstSheet,void 0),!0}return!1}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],37:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../../utils/under-dash"),m=e("../../../utils/col-cache"),g=e("../../../utils/xml-stream"),v=e("../base-xform"),y=e("../static-xform"),b=e("../list-xform"),w=e("./defined-name-xform"),C=e("./sheet-xform"),_=e("./workbook-view-xform"),S=e("./workbook-properties-xform"),x=e("./workbook-calc-properties-xform"),k=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={fileVersion:r.STATIC_XFORMS.fileVersion,workbookPr:new S,bookViews:new b({tag:"bookViews",count:!1,childXform:new _}),sheets:new b({tag:"sheets",count:!1,childXform:new C}),definedNames:new b({tag:"definedNames",count:!1,childXform:new w}),calcPr:new x},e}return s(r,[{key:"prepare",value:function(e){e.sheets=e.worksheets;var t=[],r=0;e.sheets.forEach((function(e){if(e.pageSetup&&e.pageSetup.printArea&&e.pageSetup.printArea.split("&&").forEach((function(n){var i=n.split(":"),o={name:"_xlnm.Print_Area",ranges:["'".concat(e.name,"'!$").concat(i[0],":$").concat(i[1])],localSheetId:r};t.push(o)})),e.pageSetup&&(e.pageSetup.printTitlesRow||e.pageSetup.printTitlesColumn)){var n=[];if(e.pageSetup.printTitlesColumn){var i=e.pageSetup.printTitlesColumn.split(":");n.push("'".concat(e.name,"'!$").concat(i[0],":$").concat(i[1]))}if(e.pageSetup.printTitlesRow){var o=e.pageSetup.printTitlesRow.split(":");n.push("'".concat(e.name,"'!$").concat(o[0],":$").concat(o[1]))}var s={name:"_xlnm.Print_Titles",ranges:n,localSheetId:r};t.push(s)}r++})),t.length&&(e.definedNames=e.definedNames.concat(t)),(e.media||[]).forEach((function(e,t){e.name=e.type+(t+1)}))}},{key:"render",value:function(e,t){e.openXml(g.StdDocAttributes),e.openNode("workbook",r.WORKBOOK_ATTRIBUTES),this.map.fileVersion.render(e),this.map.workbookPr.render(e,t.properties),this.map.bookViews.render(e,t.views),this.map.sheets.render(e,t.sheets),this.map.definedNames.render(e,t.definedNames),this.map.calcPr.render(e,t.calcProperties),e.closeNode()}},{key:"parseOpen",value:function(e){return this.parser?(this.parser.parseOpen(e),!0):("workbook"===e.name||(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e)),!0)}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):"workbook"!==e||(this.model={sheets:this.map.sheets.model,properties:this.map.workbookPr.model||{},views:this.map.bookViews.model,calcProperties:{}},this.map.definedNames.model&&(this.model.definedNames=this.map.definedNames.model),!1)}},{key:"reconcile",value:function(e){var t,r=(e.workbookRels||[]).reduce((function(e,t){return e[t.Id]=t,e}),{}),n=[],i=0;(e.sheets||[]).forEach((function(o){var s=r[o.rId];s&&(t=e.worksheetHash["xl/".concat(s.Target.replace(/^(\s|\/xl\/)+/,""))])&&(t.name=o.name,t.id=o.id,t.state=o.state,n[i++]=t)}));var o=[];p.each(e.definedNames,(function(e){if("_xlnm.Print_Area"===e.name){if(t=n[e.localSheetId]){t.pageSetup||(t.pageSetup={});var r=m.decodeEx(e.ranges[0]);t.pageSetup.printArea=t.pageSetup.printArea?"".concat(t.pageSetup.printArea,"&&").concat(r.dimensions):r.dimensions}}else if("_xlnm.Print_Titles"===e.name){if(t=n[e.localSheetId]){t.pageSetup||(t.pageSetup={});var i=e.ranges.join(","),s=/\$/g,a=/\$\d+:\$\d+/,l=i.match(a);if(l&&l.length){var u=l[0];t.pageSetup.printTitlesRow=u.replace(s,"")}var c=/\$[A-Z]+:\$[A-Z]+/,h=i.match(c);if(h&&h.length){var d=h[0];t.pageSetup.printTitlesColumn=d.replace(s,"")}}}else o.push(e)})),e.definedNames=o,e.media.forEach((function(e,t){e.index=t}))}}]),r}(v);k.WORKBOOK_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x15","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},k.STATIC_XFORMS={fileVersion:new y({tag:"fileVersion",$:{appName:"xl",lastEdited:5,lowestEdited:5,rupBuild:9303}})},t.exports=k},{"../../../utils/col-cache":19,"../../../utils/under-dash":25,"../../../utils/xml-stream":27,"../base-xform":31,"../list-xform":70,"../static-xform":119,"./defined-name-xform":32,"./sheet-xform":33,"./workbook-calc-properties-xform":34,"./workbook-properties-xform":35,"./workbook-view-xform":36}],38:[function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=e("../strings/rich-text-xform"),a=e("../../../utils/utils"),l=e("../base-xform"),u=t.exports=function(e){this.model=e};a.inherits(u,l,{get tag(){return"r"},get richTextXform(){return this._richTextXform||(this._richTextXform=new s),this._richTextXform},render:function(e,t){var r=this;t=t||this.model,e.openNode("comment",{ref:t.ref,authorId:0}),e.openNode("text"),t&&t.note&&t.note.texts&&t.note.texts.forEach((function(t){r.richTextXform.render(e,t)})),e.closeNode(),e.closeNode()},parseOpen:function(e){if(this.parser)return this.parser.parseOpen(e),!0;switch(e.name){case"comment":return this.model=i({type:"note",note:{texts:[]}},e.attributes),!0;case"r":return this.parser=this.richTextXform,this.parser.parseOpen(e),!0;default:return!1}},parseText:function(e){this.parser&&this.parser.parseText(e)},parseClose:function(e){switch(e){case"comment":return!1;case"r":return this.model.note.texts.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(e),!0}}})},{"../../../utils/utils":26,"../base-xform":31,"../strings/rich-text-xform":121}],39:[function(e,t,r){"use strict";var n=e("../../../utils/xml-stream"),i=e("../../../utils/utils"),o=e("../base-xform"),s=e("./comment-xform"),a=t.exports=function(){this.map={comment:new s}};i.inherits(a,o,{COMMENTS_ATTRIBUTES:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},{render:function(e,t){var r=this;t=t||this.model,e.openXml(n.StdDocAttributes),e.openNode("comments",a.COMMENTS_ATTRIBUTES),e.openNode("authors"),e.leafNode("author",null,"Author"),e.closeNode(),e.openNode("commentList"),t.comments.forEach((function(t){r.map.comment.render(e,t)})),e.closeNode(),e.closeNode()},parseOpen:function(e){if(this.parser)return this.parser.parseOpen(e),!0;switch(e.name){case"commentList":return this.model={comments:[]},!0;case"comment":return this.parser=this.map.comment,this.parser.parseOpen(e),!0;default:return!1}},parseText:function(e){this.parser&&this.parser.parseText(e)},parseClose:function(e){switch(e){case"commentList":return!1;case"comment":return this.model.comments.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(e),!0}}})},{"../../../utils/utils":26,"../../../utils/xml-stream":27,"../base-xform":31,"./comment-xform":38}],40:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(e){var n;return i(this,r),(n=t.call(this))._model=e,n}return s(r,[{key:"render",value:function(e,t,r){(t===r[2]||"x:SizeWithCells"===this.tag&&t===r[1])&&e.leafNode(this.tag)}},{key:"parseOpen",value:function(e){return e.name===this.tag&&(this.model={},this.model[this.tag]=!0,!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return this._model&&this._model.tag}}]),r}(e("../../base-xform"));t.exports=p},{"../../base-xform":31}],41:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(e){var n;return i(this,r),(n=t.call(this))._model=e,n}return s(r,[{key:"render",value:function(e,t){e.leafNode(this.tag,null,t)}},{key:"parseOpen",value:function(e){return e.name===this.tag&&(this.text="",!0)}},{key:"parseText",value:function(e){this.text=e}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return this._model&&this._model.tag}}]),r}(e("../../base-xform"));t.exports=p},{"../../base-xform":31}],42:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"getAnchorRect",value:function(e){var t=Math.floor(e.left),r=Math.floor(68*(e.left-t)),n=Math.floor(e.top),i=Math.floor(18*(e.top-n)),o=Math.floor(e.right),s=Math.floor(68*(e.right-o)),a=Math.floor(e.bottom);return[t,r,n,i,o,s,a,Math.floor(18*(e.bottom-a))]}},{key:"getDefaultRect",value:function(e){var t=e.col,r=6,n=Math.max(e.row-2,0);return[t,r,n,14,t+2,2,n+4,16]}},{key:"render",value:function(e,t){var r=t.anchor?this.getAnchorRect(t.anchor):this.getDefaultRect(t.refAddress);e.leafNode("x:Anchor",null,r.join(", "))}},{key:"parseOpen",value:function(e){return e.name===this.tag&&(this.text="",!0)}},{key:"parseText",value:function(e){this.text=e}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return"x:Anchor"}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],43:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../base-xform"),m=e("./vml-anchor-xform"),g=e("./style/vml-protection-xform"),v=e("./style/vml-position-xform"),y=["twoCells","oneCells","absolute"],b=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={"x:Anchor":new m,"x:Locked":new g({tag:"x:Locked"}),"x:LockText":new g({tag:"x:LockText"}),"x:SizeWithCells":new v({tag:"x:SizeWithCells"}),"x:MoveWithCells":new v({tag:"x:MoveWithCells"})},e}return s(r,[{key:"render",value:function(e,t){var r=t.note,n=r.protection,i=r.editAs;e.openNode(this.tag,{ObjectType:"Note"}),this.map["x:MoveWithCells"].render(e,i,y),this.map["x:SizeWithCells"].render(e,i,y),this.map["x:Anchor"].render(e,t),this.map["x:Locked"].render(e,n.locked),e.leafNode("x:AutoFill",null,"False"),this.map["x:LockText"].render(e,n.lockText),e.leafNode("x:Row",null,t.refAddress.row-1),e.leafNode("x:Column",null,t.refAddress.col-1),e.closeNode()}},{key:"parseOpen",value:function(e){return e.name===this.tag?(this.reset(),this.model={anchor:[],protection:{},editAs:""}):(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e)),!0}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):e!==this.tag||(this.normalizeModel(),!1)}},{key:"normalizeModel",value:function(){var e=Object.assign({},this.map["x:MoveWithCells"].model,this.map["x:SizeWithCells"].model),t=Object.keys(e).length;this.model.editAs=y[t],this.model.anchor=this.map["x:Anchor"].text,this.model.protection.locked=this.map["x:Locked"].text,this.model.protection.lockText=this.map["x:LockText"].text}},{key:"tag",get:function(){return"x:ClientData"}}]),r}(p);t.exports=b},{"../base-xform":31,"./style/vml-position-xform":40,"./style/vml-protection-xform":41,"./vml-anchor-xform":42}],44:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../../utils/xml-stream"),m=e("../base-xform"),g=e("./vml-shape-xform"),v=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={"v:shape":new g},e}return s(r,[{key:"render",value:function(e,t){var n=this;e.openXml(p.StdDocAttributes),e.openNode(this.tag,r.DRAWING_ATTRIBUTES),e.openNode("o:shapelayout",{"v:ext":"edit"}),e.leafNode("o:idmap",{"v:ext":"edit",data:1}),e.closeNode(),e.openNode("v:shapetype",{id:"_x0000_t202",coordsize:"21600,21600","o:spt":202,path:"m,l,21600r21600,l21600,xe"}),e.leafNode("v:stroke",{joinstyle:"miter"}),e.leafNode("v:path",{gradientshapeok:"t","o:connecttype":"rect"}),e.closeNode(),t.comments.forEach((function(t,r){n.map["v:shape"].render(e,t,r)})),e.closeNode()}},{key:"parseOpen",value:function(e){return this.parser?(this.parser.parseOpen(e),!0):(e.name===this.tag?(this.reset(),this.model={comments:[]}):(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e)),!0)}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){return this.parser?(this.parser.parseClose(e)||(this.model.comments.push(this.parser.model),this.parser=void 0),!0):e!==this.tag}},{key:"reconcile",value:function(e,t){var r=this;e.anchors.forEach((function(e){e.br?r.map["xdr:twoCellAnchor"].reconcile(e,t):r.map["xdr:oneCellAnchor"].reconcile(e,t)}))}},{key:"tag",get:function(){return"xml"}}]),r}(m);v.DRAWING_ATTRIBUTES={"xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:x":"urn:schemas-microsoft-com:office:excel"},t.exports=v},{"../../../utils/xml-stream":27,"../base-xform":31,"./vml-shape-xform":45}],45:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../base-xform"),m=e("./vml-textbox-xform"),g=e("./vml-client-data-xform"),v=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={"v:textbox":new m,"x:ClientData":new g},e}return s(r,[{key:"render",value:function(e,t,n){e.openNode("v:shape",r.V_SHAPE_ATTRIBUTES(t,n)),e.leafNode("v:fill",{color2:"infoBackground [80]"}),e.leafNode("v:shadow",{color:"none [81]",obscured:"t"}),e.leafNode("v:path",{"o:connecttype":"none"}),this.map["v:textbox"].render(e,t),this.map["x:ClientData"].render(e,t),e.closeNode()}},{key:"parseOpen",value:function(e){return this.parser?(this.parser.parseOpen(e),!0):(e.name===this.tag?(this.reset(),this.model={margins:{insetmode:e.attributes["o:insetmode"]},anchor:"",editAs:"",protection:{}}):(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e)),!0)}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):e!==this.tag||(this.model.margins.inset=this.map["v:textbox"].model&&this.map["v:textbox"].model.inset,this.model.protection=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.protection,this.model.anchor=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.anchor,this.model.editAs=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.editAs,!1)}},{key:"tag",get:function(){return"v:shape"}}]),r}(p);v.V_SHAPE_ATTRIBUTES=function(e,t){return{id:"_x0000_s".concat(1025+t),type:"#_x0000_t202",style:"position:absolute; margin-left:105.3pt;margin-top:10.5pt;width:97.8pt;height:59.1pt;z-index:1;visibility:hidden",fillcolor:"infoBackground [80]",strokecolor:"none [81]","o:insetmode":e.note.margins&&e.note.margins.insetmode}},t.exports=v},{"../base-xform":31,"./vml-client-data-xform":43,"./vml-textbox-xform":46}],46:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"conversionUnit",value:function(e,t,r){return"".concat(parseFloat(e)*t.toFixed(2)).concat(r)}},{key:"reverseConversionUnit",value:function(e){var t=this;return(e||"").split(",").map((function(e){return Number(parseFloat(t.conversionUnit(parseFloat(e),.1,"")).toFixed(2))}))}},{key:"render",value:function(e,t){var r=this,n={style:"mso-direction-alt:auto"};if(t&&t.note){var i=(t.note&&t.note.margins).inset;Array.isArray(i)&&(i=i.map((function(e){return r.conversionUnit(e,10,"mm")})).join(",")),i&&(n.inset=i)}e.openNode("v:textbox",n),e.leafNode("div",{style:"text-align:left"}),e.closeNode()}},{key:"parseOpen",value:function(e){return e.name!==this.tag||(this.model={inset:this.reverseConversionUnit(e.attributes.inset)},!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(e){return e!==this.tag}},{key:"tag",get:function(){return"v:textbox"}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],47:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"createNewModel",value:function(e){return{}}},{key:"parseOpen",value:function(e){return this.parser=this.parser||this.map[e.name],this.parser?(this.parser.parseOpen(e),!0):e.name===this.tag&&(this.model=this.createNewModel(e),!0)}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"onParserClose",value:function(e,t){this.model[e]=t.model}},{key:"parseClose",value:function(e){return this.parser?(this.parser.parseClose(e)||(this.onParserClose(e,this.parser),this.parser=void 0),!0):e!==this.tag}}]),r}(e("./base-xform"));t.exports=p},{"./base-xform":31}],48:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){e.openNode("HeadingPairs"),e.openNode("vt:vector",{size:2,baseType:"variant"}),e.openNode("vt:variant"),e.leafNode("vt:lpstr",void 0,"Worksheets"),e.closeNode(),e.openNode("vt:variant"),e.leafNode("vt:i4",void 0,t.length),e.closeNode(),e.closeNode(),e.closeNode()}},{key:"parseOpen",value:function(e){return"HeadingPairs"===e.name}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(e){return"HeadingPairs"!==e}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],49:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){e.openNode("TitlesOfParts"),e.openNode("vt:vector",{size:t.length,baseType:"lpstr"}),t.forEach((function(t){e.leafNode("vt:lpstr",void 0,t.name)})),e.closeNode(),e.closeNode()}},{key:"parseOpen",value:function(e){return"TitlesOfParts"===e.name}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(e){return"TitlesOfParts"!==e}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],50:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../../utils/xml-stream"),m=e("../base-xform"),g=e("../simple/string-xform"),v=e("./app-heading-pairs-xform"),y=e("./app-titles-of-parts-xform"),b=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={Company:new g({tag:"Company"}),Manager:new g({tag:"Manager"}),HeadingPairs:new v,TitleOfParts:new y},e}return s(r,[{key:"render",value:function(e,t){e.openXml(p.StdDocAttributes),e.openNode("Properties",r.PROPERTY_ATTRIBUTES),e.leafNode("Application",void 0,"Microsoft Excel"),e.leafNode("DocSecurity",void 0,"0"),e.leafNode("ScaleCrop",void 0,"false"),this.map.HeadingPairs.render(e,t.worksheets),this.map.TitleOfParts.render(e,t.worksheets),this.map.Company.render(e,t.company||""),this.map.Manager.render(e,t.manager),e.leafNode("LinksUpToDate",void 0,"false"),e.leafNode("SharedDoc",void 0,"false"),e.leafNode("HyperlinksChanged",void 0,"false"),e.leafNode("AppVersion",void 0,"16.0300"),e.closeNode()}},{key:"parseOpen",value:function(e){return this.parser?(this.parser.parseOpen(e),!0):"Properties"===e.name||(this.parser=this.map[e.name],!!this.parser&&(this.parser.parseOpen(e),!0))}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):"Properties"!==e||(this.model={worksheets:this.map.TitleOfParts.model,company:this.map.Company.model,manager:this.map.Manager.model},!1)}}]),r}(m);b.DateFormat=function(e){return e.toISOString().replace(/[.]\d{3,6}/,"")},b.DateAttrs={"xsi:type":"dcterms:W3CDTF"},b.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties","xmlns:vt":"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"},t.exports=b},{"../../../utils/xml-stream":27,"../base-xform":31,"../simple/string-xform":118,"./app-heading-pairs-xform":48,"./app-titles-of-parts-xform":49}],51:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../../utils/xml-stream"),m=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){e.openXml(p.StdDocAttributes),e.openNode("Types",r.PROPERTY_ATTRIBUTES);var n={};(t.media||[]).forEach((function(t){if("image"===t.type){var r=t.extension;n[r]||(n[r]=!0,e.leafNode("Default",{Extension:r,ContentType:"image/".concat(r)}))}})),e.leafNode("Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),e.leafNode("Default",{Extension:"xml",ContentType:"application/xml"}),e.leafNode("Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),t.worksheets.forEach((function(t){var r="/xl/worksheets/sheet".concat(t.id,".xml");e.leafNode("Override",{PartName:r,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"})})),e.leafNode("Override",{PartName:"/xl/theme/theme1.xml",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml"}),e.leafNode("Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),t.sharedStrings&&t.sharedStrings.count&&e.leafNode("Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),t.tables&&t.tables.forEach((function(t){e.leafNode("Override",{PartName:"/xl/tables/".concat(t.target),ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml"})})),t.drawings&&t.drawings.forEach((function(t){e.leafNode("Override",{PartName:"/xl/drawings/".concat(t.name,".xml"),ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml"})})),t.commentRefs&&(e.leafNode("Default",{Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"}),t.commentRefs.forEach((function(t){var r=t.commentName;e.leafNode("Override",{PartName:"/xl/".concat(r,".xml"),ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml"})}))),e.leafNode("Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),e.leafNode("Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),e.closeNode()}},{key:"parseOpen",value:function(){return!1}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}}]),r}(e("../base-xform"));m.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"},t.exports=m},{"../../../utils/xml-stream":27,"../base-xform":31}],52:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../../utils/xml-stream"),m=e("../base-xform"),g=e("../simple/date-xform"),v=e("../simple/string-xform"),y=e("../simple/integer-xform"),b=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={"dc:creator":new v({tag:"dc:creator"}),"dc:title":new v({tag:"dc:title"}),"dc:subject":new v({tag:"dc:subject"}),"dc:description":new v({tag:"dc:description"}),"dc:identifier":new v({tag:"dc:identifier"}),"dc:language":new v({tag:"dc:language"}),"cp:keywords":new v({tag:"cp:keywords"}),"cp:category":new v({tag:"cp:category"}),"cp:lastModifiedBy":new v({tag:"cp:lastModifiedBy"}),"cp:lastPrinted":new g({tag:"cp:lastPrinted",format:r.DateFormat}),"cp:revision":new y({tag:"cp:revision"}),"cp:version":new v({tag:"cp:version"}),"cp:contentStatus":new v({tag:"cp:contentStatus"}),"cp:contentType":new v({tag:"cp:contentType"}),"dcterms:created":new g({tag:"dcterms:created",attrs:r.DateAttrs,format:r.DateFormat}),"dcterms:modified":new g({tag:"dcterms:modified",attrs:r.DateAttrs,format:r.DateFormat})},e}return s(r,[{key:"render",value:function(e,t){e.openXml(p.StdDocAttributes),e.openNode("cp:coreProperties",r.CORE_PROPERTY_ATTRIBUTES),this.map["dc:creator"].render(e,t.creator),this.map["dc:title"].render(e,t.title),this.map["dc:subject"].render(e,t.subject),this.map["dc:description"].render(e,t.description),this.map["dc:identifier"].render(e,t.identifier),this.map["dc:language"].render(e,t.language),this.map["cp:keywords"].render(e,t.keywords),this.map["cp:category"].render(e,t.category),this.map["cp:lastModifiedBy"].render(e,t.lastModifiedBy),this.map["cp:lastPrinted"].render(e,t.lastPrinted),this.map["cp:revision"].render(e,t.revision),this.map["cp:version"].render(e,t.version),this.map["cp:contentStatus"].render(e,t.contentStatus),this.map["cp:contentType"].render(e,t.contentType),this.map["dcterms:created"].render(e,t.created),this.map["dcterms:modified"].render(e,t.modified),e.closeNode()}},{key:"parseOpen",value:function(e){if(this.parser)return this.parser.parseOpen(e),!0;switch(e.name){case"cp:coreProperties":case"coreProperties":return!0;default:if(this.parser=this.map[e.name],this.parser)return this.parser.parseOpen(e),!0;throw new Error("Unexpected xml node in parseOpen: ".concat(JSON.stringify(e)))}}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){if(this.parser)return this.parser.parseClose(e)||(this.parser=void 0),!0;switch(e){case"cp:coreProperties":case"coreProperties":return this.model={creator:this.map["dc:creator"].model,title:this.map["dc:title"].model,subject:this.map["dc:subject"].model,description:this.map["dc:description"].model,identifier:this.map["dc:identifier"].model,language:this.map["dc:language"].model,keywords:this.map["cp:keywords"].model,category:this.map["cp:category"].model,lastModifiedBy:this.map["cp:lastModifiedBy"].model,lastPrinted:this.map["cp:lastPrinted"].model,revision:this.map["cp:revision"].model,contentStatus:this.map["cp:contentStatus"].model,contentType:this.map["cp:contentType"].model,created:this.map["dcterms:created"].model,modified:this.map["dcterms:modified"].model},!1;default:throw new Error("Unexpected xml node in parseClose: ".concat(e))}}}]),r}(m);b.DateFormat=function(e){return e.toISOString().replace(/[.]\d{3}/,"")},b.DateAttrs={"xsi:type":"dcterms:W3CDTF"},b.CORE_PROPERTY_ATTRIBUTES={"xmlns:cp":"http://schemas.openxmlformats.org/package/2006/metadata/core-properties","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:dcterms":"http://purl.org/dc/terms/","xmlns:dcmitype":"http://purl.org/dc/dcmitype/","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance"},t.exports=b},{"../../../utils/xml-stream":27,"../base-xform":31,"../simple/date-xform":116,"../simple/integer-xform":117,"../simple/string-xform":118}],53:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){e.leafNode("Relationship",t)}},{key:"parseOpen",value:function(e){return"Relationship"===e.name&&(this.model=e.attributes,!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],54:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../../utils/xml-stream"),m=e("../base-xform"),g=e("./relationship-xform"),v=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={Relationship:new g},e}return s(r,[{key:"render",value:function(e,t){var n=this;t=t||this._values,e.openXml(p.StdDocAttributes),e.openNode("Relationships",r.RELATIONSHIPS_ATTRIBUTES),t.forEach((function(t){n.map.Relationship.render(e,t)})),e.closeNode()}},{key:"parseOpen",value:function(e){if(this.parser)return this.parser.parseOpen(e),!0;if("Relationships"===e.name)return this.model=[],!0;if(this.parser=this.map[e.name],this.parser)return this.parser.parseOpen(e),!0;throw new Error("Unexpected xml node in parseOpen: ".concat(JSON.stringify(e)))}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){if(this.parser)return this.parser.parseClose(e)||(this.model.push(this.parser.model),this.parser=void 0),!0;if("Relationships"===e)return!1;throw new Error("Unexpected xml node in parseClose: ".concat(e))}}]),r}(m);v.RELATIONSHIPS_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"},t.exports=v},{"../../../utils/xml-stream":27,"../base-xform":31,"./relationship-xform":53}],55:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"parseOpen",value:function(e){return this.parser?(this.parser.parseOpen(e),!0):(e.name===this.tag?(this.reset(),this.model={range:{editAs:e.attributes.editAs||"oneCell"}}):(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e)),!0)}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"reconcilePicture",value:function(e,t){if(e&&e.rId){var r=t.rels[e.rId].Target.match(/.*\/media\/(.+[.][a-zA-Z]{3,4})/);if(r){var n=r[1],i=t.mediaIndex[n];return t.media[i]}}}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],56:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../base-xform"),m=e("./blip-xform"),g=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={"a:blip":new m},e}return s(r,[{key:"render",value:function(e,t){e.openNode(this.tag),this.map["a:blip"].render(e,t),e.openNode("a:stretch"),e.leafNode("a:fillRect"),e.closeNode(),e.closeNode()}},{key:"parseOpen",value:function(e){return this.parser?(this.parser.parseOpen(e),!0):(e.name===this.tag?this.reset():(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e)),!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):e!==this.tag||(this.model=this.map["a:blip"].model,!1)}},{key:"tag",get:function(){return"xdr:blipFill"}}]),r}(p);t.exports=g},{"../base-xform":31,"./blip-xform":57}],57:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){e.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":t.rId,cstate:"print"})}},{key:"parseOpen",value:function(e){return e.name!==this.tag||(this.model={rId:e.attributes["r:embed"]},!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(e){return e!==this.tag}},{key:"tag",get:function(){return"a:blip"}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],58:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e){e.openNode(this.tag),e.leafNode("a:picLocks",{noChangeAspect:"1"}),e.closeNode()}},{key:"parseOpen",value:function(e){return e.name,this.tag,!0}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(e){return e!==this.tag}},{key:"tag",get:function(){return"xdr:cNvPicPr"}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],59:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../base-xform"),m=e("./hlink-click-xform"),g=e("./ext-lst-xform"),v=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={"a:hlinkClick":new m,"a:extLst":new g},e}return s(r,[{key:"render",value:function(e,t){e.openNode(this.tag,{id:t.index,name:"Picture ".concat(t.index)}),this.map["a:hlinkClick"].render(e,t),this.map["a:extLst"].render(e,t),e.closeNode()}},{key:"parseOpen",value:function(e){return this.parser?(this.parser.parseOpen(e),!0):(e.name===this.tag?this.reset():(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e)),!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):e!==this.tag||(this.model=this.map["a:hlinkClick"].model,!1)}},{key:"tag",get:function(){return"xdr:cNvPr"}}]),r}(p);t.exports=v},{"../base-xform":31,"./ext-lst-xform":62,"./hlink-click-xform":64}],60:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../base-xform"),m=e("../simple/integer-xform"),g=function(e){a(r,e);var t=u(r);function r(e){var n;return i(this,r),(n=t.call(this)).tag=e.tag,n.map={"xdr:col":new m({tag:"xdr:col",zero:!0}),"xdr:colOff":new m({tag:"xdr:colOff",zero:!0}),"xdr:row":new m({tag:"xdr:row",zero:!0}),"xdr:rowOff":new m({tag:"xdr:rowOff",zero:!0})},n}return s(r,[{key:"render",value:function(e,t){e.openNode(this.tag),this.map["xdr:col"].render(e,t.nativeCol),this.map["xdr:colOff"].render(e,t.nativeColOff),this.map["xdr:row"].render(e,t.nativeRow),this.map["xdr:rowOff"].render(e,t.nativeRowOff),e.closeNode()}},{key:"parseOpen",value:function(e){return this.parser?(this.parser.parseOpen(e),!0):(e.name===this.tag?this.reset():(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e)),!0)}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):e!==this.tag||(this.model={nativeCol:this.map["xdr:col"].model,nativeColOff:this.map["xdr:colOff"].model,nativeRow:this.map["xdr:row"].model,nativeRowOff:this.map["xdr:rowOff"].model},!1)}}]),r}(p);t.exports=g},{"../base-xform":31,"../simple/integer-xform":117}],61:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../../utils/col-cache"),m=e("../../../utils/xml-stream"),g=e("../base-xform"),v=e("./two-cell-anchor-xform"),y=e("./one-cell-anchor-xform");function b(e){return("string"==typeof e.range?p.decode(e.range):e.range).br?"xdr:twoCellAnchor":"xdr:oneCellAnchor"}var w=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={"xdr:twoCellAnchor":new v,"xdr:oneCellAnchor":new y},e}return s(r,[{key:"prepare",value:function(e){var t=this;e.anchors.forEach((function(e,r){e.anchorType=b(e),t.map[e.anchorType].prepare(e,{index:r})}))}},{key:"render",value:function(e,t){var n=this;e.openXml(m.StdDocAttributes),e.openNode(this.tag,r.DRAWING_ATTRIBUTES),t.anchors.forEach((function(t){n.map[t.anchorType].render(e,t)})),e.closeNode()}},{key:"parseOpen",value:function(e){return this.parser?(this.parser.parseOpen(e),!0):(e.name===this.tag?(this.reset(),this.model={anchors:[]}):(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e)),!0)}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){return this.parser?(this.parser.parseClose(e)||(this.model.anchors.push(this.parser.model),this.parser=void 0),!0):e!==this.tag}},{key:"reconcile",value:function(e,t){var r=this;e.anchors.forEach((function(e){e.br?r.map["xdr:twoCellAnchor"].reconcile(e,t):r.map["xdr:oneCellAnchor"].reconcile(e,t)}))}},{key:"tag",get:function(){return"xdr:wsDr"}}]),r}(g);w.DRAWING_ATTRIBUTES={"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"},t.exports=w},{"../../../utils/col-cache":19,"../../../utils/xml-stream":27,"../base-xform":31,"./one-cell-anchor-xform":66,"./two-cell-anchor-xform":69}],62:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e){e.openNode(this.tag),e.openNode("a:ext",{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}),e.leafNode("a16:creationId",{"xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main",id:"{00000000-0008-0000-0000-000002000000}"}),e.closeNode(),e.closeNode()}},{key:"parseOpen",value:function(e){return e.name,this.tag,!0}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(e){return e!==this.tag}},{key:"tag",get:function(){return"a:extLst"}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],63:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../base-xform"),m=9525,g=function(e){a(r,e);var t=u(r);function r(e){var n;return i(this,r),(n=t.call(this)).tag=e.tag,n.map={},n}return s(r,[{key:"render",value:function(e,t){e.openNode(this.tag);var r=Math.floor(t.width*m),n=Math.floor(t.height*m);e.addAttribute("cx",r),e.addAttribute("cy",n),e.closeNode()}},{key:"parseOpen",value:function(e){return e.name===this.tag&&(this.model={width:parseInt(e.attributes.cx||"0",10)/m,height:parseInt(e.attributes.cy||"0",10)/m},!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}}]),r}(p);t.exports=g},{"../base-xform":31}],64:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){t.hyperlinks&&t.hyperlinks.rId&&e.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:id":t.hyperlinks.rId,tooltip:t.hyperlinks.tooltip})}},{key:"parseOpen",value:function(e){return e.name!==this.tag||(this.model={hyperlinks:{rId:e.attributes["r:id"],tooltip:e.attributes.tooltip}},!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return"a:hlinkClick"}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],65:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../base-xform"),m=e("./c-nv-pr-xform"),g=e("./c-nv-pic-pr-xform"),v=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={"xdr:cNvPr":new m,"xdr:cNvPicPr":new g},e}return s(r,[{key:"render",value:function(e,t){e.openNode(this.tag),this.map["xdr:cNvPr"].render(e,t),this.map["xdr:cNvPicPr"].render(e,t),e.closeNode()}},{key:"parseOpen",value:function(e){return this.parser?(this.parser.parseOpen(e),!0):(e.name===this.tag?this.reset():(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e)),!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):e!==this.tag||(this.model=this.map["xdr:cNvPr"].model,!1)}},{key:"tag",get:function(){return"xdr:nvPicPr"}}]),r}(p);t.exports=v},{"../base-xform":31,"./c-nv-pic-pr-xform":58,"./c-nv-pr-xform":59}],66:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("./base-cell-anchor-xform"),m=e("../static-xform"),g=e("./cell-position-xform"),v=e("./ext-xform"),y=e("./pic-xform"),b=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={"xdr:from":new g({tag:"xdr:from"}),"xdr:ext":new v({tag:"xdr:ext"}),"xdr:pic":new y,"xdr:clientData":new m({tag:"xdr:clientData"})},e}return s(r,[{key:"prepare",value:function(e,t){this.map["xdr:pic"].prepare(e.picture,t)}},{key:"render",value:function(e,t){e.openNode(this.tag,{editAs:t.range.editAs||"oneCell"}),this.map["xdr:from"].render(e,t.range.tl),this.map["xdr:ext"].render(e,t.range.ext),this.map["xdr:pic"].render(e,t.picture),this.map["xdr:clientData"].render(e,{}),e.closeNode()}},{key:"parseClose",value:function(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):e!==this.tag||(this.model.range.tl=this.map["xdr:from"].model,this.model.range.ext=this.map["xdr:ext"].model,this.model.picture=this.map["xdr:pic"].model,!1)}},{key:"reconcile",value:function(e,t){e.medium=this.reconcilePicture(e.picture,t)}},{key:"tag",get:function(){return"xdr:oneCellAnchor"}}]),r}(p);t.exports=b},{"../static-xform":119,"./base-cell-anchor-xform":55,"./cell-position-xform":60,"./ext-xform":63,"./pic-xform":67}],67:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../base-xform"),m=e("../static-xform"),g=e("./blip-fill-xform"),v=e("./nv-pic-pr-xform"),y=e("./sp-pr"),b=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={"xdr:nvPicPr":new v,"xdr:blipFill":new g,"xdr:spPr":new m(y)},e}return s(r,[{key:"prepare",value:function(e,t){e.index=t.index+1}},{key:"render",value:function(e,t){e.openNode(this.tag),this.map["xdr:nvPicPr"].render(e,t),this.map["xdr:blipFill"].render(e,t),this.map["xdr:spPr"].render(e,t),e.closeNode()}},{key:"parseOpen",value:function(e){return this.parser?(this.parser.parseOpen(e),!0):(e.name===this.tag?this.reset():(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e)),!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(e){return this.parser?(this.parser.parseClose(e)||(this.mergeModel(this.parser.model),this.parser=void 0),!0):e!==this.tag}},{key:"tag",get:function(){return"xdr:pic"}}]),r}(p);t.exports=b},{"../base-xform":31,"../static-xform":119,"./blip-fill-xform":56,"./nv-pic-pr-xform":65,"./sp-pr":68}],68:[function(e,t,r){"use strict";t.exports={tag:"xdr:spPr",c:[{tag:"a:xfrm",c:[{tag:"a:off",$:{x:"0",y:"0"}},{tag:"a:ext",$:{cx:"0",cy:"0"}}]},{tag:"a:prstGeom",$:{prst:"rect"},c:[{tag:"a:avLst"}]}]}},{}],69:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("./base-cell-anchor-xform"),m=e("../static-xform"),g=e("./cell-position-xform"),v=e("./pic-xform"),y=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={"xdr:from":new g({tag:"xdr:from"}),"xdr:to":new g({tag:"xdr:to"}),"xdr:pic":new v,"xdr:clientData":new m({tag:"xdr:clientData"})},e}return s(r,[{key:"prepare",value:function(e,t){this.map["xdr:pic"].prepare(e.picture,t)}},{key:"render",value:function(e,t){e.openNode(this.tag,{editAs:t.range.editAs||"oneCell"}),this.map["xdr:from"].render(e,t.range.tl),this.map["xdr:to"].render(e,t.range.br),this.map["xdr:pic"].render(e,t.picture),this.map["xdr:clientData"].render(e,{}),e.closeNode()}},{key:"parseClose",value:function(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):e!==this.tag||(this.model.range.tl=this.map["xdr:from"].model,this.model.range.br=this.map["xdr:to"].model,this.model.picture=this.map["xdr:pic"].model,!1)}},{key:"reconcile",value:function(e,t){e.medium=this.reconcilePicture(e.picture,t)}},{key:"tag",get:function(){return"xdr:twoCellAnchor"}}]),r}(p);t.exports=y},{"../static-xform":119,"./base-cell-anchor-xform":55,"./cell-position-xform":60,"./pic-xform":67}],70:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(e){var n;return i(this,r),(n=t.call(this)).tag=e.tag,n.always=!!e.always,n.count=e.count,n.empty=e.empty,n.$count=e.$count||"count",n.$=e.$,n.childXform=e.childXform,n.maxItems=e.maxItems,n}return s(r,[{key:"prepare",value:function(e,t){var r=this.childXform;e&&e.forEach((function(e,n){t.index=n,r.prepare(e,t)}))}},{key:"render",value:function(e,t){if(this.always||t&&t.length){e.openNode(this.tag,this.$),this.count&&e.addAttribute(this.$count,t&&t.length||0);var r=this.childXform;(t||[]).forEach((function(t,n){r.render(e,t,n)})),e.closeNode()}else this.empty&&e.leafNode(this.tag)}},{key:"parseOpen",value:function(e){return this.parser?(this.parser.parseOpen(e),!0):e.name===this.tag?(this.model=[],!0):!!this.childXform.parseOpen(e)&&(this.parser=this.childXform,!0)}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){if(this.parser){if(!this.parser.parseClose(e)&&(this.model.push(this.parser.model),this.parser=void 0,this.maxItems&&this.model.length>this.maxItems))throw new Error("Max ".concat(this.childXform.tag," count (").concat(this.maxItems,") exceeded"));return!0}return!1}},{key:"reconcile",value:function(e,t){if(e){var r=this.childXform;e.forEach((function(e){r.reconcile(e,t)}))}}}]),r}(e("./base-xform"));t.exports=p},{"./base-xform":31}],71:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../../utils/col-cache"),m=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){if(t)if("string"==typeof t)e.leafNode("autoFilter",{ref:t});else{var r=function(e){return"string"==typeof e?e:p.getAddress(e.row,e.column).address},n=r(t.from),i=r(t.to);n&&i&&e.leafNode("autoFilter",{ref:"".concat(n,":").concat(i)})}}},{key:"parseOpen",value:function(e){"autoFilter"===e.name&&(this.model=e.attributes.ref)}},{key:"tag",get:function(){return"autoFilter"}}]),r}(e("../base-xform"));t.exports=m},{"../../../utils/col-cache":19,"../base-xform":31}],72:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function d(e){var t=m();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var v=e("../../../utils/utils"),y=e("../base-xform"),b=e("../../../doc/range"),w=e("../../../doc/enums"),C=e("../strings/rich-text-xform");function _(e){if(null==e)return w.ValueType.Null;if(e instanceof String||"string"==typeof e)return w.ValueType.String;if("number"==typeof e)return w.ValueType.Number;if("boolean"==typeof e)return w.ValueType.Boolean;if(e instanceof Date)return w.ValueType.Date;if(e.text&&e.hyperlink)return w.ValueType.Hyperlink;if(e.formula)return w.ValueType.Formula;if(e.error)return w.ValueType.Error;throw new Error("I could not understand type of value")}function S(e){return e.type===w.ValueType.Formula?_(e.result):e.type}var x=function(e){c(r,e);var t=d(r);function r(){var e;return a(this,r),(e=t.call(this)).richTextXForm=new C,e}return u(r,[{key:"prepare",value:function(e,t){var r=t.styles.addStyleModel(e.style||{},S(e));switch(r&&(e.styleId=r),e.comment&&t.comments.push(o(o({},e.comment),{},{ref:e.address})),e.type){case w.ValueType.String:case w.ValueType.RichText:t.sharedStrings&&(e.ssId=t.sharedStrings.add(e.value));break;case w.ValueType.Date:t.date1904&&(e.date1904=!0);break;case w.ValueType.Hyperlink:t.sharedStrings&&void 0!==e.text&&null!==e.text&&(e.ssId=t.sharedStrings.add(e.text)),t.hyperlinks.push({address:e.address,target:e.hyperlink,tooltip:e.tooltip});break;case w.ValueType.Merge:t.merges.add(e);break;case w.ValueType.Formula:if(t.date1904&&(e.date1904=!0),"shared"===e.shareType&&(e.si=t.siFormulae++),e.formula)t.formulae[e.address]=e;else if(e.sharedFormula){var n=t.formulae[e.sharedFormula];if(!n)throw new Error("Shared Formula master must exist above and or left of clone for cell ".concat(e.address));void 0===n.si?(n.shareType="shared",n.si=t.siFormulae++,n.range=new b(n.address,e.address)):n.range&&n.range.expandToAddress(e.address),e.si=n.si}}}},{key:"renderFormula",value:function(e,t){var r=null;switch(t.shareType){case"shared":r={t:"shared",ref:t.ref||t.range.range,si:t.si};break;case"array":r={t:"array",ref:t.ref};break;default:void 0!==t.si&&(r={t:"shared",si:t.si})}switch(_(t.result)){case w.ValueType.Null:e.leafNode("f",r,t.formula);break;case w.ValueType.String:e.addAttribute("t","str"),e.leafNode("f",r,t.formula),e.leafNode("v",null,t.result);break;case w.ValueType.Number:e.leafNode("f",r,t.formula),e.leafNode("v",null,t.result);break;case w.ValueType.Boolean:e.addAttribute("t","b"),e.leafNode("f",r,t.formula),e.leafNode("v",null,t.result?1:0);break;case w.ValueType.Error:e.addAttribute("t","e"),e.leafNode("f",r,t.formula),e.leafNode("v",null,t.result.error);break;case w.ValueType.Date:e.leafNode("f",r,t.formula),e.leafNode("v",null,v.dateToExcel(t.result,t.date1904));break;default:throw new Error("I could not understand type of value")}}},{key:"render",value:function(e,t){var r=this;if(t.type!==w.ValueType.Null||t.styleId){switch(e.openNode("c"),e.addAttribute("r",t.address),t.styleId&&e.addAttribute("s",t.styleId),t.type){case w.ValueType.Null:break;case w.ValueType.Number:e.leafNode("v",null,t.value);break;case w.ValueType.Boolean:e.addAttribute("t","b"),e.leafNode("v",null,t.value?"1":"0");break;case w.ValueType.Error:e.addAttribute("t","e"),e.leafNode("v",null,t.value.error);break;case w.ValueType.String:case w.ValueType.RichText:void 0!==t.ssId?(e.addAttribute("t","s"),e.leafNode("v",null,t.ssId)):t.value&&t.value.richText?(e.addAttribute("t","inlineStr"),e.openNode("is"),t.value.richText.forEach((function(t){r.richTextXForm.render(e,t)})),e.closeNode("is")):(e.addAttribute("t","str"),e.leafNode("v",null,t.value));break;case w.ValueType.Date:e.leafNode("v",null,v.dateToExcel(t.value,t.date1904));break;case w.ValueType.Hyperlink:void 0!==t.ssId?(e.addAttribute("t","s"),e.leafNode("v",null,t.ssId)):(e.addAttribute("t","str"),e.leafNode("v",null,t.text));break;case w.ValueType.Formula:this.renderFormula(e,t);case w.ValueType.Merge:}e.closeNode()}}},{key:"parseOpen",value:function(e){if(this.parser)return this.parser.parseOpen(e),!0;switch(e.name){case"c":return this.model={address:e.attributes.r},this.t=e.attributes.t,e.attributes.s&&(this.model.styleId=parseInt(e.attributes.s,10)),!0;case"f":return this.currentNode="f",this.model.si=e.attributes.si,this.model.shareType=e.attributes.t,this.model.ref=e.attributes.ref,!0;case"v":return this.currentNode="v",!0;case"t":return this.currentNode="t",!0;case"r":return this.parser=this.richTextXForm,this.parser.parseOpen(e),!0;default:return!1}}},{key:"parseText",value:function(e){if(this.parser)this.parser.parseText(e);else switch(this.currentNode){case"f":this.model.formula=this.model.formula?this.model.formula+e:e;break;case"v":case"t":this.model.value&&this.model.value.richText?this.model.value.richText.text=this.model.value.richText.text?this.model.value.richText.text+e:e:this.model.value=this.model.value?this.model.value+e:e}}},{key:"parseClose",value:function(e){switch(e){case"c":var t=this.model;if(t.formula||t.shareType)t.type=w.ValueType.Formula,t.value&&("str"===this.t?t.result=v.xmlDecode(t.value):"b"===this.t?t.result=0!==parseInt(t.value,10):"e"===this.t?t.result={error:t.value}:t.result=parseFloat(t.value),t.value=void 0);else if(void 0!==t.value)switch(this.t){case"s":t.type=w.ValueType.String,t.value=parseInt(t.value,10);break;case"str":t.type=w.ValueType.String,t.value=v.xmlDecode(t.value);break;case"inlineStr":t.type=w.ValueType.String;break;case"b":t.type=w.ValueType.Boolean,t.value=0!==parseInt(t.value,10);break;case"e":t.type=w.ValueType.Error,t.value={error:t.value};break;default:t.type=w.ValueType.Number,t.value=parseFloat(t.value)}else t.styleId?t.type=w.ValueType.Null:t.type=w.ValueType.Merge;return!1;case"f":case"v":case"is":return this.currentNode=void 0,!0;case"t":return this.parser?(this.parser.parseClose(e),!0):(this.currentNode=void 0,!0);case"r":return this.model.value=this.model.value||{},this.model.value.richText=this.model.value.richText||[],this.model.value.richText.push(this.parser.model),this.parser=void 0,this.currentNode=void 0,!0;default:return!!this.parser&&(this.parser.parseClose(e),!0)}}},{key:"reconcile",value:function(e,t){var r=e.styleId&&t.styles&&t.styles.getStyleModel(e.styleId);switch(r&&(e.style=r),void 0!==e.styleId&&(e.styleId=void 0),e.type){case w.ValueType.String:"number"==typeof e.value&&t.sharedStrings&&(e.value=t.sharedStrings.getString(e.value)),e.value.richText&&(e.type=w.ValueType.RichText);break;case w.ValueType.Number:r&&v.isDateFmt(r.numFmt)&&(e.type=w.ValueType.Date,e.value=v.excelToDate(e.value,t.date1904));break;case w.ValueType.Formula:void 0!==e.result&&r&&v.isDateFmt(r.numFmt)&&(e.result=v.excelToDate(e.result,t.date1904)),"shared"===e.shareType&&(e.ref?t.formulae[e.si]=e.address:(e.sharedFormula=t.formulae[e.si],delete e.shareType),delete e.si)}var n=t.hyperlinkMap[e.address];n&&(e.type===w.ValueType.Formula?(e.text=e.result,e.result=void 0):(e.text=e.value,e.value=void 0),e.type=w.ValueType.Hyperlink,e.hyperlink=n);var i=t.commentsMap&&t.commentsMap[e.address];i&&(e.comment=i)}},{key:"tag",get:function(){return"c"}}]),r}(y);t.exports=x},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/utils":26,"../base-xform":31,"../strings/rich-text-xform":121}],73:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../base-xform"),m=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){e.leafNode(this.tag,{iconSet:t.iconSet,iconId:t.iconId})}},{key:"parseOpen",value:function(e){var t=e.attributes;this.model={iconSet:t.iconSet,iconId:p.toIntValue(t.iconId)}}},{key:"parseClose",value:function(e){return e!==this.tag}},{key:"tag",get:function(){return"x14:cfIcon"}}]),r}(p);t.exports=m},{"../../base-xform":31}],74:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("uuid").v4,m=e("../../base-xform"),g=e("../../composite-xform"),v=e("./databar-ext-xform"),y=e("./icon-set-ext-xform"),b={"3Triangles":!0,"3Stars":!0,"5Boxes":!0},w=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={"x14:dataBar":e.databarXform=new v,"x14:iconSet":e.iconSetXform=new y},e}return s(r,[{key:"prepare",value:function(e){r.isExt(e)&&(e.x14Id="{".concat(p(),"}").toUpperCase())}},{key:"render",value:function(e,t){if(r.isExt(t))switch(t.type){case"dataBar":this.renderDataBar(e,t);break;case"iconSet":this.renderIconSet(e,t)}}},{key:"renderDataBar",value:function(e,t){e.openNode(this.tag,{type:"dataBar",id:t.x14Id}),this.databarXform.render(e,t),e.closeNode()}},{key:"renderIconSet",value:function(e,t){e.openNode(this.tag,{type:"iconSet",priority:t.priority,id:t.x14Id||"{".concat(p(),"}")}),this.iconSetXform.render(e,t),e.closeNode()}},{key:"createNewModel",value:function(e){var t=e.attributes;return{type:t.type,x14Id:t.id,priority:m.toIntValue(t.priority)}}},{key:"onParserClose",value:function(e,t){Object.assign(this.model,t.model)}},{key:"tag",get:function(){return"x14:cfRule"}}],[{key:"isExt",value:function(e){return"dataBar"===e.type?v.isExt(e):!("iconSet"!==e.type||!e.custom&&!b[e.iconSet])}}]),r}(g);t.exports=w},{"../../base-xform":31,"../../composite-xform":47,"./databar-ext-xform":78,"./icon-set-ext-xform":80,uuid:526}],75:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../composite-xform"),m=e("./f-ext-xform"),g=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={"xm:f":e.fExtXform=new m},e}return s(r,[{key:"render",value:function(e,t){e.openNode(this.tag,{type:t.type}),void 0!==t.value&&this.fExtXform.render(e,t.value),e.closeNode()}},{key:"createNewModel",value:function(e){return{type:e.attributes.type}}},{key:"onParserClose",value:function(e,t){"xm:f"===e&&(this.model.value=t.model?parseFloat(t.model):0)}},{key:"tag",get:function(){return"x14:cfvo"}}]),r}(p);t.exports=g},{"../../composite-xform":47,"./f-ext-xform":79}],76:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../composite-xform"),m=e("./sqref-ext-xform"),g=e("./cf-rule-ext-xform"),v=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={"xm:sqref":e.sqRef=new m,"x14:cfRule":e.cfRule=new g},e}return s(r,[{key:"prepare",value:function(e,t){var r=this;e.rules.forEach((function(e){r.cfRule.prepare(e,t)}))}},{key:"render",value:function(e,t){var r=this;t.rules.some(g.isExt)&&(e.openNode(this.tag,{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"}),t.rules.filter(g.isExt).forEach((function(t){return r.cfRule.render(e,t)})),this.sqRef.render(e,t.ref),e.closeNode())}},{key:"createNewModel",value:function(){return{rules:[]}}},{key:"onParserClose",value:function(e,t){switch(e){case"xm:sqref":this.model.ref=t.model;break;case"x14:cfRule":this.model.rules.push(t.model)}}},{key:"tag",get:function(){return"x14:conditionalFormatting"}}]),r}(p);t.exports=v},{"../../composite-xform":47,"./cf-rule-ext-xform":74,"./sqref-ext-xform":81}],77:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../composite-xform"),m=e("./cf-rule-ext-xform"),g=e("./conditional-formatting-ext-xform"),v=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={"x14:conditionalFormatting":e.cfXform=new g},e}return s(r,[{key:"hasContent",value:function(e){return void 0===e.hasExtContent&&(e.hasExtContent=e.some((function(e){return e.rules.some(m.isExt)}))),e.hasExtContent}},{key:"prepare",value:function(e,t){var r=this;e.forEach((function(e){r.cfXform.prepare(e,t)}))}},{key:"render",value:function(e,t){var r=this;this.hasContent(t)&&(e.openNode(this.tag),t.forEach((function(t){return r.cfXform.render(e,t)})),e.closeNode())}},{key:"createNewModel",value:function(){return[]}},{key:"onParserClose",value:function(e,t){this.model.push(t.model)}},{key:"tag",get:function(){return"x14:conditionalFormattings"}}]),r}(p);t.exports=v},{"../../composite-xform":47,"./cf-rule-ext-xform":74,"./conditional-formatting-ext-xform":76}],78:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){return u(e)||l(e,t)||s(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}}function u(e){if(Array.isArray(e))return e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function m(e){var t=y();return function(){var r,n=b(e);if(t){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var w=e("../../base-xform"),C=e("../../composite-xform"),_=e("../../style/color-xform"),S=e("./cfvo-ext-xform"),x=function(e){f(r,e);var t=m(r);function r(){var e;return c(this,r),(e=t.call(this)).map={"x14:cfvo":e.cfvoXform=new S,"x14:borderColor":e.borderColorXform=new _("x14:borderColor"),"x14:negativeBorderColor":e.negativeBorderColorXform=new _("x14:negativeBorderColor"),"x14:negativeFillColor":e.negativeFillColorXform=new _("x14:negativeFillColor"),"x14:axisColor":e.axisColorXform=new _("x14:axisColor")},e}return d(r,[{key:"render",value:function(e,t){var r=this;e.openNode(this.tag,{minLength:w.toIntAttribute(t.minLength,0,!0),maxLength:w.toIntAttribute(t.maxLength,100,!0),border:w.toBoolAttribute(t.border,!1),gradient:w.toBoolAttribute(t.gradient,!0),negativeBarColorSameAsPositive:w.toBoolAttribute(t.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:w.toBoolAttribute(t.negativeBarBorderColorSameAsPositive,!0),axisPosition:w.toAttribute(t.axisPosition,"auto"),direction:w.toAttribute(t.direction,"leftToRight")}),t.cfvo.forEach((function(t){r.cfvoXform.render(e,t)})),this.borderColorXform.render(e,t.borderColor),this.negativeBorderColorXform.render(e,t.negativeBorderColor),this.negativeFillColorXform.render(e,t.negativeFillColor),this.axisColorXform.render(e,t.axisColor),e.closeNode()}},{key:"createNewModel",value:function(e){var t=e.attributes;return{cfvo:[],minLength:w.toIntValue(t.minLength,0),maxLength:w.toIntValue(t.maxLength,100),border:w.toBoolValue(t.border,!1),gradient:w.toBoolValue(t.gradient,!0),negativeBarColorSameAsPositive:w.toBoolValue(t.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:w.toBoolValue(t.negativeBarBorderColorSameAsPositive,!0),axisPosition:w.toStringValue(t.axisPosition,"auto"),direction:w.toStringValue(t.direction,"leftToRight")}}},{key:"onParserClose",value:function(e,t){var r=i(e.split(":"),2)[1];"cfvo"===r?this.model.cfvo.push(t.model):this.model[r]=t.model}},{key:"tag",get:function(){return"x14:dataBar"}}],[{key:"isExt",value:function(e){return!e.gradient}}]),r}(C);t.exports=x},{"../../base-xform":31,"../../composite-xform":47,"../../style/color-xform":127,"./cfvo-ext-xform":75}],79:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){e.leafNode(this.tag,null,t)}},{key:"parseOpen",value:function(){this.model=""}},{key:"parseText",value:function(e){this.model+=e}},{key:"parseClose",value:function(e){return e!==this.tag}},{key:"tag",get:function(){return"xm:f"}}]),r}(e("../../base-xform"));t.exports=p},{"../../base-xform":31}],80:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){return u(e)||l(e,t)||s(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}}function u(e){if(Array.isArray(e))return e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function m(e){var t=y();return function(){var r,n=b(e);if(t){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var w=e("../../base-xform"),C=e("../../composite-xform"),_=e("./cfvo-ext-xform"),S=e("./cf-icon-ext-xform"),x=function(e){f(r,e);var t=m(r);function r(){var e;return c(this,r),(e=t.call(this)).map={"x14:cfvo":e.cfvoXform=new _,"x14:cfIcon":e.cfIconXform=new S},e}return d(r,[{key:"render",value:function(e,t){var r=this;e.openNode(this.tag,{iconSet:w.toStringAttribute(t.iconSet),reverse:w.toBoolAttribute(t.reverse,!1),showValue:w.toBoolAttribute(t.showValue,!0),custom:w.toBoolAttribute(t.icons,!1)}),t.cfvo.forEach((function(t){r.cfvoXform.render(e,t)})),t.icons&&t.icons.forEach((function(t,n){t.iconId=n,r.cfIconXform.render(e,t)})),e.closeNode()}},{key:"createNewModel",value:function(e){var t=e.attributes;return{cfvo:[],iconSet:w.toStringValue(t.iconSet,"3TrafficLights"),reverse:w.toBoolValue(t.reverse,!1),showValue:w.toBoolValue(t.showValue,!0)}}},{key:"onParserClose",value:function(e,t){var r=i(e.split(":"),2)[1];switch(r){case"cfvo":this.model.cfvo.push(t.model);break;case"cfIcon":this.model.icons||(this.model.icons=[]),this.model.icons.push(t.model);break;default:this.model[r]=t.model}}},{key:"tag",get:function(){return"x14:iconSet"}}]),r}(C);t.exports=x},{"../../base-xform":31,"../../composite-xform":47,"./cf-icon-ext-xform":73,"./cfvo-ext-xform":75}],81:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){e.leafNode(this.tag,null,t)}},{key:"parseOpen",value:function(){this.model=""}},{key:"parseText",value:function(e){this.model+=e}},{key:"parseClose",value:function(e){return e!==this.tag}},{key:"tag",get:function(){return"xm:sqref"}}]),r}(e("../../base-xform"));t.exports=p},{"../../base-xform":31}],82:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function d(e){var t=m();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var v=e("../../base-xform"),y=e("../../composite-xform"),b=e("../../../../doc/range"),w=e("./databar-xform"),C=e("./ext-lst-ref-xform"),_=e("./formula-xform"),S=e("./color-scale-xform"),x=e("./icon-set-xform"),k={"3Triangles":!0,"3Stars":!0,"5Boxes":!0},T=function(e){if(e.formulae&&e.formulae[0])return e.formulae[0];var t=new b(e.ref).tl;switch(e.operator){case"containsText":return'NOT(ISERROR(SEARCH("'.concat(e.text,'",').concat(t,")))");case"containsBlanks":return"LEN(TRIM(".concat(t,"))=0");case"notContainsBlanks":return"LEN(TRIM(".concat(t,"))>0");case"containsErrors":return"ISERROR(".concat(t,")");case"notContainsErrors":return"NOT(ISERROR(".concat(t,"))");default:return}},R=function(e){if(e.formulae&&e.formulae[0])return e.formulae[0];var t=new b(e.ref).tl;switch(e.timePeriod){case"thisWeek":return"AND(TODAY()-ROUNDDOWN(".concat(t,",0)<=WEEKDAY(TODAY())-1,ROUNDDOWN(").concat(t,",0)-TODAY()<=7-WEEKDAY(TODAY()))");case"lastWeek":return"AND(TODAY()-ROUNDDOWN(".concat(t,",0)>=(WEEKDAY(TODAY())),TODAY()-ROUNDDOWN(").concat(t,",0)<(WEEKDAY(TODAY())+7))");case"nextWeek":return"AND(ROUNDDOWN(".concat(t,",0)-TODAY()>(7-WEEKDAY(TODAY())),ROUNDDOWN(").concat(t,",0)-TODAY()<(15-WEEKDAY(TODAY())))");case"yesterday":return"FLOOR(".concat(t,",1)=TODAY()-1");case"today":return"FLOOR(".concat(t,",1)=TODAY()");case"tomorrow":return"FLOOR(".concat(t,",1)=TODAY()+1");case"last7Days":return"AND(TODAY()-FLOOR(".concat(t,",1)<=6,FLOOR(").concat(t,",1)<=TODAY())");case"lastMonth":return"AND(MONTH(".concat(t,")=MONTH(EDATE(TODAY(),0-1)),YEAR(").concat(t,")=YEAR(EDATE(TODAY(),0-1)))");case"thisMonth":return"AND(MONTH(".concat(t,")=MONTH(TODAY()),YEAR(").concat(t,")=YEAR(TODAY()))");case"nextMonth":return"AND(MONTH(".concat(t,")=MONTH(EDATE(TODAY(),0+1)),YEAR(").concat(t,")=YEAR(EDATE(TODAY(),0+1)))");default:return}},E=function(e){var t=e.type,r=e.operator;switch(t){case"containsText":case"containsBlanks":case"notContainsBlanks":case"containsErrors":case"notContainsErrors":return{type:"containsText",operator:t};default:return{type:t,operator:r}}},M=function(e){c(r,e);var t=d(r);function r(){var e;return a(this,r),(e=t.call(this)).map={dataBar:e.databarXform=new w,extLst:e.extLstRefXform=new C,formula:e.formulaXform=new _,colorScale:e.colorScaleXform=new S,iconSet:e.iconSetXform=new x},e}return u(r,[{key:"render",value:function(e,t){switch(t.type){case"expression":this.renderExpression(e,t);break;case"cellIs":this.renderCellIs(e,t);break;case"top10":this.renderTop10(e,t);break;case"aboveAverage":this.renderAboveAverage(e,t);break;case"dataBar":this.renderDataBar(e,t);break;case"colorScale":this.renderColorScale(e,t);break;case"iconSet":this.renderIconSet(e,t);break;case"containsText":this.renderText(e,t);break;case"timePeriod":this.renderTimePeriod(e,t)}}},{key:"renderExpression",value:function(e,t){e.openNode(this.tag,{type:"expression",dxfId:t.dxfId,priority:t.priority}),this.formulaXform.render(e,t.formulae[0]),e.closeNode()}},{key:"renderCellIs",value:function(e,t){var r=this;e.openNode(this.tag,{type:"cellIs",dxfId:t.dxfId,priority:t.priority,operator:t.operator}),t.formulae.forEach((function(t){r.formulaXform.render(e,t)})),e.closeNode()}},{key:"renderTop10",value:function(e,t){e.leafNode(this.tag,{type:"top10",dxfId:t.dxfId,priority:t.priority,percent:v.toBoolAttribute(t.percent,!1),bottom:v.toBoolAttribute(t.bottom,!1),rank:v.toIntValue(t.rank,10,!0)})}},{key:"renderAboveAverage",value:function(e,t){e.leafNode(this.tag,{type:"aboveAverage",dxfId:t.dxfId,priority:t.priority,aboveAverage:v.toBoolAttribute(t.aboveAverage,!0)})}},{key:"renderDataBar",value:function(e,t){e.openNode(this.tag,{type:"dataBar",priority:t.priority}),this.databarXform.render(e,t),this.extLstRefXform.render(e,t),e.closeNode()}},{key:"renderColorScale",value:function(e,t){e.openNode(this.tag,{type:"colorScale",priority:t.priority}),this.colorScaleXform.render(e,t),e.closeNode()}},{key:"renderIconSet",value:function(e,t){r.isPrimitive(t)&&(e.openNode(this.tag,{type:"iconSet",priority:t.priority}),this.iconSetXform.render(e,t),e.closeNode())}},{key:"renderText",value:function(e,t){e.openNode(this.tag,{type:t.operator,dxfId:t.dxfId,priority:t.priority,operator:v.toStringAttribute(t.operator,"containsText")});var r=T(t);r&&this.formulaXform.render(e,r),e.closeNode()}},{key:"renderTimePeriod",value:function(e,t){e.openNode(this.tag,{type:"timePeriod",dxfId:t.dxfId,priority:t.priority,timePeriod:t.timePeriod});var r=R(t);r&&this.formulaXform.render(e,r),e.closeNode()}},{key:"createNewModel",value:function(e){var t=e.attributes;return o(o({},E(t)),{},{dxfId:v.toIntValue(t.dxfId),priority:v.toIntValue(t.priority),timePeriod:t.timePeriod,percent:v.toBoolValue(t.percent),bottom:v.toBoolValue(t.bottom),rank:v.toIntValue(t.rank),aboveAverage:v.toBoolValue(t.aboveAverage)})}},{key:"onParserClose",value:function(e,t){switch(e){case"dataBar":case"extLst":case"colorScale":case"iconSet":Object.assign(this.model,t.model);break;case"formula":this.model.formulae=this.model.formulae||[],this.model.formulae.push(t.model)}}},{key:"tag",get:function(){return"cfRule"}}],[{key:"isPrimitive",value:function(e){return"iconSet"!==e.type||!e.custom&&!k[e.iconSet]}}]),r}(y);t.exports=M},{"../../../../doc/range":10,"../../base-xform":31,"../../composite-xform":47,"./color-scale-xform":84,"./databar-xform":87,"./ext-lst-ref-xform":88,"./formula-xform":89,"./icon-set-xform":90}],83:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../base-xform"),m=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){e.leafNode(this.tag,{type:t.type,val:t.value})}},{key:"parseOpen",value:function(e){this.model={type:e.attributes.type,value:p.toFloatValue(e.attributes.val)}}},{key:"parseClose",value:function(e){return e!==this.tag}},{key:"tag",get:function(){return"cfvo"}}]),r}(p);t.exports=m},{"../../base-xform":31}],84:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../composite-xform"),m=e("../../style/color-xform"),g=e("./cfvo-xform"),v=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={cfvo:e.cfvoXform=new g,color:e.colorXform=new m},e}return s(r,[{key:"render",value:function(e,t){var r=this;e.openNode(this.tag),t.cfvo.forEach((function(t){r.cfvoXform.render(e,t)})),t.color.forEach((function(t){r.colorXform.render(e,t)})),e.closeNode()}},{key:"createNewModel",value:function(e){return{cfvo:[],color:[]}}},{key:"onParserClose",value:function(e,t){this.model[e].push(t.model)}},{key:"tag",get:function(){return"colorScale"}}]),r}(p);t.exports=v},{"../../composite-xform":47,"../../style/color-xform":127,"./cfvo-xform":83}],85:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../composite-xform"),m=e("./cf-rule-xform"),g=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={cfRule:new m},e}return s(r,[{key:"render",value:function(e,t){var r=this;t.rules.some(m.isPrimitive)&&(e.openNode(this.tag,{sqref:t.ref}),t.rules.forEach((function(n){m.isPrimitive(n)&&(n.ref=t.ref,r.map.cfRule.render(e,n))})),e.closeNode())}},{key:"createNewModel",value:function(e){return{ref:e.attributes.sqref,rules:[]}}},{key:"onParserClose",value:function(e,t){this.model.rules.push(t.model)}},{key:"tag",get:function(){return"conditionalFormatting"}}]),r}(p);t.exports=g},{"../../composite-xform":47,"./cf-rule-xform":82}],86:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e){return l(e)||a(e)||s(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function a(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function l(e){if(Array.isArray(e))return u(e)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function m(e){var t=y();return function(){var r,n=b(e);if(t){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var w=e("../../base-xform"),C=e("./conditional-formatting-xform"),_=function(e){f(r,e);var t=m(r);function r(){var e;return c(this,r),(e=t.call(this)).cfXform=new C,e}return d(r,[{key:"reset",value:function(){this.model=[]}},{key:"prepare",value:function(e,t){var r=e.reduce((function(e,t){return Math.max.apply(Math,[e].concat(i(t.rules.map((function(e){return e.priority||0})))))}),1);e.forEach((function(e){e.rules.forEach((function(e){e.priority||(e.priority=r++),e.style&&(e.dxfId=t.styles.addDxfStyle(e.style))}))}))}},{key:"render",value:function(e,t){var r=this;t.forEach((function(t){r.cfXform.render(e,t)}))}},{key:"parseOpen",value:function(e){return this.parser?(this.parser.parseOpen(e),!0):"conditionalFormatting"===e.name&&(this.parser=this.cfXform,this.parser.parseOpen(e),!0)}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){return!(!this.parser||!this.parser.parseClose(e)&&(this.model.push(this.parser.model),this.parser=void 0,1))}},{key:"reconcile",value:function(e,t){e.forEach((function(e){e.rules.forEach((function(e){void 0!==e.dxfId&&(e.style=t.styles.getDxfStyle(e.dxfId),delete e.dxfId)}))}))}},{key:"tag",get:function(){return"conditionalFormatting"}}]),r}(w);t.exports=_},{"../../base-xform":31,"./conditional-formatting-xform":85}],87:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../composite-xform"),m=e("../../style/color-xform"),g=e("./cfvo-xform"),v=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={cfvo:e.cfvoXform=new g,color:e.colorXform=new m},e}return s(r,[{key:"render",value:function(e,t){var r=this;e.openNode(this.tag),t.cfvo.forEach((function(t){r.cfvoXform.render(e,t)})),this.colorXform.render(e,t.color),e.closeNode()}},{key:"createNewModel",value:function(){return{cfvo:[]}}},{key:"onParserClose",value:function(e,t){switch(e){case"cfvo":this.model.cfvo.push(t.model);break;case"color":this.model.color=t.model}}},{key:"tag",get:function(){return"dataBar"}}]),r}(p);t.exports=v},{"../../composite-xform":47,"../../style/color-xform":127,"./cfvo-xform":83}],88:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../base-xform"),m=e("../../composite-xform"),g=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){e.leafNode(this.tag,null,t)}},{key:"parseOpen",value:function(){this.model=""}},{key:"parseText",value:function(e){this.model+=e}},{key:"parseClose",value:function(e){return e!==this.tag}},{key:"tag",get:function(){return"x14:id"}}]),r}(p),v=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={"x14:id":e.idXform=new g},e}return s(r,[{key:"render",value:function(e,t){e.openNode(this.tag,{uri:"{B025F937-C7B1-47D3-B67F-A62EFF666E3E}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.idXform.render(e,t.x14Id),e.closeNode()}},{key:"createNewModel",value:function(){return{}}},{key:"onParserClose",value:function(e,t){this.model.x14Id=t.model}},{key:"tag",get:function(){return"ext"}}]),r}(m),y=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={ext:new v},e}return s(r,[{key:"render",value:function(e,t){e.openNode(this.tag),this.map.ext.render(e,t),e.closeNode()}},{key:"createNewModel",value:function(){return{}}},{key:"onParserClose",value:function(e,t){Object.assign(this.model,t.model)}},{key:"tag",get:function(){return"extLst"}}]),r}(m);t.exports=y},{"../../base-xform":31,"../../composite-xform":47}],89:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){e.leafNode(this.tag,null,t)}},{key:"parseOpen",value:function(){this.model=""}},{key:"parseText",value:function(e){this.model+=e}},{key:"parseClose",value:function(e){return e!==this.tag}},{key:"tag",get:function(){return"formula"}}]),r}(e("../../base-xform"));t.exports=p},{"../../base-xform":31}],90:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../base-xform"),m=e("../../composite-xform"),g=e("./cfvo-xform"),v=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={cfvo:e.cfvoXform=new g},e}return s(r,[{key:"render",value:function(e,t){var r=this;e.openNode(this.tag,{iconSet:p.toStringAttribute(t.iconSet,"3TrafficLights"),reverse:p.toBoolAttribute(t.reverse,!1),showValue:p.toBoolAttribute(t.showValue,!0)}),t.cfvo.forEach((function(t){r.cfvoXform.render(e,t)})),e.closeNode()}},{key:"createNewModel",value:function(e){var t=e.attributes;return{iconSet:p.toStringValue(t.iconSet,"3TrafficLights"),reverse:p.toBoolValue(t.reverse),showValue:p.toBoolValue(t.showValue),cfvo:[]}}},{key:"onParserClose",value:function(e,t){this.model[e].push(t.model)}},{key:"tag",get:function(){return"iconSet"}}]),r}(m);t.exports=v},{"../../base-xform":31,"../../composite-xform":47,"./cfvo-xform":83}],91:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"prepare",value:function(e,t){var r=t.styles.addStyleModel(e.style||{});r&&(e.styleId=r)}},{key:"render",value:function(e,t){e.openNode("col"),e.addAttribute("min",t.min),e.addAttribute("max",t.max),t.width&&e.addAttribute("width",t.width),t.styleId&&e.addAttribute("style",t.styleId),t.hidden&&e.addAttribute("hidden","1"),t.bestFit&&e.addAttribute("bestFit","1"),t.outlineLevel&&e.addAttribute("outlineLevel",t.outlineLevel),t.collapsed&&e.addAttribute("collapsed","1"),e.addAttribute("customWidth","1"),e.closeNode()}},{key:"parseOpen",value:function(e){if("col"===e.name){var t=this.model={min:parseInt(e.attributes.min||"0",10),max:parseInt(e.attributes.max||"0",10),width:void 0===e.attributes.width?void 0:parseFloat(e.attributes.width||"0")};return e.attributes.style&&(t.styleId=parseInt(e.attributes.style,10)),!0!==e.attributes.hidden&&"true"!==e.attributes.hidden&&1!==e.attributes.hidden&&"1"!==e.attributes.hidden||(t.hidden=!0),e.attributes.bestFit&&(t.bestFit=!0),e.attributes.outlineLevel&&(t.outlineLevel=parseInt(e.attributes.outlineLevel,10)),e.attributes.collapsed&&(t.collapsed=!0),!0}return!1}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"reconcile",value:function(e,t){e.styleId&&(e.style=t.styles.getStyleModel(e.styleId))}},{key:"tag",get:function(){return"col"}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],92:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=e("../../../utils/under-dash"),y=e("../../../utils/utils"),b=e("../../../utils/col-cache"),w=e("../base-xform"),C=e("../../../doc/range");function _(e,t,r,n){var i=t[r];void 0!==i?e[r]=i:void 0!==n&&(e[r]=n)}function S(e){switch(e){case"1":case"true":return!0;default:return!1}}function x(e,t,r,n){var i=t[r];void 0!==i?e[r]=S(i):void 0!==n&&(e[r]=n)}function k(e){var t=v.map(e,(function(e,t){return{address:t,dataValidation:e,marked:!1}})).sort((function(e,t){return v.strcmp(e.address,t.address)})),r=v.keyBy(t,"address"),n=function(t,r,n){for(var i=0;i<r;i++){var o=b.encodeAddress(t.row+i,n);if(!e[o]||!v.isEqual(e[t.address],e[o]))return!1}return!0};return t.map((function(t){if(!t.marked){var i=b.decodeEx(t.address);if(i.dimensions)return r[i.dimensions].marked=!0,m(m({},t.dataValidation),{},{sqref:t.address});for(var o=1,s=b.encodeAddress(i.row+o,i.col);e[s]&&v.isEqual(t.dataValidation,e[s]);)o++,s=b.encodeAddress(i.row+o,i.col);for(var a=1;n(i,o,i.col+a);)a++;for(var l=0;l<o;l++)for(var u=0;u<a;u++)s=b.encodeAddress(i.row+l,i.col+u),r[s].marked=!0;if(o>1||a>1){var c=i.row+(o-1),h=i.col+(a-1);return m(m({},t.dataValidation),{},{sqref:"".concat(t.address,":").concat(b.encodeAddress(c,h))})}return m(m({},t.dataValidation),{},{sqref:t.address})}return null})).filter(Boolean)}var T=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){var r=k(t);r.length&&(e.openNode("dataValidations",{count:r.length}),r.forEach((function(t){e.openNode("dataValidation"),"any"!==t.type&&(e.addAttribute("type",t.type),t.operator&&"list"!==t.type&&"between"!==t.operator&&e.addAttribute("operator",t.operator),t.allowBlank&&e.addAttribute("allowBlank","1")),t.showInputMessage&&e.addAttribute("showInputMessage","1"),t.promptTitle&&e.addAttribute("promptTitle",t.promptTitle),t.prompt&&e.addAttribute("prompt",t.prompt),t.showErrorMessage&&e.addAttribute("showErrorMessage","1"),t.errorStyle&&e.addAttribute("errorStyle",t.errorStyle),t.errorTitle&&e.addAttribute("errorTitle",t.errorTitle),t.error&&e.addAttribute("error",t.error),e.addAttribute("sqref",t.sqref),(t.formulae||[]).forEach((function(r,n){e.openNode("formula".concat(n+1)),"date"===t.type?e.writeText(y.dateToExcel(new Date(r))):e.writeText(r),e.closeNode()})),e.closeNode()})),e.closeNode())}},{key:"parseOpen",value:function(e){switch(e.name){case"dataValidations":return this.model={},!0;case"dataValidation":this._address=e.attributes.sqref;var t={type:e.attributes.type||"any",formulae:[]};switch(e.attributes.type&&x(t,e.attributes,"allowBlank"),x(t,e.attributes,"showInputMessage"),x(t,e.attributes,"showErrorMessage"),t.type){case"any":case"list":case"custom":break;default:_(t,e.attributes,"operator","between")}return _(t,e.attributes,"promptTitle"),_(t,e.attributes,"prompt"),_(t,e.attributes,"errorStyle"),_(t,e.attributes,"errorTitle"),_(t,e.attributes,"error"),this._dataValidation=t,!0;case"formula1":case"formula2":return this._formula=[],!0;default:return!1}}},{key:"parseText",value:function(e){this._formula&&this._formula.push(e)}},{key:"parseClose",value:function(e){var t=this;switch(e){case"dataValidations":return!1;case"dataValidation":return this._dataValidation.formulae&&this._dataValidation.formulae.length||(delete this._dataValidation.formulae,delete this._dataValidation.operator),(this._address.split(/\s+/g)||[]).forEach((function(e){e.includes(":")?new C(e).forEachAddress((function(e){t.model[e]=t._dataValidation})):t.model[e]=t._dataValidation})),!0;case"formula1":case"formula2":var r=this._formula.join("");switch(this._dataValidation.type){case"whole":case"textLength":r=parseInt(r,10);break;case"decimal":r=parseFloat(r);break;case"date":r=y.excelToDate(parseFloat(r))}return this._dataValidation.formulae.push(r),this._formula=void 0,!0;default:return!0}}},{key:"tag",get:function(){return"dataValidations"}}]),r}(w);t.exports=T},{"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":25,"../../../utils/utils":26,"../base-xform":31}],93:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){t&&e.leafNode("dimension",{ref:t})}},{key:"parseOpen",value:function(e){return"dimension"===e.name&&(this.model=e.attributes.ref,!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return"dimension"}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],94:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){t&&e.leafNode(this.tag,{"r:id":t.rId})}},{key:"parseOpen",value:function(e){return e.name===this.tag&&(this.model={rId:e.attributes["r:id"]},!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return"drawing"}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],95:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../composite-xform"),m=e("./cf-ext/conditional-formattings-ext-xform"),g=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={"x14:conditionalFormattings":e.conditionalFormattings=new m},e}return s(r,[{key:"hasContent",value:function(e){return this.conditionalFormattings.hasContent(e.conditionalFormattings)}},{key:"prepare",value:function(e,t){this.conditionalFormattings.prepare(e.conditionalFormattings,t)}},{key:"render",value:function(e,t){e.openNode("ext",{uri:"{78C0D931-6437-407d-A8EE-F0AAD7539E65}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.conditionalFormattings.render(e,t.conditionalFormattings),e.closeNode()}},{key:"createNewModel",value:function(){return{}}},{key:"onParserClose",value:function(e,t){this.model[e]=t.model}},{key:"tag",get:function(){return"ext"}}]),r}(p),v=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={ext:e.ext=new g},e}return s(r,[{key:"prepare",value:function(e,t){this.ext.prepare(e,t)}},{key:"hasContent",value:function(e){return this.ext.hasContent(e)}},{key:"render",value:function(e,t){this.hasContent(t)&&(e.openNode("extLst"),this.ext.render(e,t),e.closeNode())}},{key:"createNewModel",value:function(){return{}}},{key:"onParserClose",value:function(e,t){Object.assign(this.model,t.model)}},{key:"tag",get:function(){return"extLst"}}]),r}(p);t.exports=v},{"../composite-xform":47,"./cf-ext/conditional-formattings-ext-xform":77}],96:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){if(t){e.addRollback();var r=!1;e.openNode("headerFooter"),t.differentFirst&&(e.addAttribute("differentFirst","1"),r=!0),t.differentOddEven&&(e.addAttribute("differentOddEven","1"),r=!0),t.oddHeader&&"string"==typeof t.oddHeader&&(e.leafNode("oddHeader",null,t.oddHeader),r=!0),t.oddFooter&&"string"==typeof t.oddFooter&&(e.leafNode("oddFooter",null,t.oddFooter),r=!0),t.evenHeader&&"string"==typeof t.evenHeader&&(e.leafNode("evenHeader",null,t.evenHeader),r=!0),t.evenFooter&&"string"==typeof t.evenFooter&&(e.leafNode("evenFooter",null,t.evenFooter),r=!0),t.firstHeader&&"string"==typeof t.firstHeader&&(e.leafNode("firstHeader",null,t.firstHeader),r=!0),t.firstFooter&&"string"==typeof t.firstFooter&&(e.leafNode("firstFooter",null,t.firstFooter),r=!0),r?(e.closeNode(),e.commit()):e.rollback()}}},{key:"parseOpen",value:function(e){switch(e.name){case"headerFooter":return this.model={},e.attributes.differentFirst&&(this.model.differentFirst=1===parseInt(e.attributes.differentFirst,0)),e.attributes.differentOddEven&&(this.model.differentOddEven=1===parseInt(e.attributes.differentOddEven,0)),!0;case"oddHeader":return this.currentNode="oddHeader",!0;case"oddFooter":return this.currentNode="oddFooter",!0;case"evenHeader":return this.currentNode="evenHeader",!0;case"evenFooter":return this.currentNode="evenFooter",!0;case"firstHeader":return this.currentNode="firstHeader",!0;case"firstFooter":return this.currentNode="firstFooter",!0;default:return!1}}},{key:"parseText",value:function(e){switch(this.currentNode){case"oddHeader":this.model.oddHeader=e;break;case"oddFooter":this.model.oddFooter=e;break;case"evenHeader":this.model.evenHeader=e;break;case"evenFooter":this.model.evenFooter=e;break;case"firstHeader":this.model.firstHeader=e;break;case"firstFooter":this.model.firstFooter=e}}},{key:"parseClose",value:function(){switch(this.currentNode){case"oddHeader":case"oddFooter":case"evenHeader":case"evenFooter":case"firstHeader":case"firstFooter":return this.currentNode=void 0,!0;default:return!1}}},{key:"tag",get:function(){return"headerFooter"}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],97:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){e.leafNode("hyperlink",{ref:t.address,"r:id":t.rId,tooltip:t.tooltip})}},{key:"parseOpen",value:function(e){return"hyperlink"===e.name&&(this.model={address:e.attributes.ref,rId:e.attributes["r:id"],tooltip:e.attributes.tooltip},!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return"hyperlink"}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],98:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){e.leafNode("mergeCell",{ref:t})}},{key:"parseOpen",value:function(e){return"mergeCell"===e.name&&(this.model=e.attributes.ref,!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return"mergeCell"}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],99:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var s=e("../../../utils/under-dash"),a=e("../../../doc/range"),l=e("../../../utils/col-cache"),u=e("../../../doc/enums"),c=function(){function e(){n(this,e),this.merges={}}return o(e,[{key:"add",value:function(e){if(this.merges[e.master])this.merges[e.master].expandToAddress(e.address);else{var t="".concat(e.master,":").concat(e.address);this.merges[e.master]=new a(t)}}},{key:"reconcile",value:function(e,t){s.each(e,(function(e){for(var r=l.decode(e),n=r.top;n<=r.bottom;n++)for(var i=t[n-1],o=r.left;o<=r.right;o++){var s=i.cells[o-1];s?s.type===u.ValueType.Merge&&(s.master=r.tl):i.cells[o]={type:u.ValueType.Null,address:l.encodeAddress(n,o)}}}))}},{key:"getMasterAddress",value:function(e){var t=this.hash[e];return t&&t.tl}},{key:"mergeCells",get:function(){return s.map(this.merges,(function(e){return e.range}))}}]),e}();t.exports=c},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":25}],100:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../base-xform"),m=function(e){return void 0!==e},g=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){return!(!t||!m(t.summaryBelow)&&!m(t.summaryRight)||(e.leafNode(this.tag,{summaryBelow:m(t.summaryBelow)?Number(t.summaryBelow):void 0,summaryRight:m(t.summaryRight)?Number(t.summaryRight):void 0}),0))}},{key:"parseOpen",value:function(e){return e.name===this.tag&&(this.model={summaryBelow:m(e.attributes.summaryBelow)?Boolean(Number(e.attributes.summaryBelow)):void 0,summaryRight:m(e.attributes.summaryRight)?Boolean(Number(e.attributes.summaryRight)):void 0},!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return"outlinePr"}}]),r}(p);t.exports=g},{"../base-xform":31}],101:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){e.leafNode("brk",t)}},{key:"parseOpen",value:function(e){return"brk"===e.name&&(this.model=e.attributes.ref,!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return"brk"}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],102:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../../utils/under-dash"),m=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){if(t){var r={left:t.left,right:t.right,top:t.top,bottom:t.bottom,header:t.header,footer:t.footer};p.some(r,(function(e){return void 0!==e}))&&e.leafNode(this.tag,r)}}},{key:"parseOpen",value:function(e){return e.name===this.tag&&(this.model={left:parseFloat(e.attributes.left||.7),right:parseFloat(e.attributes.right||.7),top:parseFloat(e.attributes.top||.75),bottom:parseFloat(e.attributes.bottom||.75),header:parseFloat(e.attributes.header||.3),footer:parseFloat(e.attributes.footer||.3)},!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return"pageMargins"}}]),r}(e("../base-xform"));t.exports=m},{"../../../utils/under-dash":25,"../base-xform":31}],103:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){return!(!t||!t.fitToPage||(e.leafNode(this.tag,{fitToPage:t.fitToPage?"1":void 0}),0))}},{key:"parseOpen",value:function(e){return e.name===this.tag&&(this.model={fitToPage:"1"===e.attributes.fitToPage},!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return"pageSetUpPr"}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],104:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../../utils/under-dash");function m(e){return e?"1":void 0}function g(e){if("overThenDown"===e)return e}function v(e){switch(e){case"atEnd":case"asDisplyed":return e;default:return}}function y(e){switch(e){case"dash":case"blank":case"NA":return e;default:return}}function b(e){return void 0!==e?parseInt(e,10):void 0}var w=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){if(t){var r={paperSize:t.paperSize,orientation:t.orientation,horizontalDpi:t.horizontalDpi,verticalDpi:t.verticalDpi,pageOrder:g(t.pageOrder),blackAndWhite:m(t.blackAndWhite),draft:m(t.draft),cellComments:v(t.cellComments),errors:y(t.errors),scale:t.scale,fitToWidth:t.fitToWidth,fitToHeight:t.fitToHeight,firstPageNumber:t.firstPageNumber,useFirstPageNumber:m(t.firstPageNumber),usePrinterDefaults:m(t.usePrinterDefaults),copies:t.copies};p.some(r,(function(e){return void 0!==e}))&&e.leafNode(this.tag,r)}}},{key:"parseOpen",value:function(e){return e.name===this.tag&&(this.model={paperSize:b(e.attributes.paperSize),orientation:e.attributes.orientation||"portrait",horizontalDpi:parseInt(e.attributes.horizontalDpi||"4294967295",10),verticalDpi:parseInt(e.attributes.verticalDpi||"4294967295",10),pageOrder:e.attributes.pageOrder||"downThenOver",blackAndWhite:"1"===e.attributes.blackAndWhite,draft:"1"===e.attributes.draft,cellComments:e.attributes.cellComments||"None",errors:e.attributes.errors||"displayed",scale:parseInt(e.attributes.scale||"100",10),fitToWidth:parseInt(e.attributes.fitToWidth||"1",10),fitToHeight:parseInt(e.attributes.fitToHeight||"1",10),firstPageNumber:parseInt(e.attributes.firstPageNumber||"1",10),useFirstPageNumber:"1"===e.attributes.useFirstPageNumber,usePrinterDefaults:"1"===e.attributes.usePrinterDefaults,copies:parseInt(e.attributes.copies||"1",10)},!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return"pageSetup"}}]),r}(e("../base-xform"));t.exports=w},{"../../../utils/under-dash":25,"../base-xform":31}],105:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){t&&e.leafNode(this.tag,{"r:id":t.rId})}},{key:"parseOpen",value:function(e){return e.name===this.tag&&(this.model={rId:e.attributes["r:id"]},!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return"picture"}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],106:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../../utils/under-dash");function m(e){return e?"1":void 0}var g=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){if(t){var r={headings:m(t.showRowColHeaders),gridLines:m(t.showGridLines),horizontalCentered:m(t.horizontalCentered),verticalCentered:m(t.verticalCentered)};p.some(r,(function(e){return void 0!==e}))&&e.leafNode(this.tag,r)}}},{key:"parseOpen",value:function(e){return e.name===this.tag&&(this.model={showRowColHeaders:"1"===e.attributes.headings,showGridLines:"1"===e.attributes.gridLines,horizontalCentered:"1"===e.attributes.horizontalCentered,verticalCentered:"1"===e.attributes.verticalCentered},!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return"printOptions"}}]),r}(e("../base-xform"));t.exports=g},{"../../../utils/under-dash":25,"../base-xform":31}],107:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("./page-breaks-xform"),m=function(e){a(r,e);var t=u(r);function r(){i(this,r);var e={tag:"rowBreaks",count:!0,childXform:new p};return t.call(this,e)}return s(r,[{key:"render",value:function(e,t){if(t&&t.length){e.openNode(this.tag,this.$),this.count&&(e.addAttribute(this.$count,t.length),e.addAttribute("manualBreakCount",t.length));var r=this.childXform;t.forEach((function(t){r.render(e,t)})),e.closeNode()}else this.empty&&e.leafNode(this.tag)}}]),r}(e("../list-xform"));t.exports=m},{"../list-xform":70,"./page-breaks-xform":101}],108:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../base-xform"),m=e("./cell-xform"),g=function(e){a(r,e);var t=u(r);function r(e){var n;return i(this,r),(n=t.call(this)).maxItems=e&&e.maxItems,n.map={c:new m},n}return s(r,[{key:"prepare",value:function(e,t){var r=t.styles.addStyleModel(e.style);r&&(e.styleId=r);var n=this.map.c;e.cells.forEach((function(e){n.prepare(e,t)}))}},{key:"render",value:function(e,t,r){e.openNode("row"),e.addAttribute("r",t.number),t.height&&(e.addAttribute("ht",t.height),e.addAttribute("customHeight","1")),t.hidden&&e.addAttribute("hidden","1"),t.min>0&&t.max>0&&t.min<=t.max&&e.addAttribute("spans","".concat(t.min,":").concat(t.max)),t.styleId&&(e.addAttribute("s",t.styleId),e.addAttribute("customFormat","1")),e.addAttribute("x14ac:dyDescent","0.25"),t.outlineLevel&&e.addAttribute("outlineLevel",t.outlineLevel),t.collapsed&&e.addAttribute("collapsed","1");var n=this.map.c;t.cells.forEach((function(t){n.render(e,t,r)})),e.closeNode()}},{key:"parseOpen",value:function(e){if(this.parser)return this.parser.parseOpen(e),!0;if("row"===e.name){this.numRowsSeen+=1;var t=e.attributes.spans?e.attributes.spans.split(":").map((function(e){return parseInt(e,10)})):[void 0,void 0],r=this.model={number:parseInt(e.attributes.r,10),min:t[0],max:t[1],cells:[]};return e.attributes.s&&(r.styleId=parseInt(e.attributes.s,10)),!0!==e.attributes.hidden&&"true"!==e.attributes.hidden&&1!==e.attributes.hidden&&"1"!==e.attributes.hidden||(r.hidden=!0),e.attributes.bestFit&&(r.bestFit=!0),e.attributes.ht&&(r.height=parseFloat(e.attributes.ht)),e.attributes.outlineLevel&&(r.outlineLevel=parseInt(e.attributes.outlineLevel,10)),e.attributes.collapsed&&(r.collapsed=!0),!0}return this.parser=this.map[e.name],!!this.parser&&(this.parser.parseOpen(e),!0)}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){if(this.parser){if(!this.parser.parseClose(e)){if(this.model.cells.push(this.parser.model),this.maxItems&&this.model.cells.length>this.maxItems)throw new Error("Max column count (".concat(this.maxItems,") exceeded"));this.parser=void 0}return!0}return!1}},{key:"reconcile",value:function(e,t){e.style=e.styleId?t.styles.getStyleModel(e.styleId):{},void 0!==e.styleId&&(e.styleId=void 0);var r=this.map.c;e.cells.forEach((function(e){r.reconcile(e,t)}))}},{key:"tag",get:function(){return"row"}}]),r}(p);t.exports=g},{"../base-xform":31,"./cell-xform":72}],109:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../../utils/under-dash"),m=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){if(t){var r={defaultRowHeight:t.defaultRowHeight,outlineLevelRow:t.outlineLevelRow,outlineLevelCol:t.outlineLevelCol,"x14ac:dyDescent":t.dyDescent};t.defaultColWidth&&(r.defaultColWidth=t.defaultColWidth),t.defaultRowHeight&&15===t.defaultRowHeight||(r.customHeight="1"),p.some(r,(function(e){return void 0!==e}))&&e.leafNode("sheetFormatPr",r)}}},{key:"parseOpen",value:function(e){return"sheetFormatPr"===e.name&&(this.model={defaultRowHeight:parseFloat(e.attributes.defaultRowHeight||"0"),dyDescent:parseFloat(e.attributes["x14ac:dyDescent"]||"0"),outlineLevelRow:parseInt(e.attributes.outlineLevelRow||"0",10),outlineLevelCol:parseInt(e.attributes.outlineLevelCol||"0",10)},e.attributes.defaultColWidth&&(this.model.defaultColWidth=parseFloat(e.attributes.defaultColWidth)),!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return"sheetFormatPr"}}]),r}(e("../base-xform"));t.exports=m},{"../../../utils/under-dash":25,"../base-xform":31}],110:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../base-xform"),m=e("../style/color-xform"),g=e("./page-setup-properties-xform"),v=e("./outline-properties-xform"),y=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={tabColor:new m("tabColor"),pageSetUpPr:new g,outlinePr:new v},e}return s(r,[{key:"render",value:function(e,t){if(t){e.addRollback(),e.openNode("sheetPr");var r=!1;r=this.map.tabColor.render(e,t.tabColor)||r,r=this.map.pageSetUpPr.render(e,t.pageSetup)||r,(r=this.map.outlinePr.render(e,t.outlineProperties)||r)?(e.closeNode(),e.commit()):e.rollback()}}},{key:"parseOpen",value:function(e){return this.parser?(this.parser.parseOpen(e),!0):e.name===this.tag?(this.reset(),!0):!!this.map[e.name]&&(this.parser=this.map[e.name],this.parser.parseOpen(e),!0)}},{key:"parseText",value:function(e){return!!this.parser&&(this.parser.parseText(e),!0)}},{key:"parseClose",value:function(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):(this.map.tabColor.model||this.map.pageSetUpPr.model||this.map.outlinePr.model?(this.model={},this.map.tabColor.model&&(this.model.tabColor=this.map.tabColor.model),this.map.pageSetUpPr.model&&(this.model.pageSetup=this.map.pageSetUpPr.model),this.map.outlinePr.model&&(this.model.outlineProperties=this.map.outlinePr.model)):this.model=null,!1)}},{key:"tag",get:function(){return"sheetPr"}}]),r}(p);t.exports=y},{"../base-xform":31,"../style/color-xform":127,"./outline-properties-xform":100,"./page-setup-properties-xform":103}],111:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../../utils/under-dash");function m(e,t){return e?t:void 0}function g(e,t){return e===t||void 0}var v=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){if(t){var r={sheet:m(t.sheet,"1"),selectLockedCells:!1===t.selectLockedCells?"1":void 0,selectUnlockedCells:!1===t.selectUnlockedCells?"1":void 0,formatCells:m(t.formatCells,"0"),formatColumns:m(t.formatColumns,"0"),formatRows:m(t.formatRows,"0"),insertColumns:m(t.insertColumns,"0"),insertRows:m(t.insertRows,"0"),insertHyperlinks:m(t.insertHyperlinks,"0"),deleteColumns:m(t.deleteColumns,"0"),deleteRows:m(t.deleteRows,"0"),sort:m(t.sort,"0"),autoFilter:m(t.autoFilter,"0"),pivotTables:m(t.pivotTables,"0")};t.sheet&&(r.algorithmName=t.algorithmName,r.hashValue=t.hashValue,r.saltValue=t.saltValue,r.spinCount=t.spinCount,r.objects=m(!1===t.objects,"1"),r.scenarios=m(!1===t.scenarios,"1")),p.some(r,(function(e){return void 0!==e}))&&e.leafNode(this.tag,r)}}},{key:"parseOpen",value:function(e){return e.name===this.tag&&(this.model={sheet:g(e.attributes.sheet,"1"),objects:"1"!==e.attributes.objects&&void 0,scenarios:"1"!==e.attributes.scenarios&&void 0,selectLockedCells:"1"!==e.attributes.selectLockedCells&&void 0,selectUnlockedCells:"1"!==e.attributes.selectUnlockedCells&&void 0,formatCells:g(e.attributes.formatCells,"0"),formatColumns:g(e.attributes.formatColumns,"0"),formatRows:g(e.attributes.formatRows,"0"),insertColumns:g(e.attributes.insertColumns,"0"),insertRows:g(e.attributes.insertRows,"0"),insertHyperlinks:g(e.attributes.insertHyperlinks,"0"),deleteColumns:g(e.attributes.deleteColumns,"0"),deleteRows:g(e.attributes.deleteRows,"0"),sort:g(e.attributes.sort,"0"),autoFilter:g(e.attributes.autoFilter,"0"),pivotTables:g(e.attributes.pivotTables,"0")},e.attributes.algorithmName&&(this.model.algorithmName=e.attributes.algorithmName,this.model.hashValue=e.attributes.hashValue,this.model.saltValue=e.attributes.saltValue,this.model.spinCount=parseInt(e.attributes.spinCount,10)),!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return"sheetProtection"}}]),r}(e("../base-xform"));t.exports=v},{"../../../utils/under-dash":25,"../base-xform":31}],112:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../../utils/col-cache"),m=e("../base-xform"),g={frozen:"frozen",frozenSplit:"frozen",split:"split"},v=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"prepare",value:function(e){switch(e.state){case"frozen":case"split":break;default:e.state="normal"}}},{key:"render",value:function(e,t){e.openNode("sheetView",{workbookViewId:t.workbookViewId||0});var r,n,i,o,s=function(t,r,n){n&&e.addAttribute(t,r)};switch(s("rightToLeft","1",!0===t.rightToLeft),s("tabSelected","1",t.tabSelected),s("showRuler","0",!1===t.showRuler),s("showRowColHeaders","0",!1===t.showRowColHeaders),s("showGridLines","0",!1===t.showGridLines),s("zoomScale",t.zoomScale,t.zoomScale),s("zoomScaleNormal",t.zoomScaleNormal,t.zoomScaleNormal),s("view",t.style,t.style),t.state){case"frozen":n=t.xSplit||0,i=t.ySplit||0,r=t.topLeftCell||p.getAddress(i+1,n+1).address,o=(t.xSplit&&t.ySplit?"bottomRight":t.xSplit&&"topRight")||"bottomLeft",e.leafNode("pane",{xSplit:t.xSplit||void 0,ySplit:t.ySplit||void 0,topLeftCell:r,activePane:o,state:"frozen"}),e.leafNode("selection",{pane:o,activeCell:t.activeCell,sqref:t.activeCell});break;case"split":"topLeft"===t.activePane&&(t.activePane=void 0),e.leafNode("pane",{xSplit:t.xSplit||void 0,ySplit:t.ySplit||void 0,topLeftCell:t.topLeftCell,activePane:t.activePane}),e.leafNode("selection",{pane:t.activePane,activeCell:t.activeCell,sqref:t.activeCell});break;case"normal":t.activeCell&&e.leafNode("selection",{activeCell:t.activeCell,sqref:t.activeCell})}e.closeNode()}},{key:"parseOpen",value:function(e){switch(e.name){case"sheetView":return this.sheetView={workbookViewId:parseInt(e.attributes.workbookViewId,10),rightToLeft:"1"===e.attributes.rightToLeft,tabSelected:"1"===e.attributes.tabSelected,showRuler:!("0"===e.attributes.showRuler),showRowColHeaders:!("0"===e.attributes.showRowColHeaders),showGridLines:!("0"===e.attributes.showGridLines),zoomScale:parseInt(e.attributes.zoomScale||"100",10),zoomScaleNormal:parseInt(e.attributes.zoomScaleNormal||"100",10),style:e.attributes.view},this.pane=void 0,this.selections={},!0;case"pane":return this.pane={xSplit:parseInt(e.attributes.xSplit||"0",10),ySplit:parseInt(e.attributes.ySplit||"0",10),topLeftCell:e.attributes.topLeftCell,activePane:e.attributes.activePane||"topLeft",state:e.attributes.state},!0;case"selection":var t=e.attributes.pane||"topLeft";return this.selections[t]={pane:t,activeCell:e.attributes.activeCell},!0;default:return!1}}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(e){var t,r;return"sheetView"!==e||(this.sheetView&&this.pane?(t=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:g[this.pane.state]||"split",xSplit:this.pane.xSplit,ySplit:this.pane.ySplit,topLeftCell:this.pane.topLeftCell,showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},"split"===this.model.state&&(t.activePane=this.pane.activePane),(r=this.selections[this.pane.activePane])&&r.activeCell&&(t.activeCell=r.activeCell),this.sheetView.style&&(t.style=this.sheetView.style)):(t=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:"normal",showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},(r=this.selections.topLeft)&&r.activeCell&&(t.activeCell=r.activeCell),this.sheetView.style&&(t.style=this.sheetView.style)),!1)}},{key:"reconcile",value:function(){}},{key:"tag",get:function(){return"sheetView"}}]),r}(m);t.exports=v},{"../../../utils/col-cache":19,"../base-xform":31}],113:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){t&&e.leafNode(this.tag,{"r:id":t.rId})}},{key:"parseOpen",value:function(e){return e.name===this.tag&&(this.model={rId:e.attributes["r:id"]},!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return"tablePart"}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],114:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../../utils/under-dash"),m=e("../../../utils/col-cache"),g=e("../../../utils/xml-stream"),v=e("../../rel-type"),y=e("./merges"),b=e("../base-xform"),w=e("../list-xform"),C=e("./row-xform"),_=e("./col-xform"),S=e("./dimension-xform"),x=e("./hyperlink-xform"),k=e("./merge-cell-xform"),T=e("./data-validations-xform"),R=e("./sheet-properties-xform"),E=e("./sheet-format-properties-xform"),M=e("./sheet-view-xform"),P=e("./sheet-protection-xform"),O=e("./page-margins-xform"),I=e("./page-setup-xform"),A=e("./print-options-xform"),j=e("./auto-filter-xform"),D=e("./picture-xform"),N=e("./drawing-xform"),F=e("./table-part-xform"),$=e("./row-breaks-xform"),L=e("./header-footer-xform"),B=e("./cf/conditional-formattings-xform"),V=e("./ext-lst-xform"),H=function(e,t){Object.keys(t).forEach((function(r){var n=e[r],i=t[r];void 0===n&&void 0!==i&&(e[r]=i)}))},z=function(e,t){if(!t||!t.length)return e;if(!e||!e.length)return t;var r={},n={};return e.forEach((function(e){r[e.ref]=e,e.rules.forEach((function(e){var t=e.x14Id;t&&(n[t]=e)}))})),t.forEach((function(t){t.rules.forEach((function(i){var o=n[i.x14Id];o?H(o,i):r[t.ref]?r[t.ref].rules.push(i):e.push({ref:t.ref,rules:[i]})}))})),e},U=function(e){a(r,e);var t=u(r);function r(e){var n;i(this,r),n=t.call(this);var o=e||{},s=o.maxRows,a=o.maxCols;return n.map={sheetPr:new R,dimension:new S,sheetViews:new w({tag:"sheetViews",count:!1,childXform:new M}),sheetFormatPr:new E,cols:new w({tag:"cols",count:!1,childXform:new _}),sheetData:new w({tag:"sheetData",count:!1,empty:!0,childXform:new C({maxItems:a}),maxItems:s}),autoFilter:new j,mergeCells:new w({tag:"mergeCells",count:!0,childXform:new k}),rowBreaks:new $,hyperlinks:new w({tag:"hyperlinks",count:!1,childXform:new x}),pageMargins:new O,dataValidations:new T,pageSetup:new I,headerFooter:new L,printOptions:new A,picture:new D,drawing:new N,sheetProtection:new P,tableParts:new w({tag:"tableParts",count:!0,childXform:new F}),conditionalFormatting:new B,extLst:new V},n}return s(r,[{key:"prepare",value:function(e,t){var r=this;t.merges=new y,e.hyperlinks=t.hyperlinks=[],e.comments=t.comments=[],t.formulae={},t.siFormulae=0,this.map.cols.prepare(e.cols,t),this.map.sheetData.prepare(e.rows,t),this.map.conditionalFormatting.prepare(e.conditionalFormattings,t),e.mergeCells=t.merges.mergeCells;var n=e.rels=[];function i(e){return"rId".concat(e.length+1)}if(e.hyperlinks.forEach((function(e){var t=i(n);e.rId=t,n.push({Id:t,Type:v.Hyperlink,Target:e.target,TargetMode:"External"})})),e.comments.length>0){var o={Id:i(n),Type:v.Comments,Target:"../comments".concat(e.id,".xml")};n.push(o);var s={Id:i(n),Type:v.VmlDrawing,Target:"../drawings/vmlDrawing".concat(e.id,".vml")};n.push(s),e.comments.forEach((function(e){e.refAddress=m.decodeAddress(e.ref)})),t.commentRefs.push({commentName:"comments".concat(e.id),vmlDrawing:"vmlDrawing".concat(e.id)})}var a,l=[];e.media.forEach((function(o){if("background"===o.type){var s=i(n);a=t.media[o.imageId],n.push({Id:s,Type:v.Image,Target:"../media/".concat(a.name,".").concat(a.extension)}),e.background={rId:s},e.image=t.media[o.imageId]}else if("image"===o.type){var u=e.drawing;a=t.media[o.imageId],u||(u=e.drawing={rId:i(n),name:"drawing".concat(++t.drawingsCount),anchors:[],rels:[]},t.drawings.push(u),n.push({Id:u.rId,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:"../drawings/".concat(u.name,".xml")}));var c=r.preImageId===o.imageId?l[o.imageId]:l[u.rels.length];c||(c=i(u.rels),l[u.rels.length]=c,u.rels.push({Id:c,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:"../media/".concat(a.name,".").concat(a.extension)}));var h={picture:{rId:c},range:o.range};if(o.hyperlinks&&o.hyperlinks.hyperlink){var d=i(u.rels);l[u.rels.length]=d,h.picture.hyperlinks={tooltip:o.hyperlinks.tooltip,rId:d},u.rels.push({Id:d,Type:v.Hyperlink,Target:o.hyperlinks.hyperlink,TargetMode:"External"})}r.preImageId=o.imageId,u.anchors.push(h)}})),e.tables.forEach((function(e){var r=i(n);e.rId=r,n.push({Id:r,Type:v.Table,Target:"../tables/".concat(e.target)}),e.columns.forEach((function(e){var r=e.style;r&&(e.dxfId=t.styles.addDxfStyle(r))}))})),this.map.extLst.prepare(e,t)}},{key:"render",value:function(e,t){e.openXml(g.StdDocAttributes),e.openNode("worksheet",r.WORKSHEET_ATTRIBUTES);var n=t.properties?{defaultRowHeight:t.properties.defaultRowHeight,dyDescent:t.properties.dyDescent,outlineLevelCol:t.properties.outlineLevelCol,outlineLevelRow:t.properties.outlineLevelRow}:void 0;t.properties&&t.properties.defaultColWidth&&(n.defaultColWidth=t.properties.defaultColWidth);var i={outlineProperties:t.properties&&t.properties.outlineProperties,tabColor:t.properties&&t.properties.tabColor,pageSetup:t.pageSetup&&t.pageSetup.fitToPage?{fitToPage:t.pageSetup.fitToPage}:void 0},o=t.pageSetup&&t.pageSetup.margins,s={showRowColHeaders:t.pageSetup&&t.pageSetup.showRowColHeaders,showGridLines:t.pageSetup&&t.pageSetup.showGridLines,horizontalCentered:t.pageSetup&&t.pageSetup.horizontalCentered,verticalCentered:t.pageSetup&&t.pageSetup.verticalCentered},a=t.sheetProtection;this.map.sheetPr.render(e,i),this.map.dimension.render(e,t.dimensions),this.map.sheetViews.render(e,t.views),this.map.sheetFormatPr.render(e,n),this.map.cols.render(e,t.cols),this.map.sheetData.render(e,t.rows),this.map.sheetProtection.render(e,a),this.map.autoFilter.render(e,t.autoFilter),this.map.mergeCells.render(e,t.mergeCells),this.map.conditionalFormatting.render(e,t.conditionalFormattings),this.map.dataValidations.render(e,t.dataValidations),this.map.hyperlinks.render(e,t.hyperlinks),this.map.printOptions.render(e,s),this.map.pageMargins.render(e,o),this.map.pageSetup.render(e,t.pageSetup),this.map.headerFooter.render(e,t.headerFooter),this.map.rowBreaks.render(e,t.rowBreaks),this.map.drawing.render(e,t.drawing),this.map.picture.render(e,t.background),this.map.tableParts.render(e,t.tables),this.map.extLst.render(e,t),t.rels&&t.rels.forEach((function(t){t.Type===v.VmlDrawing&&e.leafNode("legacyDrawing",{"r:id":t.Id})})),e.closeNode()}},{key:"parseOpen",value:function(e){return this.parser?(this.parser.parseOpen(e),!0):"worksheet"===e.name?(p.each(this.map,(function(e){e.reset()})),!0):(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e),!0)}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){if(this.parser)return this.parser.parseClose(e)||(this.parser=void 0),!0;if("worksheet"===e){var t=this.map.sheetFormatPr.model||{};this.map.sheetPr.model&&this.map.sheetPr.model.tabColor&&(t.tabColor=this.map.sheetPr.model.tabColor),this.map.sheetPr.model&&this.map.sheetPr.model.outlineProperties&&(t.outlineProperties=this.map.sheetPr.model.outlineProperties);var r={fitToPage:this.map.sheetPr.model&&this.map.sheetPr.model.pageSetup&&this.map.sheetPr.model.pageSetup.fitToPage||!1,margins:this.map.pageMargins.model},n=Object.assign(r,this.map.pageSetup.model,this.map.printOptions.model),i=z(this.map.conditionalFormatting.model,this.map.extLst.model&&this.map.extLst.model["x14:conditionalFormattings"]);return this.model={dimensions:this.map.dimension.model,cols:this.map.cols.model,rows:this.map.sheetData.model,mergeCells:this.map.mergeCells.model,hyperlinks:this.map.hyperlinks.model,dataValidations:this.map.dataValidations.model,properties:t,views:this.map.sheetViews.model,pageSetup:n,headerFooter:this.map.headerFooter.model,background:this.map.picture.model,drawing:this.map.drawing.model,tables:this.map.tableParts.model,conditionalFormattings:i},this.map.autoFilter.model&&(this.model.autoFilter=this.map.autoFilter.model),this.map.sheetProtection.model&&(this.model.sheetProtection=this.map.sheetProtection.model),!1}return!0}},{key:"reconcile",value:function(e,t){var r=(e.relationships||[]).reduce((function(r,n){if(r[n.Id]=n,n.Type===v.Comments&&(e.comments=t.comments[n.Target].comments),n.Type===v.VmlDrawing&&e.comments&&e.comments.length){var i=t.vmlDrawings[n.Target].comments;e.comments.forEach((function(e,t){e.note=Object.assign({},e.note,i[t])}))}return r}),{});if(t.commentsMap=(e.comments||[]).reduce((function(e,t){return t.ref&&(e[t.ref]=t),e}),{}),t.hyperlinkMap=(e.hyperlinks||[]).reduce((function(e,t){return t.rId&&(e[t.address]=r[t.rId].Target),e}),{}),t.formulae={},e.rows=e.rows&&e.rows.filter(Boolean)||[],e.rows.forEach((function(e){e.cells=e.cells&&e.cells.filter(Boolean)||[]})),this.map.cols.reconcile(e.cols,t),this.map.sheetData.reconcile(e.rows,t),this.map.conditionalFormatting.reconcile(e.conditionalFormattings,t),e.media=[],e.drawing){var n=r[e.drawing.rId].Target.match(/\/drawings\/([a-zA-Z0-9]+)[.][a-zA-Z]{3,4}$/);if(n){var i=n[1];t.drawings[i].anchors.forEach((function(t){if(t.medium){var r={type:"image",imageId:t.medium.index,range:t.range,hyperlinks:t.picture.hyperlinks};e.media.push(r)}}))}}var o=e.background&&r[e.background.rId];if(o){var s=o.Target.split("/media/")[1],a=t.mediaIndex&&t.mediaIndex[s];void 0!==a&&e.media.push({type:"background",imageId:a})}e.tables=(e.tables||[]).map((function(e){var n=r[e.rId];return t.tables[n.Target]})),delete e.relationships,delete e.hyperlinks,delete e.comments}}]),r}(b);U.WORKSHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},t.exports=U},{"../../../utils/col-cache":19,"../../../utils/under-dash":25,"../../../utils/xml-stream":27,"../../rel-type":30,"../base-xform":31,"../list-xform":70,"./auto-filter-xform":71,"./cf/conditional-formattings-xform":86,"./col-xform":91,"./data-validations-xform":92,"./dimension-xform":93,"./drawing-xform":94,"./ext-lst-xform":95,"./header-footer-xform":96,"./hyperlink-xform":97,"./merge-cell-xform":98,"./merges":99,"./page-margins-xform":102,"./page-setup-xform":104,"./picture-xform":105,"./print-options-xform":106,"./row-breaks-xform":107,"./row-xform":108,"./sheet-format-properties-xform":109,"./sheet-properties-xform":110,"./sheet-protection-xform":111,"./sheet-view-xform":112,"./table-part-xform":113}],115:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(e){var n;return i(this,r),(n=t.call(this)).tag=e.tag,n.attr=e.attr,n}return s(r,[{key:"render",value:function(e,t){t&&(e.openNode(this.tag),e.closeNode())}},{key:"parseOpen",value:function(e){e.name===this.tag&&(this.model=!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],116:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(e){var n;return i(this,r),(n=t.call(this)).tag=e.tag,n.attr=e.attr,n.attrs=e.attrs,n._format=e.format||function(e){try{return Number.isNaN(e.getTime())?"":e.toISOString()}catch(e){return""}},n._parse=e.parse||function(e){return new Date(e)},n}return s(r,[{key:"render",value:function(e,t){t&&(e.openNode(this.tag),this.attrs&&e.addAttributes(this.attrs),this.attr?e.addAttribute(this.attr,this._format(t)):e.writeText(this._format(t)),e.closeNode())}},{key:"parseOpen",value:function(e){e.name===this.tag&&(this.attr?this.model=this._parse(e.attributes[this.attr]):this.text=[])}},{key:"parseText",value:function(e){this.attr||this.text.push(e)}},{key:"parseClose",value:function(){return this.attr||(this.model=this._parse(this.text.join(""))),!1}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],117:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(e){var n;return i(this,r),(n=t.call(this)).tag=e.tag,n.attr=e.attr,n.attrs=e.attrs,n.zero=e.zero,n}return s(r,[{key:"render",value:function(e,t){(t||this.zero)&&(e.openNode(this.tag),this.attrs&&e.addAttributes(this.attrs),this.attr?e.addAttribute(this.attr,t):e.writeText(t),e.closeNode())}},{key:"parseOpen",value:function(e){return e.name===this.tag&&(this.attr?this.model=parseInt(e.attributes[this.attr],10):this.text=[],!0)}},{key:"parseText",value:function(e){this.attr||this.text.push(e)}},{key:"parseClose",value:function(){return this.attr||(this.model=parseInt(this.text.join("")||0,10)),!1}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],118:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(e){var n;return i(this,r),(n=t.call(this)).tag=e.tag,n.attr=e.attr,n.attrs=e.attrs,n}return s(r,[{key:"render",value:function(e,t){void 0!==t&&(e.openNode(this.tag),this.attrs&&e.addAttributes(this.attrs),this.attr?e.addAttribute(this.attr,t):e.writeText(t),e.closeNode())}},{key:"parseOpen",value:function(e){e.name===this.tag&&(this.attr?this.model=e.attributes[this.attr]:this.text=[])}},{key:"parseText",value:function(e){this.attr||this.text.push(e)}},{key:"parseClose",value:function(){return this.attr||(this.model=this.text.join("")),!1}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],119:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("./base-xform"),m=e("../../utils/xml-stream");function g(e,t){e.openNode(t.tag,t.$),t.c&&t.c.forEach((function(t){g(e,t)})),t.t&&e.writeText(t.t),e.closeNode()}var v=function(e){a(r,e);var t=u(r);function r(e){var n;return i(this,r),(n=t.call(this))._model=e,n}return s(r,[{key:"render",value:function(e){if(!this._xml){var t=new m;g(t,this._model),this._xml=t.xml}e.writeXml(this._xml)}},{key:"parseOpen",value:function(){return!0}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(e){return e!==this._model.tag}}]),r}(p);t.exports=v},{"../../utils/xml-stream":27,"./base-xform":31}],120:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("./text-xform"),m=e("./rich-text-xform"),g=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={r:new m,t:new p},e}return s(r,[{key:"render",value:function(e,t){if(e.openNode(this.tag,{sb:t.sb||0,eb:t.eb||0}),t&&t.hasOwnProperty("richText")&&t.richText){var r=this.map.r;t.richText.forEach((function(t){r.render(e,t)}))}else t&&this.map.t.render(e,t.text);e.closeNode()}},{key:"parseOpen",value:function(e){var t=e.name;return this.parser?(this.parser.parseOpen(e),!0):t===this.tag?(this.model={sb:parseInt(e.attributes.sb,10),eb:parseInt(e.attributes.eb,10)},!0):(this.parser=this.map[t],!!this.parser&&(this.parser.parseOpen(e),!0))}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){if(this.parser){if(!this.parser.parseClose(e)){switch(e){case"r":var t=this.model.richText;t||(t=this.model.richText=[]),t.push(this.parser.model);break;case"t":this.model.text=this.parser.model}this.parser=void 0}return!0}return e!==this.tag}},{key:"tag",get:function(){return"rPh"}}]),r}(e("../base-xform"));t.exports=g},{"../base-xform":31,"./rich-text-xform":121,"./text-xform":124}],121:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("./text-xform"),m=e("../style/font-xform"),g=function(e){a(r,e);var t=u(r);function r(e){var n;return i(this,r),(n=t.call(this)).model=e,n}return s(r,[{key:"render",value:function(e,t){t=t||this.model,e.openNode("r"),t.font&&this.fontXform.render(e,t.font),this.textXform.render(e,t.text),e.closeNode()}},{key:"parseOpen",value:function(e){if(this.parser)return this.parser.parseOpen(e),!0;switch(e.name){case"r":return this.model={},!0;case"t":return this.parser=this.textXform,this.parser.parseOpen(e),!0;case"rPr":return this.parser=this.fontXform,this.parser.parseOpen(e),!0;default:return!1}}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){switch(e){case"r":return!1;case"t":return this.model.text=this.parser.model,this.parser=void 0,!0;case"rPr":return this.model.font=this.parser.model,this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(e),!0}}},{key:"tag",get:function(){return"r"}},{key:"textXform",get:function(){return this._textXform||(this._textXform=new p)}},{key:"fontXform",get:function(){return this._fontXform||(this._fontXform=new m(r.FONT_OPTIONS))}}]),r}(e("../base-xform"));g.FONT_OPTIONS={tagName:"rPr",fontNameTag:"rFont"},t.exports=g},{"../base-xform":31,"../style/font-xform":130,"./text-xform":124}],122:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("./text-xform"),m=e("./rich-text-xform"),g=e("./phonetic-text-xform"),v=function(e){a(r,e);var t=u(r);function r(e){var n;return i(this,r),(n=t.call(this)).model=e,n.map={r:new m,t:new p,rPh:new g},n}return s(r,[{key:"render",value:function(e,t){var r=this;e.openNode(this.tag),t&&t.hasOwnProperty("richText")&&t.richText?t.richText.length?t.richText.forEach((function(t){r.map.r.render(e,t)})):this.map.t.render(e,""):null!=t&&this.map.t.render(e,t),e.closeNode()}},{key:"parseOpen",value:function(e){var t=e.name;return this.parser?(this.parser.parseOpen(e),!0):t===this.tag?(this.model={},!0):(this.parser=this.map[t],!!this.parser&&(this.parser.parseOpen(e),!0))}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){if(this.parser){if(!this.parser.parseClose(e)){switch(e){case"r":var t=this.model.richText;t||(t=this.model.richText=[]),t.push(this.parser.model);break;case"t":this.model=this.parser.model}this.parser=void 0}return!0}return e!==this.tag}},{key:"tag",get:function(){return"si"}}]),r}(e("../base-xform"));t.exports=v},{"../base-xform":31,"./phonetic-text-xform":120,"./rich-text-xform":121,"./text-xform":124}],123:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../../utils/xml-stream"),m=e("../base-xform"),g=e("./shared-string-xform"),v=function(e){a(r,e);var t=u(r);function r(e){var n;return i(this,r),(n=t.call(this)).model=e||{values:[],count:0},n.hash=Object.create(null),n.rich=Object.create(null),n}return s(r,[{key:"getString",value:function(e){return this.model.values[e]}},{key:"add",value:function(e){return e.richText?this.addRichText(e):this.addText(e)}},{key:"addText",value:function(e){var t=this.hash[e];return void 0===t&&(t=this.hash[e]=this.model.values.length,this.model.values.push(e)),this.model.count++,t}},{key:"addRichText",value:function(e){var t=this.sharedStringXform.toXml(e),r=this.rich[t];return void 0===r&&(r=this.rich[t]=this.model.values.length,this.model.values.push(e)),this.model.count++,r}},{key:"render",value:function(e,t){t=t||this._values,e.openXml(p.StdDocAttributes),e.openNode("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:t.count,uniqueCount:t.values.length});var r=this.sharedStringXform;t.values.forEach((function(t){r.render(e,t)})),e.closeNode()}},{key:"parseOpen",value:function(e){if(this.parser)return this.parser.parseOpen(e),!0;switch(e.name){case"sst":return!0;case"si":return this.parser=this.sharedStringXform,this.parser.parseOpen(e),!0;default:throw new Error("Unexpected xml node in parseOpen: ".concat(JSON.stringify(e)))}}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){if(this.parser)return this.parser.parseClose(e)||(this.model.values.push(this.parser.model),this.model.count++,this.parser=void 0),!0;if("sst"===e)return!1;throw new Error("Unexpected xml node in parseClose: ".concat(e))}},{key:"sharedStringXform",get:function(){return this._sharedStringXform||(this._sharedStringXform=new g)}},{key:"values",get:function(){return this.model.values}},{key:"uniqueCount",get:function(){return this.model.values.length}},{key:"count",get:function(){return this.model.count}}]),r}(m);t.exports=v},{"../../../utils/xml-stream":27,"../base-xform":31,"./shared-string-xform":122}],124:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){e.openNode("t"),/^\s|\n|\s$/.test(t)&&e.addAttribute("xml:space","preserve"),e.writeText(t),e.closeNode()}},{key:"parseOpen",value:function(e){return"t"===e.name&&(this._text=[],!0)}},{key:"parseText",value:function(e){this._text.push(e)}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return"t"}},{key:"model",get:function(){return this._text.join("").replace(/_x([0-9A-F]{4})_/g,(function(e,t){return String.fromCharCode(parseInt(t,16))}))}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],125:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../../doc/enums"),m=e("../../../utils/utils"),g=e("../base-xform"),v={horizontalValues:["left","center","right","fill","centerContinuous","distributed","justify"].reduce((function(e,t){return e[t]=!0,e}),{}),horizontal:function(e){return this.horizontalValues[e]?e:void 0},verticalValues:["top","middle","bottom","distributed","justify"].reduce((function(e,t){return e[t]=!0,e}),{}),vertical:function(e){return"middle"===e?"center":this.verticalValues[e]?e:void 0},wrapText:function(e){return!!e||void 0},shrinkToFit:function(e){return!!e||void 0},textRotation:function(e){return"vertical"===e||(e=m.validInt(e))>=-90&&e<=90?e:void 0},indent:function(e){return e=m.validInt(e),Math.max(0,e)},readingOrder:function(e){switch(e){case"ltr":return p.ReadingOrder.LeftToRight;case"rtl":return p.ReadingOrder.RightToLeft;default:return}}},y={toXml:function(e){if(e=v.textRotation(e)){if("vertical"===e)return 255;var t=Math.round(e);if(t>=0&&t<=90)return t;if(t<0&&t>=-90)return 90-t}},toModel:function(e){var t=m.validInt(e);if(void 0!==t){if(255===t)return"vertical";if(t>=0&&t<=90)return t;if(t>90&&t<=180)return 90-t}}},b=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){e.addRollback(),e.openNode("alignment");var r=!1;function n(t,n){n&&(e.addAttribute(t,n),r=!0)}n("horizontal",v.horizontal(t.horizontal)),n("vertical",v.vertical(t.vertical)),n("wrapText",!!v.wrapText(t.wrapText)&&"1"),n("shrinkToFit",!!v.shrinkToFit(t.shrinkToFit)&&"1"),n("indent",v.indent(t.indent)),n("textRotation",y.toXml(t.textRotation)),n("readingOrder",v.readingOrder(t.readingOrder)),e.closeNode(),r?e.commit():e.rollback()}},{key:"parseOpen",value:function(e){var t={},r=!1;function n(e,n,i){e&&(t[n]=i,r=!0)}n(e.attributes.horizontal,"horizontal",e.attributes.horizontal),n(e.attributes.vertical,"vertical","center"===e.attributes.vertical?"middle":e.attributes.vertical),n(e.attributes.wrapText,"wrapText",!!e.attributes.wrapText),n(e.attributes.shrinkToFit,"shrinkToFit",!!e.attributes.shrinkToFit),n(e.attributes.indent,"indent",parseInt(e.attributes.indent,10)),n(e.attributes.textRotation,"textRotation",y.toModel(e.attributes.textRotation)),n(e.attributes.readingOrder,"readingOrder","2"===e.attributes.readingOrder?"rtl":"ltr"),this.model=r?t:null}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return"alignment"}}]),r}(g);t.exports=b},{"../../../doc/enums":7,"../../../utils/utils":26,"../base-xform":31}],126:[function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function d(e){var t=m();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var v=e("../base-xform"),y=e("./color-xform"),b=function(e){c(r,e);var t=d(r);function r(e){var n;return a(this,r),(n=t.call(this)).name=e,n.map={color:new y},n}return u(r,[{key:"render",value:function(e,t,r){var n=t&&t.color||r||this.defaultColor;e.openNode(this.name),t&&t.style&&(e.addAttribute("style",t.style),n&&this.map.color.render(e,n)),e.closeNode()}},{key:"parseOpen",value:function(e){if(this.parser)return this.parser.parseOpen(e),!0;switch(e.name){case this.name:var t=e.attributes.style;return this.model=t?{style:t}:void 0,!0;case"color":return this.parser=this.map.color,this.parser.parseOpen(e),!0;default:return!1}}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):(e===this.name&&this.map.color.model&&(this.model||(this.model={}),this.model.color=this.map.color.model),!1)}},{key:"validStyle",value:function(e){return r.validStyleValues[e]}},{key:"tag",get:function(){return this.name}}]),r}(v);b.validStyleValues=["thin","dotted","dashDot","hair","dashDotDot","slantDashDot","mediumDashed","mediumDashDotDot","mediumDashDot","medium","double","thick"].reduce((function(e,t){return e[t]=!0,e}),{});var w=function(e){c(r,e);var t=d(r);function r(){var e;return a(this,r),(e=t.call(this)).map={top:new b("top"),left:new b("left"),bottom:new b("bottom"),right:new b("right"),diagonal:new b("diagonal")},e}return u(r,[{key:"render",value:function(e,t){var r=t.color;function n(n,o){n&&!n.color&&t.color&&(n=i(i({},n),{},{color:t.color})),o.render(e,n,r)}e.openNode("border"),t.diagonal&&t.diagonal.style&&(t.diagonal.up&&e.addAttribute("diagonalUp","1"),t.diagonal.down&&e.addAttribute("diagonalDown","1")),n(t.left,this.map.left),n(t.right,this.map.right),n(t.top,this.map.top),n(t.bottom,this.map.bottom),n(t.diagonal,this.map.diagonal),e.closeNode()}},{key:"parseOpen",value:function(e){return this.parser?(this.parser.parseOpen(e),!0):"border"===e.name?(this.reset(),this.diagonalUp=!!e.attributes.diagonalUp,this.diagonalDown=!!e.attributes.diagonalDown,!0):(this.parser=this.map[e.name],!!this.parser&&(this.parser.parseOpen(e),!0))}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){if(this.parser)return this.parser.parseClose(e)||(this.parser=void 0),!0;if("border"===e){var t=this.model={},r=function(e,r,n){r&&(n&&Object.assign(r,n),t[e]=r)};r("left",this.map.left.model),r("right",this.map.right.model),r("top",this.map.top.model),r("bottom",this.map.bottom.model),r("diagonal",this.map.diagonal.model,{up:this.diagonalUp,down:this.diagonalDown})}return!1}}]),r}(v);t.exports=w},{"../base-xform":31,"./color-xform":127}],127:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(e){var n;return i(this,r),(n=t.call(this)).name=e||"color",n}return s(r,[{key:"render",value:function(e,t){return!!t&&(e.openNode(this.name),t.argb?e.addAttribute("rgb",t.argb):void 0!==t.theme?(e.addAttribute("theme",t.theme),void 0!==t.tint&&e.addAttribute("tint",t.tint)):void 0!==t.indexed?e.addAttribute("indexed",t.indexed):e.addAttribute("auto","1"),e.closeNode(),!0)}},{key:"parseOpen",value:function(e){return e.name===this.name&&(e.attributes.rgb?this.model={argb:e.attributes.rgb}:e.attributes.theme?(this.model={theme:parseInt(e.attributes.theme,10)},e.attributes.tint&&(this.model.tint=parseFloat(e.attributes.tint))):e.attributes.indexed?this.model={indexed:parseInt(e.attributes.indexed,10)}:this.model=void 0,!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return this.name}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],128:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../base-xform"),m=e("./alignment-xform"),g=e("./border-xform"),v=e("./fill-xform"),y=e("./font-xform"),b=e("./numfmt-xform"),w=e("./protection-xform"),C=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={alignment:new m,border:new g,fill:new v,font:new y,numFmt:new b,protection:new w},e}return s(r,[{key:"render",value:function(e,t){e.openNode(this.tag),t.font&&this.map.font.render(e,t.font),t.numFmt&&this.map.numFmt.render(e,t.numFmt),t.fill&&this.map.fill.render(e,t.fill),t.alignment&&this.map.alignment.render(e,t.alignment),t.border&&this.map.border.render(e,t.border),t.protection&&this.map.protection.render(e,t.protection),e.closeNode()}},{key:"parseOpen",value:function(e){return this.parser?(this.parser.parseOpen(e),!0):e.name===this.tag?(this.reset(),!0):(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e),!0)}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):e!==this.tag||(this.model={alignment:this.map.alignment.model,border:this.map.border.model,fill:this.map.fill.model,font:this.map.font.model,numFmt:this.map.numFmt.model,protection:this.map.protection.model},!1)}},{key:"tag",get:function(){return"dxf"}}]),r}(p);t.exports=C},{"../base-xform":31,"./alignment-xform":125,"./border-xform":126,"./fill-xform":129,"./font-xform":130,"./numfmt-xform":131,"./protection-xform":132}],129:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../base-xform"),m=e("./color-xform"),g=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={color:new m},e}return s(r,[{key:"render",value:function(e,t){e.openNode("stop"),e.addAttribute("position",t.position),this.map.color.render(e,t.color),e.closeNode()}},{key:"parseOpen",value:function(e){if(this.parser)return this.parser.parseOpen(e),!0;switch(e.name){case"stop":return this.model={position:parseFloat(e.attributes.position)},!0;case"color":return this.parser=this.map.color,this.parser.parseOpen(e),!0;default:return!1}}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(e){return!!this.parser&&(this.parser.parseClose(e)||(this.model.color=this.parser.model,this.parser=void 0),!0)}},{key:"tag",get:function(){return"stop"}}]),r}(p),v=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={fgColor:new m("fgColor"),bgColor:new m("bgColor")},e}return s(r,[{key:"render",value:function(e,t){e.openNode("patternFill"),e.addAttribute("patternType",t.pattern),t.fgColor&&this.map.fgColor.render(e,t.fgColor),t.bgColor&&this.map.bgColor.render(e,t.bgColor),e.closeNode()}},{key:"parseOpen",value:function(e){return this.parser?(this.parser.parseOpen(e),!0):"patternFill"===e.name?(this.model={type:"pattern",pattern:e.attributes.patternType},!0):(this.parser=this.map[e.name],!!this.parser&&(this.parser.parseOpen(e),!0))}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){return!!this.parser&&(this.parser.parseClose(e)||(this.parser.model&&(this.model[e]=this.parser.model),this.parser=void 0),!0)}},{key:"name",get:function(){return"pattern"}},{key:"tag",get:function(){return"patternFill"}}]),r}(p),y=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={stop:new g},e}return s(r,[{key:"render",value:function(e,t){switch(e.openNode("gradientFill"),t.gradient){case"angle":e.addAttribute("degree",t.degree);break;case"path":e.addAttribute("type","path"),t.center.left&&(e.addAttribute("left",t.center.left),void 0===t.center.right&&e.addAttribute("right",t.center.left)),t.center.right&&e.addAttribute("right",t.center.right),t.center.top&&(e.addAttribute("top",t.center.top),void 0===t.center.bottom&&e.addAttribute("bottom",t.center.top)),t.center.bottom&&e.addAttribute("bottom",t.center.bottom)}var r=this.map.stop;t.stops.forEach((function(t){r.render(e,t)})),e.closeNode()}},{key:"parseOpen",value:function(e){if(this.parser)return this.parser.parseOpen(e),!0;switch(e.name){case"gradientFill":var t=this.model={stops:[]};return e.attributes.degree?(t.gradient="angle",t.degree=parseInt(e.attributes.degree,10)):"path"===e.attributes.type&&(t.gradient="path",t.center={left:e.attributes.left?parseFloat(e.attributes.left):0,top:e.attributes.top?parseFloat(e.attributes.top):0},e.attributes.right!==e.attributes.left&&(t.center.right=e.attributes.right?parseFloat(e.attributes.right):0),e.attributes.bottom!==e.attributes.top&&(t.center.bottom=e.attributes.bottom?parseFloat(e.attributes.bottom):0)),!0;case"stop":return this.parser=this.map.stop,this.parser.parseOpen(e),!0;default:return!1}}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){return!!this.parser&&(this.parser.parseClose(e)||(this.model.stops.push(this.parser.model),this.parser=void 0),!0)}},{key:"name",get:function(){return"gradient"}},{key:"tag",get:function(){return"gradientFill"}}]),r}(p),b=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={patternFill:new v,gradientFill:new y},e}return s(r,[{key:"render",value:function(e,t){switch(e.addRollback(),e.openNode("fill"),t.type){case"pattern":this.map.patternFill.render(e,t);break;case"gradient":this.map.gradientFill.render(e,t);break;default:return void e.rollback()}e.closeNode(),e.commit()}},{key:"parseOpen",value:function(e){return this.parser?(this.parser.parseOpen(e),!0):"fill"===e.name?(this.model={},!0):(this.parser=this.map[e.name],!!this.parser&&(this.parser.parseOpen(e),!0))}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){return!!this.parser&&(this.parser.parseClose(e)||(this.model=this.parser.model,this.model.type=this.parser.name,this.parser=void 0),!0)}},{key:"validStyle",value:function(e){return r.validPatternValues[e]}},{key:"tag",get:function(){return"fill"}}]),r}(p);b.validPatternValues=["none","solid","darkVertical","darkGray","mediumGray","lightGray","gray125","gray0625","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","lightGrid"].reduce((function(e,t){return e[t]=!0,e}),{}),b.StopXform=g,b.PatternFillXform=v,b.GradientFillXform=y,t.exports=b},{"../base-xform":31,"./color-xform":127}],130:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("./color-xform"),m=e("../simple/boolean-xform"),g=e("../simple/integer-xform"),v=e("../simple/string-xform"),y=e("./underline-xform"),b=e("../../../utils/under-dash"),w=function(e){a(r,e);var t=u(r);function r(e){var n;return i(this,r),(n=t.call(this)).options=e||r.OPTIONS,n.map={b:{prop:"bold",xform:new m({tag:"b",attr:"val"})},i:{prop:"italic",xform:new m({tag:"i",attr:"val"})},u:{prop:"underline",xform:new y},charset:{prop:"charset",xform:new g({tag:"charset",attr:"val"})},color:{prop:"color",xform:new p},condense:{prop:"condense",xform:new m({tag:"condense",attr:"val"})},extend:{prop:"extend",xform:new m({tag:"extend",attr:"val"})},family:{prop:"family",xform:new g({tag:"family",attr:"val"})},outline:{prop:"outline",xform:new m({tag:"outline",attr:"val"})},vertAlign:{prop:"vertAlign",xform:new v({tag:"vertAlign",attr:"val"})},scheme:{prop:"scheme",xform:new v({tag:"scheme",attr:"val"})},shadow:{prop:"shadow",xform:new m({tag:"shadow",attr:"val"})},strike:{prop:"strike",xform:new m({tag:"strike",attr:"val"})},sz:{prop:"size",xform:new g({tag:"sz",attr:"val"})}},n.map[n.options.fontNameTag]={prop:"name",xform:new v({tag:n.options.fontNameTag,attr:"val"})},n}return s(r,[{key:"render",value:function(e,t){var r=this.map;e.openNode(this.options.tagName),b.each(this.map,(function(n,i){r[i].xform.render(e,t[n.prop])})),e.closeNode()}},{key:"parseOpen",value:function(e){return this.parser?(this.parser.parseOpen(e),!0):this.map[e.name]?(this.parser=this.map[e.name].xform,this.parser.parseOpen(e)):e.name===this.options.tagName&&(this.model={},!0)}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){if(this.parser&&!this.parser.parseClose(e)){var t=this.map[e];return this.parser.model&&(this.model[t.prop]=this.parser.model),this.parser=void 0,!0}return e!==this.options.tagName}},{key:"tag",get:function(){return this.options.tagName}}]),r}(e("../base-xform"));w.OPTIONS={tagName:"font",fontNameTag:"name"},t.exports=w},{"../../../utils/under-dash":25,"../base-xform":31,"../simple/boolean-xform":115,"../simple/integer-xform":117,"../simple/string-xform":118,"./color-xform":127,"./underline-xform":135}],131:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../../utils/under-dash"),m=e("../../defaultnumformats"),g=e("../base-xform");function v(){var e={};return p.each(m,(function(t,r){t.f&&(e[t.f]=parseInt(r,10))})),e}var y=v(),b=function(e){a(r,e);var t=u(r);function r(e,n){var o;return i(this,r),(o=t.call(this)).id=e,o.formatCode=n,o}return s(r,[{key:"render",value:function(e,t){e.leafNode("numFmt",{numFmtId:t.id,formatCode:t.formatCode})}},{key:"parseOpen",value:function(e){return"numFmt"===e.name&&(this.model={id:parseInt(e.attributes.numFmtId,10),formatCode:e.attributes.formatCode.replace(/[\\](.)/g,"$1")},!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return"numFmt"}}]),r}(g);b.getDefaultFmtId=function(e){return y[e]},b.getDefaultFmtCode=function(e){return m[e]&&m[e].f},t.exports=b},{"../../../utils/under-dash":25,"../../defaultnumformats":29,"../base-xform":31}],132:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../base-xform"),m={boolean:function(e,t){return void 0===e?t:e}},g=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){e.addRollback(),e.openNode("protection");var r=!1;function n(t,n){void 0!==n&&(e.addAttribute(t,n),r=!0)}n("locked",m.boolean(t.locked,!0)?void 0:"0"),n("hidden",m.boolean(t.hidden,!1)?"1":void 0),e.closeNode(),r?e.commit():e.rollback()}},{key:"parseOpen",value:function(e){var t={locked:!("0"===e.attributes.locked),hidden:"1"===e.attributes.hidden},r=!t.locked||t.hidden;this.model=r?t:null}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return"protection"}}]),r}(p);t.exports=g},{"../base-xform":31}],133:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../base-xform"),m=e("./alignment-xform"),g=e("./protection-xform"),v=function(e){a(r,e);var t=u(r);function r(e){var n;return i(this,r),(n=t.call(this)).xfId=!(!e||!e.xfId),n.map={alignment:new m,protection:new g},n}return s(r,[{key:"render",value:function(e,t){e.openNode("xf",{numFmtId:t.numFmtId||0,fontId:t.fontId||0,fillId:t.fillId||0,borderId:t.borderId||0}),this.xfId&&e.addAttribute("xfId",t.xfId||0),t.numFmtId&&e.addAttribute("applyNumberFormat","1"),t.fontId&&e.addAttribute("applyFont","1"),t.fillId&&e.addAttribute("applyFill","1"),t.borderId&&e.addAttribute("applyBorder","1"),t.alignment&&e.addAttribute("applyAlignment","1"),t.protection&&e.addAttribute("applyProtection","1"),t.alignment&&this.map.alignment.render(e,t.alignment),t.protection&&this.map.protection.render(e,t.protection),e.closeNode()}},{key:"parseOpen",value:function(e){if(this.parser)return this.parser.parseOpen(e),!0;switch(e.name){case"xf":return this.model={numFmtId:parseInt(e.attributes.numFmtId,10),fontId:parseInt(e.attributes.fontId,10),fillId:parseInt(e.attributes.fillId,10),borderId:parseInt(e.attributes.borderId,10)},this.xfId&&(this.model.xfId=parseInt(e.attributes.xfId,10)),!0;case"alignment":return this.parser=this.map.alignment,this.parser.parseOpen(e),!0;case"protection":return this.parser=this.map.protection,this.parser.parseOpen(e),!0;default:return!1}}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){return this.parser?(this.parser.parseClose(e)||(this.map.protection===this.parser?this.model.protection=this.parser.model:this.model.alignment=this.parser.model,this.parser=void 0),!0):"xf"!==e}},{key:"tag",get:function(){return"xf"}}]),r}(p);t.exports=v},{"../base-xform":31,"./alignment-xform":125,"./protection-xform":132}],134:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../../../doc/enums"),m=e("../../../utils/xml-stream"),g=e("../base-xform"),v=e("../static-xform"),y=e("../list-xform"),b=e("./font-xform"),w=e("./fill-xform"),C=e("./border-xform"),_=e("./numfmt-xform"),S=e("./style-xform"),x=e("./dxf-xform"),k=164,T=function(e){a(r,e);var t=u(r);function r(e){var n;return i(this,r),(n=t.call(this)).map={numFmts:new y({tag:"numFmts",count:!0,childXform:new _}),fonts:new y({tag:"fonts",count:!0,childXform:new b,$:{"x14ac:knownFonts":1}}),fills:new y({tag:"fills",count:!0,childXform:new w}),borders:new y({tag:"borders",count:!0,childXform:new C}),cellStyleXfs:new y({tag:"cellStyleXfs",count:!0,childXform:new S}),cellXfs:new y({tag:"cellXfs",count:!0,childXform:new S({xfId:!0})}),dxfs:new y({tag:"dxfs",always:!0,count:!0,childXform:new x}),numFmt:new _,font:new b,fill:new w,border:new C,style:new S({xfId:!0}),cellStyles:r.STATIC_XFORMS.cellStyles,tableStyles:r.STATIC_XFORMS.tableStyles,extLst:r.STATIC_XFORMS.extLst},e&&n.init(),n}return s(r,[{key:"initIndex",value:function(){this.index={style:{},numFmt:{},numFmtNextId:164,font:{},border:{},fill:{}}}},{key:"init",value:function(){this.model={styles:[],numFmts:[],fonts:[],borders:[],fills:[],dxfs:[]},this.initIndex(),this._addBorder({}),this._addStyle({numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}),this._addFill({type:"pattern",pattern:"none"}),this._addFill({type:"pattern",pattern:"gray125"}),this.weakMap=new WeakMap}},{key:"render",value:function(e,t){t=t||this.model,e.openXml(m.StdDocAttributes),e.openNode("styleSheet",r.STYLESHEET_ATTRIBUTES),this.index?(t.numFmts&&t.numFmts.length&&(e.openNode("numFmts",{count:t.numFmts.length}),t.numFmts.forEach((function(t){e.writeXml(t)})),e.closeNode()),t.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),e.openNode("fonts",{count:t.fonts.length,"x14ac:knownFonts":1}),t.fonts.forEach((function(t){e.writeXml(t)})),e.closeNode(),e.openNode("fills",{count:t.fills.length}),t.fills.forEach((function(t){e.writeXml(t)})),e.closeNode(),e.openNode("borders",{count:t.borders.length}),t.borders.forEach((function(t){e.writeXml(t)})),e.closeNode(),this.map.cellStyleXfs.render(e,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),e.openNode("cellXfs",{count:t.styles.length}),t.styles.forEach((function(t){e.writeXml(t)})),e.closeNode()):(this.map.numFmts.render(e,t.numFmts),this.map.fonts.render(e,t.fonts),this.map.fills.render(e,t.fills),this.map.borders.render(e,t.borders),this.map.cellStyleXfs.render(e,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),this.map.cellXfs.render(e,t.styles)),r.STATIC_XFORMS.cellStyles.render(e),this.map.dxfs.render(e,t.dxfs),r.STATIC_XFORMS.tableStyles.render(e),r.STATIC_XFORMS.extLst.render(e),e.closeNode()}},{key:"parseOpen",value:function(e){return this.parser?(this.parser.parseOpen(e),!0):"styleSheet"===e.name?(this.initIndex(),!0):(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e),!0)}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){var t=this;if(this.parser)return this.parser.parseClose(e)||(this.parser=void 0),!0;if("styleSheet"===e){this.model={};var r=function(e,r){r.model&&r.model.length&&(t.model[e]=r.model)};if(r("numFmts",this.map.numFmts),r("fonts",this.map.fonts),r("fills",this.map.fills),r("borders",this.map.borders),r("styles",this.map.cellXfs),r("dxfs",this.map.dxfs),this.index={model:[],numFmt:[]},this.model.numFmts){var n=this.index.numFmt;this.model.numFmts.forEach((function(e){n[e.id]=e.formatCode}))}return!1}return!0}},{key:"addStyleModel",value:function(e,t){if(!e)return 0;if(this.model.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),this.weakMap&&this.weakMap.has(e))return this.weakMap.get(e);var r={};if(t=t||p.ValueType.Number,e.numFmt)r.numFmtId=this._addNumFmtStr(e.numFmt);else switch(t){case p.ValueType.Number:r.numFmtId=this._addNumFmtStr("General");break;case p.ValueType.Date:r.numFmtId=this._addNumFmtStr("mm-dd-yy")}e.font&&(r.fontId=this._addFont(e.font)),e.border&&(r.borderId=this._addBorder(e.border)),e.fill&&(r.fillId=this._addFill(e.fill)),e.alignment&&(r.alignment=e.alignment),e.protection&&(r.protection=e.protection);var n=this._addStyle(r);return this.weakMap&&this.weakMap.set(e,n),n}},{key:"getStyleModel",value:function(e){var t=this.model.styles[e];if(!t)return null;var r=this.index.model[e];if(r)return r;if(r=this.index.model[e]={},t.numFmtId){var n=this.index.numFmt[t.numFmtId]||_.getDefaultFmtCode(t.numFmtId);n&&(r.numFmt=n)}function i(e,t,n){if(n||0===n){var i=t[n];i&&(r[e]=i)}}return i("font",this.model.fonts,t.fontId),i("border",this.model.borders,t.borderId),i("fill",this.model.fills,t.fillId),t.alignment&&(r.alignment=t.alignment),t.protection&&(r.protection=t.protection),r}},{key:"addDxfStyle",value:function(e){return this.model.dxfs.push(e),this.model.dxfs.length-1}},{key:"getDxfStyle",value:function(e){return this.model.dxfs[e]}},{key:"_addStyle",value:function(e){var t=this.map.style.toXml(e),r=this.index.style[t];return void 0===r&&(r=this.index.style[t]=this.model.styles.length,this.model.styles.push(t)),r}},{key:"_addNumFmtStr",value:function(e){var t=_.getDefaultFmtId(e);if(void 0!==t)return t;if(void 0!==(t=this.index.numFmt[e]))return t;t=this.index.numFmt[e]=k+this.model.numFmts.length;var r=this.map.numFmt.toXml({id:t,formatCode:e});return this.model.numFmts.push(r),t}},{key:"_addFont",value:function(e){var t=this.map.font.toXml(e),r=this.index.font[t];return void 0===r&&(r=this.index.font[t]=this.model.fonts.length,this.model.fonts.push(t)),r}},{key:"_addBorder",value:function(e){var t=this.map.border.toXml(e),r=this.index.border[t];return void 0===r&&(r=this.index.border[t]=this.model.borders.length,this.model.borders.push(t)),r}},{key:"_addFill",value:function(e){var t=this.map.fill.toXml(e),r=this.index.fill[t];return void 0===r&&(r=this.index.fill[t]=this.model.fills.length,this.model.fills.push(t)),r}}]),r}(g);T.STYLESHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac x16r2","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main"},T.STATIC_XFORMS={cellStyles:new v({tag:"cellStyles",$:{count:1},c:[{tag:"cellStyle",$:{name:"Normal",xfId:0,builtinId:0}}]}),dxfs:new v({tag:"dxfs",$:{count:0}}),tableStyles:new v({tag:"tableStyles",$:{count:0,defaultTableStyle:"TableStyleMedium2",defaultPivotStyle:"PivotStyleLight16"}}),extLst:new v({tag:"extLst",c:[{tag:"ext",$:{uri:"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},c:[{tag:"x14:slicerStyles",$:{defaultSlicerStyle:"SlicerStyleLight1"}}]},{tag:"ext",$:{uri:"{9260A510-F301-46a8-8635-F512D64BE5F5}","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},c:[{tag:"x15:timelineStyles",$:{defaultTimelineStyle:"TimeSlicerStyleLight1"}}]}]})};var R=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).model={styles:[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}],numFmts:[],fonts:[{size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}],borders:[{}],fills:[{type:"pattern",pattern:"none"},{type:"pattern",pattern:"gray125"}]},e}return s(r,[{key:"parseStream",value:function(e){return e.autodrain(),Promise.resolve()}},{key:"addStyleModel",value:function(e,t){return t===p.ValueType.Date?this.dateStyleId:0}},{key:"getStyleModel",value:function(){return{}}},{key:"dateStyleId",get:function(){if(!this._dateStyleId){var e={numFmtId:_.getDefaultFmtId("mm-dd-yy")};this._dateStyleId=this.model.styles.length,this.model.styles.push(e)}return this._dateStyleId}}]),r}(T);T.Mock=R,t.exports=T},{"../../../doc/enums":7,"../../../utils/xml-stream":27,"../base-xform":31,"../list-xform":70,"../static-xform":119,"./border-xform":126,"./dxf-xform":128,"./fill-xform":129,"./font-xform":130,"./numfmt-xform":131,"./style-xform":133}],135:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(e){var n;return i(this,r),(n=t.call(this)).model=e,n}return s(r,[{key:"render",value:function(e,t){if(!0===(t=t||this.model))e.leafNode("u");else{var n=r.Attributes[t];n&&e.leafNode("u",n)}}},{key:"parseOpen",value:function(e){"u"===e.name&&(this.model=e.attributes.val||!0)}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return"u"}}]),r}(e("../base-xform"));p.Attributes={single:{},double:{val:"double"},singleAccounting:{val:"singleAccounting"},doubleAccounting:{val:"doubleAccounting"}},t.exports=p},{"../base-xform":31}],136:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=e("../base-xform"),m=e("./filter-column-xform"),g=function(e){a(r,e);var t=u(r);function r(){var e;return i(this,r),(e=t.call(this)).map={filterColumn:new m},e}return s(r,[{key:"prepare",value:function(e){var t=this;e.columns.forEach((function(e,r){t.map.filterColumn.prepare(e,{index:r})}))}},{key:"render",value:function(e,t){var r=this;return e.openNode(this.tag,{ref:t.autoFilterRef}),t.columns.forEach((function(t){r.map.filterColumn.render(e,t)})),e.closeNode(),!0}},{key:"parseOpen",value:function(e){if(this.parser)return this.parser.parseOpen(e),!0;if(e.name===this.tag)return this.model={autoFilterRef:e.attributes.ref,columns:[]},!0;if(this.parser=this.map[e.name],this.parser)return this.parseOpen(e),!0;throw new Error("Unexpected xml node in parseOpen: ".concat(JSON.stringify(e)))}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){if(this.parser)return this.parser.parseClose(e)||(this.model.columns.push(this.parser.model),this.parser=void 0),!0;if(e===this.tag)return!1;throw new Error("Unexpected xml node in parseClose: ".concat(e))}},{key:"tag",get:function(){return"autoFilter"}}]),r}(p);t.exports=g},{"../base-xform":31,"./filter-column-xform":137}],137:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"prepare",value:function(e,t){e.colId=t.index.toString()}},{key:"render",value:function(e,t){return e.leafNode(this.tag,{colId:t.colId,hiddenButton:t.filterButton?"0":"1"}),!0}},{key:"parseOpen",value:function(e){if(e.name===this.tag){var t=e.attributes;return this.model={filterButton:"0"===t.hiddenButton},!0}return!1}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return"filterColumn"}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],138:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"prepare",value:function(e,t){e.id=t.index+1}},{key:"render",value:function(e,t){return e.leafNode(this.tag,{id:t.id.toString(),name:t.name,totalsRowLabel:t.totalsRowLabel,totalsRowFunction:t.totalsRowFunction,dxfId:t.dxfId}),!0}},{key:"parseOpen",value:function(e){if(e.name===this.tag){var t=e.attributes;return this.model={name:t.name,totalsRowLabel:t.totalsRowLabel,totalsRowFunction:t.totalsRowFunction,dxfId:t.dxfId},!0}return!1}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return"tableColumn"}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],139:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){a(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"render",value:function(e,t){return e.leafNode(this.tag,{name:t.theme?t.theme:void 0,showFirstColumn:t.showFirstColumn?"1":"0",showLastColumn:t.showLastColumn?"1":"0",showRowStripes:t.showRowStripes?"1":"0",showColumnStripes:t.showColumnStripes?"1":"0"}),!0}},{key:"parseOpen",value:function(e){if(e.name===this.tag){var t=e.attributes;return this.model={theme:t.name?t.name:null,showFirstColumn:"1"===t.showFirstColumn,showLastColumn:"1"===t.showLastColumn,showRowStripes:"1"===t.showRowStripes,showColumnStripes:"1"===t.showColumnStripes},!0}return!1}},{key:"parseText",value:function(){}},{key:"parseClose",value:function(){return!1}},{key:"tag",get:function(){return"tableStyleInfo"}}]),r}(e("../base-xform"));t.exports=p},{"../base-xform":31}],140:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function d(e){var t=m();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var v=e("../../../utils/xml-stream"),y=e("../base-xform"),b=e("../list-xform"),w=e("./auto-filter-xform"),C=e("./table-column-xform"),_=e("./table-style-info-xform"),S=function(e){c(r,e);var t=d(r);function r(){var e;return a(this,r),(e=t.call(this)).map={autoFilter:new w,tableColumns:new b({tag:"tableColumns",count:!0,empty:!0,childXform:new C}),tableStyleInfo:new _},e}return u(r,[{key:"prepare",value:function(e,t){this.map.autoFilter.prepare(e),this.map.tableColumns.prepare(e.columns,t)}},{key:"render",value:function(e,t){e.openXml(v.StdDocAttributes),e.openNode(this.tag,o(o({},r.TABLE_ATTRIBUTES),{},{id:t.id,name:t.name,displayName:t.displayName||t.name,ref:t.tableRef,totalsRowCount:t.totalsRow?"1":void 0,totalsRowShown:t.totalsRow?void 0:"1",headerRowCount:t.headerRow?"1":"0"})),this.map.autoFilter.render(e,t),this.map.tableColumns.render(e,t.columns),this.map.tableStyleInfo.render(e,t.style),e.closeNode()}},{key:"parseOpen",value:function(e){if(this.parser)return this.parser.parseOpen(e),!0;var t=e.name,r=e.attributes;return t===this.tag?(this.reset(),this.model={name:r.name,displayName:r.displayName||r.name,tableRef:r.ref,totalsRow:"1"===r.totalsRowCount,headerRow:"1"===r.headerRowCount}):(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e)),!0}},{key:"parseText",value:function(e){this.parser&&this.parser.parseText(e)}},{key:"parseClose",value:function(e){var t=this;return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):e!==this.tag||(this.model.columns=this.map.tableColumns.model,this.map.autoFilter.model&&(this.model.autoFilterRef=this.map.autoFilter.model.autoFilterRef,this.map.autoFilter.model.columns.forEach((function(e,r){t.model.columns[r].filterButton=e.filterButton}))),this.model.style=this.map.tableStyleInfo.model,!1)}},{key:"reconcile",value:function(e,t){e.columns.forEach((function(e){void 0!==e.dxfId&&(e.style=t.styles.getDxfStyle(e.dxfId))}))}},{key:"tag",get:function(){return"table"}}]),r}(y);S.TABLE_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3"},t.exports=S},{"../../../utils/xml-stream":27,"../base-xform":31,"../list-xform":70,"./auto-filter-xform":136,"./table-column-xform":138,"./table-style-info-xform":139}],141:[function(e,t,r){(function(r,n){"use strict";function i(e,t,r,n,i,o,s){try{var a=e[o](s),l=a.value}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(n,i)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function a(e){i(s,n,o,a,l,"next",e)}function l(e){i(s,n,o,a,l,"throw",e)}a(void 0)}))}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function u(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}var c=e("fs"),h=e("jszip"),d=e("readable-stream").PassThrough,f=e("../utils/zip-stream"),p=e("../utils/stream-buf"),m=e("../utils/utils"),g=e("../utils/xml-stream"),v=e("../utils/browser-buffer-decode").bufferToString,y=e("./xform/style/styles-xform"),b=e("./xform/core/core-xform"),w=e("./xform/strings/shared-strings-xform"),C=e("./xform/core/relationships-xform"),_=e("./xform/core/content-types-xform"),S=e("./xform/core/app-xform"),x=e("./xform/book/workbook-xform"),k=e("./xform/sheet/worksheet-xform"),T=e("./xform/drawing/drawing-xform"),R=e("./xform/table/table-xform"),E=e("./xform/comment/comments-xform"),M=e("./xform/comment/vml-notes-xform"),P=e("./xml/theme1.js");function O(e,t){return new Promise((function(r,n){c.readFile(e,t,(function(e,t){e?n(e):r(t)}))}))}var I=function(){function e(t){s(this,e),this.workbook=t}return l(e,[{key:"readFile",value:function(){var e=o(regeneratorRuntime.mark((function e(t,r){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.fs.exists(t);case 2:if(e.sent){e.next=4;break}throw new Error("File not found: ".concat(t));case 4:return n=c.createReadStream(t),e.prev=5,e.next=8,this.read(n,r);case 8:return i=e.sent,n.close(),e.abrupt("return",i);case 13:throw e.prev=13,e.t0=e.catch(5),n.close(),e.t0;case 17:case"end":return e.stop()}}),e,this,[[5,13]])})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"parseRels",value:function(e){return(new C).parseStream(e)}},{key:"parseWorkbook",value:function(e){return(new x).parseStream(e)}},{key:"parseSharedStrings",value:function(e){return(new w).parseStream(e)}},{key:"reconcile",value:function(e,t){var r=new x,n=new k(t),i=new T,o=new R;r.reconcile(e);var s={media:e.media,mediaIndex:e.mediaIndex};Object.keys(e.drawings).forEach((function(t){var r=e.drawings[t],n=e.drawingRels[t];n&&(s.rels=n.reduce((function(e,t){return e[t.Id]=t,e}),{}),(r.anchors||[]).forEach((function(e){var t=e.picture&&e.picture.hyperlinks;t&&s.rels[t.rId]&&(t.hyperlink=s.rels[t.rId].Target,delete t.rId)})),i.reconcile(r,s))}));var a={styles:e.styles};Object.values(e.tables).forEach((function(e){o.reconcile(e,a)}));var l={styles:e.styles,sharedStrings:e.sharedStrings,media:e.media,mediaIndex:e.mediaIndex,date1904:e.properties&&e.properties.date1904,drawings:e.drawings,comments:e.comments,tables:e.tables,vmlDrawings:e.vmlDrawings};e.worksheets.forEach((function(t){t.relationships=e.worksheetRels[t.sheetNo],n.reconcile(t,l)})),delete e.worksheetHash,delete e.worksheetRels,delete e.globalRels,delete e.sharedStrings,delete e.workbookRels,delete e.sheetDefs,delete e.styles,delete e.mediaIndex,delete e.drawings,delete e.drawingRels,delete e.vmlDrawings}},{key:"_processWorksheetEntry",value:function(){var e=o(regeneratorRuntime.mark((function e(t,r,n,i,o){var s,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new k(i),e.next=3,s.parseStream(t);case 3:(a=e.sent).sheetNo=n,r.worksheetHash[o]=a,r.worksheets.push(a);case 7:case"end":return e.stop()}}),e)})));function t(t,r,n,i,o){return e.apply(this,arguments)}return t}()},{key:"_processCommentEntry",value:function(){var e=o(regeneratorRuntime.mark((function e(t,r,n){var i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new E,e.next=3,i.parseStream(t);case 3:o=e.sent,r.comments["../".concat(n,".xml")]=o;case 5:case"end":return e.stop()}}),e)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"_processTableEntry",value:function(){var e=o(regeneratorRuntime.mark((function e(t,r,n){var i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new R,e.next=3,i.parseStream(t);case 3:o=e.sent,r.tables["../tables/".concat(n,".xml")]=o;case 5:case"end":return e.stop()}}),e)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"_processWorksheetRelsEntry",value:function(){var e=o(regeneratorRuntime.mark((function e(t,r,n){var i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new C,e.next=3,i.parseStream(t);case 3:o=e.sent,r.worksheetRels[n]=o;case 5:case"end":return e.stop()}}),e)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"_processMediaEntry",value:function(){var e=o(regeneratorRuntime.mark((function e(t,r,n){var i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((i=n.lastIndexOf("."))>=1)){e.next=6;break}return o=n.substr(i+1),s=n.substr(0,i),e.next=6,new Promise((function(e,i){var a=new p;a.on("finish",(function(){r.mediaIndex[n]=r.media.length,r.mediaIndex[s]=r.media.length;var t={type:"image",name:s,extension:o,buffer:a.toBuffer()};r.media.push(t),e()})),t.on("error",(function(e){i(e)})),t.pipe(a)}));case 6:case"end":return e.stop()}}),e)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"_processDrawingEntry",value:function(){var e=o(regeneratorRuntime.mark((function e(t,r,n){var i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new T,e.next=3,i.parseStream(t);case 3:o=e.sent,r.drawings[n]=o;case 5:case"end":return e.stop()}}),e)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"_processDrawingRelsEntry",value:function(){var e=o(regeneratorRuntime.mark((function e(t,r,n){var i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new C,e.next=3,i.parseStream(t);case 3:o=e.sent,r.drawingRels[n]=o;case 5:case"end":return e.stop()}}),e)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"_processVmlDrawingEntry",value:function(){var e=o(regeneratorRuntime.mark((function e(t,r,n){var i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new M,e.next=3,i.parseStream(t);case 3:o=e.sent,r.vmlDrawings["../drawings/".concat(n,".vml")]=o;case 5:case"end":return e.stop()}}),e)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"_processThemeEntry",value:function(){var e=o(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,i){var o=new p;t.on("error",i),o.on("error",i),o.on("finish",(function(){r.themes[n]=o.read().toString(),e()})),t.pipe(o)}));case 2:case"end":return e.stop()}}),e)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"createInputStream",value:function(){throw new Error("`XLSX#createInputStream` is deprecated. You should use `XLSX#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}},{key:"read",value:function(){var e=o(regeneratorRuntime.mark((function e(t,r){var i,o,s,a,l,c,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!t[Symbol.asyncIterator]&&t.pipe&&(t=t.pipe(new d)),i=[],o=!0,s=!1,e.prev=4,l=u(t);case 6:return e.next=8,l.next();case 8:return c=e.sent,o=c.done,e.next=12,c.value;case 12:if(h=e.sent,o){e.next=19;break}f=h,i.push(f);case 16:o=!0,e.next=6;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(4),s=!0,a=e.t0;case 25:if(e.prev=25,e.prev=26,o||null==l.return){e.next=30;break}return e.next=30,l.return();case 30:if(e.prev=30,!s){e.next=33;break}throw a;case 33:return e.finish(30);case 34:return e.finish(25);case 35:return e.abrupt("return",this.load(n.concat(i),r));case 36:case"end":return e.stop()}}),e,this,[[4,21,25,35],[26,,30,34]])})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"load",value:function(){var e=o(regeneratorRuntime.mark((function e(t,i){var o,s,a,l,u,c,f,p,m,g,C,_,x,k,T,R,E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i&&i.base64?n.from(t.toString(),"base64"):t,s={worksheets:[],worksheetHash:{},worksheetRels:[],themes:{},media:[],mediaIndex:{},drawings:{},drawingRels:{},comments:{},tables:{},vmlDrawings:{}},e.next=4,h.loadAsync(o);case 4:a=e.sent,l=0,u=Object.values(a.files);case 6:if(!(l<u.length)){e.next=126;break}if((c=u[l]).dir){e.next=123;break}if("/"===(f=c.name)[0]&&(f=f.substr(1)),p=void 0,!f.match(/xl\/media\//)&&!f.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/)){e.next=21;break}return p=new d,e.t0=p,e.next=17,c.async("nodebuffer");case 17:e.t1=e.sent,e.t0.write.call(e.t0,e.t1),e.next=36;break;case 21:if(p=new d({writableObjectMode:!0,readableObjectMode:!0}),m=void 0,!r.browser){e.next=31;break}return e.t2=v,e.next=27,c.async("nodebuffer");case 27:e.t3=e.sent,m=(0,e.t2)(e.t3),e.next=34;break;case 31:return e.next=33,c.async("string");case 33:m=e.sent;case 34:for(g=16384,C=0;C<m.length;C+=g)p.write(m.substring(C,C+g));case 36:p.end(),e.t4=f,e.next="_rels/.rels"===e.t4?40:"xl/workbook.xml"===e.t4?44:"xl/_rels/workbook.xml.rels"===e.t4?53:"xl/sharedStrings.xml"===e.t4?57:"xl/styles.xml"===e.t4?61:"docProps/app.xml"===e.t4?65:"docProps/core.xml"===e.t4?72:78;break;case 40:return e.next=42,this.parseRels(p);case 42:return s.globalRels=e.sent,e.abrupt("break",123);case 44:return e.next=46,this.parseWorkbook(p);case 46:return _=e.sent,s.sheets=_.sheets,s.definedNames=_.definedNames,s.views=_.views,s.properties=_.properties,s.calcProperties=_.calcProperties,e.abrupt("break",123);case 53:return e.next=55,this.parseRels(p);case 55:return s.workbookRels=e.sent,e.abrupt("break",123);case 57:return s.sharedStrings=new w,e.next=60,s.sharedStrings.parseStream(p);case 60:return e.abrupt("break",123);case 61:return s.styles=new y,e.next=64,s.styles.parseStream(p);case 64:return e.abrupt("break",123);case 65:return x=new S,e.next=68,x.parseStream(p);case 68:return k=e.sent,s.company=k.company,s.manager=k.manager,e.abrupt("break",123);case 72:return T=new b,e.next=75,T.parseStream(p);case 75:return R=e.sent,Object.assign(s,R),e.abrupt("break",123);case 78:if(!(E=f.match(/xl\/worksheets\/sheet(\d+)[.]xml/))){e.next=83;break}return e.next=82,this._processWorksheetEntry(p,s,E[1],i,f);case 82:return e.abrupt("break",123);case 83:if(!(E=f.match(/xl\/worksheets\/_rels\/sheet(\d+)[.]xml.rels/))){e.next=88;break}return e.next=87,this._processWorksheetRelsEntry(p,s,E[1]);case 87:return e.abrupt("break",123);case 88:if(!(E=f.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/))){e.next=93;break}return e.next=92,this._processThemeEntry(p,s,E[1]);case 92:return e.abrupt("break",123);case 93:if(!(E=f.match(/xl\/media\/([a-zA-Z0-9]+[.][a-zA-Z0-9]{3,4})$/))){e.next=98;break}return e.next=97,this._processMediaEntry(p,s,E[1]);case 97:return e.abrupt("break",123);case 98:if(!(E=f.match(/xl\/drawings\/([a-zA-Z0-9]+)[.]xml/))){e.next=103;break}return e.next=102,this._processDrawingEntry(p,s,E[1]);case 102:return e.abrupt("break",123);case 103:if(!(E=f.match(/xl\/(comments\d+)[.]xml/))){e.next=108;break}return e.next=107,this._processCommentEntry(p,s,E[1]);case 107:return e.abrupt("break",123);case 108:if(!(E=f.match(/xl\/tables\/(table\d+)[.]xml/))){e.next=113;break}return e.next=112,this._processTableEntry(p,s,E[1]);case 112:return e.abrupt("break",123);case 113:if(!(E=f.match(/xl\/drawings\/_rels\/([a-zA-Z0-9]+)[.]xml[.]rels/))){e.next=118;break}return e.next=117,this._processDrawingRelsEntry(p,s,E[1]);case 117:return e.abrupt("break",123);case 118:if(!(E=f.match(/xl\/drawings\/(vmlDrawing\d+)[.]vml/))){e.next=123;break}return e.next=122,this._processVmlDrawingEntry(p,s,E[1]);case 122:return e.abrupt("break",123);case 123:l++,e.next=6;break;case 126:return this.reconcile(s,i),this.workbook.model=s,e.abrupt("return",this.workbook);case 129:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"addMedia",value:function(){var e=o(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(r.media.map(function(){var e=o(regeneratorRuntime.mark((function e(r){var n,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("image"!==r.type){e.next=13;break}if(n="xl/media/".concat(r.name,".").concat(r.extension),!r.filename){e.next=7;break}return e.next=5,O(r.filename);case 5:return i=e.sent,e.abrupt("return",t.append(i,{name:n}));case 7:if(!r.buffer){e.next=9;break}return e.abrupt("return",t.append(r.buffer,{name:n}));case 9:if(!r.base64){e.next=13;break}return o=r.base64,s=o.substring(o.indexOf(",")+1),e.abrupt("return",t.append(s,{name:n,base64:!0}));case 13:throw new Error("Unsupported media");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"addDrawings",value:function(e,t){var r=new T,n=new C;t.worksheets.forEach((function(t){var i=t.drawing;if(i){r.prepare(i,{});var o=r.toXml(i);e.append(o,{name:"xl/drawings/".concat(i.name,".xml")}),o=n.toXml(i.rels),e.append(o,{name:"xl/drawings/_rels/".concat(i.name,".xml.rels")})}}))}},{key:"addTables",value:function(e,t){var r=new R;t.worksheets.forEach((function(t){t.tables.forEach((function(t){r.prepare(t,{});var n=r.toXml(t);e.append(n,{name:"xl/tables/".concat(t.target)})}))}))}},{key:"addContentTypes",value:function(){var e=o(regeneratorRuntime.mark((function e(t,r){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new _,i=n.toXml(r),t.append(i,{name:"[Content_Types].xml"});case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"addApp",value:function(){var e=o(regeneratorRuntime.mark((function e(t,r){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new S,i=n.toXml(r),t.append(i,{name:"docProps/app.xml"});case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"addCore",value:function(){var e=o(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new b,t.append(n.toXml(r),{name:"docProps/core.xml"});case 2:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"addThemes",value:function(){var e=o(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.themes||{theme1:P},Object.keys(n).forEach((function(e){var r=n[e],i="xl/theme/".concat(e,".xml");t.append(r,{name:i})}));case 2:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"addOfficeRels",value:function(){var t=o(regeneratorRuntime.mark((function t(r){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new C,i=n.toXml([{Id:"rId1",Type:e.RelType.OfficeDocument,Target:"xl/workbook.xml"},{Id:"rId2",Type:e.RelType.CoreProperties,Target:"docProps/core.xml"},{Id:"rId3",Type:e.RelType.ExtenderProperties,Target:"docProps/app.xml"}]),r.append(i,{name:"_rels/.rels"});case 3:case"end":return t.stop()}}),t)})));function r(e){return t.apply(this,arguments)}return r}()},{key:"addWorkbookRels",value:function(){var t=o(regeneratorRuntime.mark((function t(r,n){var i,o,s,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=1,o=[{Id:"rId".concat(i++),Type:e.RelType.Styles,Target:"styles.xml"},{Id:"rId".concat(i++),Type:e.RelType.Theme,Target:"theme/theme1.xml"}],n.sharedStrings.count&&o.push({Id:"rId".concat(i++),Type:e.RelType.SharedStrings,Target:"sharedStrings.xml"}),n.worksheets.forEach((function(t){t.rId="rId".concat(i++),o.push({Id:t.rId,Type:e.RelType.Worksheet,Target:"worksheets/sheet".concat(t.id,".xml")})})),s=new C,a=s.toXml(o),r.append(a,{name:"xl/_rels/workbook.xml.rels"});case 7:case"end":return t.stop()}}),t)})));function r(e,r){return t.apply(this,arguments)}return r}()},{key:"addSharedStrings",value:function(){var e=o(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.sharedStrings&&r.sharedStrings.count&&t.append(r.sharedStrings.xml,{name:"xl/sharedStrings.xml"});case 1:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"addStyles",value:function(){var e=o(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=r.styles.xml)&&t.append(n,{name:"xl/styles.xml"});case 2:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"addWorkbook",value:function(){var e=o(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new x,t.append(n.toXml(r),{name:"xl/workbook.xml"});case 2:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"addWorksheets",value:function(){var e=o(regeneratorRuntime.mark((function e(t,r){var n,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new k,i=new C,o=new E,s=new M,r.worksheets.forEach((function(e){var r=new g;n.render(r,e),t.append(r.xml,{name:"xl/worksheets/sheet".concat(e.id,".xml")}),e.rels&&e.rels.length&&(r=new g,i.render(r,e.rels),t.append(r.xml,{name:"xl/worksheets/_rels/sheet".concat(e.id,".xml.rels")})),e.comments.length>0&&(r=new g,o.render(r,e),t.append(r.xml,{name:"xl/comments".concat(e.id,".xml")}),r=new g,s.render(r,e),t.append(r.xml,{name:"xl/drawings/vmlDrawing".concat(e.id,".vml")}))}));case 5:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"_finalize",value:function(e){var t=this;return new Promise((function(r,n){e.on("finish",(function(){r(t)})),e.on("error",n),e.finalize()}))}},{key:"prepareModel",value:function(e,t){e.creator=e.creator||"ExcelJS",e.lastModifiedBy=e.lastModifiedBy||"ExcelJS",e.created=e.created||new Date,e.modified=e.modified||new Date,e.useSharedStrings=void 0===t.useSharedStrings||t.useSharedStrings,e.useStyles=void 0===t.useStyles||t.useStyles,e.sharedStrings=new w,e.styles=e.useStyles?new y(!0):new y.Mock;var r=new x,n=new k;r.prepare(e);var i={sharedStrings:e.sharedStrings,styles:e.styles,date1904:e.properties.date1904,drawingsCount:0,media:e.media};i.drawings=e.drawings=[],i.commentRefs=e.commentRefs=[];var o=0;e.tables=[],e.worksheets.forEach((function(t){t.tables.forEach((function(t){o++,t.target="table".concat(o,".xml"),t.id=o,e.tables.push(t)})),n.prepare(t,i)}))}},{key:"write",value:function(){var e=o(regeneratorRuntime.mark((function e(t,r){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=r||{},n=this.workbook.model,(i=new f.ZipWriter(r.zip)).pipe(t),this.prepareModel(n,r),e.next=7,this.addContentTypes(i,n);case 7:return e.next=9,this.addOfficeRels(i,n);case 9:return e.next=11,this.addWorkbookRels(i,n);case 11:return e.next=13,this.addWorksheets(i,n);case 13:return e.next=15,this.addSharedStrings(i,n);case 15:return e.next=17,this.addDrawings(i,n);case 17:return e.next=19,this.addTables(i,n);case 19:return e.next=21,Promise.all([this.addThemes(i,n),this.addStyles(i,n)]);case 21:return e.next=23,this.addMedia(i,n);case 23:return e.next=25,Promise.all([this.addApp(i,n),this.addCore(i,n)]);case 25:return e.next=27,this.addWorkbook(i,n);case 27:return e.abrupt("return",this._finalize(i));case 28:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"writeFile",value:function(e,t){var r=this,n=c.createWriteStream(e);return new Promise((function(e,i){n.on("finish",(function(){e()})),n.on("error",(function(e){i(e)})),r.write(n,t).then((function(){n.end()}))}))}},{key:"writeBuffer",value:function(){var e=o(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new p,e.next=3,this.write(r,t);case 3:return e.abrupt("return",r.read());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();I.RelType=e("./rel-type"),t.exports=I}).call(this,e("_process"),e("buffer").Buffer)},{"../utils/browser-buffer-decode":16,"../utils/stream-buf":23,"../utils/utils":26,"../utils/xml-stream":27,"../utils/zip-stream":28,"./rel-type":30,"./xform/book/workbook-xform":37,"./xform/comment/comments-xform":39,"./xform/comment/vml-notes-xform":44,"./xform/core/app-xform":50,"./xform/core/content-types-xform":51,"./xform/core/core-xform":52,"./xform/core/relationships-xform":54,"./xform/drawing/drawing-xform":61,"./xform/sheet/worksheet-xform":114,"./xform/strings/shared-strings-xform":123,"./xform/style/styles-xform":134,"./xform/table/table-xform":140,"./xml/theme1.js":142,_process:467,buffer:216,fs:215,jszip:399,"readable-stream":491}],142:[function(e,t,r){"use strict";t.exports='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"> <a:themeElements> <a:clrScheme name="Office"> <a:dk1> <a:sysClr val="windowText" lastClr="000000"/> </a:dk1> <a:lt1> <a:sysClr val="window" lastClr="FFFFFF"/> </a:lt1> <a:dk2> <a:srgbClr val="1F497D"/> </a:dk2> <a:lt2> <a:srgbClr val="EEECE1"/> </a:lt2> <a:accent1> <a:srgbClr val="4F81BD"/> </a:accent1> <a:accent2> <a:srgbClr val="C0504D"/> </a:accent2> <a:accent3> <a:srgbClr val="9BBB59"/> </a:accent3> <a:accent4> <a:srgbClr val="8064A2"/> </a:accent4> <a:accent5> <a:srgbClr val="4BACC6"/> </a:accent5> <a:accent6> <a:srgbClr val="F79646"/> </a:accent6> <a:hlink> <a:srgbClr val="0000FF"/> </a:hlink> <a:folHlink> <a:srgbClr val="800080"/> </a:folHlink> </a:clrScheme> <a:fontScheme name="Office"> <a:majorFont> <a:latin typeface="Cambria"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/> <a:font script="Hang" typeface="맑은 고딕"/> <a:font script="Hans" typeface="宋体"/> <a:font script="Hant" typeface="新細明體"/> <a:font script="Arab" typeface="Times New Roman"/> <a:font script="Hebr" typeface="Times New Roman"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="MoolBoran"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Times New Roman"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:majorFont> <a:minorFont> <a:latin typeface="Calibri"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/> <a:font script="Hang" typeface="맑은 고딕"/> <a:font script="Hans" typeface="宋体"/> <a:font script="Hant" typeface="新細明體"/> <a:font script="Arab" typeface="Arial"/> <a:font script="Hebr" typeface="Arial"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="DaunPenh"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Arial"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:minorFont> </a:fontScheme> <a:fmtScheme name="Office"> <a:fillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="35000"> <a:schemeClr val="phClr"> <a:tint val="37000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="15000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="1"/> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="100000"/> <a:shade val="100000"/> <a:satMod val="130000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:shade val="100000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="0"/> </a:gradFill> </a:fillStyleLst> <a:lnStyleLst> <a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"> <a:shade val="95000"/> <a:satMod val="105000"/> </a:schemeClr> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> </a:lnStyleLst> <a:effectStyleLst> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="38000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> <a:scene3d> <a:camera prst="orthographicFront"> <a:rot lat="0" lon="0" rev="0"/> </a:camera> <a:lightRig rig="threePt" dir="t"> <a:rot lat="0" lon="0" rev="1200000"/> </a:lightRig> </a:scene3d> <a:sp3d> <a:bevelT w="63500" h="25400"/> </a:sp3d> </a:effectStyle> </a:effectStyleLst> <a:bgFillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="40000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="40000"> <a:schemeClr val="phClr"> <a:tint val="45000"/> <a:shade val="99000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="20000"/> <a:satMod val="255000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="-80000" r="50000" b="180000"/> </a:path> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="80000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="30000"/> <a:satMod val="200000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="50000" r="50000" b="50000"/> </a:path> </a:gradFill> </a:bgFillStyleLst> </a:fmtScheme> </a:themeElements> <a:objectDefaults> <a:spDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="1"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="3"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="2"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="lt1"/> </a:fontRef> </a:style> </a:spDef> <a:lnDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="2"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="0"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="1"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="tx1"/> </a:fontRef> </a:style> </a:lnDef> </a:objectDefaults> <a:extraClrSchemeLst/> </a:theme>'},{}],143:[function(e,t,r){(function(t){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=d();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.CsvFormatterStream=void 0;var p=e("stream"),m=e("./formatter"),g=function(e){a(n,e);var r=u(n);function n(e){var t;return i(this,n),(t=r.call(this,{writableObjectMode:e.objectMode})).hasWrittenBOM=!1,t.formatterOptions=e,t.rowFormatter=new m.RowFormatter(e),t.hasWrittenBOM=!e.writeBOM,t}return s(n,[{key:"transform",value:function(e){return this.rowFormatter.rowTransform=e,this}},{key:"_transform",value:function(e,r,n){var i=this,o=!1;try{this.hasWrittenBOM||(this.push(this.formatterOptions.BOM),this.hasWrittenBOM=!0),this.rowFormatter.format(e,(function(e,r){return e?(o=!0,n(e)):(r&&r.forEach((function(e){i.push(t.from(e,"utf8"))})),o=!0,n())}))}catch(e){if(o)throw e;n(e)}}},{key:"_flush",value:function(e){var r=this;this.rowFormatter.finish((function(n,i){return n?e(n):(i&&i.forEach((function(e){r.push(t.from(e,"utf8"))})),e())}))}}]),n}(p.Transform);r.CsvFormatterStream=g}).call(this,e("buffer").Buffer)},{"./formatter":147,buffer:216,stream:506}],144:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.FormatterOptions=void 0;var i=function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.objectMode=!0,this.delimiter=",",this.rowDelimiter="\n",this.quote='"',this.escape=this.quote,this.quoteColumns=!1,this.quoteHeaders=this.quoteColumns,this.headers=null,this.includeEndRowDelimiter=!1,this.writeBOM=!1,this.BOM="\ufeff",this.alwaysWriteHeaders=!1,Object.assign(this,r||{}),void 0===(null==r?void 0:r.quoteHeaders)&&(this.quoteHeaders=this.quoteColumns),!0===(null==r?void 0:r.quote)?this.quote='"':!1===(null==r?void 0:r.quote)&&(this.quote=""),"string"!=typeof(null==r?void 0:r.escape)&&(this.escape=this.quote),this.shouldWriteHeaders=!!this.headers&&(null===(t=r.writeHeaders)||void 0===t||t),this.headers=Array.isArray(this.headers)?this.headers:null,this.escapedQuote="".concat(this.escape).concat(this.quote)};r.FormatterOptions=i},{}],145:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var s=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.FieldFormatter=void 0;var a=s(e("lodash.isboolean")),l=s(e("lodash.isnil")),u=s(e("lodash.escaperegexp")),c=function(){function e(t){n(this,e),this._headers=null,this.formatterOptions=t,null!==t.headers&&(this.headers=t.headers),this.REPLACE_REGEXP=new RegExp(t.quote,"g");var r="[".concat(t.delimiter).concat(u.default(t.rowDelimiter),"|\r|\n']");this.ESCAPE_REGEXP=new RegExp(r)}return o(e,[{key:"shouldQuote",value:function(e,t){var r=t?this.formatterOptions.quoteHeaders:this.formatterOptions.quoteColumns;return a.default(r)?r:Array.isArray(r)?r[e]:null!==this._headers&&r[this._headers[e]]}},{key:"format",value:function(e,t,r){var n="".concat(l.default(e)?"":e).replace(/\0/g,""),i=this.formatterOptions;return""!==i.quote&&-1!==n.indexOf(i.quote)?this.quoteField(n.replace(this.REPLACE_REGEXP,i.escapedQuote)):-1!==n.search(this.ESCAPE_REGEXP)||this.shouldQuote(t,r)?this.quoteField(n):n}},{key:"quoteField",value:function(e){var t=this.formatterOptions.quote;return"".concat(t).concat(e).concat(t)}},{key:"headers",set:function(e){this._headers=e}}]),e}();r.FieldFormatter=c},{"lodash.escaperegexp":426,"lodash.isboolean":428,"lodash.isnil":431}],146:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var s=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.RowFormatter=void 0;var a=s(e("lodash.isfunction")),l=s(e("lodash.isequal")),u=e("./FieldFormatter"),c=e("../types"),h=function(){function e(t){n(this,e),this.rowCount=0,this.formatterOptions=t,this.fieldFormatter=new u.FieldFormatter(t),this.headers=t.headers,this.shouldWriteHeaders=t.shouldWriteHeaders,this.hasWrittenHeaders=!1,null!==this.headers&&(this.fieldFormatter.headers=this.headers),t.transform&&(this.rowTransform=t.transform)}return o(e,[{key:"format",value:function(e,t){var r=this;this.callTransformer(e,(function(n,i){if(n)return t(n);if(!e)return t(null);var o=[];if(i){var s=r.checkHeaders(i),a=s.shouldFormatColumns,l=s.headers;if(r.shouldWriteHeaders&&l&&!r.hasWrittenHeaders&&(o.push(r.formatColumns(l,!0)),r.hasWrittenHeaders=!0),a){var u=r.gatherColumns(i);o.push(r.formatColumns(u,!1))}}return t(null,o)}))}},{key:"finish",value:function(e){var t=[];if(this.formatterOptions.alwaysWriteHeaders&&0===this.rowCount){if(!this.headers)return e(new Error("`alwaysWriteHeaders` option is set to true but `headers` option not provided."));t.push(this.formatColumns(this.headers,!0))}return this.formatterOptions.includeEndRowDelimiter&&t.push(this.formatterOptions.rowDelimiter),e(null,t)}},{key:"checkHeaders",value:function(t){if(this.headers)return{shouldFormatColumns:!0,headers:this.headers};var r=e.gatherHeaders(t);return this.headers=r,this.fieldFormatter.headers=r,this.shouldWriteHeaders?{shouldFormatColumns:!l.default(r,t),headers:r}:{shouldFormatColumns:!0,headers:null}}},{key:"gatherColumns",value:function(t){if(null===this.headers)throw new Error("Headers is currently null");return Array.isArray(t)?e.isHashArray(t)?this.headers.map((function(e,r){var n=t[r];return n?n[1]:""})):this.headers.map((function(e,r){return t[r]})):this.headers.map((function(e){return t[e]}))}},{key:"callTransformer",value:function(e,t){return this._rowTransform?this._rowTransform(e,t):t(null,e)}},{key:"formatColumns",value:function(e,t){var r=this,n=e.map((function(e,n){return r.fieldFormatter.format(e,n,t)})).join(this.formatterOptions.delimiter),i=this.rowCount;return this.rowCount+=1,i?[this.formatterOptions.rowDelimiter,n].join(""):n}},{key:"rowTransform",set:function(t){if(!a.default(t))throw new TypeError("The transform should be a function");this._rowTransform=e.createTransform(t)}}],[{key:"isHashArray",value:function(e){return!!Array.isArray(e)&&Array.isArray(e[0])&&2===e[0].length}},{key:"gatherHeaders",value:function(t){return e.isHashArray(t)?t.map((function(e){return e[0]})):Array.isArray(t)?t:Object.keys(t)}},{key:"createTransform",value:function(e){return c.isSyncTransform(e)?function(t,r){var n=null;try{n=e(t)}catch(e){return r(e)}return r(null,n)}:function(t,r){e(t,r)}}}]),e}();r.RowFormatter=h},{"../types":149,"./FieldFormatter":145,"lodash.isequal":429,"lodash.isfunction":430}],147:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./RowFormatter");Object.defineProperty(r,"RowFormatter",{enumerable:!0,get:function(){return n.RowFormatter}});var i=e("./FieldFormatter");Object.defineProperty(r,"FieldFormatter",{enumerable:!0,get:function(){return i.FieldFormatter}})},{"./FieldFormatter":145,"./RowFormatter":146}],148:[function(e,t,r){(function(t){"use strict";var n=Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},i=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.writeToPath=r.writeToString=r.writeToBuffer=r.writeToStream=r.write=r.format=void 0;var a=e("util"),l=e("stream"),u=o(e("fs")),c=e("./FormatterOptions"),h=e("./CsvFormatterStream");s(e("./types"),r);var d=e("./CsvFormatterStream");Object.defineProperty(r,"CsvFormatterStream",{enumerable:!0,get:function(){return d.CsvFormatterStream}});var f=e("./FormatterOptions");Object.defineProperty(r,"FormatterOptions",{enumerable:!0,get:function(){return f.FormatterOptions}}),r.format=function(e){return new h.CsvFormatterStream(new c.FormatterOptions(e))},r.write=function(e,t){var n=r.format(t),i=a.promisify((function(e,t){n.write(e,void 0,t)}));return e.reduce((function(e,t){return e.then((function(){return i(t)}))}),Promise.resolve()).then((function(){return n.end()})).catch((function(e){n.emit("error",e)})),n},r.writeToStream=function(e,t,n){return r.write(t,n).pipe(e)},r.writeToBuffer=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=[],o=new l.Writable({write:function(e,t,r){i.push(e),r()}});return new Promise((function(s,a){o.on("error",a).on("finish",(function(){return s(t.concat(i))})),r.write(e,n).pipe(o)}))},r.writeToString=function(e,t){return r.writeToBuffer(e,t).then((function(e){return e.toString()}))},r.writeToPath=function(e,t,n){var i=u.createWriteStream(e,{encoding:"utf8"});return r.write(t,n).pipe(i)}}).call(this,e("buffer").Buffer)},{"./CsvFormatterStream":143,"./FormatterOptions":144,"./types":149,buffer:216,fs:215,stream:506,util:525}],149:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isSyncTransform=void 0,r.isSyncTransform=function(e){return 1===e.length}},{}],150:[function(e,t,r){(function(t){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t,r){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=l(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}},a(e,t,r||e)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function h(e){var t=p();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.CsvParserStream=void 0;var g=e("string_decoder"),v=e("stream"),y=e("./transforms"),b=e("./parser"),w=function(e){u(n,e);var r=h(n);function n(e){var t;return i(this,n),(t=r.call(this,{objectMode:e.objectMode})).lines="",t.rowCount=0,t.parsedRowCount=0,t.parsedLineCount=0,t.endEmitted=!1,t.headersEmitted=!1,t.parserOptions=e,t.parser=new b.Parser(e),t.headerTransformer=new y.HeaderTransformer(e),t.decoder=new g.StringDecoder(e.encoding),t.rowTransformerValidator=new y.RowTransformerValidator,t}return s(n,[{key:"transform",value:function(e){return this.rowTransformerValidator.rowTransform=e,this}},{key:"validate",value:function(e){return this.rowTransformerValidator.rowValidator=e,this}},{key:"emit",value:function(e){var t;if("end"===e)return this.endEmitted||(this.endEmitted=!0,a(m(n.prototype),"emit",this).call(this,"end",this.rowCount)),!1;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return(t=a(m(n.prototype),"emit",this)).call.apply(t,[this,e].concat(i))}},{key:"_transform",value:function(e,t,r){if(this.hasHitRowLimit)return r();try{var n=this.lines+this.decoder.write(e),i=this.parse(n,!0);return this.processRows(i,r)}catch(e){return r(e)}}},{key:"_flush",value:function(e){if(this.hasHitRowLimit)return e();try{var t=this.lines+this.decoder.end(),r=this.parse(t,!1);return this.processRows(r,e)}catch(t){return e(t)}}},{key:"parse",value:function(e,t){if(!e)return[];var r=this.parser.parse(e,t),n=r.line,i=r.rows;return this.lines=n,i}},{key:"processRows",value:function(e,r){var n=this,i=e.length;!function o(s){var a=function(e){return e?r(e):s%100!=0?o(s+1):void t((function(){return o(s+1)}))};if(n.checkAndEmitHeaders(),s>=i||n.hasHitRowLimit)return r();if(n.parsedLineCount+=1,n.shouldSkipLine)return a();var l=e[s];n.rowCount+=1,n.parsedRowCount+=1;var u=n.rowCount;return n.transformRow(l,(function(e,t){if(e)return n.rowCount-=1,a(e);if(!t)return a(new Error("expected transform result"));if(t.isValid){if(t.row)return n.pushRow(t.row,a)}else n.emit("data-invalid",t.row,u,t.reason);return a()}))}(0)}},{key:"transformRow",value:function(e,t){var r=this;try{this.headerTransformer.transform(e,(function(n,i){return n?t(n):i?i.isValid?i.row?r.shouldEmitRows?r.rowTransformerValidator.transformAndValidate(i.row,t):r.skipRow(t):(r.rowCount-=1,r.parsedRowCount-=1,t(null,{row:null,isValid:!0})):r.shouldEmitRows?t(null,{isValid:!1,row:e}):r.skipRow(t):t(new Error("Expected result from header transform"))}))}catch(e){t(e)}}},{key:"checkAndEmitHeaders",value:function(){!this.headersEmitted&&this.headerTransformer.headers&&(this.headersEmitted=!0,this.emit("headers",this.headerTransformer.headers))}},{key:"skipRow",value:function(e){return this.rowCount-=1,e(null,{row:null,isValid:!0})}},{key:"pushRow",value:function(e,t){try{this.parserOptions.objectMode?this.push(e):this.push(JSON.stringify(e)),t()}catch(e){t(e)}}},{key:"hasHitRowLimit",get:function(){return this.parserOptions.limitRows&&this.rowCount>=this.parserOptions.maxRows}},{key:"shouldEmitRows",get:function(){return this.parsedRowCount>this.parserOptions.skipRows}},{key:"shouldSkipLine",get:function(){return this.parsedLineCount<=this.parserOptions.skipLines}}]),n}(v.Transform);r.CsvParserStream=w}).call(this,e("timers").setImmediate)},{"./parser":162,"./transforms":165,stream:506,string_decoder:520,timers:521}],151:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ParserOptions=void 0;var o=i(e("lodash.escaperegexp")),s=i(e("lodash.isnil")),a=function e(t){var r;if(n(this,e),this.objectMode=!0,this.delimiter=",",this.ignoreEmpty=!1,this.quote='"',this.escape=null,this.escapeChar=this.quote,this.comment=null,this.supportsComments=!1,this.ltrim=!1,this.rtrim=!1,this.trim=!1,this.headers=null,this.renameHeaders=!1,this.strictColumnHandling=!1,this.discardUnmappedColumns=!1,this.carriageReturn="\r",this.encoding="utf8",this.limitRows=!1,this.maxRows=0,this.skipLines=0,this.skipRows=0,Object.assign(this,t||{}),this.delimiter.length>1)throw new Error("delimiter option must be one character long");this.escapedDelimiter=o.default(this.delimiter),this.escapeChar=null!==(r=this.escape)&&void 0!==r?r:this.quote,this.supportsComments=!s.default(this.comment),this.NEXT_TOKEN_REGEXP=new RegExp("([^\\s]|\\r\\n|\\n|\\r|".concat(this.escapedDelimiter,")")),this.maxRows>0&&(this.limitRows=!0)};r.ParserOptions=a},{"lodash.escaperegexp":426,"lodash.isnil":431}],152:[function(e,t,r){"use strict";var n=Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},i=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.parseString=r.parseFile=r.parseStream=r.parse=void 0;var a=o(e("fs")),l=e("stream"),u=e("./ParserOptions"),c=e("./CsvParserStream");s(e("./types"),r);var h=e("./CsvParserStream");Object.defineProperty(r,"CsvParserStream",{enumerable:!0,get:function(){return h.CsvParserStream}});var d=e("./ParserOptions");Object.defineProperty(r,"ParserOptions",{enumerable:!0,get:function(){return d.ParserOptions}}),r.parse=function(e){return new c.CsvParserStream(new u.ParserOptions(e))},r.parseStream=function(e,t){return e.pipe(new c.CsvParserStream(new u.ParserOptions(t)))},r.parseFile=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a.createReadStream(e).pipe(new c.CsvParserStream(new u.ParserOptions(t)))},r.parseString=function(e,t){var r=new l.Readable;return r.push(e),r.push(null),r.pipe(new c.CsvParserStream(new u.ParserOptions(t)))}},{"./CsvParserStream":150,"./ParserOptions":151,"./types":166,fs:215,stream:506}],153:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}Object.defineProperty(r,"__esModule",{value:!0}),r.Parser=void 0;var s=e("./Scanner"),a=e("./RowParser"),l=e("./Token"),u=/^\s*(?:''|"")?\s*(?:,\s*(?:''|"")?\s*)*$/,c=function(){function e(t){n(this,e),this.parserOptions=t,this.rowParser=new a.RowParser(this.parserOptions)}return o(e,[{key:"parse",value:function(t,r){var n=new s.Scanner({line:e.removeBOM(t),parserOptions:this.parserOptions,hasMoreData:r});return this.parserOptions.supportsComments?this.parseWithComments(n):this.parseWithoutComments(n)}},{key:"parseWithoutComments",value:function(e){for(var t=[],r=!0;r;)r=this.parseRow(e,t);return{line:e.line,rows:t}}},{key:"parseWithComments",value:function(e){for(var t=this.parserOptions,r=[],n=e.nextCharacterToken;null!==n;n=e.nextCharacterToken)if(l.Token.isTokenComment(n,t)){if(null===e.advancePastLine())return{line:e.lineFromCursor,rows:r};if(!e.hasMoreCharacters)return{line:e.lineFromCursor,rows:r};e.truncateToCursor()}else if(!this.parseRow(e,r))break;return{line:e.line,rows:r}}},{key:"parseRow",value:function(e,t){if(!e.nextNonSpaceToken)return!1;var r=this.rowParser.parse(e);return null!==r&&(this.parserOptions.ignoreEmpty&&u.test(r.join(""))||t.push(r),!0)}}],[{key:"removeBOM",value:function(e){return e&&65279===e.charCodeAt(0)?e.slice(1):e}}]),e}();r.Parser=c},{"./RowParser":154,"./Scanner":155,"./Token":156}],154:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}Object.defineProperty(r,"__esModule",{value:!0}),r.RowParser=void 0;var s=e("./column"),a=e("./Token").Token,l=a.isTokenRowDelimiter,u=a.isTokenCarriageReturn,c=a.isTokenDelimiter,h=function(){function e(t){n(this,e),this.parserOptions=t,this.columnParser=new s.ColumnParser(t)}return o(e,[{key:"parse",value:function(e){for(var t=this.parserOptions,r=e.hasMoreData,n=e,i=[],o=this.getStartToken(n,i);o;){if(l(o))return n.advancePastToken(o),!n.hasMoreCharacters&&u(o,t)&&r?null:(n.truncateToCursor(),i);if(!this.shouldSkipColumnParse(n,o,i)){var s=this.columnParser.parse(n);if(null===s)return null;i.push(s)}o=n.nextNonSpaceToken}return r?null:(n.truncateToCursor(),i)}},{key:"getStartToken",value:function(e,t){var r=e.nextNonSpaceToken;return null!==r&&c(r,this.parserOptions)?(t.push(""),e.nextNonSpaceToken):r}},{key:"shouldSkipColumnParse",value:function(e,t,r){var n=this.parserOptions;if(c(t,n)){e.advancePastToken(t);var i=e.nextCharacterToken;if(!e.hasMoreCharacters||null!==i&&l(i))return r.push(""),!0;if(null!==i&&c(i,n))return r.push(""),!0}return!1}}]),e}();r.RowParser=h},{"./Token":156,"./column":161}],155:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}Object.defineProperty(r,"__esModule",{value:!0}),r.Scanner=void 0;var s=e("./Token"),a=/((?:\r\n)|\n|\r)/,l=function(){function e(t){n(this,e),this.cursor=0,this.line=t.line,this.lineLength=this.line.length,this.parserOptions=t.parserOptions,this.hasMoreData=t.hasMoreData,this.cursor=t.cursor||0}return o(e,[{key:"advancePastLine",value:function(){var e=a.exec(this.lineFromCursor);return e?(this.cursor+=(e.index||0)+e[0].length,this):this.hasMoreData?null:(this.cursor=this.lineLength,this)}},{key:"advanceTo",value:function(e){return this.cursor=e,this}},{key:"advanceToToken",value:function(e){return this.cursor=e.startCursor,this}},{key:"advancePastToken",value:function(e){return this.cursor=e.endCursor+1,this}},{key:"truncateToCursor",value:function(){return this.line=this.lineFromCursor,this.lineLength=this.line.length,this.cursor=0,this}},{key:"hasMoreCharacters",get:function(){return this.lineLength>this.cursor}},{key:"nextNonSpaceToken",get:function(){var e=this.lineFromCursor,t=this.parserOptions.NEXT_TOKEN_REGEXP;if(-1===e.search(t))return null;var r=t.exec(e);if(null==r)return null;var n=r[1],i=this.cursor+(r.index||0);return new s.Token({token:n,startCursor:i,endCursor:i+n.length-1})}},{key:"nextCharacterToken",get:function(){var e=this.cursor;return this.lineLength<=e?null:new s.Token({token:this.line[e],startCursor:e,endCursor:e})}},{key:"lineFromCursor",get:function(){return this.line.substr(this.cursor)}}]),e}();r.Scanner=l},{"./Token":156}],156:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}Object.defineProperty(r,"__esModule",{value:!0}),r.Token=void 0;var s=function(){function e(t){n(this,e),this.token=t.token,this.startCursor=t.startCursor,this.endCursor=t.endCursor}return o(e,null,[{key:"isTokenRowDelimiter",value:function(e){var t=e.token;return"\r"===t||"\n"===t||"\r\n"===t}},{key:"isTokenCarriageReturn",value:function(e,t){return e.token===t.carriageReturn}},{key:"isTokenComment",value:function(e,t){return t.supportsComments&&!!e&&e.token===t.comment}},{key:"isTokenEscapeCharacter",value:function(e,t){return e.token===t.escapeChar}},{key:"isTokenQuote",value:function(e,t){return e.token===t.quote}},{key:"isTokenDelimiter",value:function(e,t){return e.token===t.delimiter}}]),e}();r.Token=s},{}],157:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.ColumnFormatter=void 0;var i=function e(t){n(this,e),t.trim?this.format=function(e){return e.trim()}:t.ltrim?this.format=function(e){return e.trimLeft()}:t.rtrim?this.format=function(e){return e.trimRight()}:this.format=function(e){return e}};r.ColumnFormatter=i},{}],158:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}Object.defineProperty(r,"__esModule",{value:!0}),r.ColumnParser=void 0;var s=e("./NonQuotedColumnParser"),a=e("./QuotedColumnParser"),l=e("../Token"),u=function(){function e(t){n(this,e),this.parserOptions=t,this.quotedColumnParser=new a.QuotedColumnParser(t),this.nonQuotedColumnParser=new s.NonQuotedColumnParser(t)}return o(e,[{key:"parse",value:function(e){var t=e.nextNonSpaceToken;return null!==t&&l.Token.isTokenQuote(t,this.parserOptions)?(e.advanceToToken(t),this.quotedColumnParser.parse(e)):this.nonQuotedColumnParser.parse(e)}}]),e}();r.ColumnParser=u},{"../Token":156,"./NonQuotedColumnParser":159,"./QuotedColumnParser":160}],159:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}Object.defineProperty(r,"__esModule",{value:!0}),r.NonQuotedColumnParser=void 0;var s=e("./ColumnFormatter"),a=e("../Token").Token,l=a.isTokenDelimiter,u=a.isTokenRowDelimiter,c=function(){function e(t){n(this,e),this.parserOptions=t,this.columnFormatter=new s.ColumnFormatter(t)}return o(e,[{key:"parse",value:function(e){if(!e.hasMoreCharacters)return null;for(var t=this.parserOptions,r=[],n=e.nextCharacterToken;n&&!l(n,t)&&!u(n);n=e.nextCharacterToken)r.push(n.token),e.advancePastToken(n);return this.columnFormatter.format(r.join(""))}}]),e}();r.NonQuotedColumnParser=c},{"../Token":156,"./ColumnFormatter":157}],160:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}Object.defineProperty(r,"__esModule",{value:!0}),r.QuotedColumnParser=void 0;var s=e("./ColumnFormatter"),a=e("../Token").Token,l=a.isTokenDelimiter,u=a.isTokenRowDelimiter,c=a.isTokenEscapeCharacter,h=a.isTokenQuote,d=function(){function e(t){n(this,e),this.parserOptions=t,this.columnFormatter=new s.ColumnFormatter(t)}return o(e,[{key:"parse",value:function(e){if(!e.hasMoreCharacters)return null;var t=e.cursor,r=this.gatherDataBetweenQuotes(e),n=r.foundClosingQuote,i=r.col;if(!n){if(e.advanceTo(t),!e.hasMoreData)throw new Error("Parse Error: missing closing: '".concat(this.parserOptions.quote||"","' in line: at '").concat(e.lineFromCursor.replace(/[\r\n]/g,"\\n'"),"'"));return null}return this.checkForMalformedColumn(e),i}},{key:"gatherDataBetweenQuotes",value:function(e){for(var t=this.parserOptions,r=!1,n=!1,i=[],o=e.nextCharacterToken;!n&&null!==o;o=e.nextCharacterToken){var s=h(o,t);if(!r&&s)r=!0;else if(r)if(c(o,t)){e.advancePastToken(o);var a=e.nextCharacterToken;null!==a&&(h(a,t)||c(a,t))?(i.push(a.token),o=a):s?n=!0:i.push(o.token)}else s?n=!0:i.push(o.token);e.advancePastToken(o)}return{col:this.columnFormatter.format(i.join("")),foundClosingQuote:n}}},{key:"checkForMalformedColumn",value:function(e){var t=this.parserOptions,r=e.nextNonSpaceToken;if(r){var n=l(r,t),i=u(r);if(!n&&!i){var o=e.lineFromCursor.substr(0,10).replace(/[\r\n]/g,"\\n'");throw new Error("Parse Error: expected: '".concat(t.escapedDelimiter,"' OR new line got: '").concat(r.token,"'. at '").concat(o))}e.advanceToToken(r)}else e.hasMoreData||e.advancePastLine()}}]),e}();r.QuotedColumnParser=d},{"../Token":156,"./ColumnFormatter":157}],161:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./ColumnParser");Object.defineProperty(r,"ColumnParser",{enumerable:!0,get:function(){return n.ColumnParser}});var i=e("./NonQuotedColumnParser");Object.defineProperty(r,"NonQuotedColumnParser",{enumerable:!0,get:function(){return i.NonQuotedColumnParser}});var o=e("./QuotedColumnParser");Object.defineProperty(r,"QuotedColumnParser",{enumerable:!0,get:function(){return o.QuotedColumnParser}});var s=e("./ColumnFormatter");Object.defineProperty(r,"ColumnFormatter",{enumerable:!0,get:function(){return s.ColumnFormatter}})},{"./ColumnFormatter":157,"./ColumnParser":158,"./NonQuotedColumnParser":159,"./QuotedColumnParser":160}],162:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./Parser");Object.defineProperty(r,"Parser",{enumerable:!0,get:function(){return n.Parser}});var i=e("./RowParser");Object.defineProperty(r,"RowParser",{enumerable:!0,get:function(){return i.RowParser}});var o=e("./Scanner");Object.defineProperty(r,"Scanner",{enumerable:!0,get:function(){return o.Scanner}});var s=e("./Token");Object.defineProperty(r,"Token",{enumerable:!0,get:function(){return s.Token}});var a=e("./column");Object.defineProperty(r,"ColumnParser",{enumerable:!0,get:function(){return a.ColumnParser}}),Object.defineProperty(r,"NonQuotedColumnParser",{enumerable:!0,get:function(){return a.NonQuotedColumnParser}}),Object.defineProperty(r,"QuotedColumnParser",{enumerable:!0,get:function(){return a.QuotedColumnParser}})},{"./Parser":153,"./RowParser":154,"./Scanner":155,"./Token":156,"./column":161}],163:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var s=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.HeaderTransformer=void 0;var a=s(e("lodash.isundefined")),l=s(e("lodash.isfunction")),u=s(e("lodash.uniq")),c=s(e("lodash.groupby")),h=function(){function e(t){n(this,e),this.headers=null,this.receivedHeaders=!1,this.shouldUseFirstRow=!1,this.processedFirstRow=!1,this.headersLength=0,this.parserOptions=t,!0===t.headers?this.shouldUseFirstRow=!0:Array.isArray(t.headers)?this.setHeaders(t.headers):l.default(t.headers)&&(this.headersTransform=t.headers)}return o(e,[{key:"transform",value:function(e,t){return this.shouldMapRow(e)?t(null,this.processRow(e)):t(null,{row:null,isValid:!0})}},{key:"shouldMapRow",value:function(e){var t=this.parserOptions;if(!this.headersTransform&&t.renameHeaders&&!this.processedFirstRow){if(!this.receivedHeaders)throw new Error("Error renaming headers: new headers must be provided in an array");return this.processedFirstRow=!0,!1}if(!this.receivedHeaders&&Array.isArray(e)){if(this.headersTransform)this.setHeaders(this.headersTransform(e));else{if(!this.shouldUseFirstRow)return!0;this.setHeaders(e)}return!1}return!0}},{key:"processRow",value:function(e){if(!this.headers)return{row:e,isValid:!0};var t=this.parserOptions;if(!t.discardUnmappedColumns&&e.length>this.headersLength){if(!t.strictColumnHandling)throw new Error("Unexpected Error: column header mismatch expected: ".concat(this.headersLength," columns got: ").concat(e.length));return{row:e,isValid:!1,reason:"Column header mismatch expected: ".concat(this.headersLength," columns got: ").concat(e.length)}}return t.strictColumnHandling&&e.length<this.headersLength?{row:e,isValid:!1,reason:"Column header mismatch expected: ".concat(this.headersLength," columns got: ").concat(e.length)}:{row:this.mapHeaders(e),isValid:!0}}},{key:"mapHeaders",value:function(e){for(var t={},r=this.headers,n=this.headersLength,i=0;i<n;i+=1){var o=r[i];if(!a.default(o)){var s=e[i];a.default(s)?t[o]="":t[o]=s}}return t}},{key:"setHeaders",value:function(e){var t,r=e.filter((function(e){return!!e}));if(u.default(r).length!==r.length){var n=c.default(r),i=Object.keys(n).filter((function(e){return n[e].length>1}));throw new Error("Duplicate headers found ".concat(JSON.stringify(i)))}this.headers=e,this.receivedHeaders=!0,this.headersLength=(null===(t=this.headers)||void 0===t?void 0:t.length)||0}}]),e}();r.HeaderTransformer=h},{"lodash.groupby":427,"lodash.isfunction":430,"lodash.isundefined":432,"lodash.uniq":433}],164:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var s=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.RowTransformerValidator=void 0;var a=s(e("lodash.isfunction")),l=e("../types"),u=function(){function e(){n(this,e),this._rowTransform=null,this._rowValidator=null}return o(e,[{key:"transformAndValidate",value:function(e,t){var r=this;return this.callTransformer(e,(function(e,n){return e?t(e):n?r.callValidator(n,(function(e,r){return e?t(e):r&&!r.isValid?t(null,{row:n,isValid:!1,reason:r.reason}):t(null,{row:n,isValid:!0})})):t(null,{row:null,isValid:!0})}))}},{key:"callTransformer",value:function(e,t){return this._rowTransform?this._rowTransform(e,t):t(null,e)}},{key:"callValidator",value:function(e,t){return this._rowValidator?this._rowValidator(e,t):t(null,{row:e,isValid:!0})}},{key:"rowTransform",set:function(t){if(!a.default(t))throw new TypeError("The transform should be a function");this._rowTransform=e.createTransform(t)}},{key:"rowValidator",set:function(t){if(!a.default(t))throw new TypeError("The validate should be a function");this._rowValidator=e.createValidator(t)}}],[{key:"createTransform",value:function(e){return l.isSyncTransform(e)?function(t,r){var n=null;try{n=e(t)}catch(e){return r(e)}return r(null,n)}:e}},{key:"createValidator",value:function(e){return l.isSyncValidate(e)?function(t,r){r(null,{row:t,isValid:e(t)})}:function(t,r){e(t,(function(e,n,i){return e?r(e):r(null,n?{row:t,isValid:n,reason:i}:{row:t,isValid:!1,reason:i})}))}}}]),e}();r.RowTransformerValidator=u},{"../types":166,"lodash.isfunction":430}],165:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./RowTransformerValidator");Object.defineProperty(r,"RowTransformerValidator",{enumerable:!0,get:function(){return n.RowTransformerValidator}});var i=e("./HeaderTransformer");Object.defineProperty(r,"HeaderTransformer",{enumerable:!0,get:function(){return i.HeaderTransformer}})},{"./HeaderTransformer":163,"./RowTransformerValidator":164}],166:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isSyncValidate=r.isSyncTransform=void 0,r.isSyncTransform=function(e){return 1===e.length},r.isSyncValidate=function(e){return 1===e.length}},{}],167:[function(e,t,r){"use strict";var n=r;n.bignum=e("bn.js"),n.define=e("./asn1/api").define,n.base=e("./asn1/base"),n.constants=e("./asn1/constants"),n.decoders=e("./asn1/decoders"),n.encoders=e("./asn1/encoders")},{"./asn1/api":168,"./asn1/base":170,"./asn1/constants":174,"./asn1/decoders":176,"./asn1/encoders":179,"bn.js":181}],168:[function(e,t,r){"use strict";var n=e("./encoders"),i=e("./decoders"),o=e("inherits");function s(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}r.define=function(e,t){return new s(e,t)},s.prototype._createNamed=function(e){var t=this.name;function r(e){this._initNamed(e,t)}return o(r,e),r.prototype._initNamed=function(t,r){e.call(this,t,r)},new r(this)},s.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(i[e])),this.decoders[e]},s.prototype.decode=function(e,t,r){return this._getDecoder(t).decode(e,r)},s.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(n[e])),this.encoders[e]},s.prototype.encode=function(e,t,r){return this._getEncoder(t).encode(e,r)}},{"./decoders":176,"./encoders":179,inherits:387}],169:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var i=e("inherits"),o=e("../base/reporter").Reporter,s=e("safer-buffer").Buffer;function a(e,t){o.call(this,t),s.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function l(e,t){if(Array.isArray(e))this.length=0,this.value=e.map((function(e){return l.isEncoderBuffer(e)||(e=new l(e,t)),this.length+=e.length,e}),this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=s.byteLength(e);else{if(!s.isBuffer(e))return t.error("Unsupported type: "+n(e));this.value=e,this.length=e.length}}i(a,o),r.DecoderBuffer=a,a.isDecoderBuffer=function(e){return e instanceof a||"object"===n(e)&&s.isBuffer(e.base)&&"DecoderBuffer"===e.constructor.name&&"number"==typeof e.offset&&"number"==typeof e.length&&"function"==typeof e.save&&"function"==typeof e.restore&&"function"==typeof e.isEmpty&&"function"==typeof e.readUInt8&&"function"==typeof e.skip&&"function"==typeof e.raw},a.prototype.save=function(){return{offset:this.offset,reporter:o.prototype.save.call(this)}},a.prototype.restore=function(e){var t=new a(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,o.prototype.restore.call(this,e.reporter),t},a.prototype.isEmpty=function(){return this.offset===this.length},a.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},a.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");var r=new a(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+e,this.offset+=e,r},a.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},r.EncoderBuffer=l,l.isEncoderBuffer=function(e){return e instanceof l||"object"===n(e)&&"EncoderBuffer"===e.constructor.name&&"number"==typeof e.length&&"function"==typeof e.join},l.prototype.join=function(e,t){return e||(e=s.alloc(this.length)),t||(t=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(r){r.join(e,t),t+=r.length})):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):s.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e}},{"../base/reporter":172,inherits:387,"safer-buffer":495}],170:[function(e,t,r){"use strict";var n=r;n.Reporter=e("./reporter").Reporter,n.DecoderBuffer=e("./buffer").DecoderBuffer,n.EncoderBuffer=e("./buffer").EncoderBuffer,n.Node=e("./node")},{"./buffer":169,"./node":171,"./reporter":172}],171:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var i=e("../base/reporter").Reporter,o=e("../base/buffer").EncoderBuffer,s=e("../base/buffer").DecoderBuffer,a=e("minimalistic-assert"),l=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(l),c=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function h(e,t,r){var n={};this._baseState=n,n.name=r,n.enc=e,n.parent=t||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}t.exports=h;var d=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];h.prototype.clone=function(){var e=this._baseState,t={};d.forEach((function(r){t[r]=e[r]}));var r=new this.constructor(t.parent);return r._baseState=t,r},h.prototype._wrap=function(){var e=this._baseState;u.forEach((function(t){this[t]=function(){var r=new this.constructor(this);return e.children.push(r),r[t].apply(r,arguments)}}),this)},h.prototype._init=function(e){var t=this._baseState;a(null===t.parent),e.call(this),t.children=t.children.filter((function(e){return e._baseState.parent===this}),this),a.equal(t.children.length,1,"Root node can have only one child")},h.prototype._useArgs=function(e){var t=this._baseState,r=e.filter((function(e){return e instanceof this.constructor}),this);e=e.filter((function(e){return!(e instanceof this.constructor)}),this),0!==r.length&&(a(null===t.children),t.children=r,r.forEach((function(e){e._baseState.parent=this}),this)),0!==e.length&&(a(null===t.args),t.args=e,t.reverseArgs=e.map((function(e){if("object"!==n(e)||e.constructor!==Object)return e;var t={};return Object.keys(e).forEach((function(r){r==(0|r)&&(r|=0);var n=e[r];t[n]=r})),t})))},c.forEach((function(e){h.prototype[e]=function(){var t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}})),l.forEach((function(e){h.prototype[e]=function(){var t=this._baseState,r=Array.prototype.slice.call(arguments);return a(null===t.tag),t.tag=e,this._useArgs(r),this}})),h.prototype.use=function(e){a(e);var t=this._baseState;return a(null===t.use),t.use=e,this},h.prototype.optional=function(){return this._baseState.optional=!0,this},h.prototype.def=function(e){var t=this._baseState;return a(null===t.default),t.default=e,t.optional=!0,this},h.prototype.explicit=function(e){var t=this._baseState;return a(null===t.explicit&&null===t.implicit),t.explicit=e,this},h.prototype.implicit=function(e){var t=this._baseState;return a(null===t.explicit&&null===t.implicit),t.implicit=e,this},h.prototype.obj=function(){var e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},h.prototype.key=function(e){var t=this._baseState;return a(null===t.key),t.key=e,this},h.prototype.any=function(){return this._baseState.any=!0,this},h.prototype.choice=function(e){var t=this._baseState;return a(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map((function(t){return e[t]}))),this},h.prototype.contains=function(e){var t=this._baseState;return a(null===t.use),t.contains=e,this},h.prototype._decode=function(e,t){var r=this._baseState;if(null===r.parent)return e.wrapResult(r.children[0]._decode(e,t));var n,i=r.default,o=!0,a=null;if(null!==r.key&&(a=e.enterKey(r.key)),r.optional){var l=null;if(null!==r.explicit?l=r.explicit:null!==r.implicit?l=r.implicit:null!==r.tag&&(l=r.tag),null!==l||r.any){if(o=this._peekTag(e,l,r.any),e.isError(o))return o}else{var u=e.save();try{null===r.choice?this._decodeGeneric(r.tag,e,t):this._decodeChoice(e,t),o=!0}catch(e){o=!1}e.restore(u)}}if(r.obj&&o&&(n=e.enterObject()),o){if(null!==r.explicit){var c=this._decodeTag(e,r.explicit);if(e.isError(c))return c;e=c}var h=e.offset;if(null===r.use&&null===r.choice){var d;r.any&&(d=e.save());var f=this._decodeTag(e,null!==r.implicit?r.implicit:r.tag,r.any);if(e.isError(f))return f;r.any?i=e.raw(d):e=f}if(t&&t.track&&null!==r.tag&&t.track(e.path(),h,e.length,"tagged"),t&&t.track&&null!==r.tag&&t.track(e.path(),e.offset,e.length,"content"),r.any||(i=null===r.choice?this._decodeGeneric(r.tag,e,t):this._decodeChoice(e,t)),e.isError(i))return i;if(r.any||null!==r.choice||null===r.children||r.children.forEach((function(r){r._decode(e,t)})),r.contains&&("octstr"===r.tag||"bitstr"===r.tag)){var p=new s(i);i=this._getUse(r.contains,e._reporterState.obj)._decode(p,t)}}return r.obj&&o&&(i=e.leaveObject(n)),null===r.key||null===i&&!0!==o?null!==a&&e.exitKey(a):e.leaveKey(a,r.key,i),i},h.prototype._decodeGeneric=function(e,t,r){var n=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,n.args[0],r):/str$/.test(e)?this._decodeStr(t,e,r):"objid"===e&&n.args?this._decodeObjid(t,n.args[0],n.args[1],r):"objid"===e?this._decodeObjid(t,null,null,r):"gentime"===e||"utctime"===e?this._decodeTime(t,e,r):"null_"===e?this._decodeNull(t,r):"bool"===e?this._decodeBool(t,r):"objDesc"===e?this._decodeStr(t,e,r):"int"===e||"enum"===e?this._decodeInt(t,n.args&&n.args[0],r):null!==n.use?this._getUse(n.use,t._reporterState.obj)._decode(t,r):t.error("unknown tag: "+e)},h.prototype._getUse=function(e,t){var r=this._baseState;return r.useDecoder=this._use(e,t),a(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},h.prototype._decodeChoice=function(e,t){var r=this._baseState,n=null,i=!1;return Object.keys(r.choice).some((function(o){var s=e.save(),a=r.choice[o];try{var l=a._decode(e,t);if(e.isError(l))return!1;n={type:o,value:l},i=!0}catch(t){return e.restore(s),!1}return!0}),this),i?n:e.error("Choice not matched")},h.prototype._createEncoderBuffer=function(e){return new o(e,this.reporter)},h.prototype._encode=function(e,t,r){var n=this._baseState;if(null===n.default||n.default!==e){var i=this._encodeValue(e,t,r);if(void 0!==i&&!this._skipDefault(i,t,r))return i}},h.prototype._encodeValue=function(e,t,r){var o=this._baseState;if(null===o.parent)return o.children[0]._encode(e,t||new i);var s=null;if(this.reporter=t,o.optional&&void 0===e){if(null===o.default)return;e=o.default}var a=null,l=!1;if(o.any)s=this._createEncoderBuffer(e);else if(o.choice)s=this._encodeChoice(e,t);else if(o.contains)a=this._getUse(o.contains,r)._encode(e,t),l=!0;else if(o.children)a=o.children.map((function(r){if("null_"===r._baseState.tag)return r._encode(null,t,e);if(null===r._baseState.key)return t.error("Child should have a key");var i=t.enterKey(r._baseState.key);if("object"!==n(e))return t.error("Child expected, but input is not object");var o=r._encode(e[r._baseState.key],t,e);return t.leaveKey(i),o}),this).filter((function(e){return e})),a=this._createEncoderBuffer(a);else if("seqof"===o.tag||"setof"===o.tag){if(!o.args||1!==o.args.length)return t.error("Too many args for : "+o.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");var u=this.clone();u._baseState.implicit=null,a=this._createEncoderBuffer(e.map((function(r){var n=this._baseState;return this._getUse(n.args[0],e)._encode(r,t)}),u))}else null!==o.use?s=this._getUse(o.use,r)._encode(e,t):(a=this._encodePrimitive(o.tag,e),l=!0);if(!o.any&&null===o.choice){var c=null!==o.implicit?o.implicit:o.tag,h=null===o.implicit?"universal":"context";null===c?null===o.use&&t.error("Tag could be omitted only for .use()"):null===o.use&&(s=this._encodeComposite(c,l,h,a))}return null!==o.explicit&&(s=this._encodeComposite(o.explicit,!1,"context",s)),s},h.prototype._encodeChoice=function(e,t){var r=this._baseState,n=r.choice[e.type];return n||a(!1,e.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(e.value,t)},h.prototype._encodePrimitive=function(e,t){var r=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&r.args)return this._encodeObjid(t,r.reverseArgs[0],r.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,r.args&&r.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},h.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},h.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)}},{"../base/buffer":169,"../base/reporter":172,"minimalistic-assert":437}],172:[function(e,t,r){"use strict";var n=e("inherits");function i(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function o(e,t){this.path=e,this.rethrow(t)}r.Reporter=i,i.prototype.isError=function(e){return e instanceof o},i.prototype.save=function(){var e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},i.prototype.restore=function(e){var t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},i.prototype.enterKey=function(e){return this._reporterState.path.push(e)},i.prototype.exitKey=function(e){var t=this._reporterState;t.path=t.path.slice(0,e-1)},i.prototype.leaveKey=function(e,t,r){var n=this._reporterState;this.exitKey(e),null!==n.obj&&(n.obj[t]=r)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){var e=this._reporterState,t=e.obj;return e.obj={},t},i.prototype.leaveObject=function(e){var t=this._reporterState,r=t.obj;return t.obj=e,r},i.prototype.error=function(e){var t,r=this._reporterState,n=e instanceof o;if(t=n?e:new o(r.path.map((function(e){return"["+JSON.stringify(e)+"]"})).join(""),e.message||e,e.stack),!r.options.partial)throw t;return n||r.errors.push(t),t},i.prototype.wrapResult=function(e){var t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},n(o,Error),o.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},{inherits:387}],173:[function(e,t,r){"use strict";function n(e){var t={};return Object.keys(e).forEach((function(r){(0|r)==r&&(r|=0);var n=e[r];t[n]=r})),t}r.tagClass={0:"universal",1:"application",2:"context",3:"private"},r.tagClassByName=n(r.tagClass),r.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},r.tagByName=n(r.tag)},{}],174:[function(e,t,r){"use strict";var n=r;n._reverse=function(e){var t={};return Object.keys(e).forEach((function(r){(0|r)==r&&(r|=0);var n=e[r];t[n]=r})),t},n.der=e("./der")},{"./der":173}],175:[function(e,t,r){"use strict";var n=e("inherits"),i=e("bn.js"),o=e("../base/buffer").DecoderBuffer,s=e("../base/node"),a=e("../constants/der");function l(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new u,this.tree._init(e.body)}function u(e){s.call(this,"der",e)}function c(e,t){var r=e.readUInt8(t);if(e.isError(r))return r;var n=a.tagClass[r>>6],i=0==(32&r);if(31==(31&r)){var o=r;for(r=0;128==(128&o);){if(o=e.readUInt8(t),e.isError(o))return o;r<<=7,r|=127&o}}else r&=31;return{cls:n,primitive:i,tag:r,tagStr:a.tag[r]}}function h(e,t,r){var n=e.readUInt8(r);if(e.isError(n))return n;if(!t&&128===n)return null;if(0==(128&n))return n;var i=127&n;if(i>4)return e.error("length octect is too long");n=0;for(var o=0;o<i;o++){n<<=8;var s=e.readUInt8(r);if(e.isError(s))return s;n|=s}return n}t.exports=l,l.prototype.decode=function(e,t){return o.isDecoderBuffer(e)||(e=new o(e,t)),this.tree._decode(e,t)},n(u,s),u.prototype._peekTag=function(e,t,r){if(e.isEmpty())return!1;var n=e.save(),i=c(e,'Failed to peek tag: "'+t+'"');return e.isError(i)?i:(e.restore(n),i.tag===t||i.tagStr===t||i.tagStr+"of"===t||r)},u.prototype._decodeTag=function(e,t,r){var n=c(e,'Failed to decode tag of "'+t+'"');if(e.isError(n))return n;var i=h(e,n.primitive,'Failed to get length of "'+t+'"');if(e.isError(i))return i;if(!r&&n.tag!==t&&n.tagStr!==t&&n.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(n.primitive||null!==i)return e.skip(i,'Failed to match body of: "'+t+'"');var o=e.save(),s=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(s)?s:(i=e.offset-o.offset,e.restore(o),e.skip(i,'Failed to match body of: "'+t+'"'))},u.prototype._skipUntilEnd=function(e,t){for(;;){var r=c(e,t);if(e.isError(r))return r;var n=h(e,r.primitive,t);if(e.isError(n))return n;var i=void 0;if(i=r.primitive||null!==n?e.skip(n):this._skipUntilEnd(e,t),e.isError(i))return i;if("end"===r.tagStr)break}},u.prototype._decodeList=function(e,t,r,n){for(var i=[];!e.isEmpty();){var o=this._peekTag(e,"end");if(e.isError(o))return o;var s=r.decode(e,"der",n);if(e.isError(s)&&o)break;i.push(s)}return i},u.prototype._decodeStr=function(e,t){if("bitstr"===t){var r=e.readUInt8();return e.isError(r)?r:{unused:r,data:e.raw()}}if("bmpstr"===t){var n=e.raw();if(n.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");for(var i="",o=0;o<n.length/2;o++)i+=String.fromCharCode(n.readUInt16BE(2*o));return i}if("numstr"===t){var s=e.raw().toString("ascii");return this._isNumstr(s)?s:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){var a=e.raw().toString("ascii");return this._isPrintstr(a)?a:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},u.prototype._decodeObjid=function(e,t,r){for(var n,i=[],o=0,s=0;!e.isEmpty();)o<<=7,o|=127&(s=e.readUInt8()),0==(128&s)&&(i.push(o),o=0);128&s&&i.push(o);var a=i[0]/40|0,l=i[0]%40;if(n=r?i:[a,l].concat(i.slice(1)),t){var u=t[n.join(" ")];void 0===u&&(u=t[n.join(".")]),void 0!==u&&(n=u)}return n},u.prototype._decodeTime=function(e,t){var r,n,i,o,s,a,l=e.raw().toString();if("gentime"===t)r=0|l.slice(0,4),n=0|l.slice(4,6),i=0|l.slice(6,8),o=0|l.slice(8,10),s=0|l.slice(10,12),a=0|l.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");r=0|l.slice(0,2),n=0|l.slice(2,4),i=0|l.slice(4,6),o=0|l.slice(6,8),s=0|l.slice(8,10),a=0|l.slice(10,12),r=r<70?2e3+r:1900+r}return Date.UTC(r,n-1,i,o,s,a,0)},u.prototype._decodeNull=function(){return null},u.prototype._decodeBool=function(e){var t=e.readUInt8();return e.isError(t)?t:0!==t},u.prototype._decodeInt=function(e,t){var r=e.raw(),n=new i(r);return t&&(n=t[n.toString(10)]||n),n},u.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}},{"../base/buffer":169,"../base/node":171,"../constants/der":173,"bn.js":181,inherits:387}],176:[function(e,t,r){"use strict";var n=r;n.der=e("./der"),n.pem=e("./pem")},{"./der":175,"./pem":177}],177:[function(e,t,r){"use strict";var n=e("inherits"),i=e("safer-buffer").Buffer,o=e("./der");function s(e){o.call(this,e),this.enc="pem"}n(s,o),t.exports=s,s.prototype.decode=function(e,t){for(var r=e.toString().split(/[\r\n]+/g),n=t.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/,a=-1,l=-1,u=0;u<r.length;u++){var c=r[u].match(s);if(null!==c&&c[2]===n){if(-1!==a){if("END"!==c[1])break;l=u;break}if("BEGIN"!==c[1])break;a=u}}if(-1===a||-1===l)throw new Error("PEM section not found for: "+n);var h=r.slice(a+1,l).join("");h.replace(/[^a-z0-9+/=]+/gi,"");var d=i.from(h,"base64");return o.prototype.decode.call(this,d,t)}},{"./der":175,inherits:387,"safer-buffer":495}],178:[function(e,t,r){"use strict";var n=e("inherits"),i=e("safer-buffer").Buffer,o=e("../base/node"),s=e("../constants/der");function a(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new l,this.tree._init(e.body)}function l(e){o.call(this,"der",e)}function u(e){return e<10?"0"+e:e}function c(e,t,r,n){var i;if("seqof"===e?e="seq":"setof"===e&&(e="set"),s.tagByName.hasOwnProperty(e))i=s.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return n.error("Unknown tag: "+e);i=e}return i>=31?n.error("Multi-octet tag encoding unsupported"):(t||(i|=32),i|=s.tagClassByName[r||"universal"]<<6)}t.exports=a,a.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},n(l,o),l.prototype._encodeComposite=function(e,t,r,n){var o=c(e,t,r,this.reporter);if(n.length<128){var s=i.alloc(2);return s[0]=o,s[1]=n.length,this._createEncoderBuffer([s,n])}for(var a=1,l=n.length;l>=256;l>>=8)a++;var u=i.alloc(2+a);u[0]=o,u[1]=128|a;for(var h=1+a,d=n.length;d>0;h--,d>>=8)u[h]=255&d;return this._createEncoderBuffer([u,n])},l.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){for(var r=i.alloc(2*e.length),n=0;n<e.length;n++)r.writeUInt16BE(e.charCodeAt(n),2*n);return this._createEncoderBuffer(r)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)||"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},l.prototype._encodeObjid=function(e,t,r){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(var n=0;n<e.length;n++)e[n]|=0}else if(Array.isArray(e)){e=e.slice();for(var o=0;o<e.length;o++)e[o]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!r){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}for(var s=0,a=0;a<e.length;a++){var l=e[a];for(s++;l>=128;l>>=7)s++}for(var u=i.alloc(s),c=u.length-1,h=e.length-1;h>=0;h--){var d=e[h];for(u[c--]=127&d;(d>>=7)>0;)u[c--]=128|127&d}return this._createEncoderBuffer(u)},l.prototype._encodeTime=function(e,t){var r,n=new Date(e);return"gentime"===t?r=[u(n.getUTCFullYear()),u(n.getUTCMonth()+1),u(n.getUTCDate()),u(n.getUTCHours()),u(n.getUTCMinutes()),u(n.getUTCSeconds()),"Z"].join(""):"utctime"===t?r=[u(n.getUTCFullYear()%100),u(n.getUTCMonth()+1),u(n.getUTCDate()),u(n.getUTCHours()),u(n.getUTCMinutes()),u(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(r,"octstr")},l.prototype._encodeNull=function(){return this._createEncoderBuffer("")},l.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!i.isBuffer(e)){var r=e.toArray();!e.sign&&128&r[0]&&r.unshift(0),e=i.from(r)}if(i.isBuffer(e)){var n=e.length;0===e.length&&n++;var o=i.alloc(n);return e.copy(o),0===e.length&&(o[0]=0),this._createEncoderBuffer(o)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);for(var s=1,a=e;a>=256;a>>=8)s++;for(var l=new Array(s),u=l.length-1;u>=0;u--)l[u]=255&e,e>>=8;return 128&l[0]&&l.unshift(0),this._createEncoderBuffer(i.from(l))},l.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},l.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},l.prototype._skipDefault=function(e,t,r){var n,i=this._baseState;if(null===i.default)return!1;var o=e.join();if(void 0===i.defaultBuffer&&(i.defaultBuffer=this._encodeValue(i.default,t,r).join()),o.length!==i.defaultBuffer.length)return!1;for(n=0;n<o.length;n++)if(o[n]!==i.defaultBuffer[n])return!1;return!0}},{"../base/node":171,"../constants/der":173,inherits:387,"safer-buffer":495}],179:[function(e,t,r){"use strict";var n=r;n.der=e("./der"),n.pem=e("./pem")},{"./der":178,"./pem":180}],180:[function(e,t,r){"use strict";var n=e("inherits"),i=e("./der");function o(e){i.call(this,e),this.enc="pem"}n(o,i),t.exports=o,o.prototype.encode=function(e,t){for(var r=i.prototype.encode.call(this,e).toString("base64"),n=["-----BEGIN "+t.label+"-----"],o=0;o<r.length;o+=64)n.push(r.slice(o,o+64));return n.push("-----END "+t.label+"-----"),n.join("\n")}},{"./der":178,inherits:387}],181:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}!function(t,r){function i(e,t){if(!e)throw new Error(t||"Assertion failed")}function o(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function s(e,t,r){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var a;"object"===n(t)?t.exports=s:r.BN=s,s.BN=s,s.wordSize=26;try{a=e("buffer").Buffer}catch(e){}function l(e,t,r){for(var n=0,i=Math.min(e.length,r),o=t;o<i;o++){var s=e.charCodeAt(o)-48;n<<=4,n|=s>=49&&s<=54?s-49+10:s>=17&&s<=22?s-17+10:15&s}return n}function u(e,t,r,n){for(var i=0,o=Math.min(e.length,r),s=t;s<o;s++){var a=e.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}s.isBN=function(e){return e instanceof s||null!==e&&"object"===n(e)&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"===n(e))return this._initArray(e,t,r);"hex"===t&&(t=16),i(t===(0|t)&&t>=2&&t<=36);var o=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&o++,16===t?this._parseHex(e,o):this._parseBase(e,t,o),"-"===e[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),t,r)},s.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(i(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},s.prototype._initArray=function(e,t,r){if(i("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,s,a=0;if("be"===r)for(n=e.length-1,o=0;n>=0;n-=3)s=e[n]|e[n-1]<<8|e[n-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(n=0,o=0;n<e.length;n+=3)s=e[n]|e[n+1]<<8|e[n+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},s.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,i,o=0;for(r=e.length-6,n=0;r>=t;r-=6)i=l(e,r,r+6),this.words[n]|=i<<o&67108863,this.words[n+1]|=i>>>26-o&4194303,(o+=24)>=26&&(o-=26,n++);r+6!==t&&(i=l(e,t,r+6),this.words[n]|=i<<o&67108863,this.words[n+1]|=i>>>26-o&4194303),this.strip()},s.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,s=o%n,a=Math.min(o,o-s)+r,l=0,c=r;c<a;c+=n)l=u(e,c,c+n,t),this.imuln(i),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==s){var h=1;for(l=u(e,c,e.length,t),c=0;c<s;c++)h*=t;this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}function p(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],o=0|t.words[0],s=i*o,a=67108863&s,l=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var c=l>>>26,h=67108863&l,d=Math.min(u,t.length-1),f=Math.max(0,u-e.length+1);f<=d;f++){var p=u-f|0;c+=(s=(i=0|e.words[p])*(o=0|t.words[f])+h)/67108864|0,h=67108863&s}r.words[u]=0|h,l=0|c}return 0!==l?r.words[u]=0|l:r.length--,r.strip()}s.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var n=0,o=0,s=0;s<this.length;s++){var a=this.words[s],l=(16777215&(a<<n|o)).toString(16);r=0!=(o=a>>>24-n&16777215)||s!==this.length-1?c[6-l.length]+l+r:l+r,(n+=2)>=26&&(n-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var u=h[e],f=d[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);r=(p=p.idivn(f)).isZero()?m+r:c[u-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(e,t){return i(void 0!==a),this.toArrayLike(a,e,t)},s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},s.prototype.toArrayLike=function(e,t,r){var n=this.byteLength(),o=r||Math.max(1,n);i(n<=o,"byte array longer than desired length"),i(o>0,"Requested array length <= 0"),this.strip();var s,a,l="le"===t,u=new e(o),c=this.clone();if(l){for(a=0;!c.isZero();a++)s=c.andln(255),c.iushrn(8),u[a]=s;for(;a<o;a++)u[a]=0}else{for(a=0;a<o-n;a++)u[a]=0;for(a=0;!c.isZero();a++)s=c.andln(255),c.iushrn(8),u[o-a-1]=s}return u},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},s.prototype.ior=function(e){return i(0==(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},s.prototype.iand=function(e){return i(0==(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},s.prototype.ixor=function(e){return i(0==(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){i("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this.strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){i("number"==typeof e&&e>=0);var r=e/26|0,n=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<n:this.words[r]&~(1<<n),this.strip()},s.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<r.length;o++)t=(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var o=0,s=0;s<n.length;s++)o=(t=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<r.length;s++)o=(t=(0|r.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,r){var n,i,o,s=e.words,a=t.words,l=r.words,u=0,c=0|s[0],h=8191&c,d=c>>>13,f=0|s[1],p=8191&f,m=f>>>13,g=0|s[2],v=8191&g,y=g>>>13,b=0|s[3],w=8191&b,C=b>>>13,_=0|s[4],S=8191&_,x=_>>>13,k=0|s[5],T=8191&k,R=k>>>13,E=0|s[6],M=8191&E,P=E>>>13,O=0|s[7],I=8191&O,A=O>>>13,j=0|s[8],D=8191&j,N=j>>>13,F=0|s[9],$=8191&F,L=F>>>13,B=0|a[0],V=8191&B,H=B>>>13,z=0|a[1],U=8191&z,q=z>>>13,G=0|a[2],W=8191&G,K=G>>>13,J=0|a[3],X=8191&J,Y=J>>>13,Z=0|a[4],Q=8191&Z,ee=Z>>>13,te=0|a[5],re=8191&te,ne=te>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,ae=0|a[7],le=8191&ae,ue=ae>>>13,ce=0|a[8],he=8191&ce,de=ce>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(u+(n=Math.imul(h,V))|0)+((8191&(i=(i=Math.imul(h,H))+Math.imul(d,V)|0))<<13)|0;u=((o=Math.imul(d,H))+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(p,V),i=(i=Math.imul(p,H))+Math.imul(m,V)|0,o=Math.imul(m,H);var ve=(u+(n=n+Math.imul(h,U)|0)|0)+((8191&(i=(i=i+Math.imul(h,q)|0)+Math.imul(d,U)|0))<<13)|0;u=((o=o+Math.imul(d,q)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(v,V),i=(i=Math.imul(v,H))+Math.imul(y,V)|0,o=Math.imul(y,H),n=n+Math.imul(p,U)|0,i=(i=i+Math.imul(p,q)|0)+Math.imul(m,U)|0,o=o+Math.imul(m,q)|0;var ye=(u+(n=n+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,K)|0)+Math.imul(d,W)|0))<<13)|0;u=((o=o+Math.imul(d,K)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(w,V),i=(i=Math.imul(w,H))+Math.imul(C,V)|0,o=Math.imul(C,H),n=n+Math.imul(v,U)|0,i=(i=i+Math.imul(v,q)|0)+Math.imul(y,U)|0,o=o+Math.imul(y,q)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,K)|0;var be=(u+(n=n+Math.imul(h,X)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(d,X)|0))<<13)|0;u=((o=o+Math.imul(d,Y)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(S,V),i=(i=Math.imul(S,H))+Math.imul(x,V)|0,o=Math.imul(x,H),n=n+Math.imul(w,U)|0,i=(i=i+Math.imul(w,q)|0)+Math.imul(C,U)|0,o=o+Math.imul(C,q)|0,n=n+Math.imul(v,W)|0,i=(i=i+Math.imul(v,K)|0)+Math.imul(y,W)|0,o=o+Math.imul(y,K)|0,n=n+Math.imul(p,X)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,Y)|0;var we=(u+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(d,Q)|0))<<13)|0;u=((o=o+Math.imul(d,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(T,V),i=(i=Math.imul(T,H))+Math.imul(R,V)|0,o=Math.imul(R,H),n=n+Math.imul(S,U)|0,i=(i=i+Math.imul(S,q)|0)+Math.imul(x,U)|0,o=o+Math.imul(x,q)|0,n=n+Math.imul(w,W)|0,i=(i=i+Math.imul(w,K)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,K)|0,n=n+Math.imul(v,X)|0,i=(i=i+Math.imul(v,Y)|0)+Math.imul(y,X)|0,o=o+Math.imul(y,Y)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,ee)|0;var Ce=(u+(n=n+Math.imul(h,re)|0)|0)+((8191&(i=(i=i+Math.imul(h,ne)|0)+Math.imul(d,re)|0))<<13)|0;u=((o=o+Math.imul(d,ne)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(M,V),i=(i=Math.imul(M,H))+Math.imul(P,V)|0,o=Math.imul(P,H),n=n+Math.imul(T,U)|0,i=(i=i+Math.imul(T,q)|0)+Math.imul(R,U)|0,o=o+Math.imul(R,q)|0,n=n+Math.imul(S,W)|0,i=(i=i+Math.imul(S,K)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,K)|0,n=n+Math.imul(w,X)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(C,X)|0,o=o+Math.imul(C,Y)|0,n=n+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,ee)|0)+Math.imul(y,Q)|0,o=o+Math.imul(y,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(m,re)|0,o=o+Math.imul(m,ne)|0;var _e=(u+(n=n+Math.imul(h,oe)|0)|0)+((8191&(i=(i=i+Math.imul(h,se)|0)+Math.imul(d,oe)|0))<<13)|0;u=((o=o+Math.imul(d,se)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(I,V),i=(i=Math.imul(I,H))+Math.imul(A,V)|0,o=Math.imul(A,H),n=n+Math.imul(M,U)|0,i=(i=i+Math.imul(M,q)|0)+Math.imul(P,U)|0,o=o+Math.imul(P,q)|0,n=n+Math.imul(T,W)|0,i=(i=i+Math.imul(T,K)|0)+Math.imul(R,W)|0,o=o+Math.imul(R,K)|0,n=n+Math.imul(S,X)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(x,X)|0,o=o+Math.imul(x,Y)|0,n=n+Math.imul(w,Q)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,ee)|0,n=n+Math.imul(v,re)|0,i=(i=i+Math.imul(v,ne)|0)+Math.imul(y,re)|0,o=o+Math.imul(y,ne)|0,n=n+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,se)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,se)|0;var Se=(u+(n=n+Math.imul(h,le)|0)|0)+((8191&(i=(i=i+Math.imul(h,ue)|0)+Math.imul(d,le)|0))<<13)|0;u=((o=o+Math.imul(d,ue)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(D,V),i=(i=Math.imul(D,H))+Math.imul(N,V)|0,o=Math.imul(N,H),n=n+Math.imul(I,U)|0,i=(i=i+Math.imul(I,q)|0)+Math.imul(A,U)|0,o=o+Math.imul(A,q)|0,n=n+Math.imul(M,W)|0,i=(i=i+Math.imul(M,K)|0)+Math.imul(P,W)|0,o=o+Math.imul(P,K)|0,n=n+Math.imul(T,X)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(R,X)|0,o=o+Math.imul(R,Y)|0,n=n+Math.imul(S,Q)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,ee)|0,n=n+Math.imul(w,re)|0,i=(i=i+Math.imul(w,ne)|0)+Math.imul(C,re)|0,o=o+Math.imul(C,ne)|0,n=n+Math.imul(v,oe)|0,i=(i=i+Math.imul(v,se)|0)+Math.imul(y,oe)|0,o=o+Math.imul(y,se)|0,n=n+Math.imul(p,le)|0,i=(i=i+Math.imul(p,ue)|0)+Math.imul(m,le)|0,o=o+Math.imul(m,ue)|0;var xe=(u+(n=n+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,de)|0)+Math.imul(d,he)|0))<<13)|0;u=((o=o+Math.imul(d,de)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul($,V),i=(i=Math.imul($,H))+Math.imul(L,V)|0,o=Math.imul(L,H),n=n+Math.imul(D,U)|0,i=(i=i+Math.imul(D,q)|0)+Math.imul(N,U)|0,o=o+Math.imul(N,q)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,K)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,K)|0,n=n+Math.imul(M,X)|0,i=(i=i+Math.imul(M,Y)|0)+Math.imul(P,X)|0,o=o+Math.imul(P,Y)|0,n=n+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(R,Q)|0,o=o+Math.imul(R,ee)|0,n=n+Math.imul(S,re)|0,i=(i=i+Math.imul(S,ne)|0)+Math.imul(x,re)|0,o=o+Math.imul(x,ne)|0,n=n+Math.imul(w,oe)|0,i=(i=i+Math.imul(w,se)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,se)|0,n=n+Math.imul(v,le)|0,i=(i=i+Math.imul(v,ue)|0)+Math.imul(y,le)|0,o=o+Math.imul(y,ue)|0,n=n+Math.imul(p,he)|0,i=(i=i+Math.imul(p,de)|0)+Math.imul(m,he)|0,o=o+Math.imul(m,de)|0;var ke=(u+(n=n+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,me)|0)+Math.imul(d,pe)|0))<<13)|0;u=((o=o+Math.imul(d,me)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul($,U),i=(i=Math.imul($,q))+Math.imul(L,U)|0,o=Math.imul(L,q),n=n+Math.imul(D,W)|0,i=(i=i+Math.imul(D,K)|0)+Math.imul(N,W)|0,o=o+Math.imul(N,K)|0,n=n+Math.imul(I,X)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(A,X)|0,o=o+Math.imul(A,Y)|0,n=n+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,ee)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,ee)|0,n=n+Math.imul(T,re)|0,i=(i=i+Math.imul(T,ne)|0)+Math.imul(R,re)|0,o=o+Math.imul(R,ne)|0,n=n+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,se)|0)+Math.imul(x,oe)|0,o=o+Math.imul(x,se)|0,n=n+Math.imul(w,le)|0,i=(i=i+Math.imul(w,ue)|0)+Math.imul(C,le)|0,o=o+Math.imul(C,ue)|0,n=n+Math.imul(v,he)|0,i=(i=i+Math.imul(v,de)|0)+Math.imul(y,he)|0,o=o+Math.imul(y,de)|0;var Te=(u+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;u=((o=o+Math.imul(m,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul($,W),i=(i=Math.imul($,K))+Math.imul(L,W)|0,o=Math.imul(L,K),n=n+Math.imul(D,X)|0,i=(i=i+Math.imul(D,Y)|0)+Math.imul(N,X)|0,o=o+Math.imul(N,Y)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(A,Q)|0,o=o+Math.imul(A,ee)|0,n=n+Math.imul(M,re)|0,i=(i=i+Math.imul(M,ne)|0)+Math.imul(P,re)|0,o=o+Math.imul(P,ne)|0,n=n+Math.imul(T,oe)|0,i=(i=i+Math.imul(T,se)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,se)|0,n=n+Math.imul(S,le)|0,i=(i=i+Math.imul(S,ue)|0)+Math.imul(x,le)|0,o=o+Math.imul(x,ue)|0,n=n+Math.imul(w,he)|0,i=(i=i+Math.imul(w,de)|0)+Math.imul(C,he)|0,o=o+Math.imul(C,de)|0;var Re=(u+(n=n+Math.imul(v,pe)|0)|0)+((8191&(i=(i=i+Math.imul(v,me)|0)+Math.imul(y,pe)|0))<<13)|0;u=((o=o+Math.imul(y,me)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul($,X),i=(i=Math.imul($,Y))+Math.imul(L,X)|0,o=Math.imul(L,Y),n=n+Math.imul(D,Q)|0,i=(i=i+Math.imul(D,ee)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,ee)|0,n=n+Math.imul(I,re)|0,i=(i=i+Math.imul(I,ne)|0)+Math.imul(A,re)|0,o=o+Math.imul(A,ne)|0,n=n+Math.imul(M,oe)|0,i=(i=i+Math.imul(M,se)|0)+Math.imul(P,oe)|0,o=o+Math.imul(P,se)|0,n=n+Math.imul(T,le)|0,i=(i=i+Math.imul(T,ue)|0)+Math.imul(R,le)|0,o=o+Math.imul(R,ue)|0,n=n+Math.imul(S,he)|0,i=(i=i+Math.imul(S,de)|0)+Math.imul(x,he)|0,o=o+Math.imul(x,de)|0;var Ee=(u+(n=n+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,me)|0)+Math.imul(C,pe)|0))<<13)|0;u=((o=o+Math.imul(C,me)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul($,Q),i=(i=Math.imul($,ee))+Math.imul(L,Q)|0,o=Math.imul(L,ee),n=n+Math.imul(D,re)|0,i=(i=i+Math.imul(D,ne)|0)+Math.imul(N,re)|0,o=o+Math.imul(N,ne)|0,n=n+Math.imul(I,oe)|0,i=(i=i+Math.imul(I,se)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,se)|0,n=n+Math.imul(M,le)|0,i=(i=i+Math.imul(M,ue)|0)+Math.imul(P,le)|0,o=o+Math.imul(P,ue)|0,n=n+Math.imul(T,he)|0,i=(i=i+Math.imul(T,de)|0)+Math.imul(R,he)|0,o=o+Math.imul(R,de)|0;var Me=(u+(n=n+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,me)|0)+Math.imul(x,pe)|0))<<13)|0;u=((o=o+Math.imul(x,me)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul($,re),i=(i=Math.imul($,ne))+Math.imul(L,re)|0,o=Math.imul(L,ne),n=n+Math.imul(D,oe)|0,i=(i=i+Math.imul(D,se)|0)+Math.imul(N,oe)|0,o=o+Math.imul(N,se)|0,n=n+Math.imul(I,le)|0,i=(i=i+Math.imul(I,ue)|0)+Math.imul(A,le)|0,o=o+Math.imul(A,ue)|0,n=n+Math.imul(M,he)|0,i=(i=i+Math.imul(M,de)|0)+Math.imul(P,he)|0,o=o+Math.imul(P,de)|0;var Pe=(u+(n=n+Math.imul(T,pe)|0)|0)+((8191&(i=(i=i+Math.imul(T,me)|0)+Math.imul(R,pe)|0))<<13)|0;u=((o=o+Math.imul(R,me)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul($,oe),i=(i=Math.imul($,se))+Math.imul(L,oe)|0,o=Math.imul(L,se),n=n+Math.imul(D,le)|0,i=(i=i+Math.imul(D,ue)|0)+Math.imul(N,le)|0,o=o+Math.imul(N,ue)|0,n=n+Math.imul(I,he)|0,i=(i=i+Math.imul(I,de)|0)+Math.imul(A,he)|0,o=o+Math.imul(A,de)|0;var Oe=(u+(n=n+Math.imul(M,pe)|0)|0)+((8191&(i=(i=i+Math.imul(M,me)|0)+Math.imul(P,pe)|0))<<13)|0;u=((o=o+Math.imul(P,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul($,le),i=(i=Math.imul($,ue))+Math.imul(L,le)|0,o=Math.imul(L,ue),n=n+Math.imul(D,he)|0,i=(i=i+Math.imul(D,de)|0)+Math.imul(N,he)|0,o=o+Math.imul(N,de)|0;var Ie=(u+(n=n+Math.imul(I,pe)|0)|0)+((8191&(i=(i=i+Math.imul(I,me)|0)+Math.imul(A,pe)|0))<<13)|0;u=((o=o+Math.imul(A,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul($,he),i=(i=Math.imul($,de))+Math.imul(L,he)|0,o=Math.imul(L,de);var Ae=(u+(n=n+Math.imul(D,pe)|0)|0)+((8191&(i=(i=i+Math.imul(D,me)|0)+Math.imul(N,pe)|0))<<13)|0;u=((o=o+Math.imul(N,me)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863;var je=(u+(n=Math.imul($,pe))|0)+((8191&(i=(i=Math.imul($,me))+Math.imul(L,pe)|0))<<13)|0;return u=((o=Math.imul(L,me))+(i>>>13)|0)+(je>>>26)|0,je&=67108863,l[0]=ge,l[1]=ve,l[2]=ye,l[3]=be,l[4]=we,l[5]=Ce,l[6]=_e,l[7]=Se,l[8]=xe,l[9]=ke,l[10]=Te,l[11]=Re,l[12]=Ee,l[13]=Me,l[14]=Pe,l[15]=Oe,l[16]=Ie,l[17]=Ae,l[18]=je,0!==u&&(l[19]=u,r.length++),r};function g(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,l=Math.min(o,t.length-1),u=Math.max(0,o-e.length+1);u<=l;u++){var c=o-u,h=(0|e.words[c])*(0|t.words[u]),d=67108863&h;a=67108863&(d=d+a|0),i+=(s=(s=s+(h/67108864|0)|0)+(d>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}function v(e,t,r){return(new y).mulp(e,t,r)}function y(e,t){this.x=e,this.y=t}Math.imul||(m=p),s.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):r<63?p(this,e,t):r<1024?g(this,e,t):v(this,e,t)},y.prototype.makeRBT=function(e){for(var t=new Array(e),r=s.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},y.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},y.prototype.permute=function(e,t,r,n,i,o){for(var s=0;s<o;s++)n[s]=t[e[s]],i[s]=r[e[s]]},y.prototype.transform=function(e,t,r,n,i,o){this.permute(o,e,t,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,l=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),c=0;c<i;c+=a)for(var h=l,d=u,f=0;f<s;f++){var p=r[c+f],m=n[c+f],g=r[c+f+s],v=n[c+f+s],y=h*g-d*v;v=h*v+d*g,g=y,r[c+f]=p+g,n[c+f]=m+v,r[c+f+s]=p-g,n[c+f+s]=m-v,f!==a&&(y=l*h-u*d,d=l*d+u*h,h=y)}},y.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},y.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},y.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},y.prototype.convert13b=function(e,t,r,n){for(var o=0,s=0;s<t;s++)o+=0|e[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<n;++s)r[s]=0;i(0===o),i(0==(-8192&o))},y.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},y.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),l=new Array(n),u=new Array(n),c=new Array(n),h=new Array(n),d=r.words;d.length=n,this.convert13b(e.words,e.length,s,n),this.convert13b(t.words,t.length,u,n),this.transform(s,o,a,l,n,i),this.transform(u,o,c,h,n,i);for(var f=0;f<n;f++){var p=a[f]*c[f]-l[f]*h[f];l[f]=a[f]*h[f]+l[f]*c[f],a[f]=p}return this.conjugate(a,l,n),this.transform(a,l,d,o,n,i),this.conjugate(d,o,n),this.normalize13b(d,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),v(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){i("number"==typeof e),i(e<67108864);for(var t=0,r=0;r<this.length;r++){var n=(0|this.words[r])*e,o=(67108863&n)+(67108863&t);t>>=26,t+=n/67108864|0,t+=o>>>26,this.words[r]=67108863&o}return 0!==t&&(this.words[r]=t,this.length++),this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=f(e);if(0===t.length)return new s(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},s.prototype.iushln=function(e){i("number"==typeof e&&e>=0);var t,r=e%26,n=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,l=(0|this.words[t])-a<<r;this.words[t]=l|s,s=a>>>26-r}s&&(this.words[t]=s,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this.strip()},s.prototype.ishln=function(e){return i(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,r){var n;i("number"==typeof e&&e>=0),n=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,l=r;if(n-=s,n=Math.max(0,n),l){for(var u=0;u<s;u++)l.words[u]=this.words[u];l.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=n);u--){var h=0|this.words[u];this.words[u]=c<<26-o|h>>>o,c=h&a}return l&&0!==c&&(l.words[l.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(e,t,r){return i(0===this.negative),this.iushrn(e,t,r)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){i("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,n=1<<t;return!(this.length<=r||!(this.words[r]&n))},s.prototype.imaskn=function(e){i("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var n=67108863^67108863>>>t<<t;this.words[this.length-1]&=n}return this.strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return i("number"==typeof e),i(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(i("number"==typeof e),i(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,r){var n,o,s=e.length+r;this._expand(s);var a=0;for(n=0;n<e.length;n++){o=(0|this.words[n+r])+a;var l=(0|e.words[n])*t;a=((o-=67108863&l)>>26)-(l/67108864|0),this.words[n+r]=67108863&o}for(;n<this.length-r;n++)a=(o=(0|this.words[n+r])+a)>>26,this.words[n+r]=67108863&o;if(0===a)return this.strip();for(i(-1===a),a=0,n=0;n<this.length;n++)a=(o=-(0|this.words[n])+a)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},s.prototype._wordDiv=function(e,t){var r=this.length-e.length,n=this.clone(),i=e,o=0|i.words[i.length-1];0!=(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var a,l=n.length-i.length;if("mod"!==t){(a=new s(null)).length=l+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var c=n.clone()._ishlnsubmul(i,1,l);0===c.negative&&(n=c,a&&(a.words[l]=1));for(var h=l-1;h>=0;h--){var d=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(d=Math.min(d/o|0,67108863),n._ishlnsubmul(i,d,h);0!==n.negative;)d--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);a&&(a.words[h]=d)}return a&&a.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},s.prototype.divmod=function(e,t,r){return i(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(n=a.div.neg()),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:n,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(n=a.div.neg()),{div:n,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modn(e.words[0]))}:this._wordDiv(e,t);var n,o,a},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modn=function(e){i(e<=67108863);for(var t=(1<<26)%e,r=0,n=this.length-1;n>=0;n--)r=(t*r+(0|this.words[n]))%e;return r},s.prototype.idivn=function(e){i(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*t;this.words[r]=n/e|0,t=n%e}return this.strip()},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){i(0===e.negative),i(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n=new s(1),o=new s(0),a=new s(0),l=new s(1),u=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++u;for(var c=r.clone(),h=t.clone();!t.isZero();){for(var d=0,f=1;0==(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(n.isOdd()||o.isOdd())&&(n.iadd(c),o.isub(h)),n.iushrn(1),o.iushrn(1);for(var p=0,m=1;0==(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||l.isOdd())&&(a.iadd(c),l.isub(h)),a.iushrn(1),l.iushrn(1);t.cmp(r)>=0?(t.isub(r),n.isub(a),o.isub(l)):(r.isub(t),a.isub(n),l.isub(o))}return{a,b:l,gcd:r.iushln(u)}},s.prototype._invmp=function(e){i(0===e.negative),i(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n,o=new s(1),a=new s(0),l=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,c=1;0==(t.words[0]&c)&&u<26;++u,c<<=1);if(u>0)for(t.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);for(var h=0,d=1;0==(r.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(a)):(r.isub(t),a.isub(o))}return(n=0===t.cmpn(1)?o:a).cmpn(0)<0&&n.iadd(e),n},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){i("number"==typeof e);var t=e%26,r=(e-t)/26,n=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var o=n,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),i(e<=67108863,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new k(e)},s.prototype.toRed=function(e){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return i(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return i(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var b={k256:null,p224:null,p192:null,p25519:null};function w(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function C(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else i(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function T(e){k.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},w.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},w.prototype.split=function(e,t){e.iushrn(this.n,0,t)},w.prototype.imulK=function(e){return e.imul(this.k)},o(C,w),C.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&r,i=10;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},C.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},o(_,w),o(S,w),o(x,w),x.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(b[e])return b[e];var t;if("k256"===e)t=new C;else if("p224"===e)t=new _;else if("p192"===e)t=new S;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new x}return b[e]=t,t},k.prototype._verify1=function(e){i(0===e.negative,"red works only with positives"),i(e.red,"red works only with red numbers")},k.prototype._verify2=function(e,t){i(0==(e.negative|t.negative),"red works only with positives"),i(e.red&&e.red===t.red,"red works only with red numbers")},k.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},k.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},k.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},k.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},k.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},k.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},k.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},k.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},k.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},k.prototype.isqr=function(e){return this.imul(e,e.clone())},k.prototype.sqr=function(e){return this.mul(e,e)},k.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(i(t%2==1),3===t){var r=this.m.add(new s(1)).iushrn(2);return this.pow(e,r)}for(var n=this.m.subn(1),o=0;!n.isZero()&&0===n.andln(1);)o++,n.iushrn(1);i(!n.isZero());var a=new s(1).toRed(this),l=a.redNeg(),u=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new s(2*c*c).toRed(this);0!==this.pow(c,u).cmp(l);)c.redIAdd(l);for(var h=this.pow(c,n),d=this.pow(e,n.addn(1).iushrn(1)),f=this.pow(e,n),p=o;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();i(g<p);var v=this.pow(h,new s(1).iushln(p-g-1));d=d.redMul(v),h=v.redSqr(),f=f.redMul(h),p=g}return d},k.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},k.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=4,n=new Array(1<<r);n[0]=new s(1).toRed(this),n[1]=e;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],e);var o=n[0],a=0,l=0,u=t.bitLength()%26;for(0===u&&(u=26),i=t.length-1;i>=0;i--){for(var c=t.words[i],h=u-1;h>=0;h--){var d=c>>h&1;o!==n[0]&&(o=this.sqr(o)),0!==d||0!==a?(a<<=1,a|=d,(++l===r||0===i&&0===h)&&(o=this.mul(o,n[a]),l=0,a=0)):l=0}u=26}return o},k.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},k.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new T(e)},o(T,k),T.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},T.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},T.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},T.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},T.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,void 0)},{buffer:185}],182:[function(e,t,r){"use strict";r.byteLength=c,r.toByteArray=d,r.fromByteArray=m;for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)n[a]=s[a],i[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n}function h(e,t,r){return 3*(t+r)/4-r}function d(e){var t,r,n=u(e),s=n[0],a=n[1],l=new o(h(e,s,a)),c=0,d=a>0?s-4:s;for(r=0;r<d;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;return 2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,l[c++]=255&t),1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t),l}function f(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function p(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(f(n));return i.join("")}function m(e){for(var t,r=e.length,i=r%3,o=[],s=16383,a=0,l=r-i;a<l;a+=s)o.push(p(e,a,a+s>l?l:a+s));return 1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],183:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}!function(t,r){function i(e,t){if(!e)throw new Error(t||"Assertion failed")}function o(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function s(e,t,r){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var a;"object"===n(t)?t.exports=s:r.BN=s,s.BN=s,s.wordSize=26;try{a=e("buffer").Buffer}catch(e){}function l(e,t,r){for(var n=0,o=Math.min(e.length,r),s=0,a=t;a<o;a++){var l,u=e.charCodeAt(a)-48;n<<=4,n|=l=u>=49&&u<=54?u-49+10:u>=17&&u<=22?u-17+10:u,s|=l}return i(!(240&s),"Invalid character in "+e),n}function u(e,t,r,n){for(var o=0,s=0,a=Math.min(e.length,r),l=t;l<a;l++){var u=e.charCodeAt(l)-48;o*=n,s=u>=49?u-49+10:u>=17?u-17+10:u,i(u>=0&&s<n,"Invalid character"),o+=s}return o}function c(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(s.isBN=function(e){return e instanceof s||null!==e&&"object"===n(e)&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"===n(e))return this._initArray(e,t,r);"hex"===t&&(t=16),i(t===(0|t)&&t>=2&&t<=36);var o=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&o++,16===t?this._parseHex(e,o):this._parseBase(e,t,o),"-"===e[0]&&(this.negative=1),this._strip(),"le"===r&&this._initArray(this.toArray(),t,r)},s.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(i(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},s.prototype._initArray=function(e,t,r){if(i("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,s,a=0;if("be"===r)for(n=e.length-1,o=0;n>=0;n-=3)s=e[n]|e[n-1]<<8|e[n-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(n=0,o=0;n<e.length;n+=3)s=e[n]|e[n+1]<<8|e[n+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this._strip()},s.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,i,o=0;for(r=e.length-6,n=0;r>=t;r-=6)i=l(e,r,r+6),this.words[n]|=i<<o&67108863,this.words[n+1]|=i>>>26-o&4194303,(o+=24)>=26&&(o-=26,n++);r+6!==t&&(i=l(e,t,r+6),this.words[n]|=i<<o&67108863,this.words[n+1]|=i>>>26-o&4194303),this._strip()},s.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,s=o%n,a=Math.min(o,o-s)+r,l=0,c=r;c<a;c+=n)l=u(e,c,c+n,t),this.imuln(i),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==s){var h=1;for(l=u(e,c,e.length,t),c=0;c<s;c++)h*=t;this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype._move=function(e){c(e,this)},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(e){s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var n=0,o=0,s=0;s<this.length;s++){var a=this.words[s],l=(16777215&(a<<n|o)).toString(16);r=0!=(o=a>>>24-n&16777215)||s!==this.length-1?d[6-l.length]+l+r:l+r,(n+=2)>=26&&(n-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var u=f[e],c=p[e];r="";var h=this.clone();for(h.negative=0;!h.isZero();){var m=h.modrn(c).toString(e);r=(h=h.idivn(c)).isZero()?m+r:d[u-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16,2)},a&&(s.prototype.toBuffer=function(e,t){return this.toArrayLike(a,e,t)}),s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};var m=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)};function g(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=e.words[n]>>>i&1}return t}function v(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],o=0|t.words[0],s=i*o,a=67108863&s,l=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var c=l>>>26,h=67108863&l,d=Math.min(u,t.length-1),f=Math.max(0,u-e.length+1);f<=d;f++){var p=u-f|0;c+=(s=(i=0|e.words[p])*(o=0|t.words[f])+h)/67108864|0,h=67108863&s}r.words[u]=0|h,l=0|c}return 0!==l?r.words[u]=0|l:r.length--,r._strip()}s.prototype.toArrayLike=function(e,t,r){this._strip();var n=this.byteLength(),o=r||Math.max(1,n);i(n<=o,"byte array longer than desired length"),i(o>0,"Requested array length <= 0");var s=m(e,o);return this["_toArrayLike"+("le"===t?"LE":"BE")](s,n),s},s.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;e[r++]=255&s,r<e.length&&(e[r++]=s>>8&255),r<e.length&&(e[r++]=s>>16&255),6===o?(r<e.length&&(e[r++]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},s.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;e[r--]=255&s,r>=0&&(e[r--]=s>>8&255),r>=0&&(e[r--]=s>>16&255),6===o?(r>=0&&(e[r--]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},s.prototype.ior=function(e){return i(0==(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},s.prototype.iand=function(e){return i(0==(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},s.prototype.ixor=function(e){return i(0==(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){i("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this._strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){i("number"==typeof e&&e>=0);var r=e/26|0,n=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<n:this.words[r]&~(1<<n),this._strip()},s.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<r.length;o++)t=(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var o=0,s=0;s<n.length;s++)o=(t=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<r.length;s++)o=(t=(0|r.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var y=function(e,t,r){var n,i,o,s=e.words,a=t.words,l=r.words,u=0,c=0|s[0],h=8191&c,d=c>>>13,f=0|s[1],p=8191&f,m=f>>>13,g=0|s[2],v=8191&g,y=g>>>13,b=0|s[3],w=8191&b,C=b>>>13,_=0|s[4],S=8191&_,x=_>>>13,k=0|s[5],T=8191&k,R=k>>>13,E=0|s[6],M=8191&E,P=E>>>13,O=0|s[7],I=8191&O,A=O>>>13,j=0|s[8],D=8191&j,N=j>>>13,F=0|s[9],$=8191&F,L=F>>>13,B=0|a[0],V=8191&B,H=B>>>13,z=0|a[1],U=8191&z,q=z>>>13,G=0|a[2],W=8191&G,K=G>>>13,J=0|a[3],X=8191&J,Y=J>>>13,Z=0|a[4],Q=8191&Z,ee=Z>>>13,te=0|a[5],re=8191&te,ne=te>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,ae=0|a[7],le=8191&ae,ue=ae>>>13,ce=0|a[8],he=8191&ce,de=ce>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(u+(n=Math.imul(h,V))|0)+((8191&(i=(i=Math.imul(h,H))+Math.imul(d,V)|0))<<13)|0;u=((o=Math.imul(d,H))+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(p,V),i=(i=Math.imul(p,H))+Math.imul(m,V)|0,o=Math.imul(m,H);var ve=(u+(n=n+Math.imul(h,U)|0)|0)+((8191&(i=(i=i+Math.imul(h,q)|0)+Math.imul(d,U)|0))<<13)|0;u=((o=o+Math.imul(d,q)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(v,V),i=(i=Math.imul(v,H))+Math.imul(y,V)|0,o=Math.imul(y,H),n=n+Math.imul(p,U)|0,i=(i=i+Math.imul(p,q)|0)+Math.imul(m,U)|0,o=o+Math.imul(m,q)|0;var ye=(u+(n=n+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,K)|0)+Math.imul(d,W)|0))<<13)|0;u=((o=o+Math.imul(d,K)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(w,V),i=(i=Math.imul(w,H))+Math.imul(C,V)|0,o=Math.imul(C,H),n=n+Math.imul(v,U)|0,i=(i=i+Math.imul(v,q)|0)+Math.imul(y,U)|0,o=o+Math.imul(y,q)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,K)|0;var be=(u+(n=n+Math.imul(h,X)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(d,X)|0))<<13)|0;u=((o=o+Math.imul(d,Y)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(S,V),i=(i=Math.imul(S,H))+Math.imul(x,V)|0,o=Math.imul(x,H),n=n+Math.imul(w,U)|0,i=(i=i+Math.imul(w,q)|0)+Math.imul(C,U)|0,o=o+Math.imul(C,q)|0,n=n+Math.imul(v,W)|0,i=(i=i+Math.imul(v,K)|0)+Math.imul(y,W)|0,o=o+Math.imul(y,K)|0,n=n+Math.imul(p,X)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,Y)|0;var we=(u+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(d,Q)|0))<<13)|0;u=((o=o+Math.imul(d,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(T,V),i=(i=Math.imul(T,H))+Math.imul(R,V)|0,o=Math.imul(R,H),n=n+Math.imul(S,U)|0,i=(i=i+Math.imul(S,q)|0)+Math.imul(x,U)|0,o=o+Math.imul(x,q)|0,n=n+Math.imul(w,W)|0,i=(i=i+Math.imul(w,K)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,K)|0,n=n+Math.imul(v,X)|0,i=(i=i+Math.imul(v,Y)|0)+Math.imul(y,X)|0,o=o+Math.imul(y,Y)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,ee)|0;var Ce=(u+(n=n+Math.imul(h,re)|0)|0)+((8191&(i=(i=i+Math.imul(h,ne)|0)+Math.imul(d,re)|0))<<13)|0;u=((o=o+Math.imul(d,ne)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(M,V),i=(i=Math.imul(M,H))+Math.imul(P,V)|0,o=Math.imul(P,H),n=n+Math.imul(T,U)|0,i=(i=i+Math.imul(T,q)|0)+Math.imul(R,U)|0,o=o+Math.imul(R,q)|0,n=n+Math.imul(S,W)|0,i=(i=i+Math.imul(S,K)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,K)|0,n=n+Math.imul(w,X)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(C,X)|0,o=o+Math.imul(C,Y)|0,n=n+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,ee)|0)+Math.imul(y,Q)|0,o=o+Math.imul(y,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(m,re)|0,o=o+Math.imul(m,ne)|0;var _e=(u+(n=n+Math.imul(h,oe)|0)|0)+((8191&(i=(i=i+Math.imul(h,se)|0)+Math.imul(d,oe)|0))<<13)|0;u=((o=o+Math.imul(d,se)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(I,V),i=(i=Math.imul(I,H))+Math.imul(A,V)|0,o=Math.imul(A,H),n=n+Math.imul(M,U)|0,i=(i=i+Math.imul(M,q)|0)+Math.imul(P,U)|0,o=o+Math.imul(P,q)|0,n=n+Math.imul(T,W)|0,i=(i=i+Math.imul(T,K)|0)+Math.imul(R,W)|0,o=o+Math.imul(R,K)|0,n=n+Math.imul(S,X)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(x,X)|0,o=o+Math.imul(x,Y)|0,n=n+Math.imul(w,Q)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,ee)|0,n=n+Math.imul(v,re)|0,i=(i=i+Math.imul(v,ne)|0)+Math.imul(y,re)|0,o=o+Math.imul(y,ne)|0,n=n+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,se)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,se)|0;var Se=(u+(n=n+Math.imul(h,le)|0)|0)+((8191&(i=(i=i+Math.imul(h,ue)|0)+Math.imul(d,le)|0))<<13)|0;u=((o=o+Math.imul(d,ue)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(D,V),i=(i=Math.imul(D,H))+Math.imul(N,V)|0,o=Math.imul(N,H),n=n+Math.imul(I,U)|0,i=(i=i+Math.imul(I,q)|0)+Math.imul(A,U)|0,o=o+Math.imul(A,q)|0,n=n+Math.imul(M,W)|0,i=(i=i+Math.imul(M,K)|0)+Math.imul(P,W)|0,o=o+Math.imul(P,K)|0,n=n+Math.imul(T,X)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(R,X)|0,o=o+Math.imul(R,Y)|0,n=n+Math.imul(S,Q)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,ee)|0,n=n+Math.imul(w,re)|0,i=(i=i+Math.imul(w,ne)|0)+Math.imul(C,re)|0,o=o+Math.imul(C,ne)|0,n=n+Math.imul(v,oe)|0,i=(i=i+Math.imul(v,se)|0)+Math.imul(y,oe)|0,o=o+Math.imul(y,se)|0,n=n+Math.imul(p,le)|0,i=(i=i+Math.imul(p,ue)|0)+Math.imul(m,le)|0,o=o+Math.imul(m,ue)|0;var xe=(u+(n=n+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,de)|0)+Math.imul(d,he)|0))<<13)|0;u=((o=o+Math.imul(d,de)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul($,V),i=(i=Math.imul($,H))+Math.imul(L,V)|0,o=Math.imul(L,H),n=n+Math.imul(D,U)|0,i=(i=i+Math.imul(D,q)|0)+Math.imul(N,U)|0,o=o+Math.imul(N,q)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,K)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,K)|0,n=n+Math.imul(M,X)|0,i=(i=i+Math.imul(M,Y)|0)+Math.imul(P,X)|0,o=o+Math.imul(P,Y)|0,n=n+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(R,Q)|0,o=o+Math.imul(R,ee)|0,n=n+Math.imul(S,re)|0,i=(i=i+Math.imul(S,ne)|0)+Math.imul(x,re)|0,o=o+Math.imul(x,ne)|0,n=n+Math.imul(w,oe)|0,i=(i=i+Math.imul(w,se)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,se)|0,n=n+Math.imul(v,le)|0,i=(i=i+Math.imul(v,ue)|0)+Math.imul(y,le)|0,o=o+Math.imul(y,ue)|0,n=n+Math.imul(p,he)|0,i=(i=i+Math.imul(p,de)|0)+Math.imul(m,he)|0,o=o+Math.imul(m,de)|0;var ke=(u+(n=n+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,me)|0)+Math.imul(d,pe)|0))<<13)|0;u=((o=o+Math.imul(d,me)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul($,U),i=(i=Math.imul($,q))+Math.imul(L,U)|0,o=Math.imul(L,q),n=n+Math.imul(D,W)|0,i=(i=i+Math.imul(D,K)|0)+Math.imul(N,W)|0,o=o+Math.imul(N,K)|0,n=n+Math.imul(I,X)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(A,X)|0,o=o+Math.imul(A,Y)|0,n=n+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,ee)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,ee)|0,n=n+Math.imul(T,re)|0,i=(i=i+Math.imul(T,ne)|0)+Math.imul(R,re)|0,o=o+Math.imul(R,ne)|0,n=n+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,se)|0)+Math.imul(x,oe)|0,o=o+Math.imul(x,se)|0,n=n+Math.imul(w,le)|0,i=(i=i+Math.imul(w,ue)|0)+Math.imul(C,le)|0,o=o+Math.imul(C,ue)|0,n=n+Math.imul(v,he)|0,i=(i=i+Math.imul(v,de)|0)+Math.imul(y,he)|0,o=o+Math.imul(y,de)|0;var Te=(u+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;u=((o=o+Math.imul(m,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul($,W),i=(i=Math.imul($,K))+Math.imul(L,W)|0,o=Math.imul(L,K),n=n+Math.imul(D,X)|0,i=(i=i+Math.imul(D,Y)|0)+Math.imul(N,X)|0,o=o+Math.imul(N,Y)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(A,Q)|0,o=o+Math.imul(A,ee)|0,n=n+Math.imul(M,re)|0,i=(i=i+Math.imul(M,ne)|0)+Math.imul(P,re)|0,o=o+Math.imul(P,ne)|0,n=n+Math.imul(T,oe)|0,i=(i=i+Math.imul(T,se)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,se)|0,n=n+Math.imul(S,le)|0,i=(i=i+Math.imul(S,ue)|0)+Math.imul(x,le)|0,o=o+Math.imul(x,ue)|0,n=n+Math.imul(w,he)|0,i=(i=i+Math.imul(w,de)|0)+Math.imul(C,he)|0,o=o+Math.imul(C,de)|0;var Re=(u+(n=n+Math.imul(v,pe)|0)|0)+((8191&(i=(i=i+Math.imul(v,me)|0)+Math.imul(y,pe)|0))<<13)|0;u=((o=o+Math.imul(y,me)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul($,X),i=(i=Math.imul($,Y))+Math.imul(L,X)|0,o=Math.imul(L,Y),n=n+Math.imul(D,Q)|0,i=(i=i+Math.imul(D,ee)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,ee)|0,n=n+Math.imul(I,re)|0,i=(i=i+Math.imul(I,ne)|0)+Math.imul(A,re)|0,o=o+Math.imul(A,ne)|0,n=n+Math.imul(M,oe)|0,i=(i=i+Math.imul(M,se)|0)+Math.imul(P,oe)|0,o=o+Math.imul(P,se)|0,n=n+Math.imul(T,le)|0,i=(i=i+Math.imul(T,ue)|0)+Math.imul(R,le)|0,o=o+Math.imul(R,ue)|0,n=n+Math.imul(S,he)|0,i=(i=i+Math.imul(S,de)|0)+Math.imul(x,he)|0,o=o+Math.imul(x,de)|0;var Ee=(u+(n=n+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,me)|0)+Math.imul(C,pe)|0))<<13)|0;u=((o=o+Math.imul(C,me)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul($,Q),i=(i=Math.imul($,ee))+Math.imul(L,Q)|0,o=Math.imul(L,ee),n=n+Math.imul(D,re)|0,i=(i=i+Math.imul(D,ne)|0)+Math.imul(N,re)|0,o=o+Math.imul(N,ne)|0,n=n+Math.imul(I,oe)|0,i=(i=i+Math.imul(I,se)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,se)|0,n=n+Math.imul(M,le)|0,i=(i=i+Math.imul(M,ue)|0)+Math.imul(P,le)|0,o=o+Math.imul(P,ue)|0,n=n+Math.imul(T,he)|0,i=(i=i+Math.imul(T,de)|0)+Math.imul(R,he)|0,o=o+Math.imul(R,de)|0;var Me=(u+(n=n+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,me)|0)+Math.imul(x,pe)|0))<<13)|0;u=((o=o+Math.imul(x,me)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul($,re),i=(i=Math.imul($,ne))+Math.imul(L,re)|0,o=Math.imul(L,ne),n=n+Math.imul(D,oe)|0,i=(i=i+Math.imul(D,se)|0)+Math.imul(N,oe)|0,o=o+Math.imul(N,se)|0,n=n+Math.imul(I,le)|0,i=(i=i+Math.imul(I,ue)|0)+Math.imul(A,le)|0,o=o+Math.imul(A,ue)|0,n=n+Math.imul(M,he)|0,i=(i=i+Math.imul(M,de)|0)+Math.imul(P,he)|0,o=o+Math.imul(P,de)|0;var Pe=(u+(n=n+Math.imul(T,pe)|0)|0)+((8191&(i=(i=i+Math.imul(T,me)|0)+Math.imul(R,pe)|0))<<13)|0;u=((o=o+Math.imul(R,me)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul($,oe),i=(i=Math.imul($,se))+Math.imul(L,oe)|0,o=Math.imul(L,se),n=n+Math.imul(D,le)|0,i=(i=i+Math.imul(D,ue)|0)+Math.imul(N,le)|0,o=o+Math.imul(N,ue)|0,n=n+Math.imul(I,he)|0,i=(i=i+Math.imul(I,de)|0)+Math.imul(A,he)|0,o=o+Math.imul(A,de)|0;var Oe=(u+(n=n+Math.imul(M,pe)|0)|0)+((8191&(i=(i=i+Math.imul(M,me)|0)+Math.imul(P,pe)|0))<<13)|0;u=((o=o+Math.imul(P,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul($,le),i=(i=Math.imul($,ue))+Math.imul(L,le)|0,o=Math.imul(L,ue),n=n+Math.imul(D,he)|0,i=(i=i+Math.imul(D,de)|0)+Math.imul(N,he)|0,o=o+Math.imul(N,de)|0;var Ie=(u+(n=n+Math.imul(I,pe)|0)|0)+((8191&(i=(i=i+Math.imul(I,me)|0)+Math.imul(A,pe)|0))<<13)|0;u=((o=o+Math.imul(A,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul($,he),i=(i=Math.imul($,de))+Math.imul(L,he)|0,o=Math.imul(L,de);var Ae=(u+(n=n+Math.imul(D,pe)|0)|0)+((8191&(i=(i=i+Math.imul(D,me)|0)+Math.imul(N,pe)|0))<<13)|0;u=((o=o+Math.imul(N,me)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863;var je=(u+(n=Math.imul($,pe))|0)+((8191&(i=(i=Math.imul($,me))+Math.imul(L,pe)|0))<<13)|0;return u=((o=Math.imul(L,me))+(i>>>13)|0)+(je>>>26)|0,je&=67108863,l[0]=ge,l[1]=ve,l[2]=ye,l[3]=be,l[4]=we,l[5]=Ce,l[6]=_e,l[7]=Se,l[8]=xe,l[9]=ke,l[10]=Te,l[11]=Re,l[12]=Ee,l[13]=Me,l[14]=Pe,l[15]=Oe,l[16]=Ie,l[17]=Ae,l[18]=je,0!==u&&(l[19]=u,r.length++),r};function b(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,l=Math.min(o,t.length-1),u=Math.max(0,o-e.length+1);u<=l;u++){var c=o-u,h=(0|e.words[c])*(0|t.words[u]),d=67108863&h;a=67108863&(d=d+a|0),i+=(s=(s=s+(h/67108864|0)|0)+(d>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function w(e,t,r){return b(e,t,r)}function C(e,t){this.x=e,this.y=t}Math.imul||(y=v),s.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?y(this,e,t):r<63?v(this,e,t):r<1024?b(this,e,t):w(this,e,t)},C.prototype.makeRBT=function(e){for(var t=new Array(e),r=s.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},C.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},C.prototype.permute=function(e,t,r,n,i,o){for(var s=0;s<o;s++)n[s]=t[e[s]],i[s]=r[e[s]]},C.prototype.transform=function(e,t,r,n,i,o){this.permute(o,e,t,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,l=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),c=0;c<i;c+=a)for(var h=l,d=u,f=0;f<s;f++){var p=r[c+f],m=n[c+f],g=r[c+f+s],v=n[c+f+s],y=h*g-d*v;v=h*v+d*g,g=y,r[c+f]=p+g,n[c+f]=m+v,r[c+f+s]=p-g,n[c+f+s]=m-v,f!==a&&(y=l*h-u*d,d=l*d+u*h,h=y)}},C.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},C.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},C.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},C.prototype.convert13b=function(e,t,r,n){for(var o=0,s=0;s<t;s++)o+=0|e[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<n;++s)r[s]=0;i(0===o),i(0==(-8192&o))},C.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},C.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),l=new Array(n),u=new Array(n),c=new Array(n),h=new Array(n),d=r.words;d.length=n,this.convert13b(e.words,e.length,s,n),this.convert13b(t.words,t.length,u,n),this.transform(s,o,a,l,n,i),this.transform(u,o,c,h,n,i);for(var f=0;f<n;f++){var p=a[f]*c[f]-l[f]*h[f];l[f]=a[f]*h[f]+l[f]*c[f],a[f]=p}return this.conjugate(a,l,n),this.transform(a,l,d,o,n,i),this.conjugate(d,o,n),this.normalize13b(d,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),w(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){var t=e<0;t&&(e=-e),i("number"==typeof e),i(e<67108864);for(var r=0,n=0;n<this.length;n++){var o=(0|this.words[n])*e,s=(67108863&o)+(67108863&r);r>>=26,r+=o/67108864|0,r+=s>>>26,this.words[n]=67108863&s}return 0!==r&&(this.words[n]=r,this.length++),t?this.ineg():this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=g(e);if(0===t.length)return new s(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},s.prototype.iushln=function(e){i("number"==typeof e&&e>=0);var t,r=e%26,n=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,l=(0|this.words[t])-a<<r;this.words[t]=l|s,s=a>>>26-r}s&&(this.words[t]=s,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this._strip()},s.prototype.ishln=function(e){return i(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,r){var n;i("number"==typeof e&&e>=0),n=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,l=r;if(n-=s,n=Math.max(0,n),l){for(var u=0;u<s;u++)l.words[u]=this.words[u];l.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=n);u--){var h=0|this.words[u];this.words[u]=c<<26-o|h>>>o,c=h&a}return l&&0!==c&&(l.words[l.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(e,t,r){return i(0===this.negative),this.iushrn(e,t,r)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){i("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,n=1<<t;return!(this.length<=r||!(this.words[r]&n))},s.prototype.imaskn=function(e){i("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var n=67108863^67108863>>>t<<t;this.words[this.length-1]&=n}return this._strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return i("number"==typeof e),i(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(i("number"==typeof e),i(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,r){var n,o,s=e.length+r;this._expand(s);var a=0;for(n=0;n<e.length;n++){o=(0|this.words[n+r])+a;var l=(0|e.words[n])*t;a=((o-=67108863&l)>>26)-(l/67108864|0),this.words[n+r]=67108863&o}for(;n<this.length-r;n++)a=(o=(0|this.words[n+r])+a)>>26,this.words[n+r]=67108863&o;if(0===a)return this._strip();for(i(-1===a),a=0,n=0;n<this.length;n++)a=(o=-(0|this.words[n])+a)>>26,this.words[n]=67108863&o;return this.negative=1,this._strip()},s.prototype._wordDiv=function(e,t){var r=this.length-e.length,n=this.clone(),i=e,o=0|i.words[i.length-1];0!=(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var a,l=n.length-i.length;if("mod"!==t){(a=new s(null)).length=l+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var c=n.clone()._ishlnsubmul(i,1,l);0===c.negative&&(n=c,a&&(a.words[l]=1));for(var h=l-1;h>=0;h--){var d=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(d=Math.min(d/o|0,67108863),n._ishlnsubmul(i,d,h);0!==n.negative;)d--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);a&&(a.words[h]=d)}return a&&a._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},s.prototype.divmod=function(e,t,r){return i(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(n=a.div.neg()),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:n,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(n=a.div.neg()),{div:n,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modrn(e.words[0]))}:this._wordDiv(e,t);var n,o,a},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modrn=function(e){var t=e<0;t&&(e=-e),i(e<=67108863);for(var r=(1<<26)%e,n=0,o=this.length-1;o>=0;o--)n=(r*n+(0|this.words[o]))%e;return t?-n:n},s.prototype.modn=function(e){return this.modrn(e)},s.prototype.idivn=function(e){var t=e<0;t&&(e=-e),i(e<=67108863);for(var r=0,n=this.length-1;n>=0;n--){var o=(0|this.words[n])+67108864*r;this.words[n]=o/e|0,r=o%e}return this._strip(),t?this.ineg():this},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){i(0===e.negative),i(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n=new s(1),o=new s(0),a=new s(0),l=new s(1),u=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++u;for(var c=r.clone(),h=t.clone();!t.isZero();){for(var d=0,f=1;0==(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(n.isOdd()||o.isOdd())&&(n.iadd(c),o.isub(h)),n.iushrn(1),o.iushrn(1);for(var p=0,m=1;0==(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||l.isOdd())&&(a.iadd(c),l.isub(h)),a.iushrn(1),l.iushrn(1);t.cmp(r)>=0?(t.isub(r),n.isub(a),o.isub(l)):(r.isub(t),a.isub(n),l.isub(o))}return{a,b:l,gcd:r.iushln(u)}},s.prototype._invmp=function(e){i(0===e.negative),i(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n,o=new s(1),a=new s(0),l=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,c=1;0==(t.words[0]&c)&&u<26;++u,c<<=1);if(u>0)for(t.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);for(var h=0,d=1;0==(r.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(a)):(r.isub(t),a.isub(o))}return(n=0===t.cmpn(1)?o:a).cmpn(0)<0&&n.iadd(e),n},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){i("number"==typeof e);var t=e%26,r=(e-t)/26,n=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var o=n,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),i(e<=67108863,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new E(e)},s.prototype.toRed=function(e){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return i(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return i(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var _={k256:null,p224:null,p192:null,p25519:null};function S(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function x(){S.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function k(){S.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function T(){S.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function R(){S.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else i(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function M(e){E.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}S.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},S.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},S.prototype.split=function(e,t){e.iushrn(this.n,0,t)},S.prototype.imulK=function(e){return e.imul(this.k)},o(x,S),x.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&r,i=10;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},x.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},o(k,S),o(T,S),o(R,S),R.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(_[e])return _[e];var t;if("k256"===e)t=new x;else if("p224"===e)t=new k;else if("p192"===e)t=new T;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new R}return _[e]=t,t},E.prototype._verify1=function(e){i(0===e.negative,"red works only with positives"),i(e.red,"red works only with red numbers")},E.prototype._verify2=function(e,t){i(0==(e.negative|t.negative),"red works only with positives"),i(e.red&&e.red===t.red,"red works only with red numbers")},E.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(c(e,e.umod(this.m)._forceRed(this)),e)},E.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},E.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},E.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},E.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},E.prototype.isqr=function(e){return this.imul(e,e.clone())},E.prototype.sqr=function(e){return this.mul(e,e)},E.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(i(t%2==1),3===t){var r=this.m.add(new s(1)).iushrn(2);return this.pow(e,r)}for(var n=this.m.subn(1),o=0;!n.isZero()&&0===n.andln(1);)o++,n.iushrn(1);i(!n.isZero());var a=new s(1).toRed(this),l=a.redNeg(),u=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new s(2*c*c).toRed(this);0!==this.pow(c,u).cmp(l);)c.redIAdd(l);for(var h=this.pow(c,n),d=this.pow(e,n.addn(1).iushrn(1)),f=this.pow(e,n),p=o;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();i(g<p);var v=this.pow(h,new s(1).iushln(p-g-1));d=d.redMul(v),h=v.redSqr(),f=f.redMul(h),p=g}return d},E.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},E.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=4,n=new Array(1<<r);n[0]=new s(1).toRed(this),n[1]=e;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],e);var o=n[0],a=0,l=0,u=t.bitLength()%26;for(0===u&&(u=26),i=t.length-1;i>=0;i--){for(var c=t.words[i],h=u-1;h>=0;h--){var d=c>>h&1;o!==n[0]&&(o=this.sqr(o)),0!==d||0!==a?(a<<=1,a|=d,(++l===r||0===i&&0===h)&&(o=this.mul(o,n[a]),l=0,a=0)):l=0}u=26}return o},E.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},E.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new M(e)},o(M,E),M.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},M.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},M.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},M.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},M.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,void 0)},{buffer:185}],184:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var i;function o(e){this.rand=e}if(t.exports=function(e){return i||(i=new o(null)),i.generate(e)},t.exports.Rand=o,o.prototype.generate=function(e){return this._rand(e)},o.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},"object"===("undefined"==typeof self?"undefined":n(self)))self.crypto&&self.crypto.getRandomValues?o.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?o.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"===("undefined"==typeof window?"undefined":n(window))&&(o.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var s=e("crypto");if("function"!=typeof s.randomBytes)throw new Error("Not supported");o.prototype._rand=function(e){return s.randomBytes(e)}}catch(e){}},{crypto:185}],185:[function(e,t,r){},{}],186:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer;function i(e){n.isBuffer(e)||(e=n.from(e));for(var t=e.length/4|0,r=new Array(t),i=0;i<t;i++)r[i]=e.readUInt32BE(4*i);return r}function o(e){for(var t=0;t<e.length;e++)e[t]=0}function s(e,t,r,n,i){for(var o,s,a,l,u=r[0],c=r[1],h=r[2],d=r[3],f=e[0]^t[0],p=e[1]^t[1],m=e[2]^t[2],g=e[3]^t[3],v=4,y=1;y<i;y++)o=u[f>>>24]^c[p>>>16&255]^h[m>>>8&255]^d[255&g]^t[v++],s=u[p>>>24]^c[m>>>16&255]^h[g>>>8&255]^d[255&f]^t[v++],a=u[m>>>24]^c[g>>>16&255]^h[f>>>8&255]^d[255&p]^t[v++],l=u[g>>>24]^c[f>>>16&255]^h[p>>>8&255]^d[255&m]^t[v++],f=o,p=s,m=a,g=l;return o=(n[f>>>24]<<24|n[p>>>16&255]<<16|n[m>>>8&255]<<8|n[255&g])^t[v++],s=(n[p>>>24]<<24|n[m>>>16&255]<<16|n[g>>>8&255]<<8|n[255&f])^t[v++],a=(n[m>>>24]<<24|n[g>>>16&255]<<16|n[f>>>8&255]<<8|n[255&p])^t[v++],l=(n[g>>>24]<<24|n[f>>>16&255]<<16|n[p>>>8&255]<<8|n[255&m])^t[v++],[o>>>=0,s>>>=0,a>>>=0,l>>>=0]}var a=[0,1,2,4,8,16,32,64,128,27,54],l=function(){for(var e=new Array(256),t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var r=[],n=[],i=[[],[],[],[]],o=[[],[],[],[]],s=0,a=0,l=0;l<256;++l){var u=a^a<<1^a<<2^a<<3^a<<4;u=u>>>8^255&u^99,r[s]=u,n[u]=s;var c=e[s],h=e[c],d=e[h],f=257*e[u]^16843008*u;i[0][s]=f<<24|f>>>8,i[1][s]=f<<16|f>>>16,i[2][s]=f<<8|f>>>24,i[3][s]=f,f=16843009*d^65537*h^257*c^16843008*s,o[0][u]=f<<24|f>>>8,o[1][u]=f<<16|f>>>16,o[2][u]=f<<8|f>>>24,o[3][u]=f,0===s?s=a=1:(s=c^e[e[e[d^c]]],a^=e[e[a]])}return{SBOX:r,INV_SBOX:n,SUB_MIX:i,INV_SUB_MIX:o}}();function u(e){this._key=i(e),this._reset()}u.blockSize=16,u.keySize=32,u.prototype.blockSize=u.blockSize,u.prototype.keySize=u.keySize,u.prototype._reset=function(){for(var e=this._key,t=e.length,r=t+6,n=4*(r+1),i=[],o=0;o<t;o++)i[o]=e[o];for(o=t;o<n;o++){var s=i[o-1];o%t==0?(s=s<<8|s>>>24,s=l.SBOX[s>>>24]<<24|l.SBOX[s>>>16&255]<<16|l.SBOX[s>>>8&255]<<8|l.SBOX[255&s],s^=a[o/t|0]<<24):t>6&&o%t==4&&(s=l.SBOX[s>>>24]<<24|l.SBOX[s>>>16&255]<<16|l.SBOX[s>>>8&255]<<8|l.SBOX[255&s]),i[o]=i[o-t]^s}for(var u=[],c=0;c<n;c++){var h=n-c,d=i[h-(c%4?0:4)];u[c]=c<4||h<=4?d:l.INV_SUB_MIX[0][l.SBOX[d>>>24]]^l.INV_SUB_MIX[1][l.SBOX[d>>>16&255]]^l.INV_SUB_MIX[2][l.SBOX[d>>>8&255]]^l.INV_SUB_MIX[3][l.SBOX[255&d]]}this._nRounds=r,this._keySchedule=i,this._invKeySchedule=u},u.prototype.encryptBlockRaw=function(e){return s(e=i(e),this._keySchedule,l.SUB_MIX,l.SBOX,this._nRounds)},u.prototype.encryptBlock=function(e){var t=this.encryptBlockRaw(e),r=n.allocUnsafe(16);return r.writeUInt32BE(t[0],0),r.writeUInt32BE(t[1],4),r.writeUInt32BE(t[2],8),r.writeUInt32BE(t[3],12),r},u.prototype.decryptBlock=function(e){var t=(e=i(e))[1];e[1]=e[3],e[3]=t;var r=s(e,this._invKeySchedule,l.INV_SUB_MIX,l.INV_SBOX,this._nRounds),o=n.allocUnsafe(16);return o.writeUInt32BE(r[0],0),o.writeUInt32BE(r[3],4),o.writeUInt32BE(r[2],8),o.writeUInt32BE(r[1],12),o},u.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},t.exports.AES=u},{"safe-buffer":494}],187:[function(e,t,r){"use strict";var n=e("./aes"),i=e("safe-buffer").Buffer,o=e("cipher-base"),s=e("inherits"),a=e("./ghash"),l=e("buffer-xor"),u=e("./incr32");function c(e,t){var r=0;e.length!==t.length&&r++;for(var n=Math.min(e.length,t.length),i=0;i<n;++i)r+=e[i]^t[i];return r}function h(e,t,r){if(12===t.length)return e._finID=i.concat([t,i.from([0,0,0,1])]),i.concat([t,i.from([0,0,0,2])]);var n=new a(r),o=t.length,s=o%16;n.update(t),s&&(s=16-s,n.update(i.alloc(s,0))),n.update(i.alloc(8,0));var l=8*o,c=i.alloc(8);c.writeUIntBE(l,0,8),n.update(c),e._finID=n.state;var h=i.from(e._finID);return u(h),h}function d(e,t,r,s){o.call(this);var l=i.alloc(4,0);this._cipher=new n.AES(t);var u=this._cipher.encryptBlock(l);this._ghash=new a(u),r=h(this,r,u),this._prev=i.from(r),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=s,this._alen=0,this._len=0,this._mode=e,this._authTag=null,this._called=!1}s(d,o),d.prototype._update=function(e){if(!this._called&&this._alen){var t=16-this._alen%16;t<16&&(t=i.alloc(t,0),this._ghash.update(t))}this._called=!0;var r=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(r),this._len+=e.length,r},d.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=l(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&c(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=e,this._cipher.scrub()},d.prototype.getAuthTag=function(){if(this._decrypt||!i.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},d.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},d.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length},t.exports=d},{"./aes":186,"./ghash":191,"./incr32":192,"buffer-xor":217,"cipher-base":218,inherits:387,"safe-buffer":494}],188:[function(e,t,r){"use strict";var n=e("./encrypter"),i=e("./decrypter"),o=e("./modes/list.json");function s(){return Object.keys(o)}r.createCipher=r.Cipher=n.createCipher,r.createCipheriv=r.Cipheriv=n.createCipheriv,r.createDecipher=r.Decipher=i.createDecipher,r.createDecipheriv=r.Decipheriv=i.createDecipheriv,r.listCiphers=r.getCiphers=s},{"./decrypter":189,"./encrypter":190,"./modes/list.json":200}],189:[function(e,t,r){"use strict";var n=e("./authCipher"),i=e("safe-buffer").Buffer,o=e("./modes"),s=e("./streamCipher"),a=e("cipher-base"),l=e("./aes"),u=e("evp_bytestokey");function c(e,t,r){a.call(this),this._cache=new h,this._last=void 0,this._cipher=new l.AES(t),this._prev=i.from(r),this._mode=e,this._autopadding=!0}function h(){this.cache=i.allocUnsafe(0)}function d(e){var t=e[15];if(t<1||t>16)throw new Error("unable to decrypt data");for(var r=-1;++r<t;)if(e[r+(16-t)]!==t)throw new Error("unable to decrypt data");if(16!==t)return e.slice(0,16-t)}function f(e,t,r){var a=o[e.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"==typeof r&&(r=i.from(r)),"GCM"!==a.mode&&r.length!==a.iv)throw new TypeError("invalid iv length "+r.length);if("string"==typeof t&&(t=i.from(t)),t.length!==a.key/8)throw new TypeError("invalid key length "+t.length);return"stream"===a.type?new s(a.module,t,r,!0):"auth"===a.type?new n(a.module,t,r,!0):new c(a.module,t,r)}function p(e,t){var r=o[e.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=u(t,!1,r.key,r.iv);return f(e,n.key,n.iv)}e("inherits")(c,a),c.prototype._update=function(e){var t,r;this._cache.add(e);for(var n=[];t=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,t),n.push(r);return i.concat(n)},c.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return d(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},h.prototype.add=function(e){this.cache=i.concat([this.cache,e])},h.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},h.prototype.flush=function(){if(this.cache.length)return this.cache},r.createDecipher=p,r.createDecipheriv=f},{"./aes":186,"./authCipher":187,"./modes":199,"./streamCipher":202,"cipher-base":218,evp_bytestokey:368,inherits:387,"safe-buffer":494}],190:[function(e,t,r){"use strict";var n=e("./modes"),i=e("./authCipher"),o=e("safe-buffer").Buffer,s=e("./streamCipher"),a=e("cipher-base"),l=e("./aes"),u=e("evp_bytestokey");function c(e,t,r){a.call(this),this._cache=new d,this._cipher=new l.AES(t),this._prev=o.from(r),this._mode=e,this._autopadding=!0}e("inherits")(c,a),c.prototype._update=function(e){var t,r;this._cache.add(e);for(var n=[];t=this._cache.get();)r=this._mode.encrypt(this,t),n.push(r);return o.concat(n)};var h=o.alloc(16,16);function d(){this.cache=o.allocUnsafe(0)}function f(e,t,r){var a=n[e.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"==typeof t&&(t=o.from(t)),t.length!==a.key/8)throw new TypeError("invalid key length "+t.length);if("string"==typeof r&&(r=o.from(r)),"GCM"!==a.mode&&r.length!==a.iv)throw new TypeError("invalid iv length "+r.length);return"stream"===a.type?new s(a.module,t,r):"auth"===a.type?new i(a.module,t,r):new c(a.module,t,r)}function p(e,t){var r=n[e.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var i=u(t,!1,r.key,r.iv);return f(e,i.key,i.iv)}c.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(h))throw this._cipher.scrub(),new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},d.prototype.add=function(e){this.cache=o.concat([this.cache,e])},d.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},d.prototype.flush=function(){for(var e=16-this.cache.length,t=o.allocUnsafe(e),r=-1;++r<e;)t.writeUInt8(e,r);return o.concat([this.cache,t])},r.createCipheriv=f,r.createCipher=p},{"./aes":186,"./authCipher":187,"./modes":199,"./streamCipher":202,"cipher-base":218,evp_bytestokey:368,inherits:387,"safe-buffer":494}],191:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,i=n.alloc(16,0);function o(e){return[e.readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)]}function s(e){var t=n.allocUnsafe(16);return t.writeUInt32BE(e[0]>>>0,0),t.writeUInt32BE(e[1]>>>0,4),t.writeUInt32BE(e[2]>>>0,8),t.writeUInt32BE(e[3]>>>0,12),t}function a(e){this.h=e,this.state=n.alloc(16,0),this.cache=n.allocUnsafe(0)}a.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},a.prototype._multiply=function(){for(var e,t,r=o(this.h),n=[0,0,0,0],i=-1;++i<128;){for(0!=(this.state[~~(i/8)]&1<<7-i%8)&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),t=0!=(1&r[3]),e=3;e>0;e--)r[e]=r[e]>>>1|(1&r[e-1])<<31;r[0]=r[0]>>>1,t&&(r[0]=r[0]^225<<24)}this.state=s(n)},a.prototype.update=function(e){var t;for(this.cache=n.concat([this.cache,e]);this.cache.length>=16;)t=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(t)},a.prototype.final=function(e,t){return this.cache.length&&this.ghash(n.concat([this.cache,i],16)),this.ghash(s([0,e,0,t])),this.state},t.exports=a},{"safe-buffer":494}],192:[function(e,t,r){"use strict";function n(e){for(var t,r=e.length;r--;){if(255!==(t=e.readUInt8(r))){t++,e.writeUInt8(t,r);break}e.writeUInt8(0,r)}}t.exports=n},{}],193:[function(e,t,r){"use strict";var n=e("buffer-xor");r.encrypt=function(e,t){var r=n(t,e._prev);return e._prev=e._cipher.encryptBlock(r),e._prev},r.decrypt=function(e,t){var r=e._prev;e._prev=t;var i=e._cipher.decryptBlock(t);return n(i,r)}},{"buffer-xor":217}],194:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,i=e("buffer-xor");function o(e,t,r){var o=t.length,s=i(t,e._cache);return e._cache=e._cache.slice(o),e._prev=n.concat([e._prev,r?t:s]),s}r.encrypt=function(e,t,r){for(var i,s=n.allocUnsafe(0);t.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=n.allocUnsafe(0)),!(e._cache.length<=t.length)){s=n.concat([s,o(e,t,r)]);break}i=e._cache.length,s=n.concat([s,o(e,t.slice(0,i),r)]),t=t.slice(i)}return s}},{"buffer-xor":217,"safe-buffer":494}],195:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer;function i(e,t,r){for(var n,i,s=-1,a=8,l=0;++s<a;)n=t&1<<7-s?128:0,l+=(128&(i=e._cipher.encryptBlock(e._prev)[0]^n))>>s%8,e._prev=o(e._prev,r?n:i);return l}function o(e,t){var r=e.length,i=-1,o=n.allocUnsafe(e.length);for(e=n.concat([e,n.from([t])]);++i<r;)o[i]=e[i]<<1|e[i+1]>>7;return o}r.encrypt=function(e,t,r){for(var o=t.length,s=n.allocUnsafe(o),a=-1;++a<o;)s[a]=i(e,t[a],r);return s}},{"safe-buffer":494}],196:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer;function i(e,t,r){var i=e._cipher.encryptBlock(e._prev)[0]^t;return e._prev=n.concat([e._prev.slice(1),n.from([r?t:i])]),i}r.encrypt=function(e,t,r){for(var o=t.length,s=n.allocUnsafe(o),a=-1;++a<o;)s[a]=i(e,t[a],r);return s}},{"safe-buffer":494}],197:[function(e,t,r){"use strict";var n=e("buffer-xor"),i=e("safe-buffer").Buffer,o=e("../incr32");function s(e){var t=e._cipher.encryptBlockRaw(e._prev);return o(e._prev),t}var a=16;r.encrypt=function(e,t){var r=Math.ceil(t.length/a),o=e._cache.length;e._cache=i.concat([e._cache,i.allocUnsafe(r*a)]);for(var l=0;l<r;l++){var u=s(e),c=o+l*a;e._cache.writeUInt32BE(u[0],c+0),e._cache.writeUInt32BE(u[1],c+4),e._cache.writeUInt32BE(u[2],c+8),e._cache.writeUInt32BE(u[3],c+12)}var h=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),n(t,h)}},{"../incr32":192,"buffer-xor":217,"safe-buffer":494}],198:[function(e,t,r){"use strict";r.encrypt=function(e,t){return e._cipher.encryptBlock(t)},r.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},{}],199:[function(e,t,r){"use strict";var n={ECB:e("./ecb"),CBC:e("./cbc"),CFB:e("./cfb"),CFB8:e("./cfb8"),CFB1:e("./cfb1"),OFB:e("./ofb"),CTR:e("./ctr"),GCM:e("./ctr")},i=e("./list.json");for(var o in i)i[o].module=n[i[o].mode];t.exports=i},{"./cbc":193,"./cfb":194,"./cfb1":195,"./cfb8":196,"./ctr":197,"./ecb":198,"./list.json":200,"./ofb":201}],200:[function(e,t,r){t.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],201:[function(e,t,r){(function(t){"use strict";var n=e("buffer-xor");function i(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}r.encrypt=function(e,r){for(;e._cache.length<r.length;)e._cache=t.concat([e._cache,i(e)]);var o=e._cache.slice(0,r.length);return e._cache=e._cache.slice(r.length),n(r,o)}}).call(this,e("buffer").Buffer)},{buffer:216,"buffer-xor":217}],202:[function(e,t,r){"use strict";var n=e("./aes"),i=e("safe-buffer").Buffer,o=e("cipher-base");function s(e,t,r,s){o.call(this),this._cipher=new n.AES(t),this._prev=i.from(r),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=s,this._mode=e}e("inherits")(s,o),s.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},s.prototype._final=function(){this._cipher.scrub()},t.exports=s},{"./aes":186,"cipher-base":218,inherits:387,"safe-buffer":494}],203:[function(e,t,r){"use strict";var n=e("browserify-des"),i=e("browserify-aes/browser"),o=e("browserify-aes/modes"),s=e("browserify-des/modes"),a=e("evp_bytestokey");function l(e,t){var r,n;if(e=e.toLowerCase(),o[e])r=o[e].key,n=o[e].iv;else{if(!s[e])throw new TypeError("invalid suite type");r=8*s[e].key,n=s[e].iv}var i=a(t,!1,r,n);return c(e,i.key,i.iv)}function u(e,t){var r,n;if(e=e.toLowerCase(),o[e])r=o[e].key,n=o[e].iv;else{if(!s[e])throw new TypeError("invalid suite type");r=8*s[e].key,n=s[e].iv}var i=a(t,!1,r,n);return h(e,i.key,i.iv)}function c(e,t,r){if(e=e.toLowerCase(),o[e])return i.createCipheriv(e,t,r);if(s[e])return new n({key:t,iv:r,mode:e});throw new TypeError("invalid suite type")}function h(e,t,r){if(e=e.toLowerCase(),o[e])return i.createDecipheriv(e,t,r);if(s[e])return new n({key:t,iv:r,mode:e,decrypt:!0});throw new TypeError("invalid suite type")}function d(){return Object.keys(s).concat(i.getCiphers())}r.createCipher=r.Cipher=l,r.createCipheriv=r.Cipheriv=c,r.createDecipher=r.Decipher=u,r.createDecipheriv=r.Decipheriv=h,r.listCiphers=r.getCiphers=d},{"browserify-aes/browser":188,"browserify-aes/modes":199,"browserify-des":204,"browserify-des/modes":205,evp_bytestokey:368}],204:[function(e,t,r){"use strict";var n=e("cipher-base"),i=e("des.js"),o=e("inherits"),s=e("safe-buffer").Buffer,a={"des-ede3-cbc":i.CBC.instantiate(i.EDE),"des-ede3":i.EDE,"des-ede-cbc":i.CBC.instantiate(i.EDE),"des-ede":i.EDE,"des-cbc":i.CBC.instantiate(i.DES),"des-ecb":i.DES};function l(e){n.call(this);var t,r=e.mode.toLowerCase(),i=a[r];t=e.decrypt?"decrypt":"encrypt";var o=e.key;s.isBuffer(o)||(o=s.from(o)),"des-ede"!==r&&"des-ede-cbc"!==r||(o=s.concat([o,o.slice(0,8)]));var l=e.iv;s.isBuffer(l)||(l=s.from(l)),this._des=i.create({key:o,iv:l,type:t})}a.des=a["des-cbc"],a.des3=a["des-ede3-cbc"],t.exports=l,o(l,n),l.prototype._update=function(e){return s.from(this._des.update(e))},l.prototype._final=function(){return s.from(this._des.final())}},{"cipher-base":218,"des.js":339,inherits:387,"safe-buffer":494}],205:[function(e,t,r){"use strict";r["des-ecb"]={key:8,iv:0},r["des-cbc"]=r.des={key:8,iv:8},r["des-ede3-cbc"]=r.des3={key:24,iv:8},r["des-ede3"]={key:24,iv:0},r["des-ede-cbc"]={key:16,iv:8},r["des-ede"]={key:16,iv:0}},{}],206:[function(e,t,r){(function(r){"use strict";var n=e("bn.js"),i=e("randombytes");function o(e){var t=a(e);return{blinder:t.toRed(n.mont(e.modulus)).redPow(new n(e.publicExponent)).fromRed(),unblinder:t.invm(e.modulus)}}function s(e,t){var i=o(t),s=t.modulus.byteLength(),a=(n.mont(t.modulus),new n(e).mul(i.blinder).umod(t.modulus)),l=a.toRed(n.mont(t.prime1)),u=a.toRed(n.mont(t.prime2)),c=t.coefficient,h=t.prime1,d=t.prime2,f=l.redPow(t.exponent1),p=u.redPow(t.exponent2);f=f.fromRed(),p=p.fromRed();var m=f.isub(p).imul(c).umod(h);return m.imul(d),p.iadd(m),new r(p.imul(i.unblinder).umod(t.modulus).toArray(!1,s))}function a(e){for(var t=e.modulus.byteLength(),r=new n(i(t));r.cmp(e.modulus)>=0||!r.umod(e.prime1)||!r.umod(e.prime2);)r=new n(i(t));return r}t.exports=s,s.getr=a}).call(this,e("buffer").Buffer)},{"bn.js":207,buffer:216,randombytes:475}],207:[function(e,t,r){arguments[4][181][0].apply(r,arguments)},{buffer:185,dup:181}],208:[function(e,t,r){"use strict";t.exports=e("./browser/algorithms.json")},{"./browser/algorithms.json":209}],209:[function(e,t,r){t.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],210:[function(e,t,r){t.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],211:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,i=e("create-hash"),o=e("readable-stream"),s=e("inherits"),a=e("./sign"),l=e("./verify"),u=e("./algorithms.json");function c(e){o.Writable.call(this);var t=u[e];if(!t)throw new Error("Unknown message digest");this._hashType=t.hash,this._hash=i(t.hash),this._tag=t.id,this._signType=t.sign}function h(e){o.Writable.call(this);var t=u[e];if(!t)throw new Error("Unknown message digest");this._hash=i(t.hash),this._tag=t.id,this._signType=t.sign}function d(e){return new c(e)}function f(e){return new h(e)}Object.keys(u).forEach((function(e){u[e].id=n.from(u[e].id,"hex"),u[e.toLowerCase()]=u[e]})),s(c,o.Writable),c.prototype._write=function(e,t,r){this._hash.update(e),r()},c.prototype.update=function(e,t){return"string"==typeof e&&(e=n.from(e,t)),this._hash.update(e),this},c.prototype.sign=function(e,t){this.end();var r=this._hash.digest(),n=a(r,e,this._hashType,this._signType,this._tag);return t?n.toString(t):n},s(h,o.Writable),h.prototype._write=function(e,t,r){this._hash.update(e),r()},h.prototype.update=function(e,t){return"string"==typeof e&&(e=n.from(e,t)),this._hash.update(e),this},h.prototype.verify=function(e,t,r){"string"==typeof t&&(t=n.from(t,r)),this.end();var i=this._hash.digest();return l(t,i,e,this._signType,this._tag)},t.exports={Sign:d,Verify:f,createSign:d,createVerify:f}},{"./algorithms.json":209,"./sign":212,"./verify":213,"create-hash":331,inherits:387,"readable-stream":491,"safe-buffer":214}],212:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,i=e("create-hmac"),o=e("browserify-rsa"),s=e("elliptic").ec,a=e("bn.js"),l=e("parse-asn1"),u=e("./curves.json");function c(e,t,r,i,s){var a=l(t);if(a.curve){if("ecdsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong private key type");return h(e,a)}if("dsa"===a.type){if("dsa"!==i)throw new Error("wrong private key type");return d(e,a,r)}if("rsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong private key type");e=n.concat([s,e]);for(var u=a.modulus.byteLength(),c=[0,1];e.length+c.length+1<u;)c.push(255);c.push(0);for(var f=-1;++f<e.length;)c.push(e[f]);return o(c,a)}function h(e,t){var r=u[t.curve.join(".")];if(!r)throw new Error("unknown curve "+t.curve.join("."));var i=new s(r).keyFromPrivate(t.privateKey).sign(e);return n.from(i.toDER())}function d(e,t,r){for(var n,i=t.params.priv_key,o=t.params.p,s=t.params.q,l=t.params.g,u=new a(0),c=m(e,s).mod(s),h=!1,d=p(i,s,e,r);!1===h;)u=y(l,n=v(s,d,r),o,s),0===(h=n.invm(s).imul(c.add(i.mul(u))).mod(s)).cmpn(0)&&(h=!1,u=new a(0));return f(u,h)}function f(e,t){e=e.toArray(),t=t.toArray(),128&e[0]&&(e=[0].concat(e)),128&t[0]&&(t=[0].concat(t));var r=[48,e.length+t.length+4,2,e.length];return r=r.concat(e,[2,t.length],t),n.from(r)}function p(e,t,r,o){if((e=n.from(e.toArray())).length<t.byteLength()){var s=n.alloc(t.byteLength()-e.length);e=n.concat([s,e])}var a=r.length,l=g(r,t),u=n.alloc(a);u.fill(1);var c=n.alloc(a);return c=i(o,c).update(u).update(n.from([0])).update(e).update(l).digest(),u=i(o,c).update(u).digest(),{k:c=i(o,c).update(u).update(n.from([1])).update(e).update(l).digest(),v:u=i(o,c).update(u).digest()}}function m(e,t){var r=new a(e),n=(e.length<<3)-t.bitLength();return n>0&&r.ishrn(n),r}function g(e,t){e=(e=m(e,t)).mod(t);var r=n.from(e.toArray());if(r.length<t.byteLength()){var i=n.alloc(t.byteLength()-r.length);r=n.concat([i,r])}return r}function v(e,t,r){var o,s;do{for(o=n.alloc(0);8*o.length<e.bitLength();)t.v=i(r,t.k).update(t.v).digest(),o=n.concat([o,t.v]);s=m(o,e),t.k=i(r,t.k).update(t.v).update(n.from([0])).digest(),t.v=i(r,t.k).update(t.v).digest()}while(-1!==s.cmp(e));return s}function y(e,t,r,n){return e.toRed(a.mont(r)).redPow(t).fromRed().mod(n)}t.exports=c,t.exports.getKey=p,t.exports.makeKey=v},{"./curves.json":210,"bn.js":183,"browserify-rsa":206,"create-hmac":333,elliptic:350,"parse-asn1":459,"safe-buffer":214}],213:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,i=e("bn.js"),o=e("elliptic").ec,s=e("parse-asn1"),a=e("./curves.json");function l(e,t,r,o,a){var l=s(r);if("ec"===l.type){if("ecdsa"!==o&&"ecdsa/rsa"!==o)throw new Error("wrong public key type");return u(e,t,l)}if("dsa"===l.type){if("dsa"!==o)throw new Error("wrong public key type");return c(e,t,l)}if("rsa"!==o&&"ecdsa/rsa"!==o)throw new Error("wrong public key type");t=n.concat([a,t]);for(var h=l.modulus.byteLength(),d=[1],f=0;t.length+d.length+2<h;)d.push(255),f++;d.push(0);for(var p=-1;++p<t.length;)d.push(t[p]);d=n.from(d);var m=i.mont(l.modulus);e=(e=new i(e).toRed(m)).redPow(new i(l.publicExponent)),e=n.from(e.fromRed().toArray());var g=f<8?1:0;for(h=Math.min(e.length,d.length),e.length!==d.length&&(g=1),p=-1;++p<h;)g|=e[p]^d[p];return 0===g}function u(e,t,r){var n=a[r.data.algorithm.curve.join(".")];if(!n)throw new Error("unknown curve "+r.data.algorithm.curve.join("."));var i=new o(n),s=r.data.subjectPrivateKey.data;return i.verify(t,e,s)}function c(e,t,r){var n=r.data.p,o=r.data.q,a=r.data.g,l=r.data.pub_key,u=s.signature.decode(e,"der"),c=u.s,d=u.r;h(c,o),h(d,o);var f=i.mont(n),p=c.invm(o);return 0===a.toRed(f).redPow(new i(t).mul(p).mod(o)).fromRed().mul(l.toRed(f).redPow(d.mul(p).mod(o)).fromRed()).mod(n).mod(o).cmp(d)}function h(e,t){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(t)>=t)throw new Error("invalid sig")}t.exports=l},{"./curves.json":210,"bn.js":183,elliptic:350,"parse-asn1":459,"safe-buffer":214}],214:[function(e,t,r){"use strict";var n=e("buffer"),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,r),r.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},{buffer:216}],215:[function(e,t,r){arguments[4][185][0].apply(r,arguments)},{dup:185}],216:[function(e,t,r){(function(t){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var i=e("base64-js"),o=e("ieee754");r.Buffer=t,r.SlowBuffer=y,r.INSPECT_MAX_BYTES=50;var s=2147483647;function a(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}function l(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');var r=new Uint8Array(e);return r.__proto__=t.prototype,r}function t(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return u(e,t,r)}function u(e,r,i){if("string"==typeof e)return f(e,r);if(ArrayBuffer.isView(e))return p(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+n(e));if(Y(e,ArrayBuffer)||e&&Y(e.buffer,ArrayBuffer))return m(e,r,i);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return t.from(o,r,i);var s=g(e);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return t.from(e[Symbol.toPrimitive]("string"),r,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+n(e))}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e,t,r){return c(e),e<=0?l(e):void 0!==t?"string"==typeof r?l(e).fill(t,r):l(e).fill(t):l(e)}function d(e){return c(e),l(e<0?0:0|v(e))}function f(e,r){if("string"==typeof r&&""!==r||(r="utf8"),!t.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var n=0|b(e,r),i=l(n),o=i.write(e,r);return o!==n&&(i=i.slice(0,o)),i}function p(e){for(var t=e.length<0?0:0|v(e.length),r=l(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function m(e,r,n){if(r<0||e.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<r+(n||0))throw new RangeError('"length" is outside of buffer bounds');var i;return(i=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n)).__proto__=t.prototype,i}function g(e){if(t.isBuffer(e)){var r=0|v(e.length),n=l(r);return 0===n.length||e.copy(n,0,0,r),n}return void 0!==e.length?"number"!=typeof e.length||Z(e.length)?l(0):p(e):"Buffer"===e.type&&Array.isArray(e.data)?p(e.data):void 0}function v(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function y(e){return+e!=e&&(e=0),t.alloc(+e)}function b(e,r){if(t.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Y(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+n(e));var i=e.length,o=arguments.length>2&&!0===arguments[2];if(!o&&0===i)return 0;for(var s=!1;;)switch(r){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return J(e).length;default:if(s)return o?-1:G(e).length;r=(""+r).toLowerCase(),s=!0}}function w(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return j(this,t,r);case"latin1":case"binary":return D(this,t,r);case"base64":return P(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function C(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function _(e,r,n,i,o){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Z(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof r&&(r=t.from(r,i)),t.isBuffer(r))return 0===r.length?-1:S(e,r,n,i,o);if("number"==typeof r)return r&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,r,n):Uint8Array.prototype.lastIndexOf.call(e,r,n):S(e,[r],n,i,o);throw new TypeError("val must be string, number or Buffer")}function S(e,t,r,n,i){var o,s=1,a=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var c=-1;for(o=r;o<a;o++)if(u(e,o)===u(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(r+l>a&&(r=a-l),o=r;o>=0;o--){for(var h=!0,d=0;d<l;d++)if(u(e,o+d)!==u(t,d)){h=!1;break}if(h)return o}return-1}function x(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(Z(a))return s;e[r+s]=a}return s}function k(e,t,r,n){return X(G(t,e.length-r),e,r,n)}function T(e,t,r,n){return X(W(t),e,r,n)}function R(e,t,r,n){return T(e,t,r,n)}function E(e,t,r,n){return X(J(t),e,r,n)}function M(e,t,r,n){return X(K(t,e.length-r),e,r,n)}function P(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function O(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,s,a,l,u=e[i],c=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=r)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(o=e[i+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(l=(15&u)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(c=l)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return A(n)}r.kMaxLength=s,t.TYPED_ARRAY_SUPPORT=a(),!t.TYPED_ARRAY_SUPPORT&&"undefined"!=typeof console&&console.error,Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(e,t,r){return u(e,t,r)},t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,t.alloc=function(e,t,r){return h(e,t,r)},t.allocUnsafe=function(e){return d(e)},t.allocUnsafeSlow=function(e){return d(e)},t.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==t.prototype},t.compare=function(e,r){if(Y(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),Y(r,Uint8Array)&&(r=t.from(r,r.offset,r.byteLength)),!t.isBuffer(e)||!t.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;for(var n=e.length,i=r.length,o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==r[o]){n=e[o],i=r[o];break}return n<i?-1:i<n?1:0},t.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var n;if(void 0===r)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var i=t.allocUnsafe(r),o=0;for(n=0;n<e.length;++n){var s=e[n];if(Y(s,Uint8Array)&&(s=t.from(s)),!t.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,o),o+=s.length}return i},t.byteLength=b,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)C(this,t,t+1);return this},t.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)C(this,t,t+3),C(this,t+1,t+2);return this},t.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)C(this,t,t+7),C(this,t+1,t+6),C(this,t+2,t+5),C(this,t+3,t+4);return this},t.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?O(this,0,e):w.apply(this,arguments)},t.prototype.toLocaleString=t.prototype.toString,t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},t.prototype.compare=function(e,r,i,o,s){if(Y(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),!t.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+n(e));if(void 0===r&&(r=0),void 0===i&&(i=e?e.length:0),void 0===o&&(o=0),void 0===s&&(s=this.length),r<0||i>e.length||o<0||s>this.length)throw new RangeError("out of range index");if(o>=s&&r>=i)return 0;if(o>=s)return-1;if(r>=i)return 1;if(this===e)return 0;for(var a=(s>>>=0)-(o>>>=0),l=(i>>>=0)-(r>>>=0),u=Math.min(a,l),c=this.slice(o,s),h=e.slice(r,i),d=0;d<u;++d)if(c[d]!==h[d]){a=c[d],l=h[d];break}return a<l?-1:l<a?1:0},t.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},t.prototype.indexOf=function(e,t,r){return _(this,e,t,r,!0)},t.prototype.lastIndexOf=function(e,t,r){return _(this,e,t,r,!1)},t.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return x(this,e,t,r);case"utf8":case"utf-8":return k(this,e,t,r);case"ascii":return T(this,e,t,r);case"latin1":case"binary":return R(this,e,t,r);case"base64":return E(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function A(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=I));return r}function j(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function D(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function N(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=q(e[o]);return i}function F(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function $(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function L(e,r,n,i,o,s){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>o||r<s)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function B(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function V(e,t,r,n,i){return t=+t,r>>>=0,i||B(e,t,r,4,34028234663852886e22,-34028234663852886e22),o.write(e,t,r,n,23,4),r+4}function H(e,t,r,n,i){return t=+t,r>>>=0,i||B(e,t,r,8,17976931348623157e292,-17976931348623157e292),o.write(e,t,r,n,52,8),r+8}t.prototype.slice=function(e,r){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<e&&(r=e);var i=this.subarray(e,r);return i.__proto__=t.prototype,i},t.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||$(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},t.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||$(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},t.prototype.readUInt8=function(e,t){return e>>>=0,t||$(e,1,this.length),this[e]},t.prototype.readUInt16LE=function(e,t){return e>>>=0,t||$(e,2,this.length),this[e]|this[e+1]<<8},t.prototype.readUInt16BE=function(e,t){return e>>>=0,t||$(e,2,this.length),this[e]<<8|this[e+1]},t.prototype.readUInt32LE=function(e,t){return e>>>=0,t||$(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},t.prototype.readUInt32BE=function(e,t){return e>>>=0,t||$(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},t.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||$(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},t.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||$(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},t.prototype.readInt8=function(e,t){return e>>>=0,t||$(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},t.prototype.readInt16LE=function(e,t){e>>>=0,t||$(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt16BE=function(e,t){e>>>=0,t||$(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt32LE=function(e,t){return e>>>=0,t||$(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},t.prototype.readInt32BE=function(e,t){return e>>>=0,t||$(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},t.prototype.readFloatLE=function(e,t){return e>>>=0,t||$(e,4,this.length),o.read(this,e,!0,23,4)},t.prototype.readFloatBE=function(e,t){return e>>>=0,t||$(e,4,this.length),o.read(this,e,!1,23,4)},t.prototype.readDoubleLE=function(e,t){return e>>>=0,t||$(e,8,this.length),o.read(this,e,!0,52,8)},t.prototype.readDoubleBE=function(e,t){return e>>>=0,t||$(e,8,this.length),o.read(this,e,!1,52,8)},t.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||L(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},t.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||L(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},t.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,1,255,0),this[t]=255&e,t+1},t.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},t.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);L(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},t.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);L(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},t.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},t.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},t.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeFloatLE=function(e,t,r){return V(this,e,t,!0,r)},t.prototype.writeFloatBE=function(e,t,r){return V(this,e,t,!1,r)},t.prototype.writeDoubleLE=function(e,t,r){return H(this,e,t,!0,r)},t.prototype.writeDoubleBE=function(e,t,r){return H(this,e,t,!1,r)},t.prototype.copy=function(e,r,n,i){if(!t.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var o=i-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(r,n,i);else if(this===e&&n<r&&r<i)for(var s=o-1;s>=0;--s)e[s+r]=this[s+n];else Uint8Array.prototype.set.call(e,this.subarray(n,i),r);return o},t.prototype.fill=function(e,r,n,i){if("string"==typeof e){if("string"==typeof r?(i=r,r=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!t.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){var o=e.charCodeAt(0);("utf8"===i&&o<128||"latin1"===i)&&(e=o)}}else"number"==typeof e&&(e&=255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;var s;if(r>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(s=r;s<n;++s)this[s]=e;else{var a=t.isBuffer(e)?e:t.from(e,i),l=a.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<n-r;++s)this[s+r]=a[s%l]}return this};var z=/[^+/0-9A-Za-z-_]/g;function U(e){if((e=(e=e.split("=")[0]).trim().replace(z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function q(e){return e<16?"0"+e.toString(16):e.toString(16)}function G(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function W(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function K(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}function J(e){return i.toByteArray(U(e))}function X(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Y(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Z(e){return e!=e}}).call(this,e("buffer").Buffer)},{"base64-js":182,buffer:216,ieee754:385}],217:[function(e,t,r){(function(e){"use strict";t.exports=function(t,r){for(var n=Math.min(t.length,r.length),i=new e(n),o=0;o<n;++o)i[o]=t[o]^r[o];return i}}).call(this,e("buffer").Buffer)},{buffer:216}],218:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,i=e("stream").Transform,o=e("string_decoder").StringDecoder;function s(e){i.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}e("inherits")(s,i),s.prototype.update=function(e,t,r){"string"==typeof e&&(e=n.from(e,t));var i=this._update(e);return this.hashMode?this:(r&&(i=this._toString(i,r)),i)},s.prototype.setAutoPadding=function(){},s.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},s.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},s.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},s.prototype._transform=function(e,t,r){var n;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){n=e}finally{r(n)}},s.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},s.prototype._finalOrDigest=function(e){var t=this.__final()||n.alloc(0);return e&&(t=this._toString(t,e,!0)),t},s.prototype._toString=function(e,t,r){if(this._decoder||(this._decoder=new o(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var n=this._decoder.write(e);return r&&(n+=this._decoder.end()),n},t.exports=s},{inherits:387,"safe-buffer":494,stream:506,string_decoder:520}],219:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},{}],220:[function(e,t,r){var n=e("../internals/is-object");t.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},{"../internals/is-object":263}],221:[function(e,t,r){var n=e("../internals/well-known-symbol"),i=e("../internals/object-create"),o=e("../internals/object-define-property"),s=n("unscopables"),a=Array.prototype;null==a[s]&&o.f(a,s,{configurable:!0,value:i(null)}),t.exports=function(e){a[s][e]=!0}},{"../internals/object-create":276,"../internals/object-define-property":278,"../internals/well-known-symbol":314}],222:[function(e,t,r){t.exports=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e}},{}],223:[function(e,t,r){var n=e("../internals/is-object");t.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},{"../internals/is-object":263}],224:[function(e,t,r){var n=e("../internals/to-indexed-object"),i=e("../internals/to-length"),o=e("../internals/to-absolute-index"),s=function(e){return function(t,r,s){var a,l=n(t),u=i(l.length),c=o(s,u);if(e&&r!=r){for(;u>c;)if((a=l[c++])!=a)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===r)return e||c||0;return!e&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},{"../internals/to-absolute-index":304,"../internals/to-indexed-object":305,"../internals/to-length":307}],225:[function(e,t,r){var n=e("../internals/function-bind-context"),i=e("../internals/indexed-object"),o=e("../internals/to-object"),s=e("../internals/to-length"),a=e("../internals/array-species-create"),l=[].push,u=function(e){var t=1==e,r=2==e,u=3==e,c=4==e,h=6==e,d=5==e||h;return function(f,p,m,g){for(var v,y,b=o(f),w=i(b),C=n(p,m,3),_=s(w.length),S=0,x=g||a,k=t?x(f,_):r?x(f,0):void 0;_>S;S++)if((d||S in w)&&(y=C(v=w[S],S,b),e))if(t)k[S]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return S;case 2:l.call(k,v)}else if(c)return!1;return h?-1:u||c?c:k}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},{"../internals/array-species-create":227,"../internals/function-bind-context":248,"../internals/indexed-object":257,"../internals/to-length":307,"../internals/to-object":308}],226:[function(e,t,r){var n=e("../internals/descriptors"),i=e("../internals/fails"),o=e("../internals/has"),s=Object.defineProperty,a={},l=function(e){throw e};t.exports=function(e,t){if(o(a,e))return a[e];t||(t={});var r=[][e],u=!!o(t,"ACCESSORS")&&t.ACCESSORS,c=o(t,0)?t[0]:l,h=o(t,1)?t[1]:void 0;return a[e]=!!r&&!i((function(){if(u&&!n)return!0;var e={length:-1};u?s(e,1,{enumerable:!0,get:l}):e[1]=1,r.call(e,c,h)}))}},{"../internals/descriptors":240,"../internals/fails":247,"../internals/has":252}],227:[function(e,t,r){var n=e("../internals/is-object"),i=e("../internals/is-array"),o=e("../internals/well-known-symbol")("species");t.exports=function(e,t){var r;return i(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!i(r.prototype)?n(r)&&null===(r=r[o])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},{"../internals/is-array":261,"../internals/is-object":263,"../internals/well-known-symbol":314}],228:[function(e,t,r){var n=e("../internals/an-object");t.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&n(o.call(e)),t}}},{"../internals/an-object":223}],229:[function(e,t,r){var n=e("../internals/well-known-symbol")("iterator"),i=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){i=!0}};s[n]=function(){return this},Array.from(s,(function(){throw 2}))}catch(e){}t.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o={};o[n]=function(){return{next:function(){return{done:r=!0}}}},e(o)}catch(e){}return r}},{"../internals/well-known-symbol":314}],230:[function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],231:[function(e,t,r){var n=e("../internals/to-string-tag-support"),i=e("../internals/classof-raw"),o=e("../internals/well-known-symbol")("toStringTag"),s="Arguments"==i(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};t.exports=n?i:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=a(t=Object(e),o))?r:s?i(t):"Object"==(n=i(t))&&"function"==typeof t.callee?"Arguments":n}},{"../internals/classof-raw":230,"../internals/to-string-tag-support":310,"../internals/well-known-symbol":314}],232:[function(e,t,r){var n=e("../internals/has"),i=e("../internals/own-keys"),o=e("../internals/object-get-own-property-descriptor"),s=e("../internals/object-define-property");t.exports=function(e,t){for(var r=i(t),a=s.f,l=o.f,u=0;u<r.length;u++){var c=r[u];n(e,c)||a(e,c,l(t,c))}}},{"../internals/has":252,"../internals/object-define-property":278,"../internals/object-get-own-property-descriptor":279,"../internals/own-keys":289}],233:[function(e,t,r){var n=e("../internals/well-known-symbol")("match");t.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,"/./"[e](t)}catch(e){}}return!1}},{"../internals/well-known-symbol":314}],234:[function(e,t,r){var n=e("../internals/fails");t.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},{"../internals/fails":247}],235:[function(e,t,r){"use strict";var n=e("../internals/iterators-core").IteratorPrototype,i=e("../internals/object-create"),o=e("../internals/create-property-descriptor"),s=e("../internals/set-to-string-tag"),a=e("../internals/iterators"),l=function(){return this};t.exports=function(e,t,r){var u=t+" Iterator";return e.prototype=i(n,{next:o(1,r)}),s(e,u,!1,!0),a[u]=l,e}},{"../internals/create-property-descriptor":237,"../internals/iterators":268,"../internals/iterators-core":267,"../internals/object-create":276,"../internals/set-to-string-tag":298}],236:[function(e,t,r){var n=e("../internals/descriptors"),i=e("../internals/object-define-property"),o=e("../internals/create-property-descriptor");t.exports=n?function(e,t,r){return i.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},{"../internals/create-property-descriptor":237,"../internals/descriptors":240,"../internals/object-define-property":278}],237:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],238:[function(e,t,r){"use strict";var n=e("../internals/export"),i=e("../internals/create-iterator-constructor"),o=e("../internals/object-get-prototype-of"),s=e("../internals/object-set-prototype-of"),a=e("../internals/set-to-string-tag"),l=e("../internals/create-non-enumerable-property"),u=e("../internals/redefine"),c=e("../internals/well-known-symbol"),h=e("../internals/is-pure"),d=e("../internals/iterators"),f=e("../internals/iterators-core"),p=f.IteratorPrototype,m=f.BUGGY_SAFARI_ITERATORS,g=c("iterator"),v="keys",y="values",b="entries",w=function(){return this};t.exports=function(e,t,r,c,f,C,_){i(r,t,c);var S,x,k,T=function(e){if(e===f&&O)return O;if(!m&&e in M)return M[e];switch(e){case v:case y:case b:return function(){return new r(this,e)}}return function(){return new r(this)}},R=t+" Iterator",E=!1,M=e.prototype,P=M[g]||M["@@iterator"]||f&&M[f],O=!m&&P||T(f),I="Array"==t&&M.entries||P;if(I&&(S=o(I.call(new e)),p!==Object.prototype&&S.next&&(h||o(S)===p||(s?s(S,p):"function"!=typeof S[g]&&l(S,g,w)),a(S,R,!0,!0),h&&(d[R]=w))),f==y&&P&&P.name!==y&&(E=!0,O=function(){return P.call(this)}),h&&!_||M[g]===O||l(M,g,O),d[t]=O,f)if(x={values:T(y),keys:C?O:T(v),entries:T(b)},_)for(k in x)(m||E||!(k in M))&&u(M,k,x[k]);else n({target:t,proto:!0,forced:m||E},x);return x}},{"../internals/create-iterator-constructor":235,"../internals/create-non-enumerable-property":236,"../internals/export":246,"../internals/is-pure":264,"../internals/iterators":268,"../internals/iterators-core":267,"../internals/object-get-prototype-of":283,"../internals/object-set-prototype-of":287,"../internals/redefine":294,"../internals/set-to-string-tag":298,"../internals/well-known-symbol":314}],239:[function(e,t,r){var n=e("../internals/path"),i=e("../internals/has"),o=e("../internals/well-known-symbol-wrapped"),s=e("../internals/object-define-property").f;t.exports=function(e){var t=n.Symbol||(n.Symbol={});i(t,e)||s(t,e,{value:o.f(e)})}},{"../internals/has":252,"../internals/object-define-property":278,"../internals/path":290,"../internals/well-known-symbol-wrapped":313}],240:[function(e,t,r){var n=e("../internals/fails");t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},{"../internals/fails":247}],241:[function(e,t,r){var n=e("../internals/global"),i=e("../internals/is-object"),o=n.document,s=i(o)&&i(o.createElement);t.exports=function(e){return s?o.createElement(e):{}}},{"../internals/global":251,"../internals/is-object":263}],242:[function(e,t,r){var n=e("../internals/engine-user-agent");t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(n)},{"../internals/engine-user-agent":243}],243:[function(e,t,r){var n=e("../internals/get-built-in");t.exports=n("navigator","userAgent")||""},{"../internals/get-built-in":249}],244:[function(e,t,r){var n,i,o=e("../internals/global"),s=e("../internals/engine-user-agent"),a=o.process,l=a&&a.versions,u=l&&l.v8;u?i=(n=u.split("."))[0]+n[1]:s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(i=n[1]),t.exports=i&&+i},{"../internals/engine-user-agent":243,"../internals/global":251}],245:[function(e,t,r){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],246:[function(e,t,r){var n=e("../internals/global"),i=e("../internals/object-get-own-property-descriptor").f,o=e("../internals/create-non-enumerable-property"),s=e("../internals/redefine"),a=e("../internals/set-global"),l=e("../internals/copy-constructor-properties"),u=e("../internals/is-forced");t.exports=function(e,t){var r,c,h,d,f,p=e.target,m=e.global,g=e.stat;if(r=m?n:g?n[p]||a(p,{}):(n[p]||{}).prototype)for(c in t){if(d=t[c],h=e.noTargetGet?(f=i(r,c))&&f.value:r[c],!u(m?c:p+(g?".":"#")+c,e.forced)&&void 0!==h){if(typeof d==typeof h)continue;l(d,h)}(e.sham||h&&h.sham)&&o(d,"sham",!0),s(r,c,d,e)}}},{"../internals/copy-constructor-properties":232,"../internals/create-non-enumerable-property":236,"../internals/global":251,"../internals/is-forced":262,"../internals/object-get-own-property-descriptor":279,"../internals/redefine":294,"../internals/set-global":296}],247:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],248:[function(e,t,r){var n=e("../internals/a-function");t.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},{"../internals/a-function":219}],249:[function(e,t,r){var n=e("../internals/path"),i=e("../internals/global"),o=function(e){return"function"==typeof e?e:void 0};t.exports=function(e,t){return arguments.length<2?o(n[e])||o(i[e]):n[e]&&n[e][t]||i[e]&&i[e][t]}},{"../internals/global":251,"../internals/path":290}],250:[function(e,t,r){var n=e("../internals/classof"),i=e("../internals/iterators"),o=e("../internals/well-known-symbol")("iterator");t.exports=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[n(e)]}},{"../internals/classof":231,"../internals/iterators":268,"../internals/well-known-symbol":314}],251:[function(e,t,n){(function(e){var r=function(e){return e&&e.Math==Math&&e};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||Function("return this")()}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],252:[function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],253:[function(e,t,r){t.exports={}},{}],254:[function(e,t,r){var n=e("../internals/global");t.exports=function(e,t){var r=n.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t))}},{"../internals/global":251}],255:[function(e,t,r){var n=e("../internals/get-built-in");t.exports=n("document","documentElement")},{"../internals/get-built-in":249}],256:[function(e,t,r){var n=e("../internals/descriptors"),i=e("../internals/fails"),o=e("../internals/document-create-element");t.exports=!n&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},{"../internals/descriptors":240,"../internals/document-create-element":241,"../internals/fails":247}],257:[function(e,t,r){var n=e("../internals/fails"),i=e("../internals/classof-raw"),o="".split;t.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},{"../internals/classof-raw":230,"../internals/fails":247}],258:[function(e,t,r){var n=e("../internals/shared-store"),i=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return i.call(e)}),t.exports=n.inspectSource},{"../internals/shared-store":300}],259:[function(e,t,r){var n,i,o,s=e("../internals/native-weak-map"),a=e("../internals/global"),l=e("../internals/is-object"),u=e("../internals/create-non-enumerable-property"),c=e("../internals/has"),h=e("../internals/shared-key"),d=e("../internals/hidden-keys"),f=a.WeakMap,p=function(e){return o(e)?i(e):n(e,{})},m=function(e){return function(t){var r;if(!l(t)||(r=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}};if(s){var g=new f,v=g.get,y=g.has,b=g.set;n=function(e,t){return b.call(g,e,t),t},i=function(e){return v.call(g,e)||{}},o=function(e){return y.call(g,e)}}else{var w=h("state");d[w]=!0,n=function(e,t){return u(e,w,t),t},i=function(e){return c(e,w)?e[w]:{}},o=function(e){return c(e,w)}}t.exports={set:n,get:i,has:o,enforce:p,getterFor:m}},{"../internals/create-non-enumerable-property":236,"../internals/global":251,"../internals/has":252,"../internals/hidden-keys":253,"../internals/is-object":263,"../internals/native-weak-map":272,"../internals/shared-key":299}],260:[function(e,t,r){var n=e("../internals/well-known-symbol"),i=e("../internals/iterators"),o=n("iterator"),s=Array.prototype;t.exports=function(e){return void 0!==e&&(i.Array===e||s[o]===e)}},{"../internals/iterators":268,"../internals/well-known-symbol":314}],261:[function(e,t,r){var n=e("../internals/classof-raw");t.exports=Array.isArray||function(e){return"Array"==n(e)}},{"../internals/classof-raw":230}],262:[function(e,t,r){var n=e("../internals/fails"),i=/#|\.prototype\./,o=function(e,t){var r=a[s(e)];return r==u||r!=l&&("function"==typeof t?n(t):!!t)},s=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},a=o.data={},l=o.NATIVE="N",u=o.POLYFILL="P";t.exports=o},{"../internals/fails":247}],263:[function(e,t,r){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],264:[function(e,t,r){t.exports=!1},{}],265:[function(e,t,r){var n=e("../internals/is-object"),i=e("../internals/classof-raw"),o=e("../internals/well-known-symbol")("match");t.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},{"../internals/classof-raw":230,"../internals/is-object":263,"../internals/well-known-symbol":314}],266:[function(e,t,r){var n=e("../internals/an-object"),i=e("../internals/is-array-iterator-method"),o=e("../internals/to-length"),s=e("../internals/function-bind-context"),a=e("../internals/get-iterator-method"),l=e("../internals/call-with-safe-iteration-closing"),u=function(e,t){this.stopped=e,this.result=t};(t.exports=function(e,t,r,c,h){var d,f,p,m,g,v,y,b=s(t,r,c?2:1);if(h)d=e;else{if("function"!=typeof(f=a(e)))throw TypeError("Target is not iterable");if(i(f)){for(p=0,m=o(e.length);m>p;p++)if((g=c?b(n(y=e[p])[0],y[1]):b(e[p]))&&g instanceof u)return g;return new u(!1)}d=f.call(e)}for(v=d.next;!(y=v.call(d)).done;)if("object"==typeof(g=l(d,b,y.value,c))&&g&&g instanceof u)return g;return new u(!1)}).stop=function(e){return new u(!0,e)}},{"../internals/an-object":223,"../internals/call-with-safe-iteration-closing":228,"../internals/function-bind-context":248,"../internals/get-iterator-method":250,"../internals/is-array-iterator-method":260,"../internals/to-length":307}],267:[function(e,t,r){"use strict";var n,i,o,s=e("../internals/object-get-prototype-of"),a=e("../internals/create-non-enumerable-property"),l=e("../internals/has"),u=e("../internals/well-known-symbol"),c=e("../internals/is-pure"),h=u("iterator"),d=!1,f=function(){return this};[].keys&&("next"in(o=[].keys())?(i=s(s(o)))!==Object.prototype&&(n=i):d=!0),null==n&&(n={}),c||l(n,h)||a(n,h,f),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:d}},{"../internals/create-non-enumerable-property":236,"../internals/has":252,"../internals/is-pure":264,"../internals/object-get-prototype-of":283,"../internals/well-known-symbol":314}],268:[function(e,t,r){arguments[4][253][0].apply(r,arguments)},{dup:253}],269:[function(e,t,r){var n,i,o,s,a,l,u,c,h=e("../internals/global"),d=e("../internals/object-get-own-property-descriptor").f,f=e("../internals/classof-raw"),p=e("../internals/task").set,m=e("../internals/engine-is-ios"),g=h.MutationObserver||h.WebKitMutationObserver,v=h.process,y=h.Promise,b="process"==f(v),w=d(h,"queueMicrotask"),C=w&&w.value;C||(n=function(){var e,t;for(b&&(e=v.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(e){throw i?s():o=void 0,e}}o=void 0,e&&e.enter()},b?s=function(){v.nextTick(n)}:g&&!m?(a=!0,l=document.createTextNode(""),new g(n).observe(l,{characterData:!0}),s=function(){l.data=a=!a}):y&&y.resolve?(u=y.resolve(void 0),c=u.then,s=function(){c.call(u,n)}):s=function(){p.call(h,n)}),t.exports=C||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,s()),o=t}},{"../internals/classof-raw":230,"../internals/engine-is-ios":242,"../internals/global":251,"../internals/object-get-own-property-descriptor":279,"../internals/task":303}],270:[function(e,t,r){var n=e("../internals/global");t.exports=n.Promise},{"../internals/global":251}],271:[function(e,t,r){var n=e("../internals/fails");t.exports=!!Object.getOwnPropertySymbols&&!n((function(){return!String(Symbol())}))},{"../internals/fails":247}],272:[function(e,t,r){var n=e("../internals/global"),i=e("../internals/inspect-source"),o=n.WeakMap;t.exports="function"==typeof o&&/native code/.test(i(o))},{"../internals/global":251,"../internals/inspect-source":258}],273:[function(e,t,r){"use strict";var n=e("../internals/a-function"),i=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)};t.exports.f=function(e){return new i(e)}},{"../internals/a-function":219}],274:[function(e,t,r){var n=e("../internals/is-regexp");t.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},{"../internals/is-regexp":265}],275:[function(e,t,r){"use strict";var n=e("../internals/descriptors"),i=e("../internals/fails"),o=e("../internals/object-keys"),s=e("../internals/object-get-own-property-symbols"),a=e("../internals/object-property-is-enumerable"),l=e("../internals/to-object"),u=e("../internals/indexed-object"),c=Object.assign,h=Object.defineProperty;t.exports=!c||i((function(){if(n&&1!==c({b:1},c(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol(),i="abcdefghijklmnopqrst";return e[r]=7,i.split("").forEach((function(e){t[e]=e})),7!=c({},e)[r]||o(c({},t)).join("")!=i}))?function(e,t){for(var r=l(e),i=arguments.length,c=1,h=s.f,d=a.f;i>c;)for(var f,p=u(arguments[c++]),m=h?o(p).concat(h(p)):o(p),g=m.length,v=0;g>v;)f=m[v++],n&&!d.call(p,f)||(r[f]=p[f]);return r}:c},{"../internals/descriptors":240,"../internals/fails":247,"../internals/indexed-object":257,"../internals/object-get-own-property-symbols":282,"../internals/object-keys":285,"../internals/object-property-is-enumerable":286,"../internals/to-object":308}],276:[function(e,t,r){var n,i=e("../internals/an-object"),o=e("../internals/object-define-properties"),s=e("../internals/enum-bug-keys"),a=e("../internals/hidden-keys"),l=e("../internals/html"),u=e("../internals/document-create-element"),c=e("../internals/shared-key"),h=">",d="<",f="prototype",p="script",m=c("IE_PROTO"),g=function(){},v=function(e){return d+p+h+e+d+"/"+p+h},y=function(e){e.write(v("")),e.close();var t=e.parentWindow.Object;return e=null,t},b=function(){var e,t=u("iframe"),r="java"+p+":";return t.style.display="none",l.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(v("document.F=Object")),e.close(),e.F},w=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(e){}w=n?y(n):b();for(var e=s.length;e--;)delete w[f][s[e]];return w()};a[m]=!0,t.exports=Object.create||function(e,t){var r;return null!==e?(g[f]=i(e),r=new g,g[f]=null,r[m]=e):r=w(),void 0===t?r:o(r,t)}},{"../internals/an-object":223,"../internals/document-create-element":241,"../internals/enum-bug-keys":245,"../internals/hidden-keys":253,"../internals/html":255,"../internals/object-define-properties":277,"../internals/shared-key":299}],277:[function(e,t,r){var n=e("../internals/descriptors"),i=e("../internals/object-define-property"),o=e("../internals/an-object"),s=e("../internals/object-keys");t.exports=n?Object.defineProperties:function(e,t){o(e);for(var r,n=s(t),a=n.length,l=0;a>l;)i.f(e,r=n[l++],t[r]);return e}},{"../internals/an-object":223,"../internals/descriptors":240,"../internals/object-define-property":278,"../internals/object-keys":285}],278:[function(e,t,r){var n=e("../internals/descriptors"),i=e("../internals/ie8-dom-define"),o=e("../internals/an-object"),s=e("../internals/to-primitive"),a=Object.defineProperty;r.f=n?a:function(e,t,r){if(o(e),t=s(t,!0),o(r),i)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},{"../internals/an-object":223,"../internals/descriptors":240,"../internals/ie8-dom-define":256,"../internals/to-primitive":309}],279:[function(e,t,r){var n=e("../internals/descriptors"),i=e("../internals/object-property-is-enumerable"),o=e("../internals/create-property-descriptor"),s=e("../internals/to-indexed-object"),a=e("../internals/to-primitive"),l=e("../internals/has"),u=e("../internals/ie8-dom-define"),c=Object.getOwnPropertyDescriptor;r.f=n?c:function(e,t){if(e=s(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(l(e,t))return o(!i.f.call(e,t),e[t])}},{"../internals/create-property-descriptor":237,"../internals/descriptors":240,"../internals/has":252,"../internals/ie8-dom-define":256,"../internals/object-property-is-enumerable":286,"../internals/to-indexed-object":305,"../internals/to-primitive":309}],280:[function(e,t,r){var n=e("../internals/to-indexed-object"),i=e("../internals/object-get-own-property-names").f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return i(e)}catch(e){return s.slice()}};t.exports.f=function(e){return s&&"[object Window]"==o.call(e)?a(e):i(n(e))}},{"../internals/object-get-own-property-names":281,"../internals/to-indexed-object":305}],281:[function(e,t,r){var n=e("../internals/object-keys-internal"),i=e("../internals/enum-bug-keys").concat("length","prototype");r.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},{"../internals/enum-bug-keys":245,"../internals/object-keys-internal":284}],282:[function(e,t,r){r.f=Object.getOwnPropertySymbols},{}],283:[function(e,t,r){var n=e("../internals/has"),i=e("../internals/to-object"),o=e("../internals/shared-key"),s=e("../internals/correct-prototype-getter"),a=o("IE_PROTO"),l=Object.prototype;t.exports=s?Object.getPrototypeOf:function(e){return e=i(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},{"../internals/correct-prototype-getter":234,"../internals/has":252,"../internals/shared-key":299,"../internals/to-object":308}],284:[function(e,t,r){var n=e("../internals/has"),i=e("../internals/to-indexed-object"),o=e("../internals/array-includes").indexOf,s=e("../internals/hidden-keys");t.exports=function(e,t){var r,a=i(e),l=0,u=[];for(r in a)!n(s,r)&&n(a,r)&&u.push(r);for(;t.length>l;)n(a,r=t[l++])&&(~o(u,r)||u.push(r));return u}},{"../internals/array-includes":224,"../internals/has":252,"../internals/hidden-keys":253,"../internals/to-indexed-object":305}],285:[function(e,t,r){var n=e("../internals/object-keys-internal"),i=e("../internals/enum-bug-keys");t.exports=Object.keys||function(e){return n(e,i)}},{"../internals/enum-bug-keys":245,"../internals/object-keys-internal":284}],286:[function(e,t,r){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!n.call({1:2},1);r.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},{}],287:[function(e,t,r){var n=e("../internals/an-object"),i=e("../internals/a-possible-prototype");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(e){}return function(r,o){return n(r),i(o),t?e.call(r,o):r.__proto__=o,r}}():void 0)},{"../internals/a-possible-prototype":220,"../internals/an-object":223}],288:[function(e,t,r){var n=e("../internals/descriptors"),i=e("../internals/object-keys"),o=e("../internals/to-indexed-object"),s=e("../internals/object-property-is-enumerable").f,a=function(e){return function(t){for(var r,a=o(t),l=i(a),u=l.length,c=0,h=[];u>c;)r=l[c++],n&&!s.call(a,r)||h.push(e?[r,a[r]]:a[r]);return h}};t.exports={entries:a(!0),values:a(!1)}},{"../internals/descriptors":240,"../internals/object-keys":285,"../internals/object-property-is-enumerable":286,"../internals/to-indexed-object":305}],289:[function(e,t,r){var n=e("../internals/get-built-in"),i=e("../internals/object-get-own-property-names"),o=e("../internals/object-get-own-property-symbols"),s=e("../internals/an-object");t.exports=n("Reflect","ownKeys")||function(e){var t=i.f(s(e)),r=o.f;return r?t.concat(r(e)):t}},{"../internals/an-object":223,"../internals/get-built-in":249,"../internals/object-get-own-property-names":281,"../internals/object-get-own-property-symbols":282}],290:[function(e,t,r){var n=e("../internals/global");t.exports=n},{"../internals/global":251}],291:[function(e,t,r){t.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},{}],292:[function(e,t,r){var n=e("../internals/an-object"),i=e("../internals/is-object"),o=e("../internals/new-promise-capability");t.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=o.f(e);return(0,r.resolve)(t),r.promise}},{"../internals/an-object":223,"../internals/is-object":263,"../internals/new-promise-capability":273}],293:[function(e,t,r){var n=e("../internals/redefine");t.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},{"../internals/redefine":294}],294:[function(e,t,r){var n=e("../internals/global"),i=e("../internals/create-non-enumerable-property"),o=e("../internals/has"),s=e("../internals/set-global"),a=e("../internals/inspect-source"),l=e("../internals/internal-state"),u=l.get,c=l.enforce,h=String(String).split("String");(t.exports=function(e,t,r,a){var l=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,d=!!a&&!!a.noTargetGet;"function"==typeof r&&("string"!=typeof t||o(r,"name")||i(r,"name",t),c(r).source=h.join("string"==typeof t?t:"")),e!==n?(l?!d&&e[t]&&(u=!0):delete e[t],u?e[t]=r:i(e,t,r)):u?e[t]=r:s(t,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||a(this)}))},{"../internals/create-non-enumerable-property":236,"../internals/global":251,"../internals/has":252,"../internals/inspect-source":258,"../internals/internal-state":259,"../internals/set-global":296}],295:[function(e,t,r){t.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},{}],296:[function(e,t,r){var n=e("../internals/global"),i=e("../internals/create-non-enumerable-property");t.exports=function(e,t){try{i(n,e,t)}catch(r){n[e]=t}return t}},{"../internals/create-non-enumerable-property":236,"../internals/global":251}],297:[function(e,t,r){"use strict";var n=e("../internals/get-built-in"),i=e("../internals/object-define-property"),o=e("../internals/well-known-symbol"),s=e("../internals/descriptors"),a=o("species");t.exports=function(e){var t=n(e),r=i.f;s&&t&&!t[a]&&r(t,a,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":240,"../internals/get-built-in":249,"../internals/object-define-property":278,"../internals/well-known-symbol":314}],298:[function(e,t,r){var n=e("../internals/object-define-property").f,i=e("../internals/has"),o=e("../internals/well-known-symbol")("toStringTag");t.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},{"../internals/has":252,"../internals/object-define-property":278,"../internals/well-known-symbol":314}],299:[function(e,t,r){var n=e("../internals/shared"),i=e("../internals/uid"),o=n("keys");t.exports=function(e){return o[e]||(o[e]=i(e))}},{"../internals/shared":301,"../internals/uid":311}],300:[function(e,t,r){var n=e("../internals/global"),i=e("../internals/set-global"),o="__core-js_shared__",s=n[o]||i(o,{});t.exports=s},{"../internals/global":251,"../internals/set-global":296}],301:[function(e,t,r){var n=e("../internals/is-pure"),i=e("../internals/shared-store");(t.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:n?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":264,"../internals/shared-store":300}],302:[function(e,t,r){var n=e("../internals/an-object"),i=e("../internals/a-function"),o=e("../internals/well-known-symbol")("species");t.exports=function(e,t){var r,s=n(e).constructor;return void 0===s||null==(r=n(s)[o])?t:i(r)}},{"../internals/a-function":219,"../internals/an-object":223,"../internals/well-known-symbol":314}],303:[function(e,t,r){var n,i,o,s=e("../internals/global"),a=e("../internals/fails"),l=e("../internals/classof-raw"),u=e("../internals/function-bind-context"),c=e("../internals/html"),h=e("../internals/document-create-element"),d=e("../internals/engine-is-ios"),f=s.location,p=s.setImmediate,m=s.clearImmediate,g=s.process,v=s.MessageChannel,y=s.Dispatch,b=0,w={},C="onreadystatechange",_=function(e){if(w.hasOwnProperty(e)){var t=w[e];delete w[e],t()}},S=function(e){return function(){_(e)}},x=function(e){_(e.data)},k=function(e){s.postMessage(e+"",f.protocol+"//"+f.host)};p&&m||(p=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return w[++b]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},n(b),b},m=function(e){delete w[e]},"process"==l(g)?n=function(e){g.nextTick(S(e))}:y&&y.now?n=function(e){y.now(S(e))}:v&&!d?(o=(i=new v).port2,i.port1.onmessage=x,n=u(o.postMessage,o,1)):!s.addEventListener||"function"!=typeof postMessage||s.importScripts||a(k)||"file:"===f.protocol?n=C in h("script")?function(e){c.appendChild(h("script"))[C]=function(){c.removeChild(this),_(e)}}:function(e){setTimeout(S(e),0)}:(n=k,s.addEventListener("message",x,!1))),t.exports={set:p,clear:m}},{"../internals/classof-raw":230,"../internals/document-create-element":241,"../internals/engine-is-ios":242,"../internals/fails":247,"../internals/function-bind-context":248,"../internals/global":251,"../internals/html":255}],304:[function(e,t,r){var n=e("../internals/to-integer"),i=Math.max,o=Math.min;t.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):o(r,t)}},{"../internals/to-integer":306}],305:[function(e,t,r){var n=e("../internals/indexed-object"),i=e("../internals/require-object-coercible");t.exports=function(e){return n(i(e))}},{"../internals/indexed-object":257,"../internals/require-object-coercible":295}],306:[function(e,t,r){var n=Math.ceil,i=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},{}],307:[function(e,t,r){var n=e("../internals/to-integer"),i=Math.min;t.exports=function(e){return e>0?i(n(e),9007199254740991):0}},{"../internals/to-integer":306}],308:[function(e,t,r){var n=e("../internals/require-object-coercible");t.exports=function(e){return Object(n(e))}},{"../internals/require-object-coercible":295}],309:[function(e,t,r){var n=e("../internals/is-object");t.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":263}],310:[function(e,t,r){var n={};n[e("../internals/well-known-symbol")("toStringTag")]="z",t.exports="[object z]"===String(n)},{"../internals/well-known-symbol":314}],311:[function(e,t,r){var n=0,i=Math.random();t.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+i).toString(36)}},{}],312:[function(e,t,r){var n=e("../internals/native-symbol");t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},{"../internals/native-symbol":271}],313:[function(e,t,r){var n=e("../internals/well-known-symbol");r.f=n},{"../internals/well-known-symbol":314}],314:[function(e,t,r){var n=e("../internals/global"),i=e("../internals/shared"),o=e("../internals/has"),s=e("../internals/uid"),a=e("../internals/native-symbol"),l=e("../internals/use-symbol-as-uid"),u=i("wks"),c=n.Symbol,h=l?c:c&&c.withoutSetter||s;t.exports=function(e){return o(u,e)||(a&&o(c,e)?u[e]=c[e]:u[e]=h("Symbol."+e)),u[e]}},{"../internals/global":251,"../internals/has":252,"../internals/native-symbol":271,"../internals/shared":301,"../internals/uid":311,"../internals/use-symbol-as-uid":312}],315:[function(e,t,r){"use strict";var n=e("../internals/export"),i=e("../internals/array-iteration").findIndex,o=e("../internals/add-to-unscopables"),s=e("../internals/array-method-uses-to-length"),a="findIndex",l=!0,u=s(a);a in[]&&Array(1)[a]((function(){l=!1})),n({target:"Array",proto:!0,forced:l||!u},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o(a)},{"../internals/add-to-unscopables":221,"../internals/array-iteration":225,"../internals/array-method-uses-to-length":226,"../internals/export":246}],316:[function(e,t,r){"use strict";var n=e("../internals/export"),i=e("../internals/array-iteration").find,o=e("../internals/add-to-unscopables"),s=e("../internals/array-method-uses-to-length"),a="find",l=!0,u=s(a);a in[]&&Array(1)[a]((function(){l=!1})),n({target:"Array",proto:!0,forced:l||!u},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o(a)},{"../internals/add-to-unscopables":221,"../internals/array-iteration":225,"../internals/array-method-uses-to-length":226,"../internals/export":246}],317:[function(e,t,r){"use strict";var n=e("../internals/export"),i=e("../internals/array-includes").includes,o=e("../internals/add-to-unscopables");n({target:"Array",proto:!0,forced:!e("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},{"../internals/add-to-unscopables":221,"../internals/array-includes":224,"../internals/array-method-uses-to-length":226,"../internals/export":246}],318:[function(e,t,r){"use strict";var n=e("../internals/to-indexed-object"),i=e("../internals/add-to-unscopables"),o=e("../internals/iterators"),s=e("../internals/internal-state"),a=e("../internals/define-iterator"),l="Array Iterator",u=s.set,c=s.getterFor(l);t.exports=a(Array,"Array",(function(e,t){u(this,{type:l,target:n(e),index:0,kind:t})}),(function(){var e=c(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},{"../internals/add-to-unscopables":221,"../internals/define-iterator":238,"../internals/internal-state":259,"../internals/iterators":268,"../internals/to-indexed-object":305}],319:[function(e,t,r){e("../internals/export")({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},{"../internals/export":246}],320:[function(e,t,r){var n=e("../internals/export"),i=e("../internals/object-assign");n({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},{"../internals/export":246,"../internals/object-assign":275}],321:[function(e,t,r){var n=e("../internals/export"),i=e("../internals/to-object"),o=e("../internals/object-keys");n({target:"Object",stat:!0,forced:e("../internals/fails")((function(){o(1)}))},{keys:function(e){return o(i(e))}})},{"../internals/export":246,"../internals/fails":247,"../internals/object-keys":285,"../internals/to-object":308}],322:[function(e,t,r){var n=e("../internals/export"),i=e("../internals/object-to-array").values;n({target:"Object",stat:!0},{values:function(e){return i(e)}})},{"../internals/export":246,"../internals/object-to-array":288}],323:[function(e,t,r){"use strict";var n,i,o,s,a=e("../internals/export"),l=e("../internals/is-pure"),u=e("../internals/global"),c=e("../internals/get-built-in"),h=e("../internals/native-promise-constructor"),d=e("../internals/redefine"),f=e("../internals/redefine-all"),p=e("../internals/set-to-string-tag"),m=e("../internals/set-species"),g=e("../internals/is-object"),v=e("../internals/a-function"),y=e("../internals/an-instance"),b=e("../internals/classof-raw"),w=e("../internals/inspect-source"),C=e("../internals/iterate"),_=e("../internals/check-correctness-of-iteration"),S=e("../internals/species-constructor"),x=e("../internals/task").set,k=e("../internals/microtask"),T=e("../internals/promise-resolve"),R=e("../internals/host-report-errors"),E=e("../internals/new-promise-capability"),M=e("../internals/perform"),P=e("../internals/internal-state"),O=e("../internals/is-forced"),I=e("../internals/well-known-symbol"),A=e("../internals/engine-v8-version"),j=I("species"),D="Promise",N=P.get,F=P.set,$=P.getterFor(D),L=h,B=u.TypeError,V=u.document,H=u.process,z=c("fetch"),U=E.f,q=U,G="process"==b(H),W=!!(V&&V.createEvent&&u.dispatchEvent),K="unhandledrejection",J="rejectionhandled",X=0,Y=1,Z=2,Q=1,ee=2,te=O(D,(function(){if(w(L)===String(L)){if(66===A)return!0;if(!G&&"function"!=typeof PromiseRejectionEvent)return!0}if(l&&!L.prototype.finally)return!0;if(A>=51&&/native code/.test(L))return!1;var e=L.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[j]=t,!(e.then((function(){}))instanceof t)})),re=te||!_((function(e){L.all(e).catch((function(){}))})),ne=function(e){var t;return!(!g(e)||"function"!=typeof(t=e.then))&&t},ie=function(e,t,r){if(!t.notified){t.notified=!0;var n=t.reactions;k((function(){for(var i=t.value,o=t.state==Y,s=0;n.length>s;){var a,l,u,c=n[s++],h=o?c.ok:c.fail,d=c.resolve,f=c.reject,p=c.domain;try{h?(o||(t.rejection===ee&&le(e,t),t.rejection=Q),!0===h?a=i:(p&&p.enter(),a=h(i),p&&(p.exit(),u=!0)),a===c.promise?f(B("Promise-chain cycle")):(l=ne(a))?l.call(a,d,f):d(a)):f(i)}catch(e){p&&!u&&p.exit(),f(e)}}t.reactions=[],t.notified=!1,r&&!t.rejection&&se(e,t)}))}},oe=function(e,t,r){var n,i;W?((n=V.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),u.dispatchEvent(n)):n={promise:t,reason:r},(i=u["on"+e])?i(n):e===K&&R("Unhandled promise rejection",r)},se=function(e,t){x.call(u,(function(){var r,n=t.value;if(ae(t)&&(r=M((function(){G?H.emit("unhandledRejection",n,e):oe(K,e,n)})),t.rejection=G||ae(t)?ee:Q,r.error))throw r.value}))},ae=function(e){return e.rejection!==Q&&!e.parent},le=function(e,t){x.call(u,(function(){G?H.emit("rejectionHandled",e):oe(J,e,t.value)}))},ue=function(e,t,r,n){return function(i){e(t,r,i,n)}},ce=function(e,t,r,n){t.done||(t.done=!0,n&&(t=n),t.value=r,t.state=Z,ie(e,t,!0))},he=function(e,t,r,n){if(!t.done){t.done=!0,n&&(t=n);try{if(e===r)throw B("Promise can't be resolved itself");var i=ne(r);i?k((function(){var n={done:!1};try{i.call(r,ue(he,e,n,t),ue(ce,e,n,t))}catch(r){ce(e,n,r,t)}})):(t.value=r,t.state=Y,ie(e,t,!1))}catch(r){ce(e,{done:!1},r,t)}}};te&&(L=function(e){y(this,L,D),v(e),n.call(this);var t=N(this);try{e(ue(he,this,t),ue(ce,this,t))}catch(e){ce(this,t,e)}},(n=function(e){F(this,{type:D,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:X,value:void 0})}).prototype=f(L.prototype,{then:function(e,t){var r=$(this),n=U(S(this,L));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=G?H.domain:void 0,r.parent=!0,r.reactions.push(n),r.state!=X&&ie(this,r,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new n,t=N(e);this.promise=e,this.resolve=ue(he,e,t),this.reject=ue(ce,e,t)},E.f=U=function(e){return e===L||e===o?new i(e):q(e)},l||"function"!=typeof h||(s=h.prototype.then,d(h.prototype,"then",(function(e,t){var r=this;return new L((function(e,t){s.call(r,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof z&&a({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return T(L,z.apply(u,arguments))}}))),a({global:!0,wrap:!0,forced:te},{Promise:L}),p(L,D,!1,!0),m(D),o=c(D),a({target:D,stat:!0,forced:te},{reject:function(e){var t=U(this);return t.reject.call(void 0,e),t.promise}}),a({target:D,stat:!0,forced:l||te},{resolve:function(e){return T(l&&this===o?L:this,e)}}),a({target:D,stat:!0,forced:re},{all:function(e){var t=this,r=U(t),n=r.resolve,i=r.reject,o=M((function(){var r=v(t.resolve),o=[],s=0,a=1;C(e,(function(e){var l=s++,u=!1;o.push(void 0),a++,r.call(t,e).then((function(e){u||(u=!0,o[l]=e,--a||n(o))}),i)})),--a||n(o)}));return o.error&&i(o.value),r.promise},race:function(e){var t=this,r=U(t),n=r.reject,i=M((function(){var i=v(t.resolve);C(e,(function(e){i.call(t,e).then(r.resolve,n)}))}));return i.error&&n(i.value),r.promise}})},{"../internals/a-function":219,"../internals/an-instance":222,"../internals/check-correctness-of-iteration":229,"../internals/classof-raw":230,"../internals/engine-v8-version":244,"../internals/export":246,"../internals/get-built-in":249,"../internals/global":251,"../internals/host-report-errors":254,"../internals/inspect-source":258,"../internals/internal-state":259,"../internals/is-forced":262,"../internals/is-object":263,"../internals/is-pure":264,"../internals/iterate":266,"../internals/microtask":269,"../internals/native-promise-constructor":270,"../internals/new-promise-capability":273,"../internals/perform":291,"../internals/promise-resolve":292,"../internals/redefine":294,"../internals/redefine-all":293,"../internals/set-species":297,"../internals/set-to-string-tag":298,"../internals/species-constructor":302,"../internals/task":303,"../internals/well-known-symbol":314}],324:[function(e,t,r){var n=e("../internals/export"),i=e("../internals/to-absolute-index"),o=String.fromCharCode,s=String.fromCodePoint;n({target:"String",stat:!0,forced:!!s&&1!=s.length},{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,s=0;n>s;){if(t=+arguments[s++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return r.join("")}})},{"../internals/export":246,"../internals/to-absolute-index":304}],325:[function(e,t,r){"use strict";var n=e("../internals/export"),i=e("../internals/not-a-regexp"),o=e("../internals/require-object-coercible");n({target:"String",proto:!0,forced:!e("../internals/correct-is-regexp-logic")("includes")},{includes:function(e){return!!~String(o(this)).indexOf(i(e),arguments.length>1?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":233,"../internals/export":246,"../internals/not-a-regexp":274,"../internals/require-object-coercible":295}],326:[function(e,t,r){e("../internals/define-well-known-symbol")("asyncIterator")},{"../internals/define-well-known-symbol":239}],327:[function(e,t,r){"use strict";var n=e("../internals/export"),i=e("../internals/global"),o=e("../internals/get-built-in"),s=e("../internals/is-pure"),a=e("../internals/descriptors"),l=e("../internals/native-symbol"),u=e("../internals/use-symbol-as-uid"),c=e("../internals/fails"),h=e("../internals/has"),d=e("../internals/is-array"),f=e("../internals/is-object"),p=e("../internals/an-object"),m=e("../internals/to-object"),g=e("../internals/to-indexed-object"),v=e("../internals/to-primitive"),y=e("../internals/create-property-descriptor"),b=e("../internals/object-create"),w=e("../internals/object-keys"),C=e("../internals/object-get-own-property-names"),_=e("../internals/object-get-own-property-names-external"),S=e("../internals/object-get-own-property-symbols"),x=e("../internals/object-get-own-property-descriptor"),k=e("../internals/object-define-property"),T=e("../internals/object-property-is-enumerable"),R=e("../internals/create-non-enumerable-property"),E=e("../internals/redefine"),M=e("../internals/shared"),P=e("../internals/shared-key"),O=e("../internals/hidden-keys"),I=e("../internals/uid"),A=e("../internals/well-known-symbol"),j=e("../internals/well-known-symbol-wrapped"),D=e("../internals/define-well-known-symbol"),N=e("../internals/set-to-string-tag"),F=e("../internals/internal-state"),$=e("../internals/array-iteration").forEach,L=P("hidden"),B="Symbol",V="prototype",H=A("toPrimitive"),z=F.set,U=F.getterFor(B),q=Object[V],G=i.Symbol,W=o("JSON","stringify"),K=x.f,J=k.f,X=_.f,Y=T.f,Z=M("symbols"),Q=M("op-symbols"),ee=M("string-to-symbol-registry"),te=M("symbol-to-string-registry"),re=M("wks"),ne=i.QObject,ie=!ne||!ne[V]||!ne[V].findChild,oe=a&&c((function(){return 7!=b(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=K(q,t);n&&delete q[t],J(e,t,r),n&&e!==q&&J(q,t,n)}:J,se=function(e,t){var r=Z[e]=b(G[V]);return z(r,{type:B,tag:e,description:t}),a||(r.description=t),r},ae=u?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof G},le=function(e,t,r){e===q&&le(Q,t,r),p(e);var n=v(t,!0);return p(r),h(Z,n)?(r.enumerable?(h(e,L)&&e[L][n]&&(e[L][n]=!1),r=b(r,{enumerable:y(0,!1)})):(h(e,L)||J(e,L,y(1,{})),e[L][n]=!0),oe(e,n,r)):J(e,n,r)},ue=function(e,t){p(e);var r=g(t),n=w(r).concat(pe(r));return $(n,(function(t){a&&!he.call(r,t)||le(e,t,r[t])})),e},ce=function(e,t){return void 0===t?b(e):ue(b(e),t)},he=function(e){var t=v(e,!0),r=Y.call(this,t);return!(this===q&&h(Z,t)&&!h(Q,t))&&(!(r||!h(this,t)||!h(Z,t)||h(this,L)&&this[L][t])||r)},de=function(e,t){var r=g(e),n=v(t,!0);if(r!==q||!h(Z,n)||h(Q,n)){var i=K(r,n);return!i||!h(Z,n)||h(r,L)&&r[L][n]||(i.enumerable=!0),i}},fe=function(e){var t=X(g(e)),r=[];return $(t,(function(e){h(Z,e)||h(O,e)||r.push(e)})),r},pe=function(e){var t=e===q,r=X(t?Q:g(e)),n=[];return $(r,(function(e){!h(Z,e)||t&&!h(q,e)||n.push(Z[e])})),n};l||(G=function(){if(this instanceof G)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=I(e),r=function(e){this===q&&r.call(Q,e),h(this,L)&&h(this[L],t)&&(this[L][t]=!1),oe(this,t,y(1,e))};return a&&ie&&oe(q,t,{configurable:!0,set:r}),se(t,e)},E(G[V],"toString",(function(){return U(this).tag})),E(G,"withoutSetter",(function(e){return se(I(e),e)})),T.f=he,k.f=le,x.f=de,C.f=_.f=fe,S.f=pe,j.f=function(e){return se(A(e),e)},a&&(J(G[V],"description",{configurable:!0,get:function(){return U(this).description}}),s||E(q,"propertyIsEnumerable",he,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:G}),$(w(re),(function(e){D(e)})),n({target:B,stat:!0,forced:!l},{for:function(e){var t=String(e);if(h(ee,t))return ee[t];var r=G(t);return ee[t]=r,te[r]=t,r},keyFor:function(e){if(!ae(e))throw TypeError(e+" is not a symbol");if(h(te,e))return te[e]},useSetter:function(){ie=!0},useSimple:function(){ie=!1}}),n({target:"Object",stat:!0,forced:!l,sham:!a},{create:ce,defineProperty:le,defineProperties:ue,getOwnPropertyDescriptor:de}),n({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:fe,getOwnPropertySymbols:pe}),n({target:"Object",stat:!0,forced:c((function(){S.f(1)}))},{getOwnPropertySymbols:function(e){return S.f(m(e))}}),W&&n({target:"JSON",stat:!0,forced:!l||c((function(){var e=G();return"[null]"!=W([e])||"{}"!=W({a:e})||"{}"!=W(Object(e))}))},{stringify:function(e,t,r){for(var n,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(n=t,(f(t)||void 0!==e)&&!ae(e))return d(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!ae(t))return t}),i[1]=t,W.apply(null,i)}}),G[V][H]||R(G[V],H,G[V].valueOf),N(G,B),O[L]=!0},{"../internals/an-object":223,"../internals/array-iteration":225,"../internals/create-non-enumerable-property":236,"../internals/create-property-descriptor":237,"../internals/define-well-known-symbol":239,"../internals/descriptors":240,"../internals/export":246,"../internals/fails":247,"../internals/get-built-in":249,"../internals/global":251,"../internals/has":252,"../internals/hidden-keys":253,"../internals/internal-state":259,"../internals/is-array":261,"../internals/is-object":263,"../internals/is-pure":264,"../internals/native-symbol":271,"../internals/object-create":276,"../internals/object-define-property":278,"../internals/object-get-own-property-descriptor":279,"../internals/object-get-own-property-names":281,"../internals/object-get-own-property-names-external":280,"../internals/object-get-own-property-symbols":282,"../internals/object-keys":285,"../internals/object-property-is-enumerable":286,"../internals/redefine":294,"../internals/set-to-string-tag":298,"../internals/shared":301,"../internals/shared-key":299,"../internals/to-indexed-object":305,"../internals/to-object":308,"../internals/to-primitive":309,"../internals/uid":311,"../internals/use-symbol-as-uid":312,"../internals/well-known-symbol":314,"../internals/well-known-symbol-wrapped":313}],328:[function(e,t,r){(function(e){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===v(e)}function i(e){return"boolean"==typeof e}function o(e){return null===e}function s(e){return null==e}function a(e){return"number"==typeof e}function l(e){return"string"==typeof e}function u(e){return"symbol"===t(e)}function c(e){return void 0===e}function h(e){return"[object RegExp]"===v(e)}function d(e){return"object"===t(e)&&null!==e}function f(e){return"[object Date]"===v(e)}function p(e){return"[object Error]"===v(e)||e instanceof Error}function m(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===t(e)||void 0===e}function v(e){return Object.prototype.toString.call(e)}r.isArray=n,r.isBoolean=i,r.isNull=o,r.isNullOrUndefined=s,r.isNumber=a,r.isString=l,r.isSymbol=u,r.isUndefined=c,r.isRegExp=h,r.isObject=d,r.isDate=f,r.isError=p,r.isFunction=m,r.isPrimitive=g,r.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":388}],329:[function(e,t,r){(function(r){"use strict";var n=e("elliptic"),i=e("bn.js");t.exports=function(e){return new s(e)};var o={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function s(e){this.curveType=o[e],this.curveType||(this.curveType={name:e}),this.curve=new n.ec(this.curveType.name),this.keys=void 0}function a(e,t,n){Array.isArray(e)||(e=e.toArray());var i=new r(e);if(n&&i.length<n){var o=new r(n-i.length);o.fill(0),i=r.concat([o,i])}return t?i.toString(t):i}o.p224=o.secp224r1,o.p256=o.secp256r1=o.prime256v1,o.p192=o.secp192r1=o.prime192v1,o.p384=o.secp384r1,o.p521=o.secp521r1,s.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},s.prototype.computeSecret=function(e,t,n){return t=t||"utf8",r.isBuffer(e)||(e=new r(e,t)),a(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),n,this.curveType.byteLength)},s.prototype.getPublicKey=function(e,t){var r=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(r[r.length-1]%2?r[0]=7:r[0]=6),a(r,e)},s.prototype.getPrivateKey=function(e){return a(this.keys.getPrivate(),e)},s.prototype.setPublicKey=function(e,t){return t=t||"utf8",r.isBuffer(e)||(e=new r(e,t)),this.keys._importPublic(e),this},s.prototype.setPrivateKey=function(e,t){t=t||"utf8",r.isBuffer(e)||(e=new r(e,t));var n=new i(e);return n=n.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(n),this}}).call(this,e("buffer").Buffer)},{"bn.js":330,buffer:216,elliptic:350}],330:[function(e,t,r){arguments[4][181][0].apply(r,arguments)},{buffer:185,dup:181}],331:[function(e,t,r){"use strict";var n=e("inherits"),i=e("md5.js"),o=e("ripemd160"),s=e("sha.js"),a=e("cipher-base");function l(e){a.call(this,"digest"),this._hash=e}n(l,a),l.prototype._update=function(e){this._hash.update(e)},l.prototype._final=function(){return this._hash.digest()},t.exports=function(e){return"md5"===(e=e.toLowerCase())?new i:"rmd160"===e||"ripemd160"===e?new o:new l(s(e))}},{"cipher-base":218,inherits:387,"md5.js":434,ripemd160:493,"sha.js":499}],332:[function(e,t,r){"use strict";var n=e("md5.js");t.exports=function(e){return(new n).update(e).digest()}},{"md5.js":434}],333:[function(e,t,r){"use strict";var n=e("inherits"),i=e("./legacy"),o=e("cipher-base"),s=e("safe-buffer").Buffer,a=e("create-hash/md5"),l=e("ripemd160"),u=e("sha.js"),c=s.alloc(128);function h(e,t){o.call(this,"digest"),"string"==typeof t&&(t=s.from(t));var r="sha512"===e||"sha384"===e?128:64;this._alg=e,this._key=t,t.length>r?t=("rmd160"===e?new l:u(e)).update(t).digest():t.length<r&&(t=s.concat([t,c],r));for(var n=this._ipad=s.allocUnsafe(r),i=this._opad=s.allocUnsafe(r),a=0;a<r;a++)n[a]=54^t[a],i[a]=92^t[a];this._hash="rmd160"===e?new l:u(e),this._hash.update(n)}n(h,o),h.prototype._update=function(e){this._hash.update(e)},h.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new l:u(this._alg)).update(this._opad).update(e).digest()},t.exports=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new h("rmd160",t):"md5"===e?new i(a,t):new h(e,t)}},{"./legacy":334,"cipher-base":218,"create-hash/md5":332,inherits:387,ripemd160:493,"safe-buffer":494,"sha.js":499}],334:[function(e,t,r){"use strict";var n=e("inherits"),i=e("safe-buffer").Buffer,o=e("cipher-base"),s=i.alloc(128),a=64;function l(e,t){o.call(this,"digest"),"string"==typeof t&&(t=i.from(t)),this._alg=e,this._key=t,t.length>a?t=e(t):t.length<a&&(t=i.concat([t,s],a));for(var r=this._ipad=i.allocUnsafe(a),n=this._opad=i.allocUnsafe(a),l=0;l<a;l++)r[l]=54^t[l],n[l]=92^t[l];this._hash=[r]}n(l,o),l.prototype._update=function(e){this._hash.push(e)},l.prototype._final=function(){var e=this._alg(i.concat(this._hash));return this._alg(i.concat([this._opad,e]))},t.exports=l},{"cipher-base":218,inherits:387,"safe-buffer":494}],335:[function(e,t,r){"use strict";r.randomBytes=r.rng=r.pseudoRandomBytes=r.prng=e("randombytes"),r.createHash=r.Hash=e("create-hash"),r.createHmac=r.Hmac=e("create-hmac");var n=e("browserify-sign/algos"),i=Object.keys(n),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(i);r.getHashes=function(){return o};var s=e("pbkdf2");r.pbkdf2=s.pbkdf2,r.pbkdf2Sync=s.pbkdf2Sync;var a=e("browserify-cipher");r.Cipher=a.Cipher,r.createCipher=a.createCipher,r.Cipheriv=a.Cipheriv,r.createCipheriv=a.createCipheriv,r.Decipher=a.Decipher,r.createDecipher=a.createDecipher,r.Decipheriv=a.Decipheriv,r.createDecipheriv=a.createDecipheriv,r.getCiphers=a.getCiphers,r.listCiphers=a.listCiphers;var l=e("diffie-hellman");r.DiffieHellmanGroup=l.DiffieHellmanGroup,r.createDiffieHellmanGroup=l.createDiffieHellmanGroup,r.getDiffieHellman=l.getDiffieHellman,r.createDiffieHellman=l.createDiffieHellman,r.DiffieHellman=l.DiffieHellman;var u=e("browserify-sign");r.createSign=u.createSign,r.Sign=u.Sign,r.createVerify=u.createVerify,r.Verify=u.Verify,r.createECDH=e("create-ecdh");var c=e("public-encrypt");r.publicEncrypt=c.publicEncrypt,r.privateEncrypt=c.privateEncrypt,r.publicDecrypt=c.publicDecrypt,r.privateDecrypt=c.privateDecrypt;var h=e("randomfill");r.randomFill=h.randomFill,r.randomFillSync=h.randomFillSync,r.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},r.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":203,"browserify-sign":211,"browserify-sign/algos":208,"create-ecdh":329,"create-hash":331,"create-hmac":333,"diffie-hellman":345,pbkdf2:460,"public-encrypt":468,randombytes:475,randomfill:476}],336:[function(t,r,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var o,s;o=void 0,s=function(){var e="millisecond",t="second",r="minute",n="hour",o="day",s="week",a="month",l="quarter",u="year",c="date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d+)?$/,d=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},p={s:f,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),i=r%60;return(t<=0?"+":"-")+f(n,2,"0")+":"+f(i,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.add(n,a),o=r-i<0,s=t.add(n+(o?-1:1),a);return+(-(n+(r-i)/(o?i-s:s-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(i){return{M:a,y:u,w:s,d:o,D:c,h:n,m:r,s:t,ms:e,Q:l}[i]||String(i||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},g="en",v={};v[g]=m;var y=function(e){return e instanceof _},b=function(e,t,r){var n;if(!e)return g;if("string"==typeof e)v[e]&&(n=e),t&&(v[e]=t,n=e);else{var i=e.name;v[i]=e,n=i}return!r&&n&&(g=n),n||!r&&g},w=function(e,t){if(y(e))return e.clone();var r="object"==i(t)?t:{};return r.date=e,r.args=arguments,new _(r)},C=p;C.l=b,C.i=y,C.w=function(e,t){return w(e,{locale:t.$L,utc:t.$u,$offset:t.$offset})};var _=function(){function i(e){this.$L=this.$L||b(e.locale,null,!0),this.parse(e)}var f=i.prototype;return f.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(C.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(h);if(n){var i=n[2]-1||0,o=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)}}return new Date(t)}(e),this.init()},f.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},f.$utils=function(){return C},f.isValid=function(){return!("Invalid Date"===this.$d.toString())},f.isSame=function(e,t){var r=w(e);return this.startOf(t)<=r&&r<=this.endOf(t)},f.isAfter=function(e,t){return w(e)<this.startOf(t)},f.isBefore=function(e,t){return this.endOf(t)<w(e)},f.$g=function(e,t,r){return C.u(e)?this[t]:this.set(r,e)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(e,i){var l=this,h=!!C.u(i)||i,d=C.p(e),f=function(e,t){var r=C.w(l.$u?Date.UTC(l.$y,t,e):new Date(l.$y,t,e),l);return h?r:r.endOf(o)},p=function(e,t){return C.w(l.toDate()[e].apply(l.toDate("s"),(h?[0,0,0,0]:[23,59,59,999]).slice(t)),l)},m=this.$W,g=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(d){case u:return h?f(1,0):f(31,11);case a:return h?f(1,g):f(0,g+1);case s:var b=this.$locale().weekStart||0,w=(m<b?m+7:m)-b;return f(h?v-w:v+(6-w),g);case o:case c:return p(y+"Hours",0);case n:return p(y+"Minutes",1);case r:return p(y+"Seconds",2);case t:return p(y+"Milliseconds",3);default:return this.clone()}},f.endOf=function(e){return this.startOf(e,!1)},f.$set=function(i,s){var l,h=C.p(i),d="set"+(this.$u?"UTC":""),f=(l={},l[o]=d+"Date",l[c]=d+"Date",l[a]=d+"Month",l[u]=d+"FullYear",l[n]=d+"Hours",l[r]=d+"Minutes",l[t]=d+"Seconds",l[e]=d+"Milliseconds",l)[h],p=h===o?this.$D+(s-this.$W):s;if(h===a||h===u){var m=this.clone().set(c,1);m.$d[f](p),m.init(),this.$d=m.set(c,Math.min(this.$D,m.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},f.set=function(e,t){return this.clone().$set(e,t)},f.get=function(e){return this[C.p(e)]()},f.add=function(e,i){var l,c=this;e=Number(e);var h=C.p(i),d=function(t){var r=w(c);return C.w(r.date(r.date()+Math.round(t*e)),c)};if(h===a)return this.set(a,this.$M+e);if(h===u)return this.set(u,this.$y+e);if(h===o)return d(1);if(h===s)return d(7);var f=(l={},l[r]=6e4,l[n]=36e5,l[t]=1e3,l)[h]||1,p=this.$d.getTime()+e*f;return C.w(p,this)},f.subtract=function(e,t){return this.add(-1*e,t)},f.format=function(e){var t=this;if(!this.isValid())return"Invalid Date";var r=e||"YYYY-MM-DDTHH:mm:ssZ",n=C.z(this),i=this.$locale(),o=this.$H,s=this.$m,a=this.$M,l=i.weekdays,u=i.months,c=function(e,n,i,o){return e&&(e[n]||e(t,r))||i[n].substr(0,o)},h=function(e){return C.s(o%12||12,e,"0")},f=i.meridiem||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:C.s(a+1,2,"0"),MMM:c(i.monthsShort,a,u,3),MMMM:c(u,a),D:this.$D,DD:C.s(this.$D,2,"0"),d:String(this.$W),dd:c(i.weekdaysMin,this.$W,l,2),ddd:c(i.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(o),HH:C.s(o,2,"0"),h:h(1),hh:h(2),a:f(o,s,!0),A:f(o,s,!1),m:String(s),mm:C.s(s,2,"0"),s:String(this.$s),ss:C.s(this.$s,2,"0"),SSS:C.s(this.$ms,3,"0"),Z:n};return r.replace(d,(function(e,t){return t||p[e]||n.replace(":","")}))},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(e,i,c){var h,d=C.p(i),f=w(e),p=6e4*(f.utcOffset()-this.utcOffset()),m=this-f,g=C.m(this,f);return g=(h={},h[u]=g/12,h[a]=g,h[l]=g/3,h[s]=(m-p)/6048e5,h[o]=(m-p)/864e5,h[n]=m/36e5,h[r]=m/6e4,h[t]=m/1e3,h)[d]||m,c?g:C.a(g)},f.daysInMonth=function(){return this.endOf(a).$D},f.$locale=function(){return v[this.$L]},f.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=b(e,t,!0);return n&&(r.$L=n),r},f.clone=function(){return C.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},i}(),S=_.prototype;return w.prototype=S,[["$ms",e],["$s",t],["$m",r],["$H",n],["$W",o],["$M",a],["$y",u],["$D",c]].forEach((function(e){S[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),w.extend=function(e,t){return e(t,_,w),w},w.locale=b,w.isDayjs=y,w.unix=function(e){return w(1e3*e)},w.en=v[g],w.Ls=v,w},"object"==(void 0===n?"undefined":i(n))&&void 0!==r?r.exports=s():"function"==typeof e&&e.amd?e(s):o.dayjs=s()},{}],337:[function(t,r,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var o,s;o=void 0,s=function(){var e,t=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,n=/\d\d?/,i=/\d*[^\s\d-:/()]+/,o=function(e){return function(t){this[e]=+t}},s=[/[+-]\d\d:?\d\d/,function(e){var t,r;(this.zone||(this.zone={})).offset=0==(r=60*(t=e.match(/([+-]|\d\d)/g))[1]+ +t[2])?0:"+"===t[0]?-r:r}],a=function(t){var r=e[t];return r&&(r.indexOf?r:r.s.concat(r.f))},l={A:[/[AP]M/,function(e){this.afternoon="PM"===e}],a:[/[ap]m/,function(e){this.afternoon="pm"===e}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[r,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[n,o("seconds")],ss:[n,o("seconds")],m:[n,o("minutes")],mm:[n,o("minutes")],H:[n,o("hours")],h:[n,o("hours")],HH:[n,o("hours")],hh:[n,o("hours")],D:[n,o("day")],DD:[r,o("day")],Do:[i,function(t){var r=e.ordinal,n=t.match(/\d+/);if(this.day=n[0],r)for(var i=1;i<=31;i+=1)r(i).replace(/\[|\]/g,"")===t&&(this.day=i)}],M:[n,o("month")],MM:[r,o("month")],MMM:[i,function(e){var t=a("months"),r=(a("monthsShort")||t.map((function(e){return e.substr(0,3)}))).indexOf(e)+1;if(r<1)throw new Error;this.month=r%12||r}],MMMM:[i,function(e){var t=a("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,o("year")],YY:[r,function(e){e=+e,this.year=e+(e>68?1900:2e3)}],YYYY:[/\d{4}/,o("year")],Z:s,ZZ:s},u=function(e,r,n){try{var i=function(e){for(var r=e.match(t),n=r.length,i=0;i<n;i+=1){var o=r[i],s=l[o],a=s&&s[0],u=s&&s[1];r[i]=u?{regex:a,parser:u}:o.replace(/^\[|\]$/g,"")}return function(e){for(var t={},i=0,o=0;i<n;i+=1){var s=r[i];if("string"==typeof s)o+=s.length;else{var a=s.regex,l=s.parser,u=e.substr(o),c=a.exec(u)[0];l.call(t,c),e=e.replace(c,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var r=e.hours;t?r<12&&(e.hours+=12):12===r&&(e.hours=0),delete e.afternoon}}(t),t}}(r)(e),o=i.year,s=i.month,a=i.day,u=i.hours,c=i.minutes,h=i.seconds,d=i.milliseconds,f=i.zone,p=new Date,m=a||(o||s?1:p.getDate()),g=o||p.getFullYear(),v=0;o&&!s||(v=s>0?s-1:p.getMonth());var y=u||0,b=c||0,w=h||0,C=d||0;return f?new Date(Date.UTC(g,v,m,y,b,w,C+60*f.offset*1e3)):n?new Date(Date.UTC(g,v,m,y,b,w,C)):new Date(g,v,m,y,b,w,C)}catch(e){return new Date("")}};return function(t,r,n){var i=r.prototype,o=i.parse;i.parse=function(t){var r=t.date,i=t.utc,s=t.args;this.$u=i;var a=s[1];if("string"==typeof a){var l=!0===s[2],c=!0===s[3],h=l||c,d=s[2];c&&(d=s[2]),l||(e=d?n.Ls[d]:this.$locale()),this.$d=u(r,a,i),this.init(),d&&!0!==d&&(this.$L=this.locale(d).$L),h&&r!==this.format(a)&&(this.$d=new Date(""))}else if(a instanceof Array)for(var f=a.length,p=1;p<=f;p+=1){s[1]=a[p-1];var m=n.apply(this,s);if(m.isValid()){this.$d=m.$d,this.$L=m.$L,this.init();break}p===f&&(this.$d=new Date(""))}else o.call(this,t)}}},"object"==(void 0===n?"undefined":i(n))&&void 0!==r?r.exports=s():"function"==typeof e&&e.amd?e(s):o.dayjs_plugin_customParseFormat=s()},{}],338:[function(t,r,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var o,s;o=void 0,s=function(){return function(e,t,r){var n=(new Date).getTimezoneOffset(),i=t.prototype;r.utc=function(e){return new t({date:e,utc:!0,args:arguments})},i.utc=function(){return r(this.toDate(),{locale:this.$L,utc:!0})},i.local=function(){return r(this.toDate(),{locale:this.$L,utc:!1})};var o=i.parse;i.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),o.call(this,e)};var s=i.init;i.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else s.call(this)};var a=i.utcOffset;i.utcOffset=function(e,t){var r=this.$utils().u;if(r(e))return this.$u?0:r(this.$offset)?a.call(this):this.$offset;var i=Math.abs(e)<=16?60*e:e,o=this;return t?(o.$offset=i,o.$u=0===e,o):(0!==e?(o=this.local().add(i+n,"minute")).$offset=i:o=this.utc(),o)};var l=i.format;i.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,t)},i.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+n;return this.$d.valueOf()-6e4*e},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var u=i.toDate;i.toDate=function(e){return"s"===e&&this.$offset?r(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():u.call(this)};var c=i.diff;i.diff=function(e,t,n){var i=this.local(),o=r(e).local();return c.call(i,o,t,n)}}},"object"==(void 0===n?"undefined":i(n))&&void 0!==r?r.exports=s():"function"==typeof e&&e.amd?e(s):o.dayjs_plugin_utc=s()},{}],339:[function(e,t,r){"use strict";r.utils=e("./des/utils"),r.Cipher=e("./des/cipher"),r.DES=e("./des/des"),r.CBC=e("./des/cbc"),r.EDE=e("./des/ede")},{"./des/cbc":340,"./des/cipher":341,"./des/des":342,"./des/ede":343,"./des/utils":344}],340:[function(e,t,r){"use strict";var n=e("minimalistic-assert"),i=e("inherits"),o={};function s(e){n.equal(e.length,8,"Invalid IV length"),this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}function a(e){function t(t){e.call(this,t),this._cbcInit()}i(t,e);for(var r=Object.keys(o),n=0;n<r.length;n++){var s=r[n];t.prototype[s]=o[s]}return t.create=function(e){return new t(e)},t}r.instantiate=a,o._cbcInit=function(){var e=new s(this.options.iv);this._cbcState=e},o._update=function(e,t,r,n){var i=this._cbcState,o=this.constructor.super_.prototype,s=i.iv;if("encrypt"===this.type){for(var a=0;a<this.blockSize;a++)s[a]^=e[t+a];for(o._update.call(this,s,0,r,n),a=0;a<this.blockSize;a++)s[a]=r[n+a]}else{for(o._update.call(this,e,t,r,n),a=0;a<this.blockSize;a++)r[n+a]^=s[a];for(a=0;a<this.blockSize;a++)s[a]=e[t+a]}}},{inherits:387,"minimalistic-assert":437}],341:[function(e,t,r){"use strict";var n=e("minimalistic-assert");function i(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}t.exports=i,i.prototype._init=function(){},i.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},i.prototype._buffer=function(e,t){for(var r=Math.min(this.buffer.length-this.bufferOff,e.length-t),n=0;n<r;n++)this.buffer[this.bufferOff+n]=e[t+n];return this.bufferOff+=r,r},i.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},i.prototype._updateEncrypt=function(e){var t=0,r=0,n=(this.bufferOff+e.length)/this.blockSize|0,i=new Array(n*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(r+=this._flushBuffer(i,r)));for(var o=e.length-(e.length-t)%this.blockSize;t<o;t+=this.blockSize)this._update(e,t,i,r),r+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return i},i.prototype._updateDecrypt=function(e){for(var t=0,r=0,n=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,i=new Array(n*this.blockSize);n>0;n--)t+=this._buffer(e,t),r+=this._flushBuffer(i,r);return t+=this._buffer(e,t),i},i.prototype.final=function(e){var t,r;return e&&(t=this.update(e)),r="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(r):r},i.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},i.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e},i.prototype._unpad=function(e){return e},i.prototype._finalDecrypt=function(){n.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}},{"minimalistic-assert":437}],342:[function(e,t,r){"use strict";var n=e("minimalistic-assert"),i=e("inherits"),o=e("./utils"),s=e("./cipher");function a(){this.tmp=new Array(2),this.keys=null}function l(e){s.call(this,e);var t=new a;this._desState=t,this.deriveKeys(t,e.key)}i(l,s),t.exports=l,l.create=function(e){return new l(e)};var u=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];l.prototype.deriveKeys=function(e,t){e.keys=new Array(32),n.equal(t.length,this.blockSize,"Invalid key length");var r=o.readUInt32BE(t,0),i=o.readUInt32BE(t,4);o.pc1(r,i,e.tmp,0),r=e.tmp[0],i=e.tmp[1];for(var s=0;s<e.keys.length;s+=2){var a=u[s>>>1];r=o.r28shl(r,a),i=o.r28shl(i,a),o.pc2(r,i,e.keys,s)}},l.prototype._update=function(e,t,r,n){var i=this._desState,s=o.readUInt32BE(e,t),a=o.readUInt32BE(e,t+4);o.ip(s,a,i.tmp,0),s=i.tmp[0],a=i.tmp[1],"encrypt"===this.type?this._encrypt(i,s,a,i.tmp,0):this._decrypt(i,s,a,i.tmp,0),s=i.tmp[0],a=i.tmp[1],o.writeUInt32BE(r,s,n),o.writeUInt32BE(r,a,n+4)},l.prototype._pad=function(e,t){for(var r=e.length-t,n=t;n<e.length;n++)e[n]=r;return!0},l.prototype._unpad=function(e){for(var t=e[e.length-1],r=e.length-t;r<e.length;r++)n.equal(e[r],t);return e.slice(0,e.length-t)},l.prototype._encrypt=function(e,t,r,n,i){for(var s=t,a=r,l=0;l<e.keys.length;l+=2){var u=e.keys[l],c=e.keys[l+1];o.expand(a,e.tmp,0),u^=e.tmp[0],c^=e.tmp[1];var h=o.substitute(u,c),d=a;a=(s^o.permute(h))>>>0,s=d}o.rip(a,s,n,i)},l.prototype._decrypt=function(e,t,r,n,i){for(var s=r,a=t,l=e.keys.length-2;l>=0;l-=2){var u=e.keys[l],c=e.keys[l+1];o.expand(s,e.tmp,0),u^=e.tmp[0],c^=e.tmp[1];var h=o.substitute(u,c),d=s;s=(a^o.permute(h))>>>0,a=d}o.rip(s,a,n,i)}},{"./cipher":341,"./utils":344,inherits:387,"minimalistic-assert":437}],343:[function(e,t,r){"use strict";var n=e("minimalistic-assert"),i=e("inherits"),o=e("./cipher"),s=e("./des");function a(e,t){n.equal(t.length,24,"Invalid key length");var r=t.slice(0,8),i=t.slice(8,16),o=t.slice(16,24);this.ciphers="encrypt"===e?[s.create({type:"encrypt",key:r}),s.create({type:"decrypt",key:i}),s.create({type:"encrypt",key:o})]:[s.create({type:"decrypt",key:o}),s.create({type:"encrypt",key:i}),s.create({type:"decrypt",key:r})]}function l(e){o.call(this,e);var t=new a(this.type,this.options.key);this._edeState=t}i(l,o),t.exports=l,l.create=function(e){return new l(e)},l.prototype._update=function(e,t,r,n){var i=this._edeState;i.ciphers[0]._update(e,t,r,n),i.ciphers[1]._update(r,n,r,n),i.ciphers[2]._update(r,n,r,n)},l.prototype._pad=s.prototype._pad,l.prototype._unpad=s.prototype._unpad},{"./cipher":341,"./des":342,inherits:387,"minimalistic-assert":437}],344:[function(e,t,r){"use strict";r.readUInt32BE=function(e,t){return(e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])>>>0},r.writeUInt32BE=function(e,t,r){e[0+r]=t>>>24,e[1+r]=t>>>16&255,e[2+r]=t>>>8&255,e[3+r]=255&t},r.ip=function(e,t,r,n){for(var i=0,o=0,s=6;s>=0;s-=2){for(var a=0;a<=24;a+=8)i<<=1,i|=t>>>a+s&1;for(a=0;a<=24;a+=8)i<<=1,i|=e>>>a+s&1}for(s=6;s>=0;s-=2){for(a=1;a<=25;a+=8)o<<=1,o|=t>>>a+s&1;for(a=1;a<=25;a+=8)o<<=1,o|=e>>>a+s&1}r[n+0]=i>>>0,r[n+1]=o>>>0},r.rip=function(e,t,r,n){for(var i=0,o=0,s=0;s<4;s++)for(var a=24;a>=0;a-=8)i<<=1,i|=t>>>a+s&1,i<<=1,i|=e>>>a+s&1;for(s=4;s<8;s++)for(a=24;a>=0;a-=8)o<<=1,o|=t>>>a+s&1,o<<=1,o|=e>>>a+s&1;r[n+0]=i>>>0,r[n+1]=o>>>0},r.pc1=function(e,t,r,n){for(var i=0,o=0,s=7;s>=5;s--){for(var a=0;a<=24;a+=8)i<<=1,i|=t>>a+s&1;for(a=0;a<=24;a+=8)i<<=1,i|=e>>a+s&1}for(a=0;a<=24;a+=8)i<<=1,i|=t>>a+s&1;for(s=1;s<=3;s++){for(a=0;a<=24;a+=8)o<<=1,o|=t>>a+s&1;for(a=0;a<=24;a+=8)o<<=1,o|=e>>a+s&1}for(a=0;a<=24;a+=8)o<<=1,o|=e>>a+s&1;r[n+0]=i>>>0,r[n+1]=o>>>0},r.r28shl=function(e,t){return e<<t&268435455|e>>>28-t};var n=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];r.pc2=function(e,t,r,i){for(var o=0,s=0,a=n.length>>>1,l=0;l<a;l++)o<<=1,o|=e>>>n[l]&1;for(l=a;l<n.length;l++)s<<=1,s|=t>>>n[l]&1;r[i+0]=o>>>0,r[i+1]=s>>>0},r.expand=function(e,t,r){var n=0,i=0;n=(1&e)<<5|e>>>27;for(var o=23;o>=15;o-=4)n<<=6,n|=e>>>o&63;for(o=11;o>=3;o-=4)i|=e>>>o&63,i<<=6;i|=(31&e)<<1|e>>>31,t[r+0]=n>>>0,t[r+1]=i>>>0};var i=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];r.substitute=function(e,t){for(var r=0,n=0;n<4;n++)r<<=4,r|=i[64*n+(e>>>18-6*n&63)];for(n=0;n<4;n++)r<<=4,r|=i[256+64*n+(t>>>18-6*n&63)];return r>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];r.permute=function(e){for(var t=0,r=0;r<o.length;r++)t<<=1,t|=e>>>o[r]&1;return t>>>0},r.padSplit=function(e,t,r){for(var n=e.toString(2);n.length<t;)n="0"+n;for(var i=[],o=0;o<t;o+=r)i.push(n.slice(o,o+r));return i.join(" ")}},{}],345:[function(e,t,r){(function(t){"use strict";var n=e("./lib/generatePrime"),i=e("./lib/primes.json"),o=e("./lib/dh");function s(e){var r=new t(i[e].prime,"hex"),n=new t(i[e].gen,"hex");return new o(r,n)}var a={binary:!0,hex:!0,base64:!0};function l(e,r,i,s){return t.isBuffer(r)||void 0===a[r]?l(e,"binary",r,i):(r=r||"binary",s=s||"binary",i=i||new t([2]),t.isBuffer(i)||(i=new t(i,s)),"number"==typeof e?new o(n(e,i),i,!0):(t.isBuffer(e)||(e=new t(e,r)),new o(e,i,!0)))}r.DiffieHellmanGroup=r.createDiffieHellmanGroup=r.getDiffieHellman=s,r.createDiffieHellman=r.DiffieHellman=l}).call(this,e("buffer").Buffer)},{"./lib/dh":346,"./lib/generatePrime":347,"./lib/primes.json":348,buffer:216}],346:[function(e,t,r){(function(r){"use strict";var n=e("bn.js"),i=new(e("miller-rabin")),o=new n(24),s=new n(11),a=new n(10),l=new n(3),u=new n(7),c=e("./generatePrime"),h=e("randombytes");function d(e,t){return t=t||"utf8",r.isBuffer(e)||(e=new r(e,t)),this._pub=new n(e),this}function f(e,t){return t=t||"utf8",r.isBuffer(e)||(e=new r(e,t)),this._priv=new n(e),this}t.exports=g;var p={};function m(e,t){var r=t.toString("hex"),n=[r,e.toString(16)].join("_");if(n in p)return p[n];var h,d=0;if(e.isEven()||!c.simpleSieve||!c.fermatTest(e)||!i.test(e))return d+=1,d+="02"===r||"05"===r?8:4,p[n]=d,d;switch(i.test(e.shrn(1))||(d+=2),r){case"02":e.mod(o).cmp(s)&&(d+=8);break;case"05":(h=e.mod(a)).cmp(l)&&h.cmp(u)&&(d+=8);break;default:d+=4}return p[n]=d,d}function g(e,t,r){this.setGenerator(t),this.__prime=new n(e),this._prime=n.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,r?(this.setPublicKey=d,this.setPrivateKey=f):this._primeCode=8}function v(e,t){var n=new r(e.toArray());return t?n.toString(t):n}Object.defineProperty(g.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=m(this.__prime,this.__gen)),this._primeCode}}),g.prototype.generateKeys=function(){return this._priv||(this._priv=new n(h(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},g.prototype.computeSecret=function(e){var t=(e=(e=new n(e)).toRed(this._prime)).redPow(this._priv).fromRed(),i=new r(t.toArray()),o=this.getPrime();if(i.length<o.length){var s=new r(o.length-i.length);s.fill(0),i=r.concat([s,i])}return i},g.prototype.getPublicKey=function(e){return v(this._pub,e)},g.prototype.getPrivateKey=function(e){return v(this._priv,e)},g.prototype.getPrime=function(e){return v(this.__prime,e)},g.prototype.getGenerator=function(e){return v(this._gen,e)},g.prototype.setGenerator=function(e,t){return t=t||"utf8",r.isBuffer(e)||(e=new r(e,t)),this.__gen=e,this._gen=new n(e),this}}).call(this,e("buffer").Buffer)},{"./generatePrime":347,"bn.js":349,buffer:216,"miller-rabin":435,randombytes:475}],347:[function(e,t,r){"use strict";var n=e("randombytes");t.exports=y,y.simpleSieve=g,y.fermatTest=v;var i=e("bn.js"),o=new i(24),s=new(e("miller-rabin")),a=new i(1),l=new i(2),u=new i(5),c=(new i(16),new i(8),new i(10)),h=new i(3),d=(new i(7),new i(11)),f=new i(4),p=(new i(12),null);function m(){if(null!==p)return p;var e=1048576,t=[];t[0]=2;for(var r=1,n=3;n<e;n+=2){for(var i=Math.ceil(Math.sqrt(n)),o=0;o<r&&t[o]<=i&&n%t[o]!=0;o++);r!==o&&t[o]<=i||(t[r++]=n)}return p=t,t}function g(e){for(var t=m(),r=0;r<t.length;r++)if(0===e.modn(t[r]))return 0===e.cmpn(t[r]);return!0}function v(e){var t=i.mont(e);return 0===l.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function y(e,t){if(e<16)return new i(2===t||5===t?[140,123]:[140,39]);var r,p;for(t=new i(t);;){for(r=new i(n(Math.ceil(e/8)));r.bitLength()>e;)r.ishrn(1);if(r.isEven()&&r.iadd(a),r.testn(1)||r.iadd(l),t.cmp(l)){if(!t.cmp(u))for(;r.mod(c).cmp(h);)r.iadd(f)}else for(;r.mod(o).cmp(d);)r.iadd(f);if(g(p=r.shrn(1))&&g(r)&&v(p)&&v(r)&&s.test(p)&&s.test(r))return r}}},{"bn.js":349,"miller-rabin":435,randombytes:475}],348:[function(e,t,r){t.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],349:[function(e,t,r){arguments[4][181][0].apply(r,arguments)},{buffer:185,dup:181}],350:[function(e,t,r){"use strict";var n=r;n.version=e("../package.json").version,n.utils=e("./elliptic/utils"),n.rand=e("brorand"),n.curve=e("./elliptic/curve"),n.curves=e("./elliptic/curves"),n.ec=e("./elliptic/ec"),n.eddsa=e("./elliptic/eddsa")},{"../package.json":366,"./elliptic/curve":353,"./elliptic/curves":356,"./elliptic/ec":357,"./elliptic/eddsa":360,"./elliptic/utils":364,brorand:184}],351:[function(e,t,r){"use strict";var n=e("bn.js"),i=e("../utils"),o=i.getNAF,s=i.getJSF,a=i.assert;function l(e,t){this.type=e,this.p=new n(t.p,16),this.red=t.prime?n.red(t.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=t.n&&new n(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function u(e,t){this.curve=e,this.type=t,this.precomputed=null}t.exports=l,l.prototype.point=function(){throw new Error("Not implemented")},l.prototype.validate=function(){throw new Error("Not implemented")},l.prototype._fixedNafMul=function(e,t){a(e.precomputed);var r=e._getDoubles(),n=o(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;for(var s=[],l=0;l<n.length;l+=r.step){var u=0;for(t=l+r.step-1;t>=l;t--)u=(u<<1)+n[t];s.push(u)}for(var c=this.jpoint(null,null,null),h=this.jpoint(null,null,null),d=i;d>0;d--){for(l=0;l<s.length;l++)(u=s[l])===d?h=h.mixedAdd(r.points[l]):u===-d&&(h=h.mixedAdd(r.points[l].neg()));c=c.add(h)}return c.toP()},l.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,s=o(t,r,this._bitLength),l=this.jpoint(null,null,null),u=s.length-1;u>=0;u--){for(t=0;u>=0&&0===s[u];u--)t++;if(u>=0&&t++,l=l.dblp(t),u<0)break;var c=s[u];a(0!==c),l="affine"===e.type?c>0?l.mixedAdd(i[c-1>>1]):l.mixedAdd(i[-c-1>>1].neg()):c>0?l.add(i[c-1>>1]):l.add(i[-c-1>>1].neg())}return"affine"===e.type?l.toP():l},l.prototype._wnafMulAdd=function(e,t,r,n,i){for(var a=this._wnafT1,l=this._wnafT2,u=this._wnafT3,c=0,h=0;h<n;h++){var d=(k=t[h])._getNAFPoints(e);a[h]=d.wnd,l[h]=d.points}for(h=n-1;h>=1;h-=2){var f=h-1,p=h;if(1===a[f]&&1===a[p]){var m=[t[f],null,null,t[p]];0===t[f].y.cmp(t[p].y)?(m[1]=t[f].add(t[p]),m[2]=t[f].toJ().mixedAdd(t[p].neg())):0===t[f].y.cmp(t[p].y.redNeg())?(m[1]=t[f].toJ().mixedAdd(t[p]),m[2]=t[f].add(t[p].neg())):(m[1]=t[f].toJ().mixedAdd(t[p]),m[2]=t[f].toJ().mixedAdd(t[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],v=s(r[f],r[p]);c=Math.max(v[0].length,c),u[f]=new Array(c),u[p]=new Array(c);for(var y=0;y<c;y++){var b=0|v[0][y],w=0|v[1][y];u[f][y]=g[3*(b+1)+(w+1)],u[p][y]=0,l[f]=m}}else u[f]=o(r[f],a[f],this._bitLength),u[p]=o(r[p],a[p],this._bitLength),c=Math.max(u[f].length,c),c=Math.max(u[p].length,c)}var C=this.jpoint(null,null,null),_=this._wnafT4;for(h=c;h>=0;h--){for(var S=0;h>=0;){var x=!0;for(y=0;y<n;y++)_[y]=0|u[y][h],0!==_[y]&&(x=!1);if(!x)break;S++,h--}if(h>=0&&S++,C=C.dblp(S),h<0)break;for(y=0;y<n;y++){var k,T=_[y];0!==T&&(T>0?k=l[y][T-1>>1]:T<0&&(k=l[y][-T-1>>1].neg()),C="affine"===k.type?C.mixedAdd(k):C.add(k))}}for(h=0;h<n;h++)l[h]=null;return i?C:C.toP()},l.BasePoint=u,u.prototype.eq=function(){throw new Error("Not implemented")},u.prototype.validate=function(){return this.curve.validate(this)},l.prototype.decodePoint=function(e,t){e=i.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?a(e[e.length-1]%2==0):7===e[0]&&a(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},u.prototype.encodeCompressed=function(e){return this.encode(e,!0)},u.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},u.prototype.encode=function(e,t){return i.encode(this._encode(t),e)},u.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},u.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},u.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var o=0;o<e;o++)n=n.dbl();r.push(n)}return{step:e,points:r}},u.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},u.prototype._getBeta=function(){return null},u.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}},{"../utils":364,"bn.js":365}],352:[function(e,t,r){"use strict";var n=e("../utils"),i=e("bn.js"),o=e("inherits"),s=e("./base"),a=n.assert;function l(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,s.call(this,"edwards",e),this.a=new i(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function u(e,t,r,n,o){s.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(t,16),this.y=new i(r,16),this.z=n?new i(n,16):this.curve.one,this.t=o&&new i(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(l,s),t.exports=l,l.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},l.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},l.prototype.jpoint=function(e,t,r,n){return this.point(e,t,r,n)},l.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=this.c2.redSub(this.a.redMul(r)),o=this.one.redSub(this.c2.redMul(this.d).redMul(r)),s=n.redMul(o.redInvm()),a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");var l=a.fromRed().isOdd();return(t&&!l||!t&&l)&&(a=a.redNeg()),this.point(e,a)},l.prototype.pointFromY=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=r.redSub(this.c2),o=r.redMul(this.d).redMul(this.c2).redSub(this.a),s=n.redMul(o.redInvm());if(0===s.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");return a.fromRed().isOdd()!==t&&(a=a.redNeg()),this.point(a,e)},l.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),n=t.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===n.cmp(i)},o(u,s.BasePoint),l.prototype.pointFromJSON=function(e){return u.fromJSON(this,e)},l.prototype.point=function(e,t,r,n){return new u(this,e,t,r,n)},u.fromJSON=function(e,t){return new u(e,t[0],t[1],t[2])},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},u.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),o=n.redAdd(t),s=o.redSub(r),a=n.redSub(t),l=i.redMul(s),u=o.redMul(a),c=i.redMul(a),h=s.redMul(o);return this.curve.point(l,u,h,c)},u.prototype._projDbl=function(){var e,t,r,n=this.x.redAdd(this.y).redSqr(),i=this.x.redSqr(),o=this.y.redSqr();if(this.curve.twisted){var s=(u=this.curve._mulA(i)).redAdd(o);if(this.zOne)e=n.redSub(i).redSub(o).redMul(s.redSub(this.curve.two)),t=s.redMul(u.redSub(o)),r=s.redSqr().redSub(s).redSub(s);else{var a=this.z.redSqr(),l=s.redSub(a).redISub(a);e=n.redSub(i).redISub(o).redMul(l),t=s.redMul(u.redSub(o)),r=s.redMul(l)}}else{var u=i.redAdd(o);a=this.curve._mulC(this.z).redSqr(),l=u.redSub(a).redSub(a),e=this.curve._mulC(n.redISub(u)).redMul(l),t=this.curve._mulC(u).redMul(i.redISub(o)),r=u.redMul(l)}return this.curve.point(e,t,r)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},u.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),o=r.redSub(t),s=i.redSub(n),a=i.redAdd(n),l=r.redAdd(t),u=o.redMul(s),c=a.redMul(l),h=o.redMul(l),d=s.redMul(a);return this.curve.point(u,c,d,h)},u.prototype._projAdd=function(e){var t,r,n=this.z.redMul(e.z),i=n.redSqr(),o=this.x.redMul(e.x),s=this.y.redMul(e.y),a=this.curve.d.redMul(o).redMul(s),l=i.redSub(a),u=i.redAdd(a),c=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(o).redISub(s),h=n.redMul(l).redMul(c);return this.curve.twisted?(t=n.redMul(u).redMul(s.redSub(this.curve._mulA(o))),r=l.redMul(u)):(t=n.redMul(u).redMul(s.redSub(o)),r=this.curve._mulC(l).redMul(u)),this.curve.point(h,t,r)},u.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},u.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},u.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},u.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},u.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},u.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()},u.prototype.getY=function(){return this.normalize(),this.y.fromRed()},u.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},u.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(n),0===this.x.cmp(t))return!0}},u.prototype.toP=u.prototype.normalize,u.prototype.mixedAdd=u.prototype.add},{"../utils":364,"./base":351,"bn.js":365,inherits:387}],353:[function(e,t,r){"use strict";var n=r;n.base=e("./base"),n.short=e("./short"),n.mont=e("./mont"),n.edwards=e("./edwards")},{"./base":351,"./edwards":352,"./mont":354,"./short":355}],354:[function(e,t,r){"use strict";var n=e("bn.js"),i=e("inherits"),o=e("./base"),s=e("../utils");function a(e){o.call(this,"mont",e),this.a=new n(e.a,16).toRed(this.red),this.b=new n(e.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function l(e,t,r){o.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(t,16),this.z=new n(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i(a,o),t.exports=a,a.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),n=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===n.redSqrt().redSqr().cmp(n)},i(l,o.BasePoint),a.prototype.decodePoint=function(e,t){return this.point(s.toArray(e,t),1)},a.prototype.point=function(e,t){return new l(this,e,t)},a.prototype.pointFromJSON=function(e){return l.fromJSON(this,e)},l.prototype.precompute=function(){},l.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},l.fromJSON=function(e,t){return new l(e,t[0],t[1]||e.one)},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},l.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),n=e.redMul(t),i=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},l.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=e.x.redAdd(e.z),o=e.x.redSub(e.z).redMul(r),s=i.redMul(n),a=t.z.redMul(o.redAdd(s).redSqr()),l=t.x.redMul(o.redISub(s).redSqr());return this.curve.point(a,l)},l.prototype.mul=function(e){for(var t=e.clone(),r=this,n=this.curve.point(null,null),i=this,o=[];0!==t.cmpn(0);t.iushrn(1))o.push(t.andln(1));for(var s=o.length-1;s>=0;s--)0===o[s]?(r=r.diffAdd(n,i),n=n.dbl()):(n=r.diffAdd(n,i),r=r.dbl());return n},l.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},l.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":364,"./base":351,"bn.js":365,inherits:387}],355:[function(e,t,r){"use strict";var n=e("../utils"),i=e("bn.js"),o=e("inherits"),s=e("./base"),a=n.assert;function l(e){s.call(this,"short",e),this.a=new i(e.a,16).toRed(this.red),this.b=new i(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function u(e,t,r,n){s.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(t,16),this.y=new i(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function c(e,t,r,n){s.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(t,16),this.y=new i(r,16),this.z=new i(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(l,s),t.exports=l,l.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new i(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new i(e.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(t))?r=o[0]:(r=o[1],a(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map((function(e){return{a:new i(e.a,16),b:new i(e.b,16)}})):this._getEndoBasis(r)}}},l.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:i.mont(e),r=new i(2).toRed(t).redInvm(),n=r.redNeg(),o=new i(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(o).fromRed(),n.redSub(o).fromRed()]},l.prototype._getEndoBasis=function(e){for(var t,r,n,o,s,a,l,u,c,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),d=e,f=this.n.clone(),p=new i(1),m=new i(0),g=new i(0),v=new i(1),y=0;0!==d.cmpn(0);){var b=f.div(d);u=f.sub(b.mul(d)),c=g.sub(b.mul(p));var w=v.sub(b.mul(m));if(!n&&u.cmp(h)<0)t=l.neg(),r=p,n=u.neg(),o=c;else if(n&&2==++y)break;l=u,f=d,d=u,g=p,p=c,v=m,m=w}s=u.neg(),a=c;var C=n.sqr().add(o.sqr());return s.sqr().add(a.sqr()).cmp(C)>=0&&(s=t,a=r),n.negative&&(n=n.neg(),o=o.neg()),s.negative&&(s=s.neg(),a=a.neg()),[{a:n,b:o},{a:s,b:a}]},l.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),s=i.mul(r.a),a=o.mul(n.a),l=i.mul(r.b),u=o.mul(n.b);return{k1:e.sub(s).sub(a),k2:l.add(u).neg()}},l.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var o=n.fromRed().isOdd();return(t&&!o||!t&&o)&&(n=n.redNeg()),this.point(e,n)},l.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},l.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var s=this._endoSplit(t[o]),a=e[o],l=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),l=l.neg(!0)),n[2*o]=a,n[2*o+1]=l,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var u=this._wnafMulAdd(1,n,i,2*o,r),c=0;c<2*o;c++)n[c]=null,i[c]=null;return u},o(u,s.BasePoint),l.prototype.point=function(e,t,r){return new u(this,e,t,r)},l.prototype.pointFromJSON=function(e,t){return u.fromJSON(this,e,t)},u.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},u.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},u.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var o=t[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return this.inf},u.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},u.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},u.prototype.getX=function(){return this.x.fromRed()},u.prototype.getY=function(){return this.y.fromRed()},u.prototype.mul=function(e){return e=new i(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},u.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},u.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},u.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},u.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},u.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(c,s.BasePoint),l.prototype.jpoint=function(e,t,r){return new c(this,e,t,r)},c.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},c.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},c.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(r.redMul(this.z)),a=n.redSub(i),l=o.redSub(s);if(0===a.cmpn(0))return 0!==l.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),c=u.redMul(a),h=n.redMul(u),d=l.redSqr().redIAdd(c).redISub(h).redISub(h),f=l.redMul(h.redISub(d)).redISub(o.redMul(c)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(d,f,p)},c.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),s=r.redSub(n),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=s.redSqr(),u=l.redMul(s),c=r.redMul(l),h=a.redSqr().redIAdd(u).redISub(c).redISub(c),d=a.redMul(c.redISub(h)).redISub(i.redMul(u)),f=this.z.redMul(s);return this.curve.jpoint(h,d,f)},c.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}var n=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,l=a.redSqr().redSqr(),u=s.redAdd(s);for(r=0;r<e;r++){var c=o.redSqr(),h=u.redSqr(),d=h.redSqr(),f=c.redAdd(c).redIAdd(c).redIAdd(n.redMul(l)),p=o.redMul(h),m=f.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),v=f.redMul(g);v=v.redIAdd(v).redISub(d);var y=u.redMul(a);r+1<e&&(l=l.redMul(d)),o=m,a=y,u=v}return this.curve.jpoint(o,u.redMul(i),a)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},c.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n),l=a.redSqr().redISub(s).redISub(s),u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),e=l,t=a.redMul(s.redISub(l)).redISub(u),r=this.y.redAdd(this.y)}else{var c=this.x.redSqr(),h=this.y.redSqr(),d=h.redSqr(),f=this.x.redAdd(h).redSqr().redISub(c).redISub(d);f=f.redIAdd(f);var p=c.redAdd(c).redIAdd(c),m=p.redSqr(),g=d.redIAdd(d);g=(g=g.redIAdd(g)).redIAdd(g),e=m.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},c.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),l=a.redSqr().redISub(s).redISub(s);e=l;var u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),t=a.redMul(s.redISub(l)).redISub(u),r=this.y.redAdd(this.y)}else{var c=this.z.redSqr(),h=this.y.redSqr(),d=this.x.redMul(h),f=this.x.redSub(c).redMul(this.x.redAdd(c));f=f.redAdd(f).redIAdd(f);var p=d.redIAdd(d),m=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(c);var g=h.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=f.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,r)},c.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=t.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),l=t.redAdd(t),u=(l=l.redIAdd(l)).redMul(s),c=a.redSqr().redISub(u.redAdd(u)),h=u.redISub(c),d=s.redSqr();d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=a.redMul(h).redISub(d),p=r.redAdd(r).redMul(n);return this.curve.jpoint(c,f,p)},c.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(n),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),l=n.redIAdd(n);l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var u=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(l),c=t.redMul(u);c=(c=c.redIAdd(c)).redIAdd(c);var h=this.x.redMul(a).redISub(c);h=(h=h.redIAdd(h)).redIAdd(h);var d=this.y.redMul(u.redMul(l.redISub(u)).redISub(s.redMul(a)));d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(h,d,f)},c.prototype.mul=function(e,t){return e=new i(e,t),this.curve._wnafMul(this,e)},c.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},c.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},c.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},{"../utils":364,"./base":351,"bn.js":365,inherits:387}],356:[function(e,t,r){"use strict";var n,i=r,o=e("hash.js"),s=e("./curve"),a=e("./utils").assert;function l(e){"short"===e.type?this.curve=new s.short(e):"edwards"===e.type?this.curve=new s.edwards(e):this.curve=new s.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function u(e,t){Object.defineProperty(i,e,{configurable:!0,enumerable:!0,get:function(){var r=new l(t);return Object.defineProperty(i,e,{configurable:!0,enumerable:!0,value:r}),r}})}i.PresetCurve=l,u("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),u("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),u("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),u("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),u("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),u("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),u("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{n=e("./precomputed/secp256k1")}catch(e){n=void 0}u("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",n]})},{"./curve":353,"./precomputed/secp256k1":363,"./utils":364,"hash.js":372}],357:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var i=e("bn.js"),o=e("hmac-drbg"),s=e("../utils"),a=e("../curves"),l=e("brorand"),u=s.assert,c=e("./key"),h=e("./signature");function d(e){if(!(this instanceof d))return new d(e);"string"==typeof e&&(u(a.hasOwnProperty(e),"Unknown curve "+e),e=a[e]),e instanceof a.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}t.exports=d,d.prototype.keyPair=function(e){return new c(this,e)},d.prototype.keyFromPrivate=function(e,t){return c.fromPrivate(this,e,t)},d.prototype.keyFromPublic=function(e,t){return c.fromPublic(this,e,t)},d.prototype.genKeyPair=function(e){e||(e={});for(var t=new o({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||l(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new i(2));;){var s=new i(t.generate(r));if(!(s.cmp(n)>0))return s.iaddn(1),this.keyFromPrivate(s)}},d.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},d.prototype.sign=function(e,t,r,s){"object"===n(r)&&(s=r,r=null),s||(s={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new i(e,16));for(var a=this.n.byteLength(),l=t.getPrivate().toArray("be",a),u=e.toArray("be",a),c=new o({hash:this.hash,entropy:l,nonce:u,pers:s.pers,persEnc:s.persEnc||"utf8"}),d=this.n.sub(new i(1)),f=0;;f++){var p=s.k?s.k(f):new i(c.generate(this.n.byteLength()));if(!((p=this._truncateToN(p,!0)).cmpn(1)<=0||p.cmp(d)>=0)){var m=this.g.mul(p);if(!m.isInfinity()){var g=m.getX(),v=g.umod(this.n);if(0!==v.cmpn(0)){var y=p.invm(this.n).mul(v.mul(t.getPrivate()).iadd(e));if(0!==(y=y.umod(this.n)).cmpn(0)){var b=(m.getY().isOdd()?1:0)|(0!==g.cmp(v)?2:0);return s.canonical&&y.cmp(this.nh)>0&&(y=this.n.sub(y),b^=1),new h({r:v,s:y,recoveryParam:b})}}}}}},d.prototype.verify=function(e,t,r,n){e=this._truncateToN(new i(e,16)),r=this.keyFromPublic(r,n);var o=(t=new h(t,"hex")).r,s=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a,l=s.invm(this.n),u=l.mul(e).umod(this.n),c=l.mul(o).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(u,r.getPublic(),c)).isInfinity()&&a.eqXToP(o):!(a=this.g.mulAdd(u,r.getPublic(),c)).isInfinity()&&0===a.getX().umod(this.n).cmp(o)},d.prototype.recoverPubKey=function(e,t,r,n){u((3&r)===r,"The recovery param is more than two bits"),t=new h(t,n);var o=this.n,s=new i(e),a=t.r,l=t.s,c=1&r,d=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&d)throw new Error("Unable to find sencond key candinate");a=d?this.curve.pointFromX(a.add(this.curve.n),c):this.curve.pointFromX(a,c);var f=t.r.invm(o),p=o.sub(s).mul(f).umod(o),m=l.mul(f).umod(o);return this.g.mulAdd(p,a,m)},d.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new h(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch(e){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")}},{"../curves":356,"../utils":364,"./key":358,"./signature":359,"bn.js":365,brorand:184,"hmac-drbg":384}],358:[function(e,t,r){"use strict";var n=e("bn.js"),i=e("../utils").assert;function o(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}t.exports=o,o.fromPublic=function(e,t,r){return t instanceof o?t:new o(e,{pub:t,pubEnc:r})},o.fromPrivate=function(e,t,r){return t instanceof o?t:new o(e,{priv:t,privEnc:r})},o.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},o.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(e,t){this.priv=new n(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?i(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||i(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},o.prototype.derive=function(e){return e.mul(this.priv).getX()},o.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},o.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":364,"bn.js":365}],359:[function(e,t,r){"use strict";var n=e("bn.js"),i=e("../utils"),o=i.assert;function s(e,t){if(e instanceof s)return e;this._importDER(e,t)||(o(e.r&&e.s,"Signature without r or s"),this.r=new n(e.r,16),this.s=new n(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function a(){this.place=0}function l(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,o=0,s=t.place;o<n;o++,s++)i<<=8,i|=e[s],i>>>=0;return!(i<=127)&&(t.place=s,i)}function u(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function c(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}t.exports=s,s.prototype._importDER=function(e,t){e=i.toArray(e,t);var r=new a;if(48!==e[r.place++])return!1;var o=l(e,r);if(!1===o)return!1;if(o+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var s=l(e,r);if(!1===s)return!1;var u=e.slice(r.place,s+r.place);if(r.place+=s,2!==e[r.place++])return!1;var c=l(e,r);if(!1===c)return!1;if(e.length!==c+r.place)return!1;var h=e.slice(r.place,c+r.place);if(0===u[0]){if(!(128&u[1]))return!1;u=u.slice(1)}if(0===h[0]){if(!(128&h[1]))return!1;h=h.slice(1)}return this.r=new n(u),this.s=new n(h),this.recoveryParam=null,!0},s.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=u(t),r=u(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];c(n,t.length),(n=n.concat(t)).push(2),c(n,r.length);var o=n.concat(r),s=[48];return c(s,o.length),s=s.concat(o),i.encode(s,e)}},{"../utils":364,"bn.js":365}],360:[function(e,t,r){"use strict";var n=e("hash.js"),i=e("../curves"),o=e("../utils"),s=o.assert,a=o.parseBytes,l=e("./key"),u=e("./signature");function c(e){if(s("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof c))return new c(e);e=i[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=n.sha512}t.exports=c,c.prototype.sign=function(e,t){e=a(e);var r=this.keyFromSecret(t),n=this.hashInt(r.messagePrefix(),e),i=this.g.mul(n),o=this.encodePoint(i),s=this.hashInt(o,r.pubBytes(),e).mul(r.priv()),l=n.add(s).umod(this.curve.n);return this.makeSignature({R:i,S:l,Rencoded:o})},c.prototype.verify=function(e,t,r){e=a(e),t=this.makeSignature(t);var n=this.keyFromPublic(r),i=this.hashInt(t.Rencoded(),n.pubBytes(),e),o=this.g.mul(t.S());return t.R().add(n.pub().mul(i)).eq(o)},c.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return o.intFromLE(e.digest()).umod(this.curve.n)},c.prototype.keyFromPublic=function(e){return l.fromPublic(this,e)},c.prototype.keyFromSecret=function(e){return l.fromSecret(this,e)},c.prototype.makeSignature=function(e){return e instanceof u?e:new u(this,e)},c.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},c.prototype.decodePoint=function(e){var t=(e=o.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),n=0!=(128&e[t]),i=o.intFromLE(r);return this.curve.pointFromY(i,n)},c.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},c.prototype.decodeInt=function(e){return o.intFromLE(e)},c.prototype.isPoint=function(e){return e instanceof this.pointClass}},{"../curves":356,"../utils":364,"./key":361,"./signature":362,"hash.js":372}],361:[function(e,t,r){"use strict";var n=e("../utils"),i=n.assert,o=n.parseBytes,s=n.cachedProperty;function a(e,t){this.eddsa=e,this._secret=o(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=o(t.pub)}a.fromPublic=function(e,t){return t instanceof a?t:new a(e,{pub:t})},a.fromSecret=function(e,t){return t instanceof a?t:new a(e,{secret:t})},a.prototype.secret=function(){return this._secret},s(a,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),s(a,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),s(a,"privBytes",(function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,n=t.slice(0,e.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n})),s(a,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),s(a,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),s(a,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),a.prototype.sign=function(e){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},a.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},a.prototype.getSecret=function(e){return i(this._secret,"KeyPair is public only"),n.encode(this.secret(),e)},a.prototype.getPublic=function(e){return n.encode(this.pubBytes(),e)},t.exports=a},{"../utils":364}],362:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var i=e("bn.js"),o=e("../utils"),s=o.assert,a=o.cachedProperty,l=o.parseBytes;function u(e,t){this.eddsa=e,"object"!==n(t)&&(t=l(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),s(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof i&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}a(u,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),a(u,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),a(u,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),a(u,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),u.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},u.prototype.toHex=function(){return o.encode(this.toBytes(),"hex").toUpperCase()},t.exports=u},{"../utils":364,"bn.js":365}],363:[function(e,t,r){"use strict";t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],364:[function(e,t,r){"use strict";var n=r,i=e("bn.js"),o=e("minimalistic-assert"),s=e("minimalistic-crypto-utils");function a(e,t,r){var n=new Array(Math.max(e.bitLength(),r)+1);n.fill(0);for(var i=1<<t+1,o=e.clone(),s=0;s<n.length;s++){var a,l=o.andln(i-1);o.isOdd()?(a=l>(i>>1)-1?(i>>1)-l:l,o.isubn(a)):a=0,n[s]=a,o.iushrn(1)}return n}function l(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n=0,i=0;e.cmpn(-n)>0||t.cmpn(-i)>0;){var o,s,a,l=e.andln(3)+n&3,u=t.andln(3)+i&3;3===l&&(l=-1),3===u&&(u=-1),o=0==(1&l)?0:3!=(a=e.andln(7)+n&7)&&5!==a||2!==u?l:-l,r[0].push(o),s=0==(1&u)?0:3!=(a=t.andln(7)+i&7)&&5!==a||2!==l?u:-u,r[1].push(s),2*n===o+1&&(n=1-n),2*i===s+1&&(i=1-i),e.iushrn(1),t.iushrn(1)}return r}function u(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}}function c(e){return"string"==typeof e?n.toArray(e,"hex"):e}function h(e){return new i(e,"hex","le")}n.assert=o,n.toArray=s.toArray,n.zero2=s.zero2,n.toHex=s.toHex,n.encode=s.encode,n.getNAF=a,n.getJSF=l,n.cachedProperty=u,n.parseBytes=c,n.intFromLE=h},{"bn.js":365,"minimalistic-assert":437,"minimalistic-crypto-utils":438}],365:[function(e,t,r){arguments[4][181][0].apply(r,arguments)},{buffer:185,dup:181}],366:[function(e,t,r){t.exports={_from:"elliptic@^6.5.3",_id:"elliptic@6.5.3",_inBundle:!1,_integrity:"sha512-IMqzv5wNQf+E6aHeIqATs0tOLeOTwj1QKbRcS3jBbYkl5oLAserA8yJTT7/VyHUYG91PRmPyeQDObKLPpeS4dw==",_location:"/elliptic",_phantomChildren:{},_requested:{type:"range",registry:!0,raw:"elliptic@^6.5.3",name:"elliptic",escapedName:"elliptic",rawSpec:"^6.5.3",saveSpec:null,fetchSpec:"^6.5.3"},_requiredBy:["/browserify-sign","/create-ecdh"],_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-6.5.3.tgz",_shasum:"cb59eb2efdaf73a0bd78ccd7015a62ad6e0f93d6",_spec:"elliptic@^6.5.3",_where:"/mnt/d/dev/git/exceljs/node_modules/browserify-sign",author:{name:"Fedor Indutny",email:"fedor@indutny.com"},bugs:{url:"https://github.com/indutny/elliptic/issues"},bundleDependencies:!1,dependencies:{"bn.js":"^4.4.0",brorand:"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0",inherits:"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"},deprecated:!1,description:"EC cryptography",devDependencies:{brfs:"^1.4.3",coveralls:"^3.0.8",grunt:"^1.0.4","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.2",jscs:"^3.0.7",jshint:"^2.10.3",mocha:"^6.2.2"},files:["lib"],homepage:"https://github.com/indutny/elliptic",keywords:["EC","Elliptic","curve","Cryptography"],license:"MIT",main:"lib/elliptic.js",name:"elliptic",repository:{type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},scripts:{jscs:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",jshint:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",lint:"npm run jscs && npm run jshint",test:"npm run lint && npm run unit",unit:"istanbul test _mocha --reporter=spec test/index.js",version:"grunt dist && git add dist/"},version:"6.5.3"}},{}],367:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var i=Object.create||k,o=Object.keys||T,s=Function.prototype.bind||R;function a(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=i(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0;var l,u=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),l=0===c.x}catch(e){l=!1}function h(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function d(e,t,r){if(t)e.call(r);else for(var n=e.length,i=S(e,n),o=0;o<n;++o)i[o].call(r)}function f(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,o=S(e,i),s=0;s<i;++s)o[s].call(r,n)}function p(e,t,r,n,i){if(t)e.call(r,n,i);else for(var o=e.length,s=S(e,o),a=0;a<o;++a)s[a].call(r,n,i)}function m(e,t,r,n,i,o){if(t)e.call(r,n,i,o);else for(var s=e.length,a=S(e,s),l=0;l<s;++l)a[l].call(r,n,i,o)}function g(e,t,r,n){if(t)e.apply(r,n);else for(var i=e.length,o=S(e,i),s=0;s<i;++s)o[s].apply(r,n)}function v(e,t,r,o){var s,a,l;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((a=e._events)?(a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),l=a[t]):(a=e._events=i(null),e._eventsCount=0),l){if("function"==typeof l?l=a[t]=o?[r,l]:[l,r]:o?l.unshift(r):l.push(r),!l.warned&&(s=h(e))&&s>0&&l.length>s){l.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+l.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=l.length,"object"===("undefined"==typeof console?"undefined":n(console))&&console.warn}}else l=a[t]=r,++e._eventsCount;return e}function y(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function b(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=s.call(y,n);return i.listener=r,n.wrapFn=i,i}function w(e,t,r){var n=e._events;if(!n)return[];var i=n[t];return i?"function"==typeof i?r?[i.listener||i]:[i]:r?x(i):S(i,i.length):[]}function C(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function _(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}function S(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function x(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function k(e){var t=function(){};return t.prototype=e,new t}function T(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return r}function R(e){var t=this;return function(){return t.apply(e,arguments)}}l?Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');u=e}}):a.defaultMaxListeners=u,a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return h(this)},a.prototype.emit=function(e){var t,r,n,i,o,s,a="error"===e;if(s=this._events)a=a&&null==s.error;else if(!a)return!1;if(a){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var l=new Error('Unhandled "error" event. ('+t+")");throw l.context=t,l}if(!(r=s[e]))return!1;var u="function"==typeof r;switch(n=arguments.length){case 1:d(r,u,this);break;case 2:f(r,u,this,arguments[1]);break;case 3:p(r,u,this,arguments[1],arguments[2]);break;case 4:m(r,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),o=1;o<n;o++)i[o-1]=arguments[o];g(r,u,this,i)}return!0},a.prototype.addListener=function(e,t){return v(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return v(this,e,t,!0)},a.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,b(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,b(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,o,s,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=i(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){a=r[s].listener,o=s;break}if(o<0)return this;0===o?r.shift():_(r,o),1===r.length&&(n[e]=r[0]),n.removeListener&&this.emit("removeListener",e,a||t)}return this},a.prototype.removeAllListeners=function(e){var t,r,n;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=i(null),this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=i(null):delete r[e]),this;if(0===arguments.length){var s,a=o(r);for(n=0;n<a.length;++n)"removeListener"!==(s=a[n])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=i(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return w(this,e,!0)},a.prototype.rawListeners=function(e){return w(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):C.call(e,t)},a.prototype.listenerCount=C,a.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],368:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,i=e("md5.js");function o(e,t,r,o){if(n.isBuffer(e)||(e=n.from(e,"binary")),t&&(n.isBuffer(t)||(t=n.from(t,"binary")),8!==t.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var s=r/8,a=n.alloc(s),l=n.alloc(o||0),u=n.alloc(0);s>0||o>0;){var c=new i;c.update(u),c.update(e),t&&c.update(t),u=c.digest();var h=0;if(s>0){var d=a.length-s;h=Math.min(s,u.length),u.copy(a,d,0,h),s-=h}if(h<u.length&&o>0){var f=l.length-o,p=Math.min(o,u.length-h);u.copy(l,f,h,h+p),o-=p}}return u.fill(0),{key:a,iv:l}}t.exports=o},{"md5.js":434,"safe-buffer":494}],369:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("@fast-csv/format");Object.defineProperty(r,"format",{enumerable:!0,get:function(){return n.format}}),Object.defineProperty(r,"write",{enumerable:!0,get:function(){return n.write}}),Object.defineProperty(r,"writeToStream",{enumerable:!0,get:function(){return n.writeToStream}}),Object.defineProperty(r,"writeToBuffer",{enumerable:!0,get:function(){return n.writeToBuffer}}),Object.defineProperty(r,"writeToString",{enumerable:!0,get:function(){return n.writeToString}}),Object.defineProperty(r,"writeToPath",{enumerable:!0,get:function(){return n.writeToPath}}),Object.defineProperty(r,"CsvFormatterStream",{enumerable:!0,get:function(){return n.CsvFormatterStream}}),Object.defineProperty(r,"FormatterOptions",{enumerable:!0,get:function(){return n.FormatterOptions}});var i=e("@fast-csv/parse");Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return i.parse}}),Object.defineProperty(r,"parseString",{enumerable:!0,get:function(){return i.parseString}}),Object.defineProperty(r,"parseStream",{enumerable:!0,get:function(){return i.parseStream}}),Object.defineProperty(r,"parseFile",{enumerable:!0,get:function(){return i.parseFile}}),Object.defineProperty(r,"ParserOptions",{enumerable:!0,get:function(){return i.ParserOptions}}),Object.defineProperty(r,"CsvParserStream",{enumerable:!0,get:function(){return i.CsvParserStream}})},{"@fast-csv/format":148,"@fast-csv/parse":152}],370:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,i=e("readable-stream").Transform;function o(e,t){if(!n.isBuffer(e)&&"string"!=typeof e)throw new TypeError(t+" must be a string or a buffer")}function s(e){i.call(this),this._block=n.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}e("inherits")(s,i),s.prototype._transform=function(e,t,r){var n=null;try{this.update(e,t)}catch(e){n=e}r(n)},s.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},s.prototype.update=function(e,t){if(o(e,"Data"),this._finalized)throw new Error("Digest already called");n.isBuffer(e)||(e=n.from(e,t));for(var r=this._block,i=0;this._blockOffset+e.length-i>=this._blockSize;){for(var s=this._blockOffset;s<this._blockSize;)r[s++]=e[i++];this._update(),this._blockOffset=0}for(;i<e.length;)r[this._blockOffset++]=e[i++];for(var a=0,l=8*e.length;l>0;++a)this._length[a]+=l,(l=this._length[a]/4294967296|0)>0&&(this._length[a]-=4294967296*l);return this},s.prototype._update=function(){throw new Error("_update is not implemented")},s.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t},s.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=s},{inherits:387,"readable-stream":491,"safe-buffer":371}],371:[function(e,t,r){arguments[4][214][0].apply(r,arguments)},{buffer:216,dup:214}],372:[function(e,t,r){"use strict";var n=r;n.utils=e("./hash/utils"),n.common=e("./hash/common"),n.sha=e("./hash/sha"),n.ripemd=e("./hash/ripemd"),n.hmac=e("./hash/hmac"),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},{"./hash/common":373,"./hash/hmac":374,"./hash/ripemd":375,"./hash/sha":376,"./hash/utils":383}],373:[function(e,t,r){"use strict";var n=e("./utils"),i=e("minimalistic-assert");function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}r.BlockHash=o,o.prototype.update=function(e,t){if(e=n.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=n.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},o.prototype.digest=function(e){return this.update(this._pad()),i(null===this.pending),this._digest(e)},o.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else for(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,o=8;o<this.padLength;o++)n[i++]=0;return n}},{"./utils":383,"minimalistic-assert":437}],374:[function(e,t,r){"use strict";var n=e("./utils"),i=e("minimalistic-assert");function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(t,r))}t.exports=o,o.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),i(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},o.prototype.update=function(e,t){return this.inner.update(e,t),this},o.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},{"./utils":383,"minimalistic-assert":437}],375:[function(e,t,r){"use strict";var n=e("./utils"),i=e("./common"),o=n.rotl32,s=n.sum32,a=n.sum32_3,l=n.sum32_4,u=i.BlockHash;function c(){if(!(this instanceof c))return new c;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function h(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function d(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function f(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}n.inherits(c,u),r.ripemd160=c,c.blockSize=512,c.outSize=160,c.hmacStrength=192,c.padLength=64,c.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],i=this.h[2],u=this.h[3],c=this.h[4],y=r,b=n,w=i,C=u,_=c,S=0;S<80;S++){var x=s(o(l(r,h(S,n,i,u),e[p[S]+t],d(S)),g[S]),c);r=c,c=u,u=o(i,10),i=n,n=x,x=s(o(l(y,h(79-S,b,w,C),e[m[S]+t],f(S)),v[S]),_),y=_,_=C,C=o(w,10),w=b,b=x}x=a(this.h[1],i,C),this.h[1]=a(this.h[2],u,_),this.h[2]=a(this.h[3],c,y),this.h[3]=a(this.h[4],r,b),this.h[4]=a(this.h[0],n,w),this.h[0]=x},c.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":373,"./utils":383}],376:[function(e,t,r){"use strict";r.sha1=e("./sha/1"),r.sha224=e("./sha/224"),r.sha256=e("./sha/256"),r.sha384=e("./sha/384"),r.sha512=e("./sha/512")},{"./sha/1":377,"./sha/224":378,"./sha/256":379,"./sha/384":380,"./sha/512":381}],377:[function(e,t,r){"use strict";var n=e("../utils"),i=e("../common"),o=e("./common"),s=n.rotl32,a=n.sum32,l=n.sum32_5,u=o.ft_1,c=i.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];function d(){if(!(this instanceof d))return new d;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(d,c),t.exports=d,d.blockSize=512,d.outSize=160,d.hmacStrength=80,d.padLength=64,d.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=s(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],o=this.h[1],c=this.h[2],d=this.h[3],f=this.h[4];for(n=0;n<r.length;n++){var p=~~(n/20),m=l(s(i,5),u(p,o,c,d),f,r[n],h[p]);f=d,d=c,c=s(o,30),o=i,i=m}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],c),this.h[3]=a(this.h[3],d),this.h[4]=a(this.h[4],f)},d.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},{"../common":373,"../utils":383,"./common":382}],378:[function(e,t,r){"use strict";var n=e("../utils"),i=e("./256");function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(o,i),t.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},{"../utils":383,"./256":379}],379:[function(e,t,r){"use strict";var n=e("../utils"),i=e("../common"),o=e("./common"),s=e("minimalistic-assert"),a=n.sum32,l=n.sum32_4,u=n.sum32_5,c=o.ch32,h=o.maj32,d=o.s0_256,f=o.s1_256,p=o.g0_256,m=o.g1_256,g=i.BlockHash,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=v,this.W=new Array(64)}n.inherits(y,g),t.exports=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=l(m(r[n-2]),r[n-7],p(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],g=this.h[2],v=this.h[3],y=this.h[4],b=this.h[5],w=this.h[6],C=this.h[7];for(s(this.k.length===r.length),n=0;n<r.length;n++){var _=u(C,f(y),c(y,b,w),this.k[n],r[n]),S=a(d(i),h(i,o,g));C=w,w=b,b=y,y=a(v,_),v=g,g=o,o=i,i=a(_,S)}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],g),this.h[3]=a(this.h[3],v),this.h[4]=a(this.h[4],y),this.h[5]=a(this.h[5],b),this.h[6]=a(this.h[6],w),this.h[7]=a(this.h[7],C)},y.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},{"../common":373,"../utils":383,"./common":382,"minimalistic-assert":437}],380:[function(e,t,r){"use strict";var n=e("../utils"),i=e("./512");function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(o,i),t.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},{"../utils":383,"./512":381}],381:[function(e,t,r){"use strict";var n=e("../utils"),i=e("../common"),o=e("minimalistic-assert"),s=n.rotr64_hi,a=n.rotr64_lo,l=n.shr64_hi,u=n.shr64_lo,c=n.sum64,h=n.sum64_hi,d=n.sum64_lo,f=n.sum64_4_hi,p=n.sum64_4_lo,m=n.sum64_5_hi,g=n.sum64_5_lo,v=i.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;v.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}function w(e,t,r,n,i){var o=e&r^~e&i;return o<0&&(o+=4294967296),o}function C(e,t,r,n,i,o){var s=t&n^~t&o;return s<0&&(s+=4294967296),s}function _(e,t,r,n,i){var o=e&r^e&i^r&i;return o<0&&(o+=4294967296),o}function S(e,t,r,n,i,o){var s=t&n^t&o^n&o;return s<0&&(s+=4294967296),s}function x(e,t){var r=s(e,t,28)^s(t,e,2)^s(t,e,7);return r<0&&(r+=4294967296),r}function k(e,t){var r=a(e,t,28)^a(t,e,2)^a(t,e,7);return r<0&&(r+=4294967296),r}function T(e,t){var r=s(e,t,14)^s(e,t,18)^s(t,e,9);return r<0&&(r+=4294967296),r}function R(e,t){var r=a(e,t,14)^a(e,t,18)^a(t,e,9);return r<0&&(r+=4294967296),r}function E(e,t){var r=s(e,t,1)^s(e,t,8)^l(e,t,7);return r<0&&(r+=4294967296),r}function M(e,t){var r=a(e,t,1)^a(e,t,8)^u(e,t,7);return r<0&&(r+=4294967296),r}function P(e,t){var r=s(e,t,19)^s(t,e,29)^l(e,t,6);return r<0&&(r+=4294967296),r}function O(e,t){var r=a(e,t,19)^a(t,e,29)^u(e,t,6);return r<0&&(r+=4294967296),r}n.inherits(b,v),t.exports=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=P(r[n-4],r[n-3]),o=O(r[n-4],r[n-3]),s=r[n-14],a=r[n-13],l=E(r[n-30],r[n-29]),u=M(r[n-30],r[n-29]),c=r[n-32],h=r[n-31];r[n]=f(i,o,s,a,l,u,c,h),r[n+1]=p(i,o,s,a,l,u,c,h)}},b.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],i=this.h[1],s=this.h[2],a=this.h[3],l=this.h[4],u=this.h[5],f=this.h[6],p=this.h[7],v=this.h[8],y=this.h[9],b=this.h[10],E=this.h[11],M=this.h[12],P=this.h[13],O=this.h[14],I=this.h[15];o(this.k.length===r.length);for(var A=0;A<r.length;A+=2){var j=O,D=I,N=T(v,y),F=R(v,y),$=w(v,y,b,E,M,P),L=C(v,y,b,E,M,P),B=this.k[A],V=this.k[A+1],H=r[A],z=r[A+1],U=m(j,D,N,F,$,L,B,V,H,z),q=g(j,D,N,F,$,L,B,V,H,z);j=x(n,i),D=k(n,i),N=_(n,i,s,a,l,u),F=S(n,i,s,a,l,u);var G=h(j,D,N,F),W=d(j,D,N,F);O=M,I=P,M=b,P=E,b=v,E=y,v=h(f,p,U,q),y=d(p,p,U,q),f=l,p=u,l=s,u=a,s=n,a=i,n=h(U,q,G,W),i=d(U,q,G,W)}c(this.h,0,n,i),c(this.h,2,s,a),c(this.h,4,l,u),c(this.h,6,f,p),c(this.h,8,v,y),c(this.h,10,b,E),c(this.h,12,M,P),c(this.h,14,O,I)},b.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},{"../common":373,"../utils":383,"minimalistic-assert":437}],382:[function(e,t,r){"use strict";var n=e("../utils").rotr32;function i(e,t,r,n){return 0===e?o(t,r,n):1===e||3===e?a(t,r,n):2===e?s(t,r,n):void 0}function o(e,t,r){return e&t^~e&r}function s(e,t,r){return e&t^e&r^t&r}function a(e,t,r){return e^t^r}function l(e){return n(e,2)^n(e,13)^n(e,22)}function u(e){return n(e,6)^n(e,11)^n(e,25)}function c(e){return n(e,7)^n(e,18)^e>>>3}function h(e){return n(e,17)^n(e,19)^e>>>10}r.ft_1=i,r.ch32=o,r.maj32=s,r.p32=a,r.s0_256=l,r.s1_256=u,r.g0_256=c,r.g1_256=h},{"../utils":383}],383:[function(e,t,r){"use strict";var n=e("minimalistic-assert"),i=e("inherits");function o(e,t){return 55296==(64512&e.charCodeAt(t))&&!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1))}function s(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(var n=0,i=0;i<e.length;i++){var s=e.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=63&s|128):o(e,i)?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=63&s|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=63&s|128)}else for(i=0;i<e.length;i++)r[i]=0|e[i];return r}function a(e){for(var t="",r=0;r<e.length;r++)t+=c(e[r].toString(16));return t}function l(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function u(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];"little"===t&&(i=l(i)),r+=h(i.toString(16))}return r}function c(e){return 1===e.length?"0"+e:e}function h(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}function d(e,t,r,i){var o=r-t;n(o%4==0);for(var s=new Array(o/4),a=0,l=t;a<s.length;a++,l+=4){var u;u="big"===i?e[l]<<24|e[l+1]<<16|e[l+2]<<8|e[l+3]:e[l+3]<<24|e[l+2]<<16|e[l+1]<<8|e[l],s[a]=u>>>0}return s}function f(e,t){for(var r=new Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var o=e[n];"big"===t?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r}function p(e,t){return e>>>t|e<<32-t}function m(e,t){return e<<t|e>>>32-t}function g(e,t){return e+t>>>0}function v(e,t,r){return e+t+r>>>0}function y(e,t,r,n){return e+t+r+n>>>0}function b(e,t,r,n,i){return e+t+r+n+i>>>0}function w(e,t,r,n){var i=e[t],o=n+e[t+1]>>>0,s=(o<n?1:0)+r+i;e[t]=s>>>0,e[t+1]=o}function C(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0}function _(e,t,r,n){return t+n>>>0}function S(e,t,r,n,i,o,s,a){var l=0,u=t;return l+=(u=u+n>>>0)<t?1:0,l+=(u=u+o>>>0)<o?1:0,e+r+i+s+(l+=(u=u+a>>>0)<a?1:0)>>>0}function x(e,t,r,n,i,o,s,a){return t+n+o+a>>>0}function k(e,t,r,n,i,o,s,a,l,u){var c=0,h=t;return c+=(h=h+n>>>0)<t?1:0,c+=(h=h+o>>>0)<o?1:0,c+=(h=h+a>>>0)<a?1:0,e+r+i+s+l+(c+=(h=h+u>>>0)<u?1:0)>>>0}function T(e,t,r,n,i,o,s,a,l,u){return t+n+o+a+u>>>0}function R(e,t,r){return(t<<32-r|e>>>r)>>>0}function E(e,t,r){return(e<<32-r|t>>>r)>>>0}function M(e,t,r){return e>>>r}function P(e,t,r){return(e<<32-r|t>>>r)>>>0}r.inherits=i,r.toArray=s,r.toHex=a,r.htonl=l,r.toHex32=u,r.zero2=c,r.zero8=h,r.join32=d,r.split32=f,r.rotr32=p,r.rotl32=m,r.sum32=g,r.sum32_3=v,r.sum32_4=y,r.sum32_5=b,r.sum64=w,r.sum64_hi=C,r.sum64_lo=_,r.sum64_4_hi=S,r.sum64_4_lo=x,r.sum64_5_hi=k,r.sum64_5_lo=T,r.rotr64_hi=R,r.rotr64_lo=E,r.shr64_hi=M,r.shr64_lo=P},{inherits:387,"minimalistic-assert":437}],384:[function(e,t,r){"use strict";var n=e("hash.js"),i=e("minimalistic-crypto-utils"),o=e("minimalistic-assert");function s(e){if(!(this instanceof s))return new s(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=i.toArray(e.entropy,e.entropyEnc||"hex"),r=i.toArray(e.nonce,e.nonceEnc||"hex"),n=i.toArray(e.pers,e.persEnc||"hex");o(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}t.exports=s,s.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},s.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},s.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},s.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=i.toArray(e,t),r=i.toArray(r,n),o(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},s.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=i.toArray(r,n||"hex"),this._update(r));for(var o=[];o.length<e;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var s=o.slice(0,e);return this._update(r),this._reseed++,i.encode(s,t)}},{"hash.js":372,"minimalistic-assert":437,"minimalistic-crypto-utils":438}],385:[function(e,t,r){"use strict";r.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,l=(1<<a)-1,u=l>>1,c=-7,h=r?i-1:0,d=r?-1:1,f=e[t+h];for(h+=d,o=f&(1<<-c)-1,f>>=-c,c+=a;c>0;o=256*o+e[t+h],h+=d,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+e[t+h],h+=d,c-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,n),o-=u}return(f?-1:1)*s*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var s,a,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,p=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(s++,l/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(t*l-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[r+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[r+f]=255&s,f+=p,s/=256,u-=8);e[r+f-p]|=128*m}},{}],386:[function(e,t,n){(function(e){"use strict";var r,n,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,s=new i(c),a=e.document.createTextNode("");s.observe(a,{characterData:!0}),r=function(){a.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)};else{var l=new e.MessageChannel;l.port1.onmessage=c,r=function(){l.port2.postMessage(0)}}var u=[];function c(){var e,t;n=!0;for(var r=u.length;r;){for(t=u,u=[],e=-1;++e<r;)t[e]();r=u.length}n=!1}function h(e){1!==u.push(e)||n||r()}t.exports=h}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],387:[function(e,t,r){"use strict";"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},{}],388:[function(e,t,r){"use strict";function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function i(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}t.exports=function(e){return null!=e&&(n(e)||i(e)||!!e._isBuffer)}},{}],389:[function(e,t,r){"use strict";var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],390:[function(e,t,r){"use strict";var n=e("./utils"),i=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(e){for(var t,r,i,s,a,l,u,c=[],h=0,d=e.length,f=d,p="string"!==n.getTypeOf(e);h<e.length;)f=d-h,p?(t=e[h++],r=h<d?e[h++]:0,i=h<d?e[h++]:0):(t=e.charCodeAt(h++),r=h<d?e.charCodeAt(h++):0,i=h<d?e.charCodeAt(h++):0),s=t>>2,a=(3&t)<<4|r>>4,l=f>1?(15&r)<<2|i>>6:64,u=f>2?63&i:64,c.push(o.charAt(s)+o.charAt(a)+o.charAt(l)+o.charAt(u));return c.join("")},r.decode=function(e){var t,r,n,s,a,l,u=0,c=0,h="data:";if(e.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var d,f=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===o.charAt(64)&&f--,e.charAt(e.length-2)===o.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=i.uint8array?new Uint8Array(0|f):new Array(0|f);u<e.length;)t=o.indexOf(e.charAt(u++))<<2|(s=o.indexOf(e.charAt(u++)))>>4,r=(15&s)<<4|(a=o.indexOf(e.charAt(u++)))>>2,n=(3&a)<<6|(l=o.indexOf(e.charAt(u++))),d[c++]=t,64!==a&&(d[c++]=r),64!==l&&(d[c++]=n);return d}},{"./support":419,"./utils":421}],391:[function(e,t,r){"use strict";var n=e("./external"),i=e("./stream/DataWorker"),o=e("./stream/DataLengthProbe"),s=e("./stream/Crc32Probe");function a(e,t,r,n,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=n,this.compressedContent=i}o=e("./stream/DataLengthProbe"),a.prototype={getContentWorker:function(){var e=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(e,t,r){return e.pipe(new s).pipe(new o("uncompressedSize")).pipe(t.compressWorker(r)).pipe(new o("compressedSize")).withStreamInfo("compression",t)},t.exports=a},{"./external":395,"./stream/Crc32Probe":414,"./stream/DataLengthProbe":415,"./stream/DataWorker":416}],392:[function(e,t,r){"use strict";var n=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(e){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":396,"./stream/GenericWorker":417}],393:[function(e,t,r){"use strict";var n=e("./utils");function i(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}var o=i();function s(e,t,r,n){var i=o,s=n+r;e^=-1;for(var a=n;a<s;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}function a(e,t,r,n){var i=o,s=n+r;e^=-1;for(var a=n;a<s;a++)e=e>>>8^i[255&(e^t.charCodeAt(a))];return-1^e}t.exports=function(e,t){return void 0!==e&&e.length?"string"!==n.getTypeOf(e)?s(0|t,e,e.length,0):a(0|t,e,e.length,0):0}},{"./utils":421}],394:[function(e,t,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],395:[function(e,t,r){"use strict";var n=null;n="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:n}},{lie:425}],396:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),o=e("./utils"),s=e("./stream/GenericWorker"),a=n?"uint8array":"array";function l(e,t){s.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}r.magic="\b\0",o.inherits(l,s),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(a,e.data),!1)},l.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},r.compressWorker=function(e){return new l("Deflate",e)},r.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":417,"./utils":421,pako:439}],397:[function(e,t,r){"use strict";var n=e("../utils"),i=e("../stream/GenericWorker"),o=e("../utf8"),s=e("../crc32"),a=e("../signature"),l=function(e,t){var r,n="";for(r=0;r<t;r++)n+=String.fromCharCode(255&e),e>>>=8;return n},u=function(e,t){var r=e;return e||(r=t?16893:33204),(65535&r)<<16},c=function(e,t){return 63&(e||0)},h=function(e,t,r,i,h,d){var f,p,m=e.file,g=e.compression,v=d!==o.utf8encode,y=n.transformTo("string",d(m.name)),b=n.transformTo("string",o.utf8encode(m.name)),w=m.comment,C=n.transformTo("string",d(w)),_=n.transformTo("string",o.utf8encode(w)),S=b.length!==m.name.length,x=_.length!==w.length,k="",T="",R="",E=m.dir,M=m.date,P={crc32:0,compressedSize:0,uncompressedSize:0};t&&!r||(P.crc32=e.crc32,P.compressedSize=e.compressedSize,P.uncompressedSize=e.uncompressedSize);var O=0;t&&(O|=8),v||!S&&!x||(O|=2048);var I=0,A=0;E&&(I|=16),"UNIX"===h?(A=798,I|=u(m.unixPermissions,E)):(A=20,I|=c(m.dosPermissions,E)),f=M.getUTCHours(),f<<=6,f|=M.getUTCMinutes(),f<<=5,f|=M.getUTCSeconds()/2,p=M.getUTCFullYear()-1980,p<<=4,p|=M.getUTCMonth()+1,p<<=5,p|=M.getUTCDate(),S&&(T=l(1,1)+l(s(y),4)+b,k+="up"+l(T.length,2)+T),x&&(R=l(1,1)+l(s(C),4)+_,k+="uc"+l(R.length,2)+R);var j="";return j+="\n\0",j+=l(O,2),j+=g.magic,j+=l(f,2),j+=l(p,2),j+=l(P.crc32,4),j+=l(P.compressedSize,4),j+=l(P.uncompressedSize,4),j+=l(y.length,2),j+=l(k.length,2),{fileRecord:a.LOCAL_FILE_HEADER+j+y+k,dirRecord:a.CENTRAL_FILE_HEADER+l(A,2)+j+l(C.length,2)+"\0\0\0\0"+l(I,4)+l(i,4)+y+k+C}},d=function(e,t,r,i,o){var s=n.transformTo("string",o(i));return a.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(e,2)+l(e,2)+l(t,4)+l(r,4)+l(s.length,2)+s},f=function(e){return a.DATA_DESCRIPTOR+l(e.crc32,4)+l(e.compressedSize,4)+l(e.uncompressedSize,4)};function p(e,t,r,n){i.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(p,i),p.prototype.push=function(e){var t=e.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,i.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-n-1))/r:100}}))},p.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var r=h(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,r=h(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),t)this.push({data:f(e),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var r=this.bytesWritten-e,n=d(this.dirRecords.length,r,e,this.zipComment,this.encodeFileName);this.push({data:n,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},p.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(e){var t=this._sources;if(!i.prototype.error.call(this,e))return!1;for(var r=0;r<t.length;r++)try{t[r].error(e)}catch(e){}return!0},p.prototype.lock=function(){i.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=p},{"../crc32":393,"../signature":412,"../stream/GenericWorker":417,"../utf8":420,"../utils":421}],398:[function(e,t,r){"use strict";var n=e("../compressions"),i=e("./ZipFileWorker"),o=function(e,t){var r=e||t,i=n[r];if(!i)throw new Error(r+" is not a valid compression method !");return i};r.generateWorker=function(e,t,r){var n=new i(t.streamFiles,r,t.platform,t.encodeFileName),s=0;try{e.forEach((function(e,r){s++;var i=o(r.options.compression,t.compression),a=r.options.compressionOptions||t.compressionOptions||{},l=r.dir,u=r.date;r._compressWorker(i,a).withStreamInfo("file",{name:e,dir:l,date:u,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(n)})),n.entriesCount=s}catch(e){n.error(e)}return n}},{"../compressions":392,"./ZipFileWorker":397}],399:[function(e,t,r){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var e=new n;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}n.prototype=e("./object"),n.prototype.loadAsync=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.version="3.5.0",n.loadAsync=function(e,t){return(new n).loadAsync(e,t)},n.external=e("./external"),t.exports=n},{"./defaults":394,"./external":395,"./load":400,"./object":404,"./support":419}],400:[function(e,t,r){"use strict";var n=e("./utils"),i=e("./external"),o=e("./utf8"),s=(n=e("./utils"),e("./zipEntries")),a=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function u(e){return new i.Promise((function(t,r){var n=e.decompressed.getContentWorker().pipe(new a);n.on("error",(function(e){r(e)})).on("end",(function(){n.streamInfo.crc32!==e.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var r=this;return t=n.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var r=new s(t);return r.load(e),r})).then((function(e){var r=[i.Promise.resolve(e)],n=e.files;if(t.checkCRC32)for(var o=0;o<n.length;o++)r.push(u(n[o]));return i.Promise.all(r)})).then((function(e){for(var n=e.shift(),i=n.files,o=0;o<i.length;o++){var s=i[o];r.file(s.fileNameStr,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders})}return n.zipComment.length&&(r.comment=n.zipComment),r}))}},{"./external":395,"./nodejsUtils":403,"./stream/Crc32Probe":414,"./utf8":420,"./utils":421,"./zipEntries":422}],401:[function(e,t,r){"use strict";var n=e("../utils"),i=e("../stream/GenericWorker");function o(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}n.inherits(o,i),o.prototype._bindStream=function(e){var t=this;this._stream=e,e.pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},{"../stream/GenericWorker":417,"../utils":421}],402:[function(e,t,r){"use strict";var n=e("readable-stream").Readable;function i(e,t,r){n.call(this,t),this._helper=e;var i=this;e.on("data",(function(e,t){i.push(e)||i._helper.pause(),r&&r(t)})).on("error",(function(e){i.emit("error",e)})).on("end",(function(){i.push(null)}))}e("../utils").inherits(i,n),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":421,"readable-stream":405}],403:[function(e,t,r){(function(e){"use strict";t.exports={isNode:void 0!==e,newBufferFrom:function(t,r){if(e.from&&e.from!==Uint8Array.from)return e.from(t,r);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new e(t,r)},allocBuffer:function(t){if(e.alloc)return e.alloc(t);var r=new e(t);return r.fill(0),r},isBuffer:function(t){return e.isBuffer(t)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}}).call(this,e("buffer").Buffer)},{buffer:216}],404:[function(e,t,r){"use strict";var n=e("./utf8"),i=e("./utils"),o=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),a=e("./defaults"),l=e("./compressedObject"),u=e("./zipObject"),c=e("./generate"),h=e("./nodejsUtils"),d=e("./nodejs/NodejsStreamInputAdapter"),f=function(e,t,r){var n,s=i.getTypeOf(t),c=i.extend(r||{},a);c.date=c.date||new Date,null!==c.compression&&(c.compression=c.compression.toUpperCase()),"string"==typeof c.unixPermissions&&(c.unixPermissions=parseInt(c.unixPermissions,8)),c.unixPermissions&&16384&c.unixPermissions&&(c.dir=!0),c.dosPermissions&&16&c.dosPermissions&&(c.dir=!0),c.dir&&(e=m(e)),c.createFolders&&(n=p(e))&&g.call(this,n,!0);var f="string"===s&&!1===c.binary&&!1===c.base64;r&&void 0!==r.binary||(c.binary=!f),(t instanceof l&&0===t.uncompressedSize||c.dir||!t||0===t.length)&&(c.base64=!1,c.binary=!0,t="",c.compression="STORE",s="string");var v=null;v=t instanceof l||t instanceof o?t:h.isNode&&h.isStream(t)?new d(e,t):i.prepareContent(e,t,c.binary,c.optimizedBinaryString,c.base64);var y=new u(e,v,c);this.files[e]=y},p=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:a.createFolders,e=m(e),this.files[e]||f.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function v(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,r,n;for(t in this.files)this.files.hasOwnProperty(t)&&(n=this.files[t],(r=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(r,n))},filter:function(e){var t=[];return this.forEach((function(r,n){e(r,n)&&t.push(n)})),t},file:function(e,t,r){if(1===arguments.length){if(v(e)){var n=e;return this.filter((function(e,t){return!t.dir&&n.test(e)}))}var i=this.files[this.root+e];return i&&!i.dir?i:null}return e=this.root+e,f.call(this,e,t,r),this},folder:function(e){if(!e)return this;if(v(e))return this.filter((function(t,r){return r.dir&&e.test(t)}));var t=this.root+e,r=g.call(this,t),n=this.clone();return n.root=r.name,n},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter((function(t,r){return r.name.slice(0,e.length)===e})),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,r={};try{if((r=i.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");i.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var a=r.comment||this.comment||"";t=c.generateWorker(this,r,a)}catch(e){(t=new o("error")).error(e)}return new s(t,r.type||"string",r.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=y},{"./compressedObject":391,"./defaults":394,"./generate":398,"./nodejs/NodejsStreamInputAdapter":401,"./nodejsUtils":403,"./stream/GenericWorker":417,"./stream/StreamHelper":418,"./utf8":420,"./utils":421,"./zipObject":424}],405:[function(e,t,r){"use strict";t.exports=e("stream")},{stream:506}],406:[function(e,t,r){"use strict";var n=e("./DataReader");function i(e){n.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,n),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===t&&this.data[o+1]===r&&this.data[o+2]===n&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),o=this.readData(4);return t===o[0]&&r===o[1]&&n===o[2]&&i===o[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":421,"./DataReader":407}],407:[function(e,t,r){"use strict";var n=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":421}],408:[function(e,t,r){"use strict";var n=e("./Uint8ArrayReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":421,"./Uint8ArrayReader":410}],409:[function(e,t,r){"use strict";var n=e("./DataReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":421,"./DataReader":407}],410:[function(e,t,r){"use strict";var n=e("./ArrayReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":421,"./ArrayReader":406}],411:[function(e,t,r){"use strict";var n=e("../utils"),i=e("../support"),o=e("./ArrayReader"),s=e("./StringReader"),a=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=n.getTypeOf(e);return n.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new a(e):i.uint8array?new l(n.transformTo("uint8array",e)):new o(n.transformTo("array",e)):new s(e)}},{"../support":419,"../utils":421,"./ArrayReader":406,"./NodeBufferReader":408,"./StringReader":409,"./Uint8ArrayReader":410}],412:[function(e,t,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],413:[function(e,t,r){"use strict";var n=e("./GenericWorker"),i=e("../utils");function o(e){n.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(o,n),o.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=o},{"../utils":421,"./GenericWorker":417}],414:[function(e,t,r){"use strict";var n=e("./GenericWorker"),i=e("../crc32");function o(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,n),o.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=o},{"../crc32":393,"../utils":421,"./GenericWorker":417}],415:[function(e,t,r){"use strict";var n=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}n.inherits(o,i),o.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=o},{"../utils":421,"./GenericWorker":417}],416:[function(e,t,r){"use strict";var n=e("../utils"),i=e("./GenericWorker"),o=16384;function s(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=n.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}n.inherits(s,i),s.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=o,t=null,r=Math.min(this.max,this.index+e);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,r);break;case"uint8array":t=this.data.subarray(this.index,r);break;case"array":case"nodebuffer":t=this.data.slice(this.index,r)}return this.index=r,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=s},{"../utils":421,"./GenericWorker":417}],417:[function(e,t,r){"use strict";function n(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var e=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=n},{}],418:[function(e,t,r){(function(r){"use strict";var n=e("../utils"),i=e("./ConvertWorker"),o=e("./GenericWorker"),s=e("../base64"),a=e("../support"),l=e("../external"),u=null;if(a.nodestream)try{u=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function c(e,t,r){switch(e){case"blob":return n.newBlob(n.transformTo("arraybuffer",t),r);case"base64":return s.encode(t);default:return n.transformTo(e,t)}}function h(e,t){var n,i=0,o=null,s=0;for(n=0;n<t.length;n++)s+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(o=new Uint8Array(s),n=0;n<t.length;n++)o.set(t[n],i),i+=t[n].length;return o;case"nodebuffer":return r.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}function d(e,t){return new l.Promise((function(r,n){var i=[],o=e._internalType,s=e._outputType,a=e._mimeType;e.on("data",(function(e,r){i.push(e),t&&t(r)})).on("error",(function(e){i=[],n(e)})).on("end",(function(){try{var e=c(s,h(o,i),a);r(e)}catch(e){n(e)}i=[]})).resume()}))}function f(e,t,r){var s=t;switch(t){case"blob":case"arraybuffer":s="uint8array";break;case"base64":s="string"}try{this._internalType=s,this._outputType=t,this._mimeType=r,n.checkSupport(s),this._worker=e.pipe(new i(s)),e.lock()}catch(e){this._worker=new o("error"),this._worker.error(e)}}f.prototype={accumulate:function(e){return d(this,e)},on:function(e,t){var r=this;return"data"===e?this._worker.on(e,(function(e){t.call(r,e.data,e.meta)})):this._worker.on(e,(function(){n.delay(t,arguments,r)})),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=f}).call(this,e("buffer").Buffer)},{"../base64":390,"../external":395,"../nodejs/NodejsStreamOutputAdapter":402,"../support":419,"../utils":421,"./ConvertWorker":413,"./GenericWorker":417,buffer:216}],419:[function(e,t,r){(function(t){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer=void 0!==t,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=0===new Blob([n],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),r.blob=0===i.getBlob("application/zip").size}catch(e){r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch(e){r.nodestream=!1}}).call(this,e("buffer").Buffer)},{buffer:216,"readable-stream":405}],420:[function(e,t,r){"use strict";for(var n=e("./utils"),i=e("./support"),o=e("./nodejsUtils"),s=e("./stream/GenericWorker"),a=new Array(256),l=0;l<256;l++)a[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;a[254]=a[254]=1;var u=function(e){var t,r,n,o,s,a=e.length,l=0;for(o=0;o<a;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=i.uint8array?new Uint8Array(l):new Array(l),s=0,o=0;s<l;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),r<128?t[s++]=r:r<2048?(t[s++]=192|r>>>6,t[s++]=128|63&r):r<65536?(t[s++]=224|r>>>12,t[s++]=128|r>>>6&63,t[s++]=128|63&r):(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63,t[s++]=128|r>>>6&63,t[s++]=128|63&r);return t},c=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+a[e[r]]>t?r:t},h=function(e){var t,r,i,o,s=e.length,l=new Array(2*s);for(r=0,t=0;t<s;)if((i=e[t++])<128)l[r++]=i;else if((o=a[i])>4)l[r++]=65533,t+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&t<s;)i=i<<6|63&e[t++],o--;o>1?l[r++]=65533:i<65536?l[r++]=i:(i-=65536,l[r++]=55296|i>>10&1023,l[r++]=56320|1023&i)}return l.length!==r&&(l.subarray?l=l.subarray(0,r):l.length=r),n.applyFromCharCode(l)};function d(){s.call(this,"utf-8 decode"),this.leftOver=null}function f(){s.call(this,"utf-8 encode")}r.utf8encode=function(e){return i.nodebuffer?o.newBufferFrom(e,"utf-8"):u(e)},r.utf8decode=function(e){return i.nodebuffer?n.transformTo("nodebuffer",e).toString("utf-8"):(e=n.transformTo(i.uint8array?"uint8array":"array",e),h(e))},n.inherits(d,s),d.prototype.processChunk=function(e){var t=n.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var o=t;(t=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),t.set(o,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var s=c(t),a=t;s!==t.length&&(i.uint8array?(a=t.subarray(0,s),this.leftOver=t.subarray(s,t.length)):(a=t.slice(0,s),this.leftOver=t.slice(s,t.length))),this.push({data:r.utf8decode(a),meta:e.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=d,n.inherits(f,s),f.prototype.processChunk=function(e){this.push({data:r.utf8encode(e.data),meta:e.meta})},r.Utf8EncodeWorker=f},{"./nodejsUtils":403,"./stream/GenericWorker":417,"./support":419,"./utils":421}],421:[function(e,t,r){"use strict";var n=e("./support"),i=e("./base64"),o=e("./nodejsUtils"),s=e("set-immediate-shim"),a=e("./external");function l(e){return c(e,n.uint8array?new Uint8Array(e.length):new Array(e.length))}function u(e){return e}function c(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}r.newBlob=function(e,t){r.checkSupport("blob");try{return new Blob([e],{type:t})}catch(r){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(e),n.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(e,t,r){var n=[],i=0,o=e.length;if(o<=r)return String.fromCharCode.apply(null,e);for(;i<o;)"array"===t||"nodebuffer"===t?n.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+r,o)))):n.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+r,o)))),i+=r;return n.join("")},stringifyByChar:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(e){return!1}}()}};function d(e){var t=65536,n=r.getTypeOf(e),i=!0;if("uint8array"===n?i=h.applyCanBeUsed.uint8array:"nodebuffer"===n&&(i=h.applyCanBeUsed.nodebuffer),i)for(;t>1;)try{return h.stringifyByChunk(e,n,t)}catch(e){t=Math.floor(t/2)}return h.stringifyByChar(e)}function f(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}r.applyFromCharCode=d;var p={};p.string={string:u,array:function(e){return c(e,new Array(e.length))},arraybuffer:function(e){return p.string.uint8array(e).buffer},uint8array:function(e){return c(e,new Uint8Array(e.length))},nodebuffer:function(e){return c(e,o.allocBuffer(e.length))}},p.array={string:d,array:u,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(e)}},p.arraybuffer={string:function(e){return d(new Uint8Array(e))},array:function(e){return f(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:u,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(new Uint8Array(e))}},p.uint8array={string:d,array:function(e){return f(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:u,nodebuffer:function(e){return o.newBufferFrom(e)}},p.nodebuffer={string:d,array:function(e){return f(e,new Array(e.length))},arraybuffer:function(e){return p.nodebuffer.uint8array(e).buffer},uint8array:function(e){return f(e,new Uint8Array(e.length))},nodebuffer:u},r.transformTo=function(e,t){if(t||(t=""),!e)return t;r.checkSupport(e);var n=r.getTypeOf(t);return p[n][e](t)},r.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":n.nodebuffer&&o.isBuffer(e)?"nodebuffer":n.uint8array&&e instanceof Uint8Array?"uint8array":n.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(e){if(!n[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(e){var t,r,n="";for(r=0;r<(e||"").length;r++)n+="\\x"+((t=e.charCodeAt(r))<16?"0":"")+t.toString(16).toUpperCase();return n},r.delay=function(e,t,r){s((function(){e.apply(r||null,t||[])}))},r.inherits=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r},r.extend=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===r[t]&&(r[t]=arguments[e][t]);return r},r.prepareContent=function(e,t,o,s,u){return a.Promise.resolve(t).then((function(e){return n.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new a.Promise((function(t,r){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(e){r(e.target.error)},n.readAsArrayBuffer(e)})):e})).then((function(t){var n=r.getTypeOf(t);return n?("arraybuffer"===n?t=r.transformTo("uint8array",t):"string"===n&&(u?t=i.decode(t):o&&!0!==s&&(t=l(t))),t):a.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":390,"./external":395,"./nodejsUtils":403,"./support":419,"set-immediate-shim":497}],422:[function(e,t,r){"use strict";var n=e("./reader/readerFor"),i=e("./utils"),o=e("./signature"),s=e("./zipEntry"),a=(e("./utf8"),e("./support"));function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var r=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4)===t;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=a.uint8array?"uint8array":"array",r=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,n=this.zip64EndOfCentralSize-44,i=0;i<n;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(e=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=t-r;if(n>0)this.isSignature(t,o.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){this.reader=n(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":411,"./signature":412,"./support":419,"./utf8":420,"./utils":421,"./zipEntry":423}],423:[function(e,t,r){"use strict";var n=e("./reader/readerFor"),i=e("./utils"),o=e("./compressedObject"),s=e("./crc32"),a=e("./utf8"),l=e("./compressions"),u=e("./support"),c=0,h=3,d=function(e){for(var t in l)if(l.hasOwnProperty(t)&&l[t].magic===e)return l[t];return null};function f(e,t){this.options=e,this.loadOptions=t}f.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=d(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),e===c&&(this.dosPermissions=63&this.externalFileAttributes),e===h&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,r,n,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),r=e.readInt(2),n=e.readData(r),this.extraFields[t]={id:t,length:r,value:n};e.setIndex(i)},handleUTF8:function(){var e=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var r=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var o=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=n(e.value);return 1!==t.readInt(1)||s(this.fileName)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=n(e.value);return 1!==t.readInt(1)||s(this.fileComment)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null}},t.exports=f},{"./compressedObject":391,"./compressions":392,"./crc32":393,"./reader/readerFor":411,"./support":419,"./utf8":420,"./utils":421}],424:[function(e,t,r){"use strict";var n=e("./stream/StreamHelper"),i=e("./stream/DataWorker"),o=e("./utf8"),s=e("./compressedObject"),a=e("./stream/GenericWorker"),l=function(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}};l.prototype={internalStream:function(e){var t=null,r="string";try{if(!e)throw new Error("No output type specified.");var i="string"===(r=e.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),t=this._decompressWorker();var s=!this._dataBinary;s&&!i&&(t=t.pipe(new o.Utf8EncodeWorker)),!s&&i&&(t=t.pipe(new o.Utf8DecodeWorker))}catch(e){(t=new a("error")).error(e)}return new n(t,r,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new o.Utf8EncodeWorker)),s.createWorkerFrom(r,e,t)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof a?this._data:new i(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<u.length;h++)l.prototype[u[h]]=c;t.exports=l},{"./compressedObject":391,"./stream/DataWorker":416,"./stream/GenericWorker":417,"./stream/StreamHelper":418,"./utf8":420}],425:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var i=e("immediate");function o(){}var s={},a=["REJECTED"],l=["FULFILLED"],u=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==o&&p(this,e)}function h(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function d(e,t,r){i((function(){var n;try{n=t(r)}catch(t){return s.reject(e,t)}n===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,n)}))}function f(e){var t=e&&e.then;if(e&&("object"===n(e)||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var r=!1;function n(t){r||(r=!0,s.reject(e,t))}function i(t){r||(r=!0,s.resolve(e,t))}function o(){t(i,n)}var a=m(o);"error"===a.status&&n(a.value)}function m(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}function g(e){return e instanceof this?e:s.resolve(new this(o),e)}function v(e){var t=new this(o);return s.reject(t,e)}function y(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var i=new Array(r),a=0,l=-1,u=new this(o);++l<r;)c(e[l],l);return u;function c(e,o){function l(e){i[o]=e,++a!==r||n||(n=!0,s.resolve(u,i))}t.resolve(e).then(l,(function(e){n||(n=!0,s.reject(u,e))}))}}function b(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var i=-1,a=new this(o);++i<r;)l(e[i]);return a;function l(e){t.resolve(e).then((function(e){n||(n=!0,s.resolve(a,e))}),(function(e){n||(n=!0,s.reject(a,e))}))}}t.exports=c,c.prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then(r,n);function r(r){function n(){return r}return t.resolve(e()).then(n)}function n(r){function n(){throw r}return t.resolve(e()).then(n)}},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===l||"function"!=typeof t&&this.state===a)return this;var r=new this.constructor(o);return this.state!==u?d(r,this.state===l?e:t,this.outcome):this.queue.push(new h(r,e,t)),r},h.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},h.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},h.prototype.callRejected=function(e){s.reject(this.promise,e)},h.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},s.resolve=function(e,t){var r=m(f,t);if("error"===r.status)return s.reject(e,r.value);var n=r.value;if(n)p(e,n);else{e.state=l,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},s.reject=function(e,t){e.state=a,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},c.resolve=g,c.reject=v,c.all=y,c.race=b},{immediate:386}],426:[function(e,t,n){(function(e){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var n=1/0,i="[object Symbol]",o=/[\\^$.*+?()[\]{}|]/g,s=RegExp(o.source),a="object"==(void 0===e?"undefined":r(e))&&e&&e.Object===Object&&e,l="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,u=a||l||Function("return this")(),c=Object.prototype.toString,h=u.Symbol,d=h?h.prototype:void 0,f=d?d.toString:void 0;function p(e){if("string"==typeof e)return e;if(g(e))return f?f.call(e):"";var t=e+"";return"0"==t&&1/e==-n?"-0":t}function m(e){return!!e&&"object"==r(e)}function g(e){return"symbol"==r(e)||m(e)&&c.call(e)==i}function v(e){return null==e?"":p(e)}function y(e){return(e=v(e))&&s.test(e)?e.replace(o,"\\$&"):e}t.exports=y}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],427:[function(e,t,n){(function(e){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var i=200,o="Expected a function",s="__lodash_hash_undefined__",a=1,l=2,u=1/0,c=9007199254740991,h="[object Arguments]",d="[object Array]",f="[object Boolean]",p="[object Date]",m="[object Error]",g="[object Function]",v="[object GeneratorFunction]",y="[object Map]",b="[object Number]",w="[object Object]",C="[object Promise]",_="[object RegExp]",S="[object Set]",x="[object String]",k="[object Symbol]",T="[object WeakMap]",R="[object ArrayBuffer]",E="[object DataView]",M="[object Float64Array]",P="[object Int8Array]",O="[object Int16Array]",I="[object Int32Array]",A="[object Uint8Array]",j="[object Uint8ClampedArray]",D="[object Uint16Array]",N="[object Uint32Array]",F=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$=/^\w*$/,L=/^\./,B=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,V=/[\\^$.*+?()[\]{}|]/g,H=/\\(\\)?/g,z=/^\[object .+?Constructor\]$/,U=/^(?:0|[1-9]\d*)$/,q={};q["[object Float32Array]"]=q[M]=q[P]=q[O]=q[I]=q[A]=q[j]=q[D]=q[N]=!0,q[h]=q[d]=q[R]=q[f]=q[E]=q[p]=q[m]=q[g]=q[y]=q[b]=q[w]=q[_]=q[S]=q[x]=q[T]=!1;var G="object"==(void 0===e?"undefined":r(e))&&e&&e.Object===Object&&e,W="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,K=G||W||Function("return this")(),J="object"==(void 0===n?"undefined":r(n))&&n&&!n.nodeType&&n,X=J&&"object"==(void 0===t?"undefined":r(t))&&t&&!t.nodeType&&t,Y=X&&X.exports===J&&G.process,Z=function(){try{return Y&&Y.binding("util")}catch(e){}}(),Q=Z&&Z.isTypedArray;function ee(e,t,r,n){for(var i=-1,o=e?e.length:0;++i<o;){var s=e[i];t(n,s,r(s),e)}return n}function te(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}function re(e){return function(t){return null==t?void 0:t[e]}}function ne(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function ie(e){return function(t){return e(t)}}function oe(e,t){return null==e?void 0:e[t]}function se(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function ae(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function le(e,t){return function(r){return e(t(r))}}function ue(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var ce,he=Array.prototype,de=Function.prototype,fe=Object.prototype,pe=K["__core-js_shared__"],me=(ce=/[^.]+$/.exec(pe&&pe.keys&&pe.keys.IE_PROTO||""))?"Symbol(src)_1."+ce:"",ge=de.toString,ve=fe.hasOwnProperty,ye=fe.toString,be=RegExp("^"+ge.call(ve).replace(V,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),we=K.Symbol,Ce=K.Uint8Array,_e=fe.propertyIsEnumerable,Se=he.splice,xe=le(Object.keys,Object),ke=Vt(K,"DataView"),Te=Vt(K,"Map"),Re=Vt(K,"Promise"),Ee=Vt(K,"Set"),Me=Vt(K,"WeakMap"),Pe=Vt(Object,"create"),Oe=Qt(ke),Ie=Qt(Te),Ae=Qt(Re),je=Qt(Ee),De=Qt(Me),Ne=we?we.prototype:void 0,Fe=Ne?Ne.valueOf:void 0,$e=Ne?Ne.toString:void 0;function Le(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Be(){this.__data__=Pe?Pe(null):{}}function Ve(e){return this.has(e)&&delete this.__data__[e]}function He(e){var t=this.__data__;if(Pe){var r=t[e];return r===s?void 0:r}return ve.call(t,e)?t[e]:void 0}function ze(e){var t=this.__data__;return Pe?void 0!==t[e]:ve.call(t,e)}function Ue(e,t){return this.__data__[e]=Pe&&void 0===t?s:t,this}function qe(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ge(){this.__data__=[]}function We(e){var t=this.__data__,r=ft(t,e);return!(r<0||(r==t.length-1?t.pop():Se.call(t,r,1),0))}function Ke(e){var t=this.__data__,r=ft(t,e);return r<0?void 0:t[r][1]}function Je(e){return ft(this.__data__,e)>-1}function Xe(e,t){var r=this.__data__,n=ft(r,e);return n<0?r.push([e,t]):r[n][1]=t,this}function Ye(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ze(){this.__data__={hash:new Le,map:new(Te||qe),string:new Le}}function Qe(e){return Lt(this,e).delete(e)}function et(e){return Lt(this,e).get(e)}function tt(e){return Lt(this,e).has(e)}function rt(e,t){return Lt(this,e).set(e,t),this}function nt(e){var t=-1,r=e?e.length:0;for(this.__data__=new Ye;++t<r;)this.add(e[t])}function it(e){return this.__data__.set(e,s),this}function ot(e){return this.__data__.has(e)}function st(e){this.__data__=new qe(e)}function at(){this.__data__=new qe}function lt(e){return this.__data__.delete(e)}function ut(e){return this.__data__.get(e)}function ct(e){return this.__data__.has(e)}function ht(e,t){var r=this.__data__;if(r instanceof qe){var n=r.__data__;if(!Te||n.length<i-1)return n.push([e,t]),this;r=this.__data__=new Ye(n)}return r.set(e,t),this}function dt(e,t){var r=ir(e)||nr(e)?ne(e.length,String):[],n=r.length,i=!!n;for(var o in e)!t&&!ve.call(e,o)||i&&("length"==o||Ut(o,n))||r.push(o);return r}function ft(e,t){for(var r=e.length;r--;)if(rr(e[r][0],t))return r;return-1}function pt(e,t,r,n){return mt(e,(function(e,i,o){t(n,e,r(e),o)})),n}Le.prototype.clear=Be,Le.prototype.delete=Ve,Le.prototype.get=He,Le.prototype.has=ze,Le.prototype.set=Ue,qe.prototype.clear=Ge,qe.prototype.delete=We,qe.prototype.get=Ke,qe.prototype.has=Je,qe.prototype.set=Xe,Ye.prototype.clear=Ze,Ye.prototype.delete=Qe,Ye.prototype.get=et,Ye.prototype.has=tt,Ye.prototype.set=rt,nt.prototype.add=nt.prototype.push=it,nt.prototype.has=ot,st.prototype.clear=at,st.prototype.delete=lt,st.prototype.get=ut,st.prototype.has=ct,st.prototype.set=ht;var mt=jt(vt),gt=Dt();function vt(e,t){return e&&gt(e,t,gr)}function yt(e,t){for(var r=0,n=(t=qt(t,e)?[t]:It(t)).length;null!=e&&r<n;)e=e[Zt(t[r++])];return r&&r==n?e:void 0}function bt(e){return ye.call(e)}function wt(e,t){return null!=e&&t in Object(e)}function Ct(e,t,r,n,i){return e===t||(null==e||null==t||!ur(e)&&!cr(t)?e!=e&&t!=t:_t(e,t,Ct,r,n,i))}function _t(e,t,r,n,i,o){var s=ir(e),a=ir(t),u=d,c=d;s||(u=(u=Ht(e))==h?w:u),a||(c=(c=Ht(t))==h?w:c);var f=u==w&&!se(e),p=c==w&&!se(t),m=u==c;if(m&&!f)return o||(o=new st),s||dr(e)?Nt(e,t,r,n,i,o):Ft(e,t,u,r,n,i,o);if(!(i&l)){var g=f&&ve.call(e,"__wrapped__"),v=p&&ve.call(t,"__wrapped__");if(g||v){var y=g?e.value():e,b=v?t.value():t;return o||(o=new st),r(y,b,n,i,o)}}return!!m&&(o||(o=new st),$t(e,t,r,n,i,o))}function St(e,t,r,n){var i=r.length,o=i,s=!n;if(null==e)return!o;for(e=Object(e);i--;){var u=r[i];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<o;){var c=(u=r[i])[0],h=e[c],d=u[1];if(s&&u[2]){if(void 0===h&&!(c in e))return!1}else{var f=new st;if(n)var p=n(h,d,c,e,t,f);if(!(void 0===p?Ct(d,h,n,a|l,f):p))return!1}}return!0}function xt(e){return!(!ur(e)||Wt(e))&&(ar(e)||se(e)?be:z).test(Qt(e))}function kt(e){return cr(e)&&lr(e.length)&&!!q[ye.call(e)]}function Tt(e){return"function"==typeof e?e:null==e?vr:"object"==r(e)?ir(e)?Mt(e[0],e[1]):Et(e):yr(e)}function Rt(e){if(!Kt(e))return xe(e);var t=[];for(var r in Object(e))ve.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Et(e){var t=Bt(e);return 1==t.length&&t[0][2]?Xt(t[0][0],t[0][1]):function(r){return r===e||St(r,e,t)}}function Mt(e,t){return qt(e)&&Jt(t)?Xt(Zt(e),t):function(r){var n=pr(r,e);return void 0===n&&n===t?mr(r,e):Ct(t,n,void 0,a|l)}}function Pt(e){return function(t){return yt(t,e)}}function Ot(e){if("string"==typeof e)return e;if(hr(e))return $e?$e.call(e):"";var t=e+"";return"0"==t&&1/e==-u?"-0":t}function It(e){return ir(e)?e:Yt(e)}function At(e,t){return function(r,n){var i=ir(r)?ee:pt,o=t?t():{};return i(r,e,Tt(n,2),o)}}function jt(e,t){return function(r,n){if(null==r)return r;if(!or(r))return e(r,n);for(var i=r.length,o=t?i:-1,s=Object(r);(t?o--:++o<i)&&!1!==n(s[o],o,s););return r}}function Dt(e){return function(t,r,n){for(var i=-1,o=Object(t),s=n(t),a=s.length;a--;){var l=s[e?a:++i];if(!1===r(o[l],l,o))break}return t}}function Nt(e,t,r,n,i,o){var s=i&l,u=e.length,c=t.length;if(u!=c&&!(s&&c>u))return!1;var h=o.get(e);if(h&&o.get(t))return h==t;var d=-1,f=!0,p=i&a?new nt:void 0;for(o.set(e,t),o.set(t,e);++d<u;){var m=e[d],g=t[d];if(n)var v=s?n(g,m,d,t,e,o):n(m,g,d,e,t,o);if(void 0!==v){if(v)continue;f=!1;break}if(p){if(!te(t,(function(e,t){if(!p.has(t)&&(m===e||r(m,e,n,i,o)))return p.add(t)}))){f=!1;break}}else if(m!==g&&!r(m,g,n,i,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function Ft(e,t,r,n,i,o,s){switch(r){case E:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case R:return!(e.byteLength!=t.byteLength||!n(new Ce(e),new Ce(t)));case f:case p:case b:return rr(+e,+t);case m:return e.name==t.name&&e.message==t.message;case _:case x:return e==t+"";case y:var u=ae;case S:var c=o&l;if(u||(u=ue),e.size!=t.size&&!c)return!1;var h=s.get(e);if(h)return h==t;o|=a,s.set(e,t);var d=Nt(u(e),u(t),n,i,o,s);return s.delete(e),d;case k:if(Fe)return Fe.call(e)==Fe.call(t)}return!1}function $t(e,t,r,n,i,o){var s=i&l,a=gr(e),u=a.length;if(u!=gr(t).length&&!s)return!1;for(var c=u;c--;){var h=a[c];if(!(s?h in t:ve.call(t,h)))return!1}var d=o.get(e);if(d&&o.get(t))return d==t;var f=!0;o.set(e,t),o.set(t,e);for(var p=s;++c<u;){var m=e[h=a[c]],g=t[h];if(n)var v=s?n(g,m,h,t,e,o):n(m,g,h,e,t,o);if(!(void 0===v?m===g||r(m,g,n,i,o):v)){f=!1;break}p||(p="constructor"==h)}if(f&&!p){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(f=!1)}return o.delete(e),o.delete(t),f}function Lt(e,t){var r=e.__data__;return Gt(t)?r["string"==typeof t?"string":"hash"]:r.map}function Bt(e){for(var t=gr(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,Jt(i)]}return t}function Vt(e,t){var r=oe(e,t);return xt(r)?r:void 0}var Ht=bt;function zt(e,t,r){for(var n,i=-1,o=(t=qt(t,e)?[t]:It(t)).length;++i<o;){var s=Zt(t[i]);if(!(n=null!=e&&r(e,s)))break;e=e[s]}return n||!!(o=e?e.length:0)&&lr(o)&&Ut(s,o)&&(ir(e)||nr(e))}function Ut(e,t){return!!(t=null==t?c:t)&&("number"==typeof e||U.test(e))&&e>-1&&e%1==0&&e<t}function qt(e,t){if(ir(e))return!1;var n=r(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!hr(e))||$.test(e)||!F.test(e)||null!=t&&e in Object(t)}function Gt(e){var t=r(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Wt(e){return!!me&&me in e}function Kt(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||fe)}function Jt(e){return e==e&&!ur(e)}function Xt(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}(ke&&Ht(new ke(new ArrayBuffer(1)))!=E||Te&&Ht(new Te)!=y||Re&&Ht(Re.resolve())!=C||Ee&&Ht(new Ee)!=S||Me&&Ht(new Me)!=T)&&(Ht=function(e){var t=ye.call(e),r=t==w?e.constructor:void 0,n=r?Qt(r):void 0;if(n)switch(n){case Oe:return E;case Ie:return y;case Ae:return C;case je:return S;case De:return T}return t});var Yt=tr((function(e){e=fr(e);var t=[];return L.test(e)&&t.push(""),e.replace(B,(function(e,r,n,i){t.push(n?i.replace(H,"$1"):r||e)})),t}));function Zt(e){if("string"==typeof e||hr(e))return e;var t=e+"";return"0"==t&&1/e==-u?"-0":t}function Qt(e){if(null!=e){try{return ge.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var er=At((function(e,t,r){ve.call(e,r)?e[r].push(t):e[r]=[t]}));function tr(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(o);var r=function r(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s),s};return r.cache=new(tr.Cache||Ye),r}function rr(e,t){return e===t||e!=e&&t!=t}function nr(e){return sr(e)&&ve.call(e,"callee")&&(!_e.call(e,"callee")||ye.call(e)==h)}tr.Cache=Ye;var ir=Array.isArray;function or(e){return null!=e&&lr(e.length)&&!ar(e)}function sr(e){return cr(e)&&or(e)}function ar(e){var t=ur(e)?ye.call(e):"";return t==g||t==v}function lr(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}function ur(e){var t=r(e);return!!e&&("object"==t||"function"==t)}function cr(e){return!!e&&"object"==r(e)}function hr(e){return"symbol"==r(e)||cr(e)&&ye.call(e)==k}var dr=Q?ie(Q):kt;function fr(e){return null==e?"":Ot(e)}function pr(e,t,r){var n=null==e?void 0:yt(e,t);return void 0===n?r:n}function mr(e,t){return null!=e&&zt(e,t,wt)}function gr(e){return or(e)?dt(e):Rt(e)}function vr(e){return e}function yr(e){return qt(e)?re(Zt(e)):Pt(e)}t.exports=er}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],428:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var i="[object Boolean]",o=Object.prototype.toString;function s(e){return!0===e||!1===e||a(e)&&o.call(e)==i}function a(e){return!!e&&"object"==n(e)}t.exports=s},{}],429:[function(e,t,n){(function(e){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var i=200,o="__lodash_hash_undefined__",s=1,a=2,l=9007199254740991,u="[object Arguments]",c="[object Array]",h="[object AsyncFunction]",d="[object Boolean]",f="[object Date]",p="[object Error]",m="[object Function]",g="[object GeneratorFunction]",v="[object Map]",y="[object Number]",b="[object Null]",w="[object Object]",C="[object Promise]",_="[object Proxy]",S="[object RegExp]",x="[object Set]",k="[object String]",T="[object Symbol]",R="[object Undefined]",E="[object WeakMap]",M="[object ArrayBuffer]",P="[object DataView]",O="[object Float64Array]",I="[object Int8Array]",A="[object Int16Array]",j="[object Int32Array]",D="[object Uint8Array]",N="[object Uint8ClampedArray]",F="[object Uint16Array]",$="[object Uint32Array]",L=/[\\^$.*+?()[\]{}|]/g,B=/^\[object .+?Constructor\]$/,V=/^(?:0|[1-9]\d*)$/,H={};H["[object Float32Array]"]=H[O]=H[I]=H[A]=H[j]=H[D]=H[N]=H[F]=H[$]=!0,H[u]=H[c]=H[M]=H[d]=H[P]=H[f]=H[p]=H[m]=H[v]=H[y]=H[w]=H[S]=H[x]=H[k]=H[E]=!1;var z="object"==(void 0===e?"undefined":r(e))&&e&&e.Object===Object&&e,U="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,q=z||U||Function("return this")(),G="object"==(void 0===n?"undefined":r(n))&&n&&!n.nodeType&&n,W=G&&"object"==(void 0===t?"undefined":r(t))&&t&&!t.nodeType&&t,K=W&&W.exports===G,J=K&&z.process,X=function(){try{return J&&J.binding&&J.binding("util")}catch(e){}}(),Y=X&&X.isTypedArray;function Z(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var s=e[r];t(s,r,e)&&(o[i++]=s)}return o}function Q(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function ee(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function te(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function re(e){return function(t){return e(t)}}function ne(e,t){return e.has(t)}function ie(e,t){return null==e?void 0:e[t]}function oe(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function se(e,t){return function(r){return e(t(r))}}function ae(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var le,ue=Array.prototype,ce=Function.prototype,he=Object.prototype,de=q["__core-js_shared__"],fe=ce.toString,pe=he.hasOwnProperty,me=(le=/[^.]+$/.exec(de&&de.keys&&de.keys.IE_PROTO||""))?"Symbol(src)_1."+le:"",ge=he.toString,ve=RegExp("^"+fe.call(pe).replace(L,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ye=K?q.Buffer:void 0,be=q.Symbol,we=q.Uint8Array,Ce=he.propertyIsEnumerable,_e=ue.splice,Se=be?be.toStringTag:void 0,xe=Object.getOwnPropertySymbols,ke=ye?ye.isBuffer:void 0,Te=se(Object.keys,Object),Re=Et(q,"DataView"),Ee=Et(q,"Map"),Me=Et(q,"Promise"),Pe=Et(q,"Set"),Oe=Et(q,"WeakMap"),Ie=Et(Object,"create"),Ae=Ft(Re),je=Ft(Ee),De=Ft(Me),Ne=Ft(Pe),Fe=Ft(Oe),$e=be?be.prototype:void 0,Le=$e?$e.valueOf:void 0;function Be(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ve(){this.__data__=Ie?Ie(null):{},this.size=0}function He(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function ze(e){var t=this.__data__;if(Ie){var r=t[e];return r===o?void 0:r}return pe.call(t,e)?t[e]:void 0}function Ue(e){var t=this.__data__;return Ie?void 0!==t[e]:pe.call(t,e)}function qe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Ie&&void 0===t?o:t,this}function Ge(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function We(){this.__data__=[],this.size=0}function Ke(e){var t=this.__data__,r=pt(t,e);return!(r<0||(r==t.length-1?t.pop():_e.call(t,r,1),--this.size,0))}function Je(e){var t=this.__data__,r=pt(t,e);return r<0?void 0:t[r][1]}function Xe(e){return pt(this.__data__,e)>-1}function Ye(e,t){var r=this.__data__,n=pt(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function Ze(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Qe(){this.size=0,this.__data__={hash:new Be,map:new(Ee||Ge),string:new Be}}function et(e){var t=Rt(this,e).delete(e);return this.size-=t?1:0,t}function tt(e){return Rt(this,e).get(e)}function rt(e){return Rt(this,e).has(e)}function nt(e,t){var r=Rt(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function it(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Ze;++t<r;)this.add(e[t])}function ot(e){return this.__data__.set(e,o),this}function st(e){return this.__data__.has(e)}function at(e){var t=this.__data__=new Ge(e);this.size=t.size}function lt(){this.__data__=new Ge,this.size=0}function ut(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function ct(e){return this.__data__.get(e)}function ht(e){return this.__data__.has(e)}function dt(e,t){var r=this.__data__;if(r instanceof Ge){var n=r.__data__;if(!Ee||n.length<i-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Ze(n)}return r.set(e,t),this.size=r.size,this}function ft(e,t){var r=Bt(e),n=!r&&Lt(e),i=!r&&!n&&Ht(e),o=!r&&!n&&!i&&Kt(e),s=r||n||i||o,a=s?te(e.length,String):[],l=a.length;for(var u in e)!t&&!pe.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||It(u,l))||a.push(u);return a}function pt(e,t){for(var r=e.length;r--;)if($t(e[r][0],t))return r;return-1}function mt(e,t,r){var n=t(e);return Bt(e)?n:Q(n,r(e))}function gt(e){return null==e?void 0===e?R:b:Se&&Se in Object(e)?Mt(e):Nt(e)}function vt(e){return Wt(e)&&gt(e)==u}function yt(e,t,r,n,i){return e===t||(null==e||null==t||!Wt(e)&&!Wt(t)?e!=e&&t!=t:bt(e,t,r,n,yt,i))}function bt(e,t,r,n,i,o){var a=Bt(e),l=Bt(t),h=a?c:Ot(e),d=l?c:Ot(t),f=(h=h==u?w:h)==w,p=(d=d==u?w:d)==w,m=h==d;if(m&&Ht(e)){if(!Ht(t))return!1;a=!0,f=!1}if(m&&!f)return o||(o=new at),a||Kt(e)?St(e,t,r,n,i,o):xt(e,t,h,r,n,i,o);if(!(r&s)){var g=f&&pe.call(e,"__wrapped__"),v=p&&pe.call(t,"__wrapped__");if(g||v){var y=g?e.value():e,b=v?t.value():t;return o||(o=new at),i(y,b,r,n,o)}}return!!m&&(o||(o=new at),kt(e,t,r,n,i,o))}function wt(e){return!(!Gt(e)||jt(e))&&(Ut(e)?ve:B).test(Ft(e))}function Ct(e){return Wt(e)&&qt(e.length)&&!!H[gt(e)]}function _t(e){if(!Dt(e))return Te(e);var t=[];for(var r in Object(e))pe.call(e,r)&&"constructor"!=r&&t.push(r);return t}function St(e,t,r,n,i,o){var l=r&s,u=e.length,c=t.length;if(u!=c&&!(l&&c>u))return!1;var h=o.get(e);if(h&&o.get(t))return h==t;var d=-1,f=!0,p=r&a?new it:void 0;for(o.set(e,t),o.set(t,e);++d<u;){var m=e[d],g=t[d];if(n)var v=l?n(g,m,d,t,e,o):n(m,g,d,e,t,o);if(void 0!==v){if(v)continue;f=!1;break}if(p){if(!ee(t,(function(e,t){if(!ne(p,t)&&(m===e||i(m,e,r,n,o)))return p.push(t)}))){f=!1;break}}else if(m!==g&&!i(m,g,r,n,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function xt(e,t,r,n,i,o,l){switch(r){case P:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case M:return!(e.byteLength!=t.byteLength||!o(new we(e),new we(t)));case d:case f:case y:return $t(+e,+t);case p:return e.name==t.name&&e.message==t.message;case S:case k:return e==t+"";case v:var u=oe;case x:var c=n&s;if(u||(u=ae),e.size!=t.size&&!c)return!1;var h=l.get(e);if(h)return h==t;n|=a,l.set(e,t);var m=St(u(e),u(t),n,i,o,l);return l.delete(e),m;case T:if(Le)return Le.call(e)==Le.call(t)}return!1}function kt(e,t,r,n,i,o){var a=r&s,l=Tt(e),u=l.length;if(u!=Tt(t).length&&!a)return!1;for(var c=u;c--;){var h=l[c];if(!(a?h in t:pe.call(t,h)))return!1}var d=o.get(e);if(d&&o.get(t))return d==t;var f=!0;o.set(e,t),o.set(t,e);for(var p=a;++c<u;){var m=e[h=l[c]],g=t[h];if(n)var v=a?n(g,m,h,t,e,o):n(m,g,h,e,t,o);if(!(void 0===v?m===g||i(m,g,r,n,o):v)){f=!1;break}p||(p="constructor"==h)}if(f&&!p){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(f=!1)}return o.delete(e),o.delete(t),f}function Tt(e){return mt(e,Jt,Pt)}function Rt(e,t){var r=e.__data__;return At(t)?r["string"==typeof t?"string":"hash"]:r.map}function Et(e,t){var r=ie(e,t);return wt(r)?r:void 0}function Mt(e){var t=pe.call(e,Se),r=e[Se];try{e[Se]=void 0;var n=!0}catch(e){}var i=ge.call(e);return n&&(t?e[Se]=r:delete e[Se]),i}Be.prototype.clear=Ve,Be.prototype.delete=He,Be.prototype.get=ze,Be.prototype.has=Ue,Be.prototype.set=qe,Ge.prototype.clear=We,Ge.prototype.delete=Ke,Ge.prototype.get=Je,Ge.prototype.has=Xe,Ge.prototype.set=Ye,Ze.prototype.clear=Qe,Ze.prototype.delete=et,Ze.prototype.get=tt,Ze.prototype.has=rt,Ze.prototype.set=nt,it.prototype.add=it.prototype.push=ot,it.prototype.has=st,at.prototype.clear=lt,at.prototype.delete=ut,at.prototype.get=ct,at.prototype.has=ht,at.prototype.set=dt;var Pt=xe?function(e){return null==e?[]:(e=Object(e),Z(xe(e),(function(t){return Ce.call(e,t)})))}:Xt,Ot=gt;function It(e,t){return!!(t=null==t?l:t)&&("number"==typeof e||V.test(e))&&e>-1&&e%1==0&&e<t}function At(e){var t=r(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function jt(e){return!!me&&me in e}function Dt(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||he)}function Nt(e){return ge.call(e)}function Ft(e){if(null!=e){try{return fe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function $t(e,t){return e===t||e!=e&&t!=t}(Re&&Ot(new Re(new ArrayBuffer(1)))!=P||Ee&&Ot(new Ee)!=v||Me&&Ot(Me.resolve())!=C||Pe&&Ot(new Pe)!=x||Oe&&Ot(new Oe)!=E)&&(Ot=function(e){var t=gt(e),r=t==w?e.constructor:void 0,n=r?Ft(r):"";if(n)switch(n){case Ae:return P;case je:return v;case De:return C;case Ne:return x;case Fe:return E}return t});var Lt=vt(function(){return arguments}())?vt:function(e){return Wt(e)&&pe.call(e,"callee")&&!Ce.call(e,"callee")},Bt=Array.isArray;function Vt(e){return null!=e&&qt(e.length)&&!Ut(e)}var Ht=ke||Yt;function zt(e,t){return yt(e,t)}function Ut(e){if(!Gt(e))return!1;var t=gt(e);return t==m||t==g||t==h||t==_}function qt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=l}function Gt(e){var t=r(e);return null!=e&&("object"==t||"function"==t)}function Wt(e){return null!=e&&"object"==r(e)}var Kt=Y?re(Y):Ct;function Jt(e){return Vt(e)?ft(e):_t(e)}function Xt(){return[]}function Yt(){return!1}t.exports=zt}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],430:[function(e,t,n){(function(e){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var n="[object AsyncFunction]",i="[object Function]",o="[object GeneratorFunction]",s="[object Null]",a="[object Proxy]",l="[object Undefined]",u="object"==(void 0===e?"undefined":r(e))&&e&&e.Object===Object&&e,c="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,h=u||c||Function("return this")(),d=Object.prototype,f=d.hasOwnProperty,p=d.toString,m=h.Symbol,g=m?m.toStringTag:void 0;function v(e){return null==e?void 0===e?l:s:g&&g in Object(e)?y(e):b(e)}function y(e){var t=f.call(e,g),r=e[g];try{e[g]=void 0;var n=!0}catch(e){}var i=p.call(e);return n&&(t?e[g]=r:delete e[g]),i}function b(e){return p.call(e)}function w(e){if(!C(e))return!1;var t=v(e);return t==i||t==o||t==n||t==a}function C(e){var t=r(e);return null!=e&&("object"==t||"function"==t)}t.exports=w}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],431:[function(e,t,r){"use strict";function n(e){return null==e}t.exports=n},{}],432:[function(e,t,r){"use strict";function n(e){return void 0===e}t.exports=n},{}],433:[function(e,t,n){(function(e){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var n=200,i="__lodash_hash_undefined__",o=1/0,s="[object Function]",a="[object GeneratorFunction]",l=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,c="object"==(void 0===e?"undefined":r(e))&&e&&e.Object===Object&&e,h="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,d=c||h||Function("return this")();function f(e,t){return!(!e||!e.length)&&g(e,t,0)>-1}function p(e,t,r){for(var n=-1,i=e?e.length:0;++n<i;)if(r(t,e[n]))return!0;return!1}function m(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function g(e,t,r){if(t!=t)return m(e,v,r);for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}function v(e){return e!=e}function y(e,t){return e.has(t)}function b(e,t){return null==e?void 0:e[t]}function w(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function C(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var _,S=Array.prototype,x=Function.prototype,k=Object.prototype,T=d["__core-js_shared__"],R=(_=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||""))?"Symbol(src)_1."+_:"",E=x.toString,M=k.hasOwnProperty,P=k.toString,O=RegExp("^"+E.call(M).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),I=S.splice,A=le(d,"Map"),j=le(d,"Set"),D=le(Object,"create");function N(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function F(){this.__data__=D?D(null):{}}function $(e){return this.has(e)&&delete this.__data__[e]}function L(e){var t=this.__data__;if(D){var r=t[e];return r===i?void 0:r}return M.call(t,e)?t[e]:void 0}function B(e){var t=this.__data__;return D?void 0!==t[e]:M.call(t,e)}function V(e,t){return this.__data__[e]=D&&void 0===t?i:t,this}function H(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function z(){this.__data__=[]}function U(e){var t=this.__data__,r=ne(t,e);return!(r<0||(r==t.length-1?t.pop():I.call(t,r,1),0))}function q(e){var t=this.__data__,r=ne(t,e);return r<0?void 0:t[r][1]}function G(e){return ne(this.__data__,e)>-1}function W(e,t){var r=this.__data__,n=ne(r,e);return n<0?r.push([e,t]):r[n][1]=t,this}function K(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function J(){this.__data__={hash:new N,map:new(A||H),string:new N}}function X(e){return ae(this,e).delete(e)}function Y(e){return ae(this,e).get(e)}function Z(e){return ae(this,e).has(e)}function Q(e,t){return ae(this,e).set(e,t),this}function ee(e){var t=-1,r=e?e.length:0;for(this.__data__=new K;++t<r;)this.add(e[t])}function te(e){return this.__data__.set(e,i),this}function re(e){return this.__data__.has(e)}function ne(e,t){for(var r=e.length;r--;)if(fe(e[r][0],t))return r;return-1}function ie(e){return!(!me(e)||ce(e))&&(pe(e)||w(e)?O:u).test(he(e))}function oe(e,t,r){var i=-1,o=f,s=e.length,a=!0,l=[],u=l;if(r)a=!1,o=p;else if(s>=n){var c=t?null:se(e);if(c)return C(c);a=!1,o=y,u=new ee}else u=t?[]:l;e:for(;++i<s;){var h=e[i],d=t?t(h):h;if(h=r||0!==h?h:0,a&&d==d){for(var m=u.length;m--;)if(u[m]===d)continue e;t&&u.push(d),l.push(h)}else o(u,d,r)||(u!==l&&u.push(d),l.push(h))}return l}N.prototype.clear=F,N.prototype.delete=$,N.prototype.get=L,N.prototype.has=B,N.prototype.set=V,H.prototype.clear=z,H.prototype.delete=U,H.prototype.get=q,H.prototype.has=G,H.prototype.set=W,K.prototype.clear=J,K.prototype.delete=X,K.prototype.get=Y,K.prototype.has=Z,K.prototype.set=Q,ee.prototype.add=ee.prototype.push=te,ee.prototype.has=re;var se=j&&1/C(new j([,-0]))[1]==o?function(e){return new j(e)}:ge;function ae(e,t){var r=e.__data__;return ue(t)?r["string"==typeof t?"string":"hash"]:r.map}function le(e,t){var r=b(e,t);return ie(r)?r:void 0}function ue(e){var t=r(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function ce(e){return!!R&&R in e}function he(e){if(null!=e){try{return E.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function de(e){return e&&e.length?oe(e):[]}function fe(e,t){return e===t||e!=e&&t!=t}function pe(e){var t=me(e)?P.call(e):"";return t==s||t==a}function me(e){var t=r(e);return!!e&&("object"==t||"function"==t)}function ge(){}t.exports=de}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],434:[function(e,t,r){"use strict";var n=e("inherits"),i=e("hash-base"),o=e("safe-buffer").Buffer,s=new Array(16);function a(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function l(e,t){return e<<t|e>>>32-t}function u(e,t,r,n,i,o,s){return l(e+(t&r|~t&n)+i+o|0,s)+t|0}function c(e,t,r,n,i,o,s){return l(e+(t&n|r&~n)+i+o|0,s)+t|0}function h(e,t,r,n,i,o,s){return l(e+(t^r^n)+i+o|0,s)+t|0}function d(e,t,r,n,i,o,s){return l(e+(r^(t|~n))+i+o|0,s)+t|0}n(a,i),a.prototype._update=function(){for(var e=s,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a,n=this._b,i=this._c,o=this._d;r=u(r,n,i,o,e[0],3614090360,7),o=u(o,r,n,i,e[1],3905402710,12),i=u(i,o,r,n,e[2],606105819,17),n=u(n,i,o,r,e[3],3250441966,22),r=u(r,n,i,o,e[4],4118548399,7),o=u(o,r,n,i,e[5],1200080426,12),i=u(i,o,r,n,e[6],2821735955,17),n=u(n,i,o,r,e[7],4249261313,22),r=u(r,n,i,o,e[8],1770035416,7),o=u(o,r,n,i,e[9],2336552879,12),i=u(i,o,r,n,e[10],4294925233,17),n=u(n,i,o,r,e[11],2304563134,22),r=u(r,n,i,o,e[12],1804603682,7),o=u(o,r,n,i,e[13],4254626195,12),i=u(i,o,r,n,e[14],2792965006,17),r=c(r,n=u(n,i,o,r,e[15],1236535329,22),i,o,e[1],4129170786,5),o=c(o,r,n,i,e[6],3225465664,9),i=c(i,o,r,n,e[11],643717713,14),n=c(n,i,o,r,e[0],3921069994,20),r=c(r,n,i,o,e[5],3593408605,5),o=c(o,r,n,i,e[10],38016083,9),i=c(i,o,r,n,e[15],3634488961,14),n=c(n,i,o,r,e[4],3889429448,20),r=c(r,n,i,o,e[9],568446438,5),o=c(o,r,n,i,e[14],3275163606,9),i=c(i,o,r,n,e[3],4107603335,14),n=c(n,i,o,r,e[8],1163531501,20),r=c(r,n,i,o,e[13],2850285829,5),o=c(o,r,n,i,e[2],4243563512,9),i=c(i,o,r,n,e[7],1735328473,14),r=h(r,n=c(n,i,o,r,e[12],2368359562,20),i,o,e[5],4294588738,4),o=h(o,r,n,i,e[8],2272392833,11),i=h(i,o,r,n,e[11],1839030562,16),n=h(n,i,o,r,e[14],4259657740,23),r=h(r,n,i,o,e[1],2763975236,4),o=h(o,r,n,i,e[4],1272893353,11),i=h(i,o,r,n,e[7],4139469664,16),n=h(n,i,o,r,e[10],3200236656,23),r=h(r,n,i,o,e[13],681279174,4),o=h(o,r,n,i,e[0],3936430074,11),i=h(i,o,r,n,e[3],3572445317,16),n=h(n,i,o,r,e[6],76029189,23),r=h(r,n,i,o,e[9],3654602809,4),o=h(o,r,n,i,e[12],3873151461,11),i=h(i,o,r,n,e[15],530742520,16),r=d(r,n=h(n,i,o,r,e[2],3299628645,23),i,o,e[0],4096336452,6),o=d(o,r,n,i,e[7],1126891415,10),i=d(i,o,r,n,e[14],2878612391,15),n=d(n,i,o,r,e[5],4237533241,21),r=d(r,n,i,o,e[12],1700485571,6),o=d(o,r,n,i,e[3],2399980690,10),i=d(i,o,r,n,e[10],4293915773,15),n=d(n,i,o,r,e[1],2240044497,21),r=d(r,n,i,o,e[8],1873313359,6),o=d(o,r,n,i,e[15],4264355552,10),i=d(i,o,r,n,e[6],2734768916,15),n=d(n,i,o,r,e[13],1309151649,21),r=d(r,n,i,o,e[4],4149444226,6),o=d(o,r,n,i,e[11],3174756917,10),i=d(i,o,r,n,e[2],718787259,15),n=d(n,i,o,r,e[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+o|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=o.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},t.exports=a},{"hash-base":370,inherits:387,"safe-buffer":494}],435:[function(e,t,r){"use strict";var n=e("bn.js"),i=e("brorand");function o(e){this.rand=e||new i.Rand}t.exports=o,o.create=function(e){return new o(e)},o.prototype._randbelow=function(e){var t=e.bitLength(),r=Math.ceil(t/8);do{var i=new n(this.rand.generate(r))}while(i.cmp(e)>=0);return i},o.prototype._randrange=function(e,t){var r=t.sub(e);return e.add(this._randbelow(r))},o.prototype.test=function(e,t,r){var i=e.bitLength(),o=n.mont(e),s=new n(1).toRed(o);t||(t=Math.max(1,i/48|0));for(var a=e.subn(1),l=0;!a.testn(l);l++);for(var u=e.shrn(l),c=a.toRed(o),h=!0;t>0;t--){var d=this._randrange(new n(2),a);r&&r(d);var f=d.toRed(o).redPow(u);if(0!==f.cmp(s)&&0!==f.cmp(c)){for(var p=1;p<l;p++){if(0===(f=f.redSqr()).cmp(s))return!1;if(0===f.cmp(c))break}if(p===l)return!1}}return h},o.prototype.getDivisor=function(e,t){var r=e.bitLength(),i=n.mont(e),o=new n(1).toRed(i);t||(t=Math.max(1,r/48|0));for(var s=e.subn(1),a=0;!s.testn(a);a++);for(var l=e.shrn(a),u=s.toRed(i);t>0;t--){var c=this._randrange(new n(2),s),h=e.gcd(c);if(0!==h.cmpn(1))return h;var d=c.toRed(i).redPow(l);if(0!==d.cmp(o)&&0!==d.cmp(u)){for(var f=1;f<a;f++){if(0===(d=d.redSqr()).cmp(o))return d.fromRed().subn(1).gcd(e);if(0===d.cmp(u))break}if(f===a)return(d=d.redSqr()).fromRed().subn(1).gcd(e)}}return!1}},{"bn.js":436,brorand:184}],436:[function(e,t,r){arguments[4][181][0].apply(r,arguments)},{buffer:185,dup:181}],437:[function(e,t,r){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}t.exports=n,n.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)}},{}],438:[function(e,t,r){"use strict";var n=r;function i(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16));else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}return r}function o(e){return 1===e.length?"0"+e:e}function s(e){for(var t="",r=0;r<e.length;r++)t+=o(e[r].toString(16));return t}n.toArray=i,n.zero2=o,n.toHex=s,n.encode=function(e,t){return"hex"===t?s(e):e}},{}],439:[function(e,t,r){"use strict";var n={};(0,e("./lib/utils/common").assign)(n,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=n},{"./lib/deflate":440,"./lib/inflate":441,"./lib/utils/common":442,"./lib/zlib/constants":445}],440:[function(e,t,r){"use strict";var n=e("./zlib/deflate"),i=e("./utils/common"),o=e("./utils/strings"),s=e("./zlib/messages"),a=e("./zlib/zstream"),l=Object.prototype.toString,u=0,c=4,h=0,d=1,f=2,p=-1,m=0,g=8;function v(e){if(!(this instanceof v))return new v(e);this.options=i.assign({level:p,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==h)throw new Error(s[r]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){var u;if(u="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=n.deflateSetDictionary(this.strm,u))!==h)throw new Error(s[r]);this._dict_set=!0}}function y(e,t){var r=new v(t);if(r.push(e,!0),r.err)throw r.msg||s[r.err];return r.result}function b(e,t){return(t=t||{}).raw=!0,y(e,t)}function w(e,t){return(t=t||{}).gzip=!0,y(e,t)}v.prototype.push=function(e,t){var r,s,a=this.strm,p=this.options.chunkSize;if(this.ended)return!1;s=t===~~t?t:!0===t?c:u,"string"==typeof e?a.input=o.string2buf(e):"[object ArrayBuffer]"===l.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(p),a.next_out=0,a.avail_out=p),(r=n.deflate(a,s))!==d&&r!==h)return this.onEnd(r),this.ended=!0,!1;0!==a.avail_out&&(0!==a.avail_in||s!==c&&s!==f)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(a.output,a.next_out))):this.onData(i.shrinkBuf(a.output,a.next_out)))}while((a.avail_in>0||0===a.avail_out)&&r!==d);return s===c?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===h):s!==f||(this.onEnd(h),a.avail_out=0,!0)},v.prototype.onData=function(e){this.chunks.push(e)},v.prototype.onEnd=function(e){e===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=v,r.deflate=y,r.deflateRaw=b,r.gzip=w},{"./utils/common":442,"./utils/strings":443,"./zlib/deflate":447,"./zlib/messages":452,"./zlib/zstream":454}],441:[function(e,t,r){"use strict";var n=e("./zlib/inflate"),i=e("./utils/common"),o=e("./utils/strings"),s=e("./zlib/constants"),a=e("./zlib/messages"),l=e("./zlib/zstream"),u=e("./zlib/gzheader"),c=Object.prototype.toString;function h(e){if(!(this instanceof h))return new h(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,t.windowBits);if(r!==s.Z_OK)throw new Error(a[r]);if(this.header=new u,n.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=o.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=n.inflateSetDictionary(this.strm,t.dictionary))!==s.Z_OK))throw new Error(a[r])}function d(e,t){var r=new h(t);if(r.push(e,!0),r.err)throw r.msg||a[r.err];return r.result}function f(e,t){return(t=t||{}).raw=!0,d(e,t)}h.prototype.push=function(e,t){var r,a,l,u,h,d=this.strm,f=this.options.chunkSize,p=this.options.dictionary,m=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof e?d.input=o.binstring2buf(e):"[object ArrayBuffer]"===c.call(e)?d.input=new Uint8Array(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new i.Buf8(f),d.next_out=0,d.avail_out=f),(r=n.inflate(d,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&p&&(r=n.inflateSetDictionary(this.strm,p)),r===s.Z_BUF_ERROR&&!0===m&&(r=s.Z_OK,m=!1),r!==s.Z_STREAM_END&&r!==s.Z_OK)return this.onEnd(r),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&r!==s.Z_STREAM_END&&(0!==d.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(d.output,d.next_out),u=d.next_out-l,h=o.buf2string(d.output,l),d.next_out=u,d.avail_out=f-u,u&&i.arraySet(d.output,d.output,l,u,0),this.onData(h)):this.onData(i.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(m=!0)}while((d.avail_in>0||0===d.avail_out)&&r!==s.Z_STREAM_END);return r===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),d.avail_out=0,!0)},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=h,r.inflate=d,r.inflateRaw=f,r.ungzip=d},{"./utils/common":442,"./utils/strings":443,"./zlib/constants":445,"./zlib/gzheader":448,"./zlib/inflate":450,"./zlib/messages":452,"./zlib/zstream":454}],442:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!==n(r))throw new TypeError(r+"must be non-object");for(var i in r)o(r,i)&&(e[i]=r[i])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var s={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){var t,r,n,i,o,s;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(s=new Uint8Array(n),i=0,t=0,r=e.length;t<r;t++)o=e[t],s.set(o,i),i+=o.length;return s}},a={arraySet:function(e,t,r,n,i){for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,s)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,a))},r.setTyped(i)},{}],443:[function(e,t,r){"use strict";var n=e("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var s=new n.Buf8(256),a=0;a<256;a++)s[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;function l(e,t){if(t<65534&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var r="",s=0;s<t;s++)r+=String.fromCharCode(e[s]);return r}s[254]=s[254]=1,r.string2buf=function(e){var t,r,i,o,s,a=e.length,l=0;for(o=0;o<a;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new n.Buf8(l),s=0,o=0;s<l;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),r<128?t[s++]=r:r<2048?(t[s++]=192|r>>>6,t[s++]=128|63&r):r<65536?(t[s++]=224|r>>>12,t[s++]=128|r>>>6&63,t[s++]=128|63&r):(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63,t[s++]=128|r>>>6&63,t[s++]=128|63&r);return t},r.buf2binstring=function(e){return l(e,e.length)},r.binstring2buf=function(e){for(var t=new n.Buf8(e.length),r=0,i=t.length;r<i;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,n,i,o,a=t||e.length,u=new Array(2*a);for(n=0,r=0;r<a;)if((i=e[r++])<128)u[n++]=i;else if((o=s[i])>4)u[n++]=65533,r+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&r<a;)i=i<<6|63&e[r++],o--;o>1?u[n++]=65533:i<65536?u[n++]=i:(i-=65536,u[n++]=55296|i>>10&1023,u[n++]=56320|1023&i)}return l(u,n)},r.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+s[e[r]]>t?r:t}},{"./common":442}],444:[function(e,t,r){"use strict";function n(e,t,r,n){for(var i=65535&e|0,o=e>>>16&65535|0,s=0;0!==r;){r-=s=r>2e3?2e3:r;do{o=o+(i=i+t[n++]|0)|0}while(--s);i%=65521,o%=65521}return i|o<<16|0}t.exports=n},{}],445:[function(e,t,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],446:[function(e,t,r){"use strict";function n(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}var i=n();function o(e,t,r,n){var o=i,s=n+r;e^=-1;for(var a=n;a<s;a++)e=e>>>8^o[255&(e^t[a])];return-1^e}t.exports=o},{}],447:[function(e,t,r){"use strict";var n,i=e("../utils/common"),o=e("./trees"),s=e("./adler32"),a=e("./crc32"),l=e("./messages"),u=0,c=1,h=3,d=4,f=5,p=0,m=1,g=-2,v=-3,y=-5,b=-1,w=1,C=2,_=3,S=4,x=0,k=2,T=8,R=9,E=15,M=8,P=286,O=30,I=19,A=2*P+1,j=15,D=3,N=258,F=N+D+1,$=32,L=42,B=69,V=73,H=91,z=103,U=113,q=666,G=1,W=2,K=3,J=4,X=3;function Y(e,t){return e.msg=l[t],t}function Z(e){return(e<<1)-(e>4?9:0)}function Q(e){for(var t=e.length;--t>=0;)e[t]=0}function ee(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(i.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function te(e,t){o._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ee(e.strm)}function re(e,t){e.pending_buf[e.pending++]=t}function ne(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function ie(e,t,r,n){var o=e.avail_in;return o>n&&(o=n),0===o?0:(e.avail_in-=o,i.arraySet(t,e.input,e.next_in,o,r),1===e.state.wrap?e.adler=s(e.adler,t,o,r):2===e.state.wrap&&(e.adler=a(e.adler,t,o,r)),e.next_in+=o,e.total_in+=o,o)}function oe(e,t){var r,n,i=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-F?e.strstart-(e.w_size-F):0,u=e.window,c=e.w_mask,h=e.prev,d=e.strstart+N,f=u[o+s-1],p=u[o+s];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(u[(r=t)+s]===p&&u[r+s-1]===f&&u[r]===u[o]&&u[++r]===u[o+1]){o+=2,r++;do{}while(u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&o<d);if(n=N-(d-o),o=d-N,n>s){if(e.match_start=t,s=n,n>=a)break;f=u[o+s-1],p=u[o+s]}}}while((t=h[t&c])>l&&0!=--i);return s<=e.lookahead?s:e.lookahead}function se(e){var t,r,n,o,s,a=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-F)){i.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,t=r=e.hash_size;do{n=e.head[--t],e.head[t]=n>=a?n-a:0}while(--r);t=r=a;do{n=e.prev[--t],e.prev[t]=n>=a?n-a:0}while(--r);o+=a}if(0===e.strm.avail_in)break;if(r=ie(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=r,e.lookahead+e.insert>=D)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+D-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<D)););}while(e.lookahead<F&&0!==e.strm.avail_in)}function ae(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(se(e),0===e.lookahead&&t===u)return G;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,te(e,!1),0===e.strm.avail_out))return G;if(e.strstart-e.block_start>=e.w_size-F&&(te(e,!1),0===e.strm.avail_out))return G}return e.insert=0,t===d?(te(e,!0),0===e.strm.avail_out?K:J):(e.strstart>e.block_start&&(te(e,!1),e.strm.avail_out),G)}function le(e,t){for(var r,n;;){if(e.lookahead<F){if(se(e),e.lookahead<F&&t===u)return G;if(0===e.lookahead)break}if(r=0,e.lookahead>=D&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+D-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-F&&(e.match_length=oe(e,r)),e.match_length>=D)if(n=o._tr_tally(e,e.strstart-e.match_start,e.match_length-D),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=D){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+D-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(te(e,!1),0===e.strm.avail_out))return G}return e.insert=e.strstart<D-1?e.strstart:D-1,t===d?(te(e,!0),0===e.strm.avail_out?K:J):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?G:W}function ue(e,t){for(var r,n,i;;){if(e.lookahead<F){if(se(e),e.lookahead<F&&t===u)return G;if(0===e.lookahead)break}if(r=0,e.lookahead>=D&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+D-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=D-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-F&&(e.match_length=oe(e,r),e.match_length<=5&&(e.strategy===w||e.match_length===D&&e.strstart-e.match_start>4096)&&(e.match_length=D-1)),e.prev_length>=D&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-D,n=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-D),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+D-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=D-1,e.strstart++,n&&(te(e,!1),0===e.strm.avail_out))return G}else if(e.match_available){if((n=o._tr_tally(e,0,e.window[e.strstart-1]))&&te(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return G}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<D-1?e.strstart:D-1,t===d?(te(e,!0),0===e.strm.avail_out?K:J):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?G:W}function ce(e,t){for(var r,n,i,s,a=e.window;;){if(e.lookahead<=N){if(se(e),e.lookahead<=N&&t===u)return G;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=D&&e.strstart>0&&(n=a[i=e.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){s=e.strstart+N;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<s);e.match_length=N-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=D?(r=o._tr_tally(e,1,e.match_length-D),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(te(e,!1),0===e.strm.avail_out))return G}return e.insert=0,t===d?(te(e,!0),0===e.strm.avail_out?K:J):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?G:W}function he(e,t){for(var r;;){if(0===e.lookahead&&(se(e),0===e.lookahead)){if(t===u)return G;break}if(e.match_length=0,r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(te(e,!1),0===e.strm.avail_out))return G}return e.insert=0,t===d?(te(e,!0),0===e.strm.avail_out?K:J):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?G:W}function de(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function fe(e){e.window_size=2*e.w_size,Q(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=D-1,e.match_available=0,e.ins_h=0}function pe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=T,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*A),this.dyn_dtree=new i.Buf16(2*(2*O+1)),this.bl_tree=new i.Buf16(2*(2*I+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(j+1),this.heap=new i.Buf16(2*P+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*P+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function me(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=k,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?L:U,e.adler=2===t.wrap?0:1,t.last_flush=u,o._tr_init(t),p):Y(e,g)}function ge(e){var t=me(e);return t===p&&fe(e.state),t}function ve(e,t){return e&&e.state?2!==e.state.wrap?g:(e.state.gzhead=t,p):g}function ye(e,t,r,n,o,s){if(!e)return g;var a=1;if(t===b&&(t=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),o<1||o>R||r!==T||n<8||n>15||t<0||t>9||s<0||s>S)return Y(e,g);8===n&&(n=9);var l=new pe;return e.state=l,l.strm=e,l.wrap=a,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+D-1)/D),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=s,l.method=r,ge(e)}function be(e,t){return ye(e,t,T,E,M,x)}function we(e,t){var r,i,s,l;if(!e||!e.state||t>f||t<0)return e?Y(e,g):g;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||i.status===q&&t!==d)return Y(e,0===e.avail_out?y:g);if(i.strm=e,r=i.last_flush,i.last_flush=t,i.status===L)if(2===i.wrap)e.adler=0,re(i,31),re(i,139),re(i,8),i.gzhead?(re(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),re(i,255&i.gzhead.time),re(i,i.gzhead.time>>8&255),re(i,i.gzhead.time>>16&255),re(i,i.gzhead.time>>24&255),re(i,9===i.level?2:i.strategy>=C||i.level<2?4:0),re(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(re(i,255&i.gzhead.extra.length),re(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=a(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=B):(re(i,0),re(i,0),re(i,0),re(i,0),re(i,0),re(i,9===i.level?2:i.strategy>=C||i.level<2?4:0),re(i,X),i.status=U);else{var v=T+(i.w_bits-8<<4)<<8;v|=(i.strategy>=C||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(v|=$),v+=31-v%31,i.status=U,ne(i,v),0!==i.strstart&&(ne(i,e.adler>>>16),ne(i,65535&e.adler)),e.adler=1}if(i.status===B)if(i.gzhead.extra){for(s=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),ee(e),s=i.pending,i.pending!==i.pending_buf_size));)re(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=V)}else i.status=V;if(i.status===V)if(i.gzhead.name){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),ee(e),s=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,re(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),0===l&&(i.gzindex=0,i.status=H)}else i.status=H;if(i.status===H)if(i.gzhead.comment){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),ee(e),s=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,re(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),0===l&&(i.status=z)}else i.status=z;if(i.status===z&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&ee(e),i.pending+2<=i.pending_buf_size&&(re(i,255&e.adler),re(i,e.adler>>8&255),e.adler=0,i.status=U)):i.status=U),0!==i.pending){if(ee(e),0===e.avail_out)return i.last_flush=-1,p}else if(0===e.avail_in&&Z(t)<=Z(r)&&t!==d)return Y(e,y);if(i.status===q&&0!==e.avail_in)return Y(e,y);if(0!==e.avail_in||0!==i.lookahead||t!==u&&i.status!==q){var b=i.strategy===C?he(i,t):i.strategy===_?ce(i,t):n[i.level].func(i,t);if(b!==K&&b!==J||(i.status=q),b===G||b===K)return 0===e.avail_out&&(i.last_flush=-1),p;if(b===W&&(t===c?o._tr_align(i):t!==f&&(o._tr_stored_block(i,0,0,!1),t===h&&(Q(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),ee(e),0===e.avail_out))return i.last_flush=-1,p}return t!==d?p:i.wrap<=0?m:(2===i.wrap?(re(i,255&e.adler),re(i,e.adler>>8&255),re(i,e.adler>>16&255),re(i,e.adler>>24&255),re(i,255&e.total_in),re(i,e.total_in>>8&255),re(i,e.total_in>>16&255),re(i,e.total_in>>24&255)):(ne(i,e.adler>>>16),ne(i,65535&e.adler)),ee(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?p:m)}function Ce(e){var t;return e&&e.state?(t=e.state.status)!==L&&t!==B&&t!==V&&t!==H&&t!==z&&t!==U&&t!==q?Y(e,g):(e.state=null,t===U?Y(e,v):p):g}function _e(e,t){var r,n,o,a,l,u,c,h,d=t.length;if(!e||!e.state)return g;if(2===(a=(r=e.state).wrap)||1===a&&r.status!==L||r.lookahead)return g;for(1===a&&(e.adler=s(e.adler,t,d,0)),r.wrap=0,d>=r.w_size&&(0===a&&(Q(r.head),r.strstart=0,r.block_start=0,r.insert=0),h=new i.Buf8(r.w_size),i.arraySet(h,t,d-r.w_size,r.w_size,0),t=h,d=r.w_size),l=e.avail_in,u=e.next_in,c=e.input,e.avail_in=d,e.next_in=0,e.input=t,se(r);r.lookahead>=D;){n=r.strstart,o=r.lookahead-(D-1);do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+D-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--o);r.strstart=n,r.lookahead=D-1,se(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=D-1,r.match_available=0,e.next_in=u,e.input=c,e.avail_in=l,r.wrap=a,p}n=[new de(0,0,0,0,ae),new de(4,4,8,4,le),new de(4,5,16,8,le),new de(4,6,32,32,le),new de(4,4,16,16,ue),new de(8,16,32,32,ue),new de(8,16,128,128,ue),new de(8,32,128,256,ue),new de(32,128,258,1024,ue),new de(32,258,258,4096,ue)],r.deflateInit=be,r.deflateInit2=ye,r.deflateReset=ge,r.deflateResetKeep=me,r.deflateSetHeader=ve,r.deflate=we,r.deflateEnd=Ce,r.deflateSetDictionary=_e,r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":442,"./adler32":444,"./crc32":446,"./messages":452,"./trees":453}],448:[function(e,t,r){"use strict";function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=n},{}],449:[function(e,t,r){"use strict";var n=30,i=12;t.exports=function(e,t){var r,o,s,a,l,u,c,h,d,f,p,m,g,v,y,b,w,C,_,S,x,k,T,R,E;r=e.state,o=e.next_in,R=e.input,s=o+(e.avail_in-5),a=e.next_out,E=e.output,l=a-(t-e.avail_out),u=a+(e.avail_out-257),c=r.dmax,h=r.wsize,d=r.whave,f=r.wnext,p=r.window,m=r.hold,g=r.bits,v=r.lencode,y=r.distcode,b=(1<<r.lenbits)-1,w=(1<<r.distbits)-1;e:do{g<15&&(m+=R[o++]<<g,g+=8,m+=R[o++]<<g,g+=8),C=v[m&b];t:for(;;){if(m>>>=_=C>>>24,g-=_,0==(_=C>>>16&255))E[a++]=65535&C;else{if(!(16&_)){if(0==(64&_)){C=v[(65535&C)+(m&(1<<_)-1)];continue t}if(32&_){r.mode=i;break e}e.msg="invalid literal/length code",r.mode=n;break e}S=65535&C,(_&=15)&&(g<_&&(m+=R[o++]<<g,g+=8),S+=m&(1<<_)-1,m>>>=_,g-=_),g<15&&(m+=R[o++]<<g,g+=8,m+=R[o++]<<g,g+=8),C=y[m&w];r:for(;;){if(m>>>=_=C>>>24,g-=_,!(16&(_=C>>>16&255))){if(0==(64&_)){C=y[(65535&C)+(m&(1<<_)-1)];continue r}e.msg="invalid distance code",r.mode=n;break e}if(x=65535&C,g<(_&=15)&&(m+=R[o++]<<g,(g+=8)<_&&(m+=R[o++]<<g,g+=8)),(x+=m&(1<<_)-1)>c){e.msg="invalid distance too far back",r.mode=n;break e}if(m>>>=_,g-=_,x>(_=a-l)){if((_=x-_)>d&&r.sane){e.msg="invalid distance too far back",r.mode=n;break e}if(k=0,T=p,0===f){if(k+=h-_,_<S){S-=_;do{E[a++]=p[k++]}while(--_);k=a-x,T=E}}else if(f<_){if(k+=h+f-_,(_-=f)<S){S-=_;do{E[a++]=p[k++]}while(--_);if(k=0,f<S){S-=_=f;do{E[a++]=p[k++]}while(--_);k=a-x,T=E}}}else if(k+=f-_,_<S){S-=_;do{E[a++]=p[k++]}while(--_);k=a-x,T=E}for(;S>2;)E[a++]=T[k++],E[a++]=T[k++],E[a++]=T[k++],S-=3;S&&(E[a++]=T[k++],S>1&&(E[a++]=T[k++]))}else{k=a-x;do{E[a++]=E[k++],E[a++]=E[k++],E[a++]=E[k++],S-=3}while(S>2);S&&(E[a++]=E[k++],S>1&&(E[a++]=E[k++]))}break}}break}}while(o<s&&a<u);o-=S=g>>3,m&=(1<<(g-=S<<3))-1,e.next_in=o,e.next_out=a,e.avail_in=o<s?s-o+5:5-(o-s),e.avail_out=a<u?u-a+257:257-(a-u),r.hold=m,r.bits=g}},{}],450:[function(e,t,r){"use strict";var n=e("../utils/common"),i=e("./adler32"),o=e("./crc32"),s=e("./inffast"),a=e("./inftrees"),l=0,u=1,c=2,h=4,d=5,f=6,p=0,m=1,g=2,v=-2,y=-3,b=-4,w=-5,C=8,_=1,S=2,x=3,k=4,T=5,R=6,E=7,M=8,P=9,O=10,I=11,A=12,j=13,D=14,N=15,F=16,$=17,L=18,B=19,V=20,H=21,z=22,U=23,q=24,G=25,W=26,K=27,J=28,X=29,Y=30,Z=31,Q=852,ee=592,te=15;function re(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function ne(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ie(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=_,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(Q),t.distcode=t.distdyn=new n.Buf32(ee),t.sane=1,t.back=-1,p):v}function oe(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,ie(e)):v}function se(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?v:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,oe(e))):v}function ae(e,t){var r,n;return e?(n=new ne,e.state=n,n.window=null,(r=se(e,t))!==p&&(e.state=null),r):v}function le(e){return ae(e,te)}var ue,ce,he=!0;function de(e){if(he){var t;for(ue=new n.Buf32(512),ce=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(u,e.lens,0,288,ue,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(c,e.lens,0,32,ce,0,e.work,{bits:5}),he=!1}e.lencode=ue,e.lenbits=9,e.distcode=ce,e.distbits=5}function fe(e,t,r,i){var o,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new n.Buf8(s.wsize)),i>=s.wsize?(n.arraySet(s.window,t,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((o=s.wsize-s.wnext)>i&&(o=i),n.arraySet(s.window,t,r-i,o,s.wnext),(i-=o)?(n.arraySet(s.window,t,r-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}function pe(e,t){var r,Q,ee,te,ne,ie,oe,se,ae,le,ue,ce,he,pe,me,ge,ve,ye,be,we,Ce,_e,Se,xe,ke=0,Te=new n.Buf8(4),Re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return v;(r=e.state).mode===A&&(r.mode=j),ne=e.next_out,ee=e.output,oe=e.avail_out,te=e.next_in,Q=e.input,ie=e.avail_in,se=r.hold,ae=r.bits,le=ie,ue=oe,_e=p;e:for(;;)switch(r.mode){case _:if(0===r.wrap){r.mode=j;break}for(;ae<16;){if(0===ie)break e;ie--,se+=Q[te++]<<ae,ae+=8}if(2&r.wrap&&35615===se){r.check=0,Te[0]=255&se,Te[1]=se>>>8&255,r.check=o(r.check,Te,2,0),se=0,ae=0,r.mode=S;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&se)<<8)+(se>>8))%31){e.msg="incorrect header check",r.mode=Y;break}if((15&se)!==C){e.msg="unknown compression method",r.mode=Y;break}if(ae-=4,Ce=8+(15&(se>>>=4)),0===r.wbits)r.wbits=Ce;else if(Ce>r.wbits){e.msg="invalid window size",r.mode=Y;break}r.dmax=1<<Ce,e.adler=r.check=1,r.mode=512&se?O:A,se=0,ae=0;break;case S:for(;ae<16;){if(0===ie)break e;ie--,se+=Q[te++]<<ae,ae+=8}if(r.flags=se,(255&r.flags)!==C){e.msg="unknown compression method",r.mode=Y;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=Y;break}r.head&&(r.head.text=se>>8&1),512&r.flags&&(Te[0]=255&se,Te[1]=se>>>8&255,r.check=o(r.check,Te,2,0)),se=0,ae=0,r.mode=x;case x:for(;ae<32;){if(0===ie)break e;ie--,se+=Q[te++]<<ae,ae+=8}r.head&&(r.head.time=se),512&r.flags&&(Te[0]=255&se,Te[1]=se>>>8&255,Te[2]=se>>>16&255,Te[3]=se>>>24&255,r.check=o(r.check,Te,4,0)),se=0,ae=0,r.mode=k;case k:for(;ae<16;){if(0===ie)break e;ie--,se+=Q[te++]<<ae,ae+=8}r.head&&(r.head.xflags=255&se,r.head.os=se>>8),512&r.flags&&(Te[0]=255&se,Te[1]=se>>>8&255,r.check=o(r.check,Te,2,0)),se=0,ae=0,r.mode=T;case T:if(1024&r.flags){for(;ae<16;){if(0===ie)break e;ie--,se+=Q[te++]<<ae,ae+=8}r.length=se,r.head&&(r.head.extra_len=se),512&r.flags&&(Te[0]=255&se,Te[1]=se>>>8&255,r.check=o(r.check,Te,2,0)),se=0,ae=0}else r.head&&(r.head.extra=null);r.mode=R;case R:if(1024&r.flags&&((ce=r.length)>ie&&(ce=ie),ce&&(r.head&&(Ce=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,Q,te,ce,Ce)),512&r.flags&&(r.check=o(r.check,Q,ce,te)),ie-=ce,te+=ce,r.length-=ce),r.length))break e;r.length=0,r.mode=E;case E:if(2048&r.flags){if(0===ie)break e;ce=0;do{Ce=Q[te+ce++],r.head&&Ce&&r.length<65536&&(r.head.name+=String.fromCharCode(Ce))}while(Ce&&ce<ie);if(512&r.flags&&(r.check=o(r.check,Q,ce,te)),ie-=ce,te+=ce,Ce)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=M;case M:if(4096&r.flags){if(0===ie)break e;ce=0;do{Ce=Q[te+ce++],r.head&&Ce&&r.length<65536&&(r.head.comment+=String.fromCharCode(Ce))}while(Ce&&ce<ie);if(512&r.flags&&(r.check=o(r.check,Q,ce,te)),ie-=ce,te+=ce,Ce)break e}else r.head&&(r.head.comment=null);r.mode=P;case P:if(512&r.flags){for(;ae<16;){if(0===ie)break e;ie--,se+=Q[te++]<<ae,ae+=8}if(se!==(65535&r.check)){e.msg="header crc mismatch",r.mode=Y;break}se=0,ae=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=A;break;case O:for(;ae<32;){if(0===ie)break e;ie--,se+=Q[te++]<<ae,ae+=8}e.adler=r.check=re(se),se=0,ae=0,r.mode=I;case I:if(0===r.havedict)return e.next_out=ne,e.avail_out=oe,e.next_in=te,e.avail_in=ie,r.hold=se,r.bits=ae,g;e.adler=r.check=1,r.mode=A;case A:if(t===d||t===f)break e;case j:if(r.last){se>>>=7&ae,ae-=7&ae,r.mode=K;break}for(;ae<3;){if(0===ie)break e;ie--,se+=Q[te++]<<ae,ae+=8}switch(r.last=1&se,ae-=1,3&(se>>>=1)){case 0:r.mode=D;break;case 1:if(de(r),r.mode=V,t===f){se>>>=2,ae-=2;break e}break;case 2:r.mode=$;break;case 3:e.msg="invalid block type",r.mode=Y}se>>>=2,ae-=2;break;case D:for(se>>>=7&ae,ae-=7&ae;ae<32;){if(0===ie)break e;ie--,se+=Q[te++]<<ae,ae+=8}if((65535&se)!=(se>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Y;break}if(r.length=65535&se,se=0,ae=0,r.mode=N,t===f)break e;case N:r.mode=F;case F:if(ce=r.length){if(ce>ie&&(ce=ie),ce>oe&&(ce=oe),0===ce)break e;n.arraySet(ee,Q,te,ce,ne),ie-=ce,te+=ce,oe-=ce,ne+=ce,r.length-=ce;break}r.mode=A;break;case $:for(;ae<14;){if(0===ie)break e;ie--,se+=Q[te++]<<ae,ae+=8}if(r.nlen=257+(31&se),se>>>=5,ae-=5,r.ndist=1+(31&se),se>>>=5,ae-=5,r.ncode=4+(15&se),se>>>=4,ae-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Y;break}r.have=0,r.mode=L;case L:for(;r.have<r.ncode;){for(;ae<3;){if(0===ie)break e;ie--,se+=Q[te++]<<ae,ae+=8}r.lens[Re[r.have++]]=7&se,se>>>=3,ae-=3}for(;r.have<19;)r.lens[Re[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Se={bits:r.lenbits},_e=a(l,r.lens,0,19,r.lencode,0,r.work,Se),r.lenbits=Se.bits,_e){e.msg="invalid code lengths set",r.mode=Y;break}r.have=0,r.mode=B;case B:for(;r.have<r.nlen+r.ndist;){for(;ge=(ke=r.lencode[se&(1<<r.lenbits)-1])>>>16&255,ve=65535&ke,!((me=ke>>>24)<=ae);){if(0===ie)break e;ie--,se+=Q[te++]<<ae,ae+=8}if(ve<16)se>>>=me,ae-=me,r.lens[r.have++]=ve;else{if(16===ve){for(xe=me+2;ae<xe;){if(0===ie)break e;ie--,se+=Q[te++]<<ae,ae+=8}if(se>>>=me,ae-=me,0===r.have){e.msg="invalid bit length repeat",r.mode=Y;break}Ce=r.lens[r.have-1],ce=3+(3&se),se>>>=2,ae-=2}else if(17===ve){for(xe=me+3;ae<xe;){if(0===ie)break e;ie--,se+=Q[te++]<<ae,ae+=8}ae-=me,Ce=0,ce=3+(7&(se>>>=me)),se>>>=3,ae-=3}else{for(xe=me+7;ae<xe;){if(0===ie)break e;ie--,se+=Q[te++]<<ae,ae+=8}ae-=me,Ce=0,ce=11+(127&(se>>>=me)),se>>>=7,ae-=7}if(r.have+ce>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Y;break}for(;ce--;)r.lens[r.have++]=Ce}}if(r.mode===Y)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=Y;break}if(r.lenbits=9,Se={bits:r.lenbits},_e=a(u,r.lens,0,r.nlen,r.lencode,0,r.work,Se),r.lenbits=Se.bits,_e){e.msg="invalid literal/lengths set",r.mode=Y;break}if(r.distbits=6,r.distcode=r.distdyn,Se={bits:r.distbits},_e=a(c,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Se),r.distbits=Se.bits,_e){e.msg="invalid distances set",r.mode=Y;break}if(r.mode=V,t===f)break e;case V:r.mode=H;case H:if(ie>=6&&oe>=258){e.next_out=ne,e.avail_out=oe,e.next_in=te,e.avail_in=ie,r.hold=se,r.bits=ae,s(e,ue),ne=e.next_out,ee=e.output,oe=e.avail_out,te=e.next_in,Q=e.input,ie=e.avail_in,se=r.hold,ae=r.bits,r.mode===A&&(r.back=-1);break}for(r.back=0;ge=(ke=r.lencode[se&(1<<r.lenbits)-1])>>>16&255,ve=65535&ke,!((me=ke>>>24)<=ae);){if(0===ie)break e;ie--,se+=Q[te++]<<ae,ae+=8}if(ge&&0==(240&ge)){for(ye=me,be=ge,we=ve;ge=(ke=r.lencode[we+((se&(1<<ye+be)-1)>>ye)])>>>16&255,ve=65535&ke,!(ye+(me=ke>>>24)<=ae);){if(0===ie)break e;ie--,se+=Q[te++]<<ae,ae+=8}se>>>=ye,ae-=ye,r.back+=ye}if(se>>>=me,ae-=me,r.back+=me,r.length=ve,0===ge){r.mode=W;break}if(32&ge){r.back=-1,r.mode=A;break}if(64&ge){e.msg="invalid literal/length code",r.mode=Y;break}r.extra=15&ge,r.mode=z;case z:if(r.extra){for(xe=r.extra;ae<xe;){if(0===ie)break e;ie--,se+=Q[te++]<<ae,ae+=8}r.length+=se&(1<<r.extra)-1,se>>>=r.extra,ae-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=U;case U:for(;ge=(ke=r.distcode[se&(1<<r.distbits)-1])>>>16&255,ve=65535&ke,!((me=ke>>>24)<=ae);){if(0===ie)break e;ie--,se+=Q[te++]<<ae,ae+=8}if(0==(240&ge)){for(ye=me,be=ge,we=ve;ge=(ke=r.distcode[we+((se&(1<<ye+be)-1)>>ye)])>>>16&255,ve=65535&ke,!(ye+(me=ke>>>24)<=ae);){if(0===ie)break e;ie--,se+=Q[te++]<<ae,ae+=8}se>>>=ye,ae-=ye,r.back+=ye}if(se>>>=me,ae-=me,r.back+=me,64&ge){e.msg="invalid distance code",r.mode=Y;break}r.offset=ve,r.extra=15&ge,r.mode=q;case q:if(r.extra){for(xe=r.extra;ae<xe;){if(0===ie)break e;ie--,se+=Q[te++]<<ae,ae+=8}r.offset+=se&(1<<r.extra)-1,se>>>=r.extra,ae-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Y;break}r.mode=G;case G:if(0===oe)break e;if(ce=ue-oe,r.offset>ce){if((ce=r.offset-ce)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Y;break}ce>r.wnext?(ce-=r.wnext,he=r.wsize-ce):he=r.wnext-ce,ce>r.length&&(ce=r.length),pe=r.window}else pe=ee,he=ne-r.offset,ce=r.length;ce>oe&&(ce=oe),oe-=ce,r.length-=ce;do{ee[ne++]=pe[he++]}while(--ce);0===r.length&&(r.mode=H);break;case W:if(0===oe)break e;ee[ne++]=r.length,oe--,r.mode=H;break;case K:if(r.wrap){for(;ae<32;){if(0===ie)break e;ie--,se|=Q[te++]<<ae,ae+=8}if(ue-=oe,e.total_out+=ue,r.total+=ue,ue&&(e.adler=r.check=r.flags?o(r.check,ee,ue,ne-ue):i(r.check,ee,ue,ne-ue)),ue=oe,(r.flags?se:re(se))!==r.check){e.msg="incorrect data check",r.mode=Y;break}se=0,ae=0}r.mode=J;case J:if(r.wrap&&r.flags){for(;ae<32;){if(0===ie)break e;ie--,se+=Q[te++]<<ae,ae+=8}if(se!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=Y;break}se=0,ae=0}r.mode=X;case X:_e=m;break e;case Y:_e=y;break e;case Z:return b;default:return v}return e.next_out=ne,e.avail_out=oe,e.next_in=te,e.avail_in=ie,r.hold=se,r.bits=ae,(r.wsize||ue!==e.avail_out&&r.mode<Y&&(r.mode<K||t!==h))&&fe(e,e.output,e.next_out,ue-e.avail_out)?(r.mode=Z,b):(le-=e.avail_in,ue-=e.avail_out,e.total_in+=le,e.total_out+=ue,r.total+=ue,r.wrap&&ue&&(e.adler=r.check=r.flags?o(r.check,ee,ue,e.next_out-ue):i(r.check,ee,ue,e.next_out-ue)),e.data_type=r.bits+(r.last?64:0)+(r.mode===A?128:0)+(r.mode===V||r.mode===N?256:0),(0===le&&0===ue||t===h)&&_e===p&&(_e=w),_e)}function me(e){if(!e||!e.state)return v;var t=e.state;return t.window&&(t.window=null),e.state=null,p}function ge(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?v:(r.head=t,t.done=!1,p):v}function ve(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&r.mode!==I?v:r.mode===I&&i(1,t,n,0)!==r.check?y:fe(e,t,n,n)?(r.mode=Z,b):(r.havedict=1,p):v}r.inflateReset=oe,r.inflateReset2=se,r.inflateResetKeep=ie,r.inflateInit=le,r.inflateInit2=ae,r.inflate=pe,r.inflateEnd=me,r.inflateGetHeader=ge,r.inflateSetDictionary=ve,r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":442,"./adler32":444,"./crc32":446,"./inffast":449,"./inftrees":451}],451:[function(e,t,r){"use strict";var n=e("../utils/common"),i=15,o=852,s=592,a=0,l=1,u=2,c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],h=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,p,m,g,v,y){var b,w,C,_,S,x,k,T,R,E=y.bits,M=0,P=0,O=0,I=0,A=0,j=0,D=0,N=0,F=0,$=0,L=null,B=0,V=new n.Buf16(i+1),H=new n.Buf16(i+1),z=null,U=0;for(M=0;M<=i;M++)V[M]=0;for(P=0;P<p;P++)V[t[r+P]]++;for(A=E,I=i;I>=1&&0===V[I];I--);if(A>I&&(A=I),0===I)return m[g++]=20971520,m[g++]=20971520,y.bits=1,0;for(O=1;O<I&&0===V[O];O++);for(A<O&&(A=O),N=1,M=1;M<=i;M++)if(N<<=1,(N-=V[M])<0)return-1;if(N>0&&(e===a||1!==I))return-1;for(H[1]=0,M=1;M<i;M++)H[M+1]=H[M]+V[M];for(P=0;P<p;P++)0!==t[r+P]&&(v[H[t[r+P]]++]=P);if(e===a?(L=z=v,x=19):e===l?(L=c,B-=257,z=h,U-=257,x=256):(L=d,z=f,x=-1),$=0,P=0,M=O,S=g,j=A,D=0,C=-1,_=(F=1<<A)-1,e===l&&F>o||e===u&&F>s)return 1;for(;;){k=M-D,v[P]<x?(T=0,R=v[P]):v[P]>x?(T=z[U+v[P]],R=L[B+v[P]]):(T=96,R=0),b=1<<M-D,O=w=1<<j;do{m[S+($>>D)+(w-=b)]=k<<24|T<<16|R|0}while(0!==w);for(b=1<<M-1;$&b;)b>>=1;if(0!==b?($&=b-1,$+=b):$=0,P++,0==--V[M]){if(M===I)break;M=t[r+v[P]]}if(M>A&&($&_)!==C){for(0===D&&(D=A),S+=O,N=1<<(j=M-D);j+D<I&&!((N-=V[j+D])<=0);)j++,N<<=1;if(F+=1<<j,e===l&&F>o||e===u&&F>s)return 1;m[C=$&_]=A<<24|j<<16|S-g|0}}return 0!==$&&(m[S+$]=M-D<<24|64<<16|0),y.bits=A,0}},{"../utils/common":442}],452:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],453:[function(e,t,r){"use strict";var n=e("../utils/common"),i=4,o=0,s=1,a=2;function l(e){for(var t=e.length;--t>=0;)e[t]=0}var u=0,c=1,h=2,d=3,f=258,p=29,m=256,g=m+1+p,v=30,y=19,b=2*g+1,w=15,C=16,_=7,S=256,x=16,k=17,T=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],E=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],O=512,I=new Array(2*(g+2));l(I);var A=new Array(2*v);l(A);var j=new Array(O);l(j);var D=new Array(f-d+1);l(D);var N=new Array(p);l(N);var F,$,L,B=new Array(v);function V(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function H(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function z(e){return e<256?j[e]:j[256+(e>>>7)]}function U(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function q(e,t,r){e.bi_valid>C-r?(e.bi_buf|=t<<e.bi_valid&65535,U(e,e.bi_buf),e.bi_buf=t>>C-e.bi_valid,e.bi_valid+=r-C):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function G(e,t,r){q(e,r[2*t],r[2*t+1])}function W(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function K(e){16===e.bi_valid?(U(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function J(e,t){var r,n,i,o,s,a,l=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,h=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(o=0;o<=w;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<b;r++)(o=l[2*l[2*(n=e.heap[r])+1]+1]+1)>p&&(o=p,m++),l[2*n+1]=o,n>u||(e.bl_count[o]++,s=0,n>=f&&(s=d[n-f]),a=l[2*n],e.opt_len+=a*(o+s),h&&(e.static_len+=a*(c[2*n+1]+s)));if(0!==m){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,m-=2}while(m>0);for(o=p;0!==o;o--)for(n=e.bl_count[o];0!==n;)(i=e.heap[--r])>u||(l[2*i+1]!==o&&(e.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),n--)}}function X(e,t,r){var n,i,o=new Array(w+1),s=0;for(n=1;n<=w;n++)o[n]=s=s+r[n-1]<<1;for(i=0;i<=t;i++){var a=e[2*i+1];0!==a&&(e[2*i]=W(o[a]++,a))}}function Y(){var e,t,r,n,i,o=new Array(w+1);for(r=0,n=0;n<p-1;n++)for(N[n]=r,e=0;e<1<<R[n];e++)D[r++]=n;for(D[r-1]=n,i=0,n=0;n<16;n++)for(B[n]=i,e=0;e<1<<E[n];e++)j[i++]=n;for(i>>=7;n<v;n++)for(B[n]=i<<7,e=0;e<1<<E[n]-7;e++)j[256+i++]=n;for(t=0;t<=w;t++)o[t]=0;for(e=0;e<=143;)I[2*e+1]=8,e++,o[8]++;for(;e<=255;)I[2*e+1]=9,e++,o[9]++;for(;e<=279;)I[2*e+1]=7,e++,o[7]++;for(;e<=287;)I[2*e+1]=8,e++,o[8]++;for(X(I,g+1,o),e=0;e<v;e++)A[2*e+1]=5,A[2*e]=W(e,5);F=new V(I,R,m+1,g,w),$=new V(A,E,0,v,w),L=new V(new Array(0),M,0,y,_)}function Z(e){var t;for(t=0;t<g;t++)e.dyn_ltree[2*t]=0;for(t=0;t<v;t++)e.dyn_dtree[2*t]=0;for(t=0;t<y;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*S]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Q(e){e.bi_valid>8?U(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function ee(e,t,r,i){Q(e),i&&(U(e,r),U(e,~r)),n.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}function te(e,t,r,n){var i=2*t,o=2*r;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]}function re(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&te(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!te(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function ne(e,t,r){var n,i,o,s,a=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*a]<<8|e.pending_buf[e.d_buf+2*a+1],i=e.pending_buf[e.l_buf+a],a++,0===n?G(e,i,t):(G(e,(o=D[i])+m+1,t),0!==(s=R[o])&&q(e,i-=N[o],s),G(e,o=z(--n),r),0!==(s=E[o])&&q(e,n-=B[o],s))}while(a<e.last_lit);G(e,S,t)}function ie(e,t){var r,n,i,o=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=b,r=0;r<l;r++)0!==o[2*r]?(e.heap[++e.heap_len]=u=r,e.depth[r]=0):o[2*r+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=s[2*i+1]);for(t.max_code=u,r=e.heap_len>>1;r>=1;r--)re(e,o,r);i=l;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],re(e,o,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,o[2*i]=o[2*r]+o[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,o[2*r+1]=o[2*n+1]=i,e.heap[1]=i++,re(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],J(e,t),X(o,u,e.bl_count)}function oe(e,t,r){var n,i,o=-1,s=t[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=t[2*(n+1)+1],++a<l&&i===s||(a<u?e.bl_tree[2*i]+=a:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*x]++):a<=10?e.bl_tree[2*k]++:e.bl_tree[2*T]++,a=0,o=i,0===s?(l=138,u=3):i===s?(l=6,u=3):(l=7,u=4))}function se(e,t,r){var n,i,o=-1,s=t[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),n=0;n<=r;n++)if(i=s,s=t[2*(n+1)+1],!(++a<l&&i===s)){if(a<u)do{G(e,i,e.bl_tree)}while(0!=--a);else 0!==i?(i!==o&&(G(e,i,e.bl_tree),a--),G(e,x,e.bl_tree),q(e,a-3,2)):a<=10?(G(e,k,e.bl_tree),q(e,a-3,3)):(G(e,T,e.bl_tree),q(e,a-11,7));a=0,o=i,0===s?(l=138,u=3):i===s?(l=6,u=3):(l=7,u=4)}}function ae(e){var t;for(oe(e,e.dyn_ltree,e.l_desc.max_code),oe(e,e.dyn_dtree,e.d_desc.max_code),ie(e,e.bl_desc),t=y-1;t>=3&&0===e.bl_tree[2*P[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function le(e,t,r,n){var i;for(q(e,t-257,5),q(e,r-1,5),q(e,n-4,4),i=0;i<n;i++)q(e,e.bl_tree[2*P[i]+1],3);se(e,e.dyn_ltree,t-1),se(e,e.dyn_dtree,r-1)}function ue(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return o;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return s;for(t=32;t<m;t++)if(0!==e.dyn_ltree[2*t])return s;return o}l(B);var ce=!1;function he(e){ce||(Y(),ce=!0),e.l_desc=new H(e.dyn_ltree,F),e.d_desc=new H(e.dyn_dtree,$),e.bl_desc=new H(e.bl_tree,L),e.bi_buf=0,e.bi_valid=0,Z(e)}function de(e,t,r,n){q(e,(u<<1)+(n?1:0),3),ee(e,t,r,!0)}function fe(e){q(e,c<<1,3),G(e,S,I),K(e)}function pe(e,t,r,n){var o,s,l=0;e.level>0?(e.strm.data_type===a&&(e.strm.data_type=ue(e)),ie(e,e.l_desc),ie(e,e.d_desc),l=ae(e),o=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=o&&(o=s)):o=s=r+5,r+4<=o&&-1!==t?de(e,t,r,n):e.strategy===i||s===o?(q(e,(c<<1)+(n?1:0),3),ne(e,I,A)):(q(e,(h<<1)+(n?1:0),3),le(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),ne(e,e.dyn_ltree,e.dyn_dtree)),Z(e),n&&Q(e)}function me(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(D[r]+m+1)]++,e.dyn_dtree[2*z(t)]++),e.last_lit===e.lit_bufsize-1}r._tr_init=he,r._tr_stored_block=de,r._tr_flush_block=pe,r._tr_tally=me,r._tr_align=fe},{"../utils/common":442}],454:[function(e,t,r){"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=n},{}],455:[function(e,t,r){t.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],456:[function(e,t,r){"use strict";var n=e("asn1.js");r.certificate=e("./certificate");var i=n.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));r.RSAPrivateKey=i;var o=n.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));r.RSAPublicKey=o;var s=n.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())}));r.PublicKey=s;var a=n.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),l=n.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(a),this.key("subjectPrivateKey").octstr())}));r.PrivateKey=l;var u=n.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));r.EncryptedPrivateKey=u;var c=n.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));r.DSAPrivateKey=c,r.DSAparam=n.define("DSAparam",(function(){this.int()}));var h=n.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(d),this.key("publicKey").optional().explicit(1).bitstr())}));r.ECPrivateKey=h;var d=n.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));r.signature=n.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},{"./certificate":457,"asn1.js":167}],457:[function(e,t,r){"use strict";var n=e("asn1.js"),i=n.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),o=n.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),s=n.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),a=n.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())})),l=n.define("RelativeDistinguishedName",(function(){this.setof(o)})),u=n.define("RDNSequence",(function(){this.seqof(l)})),c=n.define("Name",(function(){this.choice({rdnSequence:this.use(u)})})),h=n.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(i),this.key("notAfter").use(i))})),d=n.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),f=n.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(s),this.key("issuer").use(c),this.key("validity").use(h),this.key("subject").use(c),this.key("subjectPublicKeyInfo").use(a),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(d).optional())})),p=n.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(f),this.key("signatureAlgorithm").use(s),this.key("signatureValue").bitstr())}));t.exports=p},{"asn1.js":167}],458:[function(e,t,r){"use strict";var n=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,s=e("evp_bytestokey"),a=e("browserify-aes"),l=e("safe-buffer").Buffer;t.exports=function(e,t){var r,u=e.toString(),c=u.match(n);if(c){var h="aes"+c[1],d=l.from(c[2],"hex"),f=l.from(c[3].replace(/[\r\n]/g,""),"base64"),p=s(t,d.slice(0,8),parseInt(c[1],10)).key,m=[],g=a.createDecipheriv(h,p,d);m.push(g.update(f)),m.push(g.final()),r=l.concat(m)}else{var v=u.match(o);r=l.from(v[2].replace(/[\r\n]/g,""),"base64")}return{tag:u.match(i)[1],data:r}}},{"browserify-aes":188,evp_bytestokey:368,"safe-buffer":494}],459:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var i=e("./asn1"),o=e("./aesid.json"),s=e("./fixProc"),a=e("browserify-aes"),l=e("pbkdf2"),u=e("safe-buffer").Buffer;function c(e){var t;"object"!==n(e)||u.isBuffer(e)||(t=e.passphrase,e=e.key),"string"==typeof e&&(e=u.from(e));var r,o,a=s(e,t),l=a.tag,c=a.data;switch(l){case"CERTIFICATE":o=i.certificate.decode(c,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(o||(o=i.PublicKey.decode(c,"der")),r=o.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPublicKey.decode(o.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return o.subjectPrivateKey=o.subjectPublicKey,{type:"ec",data:o};case"1.2.840.10040.4.1":return o.algorithm.params.pub_key=i.DSAparam.decode(o.subjectPublicKey.data,"der"),{type:"dsa",data:o.algorithm.params};default:throw new Error("unknown key id "+r)}case"ENCRYPTED PRIVATE KEY":c=h(c=i.EncryptedPrivateKey.decode(c,"der"),t);case"PRIVATE KEY":switch(r=(o=i.PrivateKey.decode(c,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPrivateKey.decode(o.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:o.algorithm.curve,privateKey:i.ECPrivateKey.decode(o.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return o.algorithm.params.priv_key=i.DSAparam.decode(o.subjectPrivateKey,"der"),{type:"dsa",params:o.algorithm.params};default:throw new Error("unknown key id "+r)}case"RSA PUBLIC KEY":return i.RSAPublicKey.decode(c,"der");case"RSA PRIVATE KEY":return i.RSAPrivateKey.decode(c,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:i.DSAPrivateKey.decode(c,"der")};case"EC PRIVATE KEY":return{curve:(c=i.ECPrivateKey.decode(c,"der")).parameters.value,privateKey:c.privateKey};default:throw new Error("unknown key type "+l)}}function h(e,t){var r=e.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),i=o[e.algorithm.decrypt.cipher.algo.join(".")],s=e.algorithm.decrypt.cipher.iv,c=e.subjectPrivateKey,h=parseInt(i.split("-")[1],10)/8,d=l.pbkdf2Sync(t,r,n,h,"sha1"),f=a.createDecipheriv(i,d,s),p=[];return p.push(f.update(c)),p.push(f.final()),u.concat(p)}t.exports=c,c.signature=i.signature},{"./aesid.json":455,"./asn1":456,"./fixProc":458,"browserify-aes":188,pbkdf2:460,"safe-buffer":494}],460:[function(e,t,r){"use strict";r.pbkdf2=e("./lib/async"),r.pbkdf2Sync=e("./lib/sync")},{"./lib/async":461,"./lib/sync":464}],461:[function(e,t,n){(function(r,n){"use strict";var i,o=e("safe-buffer").Buffer,s=e("./precondition"),a=e("./default-encoding"),l=e("./sync"),u=e("./to-buffer"),c=n.crypto&&n.crypto.subtle,h={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},d=[];function f(e){if(n.process&&!n.process.browser)return Promise.resolve(!1);if(!c||!c.importKey||!c.deriveBits)return Promise.resolve(!1);if(void 0!==d[e])return d[e];var t=p(i=i||o.alloc(8),i,10,128,e).then((function(){return!0})).catch((function(){return!1}));return d[e]=t,t}function p(e,t,r,n,i){return c.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then((function(e){return c.deriveBits({name:"PBKDF2",salt:t,iterations:r,hash:{name:i}},e,n<<3)})).then((function(e){return o.from(e)}))}function m(e,t){e.then((function(e){r.nextTick((function(){t(null,e)}))}),(function(e){r.nextTick((function(){t(e)}))}))}t.exports=function(e,t,i,o,c,d){"function"==typeof c&&(d=c,c=void 0);var g=h[(c=c||"sha1").toLowerCase()];if(!g||"function"!=typeof n.Promise)return r.nextTick((function(){var r;try{r=l(e,t,i,o,c)}catch(e){return d(e)}d(null,r)}));if(s(i,o),e=u(e,a,"Password"),t=u(t,a,"Salt"),"function"!=typeof d)throw new Error("No callback provided to pbkdf2");m(f(g).then((function(r){return r?p(e,t,i,o,g):l(e,t,i,o,c)})),d)}}).call(this,e("_process"),void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./default-encoding":462,"./precondition":463,"./sync":464,"./to-buffer":465,_process:467,"safe-buffer":494}],462:[function(e,t,r){(function(e){"use strict";var r;r=e.browser?"utf-8":e.version?parseInt(e.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":"utf-8",t.exports=r}).call(this,e("_process"))},{_process:467}],463:[function(e,t,r){"use strict";var n=Math.pow(2,30)-1;t.exports=function(e,t){if("number"!=typeof e)throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if("number"!=typeof t)throw new TypeError("Key length not a number");if(t<0||t>n||t!=t)throw new TypeError("Bad key length")}},{}],464:[function(e,t,r){"use strict";var n=e("create-hash/md5"),i=e("ripemd160"),o=e("sha.js"),s=e("safe-buffer").Buffer,a=e("./precondition"),l=e("./default-encoding"),u=e("./to-buffer"),c=s.alloc(128),h={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function d(e,t,r){var n=f(e),i="sha512"===e||"sha384"===e?128:64;t.length>i?t=n(t):t.length<i&&(t=s.concat([t,c],i));for(var o=s.allocUnsafe(i+h[e]),a=s.allocUnsafe(i+h[e]),l=0;l<i;l++)o[l]=54^t[l],a[l]=92^t[l];var u=s.allocUnsafe(i+r+4);o.copy(u,0,0,i),this.ipad1=u,this.ipad2=o,this.opad=a,this.alg=e,this.blocksize=i,this.hash=n,this.size=h[e]}function f(e){function t(t){return o(e).update(t).digest()}function r(e){return(new i).update(e).digest()}return"rmd160"===e||"ripemd160"===e?r:"md5"===e?n:t}function p(e,t,r,n,i){a(r,n);var o=new d(i=i||"sha1",e=u(e,l,"Password"),(t=u(t,l,"Salt")).length),c=s.allocUnsafe(n),f=s.allocUnsafe(t.length+4);t.copy(f,0,0,t.length);for(var p=0,m=h[i],g=Math.ceil(n/m),v=1;v<=g;v++){f.writeUInt32BE(v,t.length);for(var y=o.run(f,o.ipad1),b=y,w=1;w<r;w++){b=o.run(b,o.ipad2);for(var C=0;C<m;C++)y[C]^=b[C]}y.copy(c,p),p+=m}return c}d.prototype.run=function(e,t){return e.copy(t,this.blocksize),this.hash(t).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=p},{"./default-encoding":462,"./precondition":463,"./to-buffer":465,"create-hash/md5":332,ripemd160:493,"safe-buffer":494,"sha.js":499}],465:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer;t.exports=function(e,t,r){if(n.isBuffer(e))return e;if("string"==typeof e)return n.from(e,t);if(ArrayBuffer.isView(e))return n.from(e.buffer);throw new TypeError(r+" must be a string, a Buffer, a typed array or a DataView")}},{"safe-buffer":494}],466:[function(e,t,r){(function(e){"use strict";function r(t,r,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,r)}));case 3:return e.nextTick((function(){t.call(null,r,n)}));case 4:return e.nextTick((function(){t.call(null,r,n,i)}));default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick((function(){t.apply(null,o)}))}}void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:r}:t.exports=e}).call(this,e("_process"))},{_process:467}],467:[function(e,t,r){"use strict";var n,i,o=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function l(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}function u(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var c,h=[],d=!1,f=-1;function p(){d&&c&&(d=!1,c.length?h=c.concat(h):f=-1,h.length&&m())}function m(){if(!d){var e=l(p);d=!0;for(var t=h.length;t;){for(c=h,h=[];++f<t;)c&&c[f].run();f=-1,t=h.length}c=null,d=!1,u(e)}}function g(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];h.push(new g(e,t)),1!==h.length||d||l(m)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],468:[function(e,t,r){"use strict";r.publicEncrypt=e("./publicEncrypt"),r.privateDecrypt=e("./privateDecrypt"),r.privateEncrypt=function(e,t){return r.publicEncrypt(e,t,!0)},r.publicDecrypt=function(e,t){return r.privateDecrypt(e,t,!0)}},{"./privateDecrypt":471,"./publicEncrypt":472}],469:[function(e,t,r){"use strict";var n=e("create-hash"),i=e("safe-buffer").Buffer;function o(e){var t=i.allocUnsafe(4);return t.writeUInt32BE(e,0),t}t.exports=function(e,t){for(var r,s=i.alloc(0),a=0;s.length<t;)r=o(a++),s=i.concat([s,n("sha1").update(e).update(r).digest()]);return s.slice(0,t)}},{"create-hash":331,"safe-buffer":494}],470:[function(e,t,r){arguments[4][181][0].apply(r,arguments)},{buffer:185,dup:181}],471:[function(e,t,r){"use strict";var n=e("parse-asn1"),i=e("./mgf"),o=e("./xor"),s=e("bn.js"),a=e("browserify-rsa"),l=e("create-hash"),u=e("./withPublic"),c=e("safe-buffer").Buffer;function h(e,t){var r=e.modulus.byteLength(),n=l("sha1").update(c.alloc(0)).digest(),s=n.length;if(0!==t[0])throw new Error("decryption error");var a=t.slice(1,s+1),u=t.slice(s+1),h=o(a,i(u,s)),d=o(u,i(h,r-s-1));if(f(n,d.slice(0,s)))throw new Error("decryption error");for(var p=s;0===d[p];)p++;if(1!==d[p++])throw new Error("decryption error");return d.slice(p)}function d(e,t,r){for(var n=t.slice(0,2),i=2,o=0;0!==t[i++];)if(i>=t.length){o++;break}var s=t.slice(2,i-1);if(("0002"!==n.toString("hex")&&!r||"0001"!==n.toString("hex")&&r)&&o++,s.length<8&&o++,o)throw new Error("decryption error");return t.slice(i)}function f(e,t){e=c.from(e),t=c.from(t);var r=0,n=e.length;e.length!==t.length&&(r++,n=Math.min(e.length,t.length));for(var i=-1;++i<n;)r+=e[i]^t[i];return r}t.exports=function(e,t,r){var i;i=e.padding?e.padding:r?1:4;var o,l=n(e),f=l.modulus.byteLength();if(t.length>f||new s(t).cmp(l.modulus)>=0)throw new Error("decryption error");o=r?u(new s(t),l):a(t,l);var p=c.alloc(f-o.length);if(o=c.concat([p,o],f),4===i)return h(l,o);if(1===i)return d(l,o,r);if(3===i)return o;throw new Error("unknown padding")}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":206,"create-hash":331,"parse-asn1":459,"safe-buffer":494}],472:[function(e,t,r){"use strict";var n=e("parse-asn1"),i=e("randombytes"),o=e("create-hash"),s=e("./mgf"),a=e("./xor"),l=e("bn.js"),u=e("./withPublic"),c=e("browserify-rsa"),h=e("safe-buffer").Buffer;function d(e,t){var r=e.modulus.byteLength(),n=t.length,u=o("sha1").update(h.alloc(0)).digest(),c=u.length,d=2*c;if(n>r-d-2)throw new Error("message too long");var f=h.alloc(r-n-d-2),p=r-c-1,m=i(c),g=a(h.concat([u,f,h.alloc(1,1),t],p),s(m,p)),v=a(m,s(g,c));return new l(h.concat([h.alloc(1),v,g],r))}function f(e,t,r){var n,i=t.length,o=e.modulus.byteLength();if(i>o-11)throw new Error("message too long");return n=r?h.alloc(o-i-3,255):p(o-i-3),new l(h.concat([h.from([0,r?1:2]),n,h.alloc(1),t],o))}function p(e){for(var t,r=h.allocUnsafe(e),n=0,o=i(2*e),s=0;n<e;)s===o.length&&(o=i(2*e),s=0),(t=o[s++])&&(r[n++]=t);return r}t.exports=function(e,t,r){var i;i=e.padding?e.padding:r?1:4;var o,s=n(e);if(4===i)o=d(s,t);else if(1===i)o=f(s,t,r);else{if(3!==i)throw new Error("unknown padding");if((o=new l(t)).cmp(s.modulus)>=0)throw new Error("data too long for modulus")}return r?c(o,s):u(o,s)}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":206,"create-hash":331,"parse-asn1":459,randombytes:475,"safe-buffer":494}],473:[function(e,t,r){"use strict";var n=e("bn.js"),i=e("safe-buffer").Buffer;function o(e,t){return i.from(e.toRed(n.mont(t.modulus)).redPow(new n(t.publicExponent)).fromRed().toArray())}t.exports=o},{"bn.js":470,"safe-buffer":494}],474:[function(e,t,r){"use strict";t.exports=function(e,t){for(var r=e.length,n=-1;++n<r;)e[n]^=t[n];return e}},{}],475:[function(e,t,n){(function(r,n){"use strict";var i=65536,o=4294967295;function s(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}var a=e("safe-buffer").Buffer,l=n.crypto||n.msCrypto;function u(e,t){if(e>o)throw new RangeError("requested too many random bytes");var n=a.allocUnsafe(e);if(e>0)if(e>i)for(var s=0;s<e;s+=i)l.getRandomValues(n.slice(s,s+i));else l.getRandomValues(n);return"function"==typeof t?r.nextTick((function(){t(null,n)})):n}l&&l.getRandomValues?t.exports=u:t.exports=s}).call(this,e("_process"),void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:467,"safe-buffer":494}],476:[function(e,t,n){(function(t,r){"use strict";function i(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var o=e("safe-buffer"),s=e("randombytes"),a=o.Buffer,l=o.kMaxLength,u=r.crypto||r.msCrypto,c=Math.pow(2,32)-1;function h(e,t){if("number"!=typeof e||e!=e)throw new TypeError("offset must be a number");if(e>c||e<0)throw new TypeError("offset must be a uint32");if(e>l||e>t)throw new RangeError("offset out of range")}function d(e,t,r){if("number"!=typeof e||e!=e)throw new TypeError("size must be a number");if(e>c||e<0)throw new TypeError("size must be a uint32");if(e+t>r||e>l)throw new RangeError("buffer too small")}function f(e,t,n,i){if(!(a.isBuffer(e)||e instanceof r.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof t)i=t,t=0,n=e.length;else if("function"==typeof n)i=n,n=e.length-t;else if("function"!=typeof i)throw new TypeError('"cb" argument must be a function');return h(t,e.length),d(n,t,e.length),p(e,t,n,i)}function p(e,r,n,i){if(t.browser){var o=e.buffer,a=new Uint8Array(o,r,n);return u.getRandomValues(a),i?void t.nextTick((function(){i(null,e)})):e}if(!i)return s(n).copy(e,r),e;s(n,(function(t,n){if(t)return i(t);n.copy(e,r),i(null,e)}))}function m(e,t,n){if(void 0===t&&(t=0),!(a.isBuffer(e)||e instanceof r.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return h(t,e.length),void 0===n&&(n=e.length-t),d(n,t,e.length),p(e,t,n)}u&&u.getRandomValues||!t.browser?(n.randomFill=f,n.randomFillSync=m):(n.randomFill=i,n.randomFillSync=i)}).call(this,e("_process"),void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:467,randombytes:475,"safe-buffer":494}],477:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var o={};function s(e,t,r){function n(e,r,n){return"string"==typeof t?t:t(e,r,n)}r||(r=Error);var s=function(e){function t(t,r,i){return e.call(this,n(t,r,i))||this}return i(t,e),t}(r);s.prototype.name=r.name,s.prototype.code=e,o[e]=s}function a(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}function l(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function u(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function c(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}s("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),s("ERR_INVALID_ARG_TYPE",(function(e,t,r){var i,o;if("string"==typeof t&&l(t,"not ")?(i="must not be",t=t.replace(/^not /,"")):i="must be",u(e," argument"))o="The ".concat(e," ").concat(i," ").concat(a(t,"type"));else{var s=c(e,".")?"property":"argument";o='The "'.concat(e,'" ').concat(s," ").concat(i," ").concat(a(t,"type"))}return o+=". Received type ".concat(n(r))}),TypeError),s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),s("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),s("ERR_STREAM_PREMATURE_CLOSE","Premature close"),s("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),s("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),s("ERR_STREAM_WRITE_AFTER_END","write after end"),s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),s("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=o},{}],478:[function(e,t,r){(function(r){"use strict";var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=u;var i=e("./_stream_readable"),o=e("./_stream_writable");e("inherits")(u,i);for(var s=n(o.prototype),a=0;a<s.length;a++){var l=s[a];u.prototype[l]||(u.prototype[l]=o.prototype[l])}function u(e){if(!(this instanceof u))return new u(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||r.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,e("_process"))},{"./_stream_readable":480,"./_stream_writable":482,_process:467,inherits:387}],479:[function(e,t,r){"use strict";t.exports=i;var n=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}e("inherits")(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":481,inherits:387}],480:[function(e,t,n){(function(r,n){"use strict";var i;t.exports=E,E.ReadableState=R,e("events").EventEmitter;var o=function(e,t){return e.listeners(t).length},s=e("./internal/streams/stream"),a=e("buffer").Buffer,l=n.Uint8Array||function(){};function u(e){return a.from(e)}function c(e){return a.isBuffer(e)||e instanceof l}var h,d=e("util");h=d&&d.debuglog?d.debuglog("stream"):function(){};var f,p,m,g=e("./internal/streams/buffer_list"),v=e("./internal/streams/destroy"),y=e("./internal/streams/state").getHighWaterMark,b=e("../errors").codes,w=b.ERR_INVALID_ARG_TYPE,C=b.ERR_STREAM_PUSH_AFTER_EOF,_=b.ERR_METHOD_NOT_IMPLEMENTED,S=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(E,s);var x=v.errorOrDestroy,k=["error","close","destroy","pause","resume"];function T(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function R(t,r,n){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof n&&(n=r instanceof i),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=y(this,t,"readableHighWaterMark",n),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(f||(f=e("string_decoder/").StringDecoder),this.decoder=new f(t.encoding),this.encoding=t.encoding)}function E(t){if(i=i||e("./_stream_duplex"),!(this instanceof E))return new E(t);var r=this instanceof i;this._readableState=new R(t,this,r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function M(e,t,r,n,i){h("readableAddChunk",t);var o,s=e._readableState;if(null===t)s.reading=!1,D(e,s);else if(i||(o=O(s,t)),o)x(e,o);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=u(t)),n)s.endEmitted?x(e,new S):P(e,s,t,!0);else if(s.ended)x(e,new C);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?P(e,s,t,!1):$(e,s)):P(e,s,t,!1)}else n||(s.reading=!1,$(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function P(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&N(e)),$(e,t)}function O(e,t){var r;return c(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new w("chunk",["string","Buffer","Uint8Array"],t)),r}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),E.prototype.destroy=v.destroy,E.prototype._undestroy=v.undestroy,E.prototype._destroy=function(e,t){t(e)},E.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=a.from(e,t),t=""),r=!0),M(this,e,t,!1,r)},E.prototype.unshift=function(e){return M(this,e,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(t){f||(f=e("string_decoder/").StringDecoder);var r=new f(t);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=r.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var I=1073741824;function A(e){return e>=I?e=I:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function j(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=A(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function D(e,t){if(h("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?N(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,F(e)))}}function N(e){var t=e._readableState;h("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(h("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(F,e))}function F(e){var t=e._readableState;h("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,q(e)}function $(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(L,e,t))}function L(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(h("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function B(e){return function(){var t=e._readableState;h("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,q(e))}}function V(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function H(e){h("readable nexttick read 0"),e.read(0)}function z(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(U,e,t))}function U(e,t){h("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),q(e),t.flowing&&!t.reading&&e.read(0)}function q(e){var t=e._readableState;for(h("flow",t.flowing);t.flowing&&null!==e.read(););}function G(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function W(e){var t=e._readableState;h("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(K,t,e))}function K(e,t){if(h("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function J(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}E.prototype.read=function(e){h("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return h("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?W(this):N(this),null;if(0===(e=j(e,t))&&t.ended)return 0===t.length&&W(this),null;var n,i=t.needReadable;return h("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&h("length less than watermark",i=!0),t.ended||t.reading?h("reading or ended",i=!1):i&&(h("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=j(r,t))),null===(n=e>0?G(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&W(this)),null!==n&&this.emit("data",n),n},E.prototype._read=function(e){x(this,new _("_read()"))},E.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,h("pipe count=%d opts=%j",i.pipesCount,t);var s=t&&!1===t.end||e===r.stdout||e===r.stderr?v:l;function a(e,t){h("onunpipe"),e===n&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,d())}function l(){h("onend"),e.end()}i.endEmitted?r.nextTick(s):n.once("end",s),e.on("unpipe",a);var u=B(n);e.on("drain",u);var c=!1;function d(){h("cleanup"),e.removeListener("close",m),e.removeListener("finish",g),e.removeListener("drain",u),e.removeListener("error",p),e.removeListener("unpipe",a),n.removeListener("end",l),n.removeListener("end",v),n.removeListener("data",f),c=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||u()}function f(t){h("ondata");var r=e.write(t);h("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==J(i.pipes,e))&&!c&&(h("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function p(t){h("onerror",t),v(),e.removeListener("error",p),0===o(e,"error")&&x(e,t)}function m(){e.removeListener("finish",g),v()}function g(){h("onfinish"),e.removeListener("close",m),v()}function v(){h("unpipe"),n.unpipe(e)}return n.on("data",f),T(e,"error",p),e.once("close",m),e.once("finish",g),e.emit("pipe",n),i.flowing||(h("pipe resume"),n.resume()),e},E.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=J(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},E.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,h("on readable",i.length,i.reading),i.length?N(this):i.reading||r.nextTick(H,this))),n},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(V,this),n},E.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(V,this),t},E.prototype.resume=function(){var e=this._readableState;return e.flowing||(h("resume"),e.flowing=!e.readableListening,z(this,e)),e.paused=!1,this},E.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(h("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){h("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<k.length;o++)e.on(k[o],this.emit.bind(this,k[o]));return this._read=function(t){h("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===p&&(p=e("./internal/streams/async_iterator")),p(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),E._fromList=G,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(t,r){return void 0===m&&(m=e("./internal/streams/from")),m(E,t,r)})}).call(this,e("_process"),void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/async_iterator":483,"./internal/streams/buffer_list":484,"./internal/streams/destroy":485,"./internal/streams/from":487,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:216,events:367,inherits:387,"string_decoder/":520,util:185}],481:[function(e,t,r){"use strict";t.exports=c;var n=e("../errors").codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,l=e("./_stream_duplex");function u(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);l.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function h(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush((function(t,r){d(e,t,r)}))}function d(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}e("inherits")(c,l),c.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},c.prototype._transform=function(e,t,r){r(new i("_transform()"))},c.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},c.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},c.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,(function(e){t(e)}))}},{"../errors":477,"./_stream_duplex":478,inherits:387}],482:[function(e,t,n){(function(r,n){"use strict";function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){U(t,e)}}var o;t.exports=R,R.WritableState=T;var s={deprecate:e("util-deprecate")},a=e("./internal/streams/stream"),l=e("buffer").Buffer,u=n.Uint8Array||function(){};function c(e){return l.from(e)}function h(e){return l.isBuffer(e)||e instanceof u}var d,f=e("./internal/streams/destroy"),p=e("./internal/streams/state").getHighWaterMark,m=e("../errors").codes,g=m.ERR_INVALID_ARG_TYPE,v=m.ERR_METHOD_NOT_IMPLEMENTED,y=m.ERR_MULTIPLE_CALLBACK,b=m.ERR_STREAM_CANNOT_PIPE,w=m.ERR_STREAM_DESTROYED,C=m.ERR_STREAM_NULL_VALUES,_=m.ERR_STREAM_WRITE_AFTER_END,S=m.ERR_UNKNOWN_ENCODING,x=f.errorOrDestroy;function k(){}function T(t,r,n){o=o||e("./_stream_duplex"),t=t||{},"boolean"!=typeof n&&(n=r instanceof o),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=p(this,t,"writableHighWaterMark",n),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){D(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function R(t){var r=this instanceof(o=o||e("./_stream_duplex"));if(!r&&!d.call(R,this))return new R(t);this._writableState=new T(t,this,r),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),a.call(this)}function E(e,t){var n=new _;x(e,n),r.nextTick(t,n)}function M(e,t,n,i){var o;return null===n?o=new C:"string"==typeof n||t.objectMode||(o=new g("chunk",["string","Buffer"],n)),!o||(x(e,o),r.nextTick(i,o),!1)}function P(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,r)),t}function O(e,t,r,n,i,o){if(!r){var s=P(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else I(e,t,!1,a,n,i,o);return l}function I(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new w("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function A(e,t,n,i,o){--t.pendingcb,n?(r.nextTick(o,i),r.nextTick(H,e,t),e._writableState.errorEmitted=!0,x(e,i)):(o(i),e._writableState.errorEmitted=!0,x(e,i),H(e,t))}function j(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function D(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if("function"!=typeof o)throw new y;if(j(n),t)A(e,n,i,t,o);else{var s=L(n)||e.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||$(e,n),i?r.nextTick(N,e,n,s,o):N(e,n,s,o)}}function N(e,t,r,n){r||F(e,t),t.pendingcb--,n(),H(e,t)}function F(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function $(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var a=0,l=!0;r;)o[a]=r,r.isBuf||(l=!1),r=r.next,a+=1;o.allBuffers=l,I(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,h=r.callback;if(I(e,t,!1,t.objectMode?1:u.length,u,c,h),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function L(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function B(e,t){e._final((function(r){t.pendingcb--,r&&x(e,r),t.prefinished=!0,e.emit("prefinish"),H(e,t)}))}function V(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(B,e,t)))}function H(e,t){var r=L(t);if(r&&(V(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}function z(e,t,n){t.ending=!0,H(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function U(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}e("inherits")(R,a),T.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(T.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(R,Symbol.hasInstance,{value:function(e){return!!d.call(this,e)||this===R&&e&&e._writableState instanceof T}})):d=function(e){return e instanceof this},R.prototype.pipe=function(){x(this,new b)},R.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=!n.objectMode&&h(e);return o&&!l.isBuffer(e)&&(e=c(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=k),n.ending?E(this,r):(o||M(this,n,e,r))&&(n.pendingcb++,i=O(this,n,o,e,t,r)),i},R.prototype.cork=function(){this._writableState.corked++},R.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||$(this,e))},R.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new S(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(R.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(R.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),R.prototype._write=function(e,t,r){r(new v("_write()"))},R.prototype._writev=null,R.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||z(this,n,r),this},Object.defineProperty(R.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),R.prototype.destroy=f.destroy,R.prototype._undestroy=f.undestroy,R.prototype._destroy=function(e,t){t(e)}}).call(this,e("_process"),void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/destroy":485,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:216,inherits:387,"util-deprecate":522}],483:[function(e,t,r){(function(r){"use strict";var n;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=e("./end-of-stream"),s=Symbol("lastResolve"),a=Symbol("lastReject"),l=Symbol("error"),u=Symbol("ended"),c=Symbol("lastPromise"),h=Symbol("handlePromise"),d=Symbol("stream");function f(e,t){return{value:e,done:t}}function p(e){var t=e[s];if(null!==t){var r=e[d].read();null!==r&&(e[c]=null,e[s]=null,e[a]=null,t(f(r,!1)))}}function m(e){r.nextTick(p,e)}function g(e,t){return function(r,n){e.then((function(){t[u]?r(f(void 0,!0)):t[h](r,n)}),n)}}var v=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((i(n={get stream(){return this[d]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[u])return Promise.resolve(f(void 0,!0));if(this[d].destroyed)return new Promise((function(t,n){r.nextTick((function(){e[l]?n(e[l]):t(f(void 0,!0))}))}));var n,i=this[c];if(i)n=new Promise(g(i,this));else{var o=this[d].read();if(null!==o)return Promise.resolve(f(o,!1));n=new Promise(this[h])}return this[c]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,r){e[d].destroy(null,(function(e){e?r(e):t(f(void 0,!0))}))}))})),n),v),b=function(e){var t,r=Object.create(y,(i(t={},d,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,l,{value:null,writable:!0}),i(t,u,{value:e._readableState.endEmitted,writable:!0}),i(t,h,{value:function(e,t){var n=r[d].read();n?(r[c]=null,r[s]=null,r[a]=null,e(f(n,!1))):(r[s]=e,r[a]=t)},writable:!0}),t));return r[c]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[c]=null,r[s]=null,r[a]=null,t(e)),void(r[l]=e)}var n=r[s];null!==n&&(r[c]=null,r[s]=null,r[a]=null,n(f(void 0,!0))),r[u]=!0})),e.on("readable",m.bind(null,r)),r};t.exports=b}).call(this,e("_process"))},{"./end-of-stream":486,_process:467}],484:[function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}var u=e("buffer").Buffer,c=e("util").inspect,h=c&&c.custom||"inspect";function d(e,t,r){u.prototype.copy.call(e,t,r)}t.exports=function(){function e(){s(this,e),this.head=null,this.tail=null,this.length=0}return l(e,[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return u.alloc(0);for(var t=u.allocUnsafe(e>>>0),r=this.head,n=0;r;)d(r.data,t,n),n+=r.data.length,r=r.next;return t}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0==(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=u.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:h,value:function(e,t){return c(this,i({},t,{depth:0,customInspect:!1}))}}]),e}()},{buffer:216,util:185}],485:[function(e,t,r){(function(e){"use strict";function r(t,r){var o=this,a=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return a||l?(r?r(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(s,this,t)):e.nextTick(s,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!r&&t?o._writableState?o._writableState.errorEmitted?e.nextTick(i,o):(o._writableState.errorEmitted=!0,e.nextTick(n,o,t)):e.nextTick(n,o,t):r?(e.nextTick(i,o),r(t)):e.nextTick(i,o)})),this)}function n(e,t){s(e,t),i(e)}function i(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(e,t){e.emit("error",t)}function a(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}t.exports={destroy:r,undestroy:o,errorOrDestroy:a}}).call(this,e("_process"))},{_process:467}],486:[function(e,t,r){"use strict";var n=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}function o(){}function s(e){return e.setHeader&&"function"==typeof e.abort}function a(e,t,r){if("function"==typeof t)return a(e,null,t);t||(t={}),r=i(r||o);var l=t.readable||!1!==t.readable&&e.readable,u=t.writable||!1!==t.writable&&e.writable,c=function(){e.writable||d()},h=e._writableState&&e._writableState.finished,d=function(){u=!1,h=!0,l||r.call(e)},f=e._readableState&&e._readableState.endEmitted,p=function(){l=!1,f=!0,u||r.call(e)},m=function(t){r.call(e,t)},g=function(){var t;return l&&!f?(e._readableState&&e._readableState.ended||(t=new n),r.call(e,t)):u&&!h?(e._writableState&&e._writableState.ended||(t=new n),r.call(e,t)):void 0},v=function(){e.req.on("finish",d)};return s(e)?(e.on("complete",d),e.on("abort",g),e.req?v():e.on("request",v)):u&&!e._writableState&&(e.on("end",c),e.on("close",c)),e.on("end",p),e.on("finish",d),!1!==t.error&&e.on("error",m),e.on("close",g),function(){e.removeListener("complete",d),e.removeListener("abort",g),e.removeListener("request",v),e.req&&e.req.removeListener("finish",d),e.removeListener("end",c),e.removeListener("close",c),e.removeListener("finish",d),e.removeListener("end",p),e.removeListener("error",m),e.removeListener("close",g)}}t.exports=a},{"../../../errors":477}],487:[function(e,t,r){"use strict";t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],488:[function(e,t,r){"use strict";var n;function i(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var o=e("../../../errors").codes,s=o.ERR_MISSING_ARGS,a=o.ERR_STREAM_DESTROYED;function l(e){if(e)throw e}function u(e){return e.setHeader&&"function"==typeof e.abort}function c(t,r,o,s){s=i(s);var l=!1;t.on("close",(function(){l=!0})),void 0===n&&(n=e("./end-of-stream")),n(t,{readable:r,writable:o},(function(e){if(e)return s(e);l=!0,s()}));var c=!1;return function(e){if(!l&&!c)return c=!0,u(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new a("pipe"))}}function h(e){e()}function d(e,t){return e.pipe(t)}function f(e){return e.length?"function"!=typeof e[e.length-1]?l:e.pop():l}function p(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=f(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new s("streams");var o=t.map((function(e,r){var s=r<t.length-1;return c(e,s,r>0,(function(e){n||(n=e),e&&o.forEach(h),s||(o.forEach(h),i(n))}))}));return t.reduce(d)}t.exports=p},{"../../../errors":477,"./end-of-stream":486}],489:[function(e,t,r){"use strict";var n=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;function i(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}function o(e,t,r,o){var s=i(t,o,r);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new n(o?r:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}t.exports={getHighWaterMark:o}},{"../../../errors":477}],490:[function(e,t,r){"use strict";t.exports=e("events").EventEmitter},{events:367}],491:[function(e,t,r){"use strict";(r=t.exports=e("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),r.finished=e("./lib/internal/streams/end-of-stream.js"),r.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":478,"./lib/_stream_passthrough.js":479,"./lib/_stream_readable.js":480,"./lib/_stream_transform.js":481,"./lib/_stream_writable.js":482,"./lib/internal/streams/end-of-stream.js":486,"./lib/internal/streams/pipeline.js":488}],492:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var i=function(e){var t,r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,o=Object.create(i.prototype),s=new P(n||[]);return o._invoke=T(e,r,s),o}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",f="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var w={};w[s]=function(){return this};var C=Object.getPrototypeOf,_=C&&C(C(O([])));_&&_!==r&&i.call(_,s)&&(w=_);var S=b.prototype=v.prototype=Object.create(w);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,s,a,l){var u=h(e[o],e,s);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"===n(d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,l)}),(function(e){r("throw",e,a,l)})):t.resolve(d).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,l)}))}l(u.arg)}var o;function s(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}this._invoke=s}function T(e,t,r){var n=d;return function(i,o){if(n===p)throw new Error("Generator is already running");if(n===m){if("throw"===i)throw o;return I()}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var a=R(s,r);if(a){if(a===g)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var l=h(e,t,r);if("normal"===l.type){if(n=r.done?m:f,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=m,r.method="throw",r.arg=l.arg)}}}function R(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,R(e,r),"throw"===r.method))return g;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=h(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var o=i.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function O(e){if(e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}return{next:I}}function I(){return{value:t,done:!0}}return y.prototype=S.constructor=b,b.constructor=y,y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},x(k.prototype),k.prototype[a]=function(){return this},e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var s=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},x(S),u(S,l,"Generator"),S[s]=function(){return this},S.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,i){return a.type="throw",a.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var l=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(l&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),M(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;M(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}("object"===(void 0===t?"undefined":n(t))?t.exports:{});try{regeneratorRuntime=i}catch(e){Function("r","regeneratorRuntime = r")(i)}},{}],493:[function(e,t,r){"use strict";var n=e("buffer").Buffer,i=e("inherits"),o=e("hash-base"),s=new Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],l=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],u=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],c=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],h=[0,1518500249,1859775393,2400959708,2840853838],d=[1352829926,1548603684,1836072691,2053994217,0];function f(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(e,t){return e<<t|e>>>32-t}function m(e,t,r,n,i,o,s,a){return p(e+(t^r^n)+o+s|0,a)+i|0}function g(e,t,r,n,i,o,s,a){return p(e+(t&r|~t&n)+o+s|0,a)+i|0}function v(e,t,r,n,i,o,s,a){return p(e+((t|~r)^n)+o+s|0,a)+i|0}function y(e,t,r,n,i,o,s,a){return p(e+(t&n|r&~n)+o+s|0,a)+i|0}function b(e,t,r,n,i,o,s,a){return p(e+(t^(r|~n))+o+s|0,a)+i|0}i(f,o),f.prototype._update=function(){for(var e=s,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,f=0|this._e,w=0|this._a,C=0|this._b,_=0|this._c,S=0|this._d,x=0|this._e,k=0;k<80;k+=1){var T,R;k<16?(T=m(r,n,i,o,f,e[a[k]],h[0],u[k]),R=b(w,C,_,S,x,e[l[k]],d[0],c[k])):k<32?(T=g(r,n,i,o,f,e[a[k]],h[1],u[k]),R=y(w,C,_,S,x,e[l[k]],d[1],c[k])):k<48?(T=v(r,n,i,o,f,e[a[k]],h[2],u[k]),R=v(w,C,_,S,x,e[l[k]],d[2],c[k])):k<64?(T=y(r,n,i,o,f,e[a[k]],h[3],u[k]),R=g(w,C,_,S,x,e[l[k]],d[3],c[k])):(T=b(r,n,i,o,f,e[a[k]],h[4],u[k]),R=m(w,C,_,S,x,e[l[k]],d[4],c[k])),r=f,f=o,o=p(i,10),i=n,n=T,w=x,x=S,S=p(_,10),_=C,C=R}var E=this._b+i+S|0;this._b=this._c+o+x|0,this._c=this._d+f+w|0,this._d=this._e+r+C|0,this._e=this._a+n+_|0,this._a=E},f.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=n.alloc?n.alloc(20):new n(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},t.exports=f},{buffer:216,"hash-base":370,inherits:387}],494:[function(e,t,r){"use strict";var n=e("buffer"),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,r),r.Buffer=s),o(i,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},{buffer:216}],495:[function(e,t,r){(function(r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var i,o=e("buffer"),s=o.Buffer,a={};for(i in o)o.hasOwnProperty(i)&&"SlowBuffer"!==i&&"Buffer"!==i&&(a[i]=o[i]);var l=a.Buffer={};for(i in s)s.hasOwnProperty(i)&&"allocUnsafe"!==i&&"allocUnsafeSlow"!==i&&(l[i]=s[i]);if(a.Buffer.prototype=s.prototype,l.from&&l.from!==Uint8Array.from||(l.from=function(e,t,r){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+n(e));if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+n(e));return s(e,t,r)}),l.alloc||(l.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+n(e));if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var i=s(e);return t&&0!==t.length?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i}),!a.kStringMaxLength)try{a.kStringMaxLength=r.binding("buffer").kStringMaxLength}catch(e){}a.constants||(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),t.exports=a}).call(this,e("_process"))},{_process:467,buffer:216}],496:[function(e,t,r){"use strict";function n(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw o}}}}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function l(e){return d(e)||h(e)||c(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function h(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function d(e){if(Array.isArray(e))return f(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(r,"__esModule",{value:!0});var p=e("xmlchars/xml/1.0/ed5"),m=e("xmlchars/xml/1.1/ed2"),g=e("xmlchars/xmlns/1.0/ed3"),v=p.isS,y=p.isChar,b=p.isNameStartChar,w=p.isNameChar,C=p.S_LIST,_=p.NAME_RE,S=m.isChar,x=g.isNCNameStartChar,k=g.isNCNameChar,T=g.NC_NAME_RE,R="http://www.w3.org/XML/1998/namespace",E="http://www.w3.org/2000/xmlns/",M={__proto__:null,xml:R,xmlns:E},P={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},O=-1,I=-2,A=0,j=1,D=2,N=3,F=4,$=5,L=6,B=7,V=8,H=9,z=10,U=11,q=12,G=13,W=14,K=15,J=16,X=17,Y=18,Z=19,Q=20,ee=21,te=22,re=23,ne=24,ie=25,oe=26,se=27,ae=28,le=29,ue=30,ce=31,he=32,de=33,fe=34,pe=35,me=36,ge=37,ve=38,ye=39,be=40,we=41,Ce=42,_e=43,Se=44,xe=9,ke=10,Te=13,Re=32,Ee=33,Me=34,Pe=38,Oe=39,Ie=45,Ae=47,je=59,De=60,Ne=61,Fe=62,$e=63,Le=91,Be=93,Ve=133,He=8232,ze=function(e){return e===Me||e===Oe},Ue=[Me,Oe],qe=[].concat(Ue,[Le,Fe]),Ge=[].concat(Ue,[De,Be]),We=[Ne,$e].concat(l(C)),Ke=[].concat(l(C),[Fe,Pe,De]);function Je(e,t,r){switch(t){case"xml":r!==R&&e.fail("xml prefix must be bound to ".concat(R,"."));break;case"xmlns":r!==E&&e.fail("xmlns prefix must be bound to ".concat(E,"."))}switch(r){case E:e.fail(""===t?"the default namespace may not be set to ".concat(r,"."):'may not assign a prefix (even "xmlns") to the URI '.concat(E,"."));break;case R:switch(t){case"xml":break;case"":e.fail("the default namespace may not be set to ".concat(r,"."));break;default:e.fail("may not assign the xml namespace to another prefix.")}}}function Xe(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];Je(e,i,t[i])}}var Ye=function(e){return T.test(e)},Ze=function(e){return _.test(e)},Qe=0,et=1,tt=2;r.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];var rt={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"},nt=function(){function e(t){o(this,e),this.opt=null!=t?t:{},this.fragmentOpt=!!this.opt.fragment;var r=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=!1!==this.opt.position,this.fileName=this.opt.fileName,r){this.nameStartCheck=x,this.nameCheck=k,this.isName=Ye,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},M);var n=this.opt.additionalNamespaces;null!=n&&(Xe(this,n),Object.assign(this.ns,n))}else this.nameStartCheck=b,this.nameCheck=w,this.isName=Ze,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}return a(e,[{key:"_init",value:function(){var e;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=Qe,this.attribList=[];var t=this.fragmentOpt;this.state=t?G:A,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=t,this.xmlDeclPossible=!t,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;var r=this.opt.defaultXMLVersion;if(void 0===r){if(!0===this.opt.forceXMLVersion)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");r="1.0"}this.setXMLVersion(r),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(P),null===(e=this.readyHandler)||void 0===e||e.call(this)}},{key:"on",value:function(e,t){this[rt[e]]=t}},{key:"off",value:function(e){this[rt[e]]=void 0}},{key:"makeError",value:function(e){var t,r=null!==(t=this.fileName)&&void 0!==t?t:"";return this.trackPosition&&(r.length>0&&(r+=":"),r+="".concat(this.line,":").concat(this.column)),r.length>0&&(r+=": "),new Error(r+e)}},{key:"fail",value:function(e){var t=this.makeError(e),r=this.errorHandler;if(void 0===r)throw t;return r(t),this}},{key:"write",value:function(e){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");var t=!1;null===e?(t=!0,e=""):"object"===i(e)&&(e=e.toString()),void 0!==this.carriedFromPrevious&&(e="".concat(this.carriedFromPrevious).concat(e),this.carriedFromPrevious=void 0);var r=e.length,n=e.charCodeAt(r-1);!t&&(n===Te||n>=55296&&n<=56319)&&(this.carriedFromPrevious=e[r-1],r--,e=e.slice(0,r));var o=this.stateTable;for(this.chunk=e,this.i=0;this.i<r;)o[this.state].call(this);return this.chunkPosition+=r,t?this.end():this}},{key:"close",value:function(){return this.write(null)}},{key:"getCode10",value:function(){var e=this.chunk,t=this.i;if(this.prevI=t,this.i=t+1,t>=e.length)return O;var r=e.charCodeAt(t);if(this.column++,r<55296){if(r>=Re||r===xe)return r;switch(r){case ke:return this.line++,this.column=0,this.positionAtNewLine=this.position,ke;case Te:return e.charCodeAt(t+1)===ke&&(this.i=t+2),this.line++,this.column=0,this.positionAtNewLine=this.position,I;default:return this.fail("disallowed character."),r}}if(r>56319)return r>=57344&&r<=65533||this.fail("disallowed character."),r;var n=65536+1024*(r-55296)+(e.charCodeAt(t+1)-56320);return this.i=t+2,n>1114111&&this.fail("disallowed character."),n}},{key:"getCode11",value:function(){var e=this.chunk,t=this.i;if(this.prevI=t,this.i=t+1,t>=e.length)return O;var r=e.charCodeAt(t);if(this.column++,r<55296){if(r>31&&r<127||r>159&&r!==He||r===xe)return r;switch(r){case ke:return this.line++,this.column=0,this.positionAtNewLine=this.position,ke;case Te:var n=e.charCodeAt(t+1);n!==ke&&n!==Ve||(this.i=t+2);case Ve:case He:return this.line++,this.column=0,this.positionAtNewLine=this.position,I;default:return this.fail("disallowed character."),r}}if(r>56319)return r>=57344&&r<=65533||this.fail("disallowed character."),r;var i=65536+1024*(r-55296)+(e.charCodeAt(t+1)-56320);return this.i=t+2,i>1114111&&this.fail("disallowed character."),i}},{key:"getCodeNorm",value:function(){var e=this.getCode();return e===I?ke:e}},{key:"unget",value:function(){this.i=this.prevI,this.column--}},{key:"captureTo",value:function(e){for(var t=this.i,r=this.chunk;;){var n=this.getCode(),i=n===I,o=i?ke:n;if(o===O||e.includes(o))return this.text+=r.slice(t,this.prevI),o;i&&(this.text+="".concat(r.slice(t,this.prevI),"\n"),t=this.i)}}},{key:"captureToChar",value:function(e){for(var t=this.i,r=this.chunk;;){var n=this.getCode();switch(n){case I:this.text+="".concat(r.slice(t,this.prevI),"\n"),t=this.i,n=ke;break;case O:return this.text+=r.slice(t),!1}if(n===e)return this.text+=r.slice(t,this.prevI),!0}}},{key:"captureNameChars",value:function(){for(var e=this.chunk,t=this.i;;){var r=this.getCode();if(r===O)return this.name+=e.slice(t),O;if(!w(r))return this.name+=e.slice(t,this.prevI),r===I?ke:r}}},{key:"skipSpaces",value:function(){for(;;){var e=this.getCodeNorm();if(e===O||!v(e))return e}}},{key:"setXMLVersion",value:function(e){this.currentXMLVersion=e,"1.0"===e?(this.isChar=y,this.getCode=this.getCode10):(this.isChar=S,this.getCode=this.getCode11)}},{key:"sBegin",value:function(){65279===this.chunk.charCodeAt(0)&&(this.i++,this.column++),this.state=j}},{key:"sBeginWhitespace",value:function(){var e=this.i,t=this.skipSpaces();switch(this.prevI!==e&&(this.xmlDeclPossible=!1),t){case De:if(this.state=K,0!==this.text.length)throw new Error("no-empty text at start");break;case O:break;default:this.unget(),this.state=G,this.xmlDeclPossible=!1}}},{key:"sDoctype",value:function(){var e,t=this.captureTo(qe);switch(t){case Fe:null===(e=this.doctypeHandler)||void 0===e||e.call(this,this.text),this.text="",this.state=G,this.doctype=!0;break;case O:break;default:this.text+=String.fromCodePoint(t),t===Le?this.state=F:ze(t)&&(this.state=N,this.q=t)}}},{key:"sDoctypeQuote",value:function(){var e=this.q;this.captureToChar(e)&&(this.text+=String.fromCodePoint(e),this.q=null,this.state=D)}},{key:"sDTD",value:function(){var e=this.captureTo(Ge);e!==O&&(this.text+=String.fromCodePoint(e),e===Be?this.state=D:e===De?this.state=L:ze(e)&&(this.state=$,this.q=e))}},{key:"sDTDQuoted",value:function(){var e=this.q;this.captureToChar(e)&&(this.text+=String.fromCodePoint(e),this.state=F,this.q=null)}},{key:"sDTDOpenWaka",value:function(){var e=this.getCodeNorm();switch(this.text+=String.fromCodePoint(e),e){case Ee:this.state=B,this.openWakaBang="";break;case $e:this.state=U;break;default:this.state=F}}},{key:"sDTDOpenWakaBang",value:function(){var e=String.fromCodePoint(this.getCodeNorm()),t=this.openWakaBang+=e;this.text+=e,"-"!==t&&(this.state="--"===t?V:F,this.openWakaBang="")}},{key:"sDTDComment",value:function(){this.captureToChar(Ie)&&(this.text+="-",this.state=H)}},{key:"sDTDCommentEnding",value:function(){var e=this.getCodeNorm();this.text+=String.fromCodePoint(e),this.state=e===Ie?z:V}},{key:"sDTDCommentEnded",value:function(){var e=this.getCodeNorm();this.text+=String.fromCodePoint(e),e===Fe?this.state=F:(this.fail("malformed comment."),this.state=V)}},{key:"sDTDPI",value:function(){this.captureToChar($e)&&(this.text+="?",this.state=q)}},{key:"sDTDPIEnding",value:function(){var e=this.getCodeNorm();this.text+=String.fromCodePoint(e),e===Fe&&(this.state=F)}},{key:"sText",value:function(){0!==this.tags.length?this.handleTextInRoot():this.handleTextOutsideRoot()}},{key:"sEntity",value:function(){var e=this.i,t=this.chunk;e:for(;;)switch(this.getCode()){case I:this.entity+="".concat(t.slice(e,this.prevI),"\n"),e=this.i;break;case je:var r=this.entityReturnState,n=this.entity+t.slice(e,this.prevI);this.state=r;var i=void 0;""===n?(this.fail("empty entity name."),i="&;"):(i=this.parseEntity(n),this.entity=""),r===G&&void 0===this.textHandler||(this.text+=i);break e;case O:this.entity+=t.slice(e);break e}}},{key:"sOpenWaka",value:function(){var e=this.getCode();if(b(e))this.state=fe,this.unget(),this.xmlDeclPossible=!1;else switch(e){case Ae:this.state=_e,this.xmlDeclPossible=!1;break;case Ee:this.state=J,this.openWakaBang="",this.xmlDeclPossible=!1;break;case $e:this.state=re;break;default:this.fail("disallowed character in tag name"),this.state=G,this.xmlDeclPossible=!1}}},{key:"sOpenWakaBang",value:function(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=Q,this.openWakaBang="";break;case"--":this.state=X,this.openWakaBang="";break;case"DOCTYPE":this.state=D,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}},{key:"sComment",value:function(){this.captureToChar(Ie)&&(this.state=Y)}},{key:"sCommentEnding",value:function(){var e,t=this.getCodeNorm();t===Ie?(this.state=Z,null===(e=this.commentHandler)||void 0===e||e.call(this,this.text),this.text=""):(this.text+="-".concat(String.fromCodePoint(t)),this.state=X)}},{key:"sCommentEnded",value:function(){var e=this.getCodeNorm();e!==Fe?(this.fail("malformed comment."),this.text+="--".concat(String.fromCodePoint(e)),this.state=X):this.state=G}},{key:"sCData",value:function(){this.captureToChar(Be)&&(this.state=ee)}},{key:"sCDataEnding",value:function(){var e=this.getCodeNorm();e===Be?this.state=te:(this.text+="]".concat(String.fromCodePoint(e)),this.state=Q)}},{key:"sCDataEnding2",value:function(){var e,t=this.getCodeNorm();switch(t){case Fe:null===(e=this.cdataHandler)||void 0===e||e.call(this,this.text),this.text="",this.state=G;break;case Be:this.text+="]";break;default:this.text+="]]".concat(String.fromCodePoint(t)),this.state=Q}}},{key:"sPIFirstChar",value:function(){var e=this.getCodeNorm();this.nameStartCheck(e)?(this.piTarget+=String.fromCodePoint(e),this.state=ne):e===$e||v(e)?(this.fail("processing instruction without a target."),this.state=e===$e?oe:ie):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(e),this.state=ne)}},{key:"sPIRest",value:function(){for(var e=this.chunk,t=this.i;;){var r=this.getCodeNorm();if(r===O)return void(this.piTarget+=e.slice(t));if(!this.nameCheck(r)){this.piTarget+=e.slice(t,this.prevI);var n=r===$e;n||v(r)?"xml"===this.piTarget?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=n?de:se):this.state=n?oe:ie:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(r));break}}}},{key:"sPIBody",value:function(){if(0===this.text.length){var e=this.getCodeNorm();e===$e?this.state=oe:v(e)||(this.text=String.fromCodePoint(e))}else this.captureToChar($e)&&(this.state=oe)}},{key:"sPIEnding",value:function(){var e,t=this.getCodeNorm();if(t===Fe){var r=this.piTarget;"xml"===r.toLowerCase()&&this.fail("the XML declaration must appear at the start of the document."),null===(e=this.piHandler)||void 0===e||e.call(this,{target:r,body:this.text}),this.piTarget=this.text="",this.state=G}else t===$e?this.text+="?":(this.text+="?".concat(String.fromCodePoint(t)),this.state=ie);this.xmlDeclPossible=!1}},{key:"sXMLDeclNameStart",value:function(){var e=this.skipSpaces();e!==$e?e!==O&&(this.state=ae,this.name=String.fromCodePoint(e)):this.state=de}},{key:"sXMLDeclName",value:function(){var e=this.captureTo(We);if(e===$e)return this.state=de,this.name+=this.text,this.text="",void this.fail("XML declaration is incomplete.");if(v(e)||e===Ne){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail("expected the name ".concat(this.xmlDeclExpects[0],"."));break;default:this.fail("expected one of ".concat(this.xmlDeclExpects.join(", ")))}this.state=e===Ne?ue:le}}},{key:"sXMLDeclEq",value:function(){var e=this.getCodeNorm();if(e===$e)return this.state=de,void this.fail("XML declaration is incomplete.");v(e)||(e!==Ne&&this.fail("value required."),this.state=ue)}},{key:"sXMLDeclValueStart",value:function(){var e=this.getCodeNorm();if(e===$e)return this.state=de,void this.fail("XML declaration is incomplete.");v(e)||(ze(e)?this.q=e:(this.fail("value must be quoted."),this.q=Re),this.state=ce)}},{key:"sXMLDeclValue",value:function(){var e=this.captureTo([this.q,$e]);if(e===$e)return this.state=de,this.text="",void this.fail("XML declaration is incomplete.");if(e!==O){var t=this.text;switch(this.text="",this.name){case"version":this.xmlDeclExpects=["encoding","standalone"];var r=t;this.xmlDecl.version=r,/^1\.[0-9]+$/.test(r)?this.opt.forceXMLVersion||this.setXMLVersion(r):this.fail("version number must match /^1\\.[0-9]+$/.");break;case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(t)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=t;break;case"standalone":"yes"!==t&&"no"!==t&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=t}this.name="",this.state=he}}},{key:"sXMLDeclSeparator",value:function(){var e=this.getCodeNorm();e!==$e?(v(e)||(this.fail("whitespace required."),this.unget()),this.state=se):this.state=de}},{key:"sXMLDeclEnding",value:function(){var e;this.getCodeNorm()===Fe?("xml"!==this.piTarget?this.fail("processing instructions are not allowed before root."):"version"!==this.name&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),null===(e=this.xmldeclHandler)||void 0===e||e.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=G):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}},{key:"sOpenTag",value:function(){var e,t=this.captureNameChars();if(t!==O){var r=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=r.ns=Object.create(null)),null===(e=this.openTagStartHandler)||void 0===e||e.call(this,r),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),t){case Fe:this.openTag();break;case Ae:this.state=pe;break;default:v(t)||this.fail("disallowed character in tag name."),this.state=me}}}},{key:"sOpenTagSlash",value:function(){this.getCode()===Fe?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=me)}},{key:"sAttrib",value:function(){var e=this.skipSpaces();e!==O&&(b(e)?(this.unget(),this.state=ge):e===Fe?this.openTag():e===Ae?this.state=pe:this.fail("disallowed character in attribute name."))}},{key:"sAttribName",value:function(){var e=this.captureNameChars();e===Ne?this.state=ye:v(e)?this.state=ve:e===Fe?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):e!==O&&this.fail("disallowed character in attribute name.")}},{key:"sAttribNameSawWhite",value:function(){var e=this.skipSpaces();switch(e){case O:return;case Ne:this.state=ye;break;default:this.fail("attribute without value."),this.text="",this.name="",e===Fe?this.openTag():b(e)?(this.unget(),this.state=ge):(this.fail("disallowed character in attribute name."),this.state=me)}}},{key:"sAttribValue",value:function(){var e=this.getCodeNorm();ze(e)?(this.q=e,this.state=be):v(e)||(this.fail("unquoted attribute value."),this.state=Ce,this.unget())}},{key:"sAttribValueQuoted",value:function(){for(var e=this.q,t=this.chunk,r=this.i;;)switch(this.getCode()){case e:return this.pushAttrib(this.name,this.text+t.slice(r,this.prevI)),this.name=this.text="",this.q=null,void(this.state=we);case Pe:return this.text+=t.slice(r,this.prevI),this.state=W,void(this.entityReturnState=be);case ke:case I:case xe:this.text+="".concat(t.slice(r,this.prevI)," "),r=this.i;break;case De:return this.text+=t.slice(r,this.prevI),void this.fail("disallowed character.");case O:return void(this.text+=t.slice(r))}}},{key:"sAttribValueClosed",value:function(){var e=this.getCodeNorm();v(e)?this.state=me:e===Fe?this.openTag():e===Ae?this.state=pe:b(e)?(this.fail("no whitespace between attributes."),this.unget(),this.state=ge):this.fail("disallowed character in attribute name.")}},{key:"sAttribValueUnquoted",value:function(){var e=this.captureTo(Ke);switch(e){case Pe:this.state=W,this.entityReturnState=Ce;break;case De:this.fail("disallowed character.");break;case O:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",e===Fe?this.openTag():this.state=me}}},{key:"sCloseTag",value:function(){var e=this.captureNameChars();e===Fe?this.closeTag():v(e)?this.state=Se:e!==O&&this.fail("disallowed character in closing tag.")}},{key:"sCloseTagSawWhite",value:function(){switch(this.skipSpaces()){case Fe:this.closeTag();break;case O:break;default:this.fail("disallowed character in closing tag.")}}},{key:"handleTextInRoot",value:function(){var e=this.i,t=this.forbiddenState,r=this.chunk,n=this.textHandler;e:for(;;)switch(this.getCode()){case De:if(this.state=K,void 0!==n){var i=this.text,o=r.slice(e,this.prevI);0!==i.length?(n(i+o),this.text=""):0!==o.length&&n(o)}t=Qe;break e;case Pe:this.state=W,this.entityReturnState=G,void 0!==n&&(this.text+=r.slice(e,this.prevI)),t=Qe;break e;case Be:switch(t){case Qe:t=et;break;case et:t=tt;break;case tt:break;default:throw new Error("impossible state")}break;case Fe:t===tt&&this.fail('the string "]]>" is disallowed in char data.'),t=Qe;break;case I:void 0!==n&&(this.text+="".concat(r.slice(e,this.prevI),"\n")),e=this.i,t=Qe;break;case O:void 0!==n&&(this.text+=r.slice(e));break e;default:t=Qe}this.forbiddenState=t}},{key:"handleTextOutsideRoot",value:function(){var e=this.i,t=this.chunk,r=this.textHandler,n=!1;e:for(;;){var i=this.getCode();switch(i){case De:if(this.state=K,void 0!==r){var o=this.text,s=t.slice(e,this.prevI);0!==o.length?(r(o+s),this.text=""):0!==s.length&&r(s)}break e;case Pe:this.state=W,this.entityReturnState=G,void 0!==r&&(this.text+=t.slice(e,this.prevI)),n=!0;break e;case I:void 0!==r&&(this.text+="".concat(t.slice(e,this.prevI),"\n")),e=this.i;break;case O:void 0!==r&&(this.text+=t.slice(e));break e;default:v(i)||(n=!0)}}n&&(this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}},{key:"pushAttribNS",value:function(e,t){var r,n=this.qname(e),i=n.prefix,o=n.local,s={name:e,prefix:i,local:o,value:t};if(this.attribList.push(s),null===(r=this.attributeHandler)||void 0===r||r.call(this,s),"xmlns"===i){var a=t.trim();"1.0"===this.currentXMLVersion&&""===a&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[o]=a,Je(this,o,a)}else if("xmlns"===e){var l=t.trim();this.topNS[""]=l,Je(this,"",l)}}},{key:"pushAttribPlain",value:function(e,t){var r,n={name:e,value:t};this.attribList.push(n),null===(r=this.attributeHandler)||void 0===r||r.call(this,n)}},{key:"end",value:function(){var e,t;this.sawRoot||this.fail("document must contain a root element.");for(var r=this.tags;r.length>0;){var n=r.pop();this.fail("unclosed tag: ".concat(n.name))}this.state!==A&&this.state!==G&&this.fail("unexpected end.");var i=this.text;return 0!==i.length&&(null===(e=this.textHandler)||void 0===e||e.call(this,i),this.text=""),this._closed=!0,null===(t=this.endHandler)||void 0===t||t.call(this),this._init(),this}},{key:"resolve",value:function(e){var t,r,n=this.topNS[e];if(void 0!==n)return n;for(var i=this.tags,o=i.length-1;o>=0;o--)if(void 0!==(n=i[o].ns[e]))return n;return void 0!==(n=this.ns[e])?n:null===(r=(t=this.opt).resolvePrefix)||void 0===r?void 0:r.call(t,e)}},{key:"qname",value:function(e){var t=e.indexOf(":");if(-1===t)return{prefix:"",local:e};var r=e.slice(t+1),n=e.slice(0,t);return(""===n||""===r||r.includes(":"))&&this.fail("malformed name: ".concat(e,".")),{prefix:n,local:r}}},{key:"processAttribsNS",value:function(){var e,t=this.attribList,r=this.tag,i=this.qname(r.name),o=i.prefix,s=i.local;r.prefix=o,r.local=s;var a=r.uri=null!==(e=this.resolve(o))&&void 0!==e?e:"";if(""!==o&&("xmlns"===o&&this.fail('tags may not have "xmlns" as prefix.'),""===a&&(this.fail("unbound namespace prefix: ".concat(JSON.stringify(o),".")),r.uri=o)),0!==t.length){var l,u=r.attributes,c=new Set,h=n(t);try{for(h.s();!(l=h.n()).done;){var d=l.value,f=d.name,p=d.prefix,m=d.local,g=void 0,v=void 0;""===p?(g="xmlns"===f?E:"",v=f):(void 0===(g=this.resolve(p))&&(this.fail("unbound namespace prefix: ".concat(JSON.stringify(p),".")),g=p),v="{".concat(g,"}").concat(m)),c.has(v)&&this.fail("duplicate attribute: ".concat(v,".")),c.add(v),d.uri=g,u[f]=d}}catch(e){h.e(e)}finally{h.f()}this.attribList=[]}}},{key:"processAttribsPlain",value:function(){var e,t=this.attribList,r=this.tag.attributes,i=n(t);try{for(i.s();!(e=i.n()).done;){var o=e.value,s=o.name,a=o.value;void 0!==r[s]&&this.fail("duplicate attribute: ".concat(s,".")),r[s]=a}}catch(e){i.e(e)}finally{i.f()}this.attribList=[]}},{key:"openTag",value:function(){var e;this.processAttribs();var t=this.tags,r=this.tag;r.isSelfClosing=!1,null===(e=this.openTagHandler)||void 0===e||e.call(this,r),t.push(r),this.state=G,this.name=""}},{key:"openSelfClosingTag",value:function(){var e,t,r;this.processAttribs();var n=this.tags,i=this.tag;i.isSelfClosing=!0,null===(e=this.openTagHandler)||void 0===e||e.call(this,i),null===(t=this.closeTagHandler)||void 0===t||t.call(this,i),null===(this.tag=null!==(r=n[n.length-1])&&void 0!==r?r:null)&&(this.closedRoot=!0),this.state=G,this.name=""}},{key:"closeTag",value:function(){var e=this.tags,t=this.name;if(this.state=G,this.name="",""===t)return this.fail("weird empty close tag."),void(this.text+="</>");for(var r=this.closeTagHandler,n=e.length;n-- >0;){var i=this.tag=e.pop();if(this.topNS=i.ns,null==r||r(i),i.name===t)break;this.fail("unexpected close tag.")}0===n?this.closedRoot=!0:n<0&&(this.fail("unmatched closing tag: ".concat(t,".")),this.text+="</".concat(t,">"))}},{key:"parseEntity",value:function(e){if("#"!==e[0]){var t=this.ENTITIES[e];return void 0!==t?t:(this.fail(this.isName(e)?"undefined entity.":"disallowed character in entity name."),"&".concat(e,";"))}var r=NaN;return"x"===e[1]&&/^#x[0-9a-f]+$/i.test(e)?r=parseInt(e.slice(2),16):/^#[0-9]+$/.test(e)&&(r=parseInt(e.slice(1),10)),this.isChar(r)?String.fromCodePoint(r):(this.fail("malformed character entity."),"&".concat(e,";"))}},{key:"closed",get:function(){return this._closed}},{key:"position",get:function(){return this.chunkPosition+this.i}},{key:"columnIndex",get:function(){return this.position-this.positionAtNewLine}}]),e}();r.SaxesParser=nt},{"xmlchars/xml/1.0/ed5":541,"xmlchars/xml/1.1/ed2":542,"xmlchars/xmlns/1.0/ed3":543}],497:[function(e,t,r){(function(e){"use strict";t.exports="function"==typeof e?e:function(){var e=[].slice.apply(arguments);e.splice(1,0,0),setTimeout.apply(null,e)}}).call(this,e("timers").setImmediate)},{timers:521}],498:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer;function i(e,t){this._block=n.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}i.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=n.from(e,t));for(var r=this._block,i=this._blockSize,o=e.length,s=this._len,a=0;a<o;){for(var l=s%i,u=Math.min(o-a,i-l),c=0;c<u;c++)r[l+c]=e[a+c];a+=u,(s+=u)%i==0&&this._update(r)}return this._len+=o,this},i.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var o=this._hash();return e?o.toString(e):o},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=i},{"safe-buffer":494}],499:[function(e,t,r){"use strict";var n=t.exports=function(e){e=e.toLowerCase();var t=n[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t};n.sha=e("./sha"),n.sha1=e("./sha1"),n.sha224=e("./sha224"),n.sha256=e("./sha256"),n.sha384=e("./sha384"),n.sha512=e("./sha512")},{"./sha":500,"./sha1":501,"./sha224":502,"./sha256":503,"./sha384":504,"./sha512":505}],500:[function(e,t,r){"use strict";var n=e("inherits"),i=e("./hash"),o=e("safe-buffer").Buffer,s=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function l(){this.init(),this._w=a,i.call(this,64,56)}function u(e){return e<<5|e>>>27}function c(e){return e<<30|e>>>2}function h(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}n(l,i),l.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},l.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,a=0|this._e,l=0;l<16;++l)t[l]=e.readInt32BE(4*l);for(;l<80;++l)t[l]=t[l-3]^t[l-8]^t[l-14]^t[l-16];for(var d=0;d<80;++d){var f=~~(d/20),p=u(r)+h(f,n,i,o)+a+t[d]+s[f]|0;a=o,o=i,i=c(n),n=r,r=p}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=a+this._e|0},l.prototype._hash=function(){var e=o.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},t.exports=l},{"./hash":498,inherits:387,"safe-buffer":494}],501:[function(e,t,r){"use strict";var n=e("inherits"),i=e("./hash"),o=e("safe-buffer").Buffer,s=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function l(){this.init(),this._w=a,i.call(this,64,56)}function u(e){return e<<1|e>>>31}function c(e){return e<<5|e>>>27}function h(e){return e<<30|e>>>2}function d(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}n(l,i),l.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},l.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,a=0|this._e,l=0;l<16;++l)t[l]=e.readInt32BE(4*l);for(;l<80;++l)t[l]=u(t[l-3]^t[l-8]^t[l-14]^t[l-16]);for(var f=0;f<80;++f){var p=~~(f/20),m=c(r)+d(p,n,i,o)+a+t[f]+s[p]|0;a=o,o=i,i=h(n),n=r,r=m}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=a+this._e|0},l.prototype._hash=function(){var e=o.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},t.exports=l},{"./hash":498,inherits:387,"safe-buffer":494}],502:[function(e,t,r){"use strict";var n=e("inherits"),i=e("./sha256"),o=e("./hash"),s=e("safe-buffer").Buffer,a=new Array(64);function l(){this.init(),this._w=a,o.call(this,64,56)}n(l,i),l.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},l.prototype._hash=function(){var e=s.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},t.exports=l},{"./hash":498,"./sha256":503,inherits:387,"safe-buffer":494}],503:[function(e,t,r){"use strict";var n=e("inherits"),i=e("./hash"),o=e("safe-buffer").Buffer,s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function l(){this.init(),this._w=a,i.call(this,64,56)}function u(e,t,r){return r^e&(t^r)}function c(e,t,r){return e&t|r&(e|t)}function h(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function d(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function f(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function p(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}n(l,i),l.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},l.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,a=0|this._e,l=0|this._f,m=0|this._g,g=0|this._h,v=0;v<16;++v)t[v]=e.readInt32BE(4*v);for(;v<64;++v)t[v]=p(t[v-2])+t[v-7]+f(t[v-15])+t[v-16]|0;for(var y=0;y<64;++y){var b=g+d(a)+u(a,l,m)+s[y]+t[y]|0,w=h(r)+c(r,n,i)|0;g=m,m=l,l=a,a=o+b|0,o=i,i=n,n=r,r=b+w|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=a+this._e|0,this._f=l+this._f|0,this._g=m+this._g|0,this._h=g+this._h|0},l.prototype._hash=function(){var e=o.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},t.exports=l},{"./hash":498,inherits:387,"safe-buffer":494}],504:[function(e,t,r){"use strict";var n=e("inherits"),i=e("./sha512"),o=e("./hash"),s=e("safe-buffer").Buffer,a=new Array(160);function l(){this.init(),this._w=a,o.call(this,128,112)}n(l,i),l.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},l.prototype._hash=function(){var e=s.allocUnsafe(48);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},t.exports=l},{"./hash":498,"./sha512":505,inherits:387,"safe-buffer":494}],505:[function(e,t,r){"use strict";var n=e("inherits"),i=e("./hash"),o=e("safe-buffer").Buffer,s=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function l(){this.init(),this._w=a,i.call(this,128,112)}function u(e,t,r){return r^e&(t^r)}function c(e,t,r){return e&t|r&(e|t)}function h(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function d(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function f(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function p(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function m(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function g(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function v(e,t){return e>>>0<t>>>0?1:0}n(l,i),l.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},l.prototype._update=function(e){for(var t=this._w,r=0|this._ah,n=0|this._bh,i=0|this._ch,o=0|this._dh,a=0|this._eh,l=0|this._fh,y=0|this._gh,b=0|this._hh,w=0|this._al,C=0|this._bl,_=0|this._cl,S=0|this._dl,x=0|this._el,k=0|this._fl,T=0|this._gl,R=0|this._hl,E=0;E<32;E+=2)t[E]=e.readInt32BE(4*E),t[E+1]=e.readInt32BE(4*E+4);for(;E<160;E+=2){var M=t[E-30],P=t[E-30+1],O=f(M,P),I=p(P,M),A=m(M=t[E-4],P=t[E-4+1]),j=g(P,M),D=t[E-14],N=t[E-14+1],F=t[E-32],$=t[E-32+1],L=I+N|0,B=O+D+v(L,I)|0;B=(B=B+A+v(L=L+j|0,j)|0)+F+v(L=L+$|0,$)|0,t[E]=B,t[E+1]=L}for(var V=0;V<160;V+=2){B=t[V],L=t[V+1];var H=c(r,n,i),z=c(w,C,_),U=h(r,w),q=h(w,r),G=d(a,x),W=d(x,a),K=s[V],J=s[V+1],X=u(a,l,y),Y=u(x,k,T),Z=R+W|0,Q=b+G+v(Z,R)|0;Q=(Q=(Q=Q+X+v(Z=Z+Y|0,Y)|0)+K+v(Z=Z+J|0,J)|0)+B+v(Z=Z+L|0,L)|0;var ee=q+z|0,te=U+H+v(ee,q)|0;b=y,R=T,y=l,T=k,l=a,k=x,a=o+Q+v(x=S+Z|0,S)|0,o=i,S=_,i=n,_=C,n=r,C=w,r=Q+te+v(w=Z+ee|0,Z)|0}this._al=this._al+w|0,this._bl=this._bl+C|0,this._cl=this._cl+_|0,this._dl=this._dl+S|0,this._el=this._el+x|0,this._fl=this._fl+k|0,this._gl=this._gl+T|0,this._hl=this._hl+R|0,this._ah=this._ah+r+v(this._al,w)|0,this._bh=this._bh+n+v(this._bl,C)|0,this._ch=this._ch+i+v(this._cl,_)|0,this._dh=this._dh+o+v(this._dl,S)|0,this._eh=this._eh+a+v(this._el,x)|0,this._fh=this._fh+l+v(this._fl,k)|0,this._gh=this._gh+y+v(this._gl,T)|0,this._hh=this._hh+b+v(this._hl,R)|0},l.prototype._hash=function(){var e=o.allocUnsafe(64);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},t.exports=l},{"./hash":498,inherits:387,"safe-buffer":494}],506:[function(e,t,r){"use strict";t.exports=i;var n=e("events").EventEmitter;function i(){n.call(this)}e("inherits")(i,n),i.Readable=e("readable-stream/readable.js"),i.Writable=e("readable-stream/writable.js"),i.Duplex=e("readable-stream/duplex.js"),i.Transform=e("readable-stream/transform.js"),i.PassThrough=e("readable-stream/passthrough.js"),i.Stream=i,i.prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(r.on("end",a),r.on("close",l));var s=!1;function a(){s||(s=!0,e.end())}function l(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(c(),0===n.listenerCount(this,"error"))throw e}function c(){r.removeListener("data",i),e.removeListener("drain",o),r.removeListener("end",a),r.removeListener("close",l),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",c),r.removeListener("close",c),e.removeListener("close",c)}return r.on("error",u),e.on("error",u),r.on("end",c),r.on("close",c),e.on("close",c),e.emit("pipe",r),e}},{events:367,inherits:387,"readable-stream/duplex.js":507,"readable-stream/passthrough.js":516,"readable-stream/readable.js":517,"readable-stream/transform.js":518,"readable-stream/writable.js":519}],507:[function(e,t,r){"use strict";t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":508}],508:[function(e,t,r){"use strict";var n=e("process-nextick-args"),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=h;var o=Object.create(e("core-util-is"));o.inherits=e("inherits");var s=e("./_stream_readable"),a=e("./_stream_writable");o.inherits(h,s);for(var l=i(a.prototype),u=0;u<l.length;u++){var c=l[u];h.prototype[c]||(h.prototype[c]=a.prototype[c])}function h(e){if(!(this instanceof h))return new h(e);s.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||n.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),h.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},{"./_stream_readable":510,"./_stream_writable":512,"core-util-is":328,inherits:387,"process-nextick-args":466}],509:[function(e,t,r){"use strict";t.exports=o;var n=e("./_stream_transform"),i=Object.create(e("core-util-is"));function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}i.inherits=e("inherits"),i.inherits(o,n),o.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":511,"core-util-is":328,inherits:387}],510:[function(e,t,n){(function(r,n){"use strict";var i=e("process-nextick-args");t.exports=_;var o,s=e("isarray");_.ReadableState=C,e("events").EventEmitter;var a=function(e,t){return e.listeners(t).length},l=e("./internal/streams/stream"),u=e("safe-buffer").Buffer,c=n.Uint8Array||function(){};function h(e){return u.from(e)}function d(e){return u.isBuffer(e)||e instanceof c}var f=Object.create(e("core-util-is"));f.inherits=e("inherits");var p=e("util"),m=void 0;m=p&&p.debuglog?p.debuglog("stream"):function(){};var g,v=e("./internal/streams/BufferList"),y=e("./internal/streams/destroy");f.inherits(_,l);var b=["error","close","destroy","pause","resume"];function w(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?s(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function C(t,r){t=t||{};var n=r instanceof(o=o||e("./_stream_duplex"));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,s=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(g||(g=e("string_decoder/").StringDecoder),this.decoder=new g(t.encoding),this.encoding=t.encoding)}function _(t){if(o=o||e("./_stream_duplex"),!(this instanceof _))return new _(t);this._readableState=new C(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),l.call(this)}function S(e,t,r,n,i){var o,s=e._readableState;return null===t?(s.reading=!1,P(e,s)):(i||(o=k(s,t)),o?e.emit("error",o):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=h(t)),n?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):x(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?x(e,s,t,!1):A(e,s)):x(e,s,t,!1))):n||(s.reading=!1)),T(s)}function x(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&O(e)),A(e,t)}function k(e,t){var r;return d(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function T(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=y.destroy,_.prototype._undestroy=y.undestroy,_.prototype._destroy=function(e,t){this.push(null),t(e)},_.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=u.from(e,t),t=""),r=!0),S(this,e,t,!1,r)},_.prototype.unshift=function(e){return S(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(t){return g||(g=e("string_decoder/").StringDecoder),this._readableState.decoder=new g(t),this._readableState.encoding=t,this};var R=8388608;function E(e){return e>=R?e=R:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function M(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=E(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function P(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,O(e)}}function O(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(m("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(I,e):I(e))}function I(e){m("emit readable"),e.emit("readable"),L(e)}function A(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(j,e,t))}function j(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(m("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function D(e){return function(){var t=e._readableState;m("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,L(e))}}function N(e){m("readable nexttick read 0"),e.read(0)}function F(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick($,e,t))}function $(e,t){t.reading||(m("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(m("flow",t.flowing);t.flowing&&null!==e.read(););}function B(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=V(e,t.buffer,t.decoder),r);var r}function V(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?H(e,t):z(e,t),n}function H(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0==(e-=s)){s===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++n}return t.length-=n,i}function z(e,t){var r=u.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,s),0==(e-=s)){s===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++i}return t.length-=i,r}function U(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(q,t,e))}function q(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function G(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}_.prototype.read=function(e){m("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return m("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?U(this):O(this),null;if(0===(e=M(e,t))&&t.ended)return 0===t.length&&U(this),null;var n,i=t.needReadable;return m("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&m("length less than watermark",i=!0),t.ended||t.reading?m("reading or ended",i=!1):i&&(m("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=M(r,t))),null===(n=e>0?B(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&U(this)),null!==n&&this.emit("data",n),n},_.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(e,t){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,m("pipe count=%d opts=%j",o.pipesCount,t);var s=t&&!1===t.end||e===r.stdout||e===r.stderr?b:u;function l(e,t){m("onunpipe"),e===n&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,d())}function u(){m("onend"),e.end()}o.endEmitted?i.nextTick(s):n.once("end",s),e.on("unpipe",l);var c=D(n);e.on("drain",c);var h=!1;function d(){m("cleanup"),e.removeListener("close",v),e.removeListener("finish",y),e.removeListener("drain",c),e.removeListener("error",g),e.removeListener("unpipe",l),n.removeListener("end",u),n.removeListener("end",b),n.removeListener("data",p),h=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||c()}var f=!1;function p(t){m("ondata"),f=!1,!1!==e.write(t)||f||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==G(o.pipes,e))&&!h&&(m("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,f=!0),n.pause())}function g(t){m("onerror",t),b(),e.removeListener("error",g),0===a(e,"error")&&e.emit("error",t)}function v(){e.removeListener("finish",y),b()}function y(){m("onfinish"),e.removeListener("close",v),b()}function b(){m("unpipe"),n.unpipe(e)}return n.on("data",p),w(e,"error",g),e.once("close",v),e.once("finish",y),e.emit("pipe",n),o.flowing||(m("pipe resume"),n.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=G(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},_.prototype.on=function(e,t){var r=l.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&O(this):i.nextTick(N,this))}return r},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var e=this._readableState;return e.flowing||(m("resume"),e.flowing=!0,F(this,e)),this},_.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(m("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){m("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<b.length;o++)e.on(b[o],this.emit.bind(this,b[o]));return this._read=function(t){m("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=B}).call(this,e("_process"),void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":508,"./internal/streams/BufferList":513,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":328,events:367,inherits:387,isarray:389,"process-nextick-args":466,"safe-buffer":494,"string_decoder/":520,util:185}],511:[function(e,t,r){"use strict";t.exports=s;var n=e("./_stream_duplex"),i=Object.create(e("core-util-is"));function o(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);n.call(this,e),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var e=this;"function"==typeof this._flush?this._flush((function(t,r){l(e,t,r)})):l(this,null,null)}function l(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=e("inherits"),i.inherits(s,n),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},s.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},s.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},{"./_stream_duplex":508,"core-util-is":328,inherits:387}],512:[function(e,t,n){(function(r,n,i){"use strict";var o=e("process-nextick-args");function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){F(t,e)}}t.exports=w;var a,l=!r.browser&&["v0.10","v0.9."].indexOf(r.version.slice(0,5))>-1?i:o.nextTick;w.WritableState=b;var u=Object.create(e("core-util-is"));u.inherits=e("inherits");var c={deprecate:e("util-deprecate")},h=e("./internal/streams/stream"),d=e("safe-buffer").Buffer,f=n.Uint8Array||function(){};function p(e){return d.from(e)}function m(e){return d.isBuffer(e)||e instanceof f}var g,v=e("./internal/streams/destroy");function y(){}function b(t,r){a=a||e("./_stream_duplex"),t=t||{};var n=r instanceof a;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,o=t.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(o||0===o)?o:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===t.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){E(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function w(t){if(a=a||e("./_stream_duplex"),!(g.call(w,this)||this instanceof a))return new w(t);this._writableState=new b(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),h.call(this)}function C(e,t){var r=new Error("write after end");e.emit("error",r),o.nextTick(t,r)}function _(e,t,r,n){var i=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),o.nextTick(n,s),i=!1),i}function S(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=d.from(t,r)),t}function x(e,t,r,n,i,o){if(!r){var s=S(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else k(e,t,!1,a,n,i,o);return l}function k(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function T(e,t,r,n,i){--t.pendingcb,r?(o.nextTick(i,n),o.nextTick(D,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),D(e,t))}function R(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function E(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(R(r),t)T(e,r,n,t,i);else{var o=I(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||O(e,r),n?l(M,e,r,o,i):M(e,r,o,i)}}function M(e,t,r,n){r||P(e,t),t.pendingcb--,n(),D(e,t)}function P(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function O(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var a=0,l=!0;r;)i[a]=r,r.isBuf||(l=!1),r=r.next,a+=1;i.allBuffers=l,k(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,h=r.callback;if(k(e,t,!1,t.objectMode?1:u.length,u,c,h),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function I(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function A(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),D(e,t)}))}function j(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,o.nextTick(A,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function D(e,t){var r=I(t);return r&&(j(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}function N(e,t,r){t.ending=!0,D(e,t),r&&(t.finished?o.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function F(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}u.inherits(w,h),b.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(b.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(g=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(e){return!!g.call(this,e)||this===w&&e&&e._writableState instanceof b}})):g=function(e){return e instanceof this},w.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},w.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=!n.objectMode&&m(e);return o&&!d.isBuffer(e)&&(e=p(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=y),n.ended?C(this,r):(o||_(this,n,e,r))&&(n.pendingcb++,i=x(this,n,o,e,t,r)),i},w.prototype.cork=function(){this._writableState.corked++},w.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||O(this,e))},w.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),w.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},w.prototype._writev=null,w.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||N(this,n,r)},Object.defineProperty(w.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),w.prototype.destroy=v.destroy,w.prototype._undestroy=v.undestroy,w.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e("_process"),void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{"./_stream_duplex":508,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":328,inherits:387,"process-nextick-args":466,"safe-buffer":494,timers:521,"util-deprecate":522}],513:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=e("safe-buffer").Buffer,o=e("util");function s(e,t,r){e.copy(t,r)}t.exports=function(){function e(){n(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t=i.allocUnsafe(e>>>0),r=this.head,n=0;r;)s(r.data,t,n),n+=r.data.length,r=r.next;return t},e}(),o&&o.inspect&&o.inspect.custom&&(t.exports.prototype[o.inspect.custom]=function(){var e=o.inspect({length:this.length});return this.constructor.name+" "+e})},{"safe-buffer":494,util:185}],514:[function(e,t,r){"use strict";var n=e("process-nextick-args");function i(e,t){var r=this,i=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return i||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(s,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(n.nextTick(s,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this)}function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(e,t){e.emit("error",t)}t.exports={destroy:i,undestroy:o}},{"process-nextick-args":466}],515:[function(e,t,r){arguments[4][490][0].apply(r,arguments)},{dup:490,events:367}],516:[function(e,t,r){"use strict";t.exports=e("./readable").PassThrough},{"./readable":517}],517:[function(e,t,r){"use strict";(r=t.exports=e("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":508,"./lib/_stream_passthrough.js":509,"./lib/_stream_readable.js":510,"./lib/_stream_transform.js":511,"./lib/_stream_writable.js":512}],518:[function(e,t,r){"use strict";t.exports=e("./readable").Transform},{"./readable":517}],519:[function(e,t,r){"use strict";t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":512}],520:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function s(e){var t=o(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}function a(e){var t;switch(this.encoding=s(e),this.encoding){case"utf16le":this.text=p,this.end=m,t=4;break;case"utf8":this.fillLast=h,t=4;break;case"base64":this.text=g,this.end=v,t=3;break;default:return this.write=y,void(this.end=b)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function l(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function u(e,t,r){var n=t.length-1;if(n<r)return 0;var i=l(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=l(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=l(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}function c(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}function h(e){var t=this.lastTotal-this.lastNeed,r=c(this,e,t);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function d(e,t){var r=u(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t}function p(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function m(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function g(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function v(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function y(e){return e.toString(this.encoding)}function b(e){return e&&e.length?this.write(e):""}r.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},a.prototype.end=f,a.prototype.text=d,a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":494}],521:[function(e,t,r){(function(t,n){"use strict";var i=e("process/browser.js").nextTick,o=Function.prototype.apply,s=Array.prototype.slice,a={},l=0;function u(e,t){this._id=e,this._clearFn=t}r.setTimeout=function(){return new u(o.call(setTimeout,window,arguments),clearTimeout)},r.setInterval=function(){return new u(o.call(setInterval,window,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(e){e.close()},u.prototype.unref=u.prototype.ref=function(){},u.prototype.close=function(){this._clearFn.call(window,this._id)},r.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},r.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},r._unrefActive=r.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r.setImmediate="function"==typeof t?t:function(e){var t=l++,n=!(arguments.length<2)&&s.call(arguments,1);return a[t]=!0,i((function(){a[t]&&(n?e.apply(null,n):e.call(null),r.clearImmediate(t))})),t},r.clearImmediate="function"==typeof n?n:function(e){delete a[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":467,timers:521}],522:[function(e,t,n){(function(e){"use strict";function r(e,t){if(n("noDeprecation"))return e;var r=!1;function i(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation"),r=!0}return e.apply(this,arguments)}return i}function n(t){try{if(!e.localStorage)return!1}catch(e){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=r}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],523:[function(e,t,r){"use strict";"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],524:[function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.exports=function(e){return e&&"object"===n(e)&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],525:[function(e,t,n){(function(t,r){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var o=/%[sdj%]/g;n.format=function(e){if(!S(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(l(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,s=String(e).replace(o,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),a=n[r];r<i;a=n[++r])w(a)||!R(a)?s+=" "+a:s+=" "+l(a);return s},n.deprecate=function(e,i){if(k(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(!0===t.noDeprecation)return e;var o=!1;function s(){if(!o){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation,o=!0}return e.apply(this,arguments)}return s};var s,a={};function l(e,t){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),b(t)?r.showHidden=t:t&&n._extend(r,t),k(r.showHidden)&&(r.showHidden=!1),k(r.depth)&&(r.depth=2),k(r.colors)&&(r.colors=!1),k(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),d(r,e,r.depth)}function u(e,t){var r=l.styles[t];return r?"["+l.colors[r][0]+"m"+e+"["+l.colors[r][1]+"m":e}function c(e,t){return e}function h(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}function d(e,t,r){if(e.customInspect&&t&&P(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return S(i)||(i=d(e,i,r)),i}var o=f(e,t);if(o)return o;var s=Object.keys(t),a=h(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),M(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(t);if(0===s.length){if(P(t)){var l=t.name?": "+t.name:"";return e.stylize("[Function"+l+"]","special")}if(T(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(E(t))return e.stylize(Date.prototype.toString.call(t),"date");if(M(t))return p(t)}var u,c="",b=!1,w=["{","}"];return y(t)&&(b=!0,w=["[","]"]),P(t)&&(c=" [Function"+(t.name?": "+t.name:"")+"]"),T(t)&&(c=" "+RegExp.prototype.toString.call(t)),E(t)&&(c=" "+Date.prototype.toUTCString.call(t)),M(t)&&(c=" "+p(t)),0!==s.length||b&&0!=t.length?r<0?T(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),u=b?m(e,t,r,a,s):s.map((function(n){return g(e,t,r,a,n,b)})),e.seen.pop(),v(u,c,w)):w[0]+c+w[1]}function f(e,t){if(k(t))return e.stylize("undefined","undefined");if(S(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return _(t)?e.stylize(""+t,"number"):b(t)?e.stylize(""+t,"boolean"):w(t)?e.stylize("null","null"):void 0}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function m(e,t,r,n,i){for(var o=[],s=0,a=t.length;s<a;++s)A(t,String(s))?o.push(g(e,t,r,n,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(g(e,t,r,n,i,!0))})),o}function g(e,t,r,n,i,o){var s,a,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(a=e.stylize("[Setter]","special")),A(n,i)||(s="["+i+"]"),a||(e.seen.indexOf(l.value)<0?(a=w(r)?d(e,l.value,null):d(e,l.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),k(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function v(e,t,r){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function y(e){return Array.isArray(e)}function b(e){return"boolean"==typeof e}function w(e){return null===e}function C(e){return null==e}function _(e){return"number"==typeof e}function S(e){return"string"==typeof e}function x(e){return"symbol"===i(e)}function k(e){return void 0===e}function T(e){return R(e)&&"[object RegExp]"===I(e)}function R(e){return"object"===i(e)&&null!==e}function E(e){return R(e)&&"[object Date]"===I(e)}function M(e){return R(e)&&("[object Error]"===I(e)||e instanceof Error)}function P(e){return"function"==typeof e}function O(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===i(e)||void 0===e}function I(e){return Object.prototype.toString.call(e)}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.debuglog=function(e){return k(s)&&(s=t.env.NODE_DEBUG||""),e=e.toUpperCase(),a[e]||(new RegExp("\\b"+e+"\\b","i").test(s)?(t.pid,a[e]=function(){n.format.apply(n,arguments)}):a[e]=function(){}),a[e]},n.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=y,n.isBoolean=b,n.isNull=w,n.isNullOrUndefined=C,n.isNumber=_,n.isString=S,n.isSymbol=x,n.isUndefined=k,n.isRegExp=T,n.isObject=R,n.isDate=E,n.isError=M,n.isFunction=P,n.isPrimitive=O,n.isBuffer=e("./support/isBuffer"),n.log=function(){},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!R(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("_process"),void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":524,_process:467,inherits:523}],526:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return h.default}});var n=d(e("./v1.js")),i=d(e("./v3.js")),o=d(e("./v4.js")),s=d(e("./v5.js")),a=d(e("./nil.js")),l=d(e("./version.js")),u=d(e("./validate.js")),c=d(e("./stringify.js")),h=d(e("./parse.js"));function d(e){return e&&e.__esModule?e:{default:e}}},{"./nil.js":528,"./parse.js":529,"./stringify.js":533,"./v1.js":534,"./v3.js":535,"./v4.js":537,"./v5.js":538,"./validate.js":539,"./version.js":540}],527:[function(e,t,r){"use strict";function n(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return i(s(a(e),8*e.length))}function i(e){for(var t=[],r=32*e.length,n="0123456789abcdef",i=0;i<r;i+=8){var o=e[i>>5]>>>i%32&255,s=parseInt(n.charAt(o>>>4&15)+n.charAt(15&o),16);t.push(s)}return t}function o(e){return 14+(e+64>>>9<<4)+1}function s(e,t){e[t>>5]|=128<<t%32,e[o(t)-1]=t;for(var r=1732584193,n=-271733879,i=-1732584194,s=271733878,a=0;a<e.length;a+=16){var u=r,c=n,m=i,g=s;r=h(r,n,i,s,e[a],7,-680876936),s=h(s,r,n,i,e[a+1],12,-389564586),i=h(i,s,r,n,e[a+2],17,606105819),n=h(n,i,s,r,e[a+3],22,-1044525330),r=h(r,n,i,s,e[a+4],7,-176418897),s=h(s,r,n,i,e[a+5],12,1200080426),i=h(i,s,r,n,e[a+6],17,-1473231341),n=h(n,i,s,r,e[a+7],22,-45705983),r=h(r,n,i,s,e[a+8],7,1770035416),s=h(s,r,n,i,e[a+9],12,-1958414417),i=h(i,s,r,n,e[a+10],17,-42063),n=h(n,i,s,r,e[a+11],22,-1990404162),r=h(r,n,i,s,e[a+12],7,1804603682),s=h(s,r,n,i,e[a+13],12,-40341101),i=h(i,s,r,n,e[a+14],17,-1502002290),r=d(r,n=h(n,i,s,r,e[a+15],22,1236535329),i,s,e[a+1],5,-165796510),s=d(s,r,n,i,e[a+6],9,-1069501632),i=d(i,s,r,n,e[a+11],14,643717713),n=d(n,i,s,r,e[a],20,-373897302),r=d(r,n,i,s,e[a+5],5,-701558691),s=d(s,r,n,i,e[a+10],9,38016083),i=d(i,s,r,n,e[a+15],14,-660478335),n=d(n,i,s,r,e[a+4],20,-405537848),r=d(r,n,i,s,e[a+9],5,568446438),s=d(s,r,n,i,e[a+14],9,-1019803690),i=d(i,s,r,n,e[a+3],14,-187363961),n=d(n,i,s,r,e[a+8],20,1163531501),r=d(r,n,i,s,e[a+13],5,-1444681467),s=d(s,r,n,i,e[a+2],9,-51403784),i=d(i,s,r,n,e[a+7],14,1735328473),r=f(r,n=d(n,i,s,r,e[a+12],20,-1926607734),i,s,e[a+5],4,-378558),s=f(s,r,n,i,e[a+8],11,-2022574463),i=f(i,s,r,n,e[a+11],16,1839030562),n=f(n,i,s,r,e[a+14],23,-35309556),r=f(r,n,i,s,e[a+1],4,-1530992060),s=f(s,r,n,i,e[a+4],11,1272893353),i=f(i,s,r,n,e[a+7],16,-155497632),n=f(n,i,s,r,e[a+10],23,-1094730640),r=f(r,n,i,s,e[a+13],4,681279174),s=f(s,r,n,i,e[a],11,-358537222),i=f(i,s,r,n,e[a+3],16,-722521979),n=f(n,i,s,r,e[a+6],23,76029189),r=f(r,n,i,s,e[a+9],4,-640364487),s=f(s,r,n,i,e[a+12],11,-421815835),i=f(i,s,r,n,e[a+15],16,530742520),r=p(r,n=f(n,i,s,r,e[a+2],23,-995338651),i,s,e[a],6,-198630844),s=p(s,r,n,i,e[a+7],10,1126891415),i=p(i,s,r,n,e[a+14],15,-1416354905),n=p(n,i,s,r,e[a+5],21,-57434055),r=p(r,n,i,s,e[a+12],6,1700485571),s=p(s,r,n,i,e[a+3],10,-1894986606),i=p(i,s,r,n,e[a+10],15,-1051523),n=p(n,i,s,r,e[a+1],21,-2054922799),r=p(r,n,i,s,e[a+8],6,1873313359),s=p(s,r,n,i,e[a+15],10,-30611744),i=p(i,s,r,n,e[a+6],15,-1560198380),n=p(n,i,s,r,e[a+13],21,1309151649),r=p(r,n,i,s,e[a+4],6,-145523070),s=p(s,r,n,i,e[a+11],10,-1120210379),i=p(i,s,r,n,e[a+2],15,718787259),n=p(n,i,s,r,e[a+9],21,-343485551),r=l(r,u),n=l(n,c),i=l(i,m),s=l(s,g)}return[r,n,i,s]}function a(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(o(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}function l(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function u(e,t){return e<<t|e>>>32-t}function c(e,t,r,n,i,o){return l(u(l(l(t,e),l(n,o)),i),r)}function h(e,t,r,n,i,o,s){return c(t&r|~t&n,e,t,i,o,s)}function d(e,t,r,n,i,o,s){return c(t&n|r&~n,e,t,i,o,s)}function f(e,t,r,n,i,o,s){return c(t^r^n,e,t,i,o,s)}function p(e,t,r,n,i,o,s){return c(r^(t|~n),e,t,i,o,s)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n;r.default=m},{}],528:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n="00000000-0000-0000-0000-000000000000";r.default=n},{}],529:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("./validate.js"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if(!(0,n.default)(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}var s=o;r.default=s},{"./validate.js":539}],530:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;r.default=n},{}],531:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),i=new Uint8Array(16);function o(){if(!n)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}},{}],532:[function(e,t,r){"use strict";function n(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function i(e,t){return e<<t|e>>>32-t}function o(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var o=unescape(encodeURIComponent(e));e=[];for(var s=0;s<o.length;++s)e.push(o.charCodeAt(s))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var a=e.length/4+2,l=Math.ceil(a/16),u=new Array(l),c=0;c<l;++c){for(var h=new Uint32Array(16),d=0;d<16;++d)h[d]=e[64*c+4*d]<<24|e[64*c+4*d+1]<<16|e[64*c+4*d+2]<<8|e[64*c+4*d+3];u[c]=h}u[l-1][14]=8*(e.length-1)/Math.pow(2,32),u[l-1][14]=Math.floor(u[l-1][14]),u[l-1][15]=8*(e.length-1)&4294967295;for(var f=0;f<l;++f){for(var p=new Uint32Array(80),m=0;m<16;++m)p[m]=u[f][m];for(var g=16;g<80;++g)p[g]=i(p[g-3]^p[g-8]^p[g-14]^p[g-16],1);for(var v=r[0],y=r[1],b=r[2],w=r[3],C=r[4],_=0;_<80;++_){var S=Math.floor(_/20),x=i(v,5)+n(S,y,b,w)+C+t[S]+p[_]>>>0;C=w,w=b,b=i(y,30)>>>0,y=v,v=x}r[0]=r[0]+v>>>0,r[1]=r[1]+y>>>0,r[2]=r[2]+b>>>0,r[3]=r[3]+w>>>0,r[4]=r[4]+C>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=o;r.default=s},{}],533:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("./validate.js"));function i(e){return e&&e.__esModule?e:{default:e}}for(var o=[],s=0;s<256;++s)o.push((s+256).toString(16).substr(1));function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase();if(!(0,n.default)(r))throw TypeError("Stringified UUID is invalid");return r}var l=a;r.default=l},{"./validate.js":539}],534:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i,o=a(e("./rng.js")),s=a(e("./stringify.js"));function a(e){return e&&e.__esModule?e:{default:e}}var l=0,u=0;function c(e,t,r){var a=t&&r||0,c=t||new Array(16),h=(e=e||{}).node||n,d=void 0!==e.clockseq?e.clockseq:i;if(null==h||null==d){var f=e.random||(e.rng||o.default)();null==h&&(h=n=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==d&&(d=i=16383&(f[6]<<8|f[7]))}var p=void 0!==e.msecs?e.msecs:Date.now(),m=void 0!==e.nsecs?e.nsecs:u+1,g=p-l+(m-u)/1e4;if(g<0&&void 0===e.clockseq&&(d=d+1&16383),(g<0||p>l)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=p,u=m,i=d;var v=(1e4*(268435455&(p+=122192928e5))+m)%4294967296;c[a++]=v>>>24&255,c[a++]=v>>>16&255,c[a++]=v>>>8&255,c[a++]=255&v;var y=p/4294967296*1e4&268435455;c[a++]=y>>>8&255,c[a++]=255&y,c[a++]=y>>>24&15|16,c[a++]=y>>>16&255,c[a++]=d>>>8|128,c[a++]=255&d;for(var b=0;b<6;++b)c[a+b]=h[b];return t||(0,s.default)(c)}var h=c;r.default=h},{"./rng.js":531,"./stringify.js":533}],535:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("./v35.js")),i=o(e("./md5.js"));function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,n.default)("v3",48,i.default);r.default=s},{"./md5.js":527,"./v35.js":536}],536:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=u,r.URL=r.DNS=void 0;var n=o(e("./stringify.js")),i=o(e("./parse.js"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";r.DNS=a;var l="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function u(e,t,r){function o(e,o,a,l){if("string"==typeof e&&(e=s(e)),"string"==typeof o&&(o=(0,i.default)(o)),16!==o.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+e.length);if(u.set(o),u.set(e,o.length),(u=r(u))[6]=15&u[6]|t,u[8]=63&u[8]|128,a){l=l||0;for(var c=0;c<16;++c)a[l+c]=u[c];return a}return(0,n.default)(u)}try{o.name=e}catch(e){}return o.DNS=a,o.URL=l,o}r.URL=l},{"./parse.js":529,"./stringify.js":533}],537:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("./rng.js")),i=o(e("./stringify.js"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t,r){var o=(e=e||{}).random||(e.rng||n.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){r=r||0;for(var s=0;s<16;++s)t[r+s]=o[s];return t}return(0,i.default)(o)}var a=s;r.default=a},{"./rng.js":531,"./stringify.js":533}],538:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("./v35.js")),i=o(e("./sha1.js"));function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,n.default)("v5",80,i.default);r.default=s},{"./sha1.js":532,"./v35.js":536}],539:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("./regex.js"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return"string"==typeof e&&n.default.test(e)}var s=o;r.default=s},{"./regex.js":530}],540:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("./validate.js"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if(!(0,n.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var s=o;r.default=s},{"./validate.js":539}],541:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CHAR="\t\n\r -퟿-�𐀀-􏿿",r.S=" \t\r\n",r.NAME_START_CHAR=":A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�𐀀-󯿿",r.NAME_CHAR="-"+r.NAME_START_CHAR+".0-9·̀-ͯ‿-⁀",r.CHAR_RE=new RegExp("^["+r.CHAR+"]$","u"),r.S_RE=new RegExp("^["+r.S+"]+$","u"),r.NAME_START_CHAR_RE=new RegExp("^["+r.NAME_START_CHAR+"]$","u"),r.NAME_CHAR_RE=new RegExp("^["+r.NAME_CHAR+"]$","u"),r.NAME_RE=new RegExp("^["+r.NAME_START_CHAR+"]["+r.NAME_CHAR+"]*$","u"),r.NMTOKEN_RE=new RegExp("^["+r.NAME_CHAR+"]+$","u");var n=9,i=10,o=13,s=32;function a(e){return e>=s&&e<=55295||e===i||e===o||e===n||e>=57344&&e<=65533||e>=65536&&e<=1114111}function l(e){return e===s||e===i||e===o||e===n}function u(e){return e>=65&&e<=90||e>=97&&e<=122||58===e||95===e||8204===e||8205===e||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function c(e){return u(e)||e>=48&&e<=57||45===e||46===e||183===e||e>=768&&e<=879||e>=8255&&e<=8256}r.S_LIST=[s,i,o,n],r.isChar=a,r.isS=l,r.isNameStartChar=u,r.isNameChar=c},{}],542:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CHAR="-퟿-�𐀀-􏿿",r.RESTRICTED_CHAR="-\b\v\f---",r.S=" \t\r\n",r.NAME_START_CHAR=":A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�𐀀-󯿿",r.NAME_CHAR="-"+r.NAME_START_CHAR+".0-9·̀-ͯ‿-⁀",r.CHAR_RE=new RegExp("^["+r.CHAR+"]$","u"),r.RESTRICTED_CHAR_RE=new RegExp("^["+r.RESTRICTED_CHAR+"]$","u"),r.S_RE=new RegExp("^["+r.S+"]+$","u"),r.NAME_START_CHAR_RE=new RegExp("^["+r.NAME_START_CHAR+"]$","u"),r.NAME_CHAR_RE=new RegExp("^["+r.NAME_CHAR+"]$","u"),r.NAME_RE=new RegExp("^["+r.NAME_START_CHAR+"]["+r.NAME_CHAR+"]*$","u"),r.NMTOKEN_RE=new RegExp("^["+r.NAME_CHAR+"]+$","u");var n=9,i=10,o=13,s=32;function a(e){return e>=1&&e<=55295||e>=57344&&e<=65533||e>=65536&&e<=1114111}function l(e){return e>=1&&e<=8||11===e||12===e||e>=14&&e<=31||e>=127&&e<=132||e>=134&&e<=159}function u(e){return 9===e||10===e||13===e||e>31&&e<127||133===e||e>159&&e<=55295||e>=57344&&e<=65533||e>=65536&&e<=1114111}function c(e){return e===s||e===i||e===o||e===n}function h(e){return e>=65&&e<=90||e>=97&&e<=122||58===e||95===e||8204===e||8205===e||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function d(e){return h(e)||e>=48&&e<=57||45===e||46===e||183===e||e>=768&&e<=879||e>=8255&&e<=8256}r.S_LIST=[s,i,o,n],r.isChar=a,r.isRestrictedChar=l,r.isCharAndNotRestricted=u,r.isS=c,r.isNameStartChar=h,r.isNameChar=d},{}],543:[function(e,t,r){"use strict";function n(e){return e>=65&&e<=90||95===e||e>=97&&e<=122||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function i(e){return n(e)||45===e||46===e||e>=48&&e<=57||183===e||e>=768&&e<=879||e>=8255&&e<=8256}Object.defineProperty(r,"__esModule",{value:!0}),r.NC_NAME_START_CHAR="A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�𐀀-󯿿",r.NC_NAME_CHAR="-"+r.NC_NAME_START_CHAR+".0-9·̀-ͯ‿-⁀",r.NC_NAME_START_CHAR_RE=new RegExp("^["+r.NC_NAME_START_CHAR+"]$","u"),r.NC_NAME_CHAR_RE=new RegExp("^["+r.NC_NAME_CHAR+"]$","u"),r.NC_NAME_RE=new RegExp("^["+r.NC_NAME_START_CHAR+"]["+r.NC_NAME_CHAR+"]*$","u"),r.isNCNameStartChar=n,r.isNCNameChar=i},{}]},{},[15])(15)}()},9675:function(e){var t;t=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}return r.m=e,r.c=t,r.p="",r(0)}([function(e,t,r){"use strict";var n=r(1).default;t.__esModule=!0;var i=n(r(2)),o=n(r(45)),s=r(46),a=r(51),l=n(r(52)),u=n(r(49)),c=n(r(44)),h=i.default.create;function d(){var e=h();return e.compile=function(t,r){return a.compile(t,r,e)},e.precompile=function(t,r){return a.precompile(t,r,e)},e.AST=o.default,e.Compiler=a.Compiler,e.JavaScriptCompiler=l.default,e.Parser=s.parser,e.parse=s.parse,e.parseWithoutProcessing=s.parseWithoutProcessing,e}var f=d();f.create=d,c.default(f),f.Visitor=u.default,f.default=f,t.default=f,e.exports=t.default},function(e,t){"use strict";t.default=function(e){return e&&e.__esModule?e:{default:e}},t.__esModule=!0},function(e,t,r){"use strict";var n=r(3).default,i=r(1).default;t.__esModule=!0;var o=n(r(4)),s=i(r(37)),a=i(r(6)),l=n(r(5)),u=n(r(38)),c=i(r(44));function h(){var e=new o.HandlebarsEnvironment;return l.extend(e,o),e.SafeString=s.default,e.Exception=a.default,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=u,e.template=function(t){return u.template(t,e)},e}var d=h();d.create=h,c.default(d),d.default=d,t.default=d,e.exports=t.default},function(e,t){"use strict";t.default=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},t.__esModule=!0},function(e,t,r){"use strict";var n=r(1).default;t.__esModule=!0,t.HandlebarsEnvironment=h;var i=r(5),o=n(r(6)),s=r(10),a=r(30),l=n(r(32)),u=r(33);t.VERSION="4.7.7",t.COMPILER_REVISION=8,t.LAST_COMPATIBLE_COMPILER_REVISION=7,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var c="[object Object]";function h(e,t,r){this.helpers=e||{},this.partials=t||{},this.decorators=r||{},s.registerDefaultHelpers(this),a.registerDefaultDecorators(this)}h.prototype={constructor:h,logger:l.default,log:l.default.log,registerHelper:function(e,t){if(i.toString.call(e)===c){if(t)throw new o.default("Arg not supported with multiple helpers");i.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(i.toString.call(e)===c)i.extend(this.partials,e);else{if(void 0===t)throw new o.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(i.toString.call(e)===c){if(t)throw new o.default("Arg not supported with multiple decorators");i.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){u.resetLoggedProperties()}};var d=l.default.log;t.log=d,t.createFrame=i.createFrame,t.logger=l.default},function(e,t){"use strict";t.__esModule=!0,t.extend=s,t.indexOf=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return i.test(e)?e.replace(n,o):e},t.isEmpty=function(e){return!e&&0!==e||!(!u(e)||0!==e.length)},t.createFrame=function(e){var t=s({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},n=/[&<>"'`=]/g,i=/[&<>"'`=]/;function o(e){return r[e]}function s(e){for(var t=1;t<arguments.length;t++)for(var r in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],r)&&(e[r]=arguments[t][r]);return e}var a=Object.prototype.toString;t.toString=a;var l=function(e){return"function"==typeof e};l(/x/)&&(t.isFunction=l=function(e){return"function"==typeof e&&"[object Function]"===a.call(e)}),t.isFunction=l;var u=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===a.call(e)};t.isArray=u},function(e,t,r){"use strict";var n=r(7).default;t.__esModule=!0;var i=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function o(e,t){var r=t&&t.loc,s=void 0,a=void 0,l=void 0,u=void 0;r&&(s=r.start.line,a=r.end.line,l=r.start.column,u=r.end.column,e+=" - "+s+":"+l);for(var c=Error.prototype.constructor.call(this,e),h=0;h<i.length;h++)this[i[h]]=c[i[h]];Error.captureStackTrace&&Error.captureStackTrace(this,o);try{r&&(this.lineNumber=s,this.endLineNumber=a,n?(Object.defineProperty(this,"column",{value:l,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:u,enumerable:!0})):(this.column=l,this.endColumn=u))}catch(e){}}o.prototype=new Error,t.default=o,e.exports=t.default},function(e,t,r){e.exports={default:r(8),__esModule:!0}},function(e,t,r){var n=r(9);e.exports=function(e,t,r){return n.setDesc(e,t,r)}},function(e,t){var r=Object;e.exports={create:r.create,getProto:r.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:r.getOwnPropertyDescriptor,setDesc:r.defineProperty,setDescs:r.defineProperties,getKeys:r.keys,getNames:r.getOwnPropertyNames,getSymbols:r.getOwnPropertySymbols,each:[].forEach}},function(e,t,r){"use strict";var n=r(1).default;t.__esModule=!0,t.registerDefaultHelpers=function(e){i.default(e),o.default(e),s.default(e),a.default(e),l.default(e),u.default(e),c.default(e)},t.moveHelperToHooks=function(e,t,r){e.helpers[t]&&(e.hooks[t]=e.helpers[t],r||delete e.helpers[t])};var i=n(r(11)),o=n(r(12)),s=n(r(25)),a=n(r(26)),l=n(r(27)),u=n(r(28)),c=n(r(29))},function(e,t,r){"use strict";t.__esModule=!0;var n=r(5);t.default=function(e){e.registerHelper("blockHelperMissing",(function(t,r){var i=r.inverse,o=r.fn;if(!0===t)return o(this);if(!1===t||null==t)return i(this);if(n.isArray(t))return t.length>0?(r.ids&&(r.ids=[r.name]),e.helpers.each(t,r)):i(this);if(r.data&&r.ids){var s=n.createFrame(r.data);s.contextPath=n.appendContextPath(r.data.contextPath,r.name),r={data:s}}return o(t,r)}))},e.exports=t.default},function(e,t,r){(function(n){"use strict";var i=r(13).default,o=r(1).default;t.__esModule=!0;var s=r(5),a=o(r(6));t.default=function(e){e.registerHelper("each",(function(e,t){if(!t)throw new a.default("Must pass iterator to #each");var r,o=t.fn,l=t.inverse,u=0,c="",h=void 0,d=void 0;function f(t,r,n){h&&(h.key=t,h.index=r,h.first=0===r,h.last=!!n,d&&(h.contextPath=d+t)),c+=o(e[t],{data:h,blockParams:s.blockParams([e[t],t],[d+t,null])})}if(t.data&&t.ids&&(d=s.appendContextPath(t.data.contextPath,t.ids[0])+"."),s.isFunction(e)&&(e=e.call(this)),t.data&&(h=s.createFrame(t.data)),e&&"object"==typeof e)if(s.isArray(e))for(var p=e.length;u<p;u++)u in e&&f(u,u,u===e.length-1);else if(n.Symbol&&e[n.Symbol.iterator]){for(var m=[],g=e[n.Symbol.iterator](),v=g.next();!v.done;v=g.next())m.push(v.value);for(p=(e=m).length;u<p;u++)f(u,u,u===e.length-1)}else r=void 0,i(e).forEach((function(e){void 0!==r&&f(r,u-1),r=e,u++})),void 0!==r&&f(r,u-1,!0);return 0===u&&(c=l(this)),c}))},e.exports=t.default}).call(t,function(){return this}())},function(e,t,r){e.exports={default:r(14),__esModule:!0}},function(e,t,r){r(15),e.exports=r(21).Object.keys},function(e,t,r){var n=r(16);r(18)("keys",(function(e){return function(t){return e(n(t))}}))},function(e,t,r){var n=r(17);e.exports=function(e){return Object(n(e))}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){var n=r(19),i=r(21),o=r(24);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],s={};s[e]=t(r),n(n.S+n.F*o((function(){r(1)})),"Object",s)}},function(e,t,r){var n=r(20),i=r(21),o=r(22),s="prototype",a=function(e,t,r){var l,u,c,h=e&a.F,d=e&a.G,f=e&a.S,p=e&a.P,m=e&a.B,g=e&a.W,v=d?i:i[t]||(i[t]={}),y=d?n:f?n[t]:(n[t]||{})[s];for(l in d&&(r=t),r)(u=!h&&y&&l in y)&&l in v||(c=u?y[l]:r[l],v[l]=d&&"function"!=typeof y[l]?r[l]:m&&u?o(c,n):g&&y[l]==c?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t[s]=e[s],t}(c):p&&"function"==typeof c?o(Function.call,c):c,p&&((v[s]||(v[s]={}))[l]=c))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,e.exports=a},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){var r=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=r)},function(e,t,r){var n=r(23);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){"use strict";var n=r(1).default;t.__esModule=!0;var i=n(r(6));t.default=function(e){e.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new i.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},e.exports=t.default},function(e,t,r){"use strict";var n=r(1).default;t.__esModule=!0;var i=r(5),o=n(r(6));t.default=function(e){e.registerHelper("if",(function(e,t){if(2!=arguments.length)throw new o.default("#if requires exactly one argument");return i.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||i.isEmpty(e)?t.inverse(this):t.fn(this)})),e.registerHelper("unless",(function(t,r){if(2!=arguments.length)throw new o.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:r.inverse,inverse:r.fn,hash:r.hash})}))},e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",(function(){for(var t=[void 0],r=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)t.push(arguments[n]);var i=1;null!=r.hash.level?i=r.hash.level:r.data&&null!=r.data.level&&(i=r.data.level),t[0]=i,e.log.apply(e,t)}))},e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",(function(e,t,r){return e?r.lookupProperty(e,t):e}))},e.exports=t.default},function(e,t,r){"use strict";var n=r(1).default;t.__esModule=!0;var i=r(5),o=n(r(6));t.default=function(e){e.registerHelper("with",(function(e,t){if(2!=arguments.length)throw new o.default("#with requires exactly one argument");i.isFunction(e)&&(e=e.call(this));var r=t.fn;if(i.isEmpty(e))return t.inverse(this);var n=t.data;return t.data&&t.ids&&((n=i.createFrame(t.data)).contextPath=i.appendContextPath(t.data.contextPath,t.ids[0])),r(e,{data:n,blockParams:i.blockParams([e],[n&&n.contextPath])})}))},e.exports=t.default},function(e,t,r){"use strict";var n=r(1).default;t.__esModule=!0,t.registerDefaultDecorators=function(e){i.default(e)};var i=n(r(31))},function(e,t,r){"use strict";t.__esModule=!0;var n=r(5);t.default=function(e){e.registerDecorator("inline",(function(e,t,r,i){var o=e;return t.partials||(t.partials={},o=function(i,o){var s=r.partials;r.partials=n.extend({},s,t.partials);var a=e(i,o);return r.partials=s,a}),t.partials[i.args[0]]=i.fn,o}))},e.exports=t.default},function(e,t,r){"use strict";t.__esModule=!0;var n=r(5),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=n.indexOf(i.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=i.lookupLevel(e),"undefined"!=typeof console&&i.lookupLevel(i.level)<=e){var t=i.methodMap[e];console[t]||(t="log");for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o]}}};t.default=i,e.exports=t.default},function(e,t,r){"use strict";var n=r(34).default,i=r(13).default,o=r(3).default;t.__esModule=!0,t.createProtoAccessControl=function(e){var t=n(null);t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1;var r=n(null);return r.__proto__=!1,{properties:{whitelist:s.createNewLookupObject(r,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:s.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},t.resultIsAllowed=function(e,t,r){return u("function"==typeof e?t.methods:t.properties,r)},t.resetLoggedProperties=function(){i(l).forEach((function(e){delete l[e]}))};var s=r(36),a=o(r(32)),l=n(null);function u(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(function(e){!0!==l[e]&&(l[e]=!0,a.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(t),!1)}},function(e,t,r){e.exports={default:r(35),__esModule:!0}},function(e,t,r){var n=r(9);e.exports=function(e,t){return n.create(e,t)}},function(e,t,r){"use strict";var n=r(34).default;t.__esModule=!0,t.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return i.extend.apply(void 0,[n(null)].concat(t))};var i=r(5)},function(e,t){"use strict";function r(e){this.string=e}t.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},t.default=r,e.exports=t.default},function(e,t,r){"use strict";var n=r(39).default,i=r(13).default,o=r(3).default,s=r(1).default;t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,r=u.COMPILER_REVISION;if(!(t>=u.LAST_COMPATIBLE_COMPILER_REVISION&&t<=u.COMPILER_REVISION)){if(t<u.LAST_COMPATIBLE_COMPILER_REVISION){var n=u.REVISION_CHANGES[r],i=u.REVISION_CHANGES[t];throw new l.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+i+").")}throw new l.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}},t.template=function(e,t){if(!t)throw new l.default("No environment passed to template");if(!e||!e.main)throw new l.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var r=e.compiler&&7===e.compiler[0],o={strict:function(e,t,r){if(!e||!(t in e))throw new l.default('"'+t+'" not defined in '+e,{loc:r});return o.lookupProperty(e,t)},lookupProperty:function(e,t){var r=e[t];return null==r||Object.prototype.hasOwnProperty.call(e,t)||d.resultIsAllowed(r,o.protoAccessControl,t)?r:void 0},lookup:function(e,t){for(var r=e.length,n=0;n<r;n++)if(null!=(e[n]&&o.lookupProperty(e[n],t)))return e[n][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:a.escapeExpression,invokePartial:function(r,n,i){i.hash&&(n=a.extend({},n,i.hash),i.ids&&(i.ids[0]=!0)),r=t.VM.resolvePartial.call(this,r,n,i);var o=a.extend({},i,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),s=t.VM.invokePartial.call(this,r,n,o);if(null==s&&t.compile&&(i.partials[i.name]=t.compile(r,e.compilerOptions,t),s=i.partials[i.name](n,o)),null!=s){if(i.indent){for(var u=s.split("\n"),c=0,h=u.length;c<h&&(u[c]||c+1!==h);c++)u[c]=i.indent+u[c];s=u.join("\n")}return s}throw new l.default("The partial "+i.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var r=e[t];return r.decorator=e[t+"_d"],r},programs:[],program:function(e,t,r,n,i){var o=this.programs[e],s=this.fn(e);return t||i||n||r?o=f(this,e,s,t,r,n,i):o||(o=this.programs[e]=f(this,e,s)),o},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var r=e||t;return e&&t&&e!==t&&(r=a.extend({},t,e)),r},nullContext:n({}),noop:t.VM.noop,compilerInfo:e.compiler};function s(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=r.data;s._setup(r),!r.partial&&e.useData&&(n=function(e,t){return t&&"root"in t||((t=t?u.createFrame(t):{}).root=e),t}(t,n));var i=void 0,a=e.useBlockParams?[]:void 0;function l(t){return""+e.main(o,t,o.helpers,o.partials,n,a,i)}return e.useDepths&&(i=r.depths?t!=r.depths[0]?[t].concat(r.depths):r.depths:[t]),(l=m(e.main,l,o,r.depths||[],n,a))(t,r)}return s.isTop=!0,s._setup=function(n){if(n.partial)o.protoAccessControl=n.protoAccessControl,o.helpers=n.helpers,o.partials=n.partials,o.decorators=n.decorators,o.hooks=n.hooks;else{var s=a.extend({},t.helpers,n.helpers);!function(e,t){i(e).forEach((function(r){var n=e[r];e[r]=function(e,t){var r=t.lookupProperty;return h.wrapHelper(e,(function(e){return a.extend({lookupProperty:r},e)}))}(n,t)}))}(s,o),o.helpers=s,e.usePartial&&(o.partials=o.mergeIfNeeded(n.partials,t.partials)),(e.usePartial||e.useDecorators)&&(o.decorators=a.extend({},t.decorators,n.decorators)),o.hooks={},o.protoAccessControl=d.createProtoAccessControl(n);var l=n.allowCallsToHelperMissing||r;c.moveHelperToHooks(o,"helperMissing",l),c.moveHelperToHooks(o,"blockHelperMissing",l)}},s._child=function(t,r,n,i){if(e.useBlockParams&&!n)throw new l.default("must pass block params");if(e.useDepths&&!i)throw new l.default("must pass parent depths");return f(o,t,e[t],r,0,n,i)},s},t.wrapProgram=f,t.resolvePartial=function(e,t,r){return e?e.call||r.name||(r.name=e,e=r.partials[e]):e="@partial-block"===r.name?r.data["partial-block"]:r.partials[r.name],e},t.invokePartial=function(e,t,r){var n=r.data&&r.data["partial-block"];r.partial=!0,r.ids&&(r.data.contextPath=r.ids[0]||r.data.contextPath);var i=void 0;if(r.fn&&r.fn!==p&&function(){r.data=u.createFrame(r.data);var e=r.fn;i=r.data["partial-block"]=function(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.data=u.createFrame(r.data),r.data["partial-block"]=n,e(t,r)},e.partials&&(r.partials=a.extend({},r.partials,e.partials))}(),void 0===e&&i&&(e=i),void 0===e)throw new l.default("The partial "+r.name+" could not be found");if(e instanceof Function)return e(t,r)},t.noop=p;var a=o(r(5)),l=s(r(6)),u=r(4),c=r(10),h=r(43),d=r(33);function f(e,t,r,n,i,o,s){function a(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=s;return!s||t==s[0]||t===e.nullContext&&null===s[0]||(a=[t].concat(s)),r(e,t,e.helpers,e.partials,i.data||n,o&&[i.blockParams].concat(o),a)}return(a=m(r,a,e,s,n,o)).program=t,a.depth=s?s.length:0,a.blockParams=i||0,a}function p(){return""}function m(e,t,r,n,i,o){if(e.decorator){var s={};t=e.decorator(t,s,r,n&&n[0],i,o,n),a.extend(t,s)}return t}},function(e,t,r){e.exports={default:r(40),__esModule:!0}},function(e,t,r){r(41),e.exports=r(21).Object.seal},function(e,t,r){var n=r(42);r(18)("seal",(function(e){return function(t){return e&&n(t)?e(t):t}}))},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){"use strict";t.__esModule=!0,t.wrapHelper=function(e,t){return"function"!=typeof e?e:function(){return arguments[arguments.length-1]=t(arguments[arguments.length-1]),e.apply(this,arguments)}}},function(e,t){(function(r){"use strict";t.__esModule=!0,t.default=function(e){var t=void 0!==r?r:window,n=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=n),e}},e.exports=t.default}).call(t,function(){return this}())},function(e,t){"use strict";t.__esModule=!0;var r={helpers:{helperExpression:function(e){return"SubExpression"===e.type||("MustacheStatement"===e.type||"BlockStatement"===e.type)&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!r.helpers.scopedId(e)&&!e.depth}}};t.default=r,e.exports=t.default},function(e,t,r){"use strict";var n=r(1).default,i=r(3).default;t.__esModule=!0,t.parseWithoutProcessing=c,t.parse=function(e,t){var r=c(e,t);return new s.default(t).accept(r)};var o=n(r(47)),s=n(r(48)),a=i(r(50)),l=r(5);t.parser=o.default;var u={};function c(e,t){return"Program"===e.type?e:(o.default.yy=u,u.locInfo=function(e){return new u.SourceLocation(t&&t.srcName,e)},o.default.parse(e))}l.extend(u,a)},function(e,t){"use strict";t.__esModule=!0;var r=function(){var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(e,t,r,n,i,o,s){var a=o.length-1;switch(i){case 1:return o[a-1];case 2:this.$=n.prepareProgram(o[a]);break;case 3:case 4:case 5:case 6:case 7:case 8:case 20:case 27:case 28:case 33:case 34:case 40:case 41:this.$=o[a];break;case 9:this.$={type:"CommentStatement",value:n.stripComment(o[a]),strip:n.stripFlags(o[a],o[a]),loc:n.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:o[a],value:o[a],loc:n.locInfo(this._$)};break;case 11:this.$=n.prepareRawBlock(o[a-2],o[a-1],o[a],this._$);break;case 12:this.$={path:o[a-3],params:o[a-2],hash:o[a-1]};break;case 13:this.$=n.prepareBlock(o[a-3],o[a-2],o[a-1],o[a],!1,this._$);break;case 14:this.$=n.prepareBlock(o[a-3],o[a-2],o[a-1],o[a],!0,this._$);break;case 15:this.$={open:o[a-5],path:o[a-4],params:o[a-3],hash:o[a-2],blockParams:o[a-1],strip:n.stripFlags(o[a-5],o[a])};break;case 16:case 17:this.$={path:o[a-4],params:o[a-3],hash:o[a-2],blockParams:o[a-1],strip:n.stripFlags(o[a-5],o[a])};break;case 18:this.$={strip:n.stripFlags(o[a-1],o[a-1]),program:o[a]};break;case 19:var l=n.prepareBlock(o[a-2],o[a-1],o[a],o[a],!1,this._$),u=n.prepareProgram([l],o[a-1].loc);u.chained=!0,this.$={strip:o[a-2].strip,program:u,chain:!0};break;case 21:this.$={path:o[a-1],strip:n.stripFlags(o[a-2],o[a])};break;case 22:case 23:this.$=n.prepareMustache(o[a-3],o[a-2],o[a-1],o[a-4],n.stripFlags(o[a-4],o[a]),this._$);break;case 24:this.$={type:"PartialStatement",name:o[a-3],params:o[a-2],hash:o[a-1],indent:"",strip:n.stripFlags(o[a-4],o[a]),loc:n.locInfo(this._$)};break;case 25:this.$=n.preparePartialBlock(o[a-2],o[a-1],o[a],this._$);break;case 26:this.$={path:o[a-3],params:o[a-2],hash:o[a-1],strip:n.stripFlags(o[a-4],o[a])};break;case 29:this.$={type:"SubExpression",path:o[a-3],params:o[a-2],hash:o[a-1],loc:n.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:o[a],loc:n.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:n.id(o[a-2]),value:o[a],loc:n.locInfo(this._$)};break;case 32:this.$=n.id(o[a-1]);break;case 35:this.$={type:"StringLiteral",value:o[a],original:o[a],loc:n.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(o[a]),original:Number(o[a]),loc:n.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===o[a],original:"true"===o[a],loc:n.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:n.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:n.locInfo(this._$)};break;case 42:this.$=n.preparePath(!0,o[a],this._$);break;case 43:this.$=n.preparePath(!1,o[a],this._$);break;case 44:o[a-2].push({part:n.id(o[a]),original:o[a],separator:o[a-1]}),this.$=o[a-2];break;case 45:this.$=[{part:n.id(o[a]),original:o[a]}];break;case 46:case 48:case 50:case 58:case 64:case 70:case 78:case 82:case 86:case 90:case 94:this.$=[];break;case 47:case 49:case 51:case 59:case 65:case 71:case 79:case 83:case 87:case 91:case 95:case 99:case 101:o[a-1].push(o[a]);break;case 98:case 100:this.$=[o[a]]}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(e,t){throw new Error(e)},parse:function(e){var t=this,r=[0],n=[null],i=[],o=this.table,s="",a=0,l=0,u=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var c=this.lexer.yylloc;i.push(c);var h=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,f,p,m,g,v,y,b,w,C,_={};;){if(p=r[r.length-1],this.defaultActions[p]?m=this.defaultActions[p]:(null==d&&(C=void 0,"number"!=typeof(C=t.lexer.lex()||1)&&(C=t.symbols_[C]||C),d=C),m=o[p]&&o[p][d]),void 0===m||!m.length||!m[0]){var S="";if(!u){for(v in w=[],o[p])this.terminals_[v]&&v>2&&w.push("'"+this.terminals_[v]+"'");S=this.lexer.showPosition?"Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:c,expected:w})}}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+d);switch(m[0]){case 1:r.push(d),n.push(this.lexer.yytext),i.push(this.lexer.yylloc),r.push(m[1]),d=null,f?(d=f,f=null):(l=this.lexer.yyleng,s=this.lexer.yytext,a=this.lexer.yylineno,c=this.lexer.yylloc,u>0&&u--);break;case 2:if(y=this.productions_[m[1]][1],_.$=n[n.length-y],_._$={first_line:i[i.length-(y||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(y||1)].first_column,last_column:i[i.length-1].last_column},h&&(_._$.range=[i[i.length-(y||1)].range[0],i[i.length-1].range[1]]),void 0!==(g=this.performAction.call(_,s,l,a,this.yy,m[1],n,i)))return g;y&&(r=r.slice(0,-1*y*2),n=n.slice(0,-1*y),i=i.slice(0,-1*y)),r.push(this.productions_[m[1]][0]),n.push(_.$),i.push(_._$),b=o[r[r.length-2]][r[r.length-1]],r.push(b);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;var e,t,r,n,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),s=0;s<o.length&&(!(r=this._input.match(this.rules[o[s]]))||t&&!(r[0].length>t[0].length)||(t=r,n=s,this.options.flex));s++);return t?((i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,t,r,n){function i(e,r){return t.yytext=t.yytext.substring(e,t.yyleng-r+e)}switch(r){case 0:if("\\\\"===t.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 15;break;case 1:case 5:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(i(5,9),"END_RAW_BLOCK");case 6:case 22:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:case 23:return 48;case 21:this.unput(t.yytext),this.popState(),this.begin("com");break;case 24:return 73;case 25:case 26:case 41:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return t.yytext=i(1,2).replace(/\\"/g,'"'),80;case 32:return t.yytext=i(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 42:return t.yytext=t.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};return e}();function r(){this.yy={}}return e.lexer=t,r.prototype=e,e.Parser=r,new r}();t.default=r,e.exports=t.default},function(e,t,r){"use strict";var n=r(1).default;t.__esModule=!0;var i=n(r(49));function o(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=e}function s(e,t,r){void 0===t&&(t=e.length);var n=e[t-1],i=e[t-2];return n?"ContentStatement"===n.type?(i||!r?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:r}function a(e,t,r){void 0===t&&(t=-1);var n=e[t+1],i=e[t+2];return n?"ContentStatement"===n.type?(i||!r?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:r}function l(e,t,r){var n=e[null==t?0:t+1];if(n&&"ContentStatement"===n.type&&(r||!n.rightStripped)){var i=n.value;n.value=n.value.replace(r?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.value!==i}}function u(e,t,r){var n=e[null==t?e.length-1:t-1];if(n&&"ContentStatement"===n.type&&(r||!n.leftStripped)){var i=n.value;return n.value=n.value.replace(r?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.value!==i,n.leftStripped}}o.prototype=new i.default,o.prototype.Program=function(e){var t=!this.options.ignoreStandalone,r=!this.isRootSeen;this.isRootSeen=!0;for(var n=e.body,i=0,o=n.length;i<o;i++){var c=n[i],h=this.accept(c);if(h){var d=s(n,i,r),f=a(n,i,r),p=h.openStandalone&&d,m=h.closeStandalone&&f,g=h.inlineStandalone&&d&&f;h.close&&l(n,i,!0),h.open&&u(n,i,!0),t&&g&&(l(n,i),u(n,i)&&"PartialStatement"===c.type&&(c.indent=/([ \t]+$)/.exec(n[i-1].original)[1])),t&&p&&(l((c.program||c.inverse).body),u(n,i)),t&&m&&(l(n,i),u((c.inverse||c.program).body))}}return e},o.prototype.BlockStatement=o.prototype.DecoratorBlock=o.prototype.PartialBlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,r=e.program&&e.inverse,n=r,i=r;if(r&&r.chained)for(n=r.body[0].program;i.chained;)i=i.body[i.body.length-1].program;var o={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:a(t.body),closeStandalone:s((n||t).body)};if(e.openStrip.close&&l(t.body,null,!0),r){var c=e.inverseStrip;c.open&&u(t.body,null,!0),c.close&&l(n.body,null,!0),e.closeStrip.open&&u(i.body,null,!0),!this.options.ignoreStandalone&&s(t.body)&&a(n.body)&&(u(t.body),l(n.body))}else e.closeStrip.open&&u(t.body,null,!0);return o},o.prototype.Decorator=o.prototype.MustacheStatement=function(e){return e.strip},o.prototype.PartialStatement=o.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},t.default=o,e.exports=t.default},function(e,t,r){"use strict";var n=r(1).default;t.__esModule=!0;var i=n(r(6));function o(){this.parents=[]}function s(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")}function a(e){s.call(this,e),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")}function l(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")}o.prototype={constructor:o,mutating:!1,acceptKey:function(e,t){var r=this.accept(e[t]);if(this.mutating){if(r&&!o.prototype[r.type])throw new i.default('Unexpected node type "'+r.type+'" found when accepting '+t+" on "+e.type);e[t]=r}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new i.default(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,r=e.length;t<r;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,r--)},accept:function(e){if(e){if(!this[e.type])throw new i.default("Unknown type: "+e.type,e);this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:!1!==t?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:s,Decorator:s,BlockStatement:a,DecoratorBlock:a,PartialStatement:l,PartialBlockStatement:function(e){l.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:s,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},t.default=o,e.exports=t.default},function(e,t,r){"use strict";var n=r(1).default;t.__esModule=!0,t.SourceLocation=function(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}},t.id=function(e){return/^\[.*\]$/.test(e)?e.substring(1,e.length-1):e},t.stripFlags=function(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}},t.stripComment=function(e){return e.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},t.preparePath=function(e,t,r){r=this.locInfo(r);for(var n=e?"@":"",o=[],s=0,a=0,l=t.length;a<l;a++){var u=t[a].part,c=t[a].original!==u;if(n+=(t[a].separator||"")+u,c||".."!==u&&"."!==u&&"this"!==u)o.push(u);else{if(o.length>0)throw new i.default("Invalid path: "+n,{loc:r});".."===u&&s++}}return{type:"PathExpression",data:e,depth:s,parts:o,original:n,loc:r}},t.prepareMustache=function(e,t,r,n,i,o){var s=n.charAt(3)||n.charAt(2),a="{"!==s&&"&"!==s;return{type:/\*/.test(n)?"Decorator":"MustacheStatement",path:e,params:t,hash:r,escaped:a,strip:i,loc:this.locInfo(o)}},t.prepareRawBlock=function(e,t,r,n){o(e,r),n=this.locInfo(n);var i={type:"Program",body:t,strip:{},loc:n};return{type:"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:i,openStrip:{},inverseStrip:{},closeStrip:{},loc:n}},t.prepareBlock=function(e,t,r,n,s,a){n&&n.path&&o(e,n);var l=/\*/.test(e.open);t.blockParams=e.blockParams;var u=void 0,c=void 0;if(r){if(l)throw new i.default("Unexpected inverse block on decorator",r);r.chain&&(r.program.body[0].closeStrip=n.strip),c=r.strip,u=r.program}return s&&(s=u,u=t,t=s),{type:l?"DecoratorBlock":"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:t,inverse:u,openStrip:e.strip,inverseStrip:c,closeStrip:n&&n.strip,loc:this.locInfo(a)}},t.prepareProgram=function(e,t){if(!t&&e.length){var r=e[0].loc,n=e[e.length-1].loc;r&&n&&(t={source:r.source,start:{line:r.start.line,column:r.start.column},end:{line:n.end.line,column:n.end.column}})}return{type:"Program",body:e,strip:{},loc:t}},t.preparePartialBlock=function(e,t,r,n){return o(e,r),{type:"PartialBlockStatement",name:e.path,params:e.params,hash:e.hash,program:t,openStrip:e.strip,closeStrip:r&&r.strip,loc:this.locInfo(n)}};var i=n(r(6));function o(e,t){if(t=t.path?t.path.original:t,e.path.original!==t){var r={loc:e.path.loc};throw new i.default(e.path.original+" doesn't match "+t,r)}}},function(e,t,r){"use strict";var n=r(34).default,i=r(1).default;t.__esModule=!0,t.Compiler=u,t.precompile=function(e,t,r){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new o.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);"data"in(t=t||{})||(t.data=!0),t.compat&&(t.useDepths=!0);var n=r.parse(e,t),i=(new r.Compiler).compile(n,t);return(new r.JavaScriptCompiler).compile(i,t)},t.compile=function(e,t,r){if(void 0===t&&(t={}),null==e||"string"!=typeof e&&"Program"!==e.type)throw new o.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);"data"in(t=s.extend({},t))||(t.data=!0),t.compat&&(t.useDepths=!0);var n=void 0;function i(){var n=r.parse(e,t),i=(new r.Compiler).compile(n,t),o=(new r.JavaScriptCompiler).compile(i,t,void 0,!0);return r.template(o)}function a(e,t){return n||(n=i()),n.call(this,e,t)}return a._setup=function(e){return n||(n=i()),n._setup(e)},a._child=function(e,t,r,o){return n||(n=i()),n._child(e,t,r,o)},a};var o=i(r(6)),s=r(5),a=i(r(45)),l=[].slice;function u(){}function c(e,t){if(e===t)return!0;if(s.isArray(e)&&s.isArray(t)&&e.length===t.length){for(var r=0;r<e.length;r++)if(!c(e[r],t[r]))return!1;return!0}}function h(e){if(!e.path.parts){var t=e.path;e.path={type:"PathExpression",data:!1,depth:0,parts:[t.original+""],original:t.original+"",loc:t.loc}}}u.prototype={compiler:u,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var r=0;r<t;r++){var n=this.opcodes[r],i=e.opcodes[r];if(n.opcode!==i.opcode||!c(n.args,i.args))return!1}for(t=this.children.length,r=0;r<t;r++)if(!this.children[r].equals(e.children[r]))return!1;return!0},guid:0,compile:function(e,t){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[],t.knownHelpers=s.extend(n(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},t.knownHelpers),this.accept(e)},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),r=this.guid++;return this.usePartial=this.usePartial||t.usePartial,this.children[r]=t,this.useDepths=this.useDepths||t.useDepths,r},accept:function(e){if(!this[e.type])throw new o.default("Unknown type: "+e.type,e);this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,r=t.length,n=0;n<r;n++)this.accept(t[n]);return this.options.blockParams.shift(),this.isSimple=1===r,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){h(e);var t=e.program,r=e.inverse;t=t&&this.compileProgram(t),r=r&&this.compileProgram(r);var n=this.classifySexpr(e);"helper"===n?this.helperSexpr(e,t,r):"simple"===n?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,r),this.opcode("pushProgram",t),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var t=e.program&&this.compileProgram(e.program),r=this.setupFullMustacheParams(e,t,void 0),n=e.path;this.useDecorators=!0,this.opcode("registerDecorator",r.length,n.original)},PartialStatement:function(e){this.usePartial=!0;var t=e.program;t&&(t=this.compileProgram(e.program));var r=e.params;if(r.length>1)throw new o.default("Unsupported number of partial arguments: "+r.length,e);r.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):r.push({type:"PathExpression",parts:[],depth:0}));var n=e.name.original,i="SubExpression"===e.name.type;i&&this.accept(e.name),this.setupFullMustacheParams(e,t,void 0,!0);var s=e.indent||"";this.options.preventIndent&&s&&(this.opcode("appendContent",s),s=""),this.opcode("invokePartial",i,n,s),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){h(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,r){var n=e.path,i=n.parts[0],o=null!=t||null!=r;this.opcode("getContext",n.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",r),n.strict=!0,this.accept(n),this.opcode("invokeAmbiguous",i,o)},simpleSexpr:function(e){var t=e.path;t.strict=!0,this.accept(t),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,r){var n=this.setupFullMustacheParams(e,t,r),i=e.path,s=i.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",n.length,s);else{if(this.options.knownHelpersOnly)throw new o.default("You specified knownHelpersOnly, but used the unknown helper "+s,e);i.strict=!0,i.falsy=!0,this.accept(i),this.opcode("invokeHelper",n.length,i.original,a.default.helpers.simpleId(i))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],r=a.default.helpers.scopedId(e),n=!e.depth&&!r&&this.blockParamIndex(t);n?this.opcode("lookupBlockParam",n,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,r):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,r=0,n=t.length;for(this.opcode("pushHash");r<n;r++)this.pushParam(t[r].value);for(;r--;)this.opcode("assignToHash",t[r].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:l.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=a.default.helpers.simpleId(e.path),r=t&&!!this.blockParamIndex(e.path.parts[0]),n=!r&&a.default.helpers.helperExpression(e),i=!r&&(n||t);if(i&&!n){var o=e.path.parts[0],s=this.options;s.knownHelpers[o]?n=!0:s.knownHelpersOnly&&(i=!1)}return n?"helper":i?"ambiguous":"simple"},pushParams:function(e){for(var t=0,r=e.length;t<r;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var r=void 0;if(!e.parts||a.default.helpers.scopedId(e)||e.depth||(r=this.blockParamIndex(e.parts[0])),r){var n=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",r,n)}else(t=e.original||t).replace&&(t=t.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,r,n){var i=e.params;return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",r),e.hash?this.accept(e.hash):this.opcode("emptyHash",n),i},blockParamIndex:function(e){for(var t=0,r=this.options.blockParams.length;t<r;t++){var n=this.options.blockParams[t],i=n&&s.indexOf(n,e);if(n&&i>=0)return[t,i]}}}},function(e,t,r){"use strict";var n=r(13).default,i=r(1).default;t.__esModule=!0;var o=r(4),s=i(r(6)),a=r(5),l=i(r(53));function u(e){this.value=e}function c(){}c.prototype={nameLookup:function(e,t){return this.internalNameLookup(e,t)},depthedLookup:function(e){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(e),")"]},compilerInfo:function(){var e=o.COMPILER_REVISION;return[e,o.REVISION_CHANGES[e]]},appendToBuffer:function(e,t,r){return a.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:r?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(e,t){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",e,",",JSON.stringify(t),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(e,t,r,n){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!r,this.context=r||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var i=e.opcodes,o=void 0,a=void 0,l=void 0,u=void 0;for(l=0,u=i.length;l<u;l++)o=i[l],this.source.currentLocation=o.loc,a=a||o.loc,this[o.opcode].apply(this,o.args);if(this.source.currentLocation=a,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new s.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),n?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var c=this.createFunctionContext(n);if(this.isChild)return c;var h={compiler:this.compilerInfo(),main:c};this.decorators&&(h.main_d=this.decorators,h.useDecorators=!0);var d=this.context,f=d.programs,p=d.decorators;for(l=0,u=f.length;l<u;l++)f[l]&&(h[l]=f[l],p[l]&&(h[l+"_d"]=p[l],h.useDecorators=!0));return this.environment.usePartial&&(h.usePartial=!0),this.options.data&&(h.useData=!0),this.useDepths&&(h.useDepths=!0),this.useBlockParams&&(h.useBlockParams=!0),this.options.compat&&(h.compat=!0),n?h.compilerOptions=this.options:(h.compiler=JSON.stringify(h.compiler),this.source.currentLocation={start:{line:1,column:0}},h=this.objectLiteral(h),t.srcName?(h=h.toStringWithSourceMap({file:t.destName})).map=h.map&&h.map.toString():h=h.toString()),h},preamble:function(){this.lastContext=0,this.source=new l.default(this.options.srcName),this.decorators=new l.default(this.options.srcName)},createFunctionContext:function(e){var t=this,r="",i=this.stackVars.concat(this.registers.list);i.length>0&&(r+=", "+i.join(", "));var o=0;n(this.aliases).forEach((function(e){var n=t.aliases[e];n.children&&n.referenceCount>1&&(r+=", alias"+ ++o+"="+e,n.children[0]="alias"+o)})),this.lookupPropertyFunctionIsUsed&&(r+=", "+this.lookupPropertyFunctionVarDeclaration());var s=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&s.push("blockParams"),this.useDepths&&s.push("depths");var a=this.mergeSource(r);return e?(s.push(a),Function.apply(this,s)):this.source.wrap(["function(",s.join(","),") {\n  ",a,"}"])},mergeSource:function(e){var t=this.environment.isSimple,r=!this.forceBuffer,n=void 0,i=void 0,o=void 0,s=void 0;return this.source.each((function(e){e.appendToBuffer?(o?e.prepend("  + "):o=e,s=e):(o&&(i?o.prepend("buffer += "):n=!0,s.add(";"),o=s=void 0),i=!0,t||(r=!1))})),r?o?(o.prepend("return "),s.add(";")):i||this.source.push('return "";'):(e+=", buffer = "+(n?"":this.initializeBuffer()),o?(o.prepend("return buffer + "),s.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(n?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(e){var t=this.aliasable("container.hooks.blockHelperMissing"),r=[this.contextName(0)];this.setupHelperArgs(e,0,r);var n=this.popStack();r.splice(1,0,n),this.push(this.source.functionCall(t,"call",r))},ambiguousBlockValue:function(){var e=this.aliasable("container.hooks.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var r=this.topStack();t.splice(1,0,r),this.pushSource(["if (!",this.lastHelper,") { ",r," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack((function(e){return[" != null ? ",e,' : ""']})),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,r,n){var i=0;n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[i++])),this.resolvePath("context",e,i,t,r)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t,r){e?this.pushStackLiteral("container.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0,r)},resolvePath:function(e,t,r,n,i){var o=this;if(this.options.strict||this.options.assumeObjects)this.push(function(e,t,r,n){var i=t.popStack(),o=0,s=r.length;for(e&&s--;o<s;o++)i=t.nameLookup(i,r[o],n);return e?[t.aliasable("container.strict"),"(",i,", ",t.quotedString(r[o]),", ",JSON.stringify(t.source.currentLocation)," )"]:i}(this.options.strict&&i,this,t,e));else for(var s=t.length;r<s;r++)this.replaceStack((function(i){var s=o.nameLookup(i,t[r],e);return n?[" && ",s]:[" != null ? ",s," : ",i]}))},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},registerDecorator:function(e,t){var r=this.nameLookup("decorators",t,"decorator"),n=this.setupHelperArgs(t,e);this.decorators.push(["fn = ",this.decorators.functionCall(r,"",["fn","props","container",n])," || fn;"])},invokeHelper:function(e,t,r){var n=this.popStack(),i=this.setupHelper(e,t),o=[];r&&o.push(i.name),o.push(n),this.options.strict||o.push(this.aliasable("container.hooks.helperMissing"));var s=["(",this.itemsSeparatedBy(o,"||"),")"],a=this.source.functionCall(s,"call",i.callParams);this.push(a)},itemsSeparatedBy:function(e,t){var r=[];r.push(e[0]);for(var n=1;n<e.length;n++)r.push(t,e[n]);return r},invokeKnownHelper:function(e,t){var r=this.setupHelper(e,t);this.push(this.source.functionCall(r.name,"call",r.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var r=this.popStack();this.emptyHash();var n=this.setupHelper(0,e,t),i=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",e,"helper")," || ",r,")"];this.options.strict||(i[0]="(helper = ",i.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",i,n.paramsInit?["),(",n.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",n.callParams)," : helper))"])},invokePartial:function(e,t,r){var n=[],i=this.setupParams(t,1,n);e&&(t=this.popStack(),delete i.name),r&&(i.indent=JSON.stringify(r)),i.helpers="helpers",i.partials="partials",i.decorators="container.decorators",e?n.unshift(t):n.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(i.depths="depths"),i=this.objectLiteral(i),n.push(i),this.push(this.source.functionCall("container.invokePartial","",n))},assignToHash:function(e){var t=this.popStack(),r=void 0,n=void 0,i=void 0;this.trackIds&&(i=this.popStack()),this.stringParams&&(n=this.popStack(),r=this.popStack());var o=this.hash;r&&(o.contexts[e]=r),n&&(o.types[e]=n),i&&(o.ids[e]=i),o.values[e]=t},pushId:function(e,t,r){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(r?" + "+JSON.stringify("."+r):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:c,compileChildren:function(e,t){for(var r=e.children,n=void 0,i=void 0,o=0,s=r.length;o<s;o++){n=r[o],i=new this.compiler;var a=this.matchExistingProgram(n);if(null==a){this.context.programs.push("");var l=this.context.programs.length;n.index=l,n.name="program"+l,this.context.programs[l]=i.compile(n,t,this.context,!this.precompile),this.context.decorators[l]=i.decorators,this.context.environments[l]=n,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams,n.useDepths=this.useDepths,n.useBlockParams=this.useBlockParams}else n.index=a.index,n.name="program"+a.index,this.useDepths=this.useDepths||a.useDepths,this.useBlockParams=this.useBlockParams||a.useBlockParams}},matchExistingProgram:function(e){for(var t=0,r=this.context.environments.length;t<r;t++){var n=this.context.environments[t];if(n&&n.equals(e))return n}},programExpression:function(e){var t=this.environment.children[e],r=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&r.push("blockParams"),this.useDepths&&r.push("depths"),"container.program("+r.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof u||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new u(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],r=void 0,n=void 0,i=void 0;if(!this.isInline())throw new s.default("replaceStack on non-inline");var o=this.popStack(!0);if(o instanceof u)t=["(",r=[o.value]],i=!0;else{n=!0;var a=this.incrStack();t=["((",this.push(a)," = ",o,")"],r=this.topStack()}var l=e.call(this,r);i||this.popStack(),n&&this.stackSlot--,this.push(t.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,r=e.length;t<r;t++){var n=e[t];if(n instanceof u)this.compileStack.push(n);else{var i=this.incrStack();this.pushSource([i," = ",n,";"]),this.compileStack.push(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),r=(t?this.inlineStack:this.compileStack).pop();if(!e&&r instanceof u)return r.value;if(!t){if(!this.stackSlot)throw new s.default("Invalid stack pop");this.stackSlot--}return r},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof u?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):((t=this.aliases[e]=this.source.wrap(e)).aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,r){var n=[];return{params:n,paramsInit:this.setupHelperArgs(t,e,n,r),name:this.nameLookup("helpers",t,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(n)}},setupParams:function(e,t,r){var n={},i=[],o=[],s=[],a=!r,l=void 0;a&&(r=[]),n.name=this.quotedString(e),n.hash=this.popStack(),this.trackIds&&(n.hashIds=this.popStack()),this.stringParams&&(n.hashTypes=this.popStack(),n.hashContexts=this.popStack());var u=this.popStack(),c=this.popStack();(c||u)&&(n.fn=c||"container.noop",n.inverse=u||"container.noop");for(var h=t;h--;)l=this.popStack(),r[h]=l,this.trackIds&&(s[h]=this.popStack()),this.stringParams&&(o[h]=this.popStack(),i[h]=this.popStack());return a&&(n.args=this.source.generateArray(r)),this.trackIds&&(n.ids=this.source.generateArray(s)),this.stringParams&&(n.types=this.source.generateArray(o),n.contexts=this.source.generateArray(i)),this.options.data&&(n.data="data"),this.useBlockParams&&(n.blockParams="blockParams"),n},setupHelperArgs:function(e,t,r,n){var i=this.setupParams(e,t,r);return i.loc=JSON.stringify(this.source.currentLocation),i=this.objectLiteral(i),n?(this.useRegister("options"),r.push("options"),["options=",i]):r?(r.push(i),""):i}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=c.RESERVED_WORDS={},r=0,n=e.length;r<n;r++)t[e[r]]=!0}(),c.isValidJavaScriptVariableName=function(e){return!c.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},t.default=c,e.exports=t.default},function(e,t,r){"use strict";var n=r(13).default;t.__esModule=!0;var i=r(5),o=void 0;function s(e,t,r){if(i.isArray(e)){for(var n=[],o=0,s=e.length;o<s;o++)n.push(t.wrap(e[o],r));return n}return"boolean"==typeof e||"number"==typeof e?e+"":e}function a(e){this.srcFile=e,this.source=[]}o||((o=function(e,t,r,n){this.src="",n&&this.add(n)}).prototype={add:function(e){i.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){i.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),a.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each((function(t){e.add(["  ",t,"\n"])})),e},each:function(e){for(var t=0,r=this.source.length;t<r;t++)e(this.source[t])},empty:function(){var e=this.currentLocation||{start:{}};return new o(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof o?e:(e=s(e,this,t),new o(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,r){return r=this.generateList(r),this.wrap([e,t?"."+t+"(":"(",r,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=this,r=[];n(e).forEach((function(n){var i=s(e[n],t);"undefined"!==i&&r.push([t.quotedString(n),":",i])}));var i=this.generateList(r);return i.prepend("{"),i.add("}"),i},generateList:function(e){for(var t=this.empty(),r=0,n=e.length;r<n;r++)r&&t.add(","),t.add(s(e[r],this));return t},generateArray:function(e){var t=this.generateList(e);return t.prepend("["),t.add("]"),t}},t.default=a,e.exports=t.default}])},e.exports=t()},450:(e,t,r)=>{var n,i,o;i=[r(9755)],void 0===(o="function"==typeof(n=function(e){var t,r,n=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],o=Array.prototype.slice;if(e.event.fixHooks)for(var s=n.length;s;)e.event.fixHooks[n[--s]]=e.event.mouseHooks;var a=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=i.length;t;)this.addEventListener(i[--t],l,!1);else this.onmousewheel=l;e.data(this,"mousewheel-line-height",a.getLineHeight(this)),e.data(this,"mousewheel-page-height",a.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=i.length;t;)this.removeEventListener(i[--t],l,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var r=e(t),n=r["offsetParent"in e.fn?"offsetParent":"parent"]();return n.length||(n=e("body")),parseInt(n.css("fontSize"),10)||parseInt(r.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function l(n){var i=n||window.event,s=o.call(arguments,1),l=0,h=0,d=0,f=0,p=0,m=0;if((n=e.event.fix(i)).type="mousewheel","detail"in i&&(d=-1*i.detail),"wheelDelta"in i&&(d=i.wheelDelta),"wheelDeltaY"in i&&(d=i.wheelDeltaY),"wheelDeltaX"in i&&(h=-1*i.wheelDeltaX),"axis"in i&&i.axis===i.HORIZONTAL_AXIS&&(h=-1*d,d=0),l=0===d?h:d,"deltaY"in i&&(l=d=-1*i.deltaY),"deltaX"in i&&(h=i.deltaX,0===d&&(l=-1*h)),0!==d||0!==h){if(1===i.deltaMode){var g=e.data(this,"mousewheel-line-height");l*=g,d*=g,h*=g}else if(2===i.deltaMode){var v=e.data(this,"mousewheel-page-height");l*=v,d*=v,h*=v}if(f=Math.max(Math.abs(d),Math.abs(h)),(!r||f<r)&&(r=f,c(i,f)&&(r/=40)),c(i,f)&&(l/=40,h/=40,d/=40),l=Math[l>=1?"floor":"ceil"](l/r),h=Math[h>=1?"floor":"ceil"](h/r),d=Math[d>=1?"floor":"ceil"](d/r),a.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();p=n.clientX-y.left,m=n.clientY-y.top}return n.deltaX=h,n.deltaY=d,n.deltaFactor=r,n.offsetX=p,n.offsetY=m,n.deltaMode=0,s.unshift(n,l,h,d),t&&clearTimeout(t),t=setTimeout(u,200),(e.event.dispatch||e.event.handle).apply(this,s)}}function u(){r=null}function c(e,t){return a.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})})?n.apply(t,i):n)||(e.exports=o)},5476:(e,t,r)=>{var n,i,o;!function(s){"use strict";i=[r(9755)],n=function(e){e.ui=e.ui||{};e.ui.version="1.13.2";var t=0,r=Array.prototype.hasOwnProperty,n=Array.prototype.slice;e.cleanData=(i=e.cleanData,function(t){var r,n,o;for(o=0;null!=(n=t[o]);o++)(r=e._data(n,"events"))&&r.remove&&e(n).triggerHandler("remove");i(t)}),e.widget=function(t,r,n){var i,o,s,a={},l=t.split(".")[0],u=l+"-"+(t=t.split(".")[1]);return n||(n=r,r=e.Widget),Array.isArray(n)&&(n=e.extend.apply(null,[{}].concat(n))),e.expr.pseudos[u.toLowerCase()]=function(t){return!!e.data(t,u)},e[l]=e[l]||{},i=e[l][t],o=e[l][t]=function(e,t){if(!this||!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,i,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),(s=new r).options=e.widget.extend({},s.options),e.each(n,(function(e,t){a[e]="function"==typeof t?function(){function n(){return r.prototype[e].apply(this,arguments)}function i(t){return r.prototype[e].apply(this,t)}return function(){var e,r=this._super,o=this._superApply;return this._super=n,this._superApply=i,e=t.apply(this,arguments),this._super=r,this._superApply=o,e}}():t})),o.prototype=e.widget.extend(s,{widgetEventPrefix:i&&s.widgetEventPrefix||t},a,{constructor:o,namespace:l,widgetName:t,widgetFullName:u}),i?(e.each(i._childConstructors,(function(t,r){var n=r.prototype;e.widget(n.namespace+"."+n.widgetName,o,r._proto)})),delete i._childConstructors):r._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,o,s=n.call(arguments,1),a=0,l=s.length;a<l;a++)for(i in s[a])o=s[a][i],r.call(s[a],i)&&void 0!==o&&(e.isPlainObject(o)?t[i]=e.isPlainObject(t[i])?e.widget.extend({},t[i],o):e.widget.extend({},o):t[i]=o);return t},e.widget.bridge=function(t,r){var i=r.prototype.widgetFullName||t;e.fn[t]=function(o){var s="string"==typeof o,a=n.call(arguments,1),l=this;return s?this.length||"instance"!==o?this.each((function(){var r,n=e.data(this,i);return"instance"===o?(l=n,!1):n?"function"!=typeof n[o]||"_"===o.charAt(0)?e.error("no such method '"+o+"' for "+t+" widget instance"):(r=n[o].apply(n,a))!==n&&void 0!==r?(l=r&&r.jquery?l.pushStack(r.get()):r,!1):void 0:e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")})):l=void 0:(a.length&&(o=e.widget.extend.apply(null,[o].concat(a))),this.each((function(){var t=e.data(this,i);t?(t.option(o||{}),t._init&&t._init()):e.data(this,i,new r(o,this))}))),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(r,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),r),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,(function(e,r){t._removeClass(r,e)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,r){var n,i,o,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},n=t.split("."),t=n.shift(),n.length){for(i=s[t]=e.widget.extend({},this.options[t]),o=0;o<n.length-1;o++)i[n[o]]=i[n[o]]||{},i=i[n[o]];if(t=n.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=r}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=r}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var r,n,i;for(r in t)i=this.classesElementLookup[r],t[r]!==this.options.classes[r]&&i&&i.length&&(n=e(i.get()),this._removeClass(i,r),n.addClass(this._classes({element:n,keys:r,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){var r=[],n=this;function i(){var r=[];t.element.each((function(t,i){e.map(n.classesElementLookup,(function(e){return e})).some((function(e){return e.is(i)}))||r.push(i)})),n._on(e(r),{remove:"_untrackClassesElement"})}function o(o,s){var a,l;for(l=0;l<o.length;l++)a=n.classesElementLookup[o[l]]||e(),t.add?(i(),a=e(e.uniqueSort(a.get().concat(t.element.get())))):a=e(a.not(t.element).get()),n.classesElementLookup[o[l]]=a,r.push(o[l]),s&&t.classes[o[l]]&&r.push(t.classes[o[l]])}return(t=e.extend({element:this.element,classes:this.options.classes||{}},t)).keys&&o(t.keys.match(/\S+/g)||[],!0),t.extra&&o(t.extra.match(/\S+/g)||[]),r.join(" ")},_untrackClassesElement:function(t){var r=this;e.each(r.classesElementLookup,(function(n,i){-1!==e.inArray(t.target,i)&&(r.classesElementLookup[n]=e(i.not(t.target).get()))})),this._off(e(t.target))},_removeClass:function(e,t,r){return this._toggleClass(e,t,r,!1)},_addClass:function(e,t,r){return this._toggleClass(e,t,r,!0)},_toggleClass:function(e,t,r,n){n="boolean"==typeof n?n:r;var i="string"==typeof e||null===e,o={extra:i?t:r,keys:i?e:t,element:i?this.element:e,add:n};return o.element.toggleClass(this._classes(o),n),this},_on:function(t,r,n){var i,o=this;"boolean"!=typeof t&&(n=r,r=t,t=!1),n?(r=i=e(r),this.bindings=this.bindings.add(r)):(n=r,r=this.element,i=this.widget()),e.each(n,(function(n,s){function a(){if(t||!0!==o.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof s?o[s]:s).apply(o,arguments)}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+o.eventNamespace,c=l[2];c?i.on(u,c,a):r.on(u,a)}))},_off:function(t,r){r=(r||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(r),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function r(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(r,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,r,n){var i,o,s=this.options[t];if(n=n||{},(r=e.Event(r)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),r.target=this.element[0],o=r.originalEvent)for(i in o)i in r||(r[i]=o[i]);return this.element.trigger(r,n),!("function"==typeof s&&!1===s.apply(this.element[0],[r].concat(n))||r.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,r){e.Widget.prototype["_"+t]=function(n,i,o){var s;"string"==typeof i&&(i={effect:i});var a=i?!0===i||"number"==typeof i?r:i.effect||r:t;"number"==typeof(i=i||{})?i={duration:i}:!0===i&&(i={}),s=!e.isEmptyObject(i),i.complete=o,i.delay&&n.delay(i.delay),s&&e.effects&&e.effects.effect[a]?n[t](i):a!==t&&n[a]?n[a](i.duration,i.easing,o):n.queue((function(r){e(this)[t](),o&&o.call(n[0]),r()}))}}));var i;e.widget;!function(){var t,r=Math.max,n=Math.abs,i=/left|center|right/,o=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,l=/%$/,u=e.fn.position;function c(e,t,r){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?r/100:1)]}function h(t,r){return parseInt(e.css(t,r),10)||0}function d(e){return null!=e&&e===e.window}function f(e){var t=e[0];return 9===t.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:d(t)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:t.preventDefault?{width:0,height:0,offset:{top:t.pageY,left:t.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}e.position={scrollbarWidth:function(){if(void 0!==t)return t;var r,n,i=e("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>"),o=i.children()[0];return e("body").append(i),r=o.offsetWidth,i.css("overflow","scroll"),r===(n=o.offsetWidth)&&(n=i[0].clientWidth),i.remove(),t=r-n},getScrollInfo:function(t){var r=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),i="scroll"===r||"auto"===r&&t.width<t.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:i?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var r=e(t||window),n=d(r[0]),i=!!r[0]&&9===r[0].nodeType;return{element:r,isWindow:n,isDocument:i,offset:!n&&!i?e(t).offset():{left:0,top:0},scrollLeft:r.scrollLeft(),scrollTop:r.scrollTop(),width:r.outerWidth(),height:r.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return u.apply(this,arguments);var l,d,p,m,g,v,y="string"==typeof(t=e.extend({},t)).of?e(document).find(t.of):e(t.of),b=e.position.getWithinInfo(t.within),w=e.position.getScrollInfo(b),C=(t.collision||"flip").split(" "),_={};return v=f(y),y[0].preventDefault&&(t.at="left top"),d=v.width,p=v.height,m=v.offset,g=e.extend({},m),e.each(["my","at"],(function(){var e,r,n=(t[this]||"").split(" ");1===n.length&&(n=i.test(n[0])?n.concat(["center"]):o.test(n[0])?["center"].concat(n):["center","center"]),n[0]=i.test(n[0])?n[0]:"center",n[1]=o.test(n[1])?n[1]:"center",e=s.exec(n[0]),r=s.exec(n[1]),_[this]=[e?e[0]:0,r?r[0]:0],t[this]=[a.exec(n[0])[0],a.exec(n[1])[0]]})),1===C.length&&(C[1]=C[0]),"right"===t.at[0]?g.left+=d:"center"===t.at[0]&&(g.left+=d/2),"bottom"===t.at[1]?g.top+=p:"center"===t.at[1]&&(g.top+=p/2),l=c(_.at,d,p),g.left+=l[0],g.top+=l[1],this.each((function(){var i,o,s=e(this),a=s.outerWidth(),u=s.outerHeight(),f=h(this,"marginLeft"),v=h(this,"marginTop"),S=a+f+h(this,"marginRight")+w.width,x=u+v+h(this,"marginBottom")+w.height,k=e.extend({},g),T=c(_.my,s.outerWidth(),s.outerHeight());"right"===t.my[0]?k.left-=a:"center"===t.my[0]&&(k.left-=a/2),"bottom"===t.my[1]?k.top-=u:"center"===t.my[1]&&(k.top-=u/2),k.left+=T[0],k.top+=T[1],i={marginLeft:f,marginTop:v},e.each(["left","top"],(function(r,n){e.ui.position[C[r]]&&e.ui.position[C[r]][n](k,{targetWidth:d,targetHeight:p,elemWidth:a,elemHeight:u,collisionPosition:i,collisionWidth:S,collisionHeight:x,offset:[l[0]+T[0],l[1]+T[1]],my:t.my,at:t.at,within:b,elem:s})})),t.using&&(o=function(e){var i=m.left-k.left,o=i+d-a,l=m.top-k.top,c=l+p-u,h={target:{element:y,left:m.left,top:m.top,width:d,height:p},element:{element:s,left:k.left,top:k.top,width:a,height:u},horizontal:o<0?"left":i>0?"right":"center",vertical:c<0?"top":l>0?"bottom":"middle"};d<a&&n(i+o)<d&&(h.horizontal="center"),p<u&&n(l+c)<p&&(h.vertical="middle"),r(n(i),n(o))>r(n(l),n(c))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),s.offset(e.extend(k,{using:o}))}))},e.ui.position={fit:{left:function(e,t){var n,i=t.within,o=i.isWindow?i.scrollLeft:i.offset.left,s=i.width,a=e.left-t.collisionPosition.marginLeft,l=o-a,u=a+t.collisionWidth-s-o;t.collisionWidth>s?l>0&&u<=0?(n=e.left+l+t.collisionWidth-s-o,e.left+=l-n):e.left=u>0&&l<=0?o:l>u?o+s-t.collisionWidth:o:l>0?e.left+=l:u>0?e.left-=u:e.left=r(e.left-a,e.left)},top:function(e,t){var n,i=t.within,o=i.isWindow?i.scrollTop:i.offset.top,s=t.within.height,a=e.top-t.collisionPosition.marginTop,l=o-a,u=a+t.collisionHeight-s-o;t.collisionHeight>s?l>0&&u<=0?(n=e.top+l+t.collisionHeight-s-o,e.top+=l-n):e.top=u>0&&l<=0?o:l>u?o+s-t.collisionHeight:o:l>0?e.top+=l:u>0?e.top-=u:e.top=r(e.top-a,e.top)}},flip:{left:function(e,t){var r,i,o=t.within,s=o.offset.left+o.scrollLeft,a=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,u=e.left-t.collisionPosition.marginLeft,c=u-l,h=u+t.collisionWidth-a-l,d="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,f="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];c<0?((r=e.left+d+f+p+t.collisionWidth-a-s)<0||r<n(c))&&(e.left+=d+f+p):h>0&&((i=e.left-t.collisionPosition.marginLeft+d+f+p-l)>0||n(i)<h)&&(e.left+=d+f+p)},top:function(e,t){var r,i,o=t.within,s=o.offset.top+o.scrollTop,a=o.height,l=o.isWindow?o.scrollTop:o.offset.top,u=e.top-t.collisionPosition.marginTop,c=u-l,h=u+t.collisionHeight-a-l,d="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,p=-2*t.offset[1];c<0?((i=e.top+d+f+p+t.collisionHeight-a-s)<0||i<n(c))&&(e.top+=d+f+p):h>0&&((r=e.top-t.collisionPosition.marginTop+d+f+p-l)>0||n(r)<h)&&(e.top+=d+f+p)}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}();e.ui.position,e.extend(e.expr.pseudos,{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(r){return!!e.data(r,t)}})):function(t,r,n){return!!e.data(t,n[3])}}),e.fn.extend({disableSelection:(y="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(y+".ui-disableSelection",(function(e){e.preventDefault()}))}),enableSelection:function(){return this.off(".ui-disableSelection")}});var o,s=e,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",l={},u=l.toString,c=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),e[4]?(parseInt(e[4],16)/255).toFixed(2):1]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),e[4]?(parseInt(e[4]+e[4],16)/255).toFixed(2):1]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],d=s.Color=function(e,t,r,n){return new s.Color.fn.parse(e,t,r,n)},f={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},p={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},m=d.support={},g=s("<p>")[0],v=s.each;var y;function b(e){return null==e?e+"":"object"==typeof e?l[u.call(e)]||"object":typeof e}function w(e,t,r){var n=p[t.type]||{};return null==e?r||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:Math.min(n.max,Math.max(0,e)))}function C(e){var t=d(),r=t._rgba=[];return e=e.toLowerCase(),v(h,(function(n,i){var o,s=i.re.exec(e),a=s&&i.parse(s),l=i.space||"rgba";if(a)return o=t[l](a),t[f[l].cache]=o[f[l].cache],r=t._rgba=o._rgba,!1})),r.length?("0,0,0,0"===r.join()&&s.extend(r,o.transparent),t):o[e]}function _(e,t,r){return 6*(r=(r+1)%1)<1?e+(t-e)*r*6:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}g.style.cssText="background-color:rgba(1,1,1,.5)",m.rgba=g.style.backgroundColor.indexOf("rgba")>-1,v(f,(function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}})),s.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){l["[object "+t+"]"]=t.toLowerCase()})),d.fn=s.extend(d.prototype,{parse:function(e,t,r,n){if(void 0===e)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=s(e).css(t),t=void 0);var i=this,a=b(e),l=this._rgba=[];return void 0!==t&&(e=[e,t,r,n],a="array"),"string"===a?this.parse(C(e)||o._default):"array"===a?(v(f.rgba.props,(function(t,r){l[r.idx]=w(e[r.idx],r)})),this):"object"===a?(v(f,e instanceof d?function(t,r){e[r.cache]&&(i[r.cache]=e[r.cache].slice())}:function(t,r){var n=r.cache;v(r.props,(function(t,o){if(!i[n]&&r.to){if("alpha"===t||null==e[t])return;i[n]=r.to(i._rgba)}i[n][o.idx]=w(e[t],o,!0)})),i[n]&&s.inArray(null,i[n].slice(0,3))<0&&(null==i[n][3]&&(i[n][3]=1),r.from&&(i._rgba=r.from(i[n])))}),this):void 0},is:function(e){var t=d(e),r=!0,n=this;return v(f,(function(e,i){var o,s=t[i.cache];return s&&(o=n[i.cache]||i.to&&i.to(n._rgba)||[],v(i.props,(function(e,t){if(null!=s[t.idx])return r=s[t.idx]===o[t.idx]}))),r})),r},_space:function(){var e=[],t=this;return v(f,(function(r,n){t[n.cache]&&e.push(r)})),e.pop()},transition:function(e,t){var r=d(e),n=r._space(),i=f[n],o=0===this.alpha()?d("transparent"):this,s=o[i.cache]||i.to(o._rgba),a=s.slice();return r=r[i.cache],v(i.props,(function(e,n){var i=n.idx,o=s[i],l=r[i],u=p[n.type]||{};null!==l&&(null===o?a[i]=l:(u.mod&&(l-o>u.mod/2?o+=u.mod:o-l>u.mod/2&&(o-=u.mod)),a[i]=w((l-o)*t+o,n)))})),this[n](a)},blend:function(e){if(1===this._rgba[3])return this;var t=this._rgba.slice(),r=t.pop(),n=d(e)._rgba;return d(s.map(t,(function(e,t){return(1-r)*n[t]+r*e})))},toRgbaString:function(){var e="rgba(",t=s.map(this._rgba,(function(e,t){return null!=e?e:t>2?1:0}));return 1===t[3]&&(t.pop(),e="rgb("),e+t.join()+")"},toHslaString:function(){var e="hsla(",t=s.map(this.hsla(),(function(e,t){return null==e&&(e=t>2?1:0),t&&t<3&&(e=Math.round(100*e)+"%"),e}));return 1===t[3]&&(t.pop(),e="hsl("),e+t.join()+")"},toHexString:function(e){var t=this._rgba.slice(),r=t.pop();return e&&t.push(~~(255*r)),"#"+s.map(t,(function(e){return 1===(e=(e||0).toString(16)).length?"0"+e:e})).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),d.fn.parse.prototype=d.fn,f.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,r,n=e[0]/255,i=e[1]/255,o=e[2]/255,s=e[3],a=Math.max(n,i,o),l=Math.min(n,i,o),u=a-l,c=a+l,h=.5*c;return t=l===a?0:n===a?60*(i-o)/u+360:i===a?60*(o-n)/u+120:60*(n-i)/u+240,r=0===u?0:h<=.5?u/c:u/(2-c),[Math.round(t)%360,r,h,null==s?1:s]},f.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,r=e[1],n=e[2],i=e[3],o=n<=.5?n*(1+r):n+r-n*r,s=2*n-o;return[Math.round(255*_(s,o,t+1/3)),Math.round(255*_(s,o,t)),Math.round(255*_(s,o,t-1/3)),i]},v(f,(function(e,t){var r=t.props,n=t.cache,i=t.to,o=t.from;d.fn[e]=function(e){if(i&&!this[n]&&(this[n]=i(this._rgba)),void 0===e)return this[n].slice();var t,s=b(e),a="array"===s||"object"===s?e:arguments,l=this[n].slice();return v(r,(function(e,t){var r=a["object"===s?e:t.idx];null==r&&(r=l[t.idx]),l[t.idx]=w(r,t)})),o?((t=d(o(l)))[n]=l,t):d(l)},v(r,(function(t,r){d.fn[t]||(d.fn[t]=function(n){var i,o,s,a,l=b(n);return o=(i=this[a="alpha"===t?this._hsla?"hsla":"rgba":e]())[r.idx],"undefined"===l?o:("function"===l&&(l=b(n=n.call(this,o))),null==n&&r.empty?this:("string"===l&&(s=c.exec(n))&&(n=o+parseFloat(s[2])*("+"===s[1]?1:-1)),i[r.idx]=n,this[a](i)))})}))})),d.hook=function(e){var t=e.split(" ");v(t,(function(e,t){s.cssHooks[t]={set:function(e,r){var n,i,o="";if("transparent"!==r&&("string"!==b(r)||(n=C(r)))){if(r=d(n||r),!m.rgba&&1!==r._rgba[3]){for(i="backgroundColor"===t?e.parentNode:e;(""===o||"transparent"===o)&&i&&i.style;)try{o=s.css(i,"backgroundColor"),i=i.parentNode}catch(e){}r=r.blend(o&&"transparent"!==o?o:"_default")}r=r.toRgbaString()}try{e.style[t]=r}catch(e){}}},s.fx.step[t]=function(e){e.colorInit||(e.start=d(e.elem,t),e.end=d(e.end),e.colorInit=!0),s.cssHooks[t].set(e.elem,e.start.transition(e.end,e.pos))}}))},d.hook(a),s.cssHooks.borderColor={expand:function(e){var t={};return v(["Top","Right","Bottom","Left"],(function(r,n){t["border"+n+"Color"]=e})),t}},o=s.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"};var S="ui-effects-",x="ui-effects-style",k="ui-effects-animated";e.effects={effect:{}},function(){var t=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function n(e){return e.replace(/-([\da-z])/gi,(function(e,t){return t.toUpperCase()}))}function i(e){var t,r,i=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,o={};if(i&&i.length&&i[0]&&i[i[0]])for(r=i.length;r--;)"string"==typeof i[t=i[r]]&&(o[n(t)]=i[t]);else for(t in i)"string"==typeof i[t]&&(o[t]=i[t]);return o}function o(t,n){var i,o,s={};for(i in n)o=n[i],t[i]!==o&&(r[i]||!e.fx.step[i]&&isNaN(parseFloat(o))||(s[i]=o));return s}e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],(function(t,r){e.fx.step[r]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(s.style(e.elem,r,e.end),e.setAttr=!0)}})),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(r,n,s,a){var l=e.speed(n,s,a);return this.queue((function(){var n,s=e(this),a=s.attr("class")||"",u=l.children?s.find("*").addBack():s;u=u.map((function(){return{el:e(this),start:i(this)}})),(n=function(){e.each(t,(function(e,t){r[t]&&s[t+"Class"](r[t])}))})(),u=u.map((function(){return this.end=i(this.el[0]),this.diff=o(this.start,this.end),this})),s.attr("class",a),u=u.map((function(){var t=this,r=e.Deferred(),n=e.extend({},l,{queue:!1,complete:function(){r.resolve(t)}});return this.el.animate(this.diff,n),r.promise()})),e.when.apply(e,u.get()).done((function(){n(),e.each(arguments,(function(){var t=this.el;e.each(this.diff,(function(e){t.css(e,"")}))})),l.complete.call(s[0])}))}))},e.fn.extend({addClass:function(t){return function(r,n,i,o){return n?e.effects.animateClass.call(this,{add:r},n,i,o):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(r,n,i,o){return arguments.length>1?e.effects.animateClass.call(this,{remove:r},n,i,o):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(r,n,i,o,s){return"boolean"==typeof n||void 0===n?i?e.effects.animateClass.call(this,n?{add:r}:{remove:r},i,o,s):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:r},n,i,o)}}(e.fn.toggleClass),switchClass:function(t,r,n,i,o){return e.effects.animateClass.call(this,{add:r,remove:t},n,i,o)}})}(),function(){function t(t,r,n,i){return e.isPlainObject(t)&&(r=t,t=t.effect),t={effect:t},null==r&&(r={}),"function"==typeof r&&(i=r,n=null,r={}),("number"==typeof r||e.fx.speeds[r])&&(i=n,n=r,r={}),"function"==typeof n&&(i=n,n=null),r&&e.extend(t,r),n=n||r.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=i||r.complete,t}function r(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||("string"==typeof t&&!e.effects.effect[t]||("function"==typeof t||"object"==typeof t&&!t.effect))}function n(e,t){var r=t.outerWidth(),n=t.outerHeight(),i=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(e)||["",0,r,n,0];return{top:parseFloat(i[1])||0,right:"auto"===i[2]?r:parseFloat(i[2]),bottom:"auto"===i[3]?n:parseFloat(i[3]),left:parseFloat(i[4])||0}}e.expr&&e.expr.pseudos&&e.expr.pseudos.animated&&(e.expr.pseudos.animated=function(t){return function(r){return!!e(r).data(k)||t(r)}}(e.expr.pseudos.animated)),!1!==e.uiBackCompat&&e.extend(e.effects,{save:function(e,t){for(var r=0,n=t.length;r<n;r++)null!==t[r]&&e.data(S+t[r],e[0].style[t[r]])},restore:function(e,t){for(var r,n=0,i=t.length;n<i;n++)null!==t[n]&&(r=e.data(S+t[n]),e.css(t[n],r))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var r={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},o=document.activeElement;try{o.id}catch(e){o=document.body}return t.wrap(n),(t[0]===o||e.contains(t[0],o))&&e(o).trigger("focus"),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(r,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],(function(e,n){r[n]=t.css(n),isNaN(parseInt(r[n],10))&&(r[n]="auto")})),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),n.css(r).show()},removeWrapper:function(t){var r=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===r||e.contains(t[0],r))&&e(r).trigger("focus")),t}}),e.extend(e.effects,{version:"1.13.2",define:function(t,r,n){return n||(n=r,r="effect"),e.effects.effect[t]=n,e.effects.effect[t].mode=r,n},scaledDimensions:function(e,t,r){if(0===t)return{height:0,width:0,outerHeight:0,outerWidth:0};var n="horizontal"!==r?(t||100)/100:1,i="vertical"!==r?(t||100)/100:1;return{height:e.height()*i,width:e.width()*n,outerHeight:e.outerHeight()*i,outerWidth:e.outerWidth()*n}},clipToBox:function(e){return{width:e.clip.right-e.clip.left,height:e.clip.bottom-e.clip.top,left:e.clip.left,top:e.clip.top}},unshift:function(e,t,r){var n=e.queue();t>1&&n.splice.apply(n,[1,0].concat(n.splice(t,r))),e.dequeue()},saveStyle:function(e){e.data(x,e[0].style.cssText)},restoreStyle:function(e){e[0].style.cssText=e.data(x)||"",e.removeData(x)},mode:function(e,t){var r=e.is(":hidden");return"toggle"===t&&(t=r?"show":"hide"),(r?"hide"===t:"show"===t)&&(t="none"),t},getBaseline:function(e,t){var r,n;switch(e[0]){case"top":r=0;break;case"middle":r=.5;break;case"bottom":r=1;break;default:r=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:r}},createPlaceholder:function(t){var r,n=t.css("position"),i=t.position();return t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()),/^(static|relative)/.test(n)&&(n="absolute",r=e("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),float:t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder"),t.data(S+"placeholder",r)),t.css({position:n,left:i.left,top:i.top}),r},removePlaceholder:function(e){var t=S+"placeholder",r=e.data(t);r&&(r.remove(),e.removeData(t))},cleanUp:function(t){e.effects.restoreStyle(t),e.effects.removePlaceholder(t)},setTransition:function(t,r,n,i){return i=i||{},e.each(r,(function(e,r){var o=t.cssUnit(r);o[0]>0&&(i[r]=o[0]*n+o[1])})),i}}),e.fn.extend({effect:function(){var r=t.apply(this,arguments),n=e.effects.effect[r.effect],i=n.mode,o=r.queue,s=o||"fx",a=r.complete,l=r.mode,u=[],c=function(t){var r=e(this),n=e.effects.mode(r,l)||i;r.data(k,!0),u.push(n),i&&("show"===n||n===i&&"hide"===n)&&r.show(),i&&"none"===n||e.effects.saveStyle(r),"function"==typeof t&&t()};if(e.fx.off||!n)return l?this[l](r.duration,a):this.each((function(){a&&a.call(this)}));function h(t){var o=e(this);function s(){o.removeData(k),e.effects.cleanUp(o),"hide"===r.mode&&o.hide(),c()}function c(){"function"==typeof a&&a.call(o[0]),"function"==typeof t&&t()}r.mode=u.shift(),!1===e.uiBackCompat||i?"none"===r.mode?(o[l](),c()):n.call(o[0],r,s):(o.is(":hidden")?"hide"===l:"show"===l)?(o[l](),c()):n.call(o[0],r,c)}return!1===o?this.each(c).each(h):this.queue(s,c).queue(s,h)},show:function(e){return function(n){if(r(n))return e.apply(this,arguments);var i=t.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(e.fn.show),hide:function(e){return function(n){if(r(n))return e.apply(this,arguments);var i=t.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(e.fn.hide),toggle:function(e){return function(n){if(r(n)||"boolean"==typeof n)return e.apply(this,arguments);var i=t.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(e.fn.toggle),cssUnit:function(t){var r=this.css(t),n=[];return e.each(["em","px","%","pt"],(function(e,t){r.indexOf(t)>0&&(n=[parseFloat(r),t])})),n},cssClip:function(e){return e?this.css("clip","rect("+e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px)"):n(this.css("clip"),this)},transfer:function(t,r){var n=e(this),i=e(t.to),o="fixed"===i.css("position"),s=e("body"),a=o?s.scrollTop():0,l=o?s.scrollLeft():0,u=i.offset(),c={top:u.top-a,left:u.left-l,height:i.innerHeight(),width:i.innerWidth()},h=n.offset(),d=e("<div class='ui-effects-transfer'></div>");d.appendTo("body").addClass(t.className).css({top:h.top-a,left:h.left-l,height:n.innerHeight(),width:n.innerWidth(),position:o?"fixed":"absolute"}).animate(c,t.duration,t.easing,(function(){d.remove(),"function"==typeof r&&r()}))}}),e.fx.step.clip=function(t){t.clipInit||(t.start=e(t.elem).cssClip(),"string"==typeof t.end&&(t.end=n(t.end,t.elem)),t.clipInit=!0),e(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})}}(),T={},e.each(["Quad","Cubic","Quart","Quint","Expo"],(function(e,t){T[t]=function(t){return Math.pow(t,e+2)}})),e.extend(T,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,r=4;e<((t=Math.pow(2,--r))-1)/11;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(T,(function(t,r){e.easing["easeIn"+t]=r,e.easing["easeOut"+t]=function(e){return 1-r(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?r(2*e)/2:1-r(-2*e+2)/2}}));var T;e.effects,e.effects.define("blind","hide",(function(t,r){var n={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},i=e(this),o=t.direction||"up",s=i.cssClip(),a={clip:e.extend({},s)},l=e.effects.createPlaceholder(i);a.clip[n[o][0]]=a.clip[n[o][1]],"show"===t.mode&&(i.cssClip(a.clip),l&&l.css(e.effects.clipToBox(a)),a.clip=s),l&&l.animate(e.effects.clipToBox(a),t.duration,t.easing),i.animate(a,{queue:!1,duration:t.duration,easing:t.easing,complete:r})})),e.effects.define("bounce",(function(t,r){var n,i,o,s=e(this),a=t.mode,l="hide"===a,u="show"===a,c=t.direction||"up",h=t.distance,d=t.times||5,f=2*d+(u||l?1:0),p=t.duration/f,m=t.easing,g="up"===c||"down"===c?"top":"left",v="up"===c||"left"===c,y=0,b=s.queue().length;for(e.effects.createPlaceholder(s),o=s.css(g),h||(h=s["top"===g?"outerHeight":"outerWidth"]()/3),u&&((i={opacity:1})[g]=o,s.css("opacity",0).css(g,v?2*-h:2*h).animate(i,p,m)),l&&(h/=Math.pow(2,d-1)),(i={})[g]=o;y<d;y++)(n={})[g]=(v?"-=":"+=")+h,s.animate(n,p,m).animate(i,p,m),h=l?2*h:h/2;l&&((n={opacity:0})[g]=(v?"-=":"+=")+h,s.animate(n,p,m)),s.queue(r),e.effects.unshift(s,b,f+1)})),e.effects.define("clip","hide",(function(t,r){var n,i={},o=e(this),s=t.direction||"vertical",a="both"===s,l=a||"horizontal"===s,u=a||"vertical"===s;n=o.cssClip(),i.clip={top:u?(n.bottom-n.top)/2:n.top,right:l?(n.right-n.left)/2:n.right,bottom:u?(n.bottom-n.top)/2:n.bottom,left:l?(n.right-n.left)/2:n.left},e.effects.createPlaceholder(o),"show"===t.mode&&(o.cssClip(i.clip),i.clip=n),o.animate(i,{queue:!1,duration:t.duration,easing:t.easing,complete:r})})),e.effects.define("drop","hide",(function(t,r){var n,i=e(this),o="show"===t.mode,s=t.direction||"left",a="up"===s||"down"===s?"top":"left",l="up"===s||"left"===s?"-=":"+=",u="+="===l?"-=":"+=",c={opacity:0};e.effects.createPlaceholder(i),n=t.distance||i["top"===a?"outerHeight":"outerWidth"](!0)/2,c[a]=l+n,o&&(i.css(c),c[a]=u+n,c.opacity=1),i.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:r})})),e.effects.define("explode","hide",(function(t,r){var n,i,o,s,a,l,u=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=u,h=e(this),d="show"===t.mode,f=h.show().css("visibility","hidden").offset(),p=Math.ceil(h.outerWidth()/c),m=Math.ceil(h.outerHeight()/u),g=[];function v(){g.push(this),g.length===u*c&&y()}for(n=0;n<u;n++)for(s=f.top+n*m,l=n-(u-1)/2,i=0;i<c;i++)o=f.left+i*p,a=i-(c-1)/2,h.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-i*p,top:-n*m}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:p,height:m,left:o+(d?a*p:0),top:s+(d?l*m:0),opacity:d?0:1}).animate({left:o+(d?0:a*p),top:s+(d?0:l*m),opacity:d?1:0},t.duration||500,t.easing,v);function y(){h.css({visibility:"visible"}),e(g).remove(),r()}})),e.effects.define("fade","toggle",(function(t,r){var n="show"===t.mode;e(this).css("opacity",n?0:1).animate({opacity:n?1:0},{queue:!1,duration:t.duration,easing:t.easing,complete:r})})),e.effects.define("fold","hide",(function(t,r){var n=e(this),i=t.mode,o="show"===i,s="hide"===i,a=t.size||15,l=/([0-9]+)%/.exec(a),u=!!t.horizFirst?["right","bottom"]:["bottom","right"],c=t.duration/2,h=e.effects.createPlaceholder(n),d=n.cssClip(),f={clip:e.extend({},d)},p={clip:e.extend({},d)},m=[d[u[0]],d[u[1]]],g=n.queue().length;l&&(a=parseInt(l[1],10)/100*m[s?0:1]),f.clip[u[0]]=a,p.clip[u[0]]=a,p.clip[u[1]]=0,o&&(n.cssClip(p.clip),h&&h.css(e.effects.clipToBox(p)),p.clip=d),n.queue((function(r){h&&h.animate(e.effects.clipToBox(f),c,t.easing).animate(e.effects.clipToBox(p),c,t.easing),r()})).animate(f,c,t.easing).animate(p,c,t.easing).queue(r),e.effects.unshift(n,g,4)})),e.effects.define("highlight","show",(function(t,r){var n=e(this),i={backgroundColor:n.css("backgroundColor")};"hide"===t.mode&&(i.opacity=0),e.effects.saveStyle(n),n.css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(i,{queue:!1,duration:t.duration,easing:t.easing,complete:r})})),e.effects.define("size",(function(t,r){var n,i,o,s=e(this),a=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],u=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],c=t.mode,h="effect"!==c,d=t.scale||"both",f=t.origin||["middle","center"],p=s.css("position"),m=s.position(),g=e.effects.scaledDimensions(s),v=t.from||g,y=t.to||e.effects.scaledDimensions(s,0);e.effects.createPlaceholder(s),"show"===c&&(o=v,v=y,y=o),i={from:{y:v.height/g.height,x:v.width/g.width},to:{y:y.height/g.height,x:y.width/g.width}},"box"!==d&&"both"!==d||(i.from.y!==i.to.y&&(v=e.effects.setTransition(s,l,i.from.y,v),y=e.effects.setTransition(s,l,i.to.y,y)),i.from.x!==i.to.x&&(v=e.effects.setTransition(s,u,i.from.x,v),y=e.effects.setTransition(s,u,i.to.x,y))),"content"!==d&&"both"!==d||i.from.y!==i.to.y&&(v=e.effects.setTransition(s,a,i.from.y,v),y=e.effects.setTransition(s,a,i.to.y,y)),f&&(n=e.effects.getBaseline(f,g),v.top=(g.outerHeight-v.outerHeight)*n.y+m.top,v.left=(g.outerWidth-v.outerWidth)*n.x+m.left,y.top=(g.outerHeight-y.outerHeight)*n.y+m.top,y.left=(g.outerWidth-y.outerWidth)*n.x+m.left),delete v.outerHeight,delete v.outerWidth,s.css(v),"content"!==d&&"both"!==d||(l=l.concat(["marginTop","marginBottom"]).concat(a),u=u.concat(["marginLeft","marginRight"]),s.find("*[width]").each((function(){var r=e(this),n=e.effects.scaledDimensions(r),o={height:n.height*i.from.y,width:n.width*i.from.x,outerHeight:n.outerHeight*i.from.y,outerWidth:n.outerWidth*i.from.x},s={height:n.height*i.to.y,width:n.width*i.to.x,outerHeight:n.height*i.to.y,outerWidth:n.width*i.to.x};i.from.y!==i.to.y&&(o=e.effects.setTransition(r,l,i.from.y,o),s=e.effects.setTransition(r,l,i.to.y,s)),i.from.x!==i.to.x&&(o=e.effects.setTransition(r,u,i.from.x,o),s=e.effects.setTransition(r,u,i.to.x,s)),h&&e.effects.saveStyle(r),r.css(o),r.animate(s,t.duration,t.easing,(function(){h&&e.effects.restoreStyle(r)}))}))),s.animate(y,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){var t=s.offset();0===y.opacity&&s.css("opacity",v.opacity),h||(s.css("position","static"===p?"relative":p).offset(t),e.effects.saveStyle(s)),r()}})})),e.effects.define("scale",(function(t,r){var n=e(this),i=t.mode,o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)||"effect"!==i?0:100),s=e.extend(!0,{from:e.effects.scaledDimensions(n),to:e.effects.scaledDimensions(n,o,t.direction||"both"),origin:t.origin||["middle","center"]},t);t.fade&&(s.from.opacity=1,s.to.opacity=0),e.effects.effect.size.call(this,s,r)})),e.effects.define("puff","hide",(function(t,r){var n=e.extend(!0,{},t,{fade:!0,percent:parseInt(t.percent,10)||150});e.effects.effect.scale.call(this,n,r)})),e.effects.define("pulsate","show",(function(t,r){var n=e(this),i=t.mode,o="show"===i,s=o||"hide"===i,a=2*(t.times||5)+(s?1:0),l=t.duration/a,u=0,c=1,h=n.queue().length;for(!o&&n.is(":visible")||(n.css("opacity",0).show(),u=1);c<a;c++)n.animate({opacity:u},l,t.easing),u=1-u;n.animate({opacity:u},l,t.easing),n.queue(r),e.effects.unshift(n,h,a+1)})),e.effects.define("shake",(function(t,r){var n=1,i=e(this),o=t.direction||"left",s=t.distance||20,a=t.times||3,l=2*a+1,u=Math.round(t.duration/l),c="up"===o||"down"===o?"top":"left",h="up"===o||"left"===o,d={},f={},p={},m=i.queue().length;for(e.effects.createPlaceholder(i),d[c]=(h?"-=":"+=")+s,f[c]=(h?"+=":"-=")+2*s,p[c]=(h?"-=":"+=")+2*s,i.animate(d,u,t.easing);n<a;n++)i.animate(f,u,t.easing).animate(p,u,t.easing);i.animate(f,u,t.easing).animate(d,u/2,t.easing).queue(r),e.effects.unshift(i,m,l+1)})),e.effects.define("slide","show",(function(t,r){var n,i,o=e(this),s={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},a=t.mode,l=t.direction||"left",u="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l,h=t.distance||o["top"===u?"outerHeight":"outerWidth"](!0),d={};e.effects.createPlaceholder(o),n=o.cssClip(),i=o.position()[u],d[u]=(c?-1:1)*h+i,d.clip=o.cssClip(),d.clip[s[l][1]]=d.clip[s[l][0]],"show"===a&&(o.cssClip(d.clip),o.css(u,d[u]),d.clip=n,d[u]=i),o.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:r})}));!1!==e.uiBackCompat&&e.effects.define("transfer",(function(t,r){e(this).transfer(t,r)}));function R(e){for(var t=e.css("visibility");"inherit"===t;)t=(e=e.parent()).css("visibility");return"visible"===t}e.ui.focusable=function(t,r){var n,i,o,s,a,l=t.nodeName.toLowerCase();return"area"===l?(i=(n=t.parentNode).name,!(!t.href||!i||"map"!==n.nodeName.toLowerCase())&&((o=e("img[usemap='#"+i+"']")).length>0&&o.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(l)?(s=!t.disabled)&&(a=e(t).closest("fieldset")[0])&&(s=!a.disabled):s="a"===l&&t.href||r,s&&e(t).is(":visible")&&R(e(t)))},e.extend(e.expr.pseudos,{focusable:function(t){return e.ui.focusable(t,null!=e.attr(t,"tabindex"))}});e.ui.focusable,e.fn._form=function(){return"string"==typeof this[0].form?this.closest("form"):e(this[0].form)},e.ui.formResetMixin={_formResetHandler:function(){var t=e(this);setTimeout((function(){var r=t.data("ui-form-reset-instances");e.each(r,(function(){this.refresh()}))}))},_bindFormResetHandler:function(){if(this.form=this.element._form(),this.form.length){var e=this.form.data("ui-form-reset-instances")||[];e.length||this.form.on("reset.ui-form-reset",this._formResetHandler),e.push(this),this.form.data("ui-form-reset-instances",e)}},_unbindFormResetHandler:function(){if(this.form.length){var t=this.form.data("ui-form-reset-instances");t.splice(e.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}};e.expr.pseudos||(e.expr.pseudos=e.expr[":"]);e.uniqueSort||(e.uniqueSort=e.unique);if(!e.escapeSelector){var E=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,M=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e};e.escapeSelector=function(e){return(e+"").replace(E,M)}}e.fn.even&&e.fn.odd||e.fn.extend({even:function(){return this.filter((function(e){return e%2==0}))},odd:function(){return this.filter((function(e){return e%2==1}))}});e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},e.fn.labels=function(){var t,r,n,i,o;return this.length?this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(i=this.eq(0).parents("label"),(n=this.attr("id"))&&(o=(t=this.eq(0).parents().last()).add(t.length?t.siblings():this.siblings()),r="label[for='"+e.escapeSelector(n)+"']",i=i.add(o.find(r).addBack(r))),this.pushStack(i)):this.pushStack([])},e.fn.scrollParent=function(t){var r=this.css("position"),n="absolute"===r,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter((function(){var t=e(this);return(!n||"static"!==t.css("position"))&&i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))})).eq(0);return"fixed"!==r&&o.length?o:e(this[0].ownerDocument||document)},e.extend(e.expr.pseudos,{tabbable:function(t){var r=e.attr(t,"tabindex"),n=null!=r;return(!n||r>=0)&&e.ui.focusable(t,n)}}),e.fn.extend({uniqueId:(P=0,function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++P)}))}),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")}))}}),e.widget("ui.accordion",{version:"1.13.2",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:function(e){return e.find("> li > :first-child").add(e.find("> :not(li)").even())},heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),t.collapsible||!1!==t.active&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t,r,n=this.options.icons;n&&(t=e("<span>"),this._addClass(t,"ui-accordion-header-icon","ui-icon "+n.header),t.prependTo(this.headers),r=this.active.children(".ui-accordion-header-icon"),this._removeClass(r,n.header)._addClass(r,null,n.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){"active"!==e?("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||!1!==this.options.active||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons())):this._activate(t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",e),this._toggleClass(null,"ui-state-disabled",!!e),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!e)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var r=e.ui.keyCode,n=this.headers.length,i=this.headers.index(t.target),o=!1;switch(t.keyCode){case r.RIGHT:case r.DOWN:o=this.headers[(i+1)%n];break;case r.LEFT:case r.UP:o=this.headers[(i-1+n)%n];break;case r.SPACE:case r.ENTER:this._eventHandler(t);break;case r.HOME:o=this.headers[0];break;case r.END:o=this.headers[n-1]}o&&(e(t.target).attr("tabIndex",-1),e(o).attr("tabIndex",0),e(o).trigger("focus"),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().trigger("focus")},refresh:function(){var t=this.options;this._processPanels(),!1===t.active&&!0===t.collapsible||!this.headers.length?(t.active=!1,this.active=e()):!1===t.active?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;"function"==typeof this.options.header?this.headers=this.options.header(this.element):this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)))},_refresh:function(){var t,r=this.options,n=r.heightStyle,i=this.element.parent();this.active=this._findActive(r.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each((function(){var t=e(this),r=t.uniqueId().attr("id"),n=t.next(),i=n.uniqueId().attr("id");t.attr("aria-controls",i),n.attr("aria-labelledby",r)})).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(r.event),"fill"===n?(t=i.height(),this.element.siblings(":visible").each((function(){var r=e(this),n=r.css("position");"absolute"!==n&&"fixed"!==n&&(t-=r.outerHeight(!0))})),this.headers.each((function(){t-=e(this).outerHeight(!0)})),this.headers.next().each((function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))})).css("overflow","auto")):"auto"===n&&(t=0,this.headers.next().each((function(){var r=e(this).is(":visible");r||e(this).show(),t=Math.max(t,e(this).css("height","").height()),r||e(this).hide()})).height(t))},_activate:function(t){var r=this._findActive(t)[0];r!==this.active[0]&&(r=r||this.active[0],this._eventHandler({target:r,currentTarget:r,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var r={keydown:"_keydown"};t&&e.each(t.split(" "),(function(e,t){r[t]="_eventHandler"})),this._off(this.headers.add(this.headers.next())),this._on(this.headers,r),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var r,n,i=this.options,o=this.active,s=e(t.currentTarget),a=s[0]===o[0],l=a&&i.collapsible,u=l?e():s.next(),c=o.next(),h={oldHeader:o,oldPanel:c,newHeader:l?e():s,newPanel:u};t.preventDefault(),a&&!i.collapsible||!1===this._trigger("beforeActivate",t,h)||(i.active=!l&&this.headers.index(s),this.active=a?e():s,this._toggle(h),this._removeClass(o,"ui-accordion-header-active","ui-state-active"),i.icons&&(r=o.children(".ui-accordion-header-icon"),this._removeClass(r,null,i.icons.activeHeader)._addClass(r,null,i.icons.header)),a||(this._removeClass(s,"ui-accordion-header-collapsed")._addClass(s,"ui-accordion-header-active","ui-state-active"),i.icons&&(n=s.children(".ui-accordion-header-icon"),this._removeClass(n,null,i.icons.header)._addClass(n,null,i.icons.activeHeader)),this._addClass(s.next(),"ui-accordion-content-active")))},_toggle:function(t){var r=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=r,this.prevHide=n,this.options.animate?this._animate(r,n,t):(n.hide(),r.show(),this._toggleComplete(t)),n.attr({"aria-hidden":"true"}),n.prev().attr({"aria-selected":"false","aria-expanded":"false"}),r.length&&n.length?n.prev().attr({tabIndex:-1,"aria-expanded":"false"}):r.length&&this.headers.filter((function(){return 0===parseInt(e(this).attr("tabIndex"),10)})).attr("tabIndex",-1),r.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,t,r){var n,i,o,s=this,a=0,l=e.css("box-sizing"),u=e.length&&(!t.length||e.index()<t.index()),c=this.options.animate||{},h=u&&c.down||c,d=function(){s._toggleComplete(r)};return"number"==typeof h&&(o=h),"string"==typeof h&&(i=h),i=i||h.easing||c.easing,o=o||h.duration||c.duration,t.length?e.length?(n=e.show().outerHeight(),t.animate(this.hideProps,{duration:o,easing:i,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(this.showProps,{duration:o,easing:i,complete:d,step:function(e,r){r.now=Math.round(e),"height"!==r.prop?"content-box"===l&&(a+=r.now):"content"!==s.options.heightStyle&&(r.now=Math.round(n-t.outerHeight()-a),a=0)}})):t.animate(this.hideProps,o,i,d):e.animate(this.showProps,o,i,d)},_toggleComplete:function(e){var t=e.oldPanel,r=t.prev();this._removeClass(t,"ui-accordion-content-active"),this._removeClass(r,"ui-accordion-header-active")._addClass(r,"ui-accordion-header-collapsed"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(r){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t},e.widget("ui.menu",{version:"1.13.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.lastMousePosition={x:null,y:null},this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault(),this._activateItem(e)},"click .ui-menu-item":function(t){var r=e(t.target),n=e(e.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&r.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),r.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&n.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":"_activateItem","mousemove .ui-menu-item":"_activateItem",mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var r=this.active||this._menuItems().first();t||this.focus(e,r)},blur:function(t){this._delay((function(){!e.contains(this.element[0],e.ui.safeActiveElement(this.document[0]))&&this.collapseAll(t)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e,!0),this.mouseHandled=!1}})},_activateItem:function(t){if(!this.previousFilter&&(t.clientX!==this.lastMousePosition.x||t.clientY!==this.lastMousePosition.y)){this.lastMousePosition={x:t.clientX,y:t.clientY};var r=e(t.target).closest(".ui-menu-item"),n=e(t.currentTarget);r[0]===n[0]&&(n.is(".ui-state-active")||(this._removeClass(n.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,n)))}},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),t.children().each((function(){var t=e(this);t.data("ui-menu-submenu-caret")&&t.remove()}))},_keydown:function(t){var r,n,i,o,s=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:s=!1,n=this.previousFilter||"",o=!1,i=t.keyCode>=96&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),i===n?o=!0:i=n+i,r=this._filterMenuItems(i),(r=o&&-1!==r.index(this.active.next())?this.active.nextAll(".ui-menu-item"):r).length||(i=String.fromCharCode(t.keyCode),r=this._filterMenuItems(i)),r.length?(this.focus(t,r),this.previousFilter=i,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter}s&&t.preventDefault()},_activate:function(e){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,r,n,i,o=this,s=this.options.icons.submenu,a=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),r=a.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var t=e(this),r=t.prev(),n=e("<span>").data("ui-menu-submenu-caret",!0);o._addClass(n,"ui-menu-icon","ui-icon "+s),r.attr("aria-haspopup","true").prepend(n),t.attr("aria-labelledby",r.attr("id"))})),this._addClass(r,"ui-menu","ui-widget ui-widget-content ui-front"),(t=a.add(this.element).find(this.options.items)).not(".ui-menu-item").each((function(){var t=e(this);o._isDivider(t)&&o._addClass(t,"ui-menu-divider","ui-widget-content")})),i=(n=t.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(n,"ui-menu-item")._addClass(i,"ui-menu-item-wrapper"),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if("icons"===e){var r=this.element.find(".ui-menu-icon");this._removeClass(r,null,this.options.icons.submenu)._addClass(r,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",String(e)),this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var r,n,i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children(".ui-menu-item-wrapper"),this._addClass(n,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),i=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(r=t.children(".ui-menu")).length&&e&&/^mouse/.test(e.type)&&this._startOpening(r),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var r,n,i,o,s,a;this._hasScroll()&&(r=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-r-n,o=this.activeMenu.scrollTop(),s=this.activeMenu.height(),a=t.outerHeight(),i<0?this.activeMenu.scrollTop(o+i):i+a>s&&this.activeMenu.scrollTop(o+i-s+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",e,{item:this.active}),this.active=null)},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(e)}),this.delay))},_open:function(t){var r=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(r)},collapseAll:function(t,r){clearTimeout(this.timer),this.timer=this._delay((function(){var n=r?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this._removeClass(n.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=n}),r?0:this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this._menuItems(this.active.children(".ui-menu")).first();t&&t.length&&(this._open(t.parent()),this._delay((function(){this.focus(e,t)})))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_menuItems:function(e){return(e||this.element).find(this.options.items).filter(".ui-menu-item")},_move:function(e,t,r){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").last():this.active[e+"All"](".ui-menu-item").first()),n&&n.length&&this.active||(n=this._menuItems(this.activeMenu)[t]()),this.focus(r,n)},nextPage:function(t){var r,n,i;this.active?this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,i=this.element.innerHeight(),0===e.fn.jquery.indexOf("3.2.")&&(i+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.nextAll(".ui-menu-item").each((function(){return(r=e(this)).offset().top-n-i<0})),this.focus(t,r)):this.focus(t,this._menuItems(this.activeMenu)[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var r,n,i;this.active?this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,i=this.element.innerHeight(),0===e.fn.jquery.indexOf("3.2.")&&(i+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.prevAll(".ui-menu-item").each((function(){return(r=e(this)).offset().top-n+i>0})),this.focus(t,r)):this.focus(t,this._menuItems(this.activeMenu).first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var r={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,r)},_filterMenuItems:function(t){var r=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=new RegExp("^"+r,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter((function(){return n.test(String.prototype.trim.call(e(this).children(".ui-menu-item-wrapper").text()))}))}});var P;e.widget("ui.autocomplete",{version:"1.13.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,liveRegionTimer:null,_create:function(){var t,r,n,i=this.element[0].nodeName.toLowerCase(),o="textarea"===i,s="input"===i;this.isMultiLine=o||!s&&this._isContentEditable(this.element),this.valueMethod=this.element[o||s?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly"))return t=!0,n=!0,void(r=!0);t=!1,n=!1,r=!1;var o=e.ui.keyCode;switch(i.keyCode){case o.PAGE_UP:t=!0,this._move("previousPage",i);break;case o.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case o.UP:t=!0,this._keyEvent("previous",i);break;case o.DOWN:t=!0,this._keyEvent("next",i);break;case o.ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case o.TAB:this.menu.active&&this.menu.select(i);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(i),i.preventDefault());break;default:r=!0,this._searchTimeout(i)}},keypress:function(n){if(t)return t=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||n.preventDefault());if(!r){var i=e.ui.keyCode;switch(n.keyCode){case i.PAGE_UP:this._move("previousPage",n);break;case i.PAGE_DOWN:this._move("nextPage",n);break;case i.UP:this._keyEvent("previous",n);break;case i.DOWN:this._keyEvent("next",n)}}},input:function(e){if(n)return n=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().attr({unselectable:"on"}).menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault()},menufocus:function(t,r){var n,i;if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){e(t.target).trigger(t.originalEvent)}));i=r.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:i})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value),(n=r.item.attr("aria-label")||i.value)&&String.prototype.trim.call(n).length&&(clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay((function(){this.liveRegion.html(e("<div>").text(n))}),100))},menuselect:function(t,r){var n=r.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==e.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=i,this._delay((function(){this.previous=i,this.selectedItem=n}))),!1!==this._trigger("select",t,{item:n})&&this._value(n.value),this.term=this._value(),this.close(t),this.selectedItem=n}}),this.liveRegion=e("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var r=this.menu.element[0];return t.target===this.element[0]||t.target===r||e.contains(r,t.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,r,n=this;Array.isArray(this.options.source)?(t=this.options.source,this.source=function(r,n){n(e.ui.autocomplete.filter(t,r.term))}):"string"==typeof this.options.source?(r=this.options.source,this.source=function(t,i){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:r,data:t,dataType:"json",success:function(e){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay((function(){var t=this.term===this._value(),r=this.menu.element.is(":visible"),n=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;t&&(!t||r||n)||(this.selectedItem=null,this.search(null,e))}),this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=++this.requestIndex;return function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}.bind(this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,(function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})}))},_suggest:function(t){var r=this.menu.element.empty();this._renderMenu(r,t),this.isNewMenu=!0,this.menu.refresh(),r.show(),this._resizeMenu(),r.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,r){var n=this;e.each(r,(function(e,r){n._renderItemData(t,r)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,r){return e("<li>").append(e("<div>").text(r.label)).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())},_isContentEditable:function(e){if(!e.length)return!1;var t=e.prop("contentEditable");return"inherit"===t?this._isContentEditable(e.parent()):"true"===t}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,r){var n=new RegExp(e.ui.autocomplete.escapeRegex(r),"i");return e.grep(t,(function(e){return n.test(e.label||e.value||e)}))}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var r;this._superApply(arguments),this.options.disabled||this.cancelSearch||(r=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay((function(){this.liveRegion.html(e("<div>").text(r))}),100))}});e.ui.autocomplete;var O=/ui-corner-([a-z]){2,6}/g;e.widget("ui.controlgroup",{version:"1.13.2",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var t=this,r=[];e.each(this.options.items,(function(n,i){var o,s={};if(i)return"controlgroupLabel"===n?((o=t.element.find(i)).each((function(){var t=e(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")})),t._addClass(o,null,"ui-widget ui-widget-content ui-state-default"),void(r=r.concat(o.get()))):void(e.fn[n]&&(s=t["_"+n+"Options"]?t["_"+n+"Options"]("middle"):{classes:{}},t.element.find(i).each((function(){var i=e(this),o=i[n]("instance"),a=e.widget.extend({},s);if("button"!==n||!i.parent(".ui-spinner").length){o||(o=i[n]()[n]("instance")),o&&(a.classes=t._resolveClassesValues(a.classes,o)),i[n](a);var l=i[n]("widget");e.data(l[0],"ui-controlgroup-data",o||i[n]("instance")),r.push(l[0])}}))))})),this.childWidgets=e(e.uniqueSort(r)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each((function(){var r=e(this).data("ui-controlgroup-data");r&&r[t]&&r[t]()}))},_updateCornerClass:function(e,t){var r="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",n=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,r),this._addClass(e,null,n)},_buildSimpleOptions:function(e,t){var r="vertical"===this.options.direction,n={classes:{}};return n.classes[t]={middle:"",first:"ui-corner-"+(r?"top":"left"),last:"ui-corner-"+(r?"bottom":"right"),only:"ui-corner-all"}[e],n},_spinnerOptions:function(e){var t=this._buildSimpleOptions(e,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t="vertical"===this.options.direction;return{width:!!t&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(t,r){var n={};return e.each(t,(function(e){var i=r.options.classes[e]||"";i=String.prototype.trim.call(i.replace(O,"")),n[e]=(i+" "+t[e]).replace(/\s+/g," ")})),n},_setOption:function(e,t){"direction"===e&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(e,t),"disabled"!==e?this.refresh():this._callChildMethod(t?"disable":"enable")},refresh:function(){var t,r=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),t=this.childWidgets,this.options.onlyVisible&&(t=t.filter(":visible")),t.length&&(e.each(["first","last"],(function(e,n){var i=t[n]().data("ui-controlgroup-data");if(i&&r["_"+i.widgetName+"Options"]){var o=r["_"+i.widgetName+"Options"](1===t.length?"only":n);o.classes=r._resolveClassesValues(o.classes,i),i.element[i.widgetName](o)}else r._updateCornerClass(t[n](),n)})),this._callChildMethod("refresh"))}});e.widget("ui.checkboxradio",[e.ui.formResetMixin,{version:"1.13.2",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,r,n,i=this._super()||{};return this._readType(),r=this.element.labels(),this.label=e(r[r.length-1]),this.label.length||e.error("No label found for checkboxradio widget"),this.originalLabel="",(n=this.label.contents().not(this.element[0])).length&&(this.originalLabel+=n.clone().wrapAll("<div></div>").parent().html()),this.originalLabel&&(i.label=this.originalLabel),null!=(t=this.element[0].disabled)&&(i.disabled=t),i},_create:function(){var e=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),e&&this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===t&&/radio|checkbox/.test(this.type)||e.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t=this.element[0].name,r="input[name='"+e.escapeSelector(t)+"']";return t?(this.form.length?e(this.form[0].elements).filter(r):e(r).filter((function(){return 0===e(this)._form().length}))).not(this.element):e([])},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t),"radio"===this.type&&this._getRadioGroup().each((function(){var t=e(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")}))},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(e,t){if("label"!==e||t){if(this._super(e,t),"disabled"===e)return this._toggleClass(this.label,null,"ui-state-disabled",t),void(this.element[0].disabled=t);this.refresh()}},_updateIcon:function(t){var r="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=e("<span>"),this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(r+=t?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")):r+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",r),t||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var e=this.label.contents().not(this.element[0]);this.icon&&(e=e.not(this.icon[0])),this.iconSpace&&(e=e.not(this.iconSpace[0])),e.remove(),this.label.append(this.options.label)},refresh:function(){var e=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(e),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),null!==this.options.label&&this._updateLabel(),t!==this.options.disabled&&this._setOptions({disabled:t})}}]);e.ui.checkboxradio;e.widget("ui.button",{version:"1.13.2",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var e,t=this._super()||{};return this.isInput=this.element.is("input"),null!=(e=this.element[0].disabled)&&(t.disabled=e),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(t.label=this.originalLabel),t},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(t){t.keyCode===e.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,r){var n="iconPosition"!==t,i=n?this.options.iconPosition:r,o="top"===i||"bottom"===i;this.icon?n&&this._removeClass(this.icon,null,this.options.icon):(this.icon=e("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),n&&this._addClass(this.icon,null,r),this._attachIcon(i),o?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(i))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function(e){var t=void 0===e.showLabel?this.options.showLabel:e.showLabel,r=void 0===e.icon?this.options.icon:e.icon;t||r||(e.showLabel=!0),this._super(e)},_setOption:function(e,t){"icon"===e&&(t?this._updateIcon(e,t):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===e&&this._updateIcon(e,t),"showLabel"===e&&(this._toggleClass("ui-button-icon-only",null,!t),this._updateTooltip()),"label"===e&&(this.isInput?this.element.val(t):(this.element.html(t),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(e,t),"disabled"===e&&(this._toggleClass(null,"ui-state-disabled",t),this.element[0].disabled=t,t&&this.element.trigger("blur"))},refresh:function(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOptions({disabled:e}),this._updateTooltip()}}),!1!==e.uiBackCompat&&(e.widget("ui.button",e.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(e,t){"text"!==e?("showLabel"===e&&(this.options.text=t),"icon"===e&&(this.options.icons.primary=t),"icons"===e&&(t.primary?(this._super("icon",t.primary),this._super("iconPosition","beginning")):t.secondary&&(this._super("icon",t.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",t)}}),e.fn.button=function(t){return function(r){var n="string"==typeof r,i=Array.prototype.slice.call(arguments,1),o=this;return n?this.length||"instance"!==r?this.each((function(){var t,n=e(this).attr("type"),s="checkbox"!==n&&"radio"!==n?"button":"checkboxradio",a=e.data(this,"ui-"+s);return"instance"===r?(o=a,!1):a?"function"!=typeof a[r]||"_"===r.charAt(0)?e.error("no such method '"+r+"' for button widget instance"):(t=a[r].apply(a,i))!==a&&void 0!==t?(o=t&&t.jquery?o.pushStack(t.get()):t,!1):void 0:e.error("cannot call methods on button prior to initialization; attempted to call method '"+r+"'")})):o=void 0:(i.length&&(r=e.widget.extend.apply(null,[r].concat(i))),this.each((function(){var n=e(this).attr("type"),i="checkbox"!==n&&"radio"!==n?"button":"checkboxradio",o=e.data(this,"ui-"+i);if(o)o.option(r||{}),o._init&&o._init();else{if("button"===i)return void t.call(e(this),r);e(this).checkboxradio(e.extend({icon:!1},r))}}))),o}}(e.fn.button),e.fn.buttonset=function(){return e.ui.controlgroup||e.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))});var I;e.ui.button;function A(e){for(var t,r;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(r=parseInt(e.css("zIndex"),10),!isNaN(r)&&0!==r))return r;e=e.parent()}return 0}function j(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:"",selectMonthLabel:"Select month",selectYearLabel:"Select year"},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,onUpdateDatepicker:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=D(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function D(t){var r="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",r,(function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")})).on("mouseover",r,N)}function N(){e.datepicker._isDisabledDatepicker(I.inline?I.dpDiv.parent()[0]:I.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function F(t,r){for(var n in e.extend(t,r),r)null==r[n]&&(t[n]=r[n]);return t}e.extend(e.ui,{datepicker:{version:"1.13.2"}}),e.extend(j.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return F(this._defaults,e||{}),this},_attachDatepicker:function(t,r){var n,i,o;i="div"===(n=t.nodeName.toLowerCase())||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),(o=this._newInst(e(t),i)).settings=e.extend({},r||{}),"input"===n?this._connectDatepicker(t,o):i&&this._inlineDatepicker(t,o)},_newInst:function(t,r){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:r,dpDiv:r?D(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,r){var n=e(t);r.append=e([]),r.trigger=e([]),n.hasClass(this.markerClassName)||(this._attachments(n,r),n.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(r),e.data(t,"datepicker",r),r.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,r){var n,i,o,s=this._get(r,"appendText"),a=this._get(r,"isRTL");r.append&&r.append.remove(),s&&(r.append=e("<span>").addClass(this._appendClass).text(s),t[a?"before":"after"](r.append)),t.off("focus",this._showDatepicker),r.trigger&&r.trigger.remove(),"focus"!==(n=this._get(r,"showOn"))&&"both"!==n||t.on("focus",this._showDatepicker),"button"!==n&&"both"!==n||(i=this._get(r,"buttonText"),o=this._get(r,"buttonImage"),this._get(r,"buttonImageOnly")?r.trigger=e("<img>").addClass(this._triggerClass).attr({src:o,alt:i,title:i}):(r.trigger=e("<button type='button'>").addClass(this._triggerClass),o?r.trigger.html(e("<img>").attr({src:o,alt:i,title:i})):r.trigger.text(i)),t[a?"before":"after"](r.trigger),r.trigger.on("click",(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1})))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,r,n,i,o=new Date(2009,11,20),s=this._get(e,"dateFormat");s.match(/[DM]/)&&(t=function(e){for(r=0,n=0,i=0;i<e.length;i++)e[i].length>r&&(r=e[i].length,n=i);return n},o.setMonth(t(this._get(e,s.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(t(this._get(e,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),e.input.attr("size",this._formatDate(e,o).length)}},_inlineDatepicker:function(t,r){var n=e(t);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(r.dpDiv),e.data(t,"datepicker",r),this._setDate(r,this._getDefaultDate(r),!0),this._updateDatepicker(r),this._updateAlternate(r),r.settings.disabled&&this._disableDatepicker(t),r.dpDiv.css("display","block"))},_dialogDatepicker:function(t,r,n,i,o){var s,a,l,u,c,h=this._dialogInst;return h||(this.uuid+=1,s="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+s+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),e("body").append(this._dialogInput),(h=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},e.data(this._dialogInput[0],"datepicker",h)),F(h.settings,i||{}),r=r&&r.constructor===Date?this._formatDate(h,r):r,this._dialogInput.val(r),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(a=document.documentElement.clientWidth,l=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[a/2-100+u,l/2-150+c]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),h.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",h),this},_destroyDatepicker:function(t){var r,n=e(t),i=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(r=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===r?(i.append.remove(),i.trigger.remove(),n.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==r&&"span"!==r||n.removeClass(this.markerClassName).empty(),I===i&&(I=null,this._curInst=null))},_enableDatepicker:function(t){var r,n,i=e(t),o=e.data(t,"datepicker");i.hasClass(this.markerClassName)&&("input"===(r=t.nodeName.toLowerCase())?(t.disabled=!1,o.trigger.filter("button").each((function(){this.disabled=!1})).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==r&&"span"!==r||((n=i.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,(function(e){return e===t?null:e})))},_disableDatepicker:function(t){var r,n,i=e(t),o=e.data(t,"datepicker");i.hasClass(this.markerClassName)&&("input"===(r=t.nodeName.toLowerCase())?(t.disabled=!0,o.trigger.filter("button").each((function(){this.disabled=!0})).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==r&&"span"!==r||((n=i.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,(function(e){return e===t?null:e})),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,r,n){var i,o,s,a,l=this._getInst(t);if(2===arguments.length&&"string"==typeof r)return"defaults"===r?e.extend({},e.datepicker._defaults):l?"all"===r?e.extend({},l.settings):this._get(l,r):null;i=r||{},"string"==typeof r&&((i={})[r]=n),l&&(this._curInst===l&&this._hideDatepicker(),o=this._getDateDatepicker(t,!0),s=this._getMinMaxDate(l,"min"),a=this._getMinMaxDate(l,"max"),F(l.settings,i),null!==s&&void 0!==i.dateFormat&&void 0===i.minDate&&(l.settings.minDate=this._formatDate(l,s)),null!==a&&void 0!==i.dateFormat&&void 0===i.maxDate&&(l.settings.maxDate=this._formatDate(l,a)),"disabled"in i&&(i.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),l),this._autoSize(l),this._setDate(l,o),this._updateAlternate(l),this._updateDatepicker(l))},_changeDatepicker:function(e,t,r){this._optionDatepicker(e,t,r)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var r=this._getInst(e);r&&(this._setDate(r,t),this._updateDatepicker(r),this._updateAlternate(r))},_getDateDatepicker:function(e,t){var r=this._getInst(e);return r&&!r.inline&&this._setDateFromField(r,t),r?this._getDate(r):null},_doKeyDown:function(t){var r,n,i,o=e.datepicker._getInst(t.target),s=!0,a=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),s=!1;break;case 13:return(i=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",o.dpDiv))[0]&&e.datepicker._selectDay(t.target,o.selectedMonth,o.selectedYear,i[0]),(r=e.datepicker._get(o,"onSelect"))?(n=e.datepicker._formatDate(o),r.apply(o.input?o.input[0]:null,[n,o])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),s=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),s=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,a?1:-1,"D"),s=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),s=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,a?-1:1,"D"),s=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),s=t.ctrlKey||t.metaKey;break;default:s=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):s=!1;s&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var r,n,i=e.datepicker._getInst(t.target);if(e.datepicker._get(i,"constrainInput"))return r=e.datepicker._possibleChars(e.datepicker._get(i,"dateFormat")),n=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||n<" "||!r||r.indexOf(n)>-1},_doKeyUp:function(t){var r=e.datepicker._getInst(t.target);if(r.input.val()!==r.lastVal)try{e.datepicker.parseDate(e.datepicker._get(r,"dateFormat"),r.input?r.input.val():null,e.datepicker._getFormatConfig(r))&&(e.datepicker._setDateFromField(r),e.datepicker._updateAlternate(r),e.datepicker._updateDatepicker(r))}catch(e){}return!0},_showDatepicker:function(t){var r,n,i,o,s,a,l;("input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t)||(r=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==r&&(e.datepicker._curInst.dpDiv.stop(!0,!0),r&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),!1!==(i=(n=e.datepicker._get(r,"beforeShow"))?n.apply(t,[t,r]):{})&&(F(r.settings,i),r.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(r),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each((function(){return!(o|="fixed"===e(this).css("position"))})),s={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,r.dpDiv.empty(),r.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(r),s=e.datepicker._checkOffset(r,s,o),r.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"}),r.inline||(a=e.datepicker._get(r,"showAnim"),l=e.datepicker._get(r,"duration"),r.dpDiv.css("z-index",A(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[a]?r.dpDiv.show(a,e.datepicker._get(r,"showOptions"),l):r.dpDiv[a||"show"](a?l:null),e.datepicker._shouldFocusInput(r)&&r.input.trigger("focus"),e.datepicker._curInst=r)))},_updateDatepicker:function(t){this.maxRows=4,I=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var r,n=this._getNumberOfMonths(t),i=n[1],o=17,s=t.dpDiv.find("."+this._dayOverClass+" a"),a=e.datepicker._get(t,"onUpdateDatepicker");s.length>0&&N.apply(s.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&t.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",o*i+"em"),t.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.trigger("focus"),t.yearshtml&&(r=t.yearshtml,setTimeout((function(){r===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year").first().replaceWith(t.yearshtml),r=t.yearshtml=null}),0)),a&&a.apply(t.input?t.input[0]:null,[t])},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,r,n){var i=t.dpDiv.outerWidth(),o=t.dpDiv.outerHeight(),s=t.input?t.input.outerWidth():0,a=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),u=document.documentElement.clientHeight+(n?0:e(document).scrollTop());return r.left-=this._get(t,"isRTL")?i-s:0,r.left-=n&&r.left===t.input.offset().left?e(document).scrollLeft():0,r.top-=n&&r.top===t.input.offset().top+a?e(document).scrollTop():0,r.left-=Math.min(r.left,r.left+i>l&&l>i?Math.abs(r.left+i-l):0),r.top-=Math.min(r.top,r.top+o>u&&u>o?Math.abs(o+a):0),r},_findPos:function(t){for(var r,n=this._getInst(t),i=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.pseudos.hidden(t));)t=t[i?"previousSibling":"nextSibling"];return[(r=e(t).offset()).left,r.top]},_hideDatepicker:function(t){var r,n,i,o,s=this._curInst;!s||t&&s!==e.data(t,"datepicker")||this._datepickerShowing&&(r=this._get(s,"showAnim"),n=this._get(s,"duration"),i=function(){e.datepicker._tidyDialog(s)},e.effects&&(e.effects.effect[r]||e.effects[r])?s.dpDiv.hide(r,e.datepicker._get(s,"showOptions"),n,i):s.dpDiv["slideDown"===r?"slideUp":"fadeIn"===r?"fadeOut":"hide"](r?n:null,i),r||i(),this._datepickerShowing=!1,(o=this._get(s,"onClose"))&&o.apply(s.input?s.input[0]:null,[s.input?s.input.val():"",s]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var r=e(t.target),n=e.datepicker._getInst(r[0]);(r[0].id===e.datepicker._mainDivId||0!==r.parents("#"+e.datepicker._mainDivId).length||r.hasClass(e.datepicker.markerClassName)||r.closest("."+e.datepicker._triggerClass).length||!e.datepicker._datepickerShowing||e.datepicker._inDialog&&e.blockUI)&&(!r.hasClass(e.datepicker.markerClassName)||e.datepicker._curInst===n)||e.datepicker._hideDatepicker()}},_adjustDate:function(t,r,n){var i=e(t),o=this._getInst(i[0]);this._isDisabledDatepicker(i[0])||(this._adjustInstDate(o,r,n),this._updateDatepicker(o))},_gotoToday:function(t){var r,n=e(t),i=this._getInst(n[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(r=new Date,i.selectedDay=r.getDate(),i.drawMonth=i.selectedMonth=r.getMonth(),i.drawYear=i.selectedYear=r.getFullYear()),this._notifyChange(i),this._adjustDate(n)},_selectMonthYear:function(t,r,n){var i=e(t),o=this._getInst(i[0]);o["selected"+("M"===n?"Month":"Year")]=o["draw"+("M"===n?"Month":"Year")]=parseInt(r.options[r.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(i)},_selectDay:function(t,r,n,i){var o,s=e(t);e(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])||((o=this._getInst(s[0])).selectedDay=o.currentDay=parseInt(e("a",i).attr("data-date")),o.selectedMonth=o.currentMonth=r,o.selectedYear=o.currentYear=n,this._selectDate(t,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(t){var r=e(t);this._selectDate(r,"")},_selectDate:function(t,r){var n,i=e(t),o=this._getInst(i[0]);r=null!=r?r:this._formatDate(o),o.input&&o.input.val(r),this._updateAlternate(o),(n=this._get(o,"onSelect"))?n.apply(o.input?o.input[0]:null,[r,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(t){var r,n,i,o=this._get(t,"altField");o&&(r=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),i=this.formatDate(r,n,this._getFormatConfig(t)),e(document).find(o).val(i))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,r=new Date(e.getTime());return r.setDate(r.getDate()+4-(r.getDay()||7)),t=r.getTime(),r.setMonth(0),r.setDate(1),Math.floor(Math.round((t-r)/864e5)/7)+1},parseDate:function(t,r,n){if(null==t||null==r)throw"Invalid arguments";if(""===(r="object"==typeof r?r.toString():r+""))return null;var i,o,s,a,l=0,u=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof u?u:(new Date).getFullYear()%100+parseInt(u,10),h=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,d=(n?n.dayNames:null)||this._defaults.dayNames,f=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,p=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,b=!1,w=function(e){var r=i+1<t.length&&t.charAt(i+1)===e;return r&&i++,r},C=function(e){var t=w(e),n="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,i=new RegExp("^\\d{"+("y"===e?n:1)+","+n+"}"),o=r.substring(l).match(i);if(!o)throw"Missing number at position "+l;return l+=o[0].length,parseInt(o[0],10)},_=function(t,n,i){var o=-1,s=e.map(w(t)?i:n,(function(e,t){return[[t,e]]})).sort((function(e,t){return-(e[1].length-t[1].length)}));if(e.each(s,(function(e,t){var n=t[1];if(r.substr(l,n.length).toLowerCase()===n.toLowerCase())return o=t[0],l+=n.length,!1})),-1!==o)return o+1;throw"Unknown name at position "+l},S=function(){if(r.charAt(l)!==t.charAt(i))throw"Unexpected literal at position "+l;l++};for(i=0;i<t.length;i++)if(b)"'"!==t.charAt(i)||w("'")?S():b=!1;else switch(t.charAt(i)){case"d":v=C("d");break;case"D":_("D",h,d);break;case"o":y=C("o");break;case"m":g=C("m");break;case"M":g=_("M",f,p);break;case"y":m=C("y");break;case"@":m=(a=new Date(C("@"))).getFullYear(),g=a.getMonth()+1,v=a.getDate();break;case"!":m=(a=new Date((C("!")-this._ticksTo1970)/1e4)).getFullYear(),g=a.getMonth()+1,v=a.getDate();break;case"'":w("'")?S():b=!0;break;default:S()}if(l<r.length&&(s=r.substr(l),!/^\s+/.test(s)))throw"Extra/unparsed characters found in date: "+s;if(-1===m?m=(new Date).getFullYear():m<100&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(m<=c?0:-100)),y>-1)for(g=1,v=y;;){if(v<=(o=this._getDaysInMonth(m,g-1)))break;g++,v-=o}if((a=this._daylightSavingAdjust(new Date(m,g-1,v))).getFullYear()!==m||a.getMonth()+1!==g||a.getDate()!==v)throw"Invalid date";return a},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,r){if(!t)return"";var n,i=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,o=(r?r.dayNames:null)||this._defaults.dayNames,s=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,a=(r?r.monthNames:null)||this._defaults.monthNames,l=function(t){var r=n+1<e.length&&e.charAt(n+1)===t;return r&&n++,r},u=function(e,t,r){var n=""+t;if(l(e))for(;n.length<r;)n="0"+n;return n},c=function(e,t,r,n){return l(e)?n[t]:r[t]},h="",d=!1;if(t)for(n=0;n<e.length;n++)if(d)"'"!==e.charAt(n)||l("'")?h+=e.charAt(n):d=!1;else switch(e.charAt(n)){case"d":h+=u("d",t.getDate(),2);break;case"D":h+=c("D",t.getDay(),i,o);break;case"o":h+=u("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=u("m",t.getMonth()+1,2);break;case"M":h+=c("M",t.getMonth(),s,a);break;case"y":h+=l("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":h+=t.getTime();break;case"!":h+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?h+="'":d=!0;break;default:h+=e.charAt(n)}return h},_possibleChars:function(e){var t,r="",n=!1,i=function(r){var n=t+1<e.length&&e.charAt(t+1)===r;return n&&t++,n};for(t=0;t<e.length;t++)if(n)"'"!==e.charAt(t)||i("'")?r+=e.charAt(t):n=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":r+="0123456789";break;case"D":case"M":return null;case"'":i("'")?r+="'":n=!0;break;default:r+=e.charAt(t)}return r},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var r=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,i=this._getDefaultDate(e),o=i,s=this._getFormatConfig(e);try{o=this.parseDate(r,n,s)||i}catch(e){n=t?"":n}e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),e.currentDay=n?o.getDate():0,e.currentMonth=n?o.getMonth():0,e.currentYear=n?o.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,r,n){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},o=function(r){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),r,e.datepicker._getFormatConfig(t))}catch(e){}for(var n=(r.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,i=n.getFullYear(),o=n.getMonth(),s=n.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=a.exec(r);l;){switch(l[2]||"d"){case"d":case"D":s+=parseInt(l[1],10);break;case"w":case"W":s+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),s=Math.min(s,e.datepicker._getDaysInMonth(i,o));break;case"y":case"Y":i+=parseInt(l[1],10),s=Math.min(s,e.datepicker._getDaysInMonth(i,o))}l=a.exec(r)}return new Date(i,o,s)},s=null==r||""===r?n:"string"==typeof r?o(r):"number"==typeof r?isNaN(r)?n:i(r):new Date(r.getTime());return(s=s&&"Invalid Date"===s.toString()?n:s)&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,r){var n=!t,i=e.selectedMonth,o=e.selectedYear,s=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=s.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=s.getMonth(),e.drawYear=e.selectedYear=e.currentYear=s.getFullYear(),i===e.selectedMonth&&o===e.selectedYear||r||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(t){var r=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map((function(){var t={prev:function(){e.datepicker._adjustDate(n,-r,"M")},next:function(){e.datepicker._adjustDate(n,+r,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(n)},selectDay:function(){return e.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(n,this,"Y"),!1}};e(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])}))},_generateHTML:function(t){var r,n,i,o,s,a,l,u,c,h,d,f,p,m,g,v,y,b,w,C,_,S,x,k,T,R,E,M,P,O,I,A,j,D,N,F,$,L,B,V=new Date,H=this._daylightSavingAdjust(new Date(V.getFullYear(),V.getMonth(),V.getDate())),z=this._get(t,"isRTL"),U=this._get(t,"showButtonPanel"),q=this._get(t,"hideIfNoPrevNext"),G=this._get(t,"navigationAsDateFormat"),W=this._getNumberOfMonths(t),K=this._get(t,"showCurrentAtPos"),J=this._get(t,"stepMonths"),X=1!==W[0]||1!==W[1],Y=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(t,"min"),Q=this._getMinMaxDate(t,"max"),ee=t.drawMonth-K,te=t.drawYear;if(ee<0&&(ee+=12,te--),Q)for(r=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-W[0]*W[1]+1,Q.getDate())),r=Z&&r<Z?Z:r;this._daylightSavingAdjust(new Date(te,ee,1))>r;)--ee<0&&(ee=11,te--);for(t.drawMonth=ee,t.drawYear=te,n=this._get(t,"prevText"),n=G?this.formatDate(n,this._daylightSavingAdjust(new Date(te,ee-J,1)),this._getFormatConfig(t)):n,i=this._canAdjustMonth(t,-1,te,ee)?e("<a>").attr({class:"ui-datepicker-prev ui-corner-all","data-handler":"prev","data-event":"click",title:n}).append(e("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(z?"e":"w")).text(n))[0].outerHTML:q?"":e("<a>").attr({class:"ui-datepicker-prev ui-corner-all ui-state-disabled",title:n}).append(e("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(z?"e":"w")).text(n))[0].outerHTML,o=this._get(t,"nextText"),o=G?this.formatDate(o,this._daylightSavingAdjust(new Date(te,ee+J,1)),this._getFormatConfig(t)):o,s=this._canAdjustMonth(t,1,te,ee)?e("<a>").attr({class:"ui-datepicker-next ui-corner-all","data-handler":"next","data-event":"click",title:o}).append(e("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(z?"w":"e")).text(o))[0].outerHTML:q?"":e("<a>").attr({class:"ui-datepicker-next ui-corner-all ui-state-disabled",title:o}).append(e("<span>").attr("class","ui-icon ui-icon-circle-triangle-"+(z?"w":"e")).text(o))[0].outerHTML,a=this._get(t,"currentText"),l=this._get(t,"gotoCurrent")&&t.currentDay?Y:H,a=G?this.formatDate(a,l,this._getFormatConfig(t)):a,u="",t.inline||(u=e("<button>").attr({type:"button",class:"ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all","data-handler":"hide","data-event":"click"}).text(this._get(t,"closeText"))[0].outerHTML),c="",U&&(c=e("<div class='ui-datepicker-buttonpane ui-widget-content'>").append(z?u:"").append(this._isInRange(t,l)?e("<button>").attr({type:"button",class:"ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all","data-handler":"today","data-event":"click"}).text(a):"").append(z?"":u)[0].outerHTML),h=parseInt(this._get(t,"firstDay"),10),h=isNaN(h)?0:h,d=this._get(t,"showWeek"),f=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),m=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),v=this._get(t,"beforeShowDay"),y=this._get(t,"showOtherMonths"),b=this._get(t,"selectOtherMonths"),w=this._getDefaultDate(t),C="",S=0;S<W[0];S++){for(x="",this.maxRows=4,k=0;k<W[1];k++){if(T=this._daylightSavingAdjust(new Date(te,ee,t.selectedDay)),R=" ui-corner-all",E="",X){if(E+="<div class='ui-datepicker-group",W[1]>1)switch(k){case 0:E+=" ui-datepicker-group-first",R=" ui-corner-"+(z?"right":"left");break;case W[1]-1:E+=" ui-datepicker-group-last",R=" ui-corner-"+(z?"left":"right");break;default:E+=" ui-datepicker-group-middle",R=""}E+="'>"}for(E+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+R+"'>"+(/all|left/.test(R)&&0===S?z?s:i:"")+(/all|right/.test(R)&&0===S?z?i:s:"")+this._generateMonthYearHeader(t,ee,te,Z,Q,S>0||k>0,m,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",M=d?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",_=0;_<7;_++)M+="<th scope='col'"+((_+h+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+f[P=(_+h)%7]+"'>"+p[P]+"</span></th>";for(E+=M+"</tr></thead><tbody>",O=this._getDaysInMonth(te,ee),te===t.selectedYear&&ee===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,O)),I=(this._getFirstDayOfMonth(te,ee)-h+7)%7,A=Math.ceil((I+O)/7),j=X&&this.maxRows>A?this.maxRows:A,this.maxRows=j,D=this._daylightSavingAdjust(new Date(te,ee,1-I)),N=0;N<j;N++){for(E+="<tr>",F=d?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(D)+"</td>":"",_=0;_<7;_++)$=v?v.apply(t.input?t.input[0]:null,[D]):[!0,""],B=(L=D.getMonth()!==ee)&&!b||!$[0]||Z&&D<Z||Q&&D>Q,F+="<td class='"+((_+h+6)%7>=5?" ui-datepicker-week-end":"")+(L?" ui-datepicker-other-month":"")+(D.getTime()===T.getTime()&&ee===t.selectedMonth&&t._keyEvent||w.getTime()===D.getTime()&&w.getTime()===T.getTime()?" "+this._dayOverClass:"")+(B?" "+this._unselectableClass+" ui-state-disabled":"")+(L&&!y?"":" "+$[1]+(D.getTime()===Y.getTime()?" "+this._currentClass:"")+(D.getTime()===H.getTime()?" ui-datepicker-today":""))+"'"+(L&&!y||!$[2]?"":" title='"+$[2].replace(/'/g,"&#39;")+"'")+(B?"":" data-handler='selectDay' data-event='click' data-month='"+D.getMonth()+"' data-year='"+D.getFullYear()+"'")+">"+(L&&!y?"&#xa0;":B?"<span class='ui-state-default'>"+D.getDate()+"</span>":"<a class='ui-state-default"+(D.getTime()===H.getTime()?" ui-state-highlight":"")+(D.getTime()===Y.getTime()?" ui-state-active":"")+(L?" ui-priority-secondary":"")+"' href='#' aria-current='"+(D.getTime()===Y.getTime()?"true":"false")+"' data-date='"+D.getDate()+"'>"+D.getDate()+"</a>")+"</td>",D.setDate(D.getDate()+1),D=this._daylightSavingAdjust(D);E+=F+"</tr>"}++ee>11&&(ee=0,te++),x+=E+="</tbody></table>"+(X?"</div>"+(W[0]>0&&k===W[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}C+=x}return C+=c,t._keyEvent=!1,C},_generateMonthYearHeader:function(e,t,r,n,i,o,s,a){var l,u,c,h,d,f,p,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b=this._get(e,"selectMonthLabel"),w=this._get(e,"selectYearLabel"),C="<div class='ui-datepicker-title'>",_="";if(o||!g)_+="<span class='ui-datepicker-month'>"+s[t]+"</span>";else{for(l=n&&n.getFullYear()===r,u=i&&i.getFullYear()===r,_+="<select class='ui-datepicker-month' aria-label='"+b+"' data-handler='selectMonth' data-event='change'>",c=0;c<12;c++)(!l||c>=n.getMonth())&&(!u||c<=i.getMonth())&&(_+="<option value='"+c+"'"+(c===t?" selected='selected'":"")+">"+a[c]+"</option>");_+="</select>"}if(y||(C+=_+(!o&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",o||!v)C+="<span class='ui-datepicker-year'>"+r+"</span>";else{for(h=this._get(e,"yearRange").split(":"),d=(new Date).getFullYear(),f=function(e){var t=e.match(/c[+\-].*/)?r+parseInt(e.substring(1),10):e.match(/[+\-].*/)?d+parseInt(e,10):parseInt(e,10);return isNaN(t)?d:t},p=f(h[0]),m=Math.max(p,f(h[1]||"")),p=n?Math.max(p,n.getFullYear()):p,m=i?Math.min(m,i.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' aria-label='"+w+"' data-handler='selectYear' data-event='change'>";p<=m;p++)e.yearshtml+="<option value='"+p+"'"+(p===r?" selected='selected'":"")+">"+p+"</option>";e.yearshtml+="</select>",C+=e.yearshtml,e.yearshtml=null}return C+=this._get(e,"yearSuffix"),y&&(C+=(!o&&g&&v?"":"&#xa0;")+_),C+="</div>"},_adjustInstDate:function(e,t,r){var n=e.selectedYear+("Y"===r?t:0),i=e.selectedMonth+("M"===r?t:0),o=Math.min(e.selectedDay,this._getDaysInMonth(n,i))+("D"===r?t:0),s=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,i,o)));e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),"M"!==r&&"Y"!==r||this._notifyChange(e)},_restrictMinMax:function(e,t){var r=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),i=r&&t<r?r:t;return n&&i>n?n:i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,r,n){var i=this._getNumberOfMonths(e),o=this._daylightSavingAdjust(new Date(r,n+(t<0?t:i[0]*i[1]),1));return t<0&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(e,o)},_isInRange:function(e,t){var r,n,i=this._getMinMaxDate(e,"min"),o=this._getMinMaxDate(e,"max"),s=null,a=null,l=this._get(e,"yearRange");return l&&(r=l.split(":"),n=(new Date).getFullYear(),s=parseInt(r[0],10),a=parseInt(r[1],10),r[0].match(/[+\-].*/)&&(s+=n),r[1].match(/[+\-].*/)&&(a+=n)),(!i||t.getTime()>=i.getTime())&&(!o||t.getTime()<=o.getTime())&&(!s||t.getFullYear()>=s)&&(!a||t.getFullYear()<=a)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,r,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,r,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).on("mousedown",e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var r=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(r)):this.each((function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(r)):e.datepicker._attachDatepicker(this,t)})):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(r))},e.datepicker=new j,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.13.2";e.datepicker,e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var $=!1;e(document).on("mouseup",(function(){$=!1}));e.widget("ui.mouse",{version:"1.13.2",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,(function(e){return t._mouseDown(e)})).on("click."+this.widgetName,(function(r){if(!0===e.data(r.target,t.widgetName+".preventClickEvent"))return e.removeData(r.target,t.widgetName+".preventClickEvent"),r.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!$){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,n=1===t.which,i=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(n&&!i&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){r.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),$=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,$=!1,t.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),e.ui.plugin={add:function(t,r,n){var i,o=e.ui[t].prototype;for(i in n)o.plugins[i]=o.plugins[i]||[],o.plugins[i].push([r,n[i]])},call:function(e,t,r,n){var i,o=e.plugins[t];if(o&&(n||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(i=0;i<o.length;i++)e.options[o[i][0]]&&o[i][1].apply(e.element,r)}},e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")};e.widget("ui.draggable",e.ui.mouse,{version:"1.13.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(t){var r=this.options;return!(this.helper||r.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(!0===r.iframeFix?"iframe":r.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map((function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var r=e.ui.safeActiveElement(this.document[0]);e(t.target).closest(r).length||e.ui.safeBlur(r)},_mouseStart:function(t){var r=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter((function(){return"fixed"===e(this).css("position")})).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,r){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!r){var n=this._uiHash();if(!1===this._trigger("drag",t,n))return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var r=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||"function"==typeof this.options.revert&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==r._trigger("stop",t)&&r._clear()})):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var r=this.options,n="function"==typeof r.helper,i=n?e(r.helper.apply(this.element[0],[t])):"clone"===r.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===r.appendTo?this.element[0].parentNode:r.appendTo),n&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),Array.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),r=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==r&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,r,n,i=this.options,o=this.document[0];this.relativeContainer=null,i.containment?"window"!==i.containment?"document"!==i.containment?i.containment.constructor!==Array?("parent"===i.containment&&(i.containment=this.helper[0].parentNode),(n=(r=e(i.containment))[0])&&(t=/(scroll|auto)/.test(r.css("overflow")),this.containment=[(parseInt(r.css("borderLeftWidth"),10)||0)+(parseInt(r.css("paddingLeft"),10)||0),(parseInt(r.css("borderTopWidth"),10)||0)+(parseInt(r.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(r.css("borderRightWidth"),10)||0)-(parseInt(r.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(r.css("borderBottomWidth"),10)||0)-(parseInt(r.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=r)):this.containment=i.containment:this.containment=[0,0,e(o).width()-this.helperProportions.width-this.margins.left,(e(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(e,t){t||(t=this.position);var r="absolute"===e?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*r,left:t.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*r}},_generatePosition:function(e,t){var r,n,i,o,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=e.pageX,u=e.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),r=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):r=this.containment,e.pageX-this.offset.click.left<r[0]&&(l=r[0]+this.offset.click.left),e.pageY-this.offset.click.top<r[1]&&(u=r[1]+this.offset.click.top),e.pageX-this.offset.click.left>r[2]&&(l=r[2]+this.offset.click.left),e.pageY-this.offset.click.top>r[3]&&(u=r[3]+this.offset.click.top)),s.grid&&(i=s.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,u=r?i-this.offset.click.top>=r[1]||i-this.offset.click.top>r[3]?i:i-this.offset.click.top>=r[1]?i-s.grid[1]:i+s.grid[1]:i,o=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=r?o-this.offset.click.left>=r[0]||o-this.offset.click.left>r[2]?o:o-this.offset.click.left>=r[0]?o-s.grid[0]:o+s.grid[0]:o),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(u=this.originalPageY)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,r,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[r,n,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,r,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,r,n){var i=e.extend({},r,{item:n.element});n.sortables=[],e(n.options.connectToSortable).each((function(){var r=e(this).sortable("instance");r&&!r.options.disabled&&(n.sortables.push(r),r.refreshPositions(),r._trigger("activate",t,i))}))},stop:function(t,r,n){var i=e.extend({},r,{item:n.element});n.cancelHelperRemoval=!1,e.each(n.sortables,(function(){var e=this;e.isOver?(e.isOver=0,n.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,i))}))},drag:function(t,r,n){e.each(n.sortables,(function(){var i=!1,o=this;o.positionAbs=n.positionAbs,o.helperProportions=n.helperProportions,o.offset.click=n.offset.click,o._intersectsWith(o.containerCache)&&(i=!0,e.each(n.sortables,(function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&e.contains(o.element[0],this.element[0])&&(i=!1),i}))),i?(o.isOver||(o.isOver=1,n._parent=r.helper.parent(),o.currentItem=r.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return r.helper[0]},t.target=o.currentItem[0],o._mouseCapture(t,!0),o._mouseStart(t,!0,!0),o.offset.click.top=n.offset.click.top,o.offset.click.left=n.offset.click.left,o.offset.parent.left-=n.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=n.offset.parent.top-o.offset.parent.top,n._trigger("toSortable",t),n.dropped=o.element,e.each(n.sortables,(function(){this.refreshPositions()})),n.currentItem=n.element,o.fromOutside=n),o.currentItem&&(o._mouseDrag(t),r.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",t,o._uiHash(o)),o._mouseStop(t,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),r.helper.appendTo(n._parent),n._refreshOffsets(t),r.position=n._generatePosition(t,!0),n._trigger("fromSortable",t),n.dropped=!1,e.each(n.sortables,(function(){this.refreshPositions()})))}))}}),e.ui.plugin.add("draggable","cursor",{start:function(t,r,n){var i=e("body"),o=n.options;i.css("cursor")&&(o._cursor=i.css("cursor")),i.css("cursor",o.cursor)},stop:function(t,r,n){var i=n.options;i._cursor&&e("body").css("cursor",i._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,r,n){var i=e(r.helper),o=n.options;i.css("opacity")&&(o._opacity=i.css("opacity")),i.css("opacity",o.opacity)},stop:function(t,r,n){var i=n.options;i._opacity&&e(r.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,r){r.scrollParentNotHidden||(r.scrollParentNotHidden=r.helper.scrollParent(!1)),r.scrollParentNotHidden[0]!==r.document[0]&&"HTML"!==r.scrollParentNotHidden[0].tagName&&(r.overflowOffset=r.scrollParentNotHidden.offset())},drag:function(t,r,n){var i=n.options,o=!1,s=n.scrollParentNotHidden[0],a=n.document[0];s!==a&&"HTML"!==s.tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+s.offsetHeight-t.pageY<i.scrollSensitivity?s.scrollTop=o=s.scrollTop+i.scrollSpeed:t.pageY-n.overflowOffset.top<i.scrollSensitivity&&(s.scrollTop=o=s.scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+s.offsetWidth-t.pageX<i.scrollSensitivity?s.scrollLeft=o=s.scrollLeft+i.scrollSpeed:t.pageX-n.overflowOffset.left<i.scrollSensitivity&&(s.scrollLeft=o=s.scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-e(a).scrollTop()<i.scrollSensitivity?o=e(a).scrollTop(e(a).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(a).scrollTop())<i.scrollSensitivity&&(o=e(a).scrollTop(e(a).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-e(a).scrollLeft()<i.scrollSensitivity?o=e(a).scrollLeft(e(a).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(a).scrollLeft())<i.scrollSensitivity&&(o=e(a).scrollLeft(e(a).scrollLeft()+i.scrollSpeed)))),!1!==o&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,r,n){var i=n.options;n.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each((function(){var t=e(this),r=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:r.top,left:r.left})}))},drag:function(t,r,n){var i,o,s,a,l,u,c,h,d,f,p=n.options,m=p.snapTolerance,g=r.offset.left,v=g+n.helperProportions.width,y=r.offset.top,b=y+n.helperProportions.height;for(d=n.snapElements.length-1;d>=0;d--)u=(l=n.snapElements[d].left-n.margins.left)+n.snapElements[d].width,h=(c=n.snapElements[d].top-n.margins.top)+n.snapElements[d].height,v<l-m||g>u+m||b<c-m||y>h+m||!e.contains(n.snapElements[d].item.ownerDocument,n.snapElements[d].item)?(n.snapElements[d].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=!1):("inner"!==p.snapMode&&(i=Math.abs(c-b)<=m,o=Math.abs(h-y)<=m,s=Math.abs(l-v)<=m,a=Math.abs(u-g)<=m,i&&(r.position.top=n._convertPositionTo("relative",{top:c-n.helperProportions.height,left:0}).top),o&&(r.position.top=n._convertPositionTo("relative",{top:h,left:0}).top),s&&(r.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),a&&(r.position.left=n._convertPositionTo("relative",{top:0,left:u}).left)),f=i||o||s||a,"outer"!==p.snapMode&&(i=Math.abs(c-y)<=m,o=Math.abs(h-b)<=m,s=Math.abs(l-g)<=m,a=Math.abs(u-v)<=m,i&&(r.position.top=n._convertPositionTo("relative",{top:c,left:0}).top),o&&(r.position.top=n._convertPositionTo("relative",{top:h-n.helperProportions.height,left:0}).top),s&&(r.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),a&&(r.position.left=n._convertPositionTo("relative",{top:0,left:u-n.helperProportions.width}).left)),!n.snapElements[d].snapping&&(i||o||s||a||f)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=i||o||s||a||f)}}),e.ui.plugin.add("draggable","stack",{start:function(t,r,n){var i,o=n.options,s=e.makeArray(e(o.stack)).sort((function(t,r){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(r).css("zIndex"),10)||0)}));s.length&&(i=parseInt(e(s[0]).css("zIndex"),10)||0,e(s).each((function(t){e(this).css("zIndex",i+t)})),this.css("zIndex",i+s.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,r,n){var i=e(r.helper),o=n.options;i.css("zIndex")&&(o._zIndex=i.css("zIndex")),i.css("zIndex",o.zIndex)},stop:function(t,r,n){var i=n.options;i._zIndex&&e(r.helper).css("zIndex",i._zIndex)}});e.ui.draggable;e.widget("ui.resizable",e.ui.mouse,{version:"1.13.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,r){if("hidden"===e(t).css("overflow"))return!1;var n=r&&"left"===r?"scrollLeft":"scrollTop",i=!1;if(t[n]>0)return!0;try{t[n]=1,i=t[n]>0,t[n]=0}catch(e){}return i},_create:function(){var t,r=this.options,n=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper'></div>").css({overflow:"hidden",position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),r.autoHide&&e(this.element).on("mouseenter",(function(){r.disabled||(n._removeClass("ui-resizable-autohide"),n._handles.show())})).on("mouseleave",(function(){r.disabled||n.resizing||(n._addClass("ui-resizable-autohide"),n._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy(),this._addedHandles.remove();var t,r=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable")};return this.elementIsWrapper&&(r(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),r(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles();break;case"aspectRatio":this._aspectRatio=!!t}},_setupHandles:function(){var t,r,n,i,o,s=this.options,a=this;if(this.handles=s.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this._addedHandles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},r=0;r<n.length;r++)i="ui-resizable-"+(t=String.prototype.trim.call(n[r])),o=e("<div>"),this._addClass(o,"ui-resizable-handle "+i),o.css({zIndex:s.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.children(this.handles[t]).length||(this.element.append(o),this._addedHandles=this._addedHandles.add(o));this._renderAxis=function(t){var r,n,i,o;for(r in t=t||this.element,this.handles)this.handles[r].constructor===String?this.handles[r]=this.element.children(this.handles[r]).first().show():(this.handles[r].jquery||this.handles[r].nodeType)&&(this.handles[r]=e(this.handles[r]),this._on(this.handles[r],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=e(this.handles[r],this.element),o=/sw|ne|nw|se|n|s/.test(r)?n.outerHeight():n.outerWidth(),i=["padding",/ne|nw|n/.test(r)?"Top":/se|sw|s/.test(r)?"Bottom":/^e$/.test(r)?"Right":"Left"].join(""),t.css(i,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[r])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",(function(){a.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=o&&o[1]?o[1]:"se")})),s.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._addedHandles.remove()},_mouseCapture:function(t){var r,n,i=!1;for(r in this.handles)((n=e(this.handles[r])[0])===t.target||e.contains(n,t.target))&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var r,n,i,o=this.options,s=this.element;return this.resizing=!0,this._renderProxy(),r=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),o.containment&&(r+=e(o.containment).scrollLeft()||0,n+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:r,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalPosition={left:r,top:n},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,i=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===i?this.axis+"-resize":i),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var r,n,i=this.originalMousePosition,o=this.axis,s=t.pageX-i.left||0,a=t.pageY-i.top||0,l=this._change[o];return this._updatePrevProperties(),!!l&&(r=l.apply(this,[t,s,a]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(r=this._updateRatio(r,t)),r=this._respectSize(r,t),this._updateCache(r),this._propagate("resize",t),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var r,n,i,o,s,a,l,u=this.options,c=this;return this._helper&&(i=(n=(r=this._proportionallyResizeElements).length&&/textarea/i.test(r[0].nodeName))&&this._hasScroll(r[0],"left")?0:c.sizeDiff.height,o=n?0:c.sizeDiff.width,s={width:c.helper.width()-o,height:c.helper.height()-i},a=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null,l=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null,u.animate||this.element.css(e.extend(s,{top:l,left:a})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!u.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,r,n,i,o,s=this.options;o={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,n=o.minWidth/this.aspectRatio,r=o.maxHeight*this.aspectRatio,i=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),n>o.minHeight&&(o.minHeight=n),r<o.maxWidth&&(o.maxWidth=r),i<o.maxHeight&&(o.maxHeight=i)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,r=this.size,n=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===n&&(e.left=t.left+(r.width-e.width),e.top=null),"nw"===n&&(e.top=t.top+(r.height-e.height),e.left=t.left+(r.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,r=this.axis,n=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,i=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,s=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,u=/sw|nw|w/.test(r),c=/nw|ne|n/.test(r);return o&&(e.width=t.minWidth),s&&(e.height=t.minHeight),n&&(e.width=t.maxWidth),i&&(e.height=t.maxHeight),o&&u&&(e.left=a-t.minWidth),n&&u&&(e.left=a-t.maxWidth),s&&c&&(e.top=l-t.minHeight),i&&c&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,r=[],n=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],i=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)r[t]=parseFloat(n[t])||0,r[t]+=parseFloat(i[t])||0;return{height:r[0]+r[2],width:r[1]+r[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,r=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:r.height()-this.outerDimensions.height||0,width:r.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,r=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div></div>").css({overflow:"hidden"}),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++r.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var r=this.originalSize;return{left:this.originalPosition.left+t,width:r.width-t}},n:function(e,t,r){var n=this.originalSize;return{top:this.originalPosition.top+r,height:n.height-r}},s:function(e,t,r){return{height:this.originalSize.height+r}},se:function(t,r,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,r,n]))},sw:function(t,r,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,r,n]))},ne:function(t,r,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,r,n]))},nw:function(t,r,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,r,n]))}},_propagate:function(t,r){e.ui.plugin.call(this,t,[r,this.ui()]),"resize"!==t&&this._trigger(t,r,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var r=e(this).resizable("instance"),n=r.options,i=r._proportionallyResizeElements,o=i.length&&/textarea/i.test(i[0].nodeName),s=o&&r._hasScroll(i[0],"left")?0:r.sizeDiff.height,a=o?0:r.sizeDiff.width,l={width:r.size.width-a,height:r.size.height-s},u=parseFloat(r.element.css("left"))+(r.position.left-r.originalPosition.left)||null,c=parseFloat(r.element.css("top"))+(r.position.top-r.originalPosition.top)||null;r.element.animate(e.extend(l,c&&u?{top:c,left:u}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseFloat(r.element.css("width")),height:parseFloat(r.element.css("height")),top:parseFloat(r.element.css("top")),left:parseFloat(r.element.css("left"))};i&&i.length&&e(i[0]).css({width:n.width,height:n.height}),r._updateCache(n),r._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,r,n,i,o,s,a,l=e(this).resizable("instance"),u=l.options,c=l.element,h=u.containment,d=h instanceof e?h.get(0):/parent/.test(h)?c.parent().get(0):h;d&&(l.containerElement=e(d),/document/.test(h)||h===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(d),r=[],e(["Top","Right","Left","Bottom"]).each((function(e,n){r[e]=l._num(t.css("padding"+n))})),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-r[3],width:t.innerWidth()-r[1]},n=l.containerOffset,i=l.containerSize.height,o=l.containerSize.width,s=l._hasScroll(d,"left")?d.scrollWidth:o,a=l._hasScroll(d)?d.scrollHeight:i,l.parentData={element:d,left:n.left,top:n.top,width:s,height:a}))},resize:function(t){var r,n,i,o,s=e(this).resizable("instance"),a=s.options,l=s.containerOffset,u=s.position,c=s._aspectRatio||t.shiftKey,h={top:0,left:0},d=s.containerElement,f=!0;d[0]!==document&&/static/.test(d.css("position"))&&(h=l),u.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-h.left),c&&(s.size.height=s.size.width/s.aspectRatio,f=!1),s.position.left=a.helper?l.left:0),u.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),c&&(s.size.width=s.size.height*s.aspectRatio,f=!1),s.position.top=s._helper?l.top:0),i=s.containerElement.get(0)===s.element.parent().get(0),o=/relative|absolute/.test(s.containerElement.css("position")),i&&o?(s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top):(s.offset.left=s.element.offset().left,s.offset.top=s.element.offset().top),r=Math.abs(s.sizeDiff.width+(s._helper?s.offset.left-h.left:s.offset.left-l.left)),n=Math.abs(s.sizeDiff.height+(s._helper?s.offset.top-h.top:s.offset.top-l.top)),r+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-r,c&&(s.size.height=s.size.width/s.aspectRatio,f=!1)),n+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-n,c&&(s.size.width=s.size.height*s.aspectRatio,f=!1)),f||(s.position.left=s.prevPosition.left,s.position.top=s.prevPosition.top,s.size.width=s.prevSize.width,s.size.height=s.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),r=t.options,n=t.containerOffset,i=t.containerPosition,o=t.containerElement,s=e(t.helper),a=s.offset(),l=s.outerWidth()-t.sizeDiff.width,u=s.outerHeight()-t.sizeDiff.height;t._helper&&!r.animate&&/relative/.test(o.css("position"))&&e(this).css({left:a.left-i.left-n.left,width:l,height:u}),t._helper&&!r.animate&&/static/.test(o.css("position"))&&e(this).css({left:a.left-i.left-n.left,width:l,height:u})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance").options;e(t.alsoResize).each((function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})}))},resize:function(t,r){var n=e(this).resizable("instance"),i=n.options,o=n.originalSize,s=n.originalPosition,a={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-s.top||0,left:n.position.left-s.left||0};e(i.alsoResize).each((function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),i={},o=t.parents(r.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,(function(e,t){var r=(n[t]||0)+(a[t]||0);r&&r>=0&&(i[t]=r||null)})),t.css(i)}))},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),r=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!1!==e.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,r=e(this).resizable("instance"),n=r.options,i=r.size,o=r.originalSize,s=r.originalPosition,a=r.axis,l="number"==typeof n.grid?[n.grid,n.grid]:n.grid,u=l[0]||1,c=l[1]||1,h=Math.round((i.width-o.width)/u)*u,d=Math.round((i.height-o.height)/c)*c,f=o.width+h,p=o.height+d,m=n.maxWidth&&n.maxWidth<f,g=n.maxHeight&&n.maxHeight<p,v=n.minWidth&&n.minWidth>f,y=n.minHeight&&n.minHeight>p;n.grid=l,v&&(f+=u),y&&(p+=c),m&&(f-=u),g&&(p-=c),/^(se|s|e)$/.test(a)?(r.size.width=f,r.size.height=p):/^(ne)$/.test(a)?(r.size.width=f,r.size.height=p,r.position.top=s.top-d):/^(sw)$/.test(a)?(r.size.width=f,r.size.height=p,r.position.left=s.left-h):((p-c<=0||f-u<=0)&&(t=r._getPaddingPlusBorderDimensions(this)),p-c>0?(r.size.height=p,r.position.top=s.top-d):(p=c-t.height,r.size.height=p,r.position.top=s.top+o.height-p),f-u>0?(r.size.width=f,r.position.left=s.left-h):(f=u-t.width,r.size.width=f,r.position.left=s.left+o.width-f))}});e.ui.resizable;e.widget("ui.dialog",{version:"1.13.2",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var r=e(this).css(t).offset().top;r<0&&e(this).css("top",t.top-r)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(e=t.parent.children().eq(t.index)).length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var r=this;this._isOpen&&!1!==this._trigger("beforeClose",t)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||e.ui.safeBlur(e.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,(function(){r._trigger("close",t)})))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,r){var n=!1,i=this.uiDialog.siblings(".ui-front:visible").map((function(){return+e(this).css("z-index")})).get(),o=Math.max.apply(null,i);return o>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",o+1),n=!0),n&&!r&&this._trigger("focus",t),n},open:function(){var t=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=e(e.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,(function(){t._focusTabbable(),t._trigger("focus")})),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).trigger("focus")},_restoreTabbableFocus:function(){var t=e.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===t||e.contains(this.uiDialog[0],t)||this._focusTabbable()},_keepFocus:function(e){e.preventDefault(),this._restoreTabbableFocus(),this._delay(this._restoreTabbableFocus)},_createWrapper:function(){this.uiDialog=e("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var r=this.uiDialog.find(":tabbable"),n=r.first(),i=r.last();t.target!==i[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay((function(){i.trigger("focus")})),t.preventDefault()):(this._delay((function(){n.trigger("focus")})),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:e("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(t,"ui-dialog-title"),this._title(t),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title?e.text(this.options.title):e.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var t=this,r=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(r)||Array.isArray(r)&&!r.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(e.each(r,(function(r,n){var i,o;n="function"==typeof n?{click:n,text:r}:n,n=e.extend({type:"button"},n),i=n.click,o={icon:n.icon,iconPosition:n.iconPosition,showLabel:n.showLabel,icons:n.icons,text:n.text},delete n.click,delete n.icon,delete n.iconPosition,delete n.showLabel,delete n.icons,"boolean"==typeof n.text&&delete n.text,e("<button></button>",n).button(o).appendTo(t.uiButtonSet).on("click",(function(){i.apply(t.element[0],arguments)}))})),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var t=this,r=this.options;function n(e){return{position:e.position,offset:e.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(r,i){t._addClass(e(this),"ui-dialog-dragging"),t._blockFrames(),t._trigger("dragStart",r,n(i))},drag:function(e,r){t._trigger("drag",e,n(r))},stop:function(i,o){var s=o.offset.left-t.document.scrollLeft(),a=o.offset.top-t.document.scrollTop();r.position={my:"left top",at:"left"+(s>=0?"+":"")+s+" top"+(a>=0?"+":"")+a,of:t.window},t._removeClass(e(this),"ui-dialog-dragging"),t._unblockFrames(),t._trigger("dragStop",i,n(o))}})},_makeResizable:function(){var t=this,r=this.options,n=r.resizable,i=this.uiDialog.css("position"),o="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";function s(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:r.maxWidth,maxHeight:r.maxHeight,minWidth:r.minWidth,minHeight:this._minHeight(),handles:o,start:function(r,n){t._addClass(e(this),"ui-dialog-resizing"),t._blockFrames(),t._trigger("resizeStart",r,s(n))},resize:function(e,r){t._trigger("resize",e,s(r))},stop:function(n,i){var o=t.uiDialog.offset(),a=o.left-t.document.scrollLeft(),l=o.top-t.document.scrollTop();r.height=t.uiDialog.height(),r.width=t.uiDialog.width(),r.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(l>=0?"+":"")+l,of:t.window},t._removeClass(e(this),"ui-dialog-resizing"),t._unblockFrames(),t._trigger("resizeStop",n,s(i))}}).css("position",i)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),r=e.inArray(this,t);-1!==r&&t.splice(r,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var r=this,n=!1,i={};e.each(t,(function(e,t){r._setOption(e,t),e in r.sizeRelatedOptions&&(n=!0),e in r.resizableRelatedOptions&&(i[e]=t)})),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",i)},_setOption:function(t,r){var n,i,o=this.uiDialog;"disabled"!==t&&(this._super(t,r),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:e("<a>").text(""+this.options.closeText).html()}),"draggable"===t&&((n=o.is(":data(ui-draggable)"))&&!r&&o.draggable("destroy"),!n&&r&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((i=o.is(":data(ui-resizable)"))&&!r&&o.resizable("destroy"),i&&"string"==typeof r&&o.resizable("option","handles",r),i||!1===r||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,r,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),t=Math.max(0,n.minHeight-e),r="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none","auto"===n.height?this.element.css({minHeight:t,maxHeight:r,height:"auto"}):this.element.height(Math.max(0,n.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map((function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog").length||!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=e.fn.jquery.substring(0,4),r=!0;this._delay((function(){r=!1})),this.document.data("ui-dialog-overlays")||this.document.on("focusin.ui-dialog",function(e){if(!r){var n=this._trackingInstances()[0];n._allowInteraction(e)||(e.preventDefault(),n._focusTabbable(),"3.4."!==t&&"3.5."!==t||n._delay(n._restoreTabbableFocus))}}.bind(this)),this.overlay=e("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):(this.document.off("focusin.ui-dialog"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==e.uiBackCompat&&e.widget("ui.dialog",e.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(e,t){"dialogClass"===e&&this.uiDialog.removeClass(this.options.dialogClass).addClass(t),this._superApply(arguments)}});e.ui.dialog;e.widget("ui.droppable",{version:"1.13.2",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,t=this.options,r=t.accept;this.isover=!1,this.isout=!0,this.accept="function"==typeof r?r:function(e){return e.is(r)},this.proportions=function(){if(!arguments.length)return e||(e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});e=arguments[0]},this._addToManager(t.scope),t.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,r){if("accept"===t)this.accept="function"==typeof r?r:function(e){return e.is(r)};else if("scope"===t){var n=e.ui.ddmanager.droppables[this.options.scope];this._splice(n),this._addToManager(r)}this._super(t,r)},_activate:function(t){var r=e.ui.ddmanager.current;this._addActiveClass(),r&&this._trigger("activate",t,this.ui(r))},_deactivate:function(t){var r=e.ui.ddmanager.current;this._removeActiveClass(),r&&this._trigger("deactivate",t,this.ui(r))},_over:function(t){var r=e.ui.ddmanager.current;r&&(r.currentItem||r.element)[0]!==this.element[0]&&this.accept.call(this.element[0],r.currentItem||r.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(r)))},_out:function(t){var r=e.ui.ddmanager.current;r&&(r.currentItem||r.element)[0]!==this.element[0]&&this.accept.call(this.element[0],r.currentItem||r.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(r)))},_drop:function(t,r){var n=r||e.ui.ddmanager.current,i=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each((function(){var r=e(this).droppable("instance");if(r.options.greedy&&!r.options.disabled&&r.options.scope===n.options.scope&&r.accept.call(r.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(r,{offset:r.element.offset()}),r.options.tolerance,t))return i=!0,!1})),!i&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",t,this.ui(n)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}}),e.ui.intersect=function(){function e(e,t,r){return e>=t&&e<t+r}return function(t,r,n,i){if(!r.offset)return!1;var o=(t.positionAbs||t.position.absolute).left+t.margins.left,s=(t.positionAbs||t.position.absolute).top+t.margins.top,a=o+t.helperProportions.width,l=s+t.helperProportions.height,u=r.offset.left,c=r.offset.top,h=u+r.proportions().width,d=c+r.proportions().height;switch(n){case"fit":return u<=o&&a<=h&&c<=s&&l<=d;case"intersect":return u<o+t.helperProportions.width/2&&a-t.helperProportions.width/2<h&&c<s+t.helperProportions.height/2&&l-t.helperProportions.height/2<d;case"pointer":return e(i.pageY,c,r.proportions().height)&&e(i.pageX,u,r.proportions().width);case"touch":return(s>=c&&s<=d||l>=c&&l<=d||s<c&&l>d)&&(o>=u&&o<=h||a>=u&&a<=h||o<u&&a>h);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,r){var n,i,o=e.ui.ddmanager.droppables[t.options.scope]||[],s=r?r.type:null,a=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(n=0;n<o.length;n++)if(!(o[n].options.disabled||t&&!o[n].accept.call(o[n].element[0],t.currentItem||t.element))){for(i=0;i<a.length;i++)if(a[i]===o[n].element[0]){o[n].proportions().height=0;continue e}o[n].visible="none"!==o[n].element.css("display"),o[n].visible&&("mousedown"===s&&o[n]._activate.call(o[n],r),o[n].offset=o[n].element.offset(),o[n].proportions({width:o[n].element[0].offsetWidth,height:o[n].element[0].offsetHeight}))}},drop:function(t,r){var n=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),(function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,r)&&(n=this._drop.call(this,r)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,r)))})),n},dragStart:function(t,r){t.element.parentsUntil("body").on("scroll.droppable",(function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,r)}))},drag:function(t,r){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,r),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],(function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,i,o,s=e.ui.intersect(t,this,this.options.tolerance,r),a=!s&&this.isover?"isout":s&&!this.isover?"isover":null;a&&(this.options.greedy&&(i=this.options.scope,(o=this.element.parents(":data(ui-droppable)").filter((function(){return e(this).droppable("instance").options.scope===i}))).length&&((n=e(o[0]).droppable("instance")).greedyChild="isover"===a)),n&&"isover"===a&&(n.isover=!1,n.isout=!0,n._out.call(n,r)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,r),n&&"isout"===a&&(n.isout=!1,n.isover=!0,n._over.call(n,r)))}}))},dragStop:function(t,r){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,r)}},!1!==e.uiBackCompat&&e.widget("ui.droppable",e.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});e.ui.droppable,e.widget("ui.progressbar",{version:"1.13.2",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=e("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(e){if(void 0===e)return this.options.value;this.options.value=this._constrainedValue(e),this._refreshValue()},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=!1===e,"number"!=typeof e&&(e=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",e),this._toggleClass(null,"ui-state-disabled",!!e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,r=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).width(r.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,t===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),e.widget("ui.selectable",e.ui.mouse,{version:"1.13.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t.elementPos=e(t.element[0]).offset(),t.selectees=e(t.options.filter,t.element[0]),t._addClass(t.selectees,"ui-selectee"),t.selectees.each((function(){var r=e(this),n=r.offset(),i={left:n.left-t.elementPos.left,top:n.top-t.elementPos.top};e.data(this,"selectable-item",{element:this,$element:r,left:i.left,top:i.top,right:i.left+r.outerWidth(),bottom:i.top+r.outerHeight(),startselected:!1,selected:r.hasClass("ui-selected"),selecting:r.hasClass("ui-selecting"),unselecting:r.hasClass("ui-unselecting")})}))},this.refresh(),this._mouseInit(),this.helper=e("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(t){var r=this,n=this.options;this.opos=[t.pageX,t.pageY],this.elementPos=e(this.element[0]).offset(),this.options.disabled||(this.selectees=e(n.filter,this.element[0]),this._trigger("start",t),e(n.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each((function(){var n=e.data(this,"selectable-item");n.startselected=!0,t.metaKey||t.ctrlKey||(r._removeClass(n.$element,"ui-selected"),n.selected=!1,r._addClass(n.$element,"ui-unselecting"),n.unselecting=!0,r._trigger("unselecting",t,{unselecting:n.element}))})),e(t.target).parents().addBack().each((function(){var n,i=e.data(this,"selectable-item");if(i)return n=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected"),r._removeClass(i.$element,n?"ui-unselecting":"ui-selected")._addClass(i.$element,n?"ui-selecting":"ui-unselecting"),i.unselecting=!n,i.selecting=n,i.selected=n,n?r._trigger("selecting",t,{selecting:i.element}):r._trigger("unselecting",t,{unselecting:i.element}),!1})))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var r,n=this,i=this.options,o=this.opos[0],s=this.opos[1],a=t.pageX,l=t.pageY;return o>a&&(r=a,a=o,o=r),s>l&&(r=l,l=s,s=r),this.helper.css({left:o,top:s,width:a-o,height:l-s}),this.selectees.each((function(){var r=e.data(this,"selectable-item"),u=!1,c={};r&&r.element!==n.element[0]&&(c.left=r.left+n.elementPos.left,c.right=r.right+n.elementPos.left,c.top=r.top+n.elementPos.top,c.bottom=r.bottom+n.elementPos.top,"touch"===i.tolerance?u=!(c.left>a||c.right<o||c.top>l||c.bottom<s):"fit"===i.tolerance&&(u=c.left>o&&c.right<a&&c.top>s&&c.bottom<l),u?(r.selected&&(n._removeClass(r.$element,"ui-selected"),r.selected=!1),r.unselecting&&(n._removeClass(r.$element,"ui-unselecting"),r.unselecting=!1),r.selecting||(n._addClass(r.$element,"ui-selecting"),r.selecting=!0,n._trigger("selecting",t,{selecting:r.element}))):(r.selecting&&((t.metaKey||t.ctrlKey)&&r.startselected?(n._removeClass(r.$element,"ui-selecting"),r.selecting=!1,n._addClass(r.$element,"ui-selected"),r.selected=!0):(n._removeClass(r.$element,"ui-selecting"),r.selecting=!1,r.startselected&&(n._addClass(r.$element,"ui-unselecting"),r.unselecting=!0),n._trigger("unselecting",t,{unselecting:r.element}))),r.selected&&(t.metaKey||t.ctrlKey||r.startselected||(n._removeClass(r.$element,"ui-selected"),r.selected=!1,n._addClass(r.$element,"ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element})))))})),!1}},_mouseStop:function(t){var r=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each((function(){var n=e.data(this,"selectable-item");r._removeClass(n.$element,"ui-unselecting"),n.unselecting=!1,n.startselected=!1,r._trigger("unselected",t,{unselected:n.element})})),e(".ui-selecting",this.element[0]).each((function(){var n=e.data(this,"selectable-item");r._removeClass(n.$element,"ui-selecting")._addClass(n.$element,"ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,r._trigger("selected",t,{selected:n.element})})),this._trigger("stop",t),this.helper.remove(),!1}}),e.widget("ui.selectmenu",[e.ui.formResetMixin,{version:"1.13.2",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=e()},_drawButton:function(){var t,r=this,n=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(e){this.button.trigger("focus"),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),t=e("<span>").appendTo(this.button),this._addClass(t,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(n).appendTo(this.button),!1!==this.options.width&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",(function(){r._rendered||r._refreshMenu()}))},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(e,r){e.preventDefault(),t._setSelection(),t._select(r.item.data("ui-selectmenu-item"),e)},focus:function(e,r){var n=r.item.data("ui-selectmenu-item");null!=t.focusIndex&&n.index!==t.focusIndex&&(t._trigger("focus",e,{item:n}),t.isOpen||t._select(n,e)),t.focusIndex=n.index,t.button.attr("aria-activedescendant",t.menuItems.eq(n.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var e,t=this.element.find("option");this.menu.empty(),this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,t.length&&(e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e)))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(t){var r=e("<span>");return this._setText(r,t.label),this._addClass(r,"ui-selectmenu-text"),r},_renderMenu:function(t,r){var n=this,i="";e.each(r,(function(r,o){var s;o.optgroup!==i&&(s=e("<li>",{text:o.optgroup}),n._addClass(s,"ui-selectmenu-optgroup","ui-menu-divider"+(o.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),s.appendTo(t),i=o.optgroup),n._renderItemData(t,o)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,r){var n=e("<li>"),i=e("<div>",{title:r.element.attr("title")});return r.disabled&&this._addClass(n,null,"ui-state-disabled"),this._setText(i,r.label),n.append(i).appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var r,n,i=".ui-menu-item";this.isOpen?r=this.menuItems.eq(this.focusIndex).parent("li"):(r=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),i+=":not(.ui-state-disabled)"),(n="first"===e||"last"===e?r["first"===e?"prevAll":"nextAll"](i).eq(-1):r[e+"All"](i).eq(0)).length&&this.menuInstance.focus(t,n)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?((e=window.getSelection()).removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.trigger("focus"))},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+e.escapeSelector(this.ids.button)).length||this.close(t))}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection()).rangeCount&&(this.range=e.getRangeAt(0)):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(t){var r=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),r=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),r=!1}r&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex).parent("li");t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var r=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(e)),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==r&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){if("icons"===e){var r=this.button.find("span.ui-icon");this._removeClass(r,null,this.options.icons.button)._addClass(r,null,t.button)}this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"width"===e&&this._resizeButton()},_setOptionDisabled:function(e){this._super(e),this.menuInstance.option("disabled",e),this.button.attr("aria-disabled",e),this._toggleClass(this.button,null,"ui-state-disabled",e),this.element.prop("disabled",e),e?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;!1!==e?(null===e&&(e=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(e)):this.button.css("width","")},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var e=this._super();return e.disabled=this.element.prop("disabled"),e},_parseOptions:function(t){var r=this,n=[];t.each((function(t,i){i.hidden||n.push(r._parseOption(e(i),t))})),this.items=n},_parseOption:function(e,t){var r=e.parent("optgroup");return{element:e,index:t,value:e.val(),label:e.text(),optgroup:r.attr("label")||"",disabled:r.prop("disabled")||e.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),e.widget("ui.slider",e.ui.mouse,{version:"1.13.2",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,r,n=this.options,i=this.element.find(".ui-slider-handle"),o="<span tabindex='0'></span>",s=[];for(r=n.values&&n.values.length||1,i.length>r&&(i.slice(r).remove(),i=i.slice(0,r)),t=i.length;t<r;t++)s.push(o);this.handles=i.add(e(s.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each((function(t){e(this).data("ui-slider-handle-index",t).attr("tabIndex",0)}))},_createRange:function(){var t=this.options;t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:Array.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=e("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==t.range&&"max"!==t.range||this._addClass(this.range,"ui-slider-range-"+t.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(t){var r,n,i,o,s,a,l,u=this,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),r={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(r),i=this._valueMax()-this._valueMin()+1,this.handles.each((function(t){var r=Math.abs(n-u.values(t));(i>r||i===r&&(t===u._lastChangedValue||u.values(t)===c.min))&&(i=r,o=e(this),s=t)})),!1!==this._start(t,s)&&(this._mouseSliding=!0,this._handleIndex=s,this._addClass(o,null,"ui-state-active"),o.trigger("focus"),a=o.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-a.left-o.width()/2,top:t.pageY-a.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,s,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},r=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,r),!1},_mouseStop:function(e){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,r,n,i,o;return"horizontal"===this.orientation?(t=this.elementSize.width,r=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,r=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(n=r/t)>1&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),i=this._valueMax()-this._valueMin(),o=this._valueMin()+n*i,this._trimAlignValue(o)},_uiHash:function(e,t,r){var n={handle:this.handles[e],handleIndex:e,value:void 0!==t?t:this.value()};return this._hasMultipleValues()&&(n.value=void 0!==t?t:this.values(e),n.values=r||this.values()),n},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,r){var n,i=this.value(),o=this.values();this._hasMultipleValues()&&(n=this.values(t?0:1),i=this.values(t),2===this.options.values.length&&!0===this.options.range&&(r=0===t?Math.min(n,r):Math.max(n,r)),o[t]=r),r!==i&&!1!==this._trigger("slide",e,this._uiHash(t,r,o))&&(this._hasMultipleValues()?this.values(t,r):this.value(r))},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){this._keySliding||this._mouseSliding||(this._lastChangedValue=t,this._trigger("change",e,this._uiHash(t)))},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,t){var r,n,i;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(t),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!Array.isArray(arguments[0]))return this._hasMultipleValues()?this._values(e):this.value();for(r=this.options.values,n=arguments[0],i=0;i<r.length;i+=1)r[i]=this._trimAlignValue(n[i]),this._change(null,i);this._refreshValue()},_setOption:function(e,t){var r,n=0;switch("range"===e&&!0===this.options.range&&("min"===t?(this.options.value=this._values(0),this.options.values=null):"max"===t&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),Array.isArray(this.options.values)&&(n=this.options.values.length),this._super(e,t),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(t),this.handles.css("horizontal"===t?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),r=n-1;r>=0;r--)this._change(null,r);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(e){this._super(e),this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,r,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this._hasMultipleValues()){for(r=this.options.values.slice(),n=0;n<r.length;n+=1)r[n]=this._trimAlignValue(r[n]);return r}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,r=(e-this._valueMin())%t,n=e-r;return 2*Math.abs(r)>=t&&(n+=r>0?t:-t),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),r=this.options.step;(e=Math.round((e-t)/r)*r+t)>this.options.max&&(e-=r),this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),r=t.indexOf(".");return-1===r?0:t.length-r-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){"vertical"===e&&this.range.css({width:"",left:""}),"horizontal"===e&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var t,r,n,i,o,s=this.options.range,a=this.options,l=this,u=!this._animateOff&&a.animate,c={};this._hasMultipleValues()?this.handles.each((function(n){r=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=r+"%",e(this).stop(1,1)[u?"animate":"css"](c,a.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[u?"animate":"css"]({left:r+"%"},a.animate),1===n&&l.range[u?"animate":"css"]({width:r-t+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[u?"animate":"css"]({bottom:r+"%"},a.animate),1===n&&l.range[u?"animate":"css"]({height:r-t+"%"},{queue:!1,duration:a.animate}))),t=r})):(n=this.value(),i=this._valueMin(),o=this._valueMax(),r=o!==i?(n-i)/(o-i)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=r+"%",this.handle.stop(1,1)[u?"animate":"css"](c,a.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:r+"%"},a.animate),"max"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:100-r+"%"},a.animate),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:r+"%"},a.animate),"max"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:100-r+"%"},a.animate))},_handleEvents:{keydown:function(t){var r,n,i,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(e(t.target),null,"ui-state-active"),!1===this._start(t,o)))return}switch(i=this.options.step,r=n=this._hasMultipleValues()?this.values(o):this.value(),t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(r+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(r-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(r===this._valueMax())return;n=this._trimAlignValue(r+i);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(r===this._valueMin())return;n=this._trimAlignValue(r-i)}this._slide(t,o,n)},keyup:function(t){var r=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,r),this._change(t,r),this._removeClass(e(t.target),null,"ui-state-active"))}}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.13.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,r){return e>=t&&e<t+r},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),e.each(this.items,(function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")}))},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,r){var n=null,i=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each((function(){if(e.data(this,o.widgetName+"-item")===o)return n=e(this),!1})),e.data(t.target,o.widgetName+"-item")===o&&(n=e(t.target)),!!n&&(!(this.options.handle&&!r&&(e(this.options.handle,n).find("*").addBack().each((function(){this===t.target&&(i=!0)})),!i))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,r,n){var i,o,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.appendTo=e("parent"!==s.appendTo?s.appendTo:this.currentItem.parent()),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),this.scrollParent=this.placeholder.scrollParent(),e.extend(this.offset,{parent:this._getParentOffset()}),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",s.cursor),this.storedStylesheet=e("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(o)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this.helper.parent().is(this.appendTo)||(this.helper.detach().appendTo(this.appendTo),this.offset.parent=this._getParentOffset()),this.position=this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,this.lastPositionAbs=this.positionAbs=this._convertPositionTo("absolute"),this._mouseDrag(t),!0},_scroll:function(e){var t=this.options,r=!1;return this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<t.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+t.scrollSpeed:e.pageY-this.overflowOffset.top<t.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-t.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<t.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+t.scrollSpeed:e.pageX-this.overflowOffset.left<t.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-t.scrollSpeed)):(e.pageY-this.document.scrollTop()<t.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-t.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<t.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+t.scrollSpeed)),e.pageX-this.document.scrollLeft()<t.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-t.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<t.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+t.scrollSpeed))),r},_mouseDrag:function(t){var r,n,i,o,s=this.options;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),s.scroll&&!1!==this._scroll(t)&&(this._refreshItemPositions(!0),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.dragDirection={vertical:this._getDragVerticalDirection(),horizontal:this._getDragHorizontalDirection()},r=this.items.length-1;r>=0;r--)if(i=(n=this.items[r]).item[0],(o=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&!(i===this.currentItem[0]||this.placeholder[1===o?"next":"prev"]()[0]===i||e.contains(this.placeholder[0],i)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],i))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,r){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,i=this.placeholder.offset(),o=this.options.axis,s={};o&&"x"!==o||(s.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(s.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(s,parseInt(this.options.revert,10)||500,(function(){n._clear(t)}))}else this._clear(t,r);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new e.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var r=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(r).each((function(){var r=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);r&&n.push((t.key||r[1]+"[]")+"="+(t.key&&t.expression?r[1]:r[2]))})),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var r=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},r.each((function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")})),n},_intersectsWith:function(e){var t=this.positionAbs.left,r=t+this.helperProportions.width,n=this.positionAbs.top,i=n+this.helperProportions.height,o=e.left,s=o+e.width,a=e.top,l=a+e.height,u=this.offset.click.top,c=this.offset.click.left,h="x"===this.options.axis||n+u>a&&n+u<l,d="y"===this.options.axis||t+c>o&&t+c<s,f=h&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?f:o<t+this.helperProportions.width/2&&r-this.helperProportions.width/2<s&&a<n+this.helperProportions.height/2&&i-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t,r,n="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width);return!(!n||!i)&&(t=this.dragDirection.vertical,r=this.dragDirection.horizontal,this.floating?"right"===r||"down"===t?2:1:t&&("down"===t?2:1))},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),r=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),n=this.dragDirection.vertical,i=this.dragDirection.horizontal;return this.floating&&i?"right"===i&&r||"left"===i&&!r:n&&("down"===n&&t||"up"===n&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var r,n,i,o,s=[],a=[],l=this._connectWith();if(l&&t)for(r=l.length-1;r>=0;r--)for(n=(i=e(l[r],this.document[0])).length-1;n>=0;n--)(o=e.data(i[n],this.widgetFullName))&&o!==this&&!o.options.disabled&&a.push(["function"==typeof o.options.items?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);function u(){s.push(this)}for(a.push(["function"==typeof this.options.items?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),r=a.length-1;r>=0;r--)a[r][0].each(u);return e(s)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,(function(e){for(var r=0;r<t.length;r++)if(t[r]===e.item[0])return!1;return!0}))},_refreshItems:function(t){this.items=[],this.containers=[this];var r,n,i,o,s,a,l,u,c=this.items,h=[["function"==typeof this.options.items?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(r=d.length-1;r>=0;r--)for(n=(i=e(d[r],this.document[0])).length-1;n>=0;n--)(o=e.data(i[n],this.widgetFullName))&&o!==this&&!o.options.disabled&&(h.push(["function"==typeof o.options.items?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]),this.containers.push(o));for(r=h.length-1;r>=0;r--)for(s=h[r][1],n=0,u=(a=h[r][0]).length;n<u;n++)(l=e(a[n])).data(this.widgetName+"-item",s),c.push({item:l,instance:s,width:0,height:0,left:0,top:0})},_refreshItemPositions:function(t){var r,n,i,o;for(r=this.items.length-1;r>=0;r--)n=this.items[r],this.currentContainer&&n.instance!==this.currentContainer&&n.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=i.outerWidth(),n.height=i.outerHeight()),o=i.offset(),n.left=o.left,n.top=o.top)},refreshPositions:function(e){var t,r;if(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),this._refreshItemPositions(e),this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(t=this.containers.length-1;t>=0;t--)r=this.containers[t].element.offset(),this.containers[t].containerCache.left=r.left,this.containers[t].containerCache.top=r.top,this.containers[t].containerCache.width=this.containers[t].element.outerWidth(),this.containers[t].containerCache.height=this.containers[t].element.outerHeight();return this},_createPlaceholder:function(t){var r,n,i=(t=t||this).options;i.placeholder&&i.placeholder.constructor!==String||(r=i.placeholder,n=t.currentItem[0].nodeName.toLowerCase(),i.placeholder={element:function(){var i=e("<"+n+">",t.document[0]);return t._addClass(i,"ui-sortable-placeholder",r||t.currentItem[0].className)._removeClass(i,"ui-sortable-helper"),"tbody"===n?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(i)):"tr"===n?t._createTrPlaceholder(t.currentItem,i):"img"===n&&i.attr("src",t.currentItem.attr("src")),r||i.css("visibility","hidden"),i},update:function(e,o){r&&!i.forcePlaceholderSize||(o.height()&&(!i.forcePlaceholderSize||"tbody"!==n&&"tr"!==n)||o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,r){var n=this;t.children().each((function(){e("<td>&#160;</td>",n.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(r)}))},_contactContainers:function(t){var r,n,i,o,s,a,l,u,c,h,d=null,f=null;for(r=this.containers.length-1;r>=0;r--)if(!e.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(d&&e.contains(this.containers[r].element[0],d.element[0]))continue;d=this.containers[r],f=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",t,this._uiHash(this)),this.containers[r].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[f].containerCache.over||(this.containers[f]._trigger("over",t,this._uiHash(this)),this.containers[f].containerCache.over=1);else{for(i=1e4,o=null,s=(c=d.floating||this._isFloating(this.currentItem))?"left":"top",a=c?"width":"height",h=c?"pageX":"pageY",n=this.items.length-1;n>=0;n--)e.contains(this.containers[f].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(l=this.items[n].item.offset()[s],u=!1,t[h]-l>this.items[n][a]/2&&(u=!0),Math.abs(t[h]-l)<i&&(i=Math.abs(t[h]-l),o=this.items[n],this.direction=u?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[f])return void(this.currentContainer.containerCache.over||(this.containers[f]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[f].element,!0),this._trigger("change",t,this._uiHash()),this.containers[f]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[f],this.options.placeholder.update(this.currentContainer,this.placeholder),this.scrollParent=this.placeholder.scrollParent(),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this.containers[f]._trigger("over",t,this._uiHash(this)),this.containers[f].containerCache.over=1}},_createHelper:function(t){var r=this.options,n="function"==typeof r.helper?e(r.helper.apply(this.element[0],[t,this.currentItem])):"clone"===r.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||this.appendTo[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!r.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!r.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),Array.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,r,n,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),"document"!==i.containment&&"window"!==i.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],r=e(i.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[r.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,r.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,r){r||(r=this.position);var n="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(i[0].tagName);return{top:r.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:i.scrollTop())*n,left:r.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:i.scrollLeft())*n}},_generatePosition:function(t){var r,n,i=this.options,o=t.pageX,s=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),i.grid&&(r=this.originalPageY+Math.round((s-this.originalPageY)/i.grid[1])*i.grid[1],s=this.containment?r-this.offset.click.top>=this.containment[1]&&r-this.offset.click.top<=this.containment[3]?r:r-this.offset.click.top>=this.containment[1]?r-i.grid[1]:r+i.grid[1]:r,n=this.originalPageX+Math.round((o-this.originalPageX)/i.grid[0])*i.grid[0],o=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-i.grid[0]:n+i.grid[0]:n)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,r,n){r?r[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay((function(){i===this.counter&&this.refreshPositions(!n)}))},_clear:function(e,t){this.reverting=!1;var r,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(r in this._storedCSS)"auto"!==this._storedCSS[r]&&"static"!==this._storedCSS[r]||(this._storedCSS[r]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function i(e,t,r){return function(n){r._trigger(e,n,t._uiHash(t))}}for(this.fromOutside&&!t&&n.push((function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))})),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push((function(e){this._trigger("update",e,this._uiHash())})),this!==this.currentContainer&&(t||(n.push((function(e){this._trigger("remove",e,this._uiHash())})),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),r=this.containers.length-1;r>=0;r--)t||n.push(i("deactivate",this,this.containers[r])),this.containers[r].containerCache.over&&(n.push(i("out",this,this.containers[r])),this.containers[r].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(r=0;r<n.length;r++)n[r].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var r=t||this;return{helper:r.helper,placeholder:r.placeholder||e([]),position:r.position,originalPosition:r.originalPosition,offset:r.positionAbs,item:r.currentItem,sender:t?t.element:null}}});function L(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.13.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t=this._super(),r=this.element;return e.each(["min","max","step"],(function(e,n){var i=r.attr(n);null!=i&&i.length&&(t[n]=i)})),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e))},mousewheel:function(t,r){var n=e.ui.safeActiveElement(this.document[0]);if(this.element[0]===n&&r){if(!this.spinning&&!this._start(t))return!1;this._spin((r>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay((function(){this.spinning&&this._stop(t)}),100),t.preventDefault()}},"mousedown .ui-spinner-button":function(t){var r;function n(){this.element[0]===e.ui.safeActiveElement(this.document[0])||(this.element.trigger("focus"),this.previous=r,this._delay((function(){this.previous=r})))}r=this.element[0]===e.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),t.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur,n.call(this)})),!1!==this._start(t)&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(e(t.currentTarget).hasClass("ui-state-active"))return!1!==this._start(t)&&void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(t){var r=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,r.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-r.page,t),!0}return!1},_start:function(e){return!(!this.spinning&&!1===this._trigger("start",e))&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,r){e=e||500,clearTimeout(this.timer),this.timer=this._delay((function(){this._repeat(40,t,r)}),e),this._spin(t*this.options.step,r)},_spin:function(e,t){var r=this.value()||0;this.counter||(this.counter=1),r=this._adjustValue(r+e*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",t,{value:r})||(this._value(r),this.counter++)},_increment:function(e){var t=this.options.incremental;return t?"function"==typeof t?t(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),r=t.indexOf(".");return-1===r?0:t.length-r-1},_adjustValue:function(e){var t,r,n=this.options;return r=e-(t=null!==n.min?n.min:0),e=t+(r=Math.round(r/n.step)*n.step),e=parseFloat(e.toFixed(this._precision())),null!==n.max&&e>n.max?n.max:null!==n.min&&e<n.min?n.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){var r,n,i;if("culture"===e||"numberFormat"===e)return r=this._parse(this.element.val()),this.options[e]=t,void this.element.val(this._format(r));"max"!==e&&"min"!==e&&"step"!==e||"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(n=this.buttons.first().find(".ui-icon"),this._removeClass(n,null,this.options.icons.up),this._addClass(n,null,t.up),i=this.buttons.last().find(".ui-icon"),this._removeClass(i,null,this.options.icons.down),this._addClass(i,null,t.down)),this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!e),this.element.prop("disabled",!!e),this.buttons.button(e?"disable":"enable")},_setOptions:L((function(e){this._super(e)})),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null!==e&&e===this._adjustValue(e)},_value:function(e,t){var r;""!==e&&null!==(r=this._parse(e))&&(t||(r=this._adjustValue(r)),e=this._format(r)),this.element.val(e),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:L((function(e){this._stepUp(e)})),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:L((function(e){this._stepDown(e)})),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:L((function(e){this._stepUp((e||1)*this.options.page)})),pageDown:L((function(e){this._stepDown((e||1)*this.options.page)})),value:function(e){if(!arguments.length)return this._parse(this.element.val());L(this._value).call(this,e)},widget:function(){return this.uiSpinner}}),!1!==e.uiBackCompat&&e.widget("ui.spinner",e.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}});e.ui.spinner;e.widget("ui.tabs",{version:"1.13.2",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var r,n;r=t.href.replace(e,""),n=location.href.replace(e,"");try{r=decodeURIComponent(r)}catch(e){}try{n=decodeURIComponent(n)}catch(e){}return t.hash.length>1&&r===n}}(),_create:function(){var t=this,r=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,r.collapsible),this._processTabs(),r.active=this._initialActive(),Array.isArray(r.disabled)&&(r.disabled=e.uniqueSort(r.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),(function(e){return t.tabs.index(e)})))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(r.active):this.active=e(),this._refresh(),this.active.length&&this.load(r.active)},_initialActive:function(){var t=this.options.active,r=this.options.collapsible,n=location.hash.substring(1);return null===t&&(n&&this.tabs.each((function(r,i){if(e(i).attr("aria-controls")===n)return t=r,!1})),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==t&&-1!==t||(t=!!this.tabs.length&&0)),!1!==t&&-1===(t=this.tabs.index(this.tabs.eq(t)))&&(t=!r&&0),!r&&!1===t&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var r=e(e.ui.safeActiveElement(this.document[0])).closest("li"),n=this.tabs.index(r),i=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:i=!1,n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,i),t.ctrlKey||t.metaKey||(r.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay((function(){this.option("active",n)}),this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,r){var n=this.tabs.length-1;function i(){return t>n&&(t=0),t<0&&(t=n),t}for(;-1!==e.inArray(i(),this.options.disabled);)t=r?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).trigger("focus"),e},_setOption:function(e,t){"active"!==e?(this._super(e,t),"collapsible"===e&&(this._toggleClass("ui-tabs-collapsible",null,t),t||!1!==this.options.active||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t)):this._activate(t)},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,r=this.tablist.children(":has(a[href])");t.disabled=e.map(r.filter(".ui-state-disabled"),(function(e){return r.index(e)})),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,r=this.tabs,n=this.anchors,i=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",(function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()})).on("focus"+this.eventNamespace,".ui-tabs-anchor",(function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()})),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map((function(){return e("a",this)[0]})).attr({tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=e(),this.anchors.each((function(r,n){var i,o,s,a=e(n).uniqueId().attr("id"),l=e(n).closest("li"),u=l.attr("aria-controls");t._isLocal(n)?(s=(i=n.hash).substring(1),o=t.element.find(t._sanitizeSelector(i))):(i="#"+(s=l.attr("aria-controls")||e({}).uniqueId()[0].id),(o=t.element.find(i)).length||(o=t._createPanel(s)).insertAfter(t.panels[r-1]||t.tablist),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),u&&l.data("ui-tabs-aria-controls",u),l.attr({"aria-controls":s,"aria-labelledby":a}),o.attr("aria-labelledby",a)})),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),r&&(this._off(r.not(this.tabs)),this._off(n.not(this.anchors)),this._off(i.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(t){var r,n,i;for(Array.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1),i=0;n=this.tabs[i];i++)r=e(n),!0===t||-1!==e.inArray(i,t)?(r.attr("aria-disabled","true"),this._addClass(r,null,"ui-state-disabled")):(r.removeAttr("aria-disabled"),this._removeClass(r,null,"ui-state-disabled"));this.options.disabled=t,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===t)},_setupEvents:function(t){var r={};t&&e.each(t.split(" "),(function(e,t){r[t]="_eventHandler"})),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,r),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var r,n=this.element.parent();"fill"===t?(r=n.height(),r-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each((function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(r-=t.outerHeight(!0))})),this.element.children().not(this.panels).each((function(){r-=e(this).outerHeight(!0)})),this.panels.each((function(){e(this).height(Math.max(0,r-e(this).innerHeight()+e(this).height()))})).css("overflow","auto")):"auto"===t&&(r=0,this.panels.each((function(){r=Math.max(r,e(this).height("").height())})).height(r))},_eventHandler:function(t){var r=this.options,n=this.active,i=e(t.currentTarget).closest("li"),o=i[0]===n[0],s=o&&r.collapsible,a=s?e():this._getPanelForTab(i),l=n.length?this._getPanelForTab(n):e(),u={oldTab:n,oldPanel:l,newTab:s?e():i,newPanel:a};t.preventDefault(),i.hasClass("ui-state-disabled")||i.hasClass("ui-tabs-loading")||this.running||o&&!r.collapsible||!1===this._trigger("beforeActivate",t,u)||(r.active=!s&&this.tabs.index(i),this.active=o?e():i,this.xhr&&this.xhr.abort(),l.length||a.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(i),t),this._toggle(t,u))},_toggle:function(t,r){var n=this,i=r.newPanel,o=r.oldPanel;function s(){n.running=!1,n._trigger("activate",t,r)}function a(){n._addClass(r.newTab.closest("li"),"ui-tabs-active","ui-state-active"),i.length&&n.options.show?n._show(i,n.options.show,s):(i.show(),s())}this.running=!0,o.length&&this.options.hide?this._hide(o,this.options.hide,(function(){n._removeClass(r.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),a()})):(this._removeClass(r.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),o.hide(),a()),o.attr("aria-hidden","true"),r.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&o.length?r.oldTab.attr("tabIndex",-1):i.length&&this.tabs.filter((function(){return 0===e(this).attr("tabIndex")})).attr("tabIndex",-1),i.attr("aria-hidden","false"),r.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var r,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),r=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:r,currentTarget:r,preventDefault:e.noop}))},_findActive:function(t){return!1===t?e():this.tabs.eq(t)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+e.escapeSelector(t)+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each((function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")})),this.tabs.each((function(){var t=e(this),r=t.data("ui-tabs-aria-controls");r?t.attr("aria-controls",r).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")})),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var r=this.options.disabled;!1!==r&&(void 0===t?r=!1:(t=this._getIndex(t),r=Array.isArray(r)?e.map(r,(function(e){return e!==t?e:null})):e.map(this.tabs,(function(e,r){return r!==t?r:null}))),this._setOptionDisabled(r))},disable:function(t){var r=this.options.disabled;if(!0!==r){if(void 0===t)r=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,r))return;r=Array.isArray(r)?e.merge([t],r).sort():[t]}this._setOptionDisabled(r)}},load:function(t,r){t=this._getIndex(t);var n=this,i=this.tabs.eq(t),o=i.find(".ui-tabs-anchor"),s=this._getPanelForTab(i),a={tab:i,panel:s},l=function(e,t){"abort"===t&&n.panels.stop(!1,!0),n._removeClass(i,"ui-tabs-loading"),s.removeAttr("aria-busy"),e===n.xhr&&delete n.xhr};this._isLocal(o[0])||(this.xhr=e.ajax(this._ajaxSettings(o,r,a)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(i,"ui-tabs-loading"),s.attr("aria-busy","true"),this.xhr.done((function(e,t,i){setTimeout((function(){s.html(e),n._trigger("load",r,a),l(i,t)}),1)})).fail((function(e,t){setTimeout((function(){l(e,t)}),1)}))))},_ajaxSettings:function(t,r,n){var i=this;return{url:t.attr("href").replace(/#.*$/,""),beforeSend:function(t,o){return i._trigger("beforeLoad",r,e.extend({jqXHR:t,ajaxSettings:o},n))}}},_getPanelForTab:function(t){var r=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+r))}}),!1!==e.uiBackCompat&&e.widget("ui.tabs",e.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}});e.ui.tabs;e.widget("ui.tooltip",{version:"1.13.2",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=e(this).attr("title");return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(e,t){var r=(e.attr("aria-describedby")||"").split(/\s+/);r.push(t),e.data("ui-tooltip-id",t).attr("aria-describedby",String.prototype.trim.call(r.join(" ")))},_removeDescribedBy:function(t){var r=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),i=e.inArray(r,n);-1!==i&&n.splice(i,1),t.removeData("ui-tooltip-id"),(n=String.prototype.trim.call(n.join(" ")))?t.attr("aria-describedby",n):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=e([])},_setOption:function(t,r){var n=this;this._super(t,r),"content"===t&&e.each(this.tooltips,(function(e,t){n._updateContent(t.element)}))},_setOptionDisabled:function(e){this[e?"_disable":"_enable"]()},_disable:function(){var t=this;e.each(this.tooltips,(function(r,n){var i=e.Event("blur");i.target=i.currentTarget=n.element[0],t.close(i,!0)})),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter((function(){var t=e(this);if(t.is("[title]"))return t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})))},_enable:function(){this.disabledTitles.each((function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})),this.disabledTitles=e([])},open:function(t){var r=this,n=e(t?t.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&n.parents().each((function(){var t,n=e(this);n.data("ui-tooltip-open")&&((t=e.Event("blur")).target=t.currentTarget=this,r.close(t,!0)),n.attr("title")&&(n.uniqueId(),r.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))})),this._registerCloseHandlers(t,n),this._updateContent(n,t))},_updateContent:function(e,t){var r,n=this.options.content,i=this,o=t?t.type:null;if("string"==typeof n||n.nodeType||n.jquery)return this._open(t,e,n);(r=n.call(e[0],(function(r){i._delay((function(){e.data("ui-tooltip-open")&&(t&&(t.type=o),this._open(t,e,r))}))})))&&this._open(t,e,r)},_open:function(t,r,n){var i,o,s,a,l=e.extend({},this.options.position);function u(e){l.of=e,o.is(":hidden")||o.position(l)}n&&((i=this._find(r))?i.tooltip.find(".ui-tooltip-content").html(n):(r.is("[title]")&&(t&&"mouseover"===t.type?r.attr("title",""):r.removeAttr("title")),i=this._tooltip(r),o=i.tooltip,this._addDescribedBy(r,o.attr("id")),o.find(".ui-tooltip-content").html(n),this.liveRegion.children().hide(),(a=e("<div>").html(o.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),a.removeAttr("id").find("[id]").removeAttr("id"),a.appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:u}),u(t)):o.position(e.extend({of:r},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(s=this.delayedShow=setInterval((function(){o.is(":visible")&&(u(l.of),clearInterval(s))}),13)),this._trigger("open",t,{tooltip:o})))},_registerCloseHandlers:function(t,r){var n={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=r[0],this.close(n,!0)}}};r[0]!==this.element[0]&&(n.remove=function(){var e=this._find(r);e&&this._removeTooltip(e.tooltip)}),t&&"mouseover"!==t.type||(n.mouseleave="close"),t&&"focusin"!==t.type||(n.focusout="close"),this._on(!0,r,n)},close:function(t){var r,n=this,i=e(t?t.currentTarget:this.element),o=this._find(i);o?(r=o.tooltip,o.closing||(clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&!i.attr("title")&&i.attr("title",i.data("ui-tooltip-title")),this._removeDescribedBy(i),o.hiding=!0,r.stop(!0),this._hide(r,this.options.hide,(function(){n._removeTooltip(e(this))})),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,(function(t,r){e(r.element).attr("title",r.title),delete n.parents[t]})),o.closing=!0,this._trigger("close",t,{tooltip:r}),o.hiding||(o.closing=!1))):i.removeData("ui-tooltip-open")},_tooltip:function(t){var r=e("<div>").attr("role","tooltip"),n=e("<div>").appendTo(r),i=r.uniqueId().attr("id");return this._addClass(n,"ui-tooltip-content"),this._addClass(r,"ui-tooltip","ui-widget ui-widget-content"),r.appendTo(this._appendTo(t)),this.tooltips[i]={element:t,tooltip:r}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){clearInterval(this.delayedShow),e.remove(),delete this.tooltips[e.attr("id")]},_appendTo:function(e){var t=e.closest(".ui-front, dialog");return t.length||(t=this.document[0].body),t},_destroy:function(){var t=this;e.each(this.tooltips,(function(r,n){var i=e.Event("blur"),o=n.element;i.target=i.currentTarget=o[0],t.close(i,!0),e("#"+r).remove(),o.data("ui-tooltip-title")&&(o.attr("title")||o.attr("title",o.data("ui-tooltip-title")),o.removeData("ui-tooltip-title"))})),this.liveRegion.remove()}}),!1!==e.uiBackCompat&&e.widget("ui.tooltip",e.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var e=this._superApply(arguments);return this.options.tooltipClass&&e.tooltip.addClass(this.options.tooltipClass),e}});e.ui.tooltip},void 0===(o="function"==typeof n?n.apply(t,i):n)||(e.exports=o)}()},9755:function(e,t){var r;!function(t,r){"use strict";"object"==typeof e.exports?e.exports=t.document?r(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return r(e)}:r(t)}("undefined"!=typeof window?window:this,(function(n,i){"use strict";var o=[],s=Object.getPrototypeOf,a=o.slice,l=o.flat?function(e){return o.flat.call(e)}:function(e){return o.concat.apply([],e)},u=o.push,c=o.indexOf,h={},d=h.toString,f=h.hasOwnProperty,p=f.toString,m=p.call(Object),g={},v=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},y=function(e){return null!=e&&e===e.window},b=n.document,w={type:!0,src:!0,nonce:!0,noModule:!0};function C(e,t,r){var n,i,o=(r=r||b).createElement("script");if(o.text=e,t)for(n in w)(i=t[n]||t.getAttribute&&t.getAttribute(n))&&o.setAttribute(n,i);r.head.appendChild(o).parentNode.removeChild(o)}function _(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[d.call(e)]||"object":typeof e}var S="3.7.0",x=/HTML$/i,k=function(e,t){return new k.fn.init(e,t)};function T(e){var t=!!e&&"length"in e&&e.length,r=_(e);return!v(e)&&!y(e)&&("array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}function R(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}k.fn=k.prototype={jquery:S,constructor:k,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=k.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return k.each(this,e)},map:function(e){return this.pushStack(k.map(this,(function(t,r){return e.call(t,r,t)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(k.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(k.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:o.sort,splice:o.splice},k.extend=k.fn.extend=function(){var e,t,r,n,i,o,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||v(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)n=e[t],"__proto__"!==t&&s!==n&&(u&&n&&(k.isPlainObject(n)||(i=Array.isArray(n)))?(r=s[t],o=i&&!Array.isArray(r)?[]:i||k.isPlainObject(r)?r:{},i=!1,s[t]=k.extend(u,o,n)):void 0!==n&&(s[t]=n));return s},k.extend({expando:"jQuery"+(S+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,r;return!(!e||"[object Object]"!==d.call(e))&&(!(t=s(e))||"function"==typeof(r=f.call(t,"constructor")&&t.constructor)&&p.call(r)===m)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,r){C(e,{nonce:t&&t.nonce},r)},each:function(e,t){var r,n=0;if(T(e))for(r=e.length;n<r&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},text:function(e){var t,r="",n=0,i=e.nodeType;if(i){if(1===i||9===i||11===i)return e.textContent;if(3===i||4===i)return e.nodeValue}else for(;t=e[n++];)r+=k.text(t);return r},makeArray:function(e,t){var r=t||[];return null!=e&&(T(Object(e))?k.merge(r,"string"==typeof e?[e]:e):u.call(r,e)),r},inArray:function(e,t,r){return null==t?-1:c.call(t,e,r)},isXMLDoc:function(e){var t=e&&e.namespaceURI,r=e&&(e.ownerDocument||e).documentElement;return!x.test(t||r&&r.nodeName||"HTML")},merge:function(e,t){for(var r=+t.length,n=0,i=e.length;n<r;n++)e[i++]=t[n];return e.length=i,e},grep:function(e,t,r){for(var n=[],i=0,o=e.length,s=!r;i<o;i++)!t(e[i],i)!==s&&n.push(e[i]);return n},map:function(e,t,r){var n,i,o=0,s=[];if(T(e))for(n=e.length;o<n;o++)null!=(i=t(e[o],o,r))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,r))&&s.push(i);return l(s)},guid:1,support:g}),"function"==typeof Symbol&&(k.fn[Symbol.iterator]=o[Symbol.iterator]),k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){h["[object "+t+"]"]=t.toLowerCase()}));var E=o.pop,M=o.sort,P=o.splice,O="[\\x20\\t\\r\\n\\f]",I=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g");k.contains=function(e,t){var r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(e.contains?e.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))};var A=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function j(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}k.escapeSelector=function(e){return(e+"").replace(A,j)};var D=b,N=u;!function(){var e,t,r,i,s,l,u,h,d,p,m=N,v=k.expando,y=0,b=0,w=ee(),C=ee(),_=ee(),S=ee(),x=function(e,t){return e===t&&(s=!0),0},T="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",A="(?:\\\\[\\da-fA-F]{1,6}"+O+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",j="\\["+O+"*("+A+")(?:"+O+"*([*^$|!~]?=)"+O+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+A+"))|)"+O+"*\\]",F=":("+A+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",$=new RegExp(O+"+","g"),L=new RegExp("^"+O+"*,"+O+"*"),B=new RegExp("^"+O+"*([>+~]|"+O+")"+O+"*"),V=new RegExp(O+"|>"),H=new RegExp(F),z=new RegExp("^"+A+"$"),U={ID:new RegExp("^#("+A+")"),CLASS:new RegExp("^\\.("+A+")"),TAG:new RegExp("^("+A+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),bool:new RegExp("^(?:"+T+")$","i"),needsContext:new RegExp("^"+O+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)","i")},q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,W=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,J=new RegExp("\\\\[\\da-fA-F]{1,6}"+O+"?|\\\\([^\\r\\n\\f])","g"),X=function(e,t){var r="0x"+e.slice(1)-65536;return t||(r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320))},Y=function(){le()},Z=de((function(e){return!0===e.disabled&&R(e,"fieldset")}),{dir:"parentNode",next:"legend"});try{m.apply(o=a.call(D.childNodes),D.childNodes),o[D.childNodes.length].nodeType}catch(e){m={apply:function(e,t){N.apply(e,a.call(t))},call:function(e){N.apply(e,a.call(arguments,1))}}}function Q(e,t,r,n){var i,o,s,a,u,c,f,p=t&&t.ownerDocument,y=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==y&&9!==y&&11!==y)return r;if(!n&&(le(t),t=t||l,h)){if(11!==y&&(u=W.exec(e)))if(i=u[1]){if(9===y){if(!(s=t.getElementById(i)))return r;if(s.id===i)return m.call(r,s),r}else if(p&&(s=p.getElementById(i))&&Q.contains(t,s)&&s.id===i)return m.call(r,s),r}else{if(u[2])return m.apply(r,t.getElementsByTagName(e)),r;if((i=u[3])&&t.getElementsByClassName)return m.apply(r,t.getElementsByClassName(i)),r}if(!(S[e+" "]||d&&d.test(e))){if(f=e,p=t,1===y&&(V.test(e)||B.test(e))){for((p=K.test(e)&&ae(t.parentNode)||t)==t&&g.scope||((a=t.getAttribute("id"))?a=k.escapeSelector(a):t.setAttribute("id",a=v)),o=(c=ce(e)).length;o--;)c[o]=(a?"#"+a:":scope")+" "+he(c[o]);f=c.join(",")}try{return m.apply(r,p.querySelectorAll(f)),r}catch(t){S(e,!0)}finally{a===v&&t.removeAttribute("id")}}}return ye(e.replace(I,"$1"),t,r,n)}function ee(){var e=[];return function r(n,i){return e.push(n+" ")>t.cacheLength&&delete r[e.shift()],r[n+" "]=i}}function te(e){return e[v]=!0,e}function re(e){var t=l.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ne(e){return function(t){return R(t,"input")&&t.type===e}}function ie(e){return function(t){return(R(t,"input")||R(t,"button"))&&t.type===e}}function oe(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Z(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function se(e){return te((function(t){return t=+t,te((function(r,n){for(var i,o=e([],r.length,t),s=o.length;s--;)r[i=o[s]]&&(r[i]=!(n[i]=r[i]))}))}))}function ae(e){return e&&void 0!==e.getElementsByTagName&&e}function le(e){var r,n=e?e.ownerDocument||e:D;return n!=l&&9===n.nodeType&&n.documentElement?(u=(l=n).documentElement,h=!k.isXMLDoc(l),p=u.matches||u.webkitMatchesSelector||u.msMatchesSelector,D!=l&&(r=l.defaultView)&&r.top!==r&&r.addEventListener("unload",Y),g.getById=re((function(e){return u.appendChild(e).id=k.expando,!l.getElementsByName||!l.getElementsByName(k.expando).length})),g.disconnectedMatch=re((function(e){return p.call(e,"*")})),g.scope=re((function(){return l.querySelectorAll(":scope")})),g.cssHas=re((function(){try{return l.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}})),g.getById?(t.filter.ID=function(e){var t=e.replace(J,X);return function(e){return e.getAttribute("id")===t}},t.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var r=t.getElementById(e);return r?[r]:[]}}):(t.filter.ID=function(e){var t=e.replace(J,X);return function(e){var r=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}},t.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var r,n,i,o=t.getElementById(e);if(o){if((r=o.getAttributeNode("id"))&&r.value===e)return[o];for(i=t.getElementsByName(e),n=0;o=i[n++];)if((r=o.getAttributeNode("id"))&&r.value===e)return[o]}return[]}}),t.find.TAG=function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},t.find.CLASS=function(e,t){if(void 0!==t.getElementsByClassName&&h)return t.getElementsByClassName(e)},d=[],re((function(e){var t;u.appendChild(e).innerHTML="<a id='"+v+"' href='' disabled='disabled'></a><select id='"+v+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+O+"*(?:value|"+T+")"),e.querySelectorAll("[id~="+v+"-]").length||d.push("~="),e.querySelectorAll("a#"+v+"+*").length||d.push(".#.+[+~]"),e.querySelectorAll(":checked").length||d.push(":checked"),(t=l.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),u.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&d.push(":enabled",":disabled"),(t=l.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||d.push("\\["+O+"*name"+O+"*="+O+"*(?:''|\"\")")})),g.cssHas||d.push(":has"),d=d.length&&new RegExp(d.join("|")),x=function(e,t){if(e===t)return s=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!g.sortDetached&&t.compareDocumentPosition(e)===r?e===l||e.ownerDocument==D&&Q.contains(D,e)?-1:t===l||t.ownerDocument==D&&Q.contains(D,t)?1:i?c.call(i,e)-c.call(i,t):0:4&r?-1:1)},l):l}for(e in Q.matches=function(e,t){return Q(e,null,null,t)},Q.matchesSelector=function(e,t){if(le(e),h&&!S[t+" "]&&(!d||!d.test(t)))try{var r=p.call(e,t);if(r||g.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){S(t,!0)}return Q(t,l,null,[e]).length>0},Q.contains=function(e,t){return(e.ownerDocument||e)!=l&&le(e),k.contains(e,t)},Q.attr=function(e,r){(e.ownerDocument||e)!=l&&le(e);var n=t.attrHandle[r.toLowerCase()],i=n&&f.call(t.attrHandle,r.toLowerCase())?n(e,r,!h):void 0;return void 0!==i?i:e.getAttribute(r)},Q.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},k.uniqueSort=function(e){var t,r=[],n=0,o=0;if(s=!g.sortStable,i=!g.sortStable&&a.call(e,0),M.call(e,x),s){for(;t=e[o++];)t===e[o]&&(n=r.push(o));for(;n--;)P.call(e,r[n],1)}return i=null,e},k.fn.uniqueSort=function(){return this.pushStack(k.uniqueSort(a.apply(this)))},t=k.expr={cacheLength:50,createPseudo:te,match:U,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(J,X),e[3]=(e[3]||e[4]||e[5]||"").replace(J,X),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Q.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Q.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return U.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&H.test(r)&&(t=ce(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(J,X).toLowerCase();return"*"===e?function(){return!0}:function(e){return R(e,t)}},CLASS:function(e){var t=w[e+" "];return t||(t=new RegExp("(^|"+O+")"+e+"("+O+"|$)"))&&w(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,r){return function(n){var i=Q.attr(n,e);return null==i?"!="===t:!t||(i+="","="===t?i===r:"!="===t?i!==r:"^="===t?r&&0===i.indexOf(r):"*="===t?r&&i.indexOf(r)>-1:"$="===t?r&&i.slice(-r.length)===r:"~="===t?(" "+i.replace($," ")+" ").indexOf(r)>-1:"|="===t&&(i===r||i.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,r,n,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===i?function(e){return!!e.parentNode}:function(t,r,l){var u,c,h,d,f,p=o!==s?"nextSibling":"previousSibling",m=t.parentNode,g=a&&t.nodeName.toLowerCase(),b=!l&&!a,w=!1;if(m){if(o){for(;p;){for(h=t;h=h[p];)if(a?R(h,g):1===h.nodeType)return!1;f=p="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&b){for(w=(d=(u=(c=m[v]||(m[v]={}))[e]||[])[0]===y&&u[1])&&u[2],h=d&&m.childNodes[d];h=++d&&h&&h[p]||(w=d=0)||f.pop();)if(1===h.nodeType&&++w&&h===t){c[e]=[y,d,w];break}}else if(b&&(w=d=(u=(c=t[v]||(t[v]={}))[e]||[])[0]===y&&u[1]),!1===w)for(;(h=++d&&h&&h[p]||(w=d=0)||f.pop())&&(!(a?R(h,g):1===h.nodeType)||!++w||(b&&((c=h[v]||(h[v]={}))[e]=[y,w]),h!==t)););return(w-=i)===n||w%n==0&&w/n>=0}}},PSEUDO:function(e,r){var n,i=t.pseudos[e]||t.setFilters[e.toLowerCase()]||Q.error("unsupported pseudo: "+e);return i[v]?i(r):i.length>1?(n=[e,e,"",r],t.setFilters.hasOwnProperty(e.toLowerCase())?te((function(e,t){for(var n,o=i(e,r),s=o.length;s--;)e[n=c.call(e,o[s])]=!(t[n]=o[s])})):function(e){return i(e,0,n)}):i}},pseudos:{not:te((function(e){var t=[],r=[],n=ve(e.replace(I,"$1"));return n[v]?te((function(e,t,r,i){for(var o,s=n(e,null,i,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))})):function(e,i,o){return t[0]=e,n(t,null,o,r),t[0]=null,!r.pop()}})),has:te((function(e){return function(t){return Q(e,t).length>0}})),contains:te((function(e){return e=e.replace(J,X),function(t){return(t.textContent||k.text(t)).indexOf(e)>-1}})),lang:te((function(e){return z.test(e||"")||Q.error("unsupported lang: "+e),e=e.replace(J,X).toLowerCase(),function(t){var r;do{if(r=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===u},focus:function(e){return e===function(){try{return l.activeElement}catch(e){}}()&&l.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:oe(!1),disabled:oe(!0),checked:function(e){return R(e,"input")&&!!e.checked||R(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!t.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return q.test(e.nodeName)},button:function(e){return R(e,"input")&&"button"===e.type||R(e,"button")},text:function(e){var t;return R(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:se((function(){return[0]})),last:se((function(e,t){return[t-1]})),eq:se((function(e,t,r){return[r<0?r+t:r]})),even:se((function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e})),odd:se((function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e})),lt:se((function(e,t,r){var n;for(n=r<0?r+t:r>t?t:r;--n>=0;)e.push(n);return e})),gt:se((function(e,t,r){for(var n=r<0?r+t:r;++n<t;)e.push(n);return e}))}},t.pseudos.nth=t.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[e]=ne(e);for(e in{submit:!0,reset:!0})t.pseudos[e]=ie(e);function ue(){}function ce(e,r){var n,i,o,s,a,l,u,c=C[e+" "];if(c)return r?0:c.slice(0);for(a=e,l=[],u=t.preFilter;a;){for(s in n&&!(i=L.exec(a))||(i&&(a=a.slice(i[0].length)||a),l.push(o=[])),n=!1,(i=B.exec(a))&&(n=i.shift(),o.push({value:n,type:i[0].replace(I," ")}),a=a.slice(n.length)),t.filter)!(i=U[s].exec(a))||u[s]&&!(i=u[s](i))||(n=i.shift(),o.push({value:n,type:s,matches:i}),a=a.slice(n.length));if(!n)break}return r?a.length:a?Q.error(e):C(e,l).slice(0)}function he(e){for(var t=0,r=e.length,n="";t<r;t++)n+=e[t].value;return n}function de(e,t,r){var n=t.dir,i=t.next,o=i||n,s=r&&"parentNode"===o,a=b++;return t.first?function(t,r,i){for(;t=t[n];)if(1===t.nodeType||s)return e(t,r,i);return!1}:function(t,r,l){var u,c,h=[y,a];if(l){for(;t=t[n];)if((1===t.nodeType||s)&&e(t,r,l))return!0}else for(;t=t[n];)if(1===t.nodeType||s)if(c=t[v]||(t[v]={}),i&&R(t,i))t=t[n]||t;else{if((u=c[o])&&u[0]===y&&u[1]===a)return h[2]=u[2];if(c[o]=h,h[2]=e(t,r,l))return!0}return!1}}function fe(e){return e.length>1?function(t,r,n){for(var i=e.length;i--;)if(!e[i](t,r,n))return!1;return!0}:e[0]}function pe(e,t,r,n,i){for(var o,s=[],a=0,l=e.length,u=null!=t;a<l;a++)(o=e[a])&&(r&&!r(o,n,i)||(s.push(o),u&&t.push(a)));return s}function me(e,t,r,n,i,o){return n&&!n[v]&&(n=me(n)),i&&!i[v]&&(i=me(i,o)),te((function(o,s,a,l){var u,h,d,f,p=[],g=[],v=s.length,y=o||function(e,t,r){for(var n=0,i=t.length;n<i;n++)Q(e,t[n],r);return r}(t||"*",a.nodeType?[a]:a,[]),b=!e||!o&&t?y:pe(y,p,e,a,l);if(r?r(b,f=i||(o?e:v||n)?[]:s,a,l):f=b,n)for(u=pe(f,g),n(u,[],a,l),h=u.length;h--;)(d=u[h])&&(f[g[h]]=!(b[g[h]]=d));if(o){if(i||e){if(i){for(u=[],h=f.length;h--;)(d=f[h])&&u.push(b[h]=d);i(null,f=[],u,l)}for(h=f.length;h--;)(d=f[h])&&(u=i?c.call(o,d):p[h])>-1&&(o[u]=!(s[u]=d))}}else f=pe(f===s?f.splice(v,f.length):f),i?i(null,s,f,l):m.apply(s,f)}))}function ge(e){for(var n,i,o,s=e.length,a=t.relative[e[0].type],l=a||t.relative[" "],u=a?1:0,h=de((function(e){return e===n}),l,!0),d=de((function(e){return c.call(n,e)>-1}),l,!0),f=[function(e,t,i){var o=!a&&(i||t!=r)||((n=t).nodeType?h(e,t,i):d(e,t,i));return n=null,o}];u<s;u++)if(i=t.relative[e[u].type])f=[de(fe(f),i)];else{if((i=t.filter[e[u].type].apply(null,e[u].matches))[v]){for(o=++u;o<s&&!t.relative[e[o].type];o++);return me(u>1&&fe(f),u>1&&he(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(I,"$1"),i,u<o&&ge(e.slice(u,o)),o<s&&ge(e=e.slice(o)),o<s&&he(e))}f.push(i)}return fe(f)}function ve(e,n){var i,o=[],s=[],a=_[e+" "];if(!a){for(n||(n=ce(e)),i=n.length;i--;)(a=ge(n[i]))[v]?o.push(a):s.push(a);a=_(e,function(e,n){var i=n.length>0,o=e.length>0,s=function(s,a,u,c,d){var f,p,g,v=0,b="0",w=s&&[],C=[],_=r,S=s||o&&t.find.TAG("*",d),x=y+=null==_?1:Math.random()||.1,T=S.length;for(d&&(r=a==l||a||d);b!==T&&null!=(f=S[b]);b++){if(o&&f){for(p=0,a||f.ownerDocument==l||(le(f),u=!h);g=e[p++];)if(g(f,a||l,u)){m.call(c,f);break}d&&(y=x)}i&&((f=!g&&f)&&v--,s&&w.push(f))}if(v+=b,i&&b!==v){for(p=0;g=n[p++];)g(w,C,a,u);if(s){if(v>0)for(;b--;)w[b]||C[b]||(C[b]=E.call(c));C=pe(C)}m.apply(c,C),d&&!s&&C.length>0&&v+n.length>1&&k.uniqueSort(c)}return d&&(y=x,r=_),w};return i?te(s):s}(s,o)),a.selector=e}return a}function ye(e,r,n,i){var o,s,a,l,u,c="function"==typeof e&&e,d=!i&&ce(e=c.selector||e);if(n=n||[],1===d.length){if((s=d[0]=d[0].slice(0)).length>2&&"ID"===(a=s[0]).type&&9===r.nodeType&&h&&t.relative[s[1].type]){if(!(r=(t.find.ID(a.matches[0].replace(J,X),r)||[])[0]))return n;c&&(r=r.parentNode),e=e.slice(s.shift().value.length)}for(o=U.needsContext.test(e)?0:s.length;o--&&(a=s[o],!t.relative[l=a.type]);)if((u=t.find[l])&&(i=u(a.matches[0].replace(J,X),K.test(s[0].type)&&ae(r.parentNode)||r))){if(s.splice(o,1),!(e=i.length&&he(s)))return m.apply(n,i),n;break}}return(c||ve(e,d))(i,r,!h,n,!r||K.test(e)&&ae(r.parentNode)||r),n}ue.prototype=t.filters=t.pseudos,t.setFilters=new ue,g.sortStable=v.split("").sort(x).join("")===v,le(),g.sortDetached=re((function(e){return 1&e.compareDocumentPosition(l.createElement("fieldset"))})),k.find=Q,k.expr[":"]=k.expr.pseudos,k.unique=k.uniqueSort,Q.compile=ve,Q.select=ye,Q.setDocument=le,Q.escape=k.escapeSelector,Q.getText=k.text,Q.isXML=k.isXMLDoc,Q.selectors=k.expr,Q.support=k.support,Q.uniqueSort=k.uniqueSort}();var F=function(e,t,r){for(var n=[],i=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&k(e).is(r))break;n.push(e)}return n},$=function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r},L=k.expr.match.needsContext,B=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function V(e,t,r){return v(t)?k.grep(e,(function(e,n){return!!t.call(e,n,e)!==r})):t.nodeType?k.grep(e,(function(e){return e===t!==r})):"string"!=typeof t?k.grep(e,(function(e){return c.call(t,e)>-1!==r})):k.filter(t,e,r)}k.filter=function(e,t,r){var n=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?k.find.matchesSelector(n,e)?[n]:[]:k.find.matches(e,k.grep(t,(function(e){return 1===e.nodeType})))},k.fn.extend({find:function(e){var t,r,n=this.length,i=this;if("string"!=typeof e)return this.pushStack(k(e).filter((function(){for(t=0;t<n;t++)if(k.contains(i[t],this))return!0})));for(r=this.pushStack([]),t=0;t<n;t++)k.find(e,i[t],r);return n>1?k.uniqueSort(r):r},filter:function(e){return this.pushStack(V(this,e||[],!1))},not:function(e){return this.pushStack(V(this,e||[],!0))},is:function(e){return!!V(this,"string"==typeof e&&L.test(e)?k(e):e||[],!1).length}});var H,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(k.fn.init=function(e,t,r){var n,i;if(!e)return this;if(r=r||H,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:z.exec(e))||!n[1]&&t)return!t||t.jquery?(t||r).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof k?t[0]:t,k.merge(this,k.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:b,!0)),B.test(n[1])&&k.isPlainObject(t))for(n in t)v(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(i=b.getElementById(n[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==r.ready?r.ready(e):e(k):k.makeArray(e,this)}).prototype=k.fn,H=k(b);var U=/^(?:parents|prev(?:Until|All))/,q={children:!0,contents:!0,next:!0,prev:!0};function G(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}k.fn.extend({has:function(e){var t=k(e,this),r=t.length;return this.filter((function(){for(var e=0;e<r;e++)if(k.contains(this,t[e]))return!0}))},closest:function(e,t){var r,n=0,i=this.length,o=[],s="string"!=typeof e&&k(e);if(!L.test(e))for(;n<i;n++)for(r=this[n];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(s?s.index(r)>-1:1===r.nodeType&&k.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(o.length>1?k.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?c.call(k(e),this[0]):c.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),k.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return F(e,"parentNode")},parentsUntil:function(e,t,r){return F(e,"parentNode",r)},next:function(e){return G(e,"nextSibling")},prev:function(e){return G(e,"previousSibling")},nextAll:function(e){return F(e,"nextSibling")},prevAll:function(e){return F(e,"previousSibling")},nextUntil:function(e,t,r){return F(e,"nextSibling",r)},prevUntil:function(e,t,r){return F(e,"previousSibling",r)},siblings:function(e){return $((e.parentNode||{}).firstChild,e)},children:function(e){return $(e.firstChild)},contents:function(e){return null!=e.contentDocument&&s(e.contentDocument)?e.contentDocument:(R(e,"template")&&(e=e.content||e),k.merge([],e.childNodes))}},(function(e,t){k.fn[e]=function(r,n){var i=k.map(this,t,r);return"Until"!==e.slice(-5)&&(n=r),n&&"string"==typeof n&&(i=k.filter(n,i)),this.length>1&&(q[e]||k.uniqueSort(i),U.test(e)&&i.reverse()),this.pushStack(i)}}));var W=/[^\x20\t\r\n\f]+/g;function K(e){return e}function J(e){throw e}function X(e,t,r,n){var i;try{e&&v(i=e.promise)?i.call(e).done(t).fail(r):e&&v(i=e.then)?i.call(e,t,r):t.apply(void 0,[e].slice(n))}catch(e){r.apply(void 0,[e])}}k.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return k.each(e.match(W)||[],(function(e,r){t[r]=!0})),t}(e):k.extend({},e);var t,r,n,i,o=[],s=[],a=-1,l=function(){for(i=i||e.once,n=t=!0;s.length;a=-1)for(r=s.shift();++a<o.length;)!1===o[a].apply(r[0],r[1])&&e.stopOnFalse&&(a=o.length,r=!1);e.memory||(r=!1),t=!1,i&&(o=r?[]:"")},u={add:function(){return o&&(r&&!t&&(a=o.length-1,s.push(r)),function t(r){k.each(r,(function(r,n){v(n)?e.unique&&u.has(n)||o.push(n):n&&n.length&&"string"!==_(n)&&t(n)}))}(arguments),r&&!t&&l()),this},remove:function(){return k.each(arguments,(function(e,t){for(var r;(r=k.inArray(t,o,r))>-1;)o.splice(r,1),r<=a&&a--})),this},has:function(e){return e?k.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=s=[],o=r="",this},disabled:function(){return!o},lock:function(){return i=s=[],r||t||(o=r=""),this},locked:function(){return!!i},fireWith:function(e,r){return i||(r=[e,(r=r||[]).slice?r.slice():r],s.push(r),t||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},k.extend({Deferred:function(e){var t=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return k.Deferred((function(r){k.each(t,(function(t,n){var i=v(e[n[4]])&&e[n[4]];o[n[1]]((function(){var e=i&&i.apply(this,arguments);e&&v(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[n[0]+"With"](this,i?[e]:arguments)}))})),e=null})).promise()},then:function(e,r,i){var o=0;function s(e,t,r,i){return function(){var a=this,l=arguments,u=function(){var n,u;if(!(e<o)){if((n=r.apply(a,l))===t.promise())throw new TypeError("Thenable self-resolution");u=n&&("object"==typeof n||"function"==typeof n)&&n.then,v(u)?i?u.call(n,s(o,t,K,i),s(o,t,J,i)):(o++,u.call(n,s(o,t,K,i),s(o,t,J,i),s(o,t,K,t.notifyWith))):(r!==K&&(a=void 0,l=[n]),(i||t.resolveWith)(a,l))}},c=i?u:function(){try{u()}catch(n){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(n,c.error),e+1>=o&&(r!==J&&(a=void 0,l=[n]),t.rejectWith(a,l))}};e?c():(k.Deferred.getErrorHook?c.error=k.Deferred.getErrorHook():k.Deferred.getStackHook&&(c.error=k.Deferred.getStackHook()),n.setTimeout(c))}}return k.Deferred((function(n){t[0][3].add(s(0,n,v(i)?i:K,n.notifyWith)),t[1][3].add(s(0,n,v(e)?e:K)),t[2][3].add(s(0,n,v(r)?r:J))})).promise()},promise:function(e){return null!=e?k.extend(e,i):i}},o={};return k.each(t,(function(e,n){var s=n[2],a=n[5];i[n[1]]=s.add,a&&s.add((function(){r=a}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),s.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=s.fireWith})),i.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,r=t,n=Array(r),i=a.call(arguments),o=k.Deferred(),s=function(e){return function(r){n[e]=this,i[e]=arguments.length>1?a.call(arguments):r,--t||o.resolveWith(n,i)}};if(t<=1&&(X(e,o.done(s(r)).resolve,o.reject,!t),"pending"===o.state()||v(i[r]&&i[r].then)))return o.then();for(;r--;)X(i[r],s(r),o.reject);return o.promise()}});var Y=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&Y.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},k.readyException=function(e){n.setTimeout((function(){throw e}))};var Z=k.Deferred();function Q(){b.removeEventListener("DOMContentLoaded",Q),n.removeEventListener("load",Q),k.ready()}k.fn.ready=function(e){return Z.then(e).catch((function(e){k.readyException(e)})),this},k.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--k.readyWait:k.isReady)||(k.isReady=!0,!0!==e&&--k.readyWait>0||Z.resolveWith(b,[k]))}}),k.ready.then=Z.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?n.setTimeout(k.ready):(b.addEventListener("DOMContentLoaded",Q),n.addEventListener("load",Q));var ee=function(e,t,r,n,i,o,s){var a=0,l=e.length,u=null==r;if("object"===_(r))for(a in i=!0,r)ee(e,t,a,r[a],!0,o,s);else if(void 0!==n&&(i=!0,v(n)||(s=!0),u&&(s?(t.call(e,n),t=null):(u=t,t=function(e,t,r){return u.call(k(e),r)})),t))for(;a<l;a++)t(e[a],r,s?n:n.call(e[a],a,t(e[a],r)));return i?e:u?t.call(e):l?t(e[0],r):o},te=/^-ms-/,re=/-([a-z])/g;function ne(e,t){return t.toUpperCase()}function ie(e){return e.replace(te,"ms-").replace(re,ne)}var oe=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function se(){this.expando=k.expando+se.uid++}se.uid=1,se.prototype={cache:function(e){var t=e[this.expando];return t||(t={},oe(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var n,i=this.cache(e);if("string"==typeof t)i[ie(t)]=r;else for(n in t)i[ie(n)]=t[n];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ie(t)]},access:function(e,t,r){return void 0===t||t&&"string"==typeof t&&void 0===r?this.get(e,t):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,n=e[this.expando];if(void 0!==n){if(void 0!==t){r=(t=Array.isArray(t)?t.map(ie):(t=ie(t))in n?[t]:t.match(W)||[]).length;for(;r--;)delete n[t[r]]}(void 0===t||k.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!k.isEmptyObject(t)}};var ae=new se,le=new se,ue=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ce=/[A-Z]/g;function he(e,t,r){var n;if(void 0===r&&1===e.nodeType)if(n="data-"+t.replace(ce,"-$&").toLowerCase(),"string"==typeof(r=e.getAttribute(n))){try{r=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ue.test(e)?JSON.parse(e):e)}(r)}catch(e){}le.set(e,t,r)}else r=void 0;return r}k.extend({hasData:function(e){return le.hasData(e)||ae.hasData(e)},data:function(e,t,r){return le.access(e,t,r)},removeData:function(e,t){le.remove(e,t)},_data:function(e,t,r){return ae.access(e,t,r)},_removeData:function(e,t){ae.remove(e,t)}}),k.fn.extend({data:function(e,t){var r,n,i,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(i=le.get(o),1===o.nodeType&&!ae.get(o,"hasDataAttrs"))){for(r=s.length;r--;)s[r]&&0===(n=s[r].name).indexOf("data-")&&(n=ie(n.slice(5)),he(o,n,i[n]));ae.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each((function(){le.set(this,e)})):ee(this,(function(t){var r;if(o&&void 0===t)return void 0!==(r=le.get(o,e))||void 0!==(r=he(o,e))?r:void 0;this.each((function(){le.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){le.remove(this,e)}))}}),k.extend({queue:function(e,t,r){var n;if(e)return t=(t||"fx")+"queue",n=ae.get(e,t),r&&(!n||Array.isArray(r)?n=ae.access(e,t,k.makeArray(r)):n.push(r)),n||[]},dequeue:function(e,t){t=t||"fx";var r=k.queue(e,t),n=r.length,i=r.shift(),o=k._queueHooks(e,t);"inprogress"===i&&(i=r.shift(),n--),i&&("fx"===t&&r.unshift("inprogress"),delete o.stop,i.call(e,(function(){k.dequeue(e,t)}),o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return ae.get(e,r)||ae.access(e,r,{empty:k.Callbacks("once memory").add((function(){ae.remove(e,[t+"queue",r])}))})}}),k.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?k.queue(this[0],e):void 0===t?this:this.each((function(){var r=k.queue(this,e,t);k._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&k.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){k.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,n=1,i=k.Deferred(),o=this,s=this.length,a=function(){--n||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(r=ae.get(o[s],e+"queueHooks"))&&r.empty&&(n++,r.empty.add(a));return a(),i.promise(t)}});var de=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,fe=new RegExp("^(?:([+-])=|)("+de+")([a-z%]*)$","i"),pe=["Top","Right","Bottom","Left"],me=b.documentElement,ge=function(e){return k.contains(e.ownerDocument,e)},ve={composed:!0};me.getRootNode&&(ge=function(e){return k.contains(e.ownerDocument,e)||e.getRootNode(ve)===e.ownerDocument});var ye=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ge(e)&&"none"===k.css(e,"display")};function be(e,t,r,n){var i,o,s=20,a=n?function(){return n.cur()}:function(){return k.css(e,t,"")},l=a(),u=r&&r[3]||(k.cssNumber[t]?"":"px"),c=e.nodeType&&(k.cssNumber[t]||"px"!==u&&+l)&&fe.exec(k.css(e,t));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;s--;)k.style(e,t,c+u),(1-o)*(1-(o=a()/l||.5))<=0&&(s=0),c/=o;c*=2,k.style(e,t,c+u),r=r||[]}return r&&(c=+c||+l||0,i=r[1]?c+(r[1]+1)*r[2]:+r[2],n&&(n.unit=u,n.start=c,n.end=i)),i}var we={};function Ce(e){var t,r=e.ownerDocument,n=e.nodeName,i=we[n];return i||(t=r.body.appendChild(r.createElement(n)),i=k.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),we[n]=i,i)}function _e(e,t){for(var r,n,i=[],o=0,s=e.length;o<s;o++)(n=e[o]).style&&(r=n.style.display,t?("none"===r&&(i[o]=ae.get(n,"display")||null,i[o]||(n.style.display="")),""===n.style.display&&ye(n)&&(i[o]=Ce(n))):"none"!==r&&(i[o]="none",ae.set(n,"display",r)));for(o=0;o<s;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}k.fn.extend({show:function(){return _e(this,!0)},hide:function(){return _e(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ye(this)?k(this).show():k(this).hide()}))}});var Se,xe,ke=/^(?:checkbox|radio)$/i,Te=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Re=/^$|^module$|\/(?:java|ecma)script/i;Se=b.createDocumentFragment().appendChild(b.createElement("div")),(xe=b.createElement("input")).setAttribute("type","radio"),xe.setAttribute("checked","checked"),xe.setAttribute("name","t"),Se.appendChild(xe),g.checkClone=Se.cloneNode(!0).cloneNode(!0).lastChild.checked,Se.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!Se.cloneNode(!0).lastChild.defaultValue,Se.innerHTML="<option></option>",g.option=!!Se.lastChild;var Ee={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Me(e,t){var r;return r=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&R(e,t)?k.merge([e],r):r}function Pe(e,t){for(var r=0,n=e.length;r<n;r++)ae.set(e[r],"globalEval",!t||ae.get(t[r],"globalEval"))}Ee.tbody=Ee.tfoot=Ee.colgroup=Ee.caption=Ee.thead,Ee.th=Ee.td,g.option||(Ee.optgroup=Ee.option=[1,"<select multiple='multiple'>","</select>"]);var Oe=/<|&#?\w+;/;function Ie(e,t,r,n,i){for(var o,s,a,l,u,c,h=t.createDocumentFragment(),d=[],f=0,p=e.length;f<p;f++)if((o=e[f])||0===o)if("object"===_(o))k.merge(d,o.nodeType?[o]:o);else if(Oe.test(o)){for(s=s||h.appendChild(t.createElement("div")),a=(Te.exec(o)||["",""])[1].toLowerCase(),l=Ee[a]||Ee._default,s.innerHTML=l[1]+k.htmlPrefilter(o)+l[2],c=l[0];c--;)s=s.lastChild;k.merge(d,s.childNodes),(s=h.firstChild).textContent=""}else d.push(t.createTextNode(o));for(h.textContent="",f=0;o=d[f++];)if(n&&k.inArray(o,n)>-1)i&&i.push(o);else if(u=ge(o),s=Me(h.appendChild(o),"script"),u&&Pe(s),r)for(c=0;o=s[c++];)Re.test(o.type||"")&&r.push(o);return h}var Ae=/^([^.]*)(?:\.(.+)|)/;function je(){return!0}function De(){return!1}function Ne(e,t,r,n,i,o){var s,a;if("object"==typeof t){for(a in"string"!=typeof r&&(n=n||r,r=void 0),t)Ne(e,a,r,n,t[a],o);return e}if(null==n&&null==i?(i=r,n=r=void 0):null==i&&("string"==typeof r?(i=n,n=void 0):(i=n,n=r,r=void 0)),!1===i)i=De;else if(!i)return e;return 1===o&&(s=i,i=function(e){return k().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=k.guid++)),e.each((function(){k.event.add(this,t,i,n,r)}))}function Fe(e,t,r){r?(ae.set(e,t,!1),k.event.add(e,t,{namespace:!1,handler:function(e){var r,n=ae.get(this,t);if(1&e.isTrigger&&this[t]){if(n)(k.event.special[t]||{}).delegateType&&e.stopPropagation();else if(n=a.call(arguments),ae.set(this,t,n),this[t](),r=ae.get(this,t),ae.set(this,t,!1),n!==r)return e.stopImmediatePropagation(),e.preventDefault(),r}else n&&(ae.set(this,t,k.event.trigger(n[0],n.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=je)}})):void 0===ae.get(e,t)&&k.event.add(e,t,je)}k.event={global:{},add:function(e,t,r,n,i){var o,s,a,l,u,c,h,d,f,p,m,g=ae.get(e);if(oe(e))for(r.handler&&(r=(o=r).handler,i=o.selector),i&&k.find.matchesSelector(me,i),r.guid||(r.guid=k.guid++),(l=g.events)||(l=g.events=Object.create(null)),(s=g.handle)||(s=g.handle=function(t){return void 0!==k&&k.event.triggered!==t.type?k.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(W)||[""]).length;u--;)f=m=(a=Ae.exec(t[u])||[])[1],p=(a[2]||"").split(".").sort(),f&&(h=k.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,h=k.event.special[f]||{},c=k.extend({type:f,origType:m,data:n,handler:r,guid:r.guid,selector:i,needsContext:i&&k.expr.match.needsContext.test(i),namespace:p.join(".")},o),(d=l[f])||((d=l[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,n,p,s)||e.addEventListener&&e.addEventListener(f,s)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),i?d.splice(d.delegateCount++,0,c):d.push(c),k.event.global[f]=!0)},remove:function(e,t,r,n,i){var o,s,a,l,u,c,h,d,f,p,m,g=ae.hasData(e)&&ae.get(e);if(g&&(l=g.events)){for(u=(t=(t||"").match(W)||[""]).length;u--;)if(f=m=(a=Ae.exec(t[u])||[])[1],p=(a[2]||"").split(".").sort(),f){for(h=k.event.special[f]||{},d=l[f=(n?h.delegateType:h.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=d.length;o--;)c=d[o],!i&&m!==c.origType||r&&r.guid!==c.guid||a&&!a.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(e,c));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,p,g.handle)||k.removeEvent(e,f,g.handle),delete l[f])}else for(f in l)k.event.remove(e,f+t[u],r,n,!0);k.isEmptyObject(l)&&ae.remove(e,"handle events")}},dispatch:function(e){var t,r,n,i,o,s,a=new Array(arguments.length),l=k.event.fix(e),u=(ae.get(this,"events")||Object.create(null))[l.type]||[],c=k.event.special[l.type]||{};for(a[0]=l,t=1;t<arguments.length;t++)a[t]=arguments[t];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){for(s=k.event.handlers.call(this,l,u),t=0;(i=s[t++])&&!l.isPropagationStopped();)for(l.currentTarget=i.elem,r=0;(o=i.handlers[r++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(n=((k.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a))&&!1===(l.result=n)&&(l.preventDefault(),l.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(e,t){var r,n,i,o,s,a=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(o=[],s={},r=0;r<l;r++)void 0===s[i=(n=t[r]).selector+" "]&&(s[i]=n.needsContext?k(i,this).index(u)>-1:k.find(i,this,null,[u]).length),s[i]&&o.push(n);o.length&&a.push({elem:u,handlers:o})}return u=this,l<t.length&&a.push({elem:u,handlers:t.slice(l)}),a},addProp:function(e,t){Object.defineProperty(k.Event.prototype,e,{enumerable:!0,configurable:!0,get:v(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[k.expando]?e:new k.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ke.test(t.type)&&t.click&&R(t,"input")&&Fe(t,"click",!0),!1},trigger:function(e){var t=this||e;return ke.test(t.type)&&t.click&&R(t,"input")&&Fe(t,"click"),!0},_default:function(e){var t=e.target;return ke.test(t.type)&&t.click&&R(t,"input")&&ae.get(t,"click")||R(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},k.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)},k.Event=function(e,t){if(!(this instanceof k.Event))return new k.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?je:De,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&k.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[k.expando]=!0},k.Event.prototype={constructor:k.Event,isDefaultPrevented:De,isPropagationStopped:De,isImmediatePropagationStopped:De,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=je,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=je,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=je,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},k.event.addProp),k.each({focus:"focusin",blur:"focusout"},(function(e,t){function r(e){if(b.documentMode){var r=ae.get(this,"handle"),n=k.event.fix(e);n.type="focusin"===e.type?"focus":"blur",n.isSimulated=!0,r(e),n.target===n.currentTarget&&r(n)}else k.event.simulate(t,e.target,k.event.fix(e))}k.event.special[e]={setup:function(){var n;if(Fe(this,e,!0),!b.documentMode)return!1;(n=ae.get(this,t))||this.addEventListener(t,r),ae.set(this,t,(n||0)+1)},trigger:function(){return Fe(this,e),!0},teardown:function(){var e;if(!b.documentMode)return!1;(e=ae.get(this,t)-1)?ae.set(this,t,e):(this.removeEventListener(t,r),ae.remove(this,t))},_default:function(t){return ae.get(t.target,e)},delegateType:t},k.event.special[t]={setup:function(){var n=this.ownerDocument||this.document||this,i=b.documentMode?this:n,o=ae.get(i,t);o||(b.documentMode?this.addEventListener(t,r):n.addEventListener(e,r,!0)),ae.set(i,t,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,i=b.documentMode?this:n,o=ae.get(i,t)-1;o?ae.set(i,t,o):(b.documentMode?this.removeEventListener(t,r):n.removeEventListener(e,r,!0),ae.remove(i,t))}}})),k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){k.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,n=e.relatedTarget,i=e.handleObj;return n&&(n===this||k.contains(this,n))||(e.type=i.origType,r=i.handler.apply(this,arguments),e.type=t),r}}})),k.fn.extend({on:function(e,t,r,n){return Ne(this,e,t,r,n)},one:function(e,t,r,n){return Ne(this,e,t,r,n,1)},off:function(e,t,r){var n,i;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,k(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=De),this.each((function(){k.event.remove(this,e,r,t)}))}});var $e=/<script|<style|<link/i,Le=/checked\s*(?:[^=]|=\s*.checked.)/i,Be=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ve(e,t){return R(e,"table")&&R(11!==t.nodeType?t:t.firstChild,"tr")&&k(e).children("tbody")[0]||e}function He(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ze(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ue(e,t){var r,n,i,o,s,a;if(1===t.nodeType){if(ae.hasData(e)&&(a=ae.get(e).events))for(i in ae.remove(t,"handle events"),a)for(r=0,n=a[i].length;r<n;r++)k.event.add(t,i,a[i][r]);le.hasData(e)&&(o=le.access(e),s=k.extend({},o),le.set(t,s))}}function qe(e,t){var r=t.nodeName.toLowerCase();"input"===r&&ke.test(e.type)?t.checked=e.checked:"input"!==r&&"textarea"!==r||(t.defaultValue=e.defaultValue)}function Ge(e,t,r,n){t=l(t);var i,o,s,a,u,c,h=0,d=e.length,f=d-1,p=t[0],m=v(p);if(m||d>1&&"string"==typeof p&&!g.checkClone&&Le.test(p))return e.each((function(i){var o=e.eq(i);m&&(t[0]=p.call(this,i,o.html())),Ge(o,t,r,n)}));if(d&&(o=(i=Ie(t,e[0].ownerDocument,!1,e,n)).firstChild,1===i.childNodes.length&&(i=o),o||n)){for(a=(s=k.map(Me(i,"script"),He)).length;h<d;h++)u=i,h!==f&&(u=k.clone(u,!0,!0),a&&k.merge(s,Me(u,"script"))),r.call(e[h],u,h);if(a)for(c=s[s.length-1].ownerDocument,k.map(s,ze),h=0;h<a;h++)u=s[h],Re.test(u.type||"")&&!ae.access(u,"globalEval")&&k.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?k._evalUrl&&!u.noModule&&k._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},c):C(u.textContent.replace(Be,""),u,c))}return e}function We(e,t,r){for(var n,i=t?k.filter(t,e):e,o=0;null!=(n=i[o]);o++)r||1!==n.nodeType||k.cleanData(Me(n)),n.parentNode&&(r&&ge(n)&&Pe(Me(n,"script")),n.parentNode.removeChild(n));return e}k.extend({htmlPrefilter:function(e){return e},clone:function(e,t,r){var n,i,o,s,a=e.cloneNode(!0),l=ge(e);if(!(g.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||k.isXMLDoc(e)))for(s=Me(a),n=0,i=(o=Me(e)).length;n<i;n++)qe(o[n],s[n]);if(t)if(r)for(o=o||Me(e),s=s||Me(a),n=0,i=o.length;n<i;n++)Ue(o[n],s[n]);else Ue(e,a);return(s=Me(a,"script")).length>0&&Pe(s,!l&&Me(e,"script")),a},cleanData:function(e){for(var t,r,n,i=k.event.special,o=0;void 0!==(r=e[o]);o++)if(oe(r)){if(t=r[ae.expando]){if(t.events)for(n in t.events)i[n]?k.event.remove(r,n):k.removeEvent(r,n,t.handle);r[ae.expando]=void 0}r[le.expando]&&(r[le.expando]=void 0)}}}),k.fn.extend({detach:function(e){return We(this,e,!0)},remove:function(e){return We(this,e)},text:function(e){return ee(this,(function(e){return void 0===e?k.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Ge(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ve(this,e).appendChild(e)}))},prepend:function(){return Ge(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ve(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Ge(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Ge(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(k.cleanData(Me(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return k.clone(this,e,t)}))},html:function(e){return ee(this,(function(e){var t=this[0]||{},r=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!$e.test(e)&&!Ee[(Te.exec(e)||["",""])[1].toLowerCase()]){e=k.htmlPrefilter(e);try{for(;r<n;r++)1===(t=this[r]||{}).nodeType&&(k.cleanData(Me(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Ge(this,arguments,(function(t){var r=this.parentNode;k.inArray(this,e)<0&&(k.cleanData(Me(this)),r&&r.replaceChild(t,this))}),e)}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){k.fn[e]=function(e){for(var r,n=[],i=k(e),o=i.length-1,s=0;s<=o;s++)r=s===o?this:this.clone(!0),k(i[s])[t](r),u.apply(n,r.get());return this.pushStack(n)}}));var Ke=new RegExp("^("+de+")(?!px)[a-z%]+$","i"),Je=/^--/,Xe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},Ye=function(e,t,r){var n,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in n=r.call(e),t)e.style[i]=o[i];return n},Ze=new RegExp(pe.join("|"),"i");function Qe(e,t,r){var n,i,o,s,a=Je.test(t),l=e.style;return(r=r||Xe(e))&&(s=r.getPropertyValue(t)||r[t],a&&s&&(s=s.replace(I,"$1")||void 0),""!==s||ge(e)||(s=k.style(e,t)),!g.pixelBoxStyles()&&Ke.test(s)&&Ze.test(t)&&(n=l.width,i=l.minWidth,o=l.maxWidth,l.minWidth=l.maxWidth=l.width=s,s=r.width,l.width=n,l.minWidth=i,l.maxWidth=o)),void 0!==s?s+"":s}function et(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",me.appendChild(u).appendChild(c);var e=n.getComputedStyle(c);r="1%"!==e.top,l=12===t(e.marginLeft),c.style.right="60%",s=36===t(e.right),i=36===t(e.width),c.style.position="absolute",o=12===t(c.offsetWidth/3),me.removeChild(u),c=null}}function t(e){return Math.round(parseFloat(e))}var r,i,o,s,a,l,u=b.createElement("div"),c=b.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===c.style.backgroundClip,k.extend(g,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,t,r,i;return null==a&&(e=b.createElement("table"),t=b.createElement("tr"),r=b.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",r.style.height="9px",r.style.display="block",me.appendChild(e).appendChild(t).appendChild(r),i=n.getComputedStyle(t),a=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===t.offsetHeight,me.removeChild(e)),a}}))}();var tt=["Webkit","Moz","ms"],rt=b.createElement("div").style,nt={};function it(e){var t=k.cssProps[e]||nt[e];return t||(e in rt?e:nt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),r=tt.length;r--;)if((e=tt[r]+t)in rt)return e}(e)||e)}var ot=/^(none|table(?!-c[ea]).+)/,st={position:"absolute",visibility:"hidden",display:"block"},at={letterSpacing:"0",fontWeight:"400"};function lt(e,t,r){var n=fe.exec(t);return n?Math.max(0,n[2]-(r||0))+(n[3]||"px"):t}function ut(e,t,r,n,i,o){var s="width"===t?1:0,a=0,l=0,u=0;if(r===(n?"border":"content"))return 0;for(;s<4;s+=2)"margin"===r&&(u+=k.css(e,r+pe[s],!0,i)),n?("content"===r&&(l-=k.css(e,"padding"+pe[s],!0,i)),"margin"!==r&&(l-=k.css(e,"border"+pe[s]+"Width",!0,i))):(l+=k.css(e,"padding"+pe[s],!0,i),"padding"!==r?l+=k.css(e,"border"+pe[s]+"Width",!0,i):a+=k.css(e,"border"+pe[s]+"Width",!0,i));return!n&&o>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-a-.5))||0),l+u}function ct(e,t,r){var n=Xe(e),i=(!g.boxSizingReliable()||r)&&"border-box"===k.css(e,"boxSizing",!1,n),o=i,s=Qe(e,t,n),a="offset"+t[0].toUpperCase()+t.slice(1);if(Ke.test(s)){if(!r)return s;s="auto"}return(!g.boxSizingReliable()&&i||!g.reliableTrDimensions()&&R(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===k.css(e,"display",!1,n))&&e.getClientRects().length&&(i="border-box"===k.css(e,"boxSizing",!1,n),(o=a in e)&&(s=e[a])),(s=parseFloat(s)||0)+ut(e,t,r||(i?"border":"content"),o,n,s)+"px"}function ht(e,t,r,n,i){return new ht.prototype.init(e,t,r,n,i)}k.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=Qe(e,"opacity");return""===r?"1":r}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,r,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=ie(t),l=Je.test(t),u=e.style;if(l||(t=it(a)),s=k.cssHooks[t]||k.cssHooks[a],void 0===r)return s&&"get"in s&&void 0!==(i=s.get(e,!1,n))?i:u[t];"string"===(o=typeof r)&&(i=fe.exec(r))&&i[1]&&(r=be(e,t,i),o="number"),null!=r&&r==r&&("number"!==o||l||(r+=i&&i[3]||(k.cssNumber[a]?"":"px")),g.clearCloneStyle||""!==r||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(r=s.set(e,r,n))||(l?u.setProperty(t,r):u[t]=r))}},css:function(e,t,r,n){var i,o,s,a=ie(t);return Je.test(t)||(t=it(a)),(s=k.cssHooks[t]||k.cssHooks[a])&&"get"in s&&(i=s.get(e,!0,r)),void 0===i&&(i=Qe(e,t,n)),"normal"===i&&t in at&&(i=at[t]),""===r||r?(o=parseFloat(i),!0===r||isFinite(o)?o||0:i):i}}),k.each(["height","width"],(function(e,t){k.cssHooks[t]={get:function(e,r,n){if(r)return!ot.test(k.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ct(e,t,n):Ye(e,st,(function(){return ct(e,t,n)}))},set:function(e,r,n){var i,o=Xe(e),s=!g.scrollboxSize()&&"absolute"===o.position,a=(s||n)&&"border-box"===k.css(e,"boxSizing",!1,o),l=n?ut(e,t,n,a,o):0;return a&&s&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-ut(e,t,"border",!1,o)-.5)),l&&(i=fe.exec(r))&&"px"!==(i[3]||"px")&&(e.style[t]=r,r=k.css(e,t)),lt(0,r,l)}}})),k.cssHooks.marginLeft=et(g.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Qe(e,"marginLeft"))||e.getBoundingClientRect().left-Ye(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),k.each({margin:"",padding:"",border:"Width"},(function(e,t){k.cssHooks[e+t]={expand:function(r){for(var n=0,i={},o="string"==typeof r?r.split(" "):[r];n<4;n++)i[e+pe[n]+t]=o[n]||o[n-2]||o[0];return i}},"margin"!==e&&(k.cssHooks[e+t].set=lt)})),k.fn.extend({css:function(e,t){return ee(this,(function(e,t,r){var n,i,o={},s=0;if(Array.isArray(t)){for(n=Xe(e),i=t.length;s<i;s++)o[t[s]]=k.css(e,t[s],!1,n);return o}return void 0!==r?k.style(e,t,r):k.css(e,t)}),e,t,arguments.length>1)}}),k.Tween=ht,ht.prototype={constructor:ht,init:function(e,t,r,n,i,o){this.elem=e,this.prop=r,this.easing=i||k.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(k.cssNumber[r]?"":"px")},cur:function(){var e=ht.propHooks[this.prop];return e&&e.get?e.get(this):ht.propHooks._default.get(this)},run:function(e){var t,r=ht.propHooks[this.prop];return this.options.duration?this.pos=t=k.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):ht.propHooks._default.set(this),this}},ht.prototype.init.prototype=ht.prototype,ht.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=k.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){k.fx.step[e.prop]?k.fx.step[e.prop](e):1!==e.elem.nodeType||!k.cssHooks[e.prop]&&null==e.elem.style[it(e.prop)]?e.elem[e.prop]=e.now:k.style(e.elem,e.prop,e.now+e.unit)}}},ht.propHooks.scrollTop=ht.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},k.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},k.fx=ht.prototype.init,k.fx.step={};var dt,ft,pt=/^(?:toggle|show|hide)$/,mt=/queueHooks$/;function gt(){ft&&(!1===b.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(gt):n.setTimeout(gt,k.fx.interval),k.fx.tick())}function vt(){return n.setTimeout((function(){dt=void 0})),dt=Date.now()}function yt(e,t){var r,n=0,i={height:e};for(t=t?1:0;n<4;n+=2-t)i["margin"+(r=pe[n])]=i["padding"+r]=e;return t&&(i.opacity=i.width=e),i}function bt(e,t,r){for(var n,i=(wt.tweeners[t]||[]).concat(wt.tweeners["*"]),o=0,s=i.length;o<s;o++)if(n=i[o].call(r,t,e))return n}function wt(e,t,r){var n,i,o=0,s=wt.prefilters.length,a=k.Deferred().always((function(){delete l.elem})),l=function(){if(i)return!1;for(var t=dt||vt(),r=Math.max(0,u.startTime+u.duration-t),n=1-(r/u.duration||0),o=0,s=u.tweens.length;o<s;o++)u.tweens[o].run(n);return a.notifyWith(e,[u,n,r]),n<1&&s?r:(s||a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u]),!1)},u=a.promise({elem:e,props:k.extend({},t),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},r),originalProperties:t,originalOptions:r,startTime:dt||vt(),duration:r.duration,tweens:[],createTween:function(t,r){var n=k.Tween(e,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var r=0,n=t?u.tweens.length:0;if(i)return this;for(i=!0;r<n;r++)u.tweens[r].run(1);return t?(a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u,t])):a.rejectWith(e,[u,t]),this}}),c=u.props;for(!function(e,t){var r,n,i,o,s;for(r in e)if(i=t[n=ie(r)],o=e[r],Array.isArray(o)&&(i=o[1],o=e[r]=o[0]),r!==n&&(e[n]=o,delete e[r]),(s=k.cssHooks[n])&&"expand"in s)for(r in o=s.expand(o),delete e[n],o)r in e||(e[r]=o[r],t[r]=i);else t[n]=i}(c,u.opts.specialEasing);o<s;o++)if(n=wt.prefilters[o].call(u,e,c,u.opts))return v(n.stop)&&(k._queueHooks(u.elem,u.opts.queue).stop=n.stop.bind(n)),n;return k.map(c,bt,u),v(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),k.fx.timer(k.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u}k.Animation=k.extend(wt,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);return be(r.elem,e,fe.exec(t),r),r}]},tweener:function(e,t){v(e)?(t=e,e=["*"]):e=e.match(W);for(var r,n=0,i=e.length;n<i;n++)r=e[n],wt.tweeners[r]=wt.tweeners[r]||[],wt.tweeners[r].unshift(t)},prefilters:[function(e,t,r){var n,i,o,s,a,l,u,c,h="width"in t||"height"in t,d=this,f={},p=e.style,m=e.nodeType&&ye(e),g=ae.get(e,"fxshow");for(n in r.queue||(null==(s=k._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always((function(){d.always((function(){s.unqueued--,k.queue(e,"fx").length||s.empty.fire()}))}))),t)if(i=t[n],pt.test(i)){if(delete t[n],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[n])continue;m=!0}f[n]=g&&g[n]||k.style(e,n)}if((l=!k.isEmptyObject(t))||!k.isEmptyObject(f))for(n in h&&1===e.nodeType&&(r.overflow=[p.overflow,p.overflowX,p.overflowY],null==(u=g&&g.display)&&(u=ae.get(e,"display")),"none"===(c=k.css(e,"display"))&&(u?c=u:(_e([e],!0),u=e.style.display||u,c=k.css(e,"display"),_e([e]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===k.css(e,"float")&&(l||(d.done((function(){p.display=u})),null==u&&(c=p.display,u="none"===c?"":c)),p.display="inline-block")),r.overflow&&(p.overflow="hidden",d.always((function(){p.overflow=r.overflow[0],p.overflowX=r.overflow[1],p.overflowY=r.overflow[2]}))),l=!1,f)l||(g?"hidden"in g&&(m=g.hidden):g=ae.access(e,"fxshow",{display:u}),o&&(g.hidden=!m),m&&_e([e],!0),d.done((function(){for(n in m||_e([e]),ae.remove(e,"fxshow"),f)k.style(e,n,f[n])}))),l=bt(m?g[n]:0,n,d),n in g||(g[n]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?wt.prefilters.unshift(e):wt.prefilters.push(e)}}),k.speed=function(e,t,r){var n=e&&"object"==typeof e?k.extend({},e):{complete:r||!r&&t||v(e)&&e,duration:e,easing:r&&t||t&&!v(t)&&t};return k.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in k.fx.speeds?n.duration=k.fx.speeds[n.duration]:n.duration=k.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){v(n.old)&&n.old.call(this),n.queue&&k.dequeue(this,n.queue)},n},k.fn.extend({fadeTo:function(e,t,r,n){return this.filter(ye).css("opacity",0).show().end().animate({opacity:t},e,r,n)},animate:function(e,t,r,n){var i=k.isEmptyObject(e),o=k.speed(t,r,n),s=function(){var t=wt(this,k.extend({},e),o);(i||ae.get(this,"finish"))&&t.stop(!0)};return s.finish=s,i||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(e,t,r){var n=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",o=k.timers,s=ae.get(this);if(i)s[i]&&s[i].stop&&n(s[i]);else for(i in s)s[i]&&s[i].stop&&mt.test(i)&&n(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(r),t=!1,o.splice(i,1));!t&&r||k.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,r=ae.get(this),n=r[e+"queue"],i=r[e+"queueHooks"],o=k.timers,s=n?n.length:0;for(r.finish=!0,k.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<s;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete r.finish}))}}),k.each(["toggle","show","hide"],(function(e,t){var r=k.fn[t];k.fn[t]=function(e,n,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(yt(t,!0),e,n,i)}})),k.each({slideDown:yt("show"),slideUp:yt("hide"),slideToggle:yt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){k.fn[e]=function(e,r,n){return this.animate(t,e,r,n)}})),k.timers=[],k.fx.tick=function(){var e,t=0,r=k.timers;for(dt=Date.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||k.fx.stop(),dt=void 0},k.fx.timer=function(e){k.timers.push(e),k.fx.start()},k.fx.interval=13,k.fx.start=function(){ft||(ft=!0,gt())},k.fx.stop=function(){ft=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function(e,t){return e=k.fx&&k.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,r){var i=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(i)}}))},function(){var e=b.createElement("input"),t=b.createElement("select").appendChild(b.createElement("option"));e.type="checkbox",g.checkOn=""!==e.value,g.optSelected=t.selected,(e=b.createElement("input")).value="t",e.type="radio",g.radioValue="t"===e.value}();var Ct,_t=k.expr.attrHandle;k.fn.extend({attr:function(e,t){return ee(this,k.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){k.removeAttr(this,e)}))}}),k.extend({attr:function(e,t,r){var n,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?k.prop(e,t,r):(1===o&&k.isXMLDoc(e)||(i=k.attrHooks[t.toLowerCase()]||(k.expr.match.bool.test(t)?Ct:void 0)),void 0!==r?null===r?void k.removeAttr(e,t):i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:(e.setAttribute(t,r+""),r):i&&"get"in i&&null!==(n=i.get(e,t))?n:null==(n=k.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&"radio"===t&&R(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}},removeAttr:function(e,t){var r,n=0,i=t&&t.match(W);if(i&&1===e.nodeType)for(;r=i[n++];)e.removeAttribute(r)}}),Ct={set:function(e,t,r){return!1===t?k.removeAttr(e,r):e.setAttribute(r,r),r}},k.each(k.expr.match.bool.source.match(/\w+/g),(function(e,t){var r=_t[t]||k.find.attr;_t[t]=function(e,t,n){var i,o,s=t.toLowerCase();return n||(o=_t[s],_t[s]=i,i=null!=r(e,t,n)?s:null,_t[s]=o),i}}));var St=/^(?:input|select|textarea|button)$/i,xt=/^(?:a|area)$/i;function kt(e){return(e.match(W)||[]).join(" ")}function Tt(e){return e.getAttribute&&e.getAttribute("class")||""}function Rt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(W)||[]}k.fn.extend({prop:function(e,t){return ee(this,k.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[k.propFix[e]||e]}))}}),k.extend({prop:function(e,t,r){var n,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&k.isXMLDoc(e)||(t=k.propFix[t]||t,i=k.propHooks[t]),void 0!==r?i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:e[t]=r:i&&"get"in i&&null!==(n=i.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=k.find.attr(e,"tabindex");return t?parseInt(t,10):St.test(e.nodeName)||xt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(k.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){k.propFix[this.toLowerCase()]=this})),k.fn.extend({addClass:function(e){var t,r,n,i,o,s;return v(e)?this.each((function(t){k(this).addClass(e.call(this,t,Tt(this)))})):(t=Rt(e)).length?this.each((function(){if(n=Tt(this),r=1===this.nodeType&&" "+kt(n)+" "){for(o=0;o<t.length;o++)i=t[o],r.indexOf(" "+i+" ")<0&&(r+=i+" ");s=kt(r),n!==s&&this.setAttribute("class",s)}})):this},removeClass:function(e){var t,r,n,i,o,s;return v(e)?this.each((function(t){k(this).removeClass(e.call(this,t,Tt(this)))})):arguments.length?(t=Rt(e)).length?this.each((function(){if(n=Tt(this),r=1===this.nodeType&&" "+kt(n)+" "){for(o=0;o<t.length;o++)for(i=t[o];r.indexOf(" "+i+" ")>-1;)r=r.replace(" "+i+" "," ");s=kt(r),n!==s&&this.setAttribute("class",s)}})):this:this.attr("class","")},toggleClass:function(e,t){var r,n,i,o,s=typeof e,a="string"===s||Array.isArray(e);return v(e)?this.each((function(r){k(this).toggleClass(e.call(this,r,Tt(this),t),t)})):"boolean"==typeof t&&a?t?this.addClass(e):this.removeClass(e):(r=Rt(e),this.each((function(){if(a)for(o=k(this),i=0;i<r.length;i++)n=r[i],o.hasClass(n)?o.removeClass(n):o.addClass(n);else void 0!==e&&"boolean"!==s||((n=Tt(this))&&ae.set(this,"__className__",n),this.setAttribute&&this.setAttribute("class",n||!1===e?"":ae.get(this,"__className__")||""))})))},hasClass:function(e){var t,r,n=0;for(t=" "+e+" ";r=this[n++];)if(1===r.nodeType&&(" "+kt(Tt(r))+" ").indexOf(t)>-1)return!0;return!1}});var Et=/\r/g;k.fn.extend({val:function(e){var t,r,n,i=this[0];return arguments.length?(n=v(e),this.each((function(r){var i;1===this.nodeType&&(null==(i=n?e.call(this,r,k(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=k.map(i,(function(e){return null==e?"":e+""}))),(t=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=k.valHooks[i.type]||k.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(i,"value"))?r:"string"==typeof(r=i.value)?r.replace(Et,""):null==r?"":r:void 0}}),k.extend({valHooks:{option:{get:function(e){var t=k.find.attr(e,"value");return null!=t?t:kt(k.text(e))}},select:{get:function(e){var t,r,n,i=e.options,o=e.selectedIndex,s="select-one"===e.type,a=s?null:[],l=s?o+1:i.length;for(n=o<0?l:s?o:0;n<l;n++)if(((r=i[n]).selected||n===o)&&!r.disabled&&(!r.parentNode.disabled||!R(r.parentNode,"optgroup"))){if(t=k(r).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var r,n,i=e.options,o=k.makeArray(t),s=i.length;s--;)((n=i[s]).selected=k.inArray(k.valHooks.option.get(n),o)>-1)&&(r=!0);return r||(e.selectedIndex=-1),o}}}}),k.each(["radio","checkbox"],(function(){k.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=k.inArray(k(e).val(),t)>-1}},g.checkOn||(k.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var Mt=n.location,Pt={guid:Date.now()},Ot=/\?/;k.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){}return r=t&&t.getElementsByTagName("parsererror")[0],t&&!r||k.error("Invalid XML: "+(r?k.map(r.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var It=/^(?:focusinfocus|focusoutblur)$/,At=function(e){e.stopPropagation()};k.extend(k.event,{trigger:function(e,t,r,i){var o,s,a,l,u,c,h,d,p=[r||b],m=f.call(e,"type")?e.type:e,g=f.call(e,"namespace")?e.namespace.split("."):[];if(s=d=a=r=r||b,3!==r.nodeType&&8!==r.nodeType&&!It.test(m+k.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),u=m.indexOf(":")<0&&"on"+m,(e=e[k.expando]?e:new k.Event(m,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:k.makeArray(t,[e]),h=k.event.special[m]||{},i||!h.trigger||!1!==h.trigger.apply(r,t))){if(!i&&!h.noBubble&&!y(r)){for(l=h.delegateType||m,It.test(l+m)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(r.ownerDocument||b)&&p.push(a.defaultView||a.parentWindow||n)}for(o=0;(s=p[o++])&&!e.isPropagationStopped();)d=s,e.type=o>1?l:h.bindType||m,(c=(ae.get(s,"events")||Object.create(null))[e.type]&&ae.get(s,"handle"))&&c.apply(s,t),(c=u&&s[u])&&c.apply&&oe(s)&&(e.result=c.apply(s,t),!1===e.result&&e.preventDefault());return e.type=m,i||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),t)||!oe(r)||u&&v(r[m])&&!y(r)&&((a=r[u])&&(r[u]=null),k.event.triggered=m,e.isPropagationStopped()&&d.addEventListener(m,At),r[m](),e.isPropagationStopped()&&d.removeEventListener(m,At),k.event.triggered=void 0,a&&(r[u]=a)),e.result}},simulate:function(e,t,r){var n=k.extend(new k.Event,r,{type:e,isSimulated:!0});k.event.trigger(n,null,t)}}),k.fn.extend({trigger:function(e,t){return this.each((function(){k.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var r=this[0];if(r)return k.event.trigger(e,t,r,!0)}});var jt=/\[\]$/,Dt=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,Ft=/^(?:input|select|textarea|keygen)/i;function $t(e,t,r,n){var i;if(Array.isArray(t))k.each(t,(function(t,i){r||jt.test(e)?n(e,i):$t(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,r,n)}));else if(r||"object"!==_(t))n(e,t);else for(i in t)$t(e+"["+i+"]",t[i],r,n)}k.param=function(e,t){var r,n=[],i=function(e,t){var r=v(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==r?"":r)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!k.isPlainObject(e))k.each(e,(function(){i(this.name,this.value)}));else for(r in e)$t(r,e[r],t,i);return n.join("&")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=k.prop(this,"elements");return e?k.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!k(this).is(":disabled")&&Ft.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!ke.test(e))})).map((function(e,t){var r=k(this).val();return null==r?null:Array.isArray(r)?k.map(r,(function(e){return{name:t.name,value:e.replace(Dt,"\r\n")}})):{name:t.name,value:r.replace(Dt,"\r\n")}})).get()}});var Lt=/%20/g,Bt=/#.*$/,Vt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,zt=/^(?:GET|HEAD)$/,Ut=/^\/\//,qt={},Gt={},Wt="*/".concat("*"),Kt=b.createElement("a");function Jt(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var n,i=0,o=t.toLowerCase().match(W)||[];if(v(r))for(;n=o[i++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(r)):(e[n]=e[n]||[]).push(r)}}function Xt(e,t,r,n){var i={},o=e===Gt;function s(a){var l;return i[a]=!0,k.each(e[a]||[],(function(e,a){var u=a(t,r,n);return"string"!=typeof u||o||i[u]?o?!(l=u):void 0:(t.dataTypes.unshift(u),s(u),!1)})),l}return s(t.dataTypes[0])||!i["*"]&&s("*")}function Yt(e,t){var r,n,i=k.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&k.extend(!0,e,n),e}Kt.href=Mt.href,k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Mt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Mt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Wt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Yt(Yt(e,k.ajaxSettings),t):Yt(k.ajaxSettings,e)},ajaxPrefilter:Jt(qt),ajaxTransport:Jt(Gt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,s,a,l,u,c,h,d,f=k.ajaxSetup({},t),p=f.context||f,m=f.context&&(p.nodeType||p.jquery)?k(p):k.event,g=k.Deferred(),v=k.Callbacks("once memory"),y=f.statusCode||{},w={},C={},_="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(u){if(!s)for(s={};t=Ht.exec(o);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(e,t){return null==u&&(e=C[e.toLowerCase()]=C[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==u&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)S.always(e[S.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||_;return r&&r.abort(t),x(0,t),this}};if(g.promise(S),f.url=((e||f.url||Mt.href)+"").replace(Ut,Mt.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(W)||[""],null==f.crossDomain){l=b.createElement("a");try{l.href=f.url,l.href=l.href,f.crossDomain=Kt.protocol+"//"+Kt.host!=l.protocol+"//"+l.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=k.param(f.data,f.traditional)),Xt(qt,f,t,S),u)return S;for(h in(c=k.event&&f.global)&&0==k.active++&&k.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!zt.test(f.type),i=f.url.replace(Bt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Lt,"+")):(d=f.url.slice(i.length),f.data&&(f.processData||"string"==typeof f.data)&&(i+=(Ot.test(i)?"&":"?")+f.data,delete f.data),!1===f.cache&&(i=i.replace(Vt,"$1"),d=(Ot.test(i)?"&":"?")+"_="+Pt.guid+++d),f.url=i+d),f.ifModified&&(k.lastModified[i]&&S.setRequestHeader("If-Modified-Since",k.lastModified[i]),k.etag[i]&&S.setRequestHeader("If-None-Match",k.etag[i])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&S.setRequestHeader("Content-Type",f.contentType),S.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Wt+"; q=0.01":""):f.accepts["*"]),f.headers)S.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(p,S,f)||u))return S.abort();if(_="abort",v.add(f.complete),S.done(f.success),S.fail(f.error),r=Xt(Gt,f,t,S)){if(S.readyState=1,c&&m.trigger("ajaxSend",[S,f]),u)return S;f.async&&f.timeout>0&&(a=n.setTimeout((function(){S.abort("timeout")}),f.timeout));try{u=!1,r.send(w,x)}catch(e){if(u)throw e;x(-1,e)}}else x(-1,"No Transport");function x(e,t,s,l){var h,d,b,w,C,_=t;u||(u=!0,a&&n.clearTimeout(a),r=void 0,o=l||"",S.readyState=e>0?4:0,h=e>=200&&e<300||304===e,s&&(w=function(e,t,r){for(var n,i,o,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(i in a)if(a[i]&&a[i].test(n)){l.unshift(i);break}if(l[0]in r)o=l[0];else{for(i in r){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}s||(s=i)}o=o||s}if(o)return o!==l[0]&&l.unshift(o),r[o]}(f,S,s)),!h&&k.inArray("script",f.dataTypes)>-1&&k.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),w=function(e,t,r,n){var i,o,s,a,l,u={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(r[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=u[l+" "+o]||u["* "+o]))for(i in u)if((a=i.split(" "))[1]===o&&(s=u[l+" "+a[0]]||u["* "+a[0]])){!0===s?s=u[i]:!0!==u[i]&&(o=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(f,w,S,h),h?(f.ifModified&&((C=S.getResponseHeader("Last-Modified"))&&(k.lastModified[i]=C),(C=S.getResponseHeader("etag"))&&(k.etag[i]=C)),204===e||"HEAD"===f.type?_="nocontent":304===e?_="notmodified":(_=w.state,d=w.data,h=!(b=w.error))):(b=_,!e&&_||(_="error",e<0&&(e=0))),S.status=e,S.statusText=(t||_)+"",h?g.resolveWith(p,[d,_,S]):g.rejectWith(p,[S,_,b]),S.statusCode(y),y=void 0,c&&m.trigger(h?"ajaxSuccess":"ajaxError",[S,f,h?d:b]),v.fireWith(p,[S,_]),c&&(m.trigger("ajaxComplete",[S,f]),--k.active||k.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,r){return k.get(e,t,r,"json")},getScript:function(e,t){return k.get(e,void 0,t,"script")}}),k.each(["get","post"],(function(e,t){k[t]=function(e,r,n,i){return v(r)&&(i=i||n,n=r,r=void 0),k.ajax(k.extend({url:e,type:t,dataType:i,data:r,success:n},k.isPlainObject(e)&&e))}})),k.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),k._evalUrl=function(e,t,r){return k.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){k.globalEval(e,t,r)}})},k.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=k(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return v(e)?this.each((function(t){k(this).wrapInner(e.call(this,t))})):this.each((function(){var t=k(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)}))},wrap:function(e){var t=v(e);return this.each((function(r){k(this).wrapAll(t?e.call(this,r):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){k(this).replaceWith(this.childNodes)})),this}}),k.expr.pseudos.hidden=function(e){return!k.expr.pseudos.visible(e)},k.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},k.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Zt={0:200,1223:204},Qt=k.ajaxSettings.xhr();g.cors=!!Qt&&"withCredentials"in Qt,g.ajax=Qt=!!Qt,k.ajaxTransport((function(e){var t,r;if(g.cors||Qt&&!e.crossDomain)return{send:function(i,o){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];for(s in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)a.setRequestHeader(s,i[s]);t=function(e){return function(){t&&(t=r=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Zt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),r=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=r:a.onreadystatechange=function(){4===a.readyState&&n.setTimeout((function(){t&&r()}))},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),k.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return k.globalEval(e),e}}}),k.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),k.ajaxTransport("script",(function(e){var t,r;if(e.crossDomain||e.scriptAttrs)return{send:function(n,i){t=k("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&i("error"===e.type?404:200,e.type)}),b.head.appendChild(t[0])},abort:function(){r&&r()}}}));var er,tr=[],rr=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=tr.pop()||k.expando+"_"+Pt.guid++;return this[e]=!0,e}}),k.ajaxPrefilter("json jsonp",(function(e,t,r){var i,o,s,a=!1!==e.jsonp&&(rr.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&rr.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(rr,"$1"+i):!1!==e.jsonp&&(e.url+=(Ot.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return s||k.error(i+" was not called"),s[0]},e.dataTypes[0]="json",o=n[i],n[i]=function(){s=arguments},r.always((function(){void 0===o?k(n).removeProp(i):n[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,tr.push(i)),s&&v(o)&&o(s[0]),s=o=void 0})),"script"})),g.createHTMLDocument=((er=b.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===er.childNodes.length),k.parseHTML=function(e,t,r){return"string"!=typeof e?[]:("boolean"==typeof t&&(r=t,t=!1),t||(g.createHTMLDocument?((n=(t=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,t.head.appendChild(n)):t=b),o=!r&&[],(i=B.exec(e))?[t.createElement(i[1])]:(i=Ie([e],t,o),o&&o.length&&k(o).remove(),k.merge([],i.childNodes)));var n,i,o},k.fn.load=function(e,t,r){var n,i,o,s=this,a=e.indexOf(" ");return a>-1&&(n=kt(e.slice(a)),e=e.slice(0,a)),v(t)?(r=t,t=void 0):t&&"object"==typeof t&&(i="POST"),s.length>0&&k.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done((function(e){o=arguments,s.html(n?k("<div>").append(k.parseHTML(e)).find(n):e)})).always(r&&function(e,t){s.each((function(){r.apply(this,o||[e.responseText,t,e])}))}),this},k.expr.pseudos.animated=function(e){return k.grep(k.timers,(function(t){return e===t.elem})).length},k.offset={setOffset:function(e,t,r){var n,i,o,s,a,l,u=k.css(e,"position"),c=k(e),h={};"static"===u&&(e.style.position="relative"),a=c.offset(),o=k.css(e,"top"),l=k.css(e,"left"),("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1?(s=(n=c.position()).top,i=n.left):(s=parseFloat(o)||0,i=parseFloat(l)||0),v(t)&&(t=t.call(e,r,k.extend({},a))),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+i),"using"in t?t.using.call(e,h):c.css(h)}},k.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){k.offset.setOffset(this,e,t)}));var t,r,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),r=n.ownerDocument.defaultView,{top:t.top+r.pageYOffset,left:t.left+r.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,r,n=this[0],i={top:0,left:0};if("fixed"===k.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),r=n.ownerDocument,e=n.offsetParent||r.documentElement;e&&(e===r.body||e===r.documentElement)&&"static"===k.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((i=k(e).offset()).top+=k.css(e,"borderTopWidth",!0),i.left+=k.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-k.css(n,"marginTop",!0),left:t.left-i.left-k.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===k.css(e,"position");)e=e.offsetParent;return e||me}))}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var r="pageYOffset"===t;k.fn[e]=function(n){return ee(this,(function(e,n,i){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[n];o?o.scrollTo(r?o.pageXOffset:i,r?i:o.pageYOffset):e[n]=i}),e,n,arguments.length)}})),k.each(["top","left"],(function(e,t){k.cssHooks[t]=et(g.pixelPosition,(function(e,r){if(r)return r=Qe(e,t),Ke.test(r)?k(e).position()[t]+"px":r}))})),k.each({Height:"height",Width:"width"},(function(e,t){k.each({padding:"inner"+e,content:t,"":"outer"+e},(function(r,n){k.fn[n]=function(i,o){var s=arguments.length&&(r||"boolean"!=typeof i),a=r||(!0===i||!0===o?"margin":"border");return ee(this,(function(t,r,i){var o;return y(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?k.css(t,r,a):k.style(t,r,i,a)}),t,s?i:void 0,s)}}))})),k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){k.fn[t]=function(e){return this.on(t,e)}})),k.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,n){return this.on(t,e,r,n)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){k.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}}));var nr=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;k.proxy=function(e,t){var r,n,i;if("string"==typeof t&&(r=e[t],t=e,e=r),v(e))return n=a.call(arguments,2),i=function(){return e.apply(t||this,n.concat(a.call(arguments)))},i.guid=e.guid=e.guid||k.guid++,i},k.holdReady=function(e){e?k.readyWait++:k.ready(!0)},k.isArray=Array.isArray,k.parseJSON=JSON.parse,k.nodeName=R,k.isFunction=v,k.isWindow=y,k.camelCase=ie,k.type=_,k.now=Date.now,k.isNumeric=function(e){var t=k.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},k.trim=function(e){return null==e?"":(e+"").replace(nr,"$1")},void 0===(r=function(){return k}.apply(t,[]))||(e.exports=r);var ir=n.jQuery,or=n.$;return k.noConflict=function(e){return n.$===k&&(n.$=or),e&&n.jQuery===k&&(n.jQuery=ir),k},void 0===i&&(n.jQuery=n.$=k),k}))},1232:(e,t,r)=>{var n,i,o;i=[r(9755)],void 0===(o="function"==typeof(n=function(t){var n,i,o,s,a;n=function(){var e,r="mCustomScrollbar",n="mCS",i=".mCustomScrollbar",o={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,documentTouchScroll:!0,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},s=0,a={},l=window.attachEvent&&!window.addEventListener?1:0,u=!1,c=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],h={init:function(e){e=t.extend(!0,{},o,e);var r=d.call(this);if(e.live){var l=e.liveSelector||this.selector||i,u=t(l);if("off"===e.live)return void p(l);a[l]=setTimeout((function(){u.mCustomScrollbar(e),"once"===e.live&&u.length&&p(l)}),500)}else p(l);return e.setWidth=e.set_width?e.set_width:e.setWidth,e.setHeight=e.set_height?e.set_height:e.setHeight,e.axis=e.horizontalScroll?"x":m(e.axis),e.scrollInertia=e.scrollInertia>0&&e.scrollInertia<17?17:e.scrollInertia,"object"!=typeof e.mouseWheel&&1==e.mouseWheel&&(e.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),e.mouseWheel.scrollAmount=e.mouseWheelPixels?e.mouseWheelPixels:e.mouseWheel.scrollAmount,e.mouseWheel.normalizeDelta=e.advanced.normalizeMouseWheelDelta?e.advanced.normalizeMouseWheelDelta:e.mouseWheel.normalizeDelta,e.scrollButtons.scrollType=g(e.scrollButtons.scrollType),f(e),t(r).each((function(){var r=t(this);if(!r.data(n)){r.data(n,{idx:++s,opt:e,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:r.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var i=r.data(n),o=i.opt,a=r.data("mcs-axis"),l=r.data("mcs-scrollbar-position"),u=r.data("mcs-theme");a&&(o.axis=a),l&&(o.scrollbarPosition=l),u&&(o.theme=u,f(o)),v.call(this),i&&o.callbacks.onCreate&&"function"==typeof o.callbacks.onCreate&&o.callbacks.onCreate.call(this),t("#mCSB_"+i.idx+"_container img:not(."+c[2]+")").addClass(c[2]),h.update.call(null,r)}}))},update:function(e,r){var i=e||d.call(this);return t(i).each((function(){var e=t(this);if(e.data(n)){var i=e.data(n),o=i.opt,s=t("#mCSB_"+i.idx+"_container"),a=t("#mCSB_"+i.idx),l=[t("#mCSB_"+i.idx+"_dragger_vertical"),t("#mCSB_"+i.idx+"_dragger_horizontal")];if(!s.length)return;i.tweenRunning&&K(e),r&&i&&o.callbacks.onBeforeUpdate&&"function"==typeof o.callbacks.onBeforeUpdate&&o.callbacks.onBeforeUpdate.call(this),e.hasClass(c[3])&&e.removeClass(c[3]),e.hasClass(c[4])&&e.removeClass(c[4]),a.css("max-height","none"),a.height()!==e.height()&&a.css("max-height",e.height()),b.call(this),"y"===o.axis||o.advanced.autoExpandHorizontalScroll||s.css("width",y(s)),i.overflowed=x.call(this),E.call(this),o.autoDraggerLength&&C.call(this),_.call(this),T.call(this);var u=[Math.abs(s[0].offsetTop),Math.abs(s[0].offsetLeft)];"x"!==o.axis&&(i.overflowed[0]?l[0].height()>l[0].parent().height()?k.call(this):(J(e,u[0].toString(),{dir:"y",dur:0,overwrite:"none"}),i.contentReset.y=null):(k.call(this),"y"===o.axis?R.call(this):"yx"===o.axis&&i.overflowed[1]&&J(e,u[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==o.axis&&(i.overflowed[1]?l[1].width()>l[1].parent().width()?k.call(this):(J(e,u[1].toString(),{dir:"x",dur:0,overwrite:"none"}),i.contentReset.x=null):(k.call(this),"x"===o.axis?R.call(this):"yx"===o.axis&&i.overflowed[0]&&J(e,u[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),r&&i&&(2===r&&o.callbacks.onImageLoad&&"function"==typeof o.callbacks.onImageLoad?o.callbacks.onImageLoad.call(this):3===r&&o.callbacks.onSelectorChange&&"function"==typeof o.callbacks.onSelectorChange?o.callbacks.onSelectorChange.call(this):o.callbacks.onUpdate&&"function"==typeof o.callbacks.onUpdate&&o.callbacks.onUpdate.call(this)),G.call(this)}}))},scrollTo:function(e,r){if(void 0!==e&&null!=e){var i=d.call(this);return t(i).each((function(){var i=t(this);if(i.data(n)){var o=i.data(n),s=o.opt,a={trigger:"external",scrollInertia:s.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},l=t.extend(!0,{},a,r),u=U.call(this,e),c=l.scrollInertia>0&&l.scrollInertia<17?17:l.scrollInertia;u[0]=q.call(this,u[0],"y"),u[1]=q.call(this,u[1],"x"),l.moveDragger&&(u[0]*=o.scrollRatio.y,u[1]*=o.scrollRatio.x),l.dur=ie()?0:c,setTimeout((function(){null!==u[0]&&void 0!==u[0]&&"x"!==s.axis&&o.overflowed[0]&&(l.dir="y",l.overwrite="all",J(i,u[0].toString(),l)),null!==u[1]&&void 0!==u[1]&&"y"!==s.axis&&o.overflowed[1]&&(l.dir="x",l.overwrite="none",J(i,u[1].toString(),l))}),l.timeout)}}))}},stop:function(){var e=d.call(this);return t(e).each((function(){var e=t(this);e.data(n)&&K(e)}))},disable:function(e){var r=d.call(this);return t(r).each((function(){var r=t(this);r.data(n)&&(r.data(n),G.call(this,"remove"),R.call(this),e&&k.call(this),E.call(this,!0),r.addClass(c[3]))}))},destroy:function(){var e=d.call(this);return t(e).each((function(){var i=t(this);if(i.data(n)){var o=i.data(n),s=o.opt,a=t("#mCSB_"+o.idx),l=t("#mCSB_"+o.idx+"_container"),u=t(".mCSB_"+o.idx+"_scrollbar");s.live&&p(s.liveSelector||t(e).selector),G.call(this,"remove"),R.call(this),k.call(this),i.removeData(n),Q(this,"mcs"),u.remove(),l.find("img."+c[2]).removeClass(c[2]),a.replaceWith(l.contents()),i.removeClass(r+" _"+n+"_"+o.idx+" "+c[6]+" "+c[7]+" "+c[5]+" "+c[3]).addClass(c[4])}}))}},d=function(){return"object"!=typeof t(this)||t(this).length<1?i:this},f=function(e){var r=["rounded","rounded-dark","rounded-dots","rounded-dots-dark"],n=["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"],i=["minimal","minimal-dark"],o=["minimal","minimal-dark"],s=["minimal","minimal-dark"];e.autoDraggerLength=!(t.inArray(e.theme,r)>-1)&&e.autoDraggerLength,e.autoExpandScrollbar=!(t.inArray(e.theme,n)>-1)&&e.autoExpandScrollbar,e.scrollButtons.enable=!(t.inArray(e.theme,i)>-1)&&e.scrollButtons.enable,e.autoHideScrollbar=t.inArray(e.theme,o)>-1||e.autoHideScrollbar,e.scrollbarPosition=t.inArray(e.theme,s)>-1?"outside":e.scrollbarPosition},p=function(e){a[e]&&(clearTimeout(a[e]),Q(a,e))},m=function(e){return"yx"===e||"xy"===e||"auto"===e?"yx":"x"===e||"horizontal"===e?"x":"y"},g=function(e){return"stepped"===e||"pixels"===e||"step"===e||"click"===e?"stepped":"stepless"},v=function(){var e=t(this),i=e.data(n),o=i.opt,s=o.autoExpandScrollbar?" "+c[1]+"_expand":"",a=["<div id='mCSB_"+i.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+i.idx+"_scrollbar mCS-"+o.theme+" mCSB_scrollTools_vertical"+s+"'><div class='"+c[12]+"'><div id='mCSB_"+i.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+i.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+i.idx+"_scrollbar mCS-"+o.theme+" mCSB_scrollTools_horizontal"+s+"'><div class='"+c[12]+"'><div id='mCSB_"+i.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],l="yx"===o.axis?"mCSB_vertical_horizontal":"x"===o.axis?"mCSB_horizontal":"mCSB_vertical",u="yx"===o.axis?a[0]+a[1]:"x"===o.axis?a[1]:a[0],h="yx"===o.axis?"<div id='mCSB_"+i.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",d=o.autoHideScrollbar?" "+c[6]:"",f="x"!==o.axis&&"rtl"===i.langDir?" "+c[7]:"";o.setWidth&&e.css("width",o.setWidth),o.setHeight&&e.css("height",o.setHeight),o.setLeft="y"!==o.axis&&"rtl"===i.langDir?"989999px":o.setLeft,e.addClass(r+" _"+n+"_"+i.idx+d+f).wrapInner("<div id='mCSB_"+i.idx+"' class='mCustomScrollBox mCS-"+o.theme+" "+l+"'><div id='mCSB_"+i.idx+"_container' class='mCSB_container' style='position:relative; top:"+o.setTop+"; left:"+o.setLeft+";' dir='"+i.langDir+"' /></div>");var p=t("#mCSB_"+i.idx),m=t("#mCSB_"+i.idx+"_container");"y"===o.axis||o.advanced.autoExpandHorizontalScroll||m.css("width",y(m)),"outside"===o.scrollbarPosition?("static"===e.css("position")&&e.css("position","relative"),e.css("overflow","visible"),p.addClass("mCSB_outside").after(u)):(p.addClass("mCSB_inside").append(u),m.wrap(h)),w.call(this);var g=[t("#mCSB_"+i.idx+"_dragger_vertical"),t("#mCSB_"+i.idx+"_dragger_horizontal")];g[0].css("min-height",g[0].height()),g[1].css("min-width",g[1].width())},y=function(e){var r=[e[0].scrollWidth,Math.max.apply(Math,e.children().map((function(){return t(this).outerWidth(!0)})).get())],n=e.parent().width();return r[0]>n?r[0]:r[1]>n?r[1]:"100%"},b=function(){var e=t(this).data(n),r=e.opt,i=t("#mCSB_"+e.idx+"_container");if(r.advanced.autoExpandHorizontalScroll&&"y"!==r.axis){i.css({width:"auto","min-width":0,"overflow-x":"scroll"});var o=Math.ceil(i[0].scrollWidth);3===r.advanced.autoExpandHorizontalScroll||2!==r.advanced.autoExpandHorizontalScroll&&o>i.parent().width()?i.css({width:o,"min-width":"100%","overflow-x":"inherit"}):i.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(i[0].getBoundingClientRect().right+.4)-Math.floor(i[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap()}},w=function(){var e=t(this).data(n),r=e.opt,i=t(".mCSB_"+e.idx+"_scrollbar:first"),o=re(r.scrollButtons.tabindex)?"tabindex='"+r.scrollButtons.tabindex+"'":"",s=["<a href='#' class='"+c[13]+"' "+o+" />","<a href='#' class='"+c[14]+"' "+o+" />","<a href='#' class='"+c[15]+"' "+o+" />","<a href='#' class='"+c[16]+"' "+o+" />"],a=["x"===r.axis?s[2]:s[0],"x"===r.axis?s[3]:s[1],s[2],s[3]];r.scrollButtons.enable&&i.prepend(a[0]).append(a[1]).next(".mCSB_scrollTools").prepend(a[2]).append(a[3])},C=function(){var e=t(this).data(n),r=t("#mCSB_"+e.idx),i=t("#mCSB_"+e.idx+"_container"),o=[t("#mCSB_"+e.idx+"_dragger_vertical"),t("#mCSB_"+e.idx+"_dragger_horizontal")],s=[r.height()/i.outerHeight(!1),r.width()/i.outerWidth(!1)],a=[parseInt(o[0].css("min-height")),Math.round(s[0]*o[0].parent().height()),parseInt(o[1].css("min-width")),Math.round(s[1]*o[1].parent().width())],u=l&&a[1]<a[0]?a[0]:a[1],c=l&&a[3]<a[2]?a[2]:a[3];o[0].css({height:u,"max-height":o[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":a[0]+"px"}),o[1].css({width:c,"max-width":o[1].parent().width()-10})},_=function(){var e=t(this).data(n),r=t("#mCSB_"+e.idx),i=t("#mCSB_"+e.idx+"_container"),o=[t("#mCSB_"+e.idx+"_dragger_vertical"),t("#mCSB_"+e.idx+"_dragger_horizontal")],s=[i.outerHeight(!1)-r.height(),i.outerWidth(!1)-r.width()],a=[s[0]/(o[0].parent().height()-o[0].height()),s[1]/(o[1].parent().width()-o[1].width())];e.scrollRatio={y:a[0],x:a[1]}},S=function(e,t,r){var n=r?c[0]+"_expanded":"",i=e.closest(".mCSB_scrollTools");"active"===t?(e.toggleClass(c[0]+" "+n),i.toggleClass(c[1]),e[0]._draggable=e[0]._draggable?0:1):e[0]._draggable||("hide"===t?(e.removeClass(c[0]),i.removeClass(c[1])):(e.addClass(c[0]),i.addClass(c[1])))},x=function(){var e=t(this).data(n),r=t("#mCSB_"+e.idx),i=t("#mCSB_"+e.idx+"_container"),o=null==e.overflowed?i.height():i.outerHeight(!1),s=null==e.overflowed?i.width():i.outerWidth(!1),a=i[0].scrollHeight,l=i[0].scrollWidth;return a>o&&(o=a),l>s&&(s=l),[o>r.height(),s>r.width()]},k=function(){var e=t(this),r=e.data(n),i=r.opt,o=t("#mCSB_"+r.idx),s=t("#mCSB_"+r.idx+"_container"),a=[t("#mCSB_"+r.idx+"_dragger_vertical"),t("#mCSB_"+r.idx+"_dragger_horizontal")];if(K(e),("x"!==i.axis&&!r.overflowed[0]||"y"===i.axis&&r.overflowed[0])&&(a[0].add(s).css("top",0),J(e,"_resetY")),"y"!==i.axis&&!r.overflowed[1]||"x"===i.axis&&r.overflowed[1]){var l=dx=0;"rtl"===r.langDir&&(l=o.width()-s.outerWidth(!1),dx=Math.abs(l/r.scrollRatio.x)),s.css("left",l),a[1].css("left",dx),J(e,"_resetX")}},T=function(){var e=t(this),r=e.data(n),i=r.opt;if(!r.bindEvents){if(P.call(this),i.contentTouchScroll&&O.call(this),I.call(this),i.mouseWheel.enable){function o(){s=setTimeout((function(){t.event.special.mousewheel?(clearTimeout(s),A.call(e[0])):o()}),100)}var s;o()}$.call(this),B.call(this),i.advanced.autoScrollOnFocus&&L.call(this),i.scrollButtons.enable&&V.call(this),i.keyboard.enable&&H.call(this),r.bindEvents=!0}},R=function(){var e=t(this),r=e.data(n),i=r.opt,o=n+"_"+r.idx,s=".mCSB_"+r.idx+"_scrollbar",a=t("#mCSB_"+r.idx+",#mCSB_"+r.idx+"_container,#mCSB_"+r.idx+"_container_wrapper,"+s+" ."+c[12]+",#mCSB_"+r.idx+"_dragger_vertical,#mCSB_"+r.idx+"_dragger_horizontal,"+s+">a"),l=t("#mCSB_"+r.idx+"_container");i.advanced.releaseDraggableSelectors&&a.add(t(i.advanced.releaseDraggableSelectors)),i.advanced.extraDraggableSelectors&&a.add(t(i.advanced.extraDraggableSelectors)),r.bindEvents&&(t(document).add(t(!D()||top.document)).unbind("."+o),a.each((function(){t(this).unbind("."+o)})),clearTimeout(e[0]._focusTimeout),Q(e[0],"_focusTimeout"),clearTimeout(r.sequential.step),Q(r.sequential,"step"),clearTimeout(l[0].onCompleteTimeout),Q(l[0],"onCompleteTimeout"),r.bindEvents=!1)},E=function(e){var r=t(this),i=r.data(n),o=i.opt,s=t("#mCSB_"+i.idx+"_container_wrapper"),a=s.length?s:t("#mCSB_"+i.idx+"_container"),l=[t("#mCSB_"+i.idx+"_scrollbar_vertical"),t("#mCSB_"+i.idx+"_scrollbar_horizontal")],u=[l[0].find(".mCSB_dragger"),l[1].find(".mCSB_dragger")];"x"!==o.axis&&(i.overflowed[0]&&!e?(l[0].add(u[0]).add(l[0].children("a")).css("display","block"),a.removeClass(c[8]+" "+c[10])):(o.alwaysShowScrollbar?(2!==o.alwaysShowScrollbar&&u[0].css("display","none"),a.removeClass(c[10])):(l[0].css("display","none"),a.addClass(c[10])),a.addClass(c[8]))),"y"!==o.axis&&(i.overflowed[1]&&!e?(l[1].add(u[1]).add(l[1].children("a")).css("display","block"),a.removeClass(c[9]+" "+c[11])):(o.alwaysShowScrollbar?(2!==o.alwaysShowScrollbar&&u[1].css("display","none"),a.removeClass(c[11])):(l[1].css("display","none"),a.addClass(c[11])),a.addClass(c[9]))),i.overflowed[0]||i.overflowed[1]?r.removeClass(c[5]):r.addClass(c[5])},M=function(e){var r=e.type,n=e.target.ownerDocument!==document&&null!==frameElement?[t(frameElement).offset().top,t(frameElement).offset().left]:null,i=D()&&e.target.ownerDocument!==top.document&&null!==frameElement?[t(e.view.frameElement).offset().top,t(e.view.frameElement).offset().left]:[0,0];switch(r){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return n?[e.originalEvent.pageY-n[0]+i[0],e.originalEvent.pageX-n[1]+i[1],!1]:[e.originalEvent.pageY,e.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var o=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],s=e.originalEvent.touches.length||e.originalEvent.changedTouches.length;return e.target.ownerDocument!==document?[o.screenY,o.screenX,s>1]:[o.pageY,o.pageX,s>1];default:return n?[e.pageY-n[0]+i[0],e.pageX-n[1]+i[1],!1]:[e.pageY,e.pageX,!1]}},P=function(){var e,r,i,o=t(this),s=o.data(n),a=s.opt,c=n+"_"+s.idx,h=["mCSB_"+s.idx+"_dragger_vertical","mCSB_"+s.idx+"_dragger_horizontal"],d=t("#mCSB_"+s.idx+"_container"),f=t("#"+h[0]+",#"+h[1]),p=a.advanced.releaseDraggableSelectors?f.add(t(a.advanced.releaseDraggableSelectors)):f,m=a.advanced.extraDraggableSelectors?t(!D()||top.document).add(t(a.advanced.extraDraggableSelectors)):t(!D()||top.document);function g(t,r,n,i){if(d[0].idleTimer=a.scrollInertia<233?250:0,e.attr("id")===h[1])var l="x",u=(e[0].offsetLeft-r+i)*s.scrollRatio.x;else l="y",u=(e[0].offsetTop-t+n)*s.scrollRatio.y;J(o,u.toString(),{dir:l,drag:!0})}f.bind("contextmenu."+c,(function(e){e.preventDefault()})).bind("mousedown."+c+" touchstart."+c+" pointerdown."+c+" MSPointerDown."+c,(function(n){if(n.stopImmediatePropagation(),n.preventDefault(),ee(n)){u=!0,l&&(document.onselectstart=function(){return!1}),N.call(d,!1),K(o);var s=(e=t(this)).offset(),c=M(n)[0]-s.top,h=M(n)[1]-s.left,f=e.height()+s.top,p=e.width()+s.left;c<f&&c>0&&h<p&&h>0&&(r=c,i=h),S(e,"active",a.autoExpandScrollbar)}})).bind("touchmove."+c,(function(t){t.stopImmediatePropagation(),t.preventDefault();var n=e.offset(),o=M(t)[0]-n.top,s=M(t)[1]-n.left;g(r,i,o,s)})),t(document).add(m).bind("mousemove."+c+" pointermove."+c+" MSPointerMove."+c,(function(t){if(e){var n=e.offset(),o=M(t)[0]-n.top,s=M(t)[1]-n.left;if(r===o&&i===s)return;g(r,i,o,s)}})).add(p).bind("mouseup."+c+" touchend."+c+" pointerup."+c+" MSPointerUp."+c,(function(t){e&&(S(e,"active",a.autoExpandScrollbar),e=null),u=!1,l&&(document.onselectstart=null),N.call(d,!0)}))},O=function(){var r,i,o,s,a,l,c,h,d,f,p,m,g,v,y=t(this),b=y.data(n),w=b.opt,C=n+"_"+b.idx,_=t("#mCSB_"+b.idx),S=t("#mCSB_"+b.idx+"_container"),x=[t("#mCSB_"+b.idx+"_dragger_vertical"),t("#mCSB_"+b.idx+"_dragger_horizontal")],k=[],T=[],R=0,E="yx"===w.axis?"none":"all",P=[],O=S.find("iframe"),I=["touchstart."+C+" pointerdown."+C+" MSPointerDown."+C,"touchmove."+C+" pointermove."+C+" MSPointerMove."+C,"touchend."+C+" pointerup."+C+" MSPointerUp."+C],A=void 0!==document.body.style.touchAction&&""!==document.body.style.touchAction;function j(t){if(!te(t)||u||M(t)[2])e=0;else{e=1,g=0,v=0,r=1,y.removeClass("mCS_touch_action");var n=S.offset();i=M(t)[0]-n.top,o=M(t)[1]-n.left,P=[M(t)[0],M(t)[1]]}}function N(e){if(te(e)&&!u&&!M(e)[2]&&(w.documentTouchScroll||e.preventDefault(),e.stopImmediatePropagation(),(!v||g)&&r)){c=Y();var t=_.offset(),n=M(e)[0]-t.top,s=M(e)[1]-t.left,a="mcsLinearOut";if(k.push(n),T.push(s),P[2]=Math.abs(M(e)[0]-P[0]),P[3]=Math.abs(M(e)[1]-P[1]),b.overflowed[0])var l=x[0].parent().height()-x[0].height(),h=i-n>0&&n-i>-l*b.scrollRatio.y&&(2*P[3]<P[2]||"yx"===w.axis);if(b.overflowed[1])var d=x[1].parent().width()-x[1].width(),f=o-s>0&&s-o>-d*b.scrollRatio.x&&(2*P[2]<P[3]||"yx"===w.axis);h||f?(A||e.preventDefault(),g=1):(v=1,y.addClass("mCS_touch_action")),A&&e.preventDefault(),p="yx"===w.axis?[i-n,o-s]:"x"===w.axis?[null,o-s]:[i-n,null],S[0].idleTimer=250,b.overflowed[0]&&B(p[0],R,a,"y","all",!0),b.overflowed[1]&&B(p[1],R,a,"x",E,!0)}}function F(t){if(!te(t)||u||M(t)[2])e=0;else{e=1,t.stopImmediatePropagation(),K(y),l=Y();var r=_.offset();s=M(t)[0]-r.top,a=M(t)[1]-r.left,k=[],T=[]}}function $(e){if(te(e)&&!u&&!M(e)[2]){r=0,e.stopImmediatePropagation(),g=0,v=0,h=Y();var t=_.offset(),n=M(e)[0]-t.top,i=M(e)[1]-t.left;if(!(h-c>30)){var o="mcsEaseOut",y=(f=1e3/(h-l))<2.5,C=y?[k[k.length-2],T[T.length-2]]:[0,0];d=y?[n-C[0],i-C[1]]:[n-s,i-a];var x=[Math.abs(d[0]),Math.abs(d[1])];f=y?[Math.abs(d[0]/4),Math.abs(d[1]/4)]:[f,f];var R=[Math.abs(S[0].offsetTop)-d[0]*L(x[0]/f[0],f[0]),Math.abs(S[0].offsetLeft)-d[1]*L(x[1]/f[1],f[1])];p="yx"===w.axis?[R[0],R[1]]:"x"===w.axis?[null,R[1]]:[R[0],null],m=[4*x[0]+w.scrollInertia,4*x[1]+w.scrollInertia];var P=parseInt(w.contentTouchScroll)||0;p[0]=x[0]>P?p[0]:0,p[1]=x[1]>P?p[1]:0,b.overflowed[0]&&B(p[0],m[0],o,"y",E,!1),b.overflowed[1]&&B(p[1],m[1],o,"x",E,!1)}}}function L(e,t){var r=[1.5*t,2*t,t/1.5,t/2];return e>90?t>4?r[0]:r[3]:e>60?t>3?r[3]:r[2]:e>30?t>8?r[1]:t>6?r[0]:t>4?t:r[2]:t>8?t:r[3]}function B(e,t,r,n,i,o){e&&J(y,e.toString(),{dur:t,scrollEasing:r,dir:n,overwrite:i,drag:o})}S.bind(I[0],(function(e){j(e)})).bind(I[1],(function(e){N(e)})),_.bind(I[0],(function(e){F(e)})).bind(I[2],(function(e){$(e)})),O.length&&O.each((function(){t(this).bind("load",(function(){D(this)&&t(this.contentDocument||this.contentWindow.document).bind(I[0],(function(e){j(e),F(e)})).bind(I[1],(function(e){N(e)})).bind(I[2],(function(e){$(e)}))}))}))},I=function(){var r,i=t(this),o=i.data(n),s=o.opt,a=o.sequential,l=n+"_"+o.idx,c=t("#mCSB_"+o.idx+"_container"),h=c.parent();function d(){return window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type?document.selection.createRange().text:0}function f(e,t,n){a.type=n&&r?"stepped":"stepless",a.scrollAmount=10,z(i,e,t,"mcsLinearOut",n?60:null)}c.bind("mousedown."+l,(function(t){e||r||(r=1,u=!0)})).add(document).bind("mousemove."+l,(function(t){if(!e&&r&&d()){var n=c.offset(),i=M(t)[0]-n.top+c[0].offsetTop,l=M(t)[1]-n.left+c[0].offsetLeft;i>0&&i<h.height()&&l>0&&l<h.width()?a.step&&f("off",null,"stepped"):("x"!==s.axis&&o.overflowed[0]&&(i<0?f("on",38):i>h.height()&&f("on",40)),"y"!==s.axis&&o.overflowed[1]&&(l<0?f("on",37):l>h.width()&&f("on",39)))}})).bind("mouseup."+l+" dragend."+l,(function(t){e||(r&&(r=0,f("off",null)),u=!1)}))},A=function(){if(t(this).data(n)){var e=t(this),r=e.data(n),i=r.opt,o=n+"_"+r.idx,s=t("#mCSB_"+r.idx),a=[t("#mCSB_"+r.idx+"_dragger_vertical"),t("#mCSB_"+r.idx+"_dragger_horizontal")],u=t("#mCSB_"+r.idx+"_container").find("iframe");u.length&&u.each((function(){t(this).bind("load",(function(){D(this)&&t(this.contentDocument||this.contentWindow.document).bind("mousewheel."+o,(function(e,t){c(e,t)}))}))})),s.bind("mousewheel."+o,(function(e,t){c(e,t)}))}function c(n,o){if(K(e),!F(e,n.target)){var u="auto"!==i.mouseWheel.deltaFactor?parseInt(i.mouseWheel.deltaFactor):l&&n.deltaFactor<100?100:n.deltaFactor||100,c=i.scrollInertia;if("x"===i.axis||"x"===i.mouseWheel.axis)var h="x",d=[Math.round(u*r.scrollRatio.x),parseInt(i.mouseWheel.scrollAmount)],f="auto"!==i.mouseWheel.scrollAmount?d[1]:d[0]>=s.width()?.9*s.width():d[0],p=Math.abs(t("#mCSB_"+r.idx+"_container")[0].offsetLeft),m=a[1][0].offsetLeft,g=a[1].parent().width()-a[1].width(),v="y"===i.mouseWheel.axis?n.deltaY||o:n.deltaX;else h="y",d=[Math.round(u*r.scrollRatio.y),parseInt(i.mouseWheel.scrollAmount)],f="auto"!==i.mouseWheel.scrollAmount?d[1]:d[0]>=s.height()?.9*s.height():d[0],p=Math.abs(t("#mCSB_"+r.idx+"_container")[0].offsetTop),m=a[0][0].offsetTop,g=a[0].parent().height()-a[0].height(),v=n.deltaY||o;"y"===h&&!r.overflowed[0]||"x"===h&&!r.overflowed[1]||((i.mouseWheel.invert||n.webkitDirectionInvertedFromDevice)&&(v=-v),i.mouseWheel.normalizeDelta&&(v=v<0?-1:1),(v>0&&0!==m||v<0&&m!==g||i.mouseWheel.preventDefault)&&(n.stopImmediatePropagation(),n.preventDefault()),n.deltaFactor<5&&!i.mouseWheel.normalizeDelta&&(f=n.deltaFactor,c=17),J(e,(p-v*f).toString(),{dir:h,dur:c}))}}},j=new Object,D=function(e){var r=!1,n=!1,i=null;if(void 0===e?n="#empty":void 0!==t(e).attr("id")&&(n=t(e).attr("id")),!1!==n&&void 0!==j[n])return j[n];if(e){try{i=(e.contentDocument||e.contentWindow.document).body.innerHTML}catch(e){}r=null!==i}else{try{i=top.document.body.innerHTML}catch(e){}r=null!==i}return!1!==n&&(j[n]=r),r},N=function(e){var t=this.find("iframe");if(t.length){var r=e?"auto":"none";t.css("pointer-events",r)}},F=function(e,r){var i=r.nodeName.toLowerCase(),o=e.data(n).opt.mouseWheel.disableOver,s=["select","textarea"];return t.inArray(i,o)>-1&&!(t.inArray(i,s)>-1&&!t(r).is(":focus"))},$=function(){var e,r=t(this),i=r.data(n),o=n+"_"+i.idx,s=t("#mCSB_"+i.idx+"_container"),a=s.parent();t(".mCSB_"+i.idx+"_scrollbar ."+c[12]).bind("mousedown."+o+" touchstart."+o+" pointerdown."+o+" MSPointerDown."+o,(function(r){u=!0,t(r.target).hasClass("mCSB_dragger")||(e=1)})).bind("touchend."+o+" pointerup."+o+" MSPointerUp."+o,(function(e){u=!1})).bind("click."+o,(function(n){if(e&&(e=0,t(n.target).hasClass(c[12])||t(n.target).hasClass("mCSB_draggerRail"))){K(r);var o=t(this),l=o.find(".mCSB_dragger");if(o.parent(".mCSB_scrollTools_horizontal").length>0){if(!i.overflowed[1])return;var u="x",h=n.pageX>l.offset().left?-1:1,d=Math.abs(s[0].offsetLeft)-h*(.9*a.width())}else{if(!i.overflowed[0])return;u="y",h=n.pageY>l.offset().top?-1:1,d=Math.abs(s[0].offsetTop)-h*(.9*a.height())}J(r,d.toString(),{dir:u,scrollEasing:"mcsEaseInOut"})}}))},L=function(){var e=t(this),r=e.data(n),i=r.opt,o=n+"_"+r.idx,s=t("#mCSB_"+r.idx+"_container"),a=s.parent();s.bind("focusin."+o,(function(r){var n=t(document.activeElement),o=s.find(".mCustomScrollBox").length,l=0;n.is(i.advanced.autoScrollOnFocus)&&(K(e),clearTimeout(e[0]._focusTimeout),e[0]._focusTimer=o?(l+17)*o:0,e[0]._focusTimeout=setTimeout((function(){var t=[ne(n)[0],ne(n)[1]],r=[s[0].offsetTop,s[0].offsetLeft],o=[r[0]+t[0]>=0&&r[0]+t[0]<a.height()-n.outerHeight(!1),r[1]+t[1]>=0&&r[0]+t[1]<a.width()-n.outerWidth(!1)],u="yx"!==i.axis||o[0]||o[1]?"all":"none";"x"===i.axis||o[0]||J(e,t[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:u,dur:l}),"y"===i.axis||o[1]||J(e,t[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:u,dur:l})}),e[0]._focusTimer))}))},B=function(){var e=t(this).data(n),r=n+"_"+e.idx,i=t("#mCSB_"+e.idx+"_container").parent();i.bind("scroll."+r,(function(r){0===i.scrollTop()&&0===i.scrollLeft()||t(".mCSB_"+e.idx+"_scrollbar").css("visibility","hidden")}))},V=function(){var e=t(this),r=e.data(n),i=r.opt,o=r.sequential,s=n+"_"+r.idx,a=".mCSB_"+r.idx+"_scrollbar";t(a+">a").bind("contextmenu."+s,(function(e){e.preventDefault()})).bind("mousedown."+s+" touchstart."+s+" pointerdown."+s+" MSPointerDown."+s+" mouseup."+s+" touchend."+s+" pointerup."+s+" MSPointerUp."+s+" mouseout."+s+" pointerout."+s+" MSPointerOut."+s+" click."+s,(function(n){if(n.preventDefault(),ee(n)){var s=t(this).attr("class");switch(o.type=i.scrollButtons.scrollType,n.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===o.type)return;u=!0,r.tweenRunning=!1,a("on",s);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===o.type)return;u=!1,o.dir&&a("off",s);break;case"click":if("stepped"!==o.type||r.tweenRunning)return;a("on",s)}}function a(t,r){o.scrollAmount=i.scrollButtons.scrollAmount,z(e,t,r)}}))},H=function(){var e=t(this),r=e.data(n),i=r.opt,o=r.sequential,s=n+"_"+r.idx,a=t("#mCSB_"+r.idx),l=t("#mCSB_"+r.idx+"_container"),u=l.parent(),c="input,textarea,select,datalist,keygen,[contenteditable='true']",h=l.find("iframe"),d=["blur."+s+" keydown."+s+" keyup."+s];function f(n){switch(n.type){case"blur":r.tweenRunning&&o.dir&&p("off",null);break;case"keydown":case"keyup":var s=n.keyCode?n.keyCode:n.which,a="on";if("x"!==i.axis&&(38===s||40===s)||"y"!==i.axis&&(37===s||39===s)){if((38===s||40===s)&&!r.overflowed[0]||(37===s||39===s)&&!r.overflowed[1])return;"keyup"===n.type&&(a="off"),t(document.activeElement).is(c)||(n.preventDefault(),n.stopImmediatePropagation(),p(a,s))}else if(33===s||34===s){if((r.overflowed[0]||r.overflowed[1])&&(n.preventDefault(),n.stopImmediatePropagation()),"keyup"===n.type){K(e);var h=34===s?-1:1;if("x"===i.axis||"yx"===i.axis&&r.overflowed[1]&&!r.overflowed[0])var d="x",f=Math.abs(l[0].offsetLeft)-h*(.9*u.width());else d="y",f=Math.abs(l[0].offsetTop)-h*(.9*u.height());J(e,f.toString(),{dir:d,scrollEasing:"mcsEaseInOut"})}}else 35!==s&&36!==s||t(document.activeElement).is(c)||((r.overflowed[0]||r.overflowed[1])&&(n.preventDefault(),n.stopImmediatePropagation()),"keyup"!==n.type)||("x"===i.axis||"yx"===i.axis&&r.overflowed[1]&&!r.overflowed[0]?(d="x",f=35===s?Math.abs(u.width()-l.outerWidth(!1)):0):(d="y",f=35===s?Math.abs(u.height()-l.outerHeight(!1)):0),J(e,f.toString(),{dir:d,scrollEasing:"mcsEaseInOut"}))}function p(t,n){o.type=i.keyboard.scrollType,o.scrollAmount=i.keyboard.scrollAmount,"stepped"===o.type&&r.tweenRunning||z(e,t,n)}}h.length&&h.each((function(){t(this).bind("load",(function(){D(this)&&t(this.contentDocument||this.contentWindow.document).bind(d[0],(function(e){f(e)}))}))})),a.attr("tabindex","0").bind(d[0],(function(e){f(e)}))},z=function(e,r,i,o,s){var a=e.data(n),l=a.opt,u=a.sequential,h=t("#mCSB_"+a.idx+"_container"),d="stepped"===u.type,f=l.scrollInertia<26?26:l.scrollInertia,p=l.scrollInertia<1?17:l.scrollInertia;switch(r){case"on":if(u.dir=[i===c[16]||i===c[15]||39===i||37===i?"x":"y",i===c[13]||i===c[15]||38===i||37===i?-1:1],K(e),re(i)&&"stepped"===u.type)return;m(d);break;case"off":g(),(d||a.tweenRunning&&u.dir)&&m(!0)}function m(t){l.snapAmount&&(u.scrollAmount=l.snapAmount instanceof Array?"x"===u.dir[0]?l.snapAmount[1]:l.snapAmount[0]:l.snapAmount);var r="stepped"!==u.type,n=s||(t?r?f/1.5:p:1e3/60),i=t?r?7.5:40:2.5,c=[Math.abs(h[0].offsetTop),Math.abs(h[0].offsetLeft)],d=[a.scrollRatio.y>10?10:a.scrollRatio.y,a.scrollRatio.x>10?10:a.scrollRatio.x],g="x"===u.dir[0]?c[1]+u.dir[1]*(d[1]*i):c[0]+u.dir[1]*(d[0]*i),v="x"===u.dir[0]?c[1]+u.dir[1]*parseInt(u.scrollAmount):c[0]+u.dir[1]*parseInt(u.scrollAmount),y="auto"!==u.scrollAmount?v:g,b=o||(t?r?"mcsLinearOut":"mcsEaseInOut":"mcsLinear"),w=!!t;t&&n<17&&(y="x"===u.dir[0]?c[1]:c[0]),J(e,y.toString(),{dir:u.dir[0],scrollEasing:b,dur:n,onComplete:w}),t?u.dir=!1:(clearTimeout(u.step),u.step=setTimeout((function(){m()}),n))}function g(){clearTimeout(u.step),Q(u,"step"),K(e)}},U=function(e){var r=t(this).data(n).opt,i=[];return"function"==typeof e&&(e=e()),e instanceof Array?i=e.length>1?[e[0],e[1]]:"x"===r.axis?[null,e[0]]:[e[0],null]:(i[0]=e.y?e.y:e.x||"x"===r.axis?null:e,i[1]=e.x?e.x:e.y||"y"===r.axis?null:e),"function"==typeof i[0]&&(i[0]=i[0]()),"function"==typeof i[1]&&(i[1]=i[1]()),i},q=function(e,r){if(null!=e&&void 0!==e){var i=t(this),o=i.data(n),s=o.opt,a=t("#mCSB_"+o.idx+"_container"),l=a.parent(),u=typeof e;r||(r="x"===s.axis?"x":"y");var c="x"===r?a.outerWidth(!1)-l.width():a.outerHeight(!1)-l.height(),d="x"===r?a[0].offsetLeft:a[0].offsetTop,f="x"===r?"left":"top";switch(u){case"function":return e();case"object":if(!(m=e.jquery?e:t(e)).length)return;return"x"===r?ne(m)[1]:ne(m)[0];case"string":case"number":if(re(e))return Math.abs(e);if(-1!==e.indexOf("%"))return Math.abs(c*parseInt(e)/100);if(-1!==e.indexOf("-="))return Math.abs(d-parseInt(e.split("-=")[1]));if(-1!==e.indexOf("+=")){var p=d+parseInt(e.split("+=")[1]);return p>=0?0:Math.abs(p)}if(-1!==e.indexOf("px")&&re(e.split("px")[0]))return Math.abs(e.split("px")[0]);if("top"===e||"left"===e)return 0;if("bottom"===e)return Math.abs(l.height()-a.outerHeight(!1));if("right"===e)return Math.abs(l.width()-a.outerWidth(!1));if("first"===e||"last"===e){var m=a.find(":"+e);return"x"===r?ne(m)[1]:ne(m)[0]}return t(e).length?"x"===r?ne(t(e))[1]:ne(t(e))[0]:(a.css(f,e),void h.update.call(null,i[0]))}}},G=function(e){var r=t(this),i=r.data(n),o=i.opt,s=t("#mCSB_"+i.idx+"_container");if(e)return clearTimeout(s[0].autoUpdate),void Q(s[0],"autoUpdate");function a(){clearTimeout(s[0].autoUpdate),0!==r.parents("html").length?s[0].autoUpdate=setTimeout((function(){return o.advanced.updateOnSelectorChange&&(i.poll.change.n=u(),i.poll.change.n!==i.poll.change.o)?(i.poll.change.o=i.poll.change.n,void d(3)):o.advanced.updateOnContentResize&&(i.poll.size.n=r[0].scrollHeight+r[0].scrollWidth+s[0].offsetHeight+r[0].offsetHeight+r[0].offsetWidth,i.poll.size.n!==i.poll.size.o)?(i.poll.size.o=i.poll.size.n,void d(1)):!o.advanced.updateOnImageLoad||"auto"===o.advanced.updateOnImageLoad&&"y"===o.axis||(i.poll.img.n=s.find("img").length,i.poll.img.n===i.poll.img.o)?void((o.advanced.updateOnSelectorChange||o.advanced.updateOnContentResize||o.advanced.updateOnImageLoad)&&a()):(i.poll.img.o=i.poll.img.n,void s.find("img").each((function(){l(this)})))}),o.advanced.autoUpdateTimeout):r=null}function l(e){if(t(e).hasClass(c[2]))d();else{var r=new Image;r.onload=n(r,i),r.src=e.src}function n(e,t){return function(){return t.apply(e,arguments)}}function i(){this.onload=null,t(e).addClass(c[2]),d(2)}}function u(){!0===o.advanced.updateOnSelectorChange&&(o.advanced.updateOnSelectorChange="*");var e=0,t=s.find(o.advanced.updateOnSelectorChange);return o.advanced.updateOnSelectorChange&&t.length>0&&t.each((function(){e+=this.offsetHeight+this.offsetWidth})),e}function d(e){clearTimeout(s[0].autoUpdate),h.update.call(null,r[0],e)}a()},W=function(e,t,r){return Math.round(e/t)*t-r},K=function(e){var r=e.data(n);t("#mCSB_"+r.idx+"_container,#mCSB_"+r.idx+"_container_wrapper,#mCSB_"+r.idx+"_dragger_vertical,#mCSB_"+r.idx+"_dragger_horizontal").each((function(){Z.call(this)}))},J=function(e,r,i){var o=e.data(n),s=o.opt,a={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:s.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},l=[(i=t.extend(a,i)).dur,i.drag?0:i.dur],u=t("#mCSB_"+o.idx),c=t("#mCSB_"+o.idx+"_container"),h=c.parent(),d=s.callbacks.onTotalScrollOffset?U.call(e,s.callbacks.onTotalScrollOffset):[0,0],f=s.callbacks.onTotalScrollBackOffset?U.call(e,s.callbacks.onTotalScrollBackOffset):[0,0];if(o.trigger=i.trigger,0===h.scrollTop()&&0===h.scrollLeft()||(t(".mCSB_"+o.idx+"_scrollbar").css("visibility","visible"),h.scrollTop(0).scrollLeft(0)),"_resetY"!==r||o.contentReset.y||(k("onOverflowYNone")&&s.callbacks.onOverflowYNone.call(e[0]),o.contentReset.y=1),"_resetX"!==r||o.contentReset.x||(k("onOverflowXNone")&&s.callbacks.onOverflowXNone.call(e[0]),o.contentReset.x=1),"_resetY"!==r&&"_resetX"!==r){if(!o.contentReset.y&&e[0].mcs||!o.overflowed[0]||(k("onOverflowY")&&s.callbacks.onOverflowY.call(e[0]),o.contentReset.x=null),!o.contentReset.x&&e[0].mcs||!o.overflowed[1]||(k("onOverflowX")&&s.callbacks.onOverflowX.call(e[0]),o.contentReset.x=null),s.snapAmount){var p=s.snapAmount instanceof Array?"x"===i.dir?s.snapAmount[1]:s.snapAmount[0]:s.snapAmount;r=W(r,p,s.snapOffset)}switch(i.dir){case"x":var m=t("#mCSB_"+o.idx+"_dragger_horizontal"),g="left",v=c[0].offsetLeft,y=[u.width()-c.outerWidth(!1),m.parent().width()-m.width()],b=[r,0===r?0:r/o.scrollRatio.x],w=d[1],C=f[1],_=w>0?w/o.scrollRatio.x:0,x=C>0?C/o.scrollRatio.x:0;break;case"y":m=t("#mCSB_"+o.idx+"_dragger_vertical"),g="top",v=c[0].offsetTop,y=[u.height()-c.outerHeight(!1),m.parent().height()-m.height()],b=[r,0===r?0:r/o.scrollRatio.y],w=d[0],C=f[0],_=w>0?w/o.scrollRatio.y:0,x=C>0?C/o.scrollRatio.y:0}b[1]<0||0===b[0]&&0===b[1]?b=[0,0]:b[1]>=y[1]?b=[y[0],y[1]]:b[0]=-b[0],e[0].mcs||(R(),k("onInit")&&s.callbacks.onInit.call(e[0])),clearTimeout(c[0].onCompleteTimeout),X(m[0],g,Math.round(b[1]),l[1],i.scrollEasing),!o.tweenRunning&&(0===v&&b[0]>=0||v===y[0]&&b[0]<=y[0])||X(c[0],g,Math.round(b[0]),l[0],i.scrollEasing,i.overwrite,{onStart:function(){i.callbacks&&i.onStart&&!o.tweenRunning&&(k("onScrollStart")&&(R(),s.callbacks.onScrollStart.call(e[0])),o.tweenRunning=!0,S(m),o.cbOffsets=T())},onUpdate:function(){i.callbacks&&i.onUpdate&&k("whileScrolling")&&(R(),s.callbacks.whileScrolling.call(e[0]))},onComplete:function(){if(i.callbacks&&i.onComplete){"yx"===s.axis&&clearTimeout(c[0].onCompleteTimeout);var t=c[0].idleTimer||0;c[0].onCompleteTimeout=setTimeout((function(){k("onScroll")&&(R(),s.callbacks.onScroll.call(e[0])),k("onTotalScroll")&&b[1]>=y[1]-_&&o.cbOffsets[0]&&(R(),s.callbacks.onTotalScroll.call(e[0])),k("onTotalScrollBack")&&b[1]<=x&&o.cbOffsets[1]&&(R(),s.callbacks.onTotalScrollBack.call(e[0])),o.tweenRunning=!1,c[0].idleTimer=0,S(m,"hide")}),t)}}})}function k(e){return o&&s.callbacks[e]&&"function"==typeof s.callbacks[e]}function T(){return[s.callbacks.alwaysTriggerOffsets||v>=y[0]+w,s.callbacks.alwaysTriggerOffsets||v<=-C]}function R(){var t=[c[0].offsetTop,c[0].offsetLeft],r=[m[0].offsetTop,m[0].offsetLeft],n=[c.outerHeight(!1),c.outerWidth(!1)],o=[u.height(),u.width()];e[0].mcs={content:c,top:t[0],left:t[1],draggerTop:r[0],draggerLeft:r[1],topPct:Math.round(100*Math.abs(t[0])/(Math.abs(n[0])-o[0])),leftPct:Math.round(100*Math.abs(t[1])/(Math.abs(n[1])-o[1])),direction:i.dir}}},X=function(e,t,r,n,i,o,s){e._mTween||(e._mTween={top:{},left:{}});var a,l,u=(s=s||{}).onStart||function(){},c=s.onUpdate||function(){},h=s.onComplete||function(){},d=Y(),f=0,p=e.offsetTop,m=e.style,g=e._mTween[t];"left"===t&&(p=e.offsetLeft);var v=r-p;function y(){g.stop||(f||u.call(),f=Y()-d,b(),f>=g.time&&(g.time=f>g.time?f+a-(f-g.time):f+a-1,g.time<f+1&&(g.time=f+1)),g.time<n?g.id=l(y):h.call())}function b(){n>0?(g.currVal=_(g.time,p,v,n,i),m[t]=Math.round(g.currVal)+"px"):m[t]=r+"px",c.call()}function w(){a=1e3/60,g.time=f+a,l=window.requestAnimationFrame?window.requestAnimationFrame:function(e){return b(),setTimeout(e,.01)},g.id=l(y)}function C(){null!=g.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(g.id):clearTimeout(g.id),g.id=null)}function _(e,t,r,n,i){switch(i){case"linear":case"mcsLinear":return r*e/n+t;case"mcsLinearOut":return e/=n,e--,r*Math.sqrt(1-e*e)+t;case"easeInOutSmooth":return(e/=n/2)<1?r/2*e*e+t:-r/2*(--e*(e-2)-1)+t;case"easeInOutStrong":return(e/=n/2)<1?r/2*Math.pow(2,10*(e-1))+t:(e--,r/2*(2-Math.pow(2,-10*e))+t);case"easeInOut":case"mcsEaseInOut":return(e/=n/2)<1?r/2*e*e*e+t:r/2*((e-=2)*e*e+2)+t;case"easeOutSmooth":return e/=n,-r*(--e*e*e*e-1)+t;case"easeOutStrong":return r*(1-Math.pow(2,-10*e/n))+t;default:var o=(e/=n)*e,s=o*e;return t+r*(.499999999999997*s*o+-2.5*o*o+5.5*s+-6.5*o+4*e)}}g.stop=0,"none"!==o&&C(),w()},Y=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},Z=function(){var e=this;e._mTween||(e._mTween={top:{},left:{}});for(var t=["top","left"],r=0;r<t.length;r++){var n=t[r];e._mTween[n].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(e._mTween[n].id):clearTimeout(e._mTween[n].id),e._mTween[n].id=null,e._mTween[n].stop=1)}},Q=function(e,t){try{delete e[t]}catch(r){e[t]=null}},ee=function(e){return!(e.which&&1!==e.which)},te=function(e){var t=e.originalEvent.pointerType;return!(t&&"touch"!==t&&2!==t)},re=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},ne=function(e){var t=e.parents(".mCSB_container");return[e.offset().top-t.offset().top,e.offset().left-t.offset().left]},ie=function(){var e=t();return!!e&&document[e];function t(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}};t.fn[r]=function(e){return h[e]?h[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist"):h.init.apply(this,arguments)},t[r]=function(e){return h[e]?h[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist"):h.init.apply(this,arguments)},t[r].defaults=o,window[r]=!0,t(window).bind("load",(function(){t(i)[r](),t.extend(t.expr[":"],{mcsInView:t.expr[":"].mcsInView||function(e){var r,n,i=t(e),o=i.parents(".mCSB_container");if(o.length)return r=o.parent(),(n=[o[0].offsetTop,o[0].offsetLeft])[0]+ne(i)[0]>=0&&n[0]+ne(i)[0]<r.height()-i.outerHeight(!1)&&n[1]+ne(i)[1]>=0&&n[1]+ne(i)[1]<r.width()-i.outerWidth(!1)},mcsInSight:t.expr[":"].mcsInSight||function(e,r,n){var i,o,s,a,l=t(e),u=l.parents(".mCSB_container"),c="exact"===n[3]?[[1,0],[1,0]]:[[.9,.1],[.6,.4]];if(u.length)return i=[l.outerHeight(!1),l.outerWidth(!1)],s=[u[0].offsetTop+ne(l)[0],u[0].offsetLeft+ne(l)[1]],o=[u.parent()[0].offsetHeight,u.parent()[0].offsetWidth],a=[i[0]<o[0]?c[0]:c[1],i[1]<o[1]?c[0]:c[1]],s[0]-o[0]*a[0][0]<0&&s[0]+i[0]-o[0]*a[0][1]>=0&&s[1]-o[1]*a[1][0]<0&&s[1]+i[1]-o[1]*a[1][1]>=0},mcsOverflow:t.expr[":"].mcsOverflow||function(e){var r=t(e).data(n);if(r)return r.overflowed[0]||r.overflowed[1]}})}))},i=r.amdO,o=e.exports,s="https:"==document.location.protocol?"https:":"http:",a="cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js",i||(o?r(450)(t):t.event.special.mousewheel||t("head").append(decodeURI("%3Cscript src="+s+"//"+a+"%3E%3C/script%3E"))),n()})?n.apply(t,i):n)||(e.exports=o)},6610:function(e,t,r){var n,i,o;i=[],n=function e(){"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{};function n(){var r=t.URL||t.webkitURL||null,n=e.toString();return l.BLOB_URL||(l.BLOB_URL=r.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",n,")();"],{type:"text/javascript"})))}var i=!t.document&&!!t.postMessage,o=t.IS_PAPA_WORKER||!1,s={},a=0,l={};if(l.parse=c,l.unparse=h,l.RECORD_SEP=String.fromCharCode(30),l.UNIT_SEP=String.fromCharCode(31),l.BYTE_ORDER_MARK="\ufeff",l.BAD_DELIMITERS=["\r","\n",'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!i&&!!t.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=w,l.ParserHandle=y,l.NetworkStreamer=f,l.FileStreamer=p,l.StringStreamer=m,l.ReadableStreamStreamer=g,"undefined"==typeof PAPA_BROWSER_CONTEXT&&(l.DuplexStreamStreamer=v),t.jQuery){var u=t.jQuery;u.fn.parse=function(e){var r=e.config||{},n=[];return this.each((function(e){if("INPUT"!==u(this).prop("tagName").toUpperCase()||"file"!==u(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)n.push({file:this.files[i],inputElem:this,instanceConfig:u.extend({},r)})})),i(),this;function i(){if(0!==n.length){var t=n[0];if(E(e.before)){var r=e.before(t.file,t.inputElem);if("object"==typeof r){if("abort"===r.action)return void o("AbortError",t.file,t.inputElem,r.reason);if("skip"===r.action)return void s();"object"==typeof r.config&&(t.instanceConfig=u.extend(t.instanceConfig,r.config))}else if("skip"===r)return void s()}var i=t.instanceConfig.complete;t.instanceConfig.complete=function(e){E(i)&&i(e,t.file,t.inputElem),s()},l.parse(t.file,t.instanceConfig)}else E(e.complete)&&e.complete()}function o(t,r,n,i){E(e.error)&&e.error({name:t},r,n,i)}function s(){n.splice(0,1),i()}}}function c(e,r){var n=(r=r||{}).dynamicTyping||!1;if(E(n)&&(r.dynamicTypingFunction=n,n={}),r.dynamicTyping=n,r.transform=!!E(r.transform)&&r.transform,r.worker&&l.WORKERS_SUPPORTED){var i=C();return i.userStep=r.step,i.userChunk=r.chunk,i.userComplete=r.complete,i.userError=r.error,r.step=E(r.step),r.chunk=E(r.chunk),r.complete=E(r.complete),r.error=E(r.error),delete r.worker,void i.postMessage({input:e,config:r,workerId:i.id})}var o=null;return e===l.NODE_STREAM_INPUT&&"undefined"==typeof PAPA_BROWSER_CONTEXT?(o=new v(r)).getStream():("string"==typeof e?(e=s(e),o=r.download?new f(r):new m(r)):!0===e.readable&&E(e.read)&&E(e.on)?o=new g(r):(t.File&&e instanceof File||e instanceof Object)&&(o=new p(r)),o.stream(e));function s(e){return 65279===e.charCodeAt(0)?e.slice(1):e}}function h(e,t){var r=!1,n=!0,i=",",o="\r\n",s='"',a=s+s,u=!1,c=null,h=!1;f();var d=new RegExp(b(s),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return p(null,e,u);if("object"==typeof e[0])return p(c||Object.keys(e[0]),e,u)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||c),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),p(e.fields||[],e.data||[],u);throw new Error("Unable to serialize unrecognized input");function f(){if("object"==typeof t){if("string"!=typeof t.delimiter||l.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(i=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(r=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(u=t.skipEmptyLines),"string"==typeof t.newline&&(o=t.newline),"string"==typeof t.quoteChar&&(s=t.quoteChar),"boolean"==typeof t.header&&(n=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");c=t.columns}void 0!==t.escapeChar&&(a=t.escapeChar+s),("boolean"==typeof t.escapeFormulae||t.escapeFormulae instanceof RegExp)&&(h=t.escapeFormulae instanceof RegExp?t.escapeFormulae:/^[=+\-@\t\r].*$/)}}function p(e,t,r){var s="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var a=Array.isArray(e)&&e.length>0,l=!Array.isArray(t[0]);if(a&&n){for(var u=0;u<e.length;u++)u>0&&(s+=i),s+=m(e[u],u);t.length>0&&(s+=o)}for(var c=0;c<t.length;c++){var h=a?e.length:t[c].length,d=!1,f=a?0===Object.keys(t[c]).length:0===t[c].length;if(r&&!a&&(d="greedy"===r?""===t[c].join("").trim():1===t[c].length&&0===t[c][0].length),"greedy"===r&&a){for(var p=[],g=0;g<h;g++){var v=l?e[g]:g;p.push(t[c][v])}d=""===p.join("").trim()}if(!d){for(var y=0;y<h;y++){y>0&&!f&&(s+=i);var b=a&&l?e[y]:y;s+=m(t[c][b],y)}c<t.length-1&&(!r||h>0&&!f)&&(s+=o)}}return s}function m(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);var n=!1;h&&"string"==typeof e&&h.test(e)&&(e="'"+e,n=!0);var o=e.toString().replace(d,a);return(n=n||!0===r||"function"==typeof r&&r(e,t)||Array.isArray(r)&&r[t]||g(o,l.BAD_DELIMITERS)||o.indexOf(i)>-1||" "===o.charAt(0)||" "===o.charAt(o.length-1))?s+o+s:o}function g(e,t){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])>-1)return!0;return!1}}function d(e){function r(e){var t=T(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new y(t),this._handle.streamer=this,this._config=t}this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},r.call(this,e),this.parseChunk=function(e,r){if(this.isFirstChunk&&E(this._config.beforeFirstChunk)){var n=this._config.beforeFirstChunk(e);void 0!==n&&(e=n)}this.isFirstChunk=!1,this._halted=!1;var i=this._partialLine+e;this._partialLine="";var s=this._handle.parse(i,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var a=s.meta.cursor;this._finished||(this._partialLine=i.substring(a-this._baseIndex),this._baseIndex=a),s&&s.data&&(this._rowCount+=s.data.length);var u=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(o)t.postMessage({results:s,workerId:l.WORKER_ID,finished:u});else if(E(this._config.chunk)&&!r){if(this._config.chunk(s,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);s=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),this._completed||!u||!E(this._config.complete)||s&&s.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),u||s&&s.meta.paused||this._nextChunk(),s}this._halted=!0},this._sendError=function(e){E(this._config.error)?this._config.error(e):o&&this._config.error&&t.postMessage({workerId:l.WORKER_ID,error:e,finished:!1})}}function f(e){var t;function r(e){var t=e.getResponseHeader("Content-Range");return null===t?-1:parseInt(t.substring(t.lastIndexOf("/")+1))}(e=e||{}).chunkSize||(e.chunkSize=l.RemoteChunkSize),d.call(this,e),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),i||(t.onload=R(this._chunkLoaded,this),t.onerror=R(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var r in e)t.setRequestHeader(r,e[r])}if(this._config.chunkSize){var n=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+n)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}i&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||t.status>=400?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=r(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){var r=t.statusText||e;this._sendError(new Error(r))}}function p(e){var t,r;(e=e||{}).chunkSize||(e.chunkSize=l.LocalChunkSize),d.call(this,e);var n="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,r=e.slice||e.webkitSlice||e.mozSlice,n?((t=new FileReader).onload=R(this._chunkLoaded,this),t.onerror=R(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var i=Math.min(this._start+this._config.chunkSize,this._input.size);e=r.call(e,this._start,i)}var o=t.readAsText(e,this._config.encoding);n||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function m(e){var t;e=e||{},d.call(this,e),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,r=this._config.chunkSize;return r?(e=t.substring(0,r),t=t.substring(r)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function g(e){e=e||{},d.call(this,e);var t=[],r=!0,n=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){n&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):r=!0},this._streamData=R((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=R((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=R((function(){this._streamCleanUp(),n=!0,this._streamData("")}),this),this._streamCleanUp=R((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function v(e){var t=r(4409).Duplex,n=T(e),i=!0,o=!1,s=[],a=null;this._onCsvData=function(e){var t=e.data;a.push(t)||this._handle.paused()||this._handle.pause()},this._onCsvComplete=function(){a.push(null)},n.step=R(this._onCsvData,this),n.complete=R(this._onCsvComplete,this),d.call(this,n),this._nextChunk=function(){o&&1===s.length&&(this._finished=!0),s.length?s.shift()():i=!0},this._addToParseQueue=function(e,t){s.push(R((function(){if(this.parseChunk("string"==typeof e?e:e.toString(n.encoding)),E(t))return t()}),this)),i&&(i=!1,this._nextChunk())},this._onRead=function(){this._handle.paused()&&this._handle.resume()},this._onWrite=function(e,t,r){this._addToParseQueue(e,r)},this._onWriteComplete=function(){o=!0,this._addToParseQueue("")},this.getStream=function(){return a},(a=new t({readableObjectMode:!0,decodeStrings:!1,read:R(this._onRead,this),write:R(this._onWrite,this)})).once("finish",R(this._onWriteComplete,this))}function y(e){var t,r,n,i=Math.pow(2,53),o=-i,s=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,a=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,u=this,c=0,h=0,d=!1,f=!1,p=[],m={data:[],errors:[],meta:{}};if(E(e.step)){var g=e.step;e.step=function(t){if(m=t,_())C();else{if(C(),0===m.data.length)return;c+=t.data.length,e.preview&&c>e.preview?r.abort():(m.data=m.data[0],g(m,u))}}}function v(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function y(e){if(s.test(e)){var t=parseFloat(e);if(t>o&&t<i)return!0}return!1}function C(){return m&&n&&(O("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),n=!1),e.skipEmptyLines&&(m.data=m.data.filter((function(e){return!v(e)}))),_()&&S(),R()}function _(){return e.header&&0===p.length}function S(){if(m)if(Array.isArray(m.data[0])){for(var t=0;_()&&t<m.data.length;t++)m.data[t].forEach(r);m.data.splice(0,1)}else m.data.forEach(r);function r(t,r){E(e.transformHeader)&&(t=e.transformHeader(t,r)),p.push(t)}}function x(t){return e.dynamicTypingFunction&&void 0===e.dynamicTyping[t]&&(e.dynamicTyping[t]=e.dynamicTypingFunction(t)),!0===(e.dynamicTyping[t]||e.dynamicTyping)}function k(e,t){return x(e)?"true"===t||"TRUE"===t||"false"!==t&&"FALSE"!==t&&(y(t)?parseFloat(t):a.test(t)?new Date(t):""===t?null:t):t}function R(){if(!m||!e.header&&!e.dynamicTyping&&!e.transform)return m;function t(t,r){var n,i=e.header?{}:[];for(n=0;n<t.length;n++){var o=n,s=t[n];e.header&&(o=n>=p.length?"__parsed_extra":p[n]),e.transform&&(s=e.transform(s,o)),s=k(o,s),"__parsed_extra"===o?(i[o]=i[o]||[],i[o].push(s)):i[o]=s}return e.header&&(n>p.length?O("FieldMismatch","TooManyFields","Too many fields: expected "+p.length+" fields but parsed "+n,h+r):n<p.length&&O("FieldMismatch","TooFewFields","Too few fields: expected "+p.length+" fields but parsed "+n,h+r)),i}var r=1;return!m.data.length||Array.isArray(m.data[0])?(m.data=m.data.map(t),r=m.data.length):m.data=t(m.data,0),e.header&&m.meta&&(m.meta.fields=p),h+=r,m}function M(t,r,n,i,o){var s,a,u,c;o=o||[",","\t","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var h=0;h<o.length;h++){var d=o[h],f=0,p=0,m=0;u=void 0;for(var g=new w({comments:i,delimiter:d,newline:r,preview:10}).parse(t),y=0;y<g.data.length;y++)if(n&&v(g.data[y]))m++;else{var b=g.data[y].length;p+=b,void 0!==u?b>0&&(f+=Math.abs(b-u),u=b):u=b}g.data.length>0&&(p/=g.data.length-m),(void 0===a||f<=a)&&(void 0===c||p>c)&&p>1.99&&(a=f,s=d,c=p)}return e.delimiter=s,{successful:!!s,bestDelimiter:s}}function P(e,t){e=e.substring(0,1048576);var r=new RegExp(b(t)+"([^]*?)"+b(t),"gm"),n=(e=e.replace(r,"")).split("\r"),i=e.split("\n"),o=i.length>1&&i[0].length<n[0].length;if(1===n.length||o)return"\n";for(var s=0,a=0;a<n.length;a++)"\n"===n[a][0]&&s++;return s>=n.length/2?"\r\n":"\r"}function O(e,t,r,n){var i={type:e,code:t,message:r};void 0!==n&&(i.row=n),m.errors.push(i)}this.parse=function(i,o,s){var a=e.quoteChar||'"';if(e.newline||(e.newline=P(i,a)),n=!1,e.delimiter)E(e.delimiter)&&(e.delimiter=e.delimiter(i),m.meta.delimiter=e.delimiter);else{var u=M(i,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);u.successful?e.delimiter=u.bestDelimiter:(n=!0,e.delimiter=l.DefaultDelimiter),m.meta.delimiter=e.delimiter}var c=T(e);return e.preview&&e.header&&c.preview++,t=i,r=new w(c),m=r.parse(t,o,s),C(),d?{meta:{paused:!0}}:m||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,r.abort(),t=E(e.chunk)?"":t.substring(r.getCharIndex())},this.resume=function(){u.streamer._halted?(d=!1,u.streamer.parseChunk(t,!0)):setTimeout(u.resume,3)},this.aborted=function(){return f},this.abort=function(){f=!0,r.abort(),m.meta.aborted=!0,E(e.complete)&&e.complete(m),t=""}}function b(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function w(e){var t,r=(e=e||{}).delimiter,n=e.newline,i=e.comments,o=e.step,s=e.preview,a=e.fastMode,u=t=void 0===e.quoteChar||null===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(u=e.escapeChar),("string"!=typeof r||l.BAD_DELIMITERS.indexOf(r)>-1)&&(r=","),i===r)throw new Error("Comment character same as delimiter");!0===i?i="#":("string"!=typeof i||l.BAD_DELIMITERS.indexOf(i)>-1)&&(i=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var c=0,h=!1;this.parse=function(l,d,f){if("string"!=typeof l)throw new Error("Input must be a string");var p=l.length,m=r.length,g=n.length,v=i.length,y=E(o);c=0;var w=[],C=[],_=[],S=0;if(!l)return W();if(e.header&&!d){var x=l.split(n)[0].split(r),k="_",T=[],R={},M=!1;for(var P in x){var O=x[P];E(e.transformHeader)&&(O=e.transformHeader(O,P));var I=O,A=R[O]||0;for(A>0&&(M=!0,I=O+k+A),R[O]=A+1;T.includes(I);)I=I+k+A;T.push(I)}if(M){var j=l.split(n);j[0]=T.join(r),l=j.join(n)}}if(a||!1!==a&&-1===l.indexOf(t)){for(var D=l.split(n),N=0;N<D.length;N++){if(_=D[N],c+=_.length,N!==D.length-1)c+=n.length;else if(f)return W();if(!i||_.substring(0,v)!==i){if(y){if(w=[],z(_.split(r)),K(),h)return W()}else z(_.split(r));if(s&&N>=s)return w=w.slice(0,s),W(!0)}}return W()}for(var F=l.indexOf(r,c),$=l.indexOf(n,c),L=new RegExp(b(u)+b(t),"g"),B=l.indexOf(t,c);;)if(l[c]!==t)if(i&&0===_.length&&l.substring(c,c+v)===i){if(-1===$)return W();c=$+g,$=l.indexOf(n,c),F=l.indexOf(r,c)}else if(-1!==F&&(F<$||-1===$))_.push(l.substring(c,F)),c=F+m,F=l.indexOf(r,c);else{if(-1===$)break;if(_.push(l.substring(c,$)),G($+g),y&&(K(),h))return W();if(s&&w.length>=s)return W(!0)}else for(B=c,c++;;){if(-1===(B=l.indexOf(t,B+1)))return f||C.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:w.length,index:c}),q();if(B===p-1)return q(l.substring(c,B).replace(L,t));if(t!==u||l[B+1]!==u){if(t===u||0===B||l[B-1]!==u){-1!==F&&F<B+1&&(F=l.indexOf(r,B+1)),-1!==$&&$<B+1&&($=l.indexOf(n,B+1));var V=U(-1===$?F:Math.min(F,$));if(l.substr(B+1+V,m)===r){_.push(l.substring(c,B).replace(L,t)),c=B+1+V+m,l[B+1+V+m]!==t&&(B=l.indexOf(t,c)),F=l.indexOf(r,c),$=l.indexOf(n,c);break}var H=U($);if(l.substring(B+1+H,B+1+H+g)===n){if(_.push(l.substring(c,B).replace(L,t)),G(B+1+H+g),F=l.indexOf(r,c),B=l.indexOf(t,c),y&&(K(),h))return W();if(s&&w.length>=s)return W(!0);break}C.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:w.length,index:c}),B++}}else B++}return q();function z(e){w.push(e),S=c}function U(e){var t=0;if(-1!==e){var r=l.substring(B+1,e);r&&""===r.trim()&&(t=r.length)}return t}function q(e){return f||(void 0===e&&(e=l.substring(c)),_.push(e),c=p,z(_),y&&K()),W()}function G(e){c=e,z(_),_=[],$=l.indexOf(n,c)}function W(e){return{data:w,errors:C,meta:{delimiter:r,linebreak:n,aborted:h,truncated:!!e,cursor:S+(d||0)}}}function K(){o(W()),w=[],C=[]}},this.abort=function(){h=!0},this.getCharIndex=function(){return c}}function C(){if(!l.WORKERS_SUPPORTED)return!1;var e=n(),r=new t.Worker(e);return r.onmessage=_,r.id=a++,s[r.id]=r,r}function _(e){var t=e.data,r=s[t.workerId],n=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var i={abort:function(){n=!0,S(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:x,resume:x};if(E(r.userStep)){for(var o=0;o<t.results.data.length&&(r.userStep({data:t.results.data[o],errors:t.results.errors,meta:t.results.meta},i),!n);o++);delete t.results}else E(r.userChunk)&&(r.userChunk(t.results,i,t.file),delete t.results)}t.finished&&!n&&S(t.workerId,t.results)}function S(e,t){var r=s[e];E(r.userComplete)&&r.userComplete(t),r.terminate(),delete s[e]}function x(){throw new Error("Not implemented.")}function k(e){var r=e.data;if(void 0===l.WORKER_ID&&r&&(l.WORKER_ID=r.workerId),"string"==typeof r.input)t.postMessage({workerId:l.WORKER_ID,results:l.parse(r.input,r.config),finished:!0});else if(t.File&&r.input instanceof File||r.input instanceof Object){var n=l.parse(r.input,r.config);n&&t.postMessage({workerId:l.WORKER_ID,results:n,finished:!0})}}function T(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var r in e)t[r]=T(e[r]);return t}function R(e,t){return function(){e.apply(t,arguments)}}function E(e){return"function"==typeof e}return o&&(t.onmessage=k),f.prototype=Object.create(d.prototype),f.prototype.constructor=f,p.prototype=Object.create(d.prototype),p.prototype.constructor=p,m.prototype=Object.create(m.prototype),m.prototype.constructor=m,g.prototype=Object.create(d.prototype),g.prototype.constructor=g,"undefined"==typeof PAPA_BROWSER_CONTEXT&&(v.prototype=Object.create(d.prototype),v.prototype.constructor=v),l},void 0===(o="function"==typeof n?n.apply(t,i):n)||(e.exports=o)},4409:()=>{}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}return r.amdO={},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r(3988)})()));